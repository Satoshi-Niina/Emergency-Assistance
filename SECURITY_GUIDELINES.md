# セキュリティガイドライン

## パスワード管理

### ❌ 禁止事項
- パスワードをソースコードにハードコーディングしない
- パスワードを平文でデータベースに保存しない
- パスワードをログファイルに出力しない
- パスワードをGitリポジトリにコミットしない

### ✅ 推奨事項
- パスワードはbcryptでハッシュ化して保存
- ソルトラウンドは12以上を使用
- パスワードは8文字以上、複雑な文字列を使用
- 定期的なパスワード変更を推奨

## ユーザー管理

### 初期パスワード設定
1. 管理者が個別にパスワードを設定
2. 初回ログイン時にパスワード変更を強制
3. 一時パスワードは即座に変更

### パスワードリセット
```bash
# サーバー上で実行
node scripts/set-user-password.js <username> <new_password>
```

### API経由でのパスワードリセット
```bash
curl -X POST https://your-api.com/api/admin/reset-password \
  -H "Content-Type: application/json" \
  -d '{"username":"niina","newPassword":"NewSecurePassword123!"}'
```

## 環境変数

### 機密情報の管理
- データベース接続文字列
- API キー
- セッション秘密鍵
- 暗号化キー

これらはすべて環境変数で管理し、ソースコードに含めない。

## ログ管理

### ログに含めてはいけない情報
- パスワード（平文・ハッシュ問わず）
- 個人情報
- 機密データ
- 認証トークン

## 監査

### 定期的な確認事項
- ユーザーアカウントの有効性
- 不要なアカウントの削除
- パスワードポリシーの遵守
- アクセスログの確認

## 緊急時対応

### セキュリティインシデント発生時
1. 影響を受けたアカウントのパスワードを即座にリセット
2. 関連するセッションを無効化
3. ログを確認して影響範囲を特定
4. 必要に応じてシステム全体のパスワードリセット
