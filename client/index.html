<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <title>Tech Support Assistant</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”§</text></svg>"
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="
      default-src 'self' data: blob:;
      script-src 'self' 'unsafe-inline' 'unsafe-eval' blob:;
      script-src-elem 'self' 'unsafe-inline' blob:;
      style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
      img-src 'self' data: blob: https: http://localhost:* http://127.0.0.1:*;
      media-src 'self' data: blob:;
      connect-src 'self' https: wss: ws: http://localhost:* http://127.0.0.1:*;
      font-src 'self' data: https://fonts.gstatic.com;
      worker-src 'self' blob:;
      frame-src 'self';
    "
    />
    <!-- Runtime configuration -->
    <script>
      // å‹•çš„ç’°å¢ƒè¨­å®šï¼ˆã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ï¼‰
      (function() {
        const isLocalhost = window.location.hostname === 'localhost' || 
                           window.location.hostname === '127.0.0.1' ||
                           window.location.hostname.includes('localhost');
        
        const isAzureStaticWebApp = window.location.hostname.includes('azurestaticapps.net');
        
        // ç’°å¢ƒåˆ¥è¨­å®š
        let config;
        
        if (isLocalhost) {
          // ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ: ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰çµ±åˆã‚µãƒ¼ãƒãƒ¼ä½¿ç”¨
          config = {
            "API_BASE_URL": "http://localhost:8080/api",
            "CORS_ALLOW_ORIGINS": "http://localhost:5173,http://localhost:8080",
            "ENVIRONMENT": "development"
          };
        } else if (isAzureStaticWebApp) {
          // Azure Static Web Apps: æœ¬ç•ªç’°å¢ƒã§çµ±åˆFunctionsä½¿ç”¨
          config = {
            "API_BASE_URL": "/api",
            "CORS_ALLOW_ORIGINS": "https://witty-river-012f39e00.1.azurestaticapps.net",
            "ENVIRONMENT": "production"
          };
        } else {
          // ãã®ä»–ã®ç’°å¢ƒ: Static Web Appçµ±åˆFunctionsä½¿ç”¨
          config = {
            "API_BASE_URL": "/api",
            "CORS_ALLOW_ORIGINS": "*",
            "ENVIRONMENT": "production"
          };
        }
        
        console.log('ğŸ”§ Runtime Config Applied:', {
          hostname: window.location.hostname,
          environment: config.ENVIRONMENT,
          "API_BASE_URL": config.API_BASE_URL,
        });
        
        window.runtimeConfig = config;
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
