<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <title>Tech Support Assistant</title>
  <link rel="icon" type="image/x-icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”§</text></svg>" />
  <meta http-equiv="Content-Security-Policy" content="
      default-src 'self' data: blob:;
      script-src 'self' 'unsafe-inline' 'unsafe-eval' blob:;
      script-src-elem 'self' 'unsafe-inline' blob:;
      style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
      img-src 'self' data: blob: https: http://localhost:* http://127.0.0.1:*;
      media-src 'self' data: blob:;
      connect-src 'self' https: wss: ws: http://localhost:* http://127.0.0.1:*;
      font-src 'self' data: https://fonts.gstatic.com;
      worker-src 'self' blob:;
      frame-src 'self';
    " />
  <!-- Runtime configuration -->
  <script>
    // ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰URLã®è¨­å®šï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«åŸ‹ã‚è¾¼ã¾ã‚Œã‚‹ï¼‰
    // ã“ã®å€¤ã¯ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§è‡ªå‹•çš„ã«ç½®æ›ã•ã‚Œã¾ã™
    // PLACEHOLDER_BACKEND_SERVICE_URL ã¯ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«å®Ÿéš›ã®URLã«ç½®æ›ã•ã‚Œã¾ã™
    window.BACKEND_SERVICE_URL = 'https://emergency-assistance-bfckhjejb3fbf9du.japanwest-01.azurewebsites.net';
    console.log('ğŸ”§ Initial BACKEND_SERVICE_URL:', window.BACKEND_SERVICE_URL);
    // å‹•çš„ç’°å¢ƒè¨­å®šï¼ˆã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ï¼‰
    (function () {
      const isLocalhost = window.location.hostname === 'localhost' ||
        window.location.hostname === '127.0.0.1' ||
        window.location.hostname.includes('localhost');

      const isAzureStaticWebApp = window.location.hostname.includes('azurestaticapps.net');

      // ç’°å¢ƒåˆ¥è¨­å®š
      let config;

      if (isLocalhost) {
        // ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ: ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰çµ±åˆã‚µãƒ¼ãƒãƒ¼ä½¿ç”¨
        config = {
          "API_BASE_URL": "http://localhost:8000/api",
          "CORS_ALLOW_ORIGINS": "http://localhost:5173,http://localhost:8000",
          "ENVIRONMENT": "development"
        };
      } else if (isAzureStaticWebApp) {
        // Azure Static Web Apps: å¤–éƒ¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ç›´æ¥ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        // ç’°å¢ƒå¤‰æ•°ã‹ã‚‰ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰URLã‚’å–å¾—ï¼ˆãƒ“ãƒ«ãƒ‰æ™‚ã«åŸ‹ã‚è¾¼ã¾ã‚Œã‚‹ï¼‰
        // API_BASE_URLã«ã¯/apiã‚’å«ã‚ã‚‹ï¼ˆå®Œå…¨ãªAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURLï¼‰
        const backendUrl = window.BACKEND_SERVICE_URL || '';
        config = {
          "API_BASE_URL": (backendUrl && backendUrl !== 'PLACEHOLDER_BACKEND_SERVICE_URL')
            ? backendUrl + "/api"
            : "https://emergency-assistance-bfckhjejb3fbf9du.japanwest-01.azurewebsites.net/api",
          "CORS_ALLOW_ORIGINS": window.location.origin,
          "ENVIRONMENT": "production"
        };
      } else {
        // ãã®ä»–ã®ç’°å¢ƒ: Static Web Appçµ±åˆFunctionsä½¿ç”¨
        config = {
          "API_BASE_URL": "/api",
          "CORS_ALLOW_ORIGINS": "*",
          "ENVIRONMENT": "production"
        };
      }

      console.log('ğŸ”§ Runtime Config Applied:', {
        hostname: window.location.hostname,
        environment: config.ENVIRONMENT,
        "API_BASE_URL": config.API_BASE_URL,
      });

      window.runtimeConfig = config;
    })();
  </script>
  <script type="module" crossorigin src="/main.B21I5Z2I.mjs"></script>
  <link rel="stylesheet" crossorigin href="/style.CVF4ZoD5.css">
</head>

<body>
  <div id="root"></div>
</body>

</html>
