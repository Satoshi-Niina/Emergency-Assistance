var e,t,n=Object.defineProperty,r=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,a=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=Reflect.get,d=e=>{throw TypeError(e)},p=Math.pow,h=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&h(e,n,t[n]);if(o)for(var n of o(t))c.call(t,n)&&h(e,n,t[n]);return e},m=(e,t)=>r(e,i(t)),v=(e,t)=>{var n={};for(var r in e)l.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&o)for(var r of o(e))t.indexOf(r)<0&&c.call(e,r)&&(n[r]=e[r]);return n},g=(e,t,n)=>h(e,"symbol"!=typeof t?t+"":t,n),y=(e,t,n)=>t.has(e)||d("Cannot "+n),b=(e,t,n)=>(y(e,t,"read from private field"),n?n.call(e):t.get(e)),x=(e,t,n)=>t.has(e)?d("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),w=(e,t,n,r)=>(y(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),S=(e,t,n)=>(y(e,t,"access private method"),n),C=(e,t,n,r)=>({set _(r){w(e,t,r,n)},get _(){return b(e,t,r)}}),E=(e,t,n)=>u(a(e),n,t),T=(e,t,n)=>new Promise((r,i)=>{var s=e=>{try{a(n.next(e))}catch(t){i(t)}},o=e=>{try{a(n.throw(e))}catch(t){i(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);a((n=n.apply(e,t)).next())}),N=(e={"main.js"(e){var t,n,r,i,s,o,a,l,c,u,d,h,y,N,P,R,I,k,j,_,A,O,D,M,L,z,F,B,U,W,H,V,q,G,K,J,Y,Z,Q,X,ee,te,ne,re,ie,se,oe,ae,le,ce,ue,de,pe,he,fe,me,ve,ge,ye,be,xe,we,Se,Ce,Ee,Te,Ne,Pe,Re,Ie,ke,je,_e,Ae,Oe,De,Me,Le,ze;function Fe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Be="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ue(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function We(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}var $e={exports:{}},He={},Ve={exports:{}},qe={},Ge=Symbol.for("react.element"),Ke=Symbol.for("react.portal"),Je=Symbol.for("react.fragment"),Ye=Symbol.for("react.strict_mode"),Ze=Symbol.for("react.profiler"),Qe=Symbol.for("react.provider"),Xe=Symbol.for("react.context"),et=Symbol.for("react.forward_ref"),tt=Symbol.for("react.suspense"),nt=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),it=Symbol.iterator,st={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ot=Object.assign,at={};function lt(e,t,n){this.props=e,this.context=t,this.refs=at,this.updater=n||st}function ct(){}function ut(e,t,n){this.props=e,this.context=t,this.refs=at,this.updater=n||st}lt.prototype.isReactComponent={},lt.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},lt.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},ct.prototype=lt.prototype;var dt=ut.prototype=new ct;dt.constructor=ut,ot(dt,lt.prototype),dt.isPureReactComponent=!0;var pt=Array.isArray,ht=Object.prototype.hasOwnProperty,ft={current:null},mt={key:!0,ref:!0,__self:!0,__source:!0};function vt(e,t,n){var r,i={},s=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)ht.call(t,r)&&!mt.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return{$$typeof:Ge,type:e,key:s,ref:o,props:i,_owner:ft.current}}function gt(e){return"object"==typeof e&&null!==e&&e.$$typeof===Ge}var yt=/\/+/g;function bt(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function xt(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var o=!1;if(null===e)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ge:case Ke:o=!0}}if(o)return i=i(o=e),e=""===r?"."+bt(o,0):r,pt(i)?(n="",null!=e&&(n=e.replace(yt,"$&/")+"/"),xt(i,t,n,"",function(e){return e})):null!=i&&(gt(i)&&(i=function(e,t){return{$$typeof:Ge,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(yt,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=""===r?".":r+":",pt(e))for(var a=0;a<e.length;a++){var l=r+bt(s=e[a],a);o+=xt(s,t,n,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=it&&e[it]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),a=0;!(s=e.next()).done;)o+=xt(s=s.value,t,n,l=r+bt(s,a++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function wt(e,t,n){if(null==e)return e;var r=[],i=0;return xt(e,r,"","",function(e){return t.call(n,e,i++)}),r}function St(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var Ct={current:null},Et={transition:null},Tt={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:Et,ReactCurrentOwner:ft};function Nt(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:wt,forEach:function(e,t,n){wt(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wt(e,function(){t++}),t},toArray:function(e){return wt(e,function(e){return e})||[]},only:function(e){if(!gt(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},qe.Component=lt,qe.Fragment=Je,qe.Profiler=Ze,qe.PureComponent=ut,qe.StrictMode=Ye,qe.Suspense=tt,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tt,qe.act=Nt,qe.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ot({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=ft.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)ht.call(t,l)&&!mt.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==a?a[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ge,type:e.type,key:i,ref:s,props:r,_owner:o}},qe.createContext=function(e){return(e={$$typeof:Xe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:Qe,_context:e},e.Consumer=e},qe.createElement=vt,qe.createFactory=function(e){var t=vt.bind(null,e);return t.type=e,t},qe.createRef=function(){return{current:null}},qe.forwardRef=function(e){return{$$typeof:et,render:e}},qe.isValidElement=gt,qe.lazy=function(e){return{$$typeof:rt,_payload:{_status:-1,_result:e},_init:St}},qe.memo=function(e,t){return{$$typeof:nt,type:e,compare:void 0===t?null:t}},qe.startTransition=function(e){var t=Et.transition;Et.transition={};try{e()}finally{Et.transition=t}},qe.unstable_act=Nt,qe.useCallback=function(e,t){return Ct.current.useCallback(e,t)},qe.useContext=function(e){return Ct.current.useContext(e)},qe.useDebugValue=function(){},qe.useDeferredValue=function(e){return Ct.current.useDeferredValue(e)},qe.useEffect=function(e,t){return Ct.current.useEffect(e,t)},qe.useId=function(){return Ct.current.useId()},qe.useImperativeHandle=function(e,t,n){return Ct.current.useImperativeHandle(e,t,n)},qe.useInsertionEffect=function(e,t){return Ct.current.useInsertionEffect(e,t)},qe.useLayoutEffect=function(e,t){return Ct.current.useLayoutEffect(e,t)},qe.useMemo=function(e,t){return Ct.current.useMemo(e,t)},qe.useReducer=function(e,t,n){return Ct.current.useReducer(e,t,n)},qe.useRef=function(e){return Ct.current.useRef(e)},qe.useState=function(e){return Ct.current.useState(e)},qe.useSyncExternalStore=function(e,t,n){return Ct.current.useSyncExternalStore(e,t,n)},qe.useTransition=function(){return Ct.current.useTransition()},qe.version="18.3.1",Ve.exports=qe;var Pt=Ve.exports;const Rt=Ue(Pt),It=Fe({__proto__:null,default:Rt},[Pt]);
/**
     * @license React
     * react-jsx-runtime.production.min.js
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     */
var kt=Pt,jt=Symbol.for("react.element"),_t=Symbol.for("react.fragment"),At=Object.prototype.hasOwnProperty,Ot=kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dt={key:!0,ref:!0,__self:!0,__source:!0};function Mt(e,t,n){var r,i={},s=null,o=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(o=t.ref),t)At.call(t,r)&&!Dt.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:jt,type:e,key:s,ref:o,props:i,_owner:Ot.current}}He.Fragment=_t,He.jsx=Mt,He.jsxs=Mt,$e.exports=He;var Lt=$e.exports,zt={exports:{}},Ft={},Bt={exports:{}},Ut={};
/**
     * @license React
     * scheduler.production.min.js
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,h=!1,f=!1,m=!1,v="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function x(e){if(m=!1,b(e),!f)if(null!==n(l))f=!0,_(w);else{var t=n(c);null!==t&&A(x,t.startTime-e)}}function w(t,i){f=!1,m&&(m=!1,g(T),T=-1),h=!0;var s=p;try{for(b(i),d=n(l);null!==d&&(!(d.expirationTime>i)||t&&!R());){var o=d.callback;if("function"==typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?d.callback=a:d===n(l)&&r(l),b(i)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var v=n(c);null!==v&&A(x,v.startTime-i),u=!1}return u}finally{d=null,p=s,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,E=null,T=-1,N=5,P=-1;function R(){return!(e.unstable_now()-P<N)}function I(){if(null!==E){var t=e.unstable_now();P=t;var n=!0;try{n=E(!0,t)}finally{n?S():(C=!1,E=null)}}else C=!1}if("function"==typeof y)S=function(){y(I)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,j=k.port2;k.port1.onmessage=I,S=function(){j.postMessage(null)}}else S=function(){v(I,0)};function _(e){E=e,C||(C=!0,S())}function A(t,n){T=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||h||(f=!0,_(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_scheduleCallback=function(r,i,s){var o=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(m?(g(T),T=-1):m=!0,A(x,s-o))):(r.sortIndex=a,t(l,r),f||h||(f=!0,_(w))),r},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}}(Ut),Bt.exports=Ut;var Wt=Bt.exports,$t=Pt,Ht=Wt;
/**
     * @license React
     * react-dom.production.min.js
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     */function Vt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qt=new Set,Gt={};function Kt(e,t){Jt(e,t),Jt(e+"Capture",t)}function Jt(e,t){for(Gt[e]=t,e=0;e<t.length;e++)qt.add(t[e])}var Yt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Zt=Object.prototype.hasOwnProperty,Qt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xt={},en={};function tn(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nn[e]=new tn(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nn[t]=new tn(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){nn[e]=new tn(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nn[e]=new tn(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nn[e]=new tn(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){nn[e]=new tn(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){nn[e]=new tn(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){nn[e]=new tn(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){nn[e]=new tn(e,5,!1,e.toLowerCase(),null,!1,!1)});var rn=/[\-:]([a-z])/g;function sn(e){return e[1].toUpperCase()}function on(e,t,n,r){var i=nn.hasOwnProperty(t)?nn[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!Zt.call(en,e)||!Zt.call(Xt,e)&&(Qt.test(e)?en[e]=!0:(Xt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rn,sn);nn[t]=new tn(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rn,sn);nn[t]=new tn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rn,sn);nn[t]=new tn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){nn[e]=new tn(e,1,!1,e.toLowerCase(),null,!1,!1)}),nn.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){nn[e]=new tn(e,1,!1,e.toLowerCase(),null,!0,!0)});var an=$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ln=Symbol.for("react.element"),cn=Symbol.for("react.portal"),un=Symbol.for("react.fragment"),dn=Symbol.for("react.strict_mode"),pn=Symbol.for("react.profiler"),hn=Symbol.for("react.provider"),fn=Symbol.for("react.context"),mn=Symbol.for("react.forward_ref"),vn=Symbol.for("react.suspense"),gn=Symbol.for("react.suspense_list"),yn=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),xn=Symbol.for("react.offscreen"),wn=Symbol.iterator;function Sn(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=wn&&e[wn]||e["@@iterator"])?e:null}var Cn,En=Object.assign;function Tn(e){if(void 0===Cn)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Cn=t&&t[1]||""}return"\n"+Cn+e}var Nn=!1;function Pn(e,t){if(!e||Nn)return"";Nn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{Nn=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Tn(e):""}function Rn(e){switch(e.tag){case 5:return Tn(e.type);case 16:return Tn("Lazy");case 13:return Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 2:case 15:return e=Pn(e.type,!1);case 11:return e=Pn(e.type.render,!1);case 1:return e=Pn(e.type,!0);default:return""}}function In(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case un:return"Fragment";case cn:return"Portal";case pn:return"Profiler";case dn:return"StrictMode";case vn:return"Suspense";case gn:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case fn:return(e.displayName||"Context")+".Consumer";case hn:return(e._context.displayName||"Context")+".Provider";case mn:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case yn:return null!==(t=e.displayName||null)?t:In(e.type)||"Memo";case bn:t=e._payload,e=e._init;try{return In(e(t))}catch(n){}}return null}function kn(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return In(t);case 8:return t===dn?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function jn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function _n(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function An(e){e._valueTracker||(e._valueTracker=function(e){var t=_n(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function On(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_n(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Dn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Mn(e,t){var n=t.checked;return En({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ln(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=jn(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function zn(e,t){null!=(t=t.checked)&&on(e,"checked",t,!1)}function Fn(e,t){zn(e,t);var n=jn(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Un(e,t.type,n):t.hasOwnProperty("defaultValue")&&Un(e,t.type,jn(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Bn(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Un(e,t,n){"number"===t&&Dn(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wn=Array.isArray;function $n(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+jn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Hn(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Vt(91));return En({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vn(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Vt(92));if(Wn(n)){if(1<n.length)throw Error(Vt(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:jn(n)}}function qn(e,t){var n=jn(t.value),r=jn(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Gn(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function Kn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jn(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Kn(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Yn,Zn,Qn=(Zn=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Yn=Yn||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return Zn(e,t)})}:Zn);function Xn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var er={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tr=["Webkit","ms","Moz","O"];function nr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||er.hasOwnProperty(e)&&er[e]?(""+t).trim():t+"px"}function rr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(er).forEach(function(e){tr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),er[t]=er[e]})});var ir=En({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(e,t){if(t){if(ir[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Vt(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Vt(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Vt(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Vt(62))}}function or(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function lr(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var cr=null,ur=null,dr=null;function pr(e){if(e=oa(e)){if("function"!=typeof cr)throw Error(Vt(280));var t=e.stateNode;t&&(t=la(t),cr(e.stateNode,e.type,t))}}function hr(e){ur?dr?dr.push(e):dr=[e]:ur=e}function fr(){if(ur){var e=ur,t=dr;if(dr=ur=null,pr(e),t)for(e=0;e<t.length;e++)pr(t[e])}}function mr(e,t){return e(t)}function vr(){}var gr=!1;function yr(e,t,n){if(gr)return e(t,n);gr=!0;try{return mr(e,t,n)}finally{gr=!1,(null!==ur||null!==dr)&&(vr(),fr())}}function br(e,t){var n=e.stateNode;if(null===n)return null;var r=la(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Vt(231,t,typeof n));return n}var xr=!1;if(Yt)try{var wr={};Object.defineProperty(wr,"passive",{get:function(){xr=!0}}),window.addEventListener("test",wr,wr),window.removeEventListener("test",wr,wr)}catch(Zn){xr=!1}function Sr(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Cr=!1,Er=null,Tr=!1,Nr=null,Pr={onError:function(e){Cr=!0,Er=e}};function Rr(e,t,n,r,i,s,o,a,l){Cr=!1,Er=null,Sr.apply(Pr,arguments)}function Ir(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function kr(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function jr(e){if(Ir(e)!==e)throw Error(Vt(188))}function _r(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ir(e)))throw Error(Vt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jr(i),e;if(s===r)return jr(i),t;s=s.sibling}throw Error(Vt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Vt(189))}}if(n.alternate!==r)throw Error(Vt(190))}if(3!==n.tag)throw Error(Vt(188));return n.stateNode.current===n?e:t}(e))?Ar(e):null}function Ar(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ar(e);if(null!==t)return t;e=e.sibling}return null}var Or=Ht.unstable_scheduleCallback,Dr=Ht.unstable_cancelCallback,Mr=Ht.unstable_shouldYield,Lr=Ht.unstable_requestPaint,zr=Ht.unstable_now,Fr=Ht.unstable_getCurrentPriorityLevel,Br=Ht.unstable_ImmediatePriority,Ur=Ht.unstable_UserBlockingPriority,Wr=Ht.unstable_NormalPriority,$r=Ht.unstable_LowPriority,Hr=Ht.unstable_IdlePriority,Vr=null,qr=null,Gr=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Kr(e)/Jr|0)|0},Kr=Math.log,Jr=Math.LN2,Yr=64,Zr=4194304;function Qr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xr(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=Qr(a):0!==(s&=o)&&(r=Qr(s))}else 0!==(o=n&~i)?r=Qr(o):0!==s&&(r=Qr(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Gr(t)),r|=e[n],t&=~i;return r}function ei(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ti(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ni(){var e=Yr;return!(4194240&(Yr<<=1))&&(Yr=64),e}function ri(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ii(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-Gr(t)]=n}function si(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Gr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var oi=0;function ai(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var li,ci,ui,di,pi,hi=!1,fi=[],mi=null,vi=null,gi=null,yi=new Map,bi=new Map,xi=[],wi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Si(e,t){switch(e){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":yi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bi.delete(t.pointerId)}}function Ci(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=oa(t))&&ci(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ei(e){var t=sa(e.target);if(null!==t){var n=Ir(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=kr(n)))return e.blockedOn=t,void pi(e.priority,function(){ui(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ti(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Mi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=oa(n))&&ci(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ar=r,n.target.dispatchEvent(r),ar=null,t.shift()}return!0}function Ni(e,t,n){Ti(e)&&n.delete(t)}function Pi(){hi=!1,null!==mi&&Ti(mi)&&(mi=null),null!==vi&&Ti(vi)&&(vi=null),null!==gi&&Ti(gi)&&(gi=null),yi.forEach(Ni),bi.forEach(Ni)}function Ri(e,t){e.blockedOn===t&&(e.blockedOn=null,hi||(hi=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,Pi)))}function Ii(e){function t(t){return Ri(t,e)}if(0<fi.length){Ri(fi[0],e);for(var n=1;n<fi.length;n++){var r=fi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==mi&&Ri(mi,e),null!==vi&&Ri(vi,e),null!==gi&&Ri(gi,e),yi.forEach(t),bi.forEach(t),n=0;n<xi.length;n++)(r=xi[n]).blockedOn===e&&(r.blockedOn=null);for(;0<xi.length&&null===(n=xi[0]).blockedOn;)Ei(n),null===n.blockedOn&&xi.shift()}var ki=an.ReactCurrentBatchConfig,ji=!0;function _i(e,t,n,r){var i=oi,s=ki.transition;ki.transition=null;try{oi=1,Oi(e,t,n,r)}finally{oi=i,ki.transition=s}}function Ai(e,t,n,r){var i=oi,s=ki.transition;ki.transition=null;try{oi=4,Oi(e,t,n,r)}finally{oi=i,ki.transition=s}}function Oi(e,t,n,r){if(ji){var i=Mi(e,t,n,r);if(null===i)jo(e,t,r,Di,n),Si(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return mi=Ci(mi,e,t,n,r,i),!0;case"dragenter":return vi=Ci(vi,e,t,n,r,i),!0;case"mouseover":return gi=Ci(gi,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return yi.set(s,Ci(yi.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,bi.set(s,Ci(bi.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Si(e,r),4&t&&-1<wi.indexOf(e)){for(;null!==i;){var s=oa(i);if(null!==s&&li(s),null===(s=Mi(e,t,n,r))&&jo(e,t,r,Di,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else jo(e,t,r,null,n)}}var Di=null;function Mi(e,t,n,r){if(Di=null,null!==(e=sa(e=lr(r))))if(null===(t=Ir(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=kr(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Di=e,null}function Li(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fr()){case Br:return 1;case Ur:return 4;case Wr:case $r:return 16;case Hr:return 536870912;default:return 16}default:return 16}}var zi=null,Fi=null,Bi=null;function Ui(){if(Bi)return Bi;var e,t,n=Fi,r=n.length,i="value"in zi?zi.value:zi.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Bi=i.slice(e,1<t?1-t:void 0)}function Wi(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function $i(){return!0}function Hi(){return!1}function Vi(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?$i:Hi,this.isPropagationStopped=Hi,this}return En(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),t}var qi,Gi,Ki,Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yi=Vi(Ji),Zi=En({},Ji,{view:0,detail:0}),Qi=Vi(Zi),Xi=En({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ds,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ki&&(Ki&&"mousemove"===e.type?(qi=e.screenX-Ki.screenX,Gi=e.screenY-Ki.screenY):Gi=qi=0,Ki=e),qi)},movementY:function(e){return"movementY"in e?e.movementY:Gi}}),es=Vi(Xi),ts=Vi(En({},Xi,{dataTransfer:0})),ns=Vi(En({},Zi,{relatedTarget:0})),rs=Vi(En({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0})),is=En({},Ji,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ss=Vi(is),os=Vi(En({},Ji,{data:0})),as={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ls={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function us(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=cs[e])&&!!t[e]}function ds(){return us}var ps=En({},Zi,{key:function(e){if(e.key){var t=as[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wi(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ls[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ds,charCode:function(e){return"keypress"===e.type?Wi(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wi(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),hs=Vi(ps),fs=Vi(En({},Xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),ms=Vi(En({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ds})),vs=Vi(En({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0})),gs=En({},Xi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ys=Vi(gs),bs=[9,13,27,32],xs=Yt&&"CompositionEvent"in window,ws=null;Yt&&"documentMode"in document&&(ws=document.documentMode);var Ss=Yt&&"TextEvent"in window&&!ws,Cs=Yt&&(!xs||ws&&8<ws&&11>=ws),Es=String.fromCharCode(32),Ts=!1;function Ns(e,t){switch(e){case"keyup":return-1!==bs.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ps(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Rs=!1,Is={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ks(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Is[e.type]:"textarea"===t}function js(e,t,n,r){hr(r),0<(t=Ao(t,"onChange")).length&&(n=new Yi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var _s=null,As=null;function Os(e){To(e,0)}function Ds(e){if(On(aa(e)))return e}function Ms(e,t){if("change"===e)return t}var Ls=!1;if(Yt){var zs;if(Yt){var Fs="oninput"in document;if(!Fs){var Bs=document.createElement("div");Bs.setAttribute("oninput","return;"),Fs="function"==typeof Bs.oninput}zs=Fs}else zs=!1;Ls=zs&&(!document.documentMode||9<document.documentMode)}function Us(){_s&&(_s.detachEvent("onpropertychange",Ws),As=_s=null)}function Ws(e){if("value"===e.propertyName&&Ds(As)){var t=[];js(t,As,e,lr(e)),yr(Os,t)}}function $s(e,t,n){"focusin"===e?(Us(),As=n,(_s=t).attachEvent("onpropertychange",Ws)):"focusout"===e&&Us()}function Hs(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ds(As)}function Vs(e,t){if("click"===e)return Ds(t)}function qs(e,t){if("input"===e||"change"===e)return Ds(t)}var Gs="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Ks(e,t){if(Gs(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Zt.call(t,i)||!Gs(e[i],t[i]))return!1}return!0}function Js(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ys(e,t){var n,r=Js(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Js(r)}}function Zs(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zs(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Qs(){for(var e=window,t=Dn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Dn((e=t.contentWindow).document)}return t}function Xs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function eo(e){var t=Qs(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zs(n.ownerDocument.documentElement,n)){if(null!==r&&Xs(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Ys(n,s);var o=Ys(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var to=Yt&&"documentMode"in document&&11>=document.documentMode,no=null,ro=null,io=null,so=!1;function oo(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;so||null==no||no!==Dn(r)||(r="selectionStart"in(r=no)&&Xs(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},io&&Ks(io,r)||(io=r,0<(r=Ao(ro,"onSelect")).length&&(t=new Yi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=no)))}function ao(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lo={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionend:ao("Transition","TransitionEnd")},co={},uo={};function po(e){if(co[e])return co[e];if(!lo[e])return e;var t,n=lo[e];for(t in n)if(n.hasOwnProperty(t)&&t in uo)return co[e]=n[t];return e}Yt&&(uo=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);var ho=po("animationend"),fo=po("animationiteration"),mo=po("animationstart"),vo=po("transitionend"),go=new Map,yo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bo(e,t){go.set(e,t),Kt(t,[e])}for(var xo=0;xo<yo.length;xo++){var wo=yo[xo];bo(wo.toLowerCase(),"on"+(wo[0].toUpperCase()+wo.slice(1)))}bo(ho,"onAnimationEnd"),bo(fo,"onAnimationIteration"),bo(mo,"onAnimationStart"),bo("dblclick","onDoubleClick"),bo("focusin","onFocus"),bo("focusout","onBlur"),bo(vo,"onTransitionEnd"),Jt("onMouseEnter",["mouseout","mouseover"]),Jt("onMouseLeave",["mouseout","mouseover"]),Jt("onPointerEnter",["pointerout","pointerover"]),Jt("onPointerLeave",["pointerout","pointerover"]),Kt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Co=new Set("cancel close invalid load scroll toggle".split(" ").concat(So));function Eo(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,a,l){if(Rr.apply(this,arguments),Cr){if(!Cr)throw Error(Vt(198));var c=Er;Cr=!1,Er=null,Tr||(Tr=!0,Nr=c)}}(r,t,void 0,e),e.currentTarget=null}function To(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Eo(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Eo(i,a,c),s=l}}}if(Tr)throw e=Nr,Tr=!1,Nr=null,e}function No(e,t){var n=t[na];void 0===n&&(n=t[na]=new Set);var r=e+"__bubble";n.has(r)||(ko(t,e,2,!1),n.add(r))}function Po(e,t,n){var r=0;t&&(r|=4),ko(n,e,r,t)}var Ro="_reactListening"+Math.random().toString(36).slice(2);function Io(e){if(!e[Ro]){e[Ro]=!0,qt.forEach(function(t){"selectionchange"!==t&&(Co.has(t)||Po(t,!1,e),Po(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ro]||(t[Ro]=!0,Po("selectionchange",!1,t))}}function ko(e,t,n,r){switch(Li(t)){case 1:var i=_i;break;case 4:i=Ai;break;default:i=Oi}n=i.bind(null,t,n,e),i=void 0,!xr||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function jo(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=sa(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}yr(function(){var r=s,i=lr(n),o=[];e:{var a=go.get(e);if(void 0!==a){var l=Yi,c=e;switch(e){case"keypress":if(0===Wi(n))break e;case"keydown":case"keyup":l=hs;break;case"focusin":c="focus",l=ns;break;case"focusout":c="blur",l=ns;break;case"beforeblur":case"afterblur":l=ns;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=es;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ts;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=ms;break;case ho:case fo:case mo:l=rs;break;case vo:l=vs;break;case"scroll":l=Qi;break;case"wheel":l=ys;break;case"copy":case"cut":case"paste":l=ss;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=fs}var u=!!(4&t),d=!u&&"scroll"===e,p=u?null!==a?a+"Capture":null:a;u=[];for(var h,f=r;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==p&&null!=(m=br(f,p))&&u.push(_o(f,m,h))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===ar||!(c=n.relatedTarget||n.fromElement)||!sa(c)&&!c[ta])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?sa(c):null)&&(c!==(d=Ir(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=es,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=fs,m="onPointerLeave",p="onPointerEnter",f="pointer"),d=null==l?a:aa(l),h=null==c?a:aa(c),(a=new u(m,f+"leave",l,n,i)).target=d,a.relatedTarget=h,m=null,sa(i)===r&&((u=new u(p,f+"enter",c,n,i)).target=h,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(p=c,f=0,h=u=l;h;h=Oo(h))f++;for(h=0,m=p;m;m=Oo(m))h++;for(;0<f-h;)u=Oo(u),f--;for(;0<h-f;)p=Oo(p),h--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=Oo(u),p=Oo(p)}u=null}else u=null;null!==l&&Do(o,a,l,u,!1),null!==c&&null!==d&&Do(o,d,c,u,!0)}if("select"===(l=(a=r?aa(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var v=Ms;else if(ks(a))if(Ls)v=qs;else{v=Hs;var g=$s}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(v=Vs);switch(v&&(v=v(e,r))?js(o,v,n,i):(g&&g(e,a,r),"focusout"===e&&(g=a._wrapperState)&&g.controlled&&"number"===a.type&&Un(a,"number",a.value)),g=r?aa(r):window,e){case"focusin":(ks(g)||"true"===g.contentEditable)&&(no=g,ro=r,io=null);break;case"focusout":io=ro=no=null;break;case"mousedown":so=!0;break;case"contextmenu":case"mouseup":case"dragend":so=!1,oo(o,n,i);break;case"selectionchange":if(to)break;case"keydown":case"keyup":oo(o,n,i)}var y;if(xs)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Rs?Ns(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Cs&&"ko"!==n.locale&&(Rs||"onCompositionStart"!==b?"onCompositionEnd"===b&&Rs&&(y=Ui()):(Fi="value"in(zi=i)?zi.value:zi.textContent,Rs=!0)),0<(g=Ao(r,b)).length&&(b=new os(b,e,null,n,i),o.push({event:b,listeners:g}),(y||null!==(y=Ps(n)))&&(b.data=y))),(y=Ss?function(e,t){switch(e){case"compositionend":return Ps(t);case"keypress":return 32!==t.which?null:(Ts=!0,Es);case"textInput":return(e=t.data)===Es&&Ts?null:e;default:return null}}(e,n):function(e,t){if(Rs)return"compositionend"===e||!xs&&Ns(e,t)?(e=Ui(),Bi=Fi=zi=null,Rs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cs&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Ao(r,"onBeforeInput")).length&&(i=new os("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y)}To(o,t)})}function _o(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ao(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=br(e,n))&&r.unshift(_o(e,s,i)),null!=(s=br(e,t))&&r.push(_o(e,s,i))),e=e.return}return r}function Oo(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Do(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=br(n,s))&&o.unshift(_o(n,l,a)):i||null!=(l=br(n,s))&&o.push(_o(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Mo=/\r\n?/g,Lo=/\u0000|\uFFFD/g;function zo(e){return("string"==typeof e?e:""+e).replace(Mo,"\n").replace(Lo,"")}function Fo(e,t,n){if(t=zo(t),zo(e)!==t&&n)throw Error(Vt(425))}function Bo(){}var Uo=null,Wo=null;function $o(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ho="function"==typeof setTimeout?setTimeout:void 0,Vo="function"==typeof clearTimeout?clearTimeout:void 0,qo="function"==typeof Promise?Promise:void 0,Go="function"==typeof queueMicrotask?queueMicrotask:void 0!==qo?function(e){return qo.resolve(null).then(e).catch(Ko)}:Ho;function Ko(e){setTimeout(function(){throw e})}function Jo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ii(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ii(t)}function Yo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Zo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Qo=Math.random().toString(36).slice(2),Xo="__reactFiber$"+Qo,ea="__reactProps$"+Qo,ta="__reactContainer$"+Qo,na="__reactEvents$"+Qo,ra="__reactListeners$"+Qo,ia="__reactHandles$"+Qo;function sa(e){var t=e[Xo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ta]||n[Xo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Zo(e);null!==e;){if(n=e[Xo])return n;e=Zo(e)}return t}n=(e=n).parentNode}return null}function oa(e){return!(e=e[Xo]||e[ta])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function aa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Vt(33))}function la(e){return e[ea]||null}var ca=[],ua=-1;function da(e){return{current:e}}function pa(e){0>ua||(e.current=ca[ua],ca[ua]=null,ua--)}function ha(e,t){ua++,ca[ua]=e.current,e.current=t}var fa={},ma=da(fa),va=da(!1),ga=fa;function ya(e,t){var n=e.type.contextTypes;if(!n)return fa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ba(e){return null!=(e=e.childContextTypes)}function xa(){pa(va),pa(ma)}function wa(e,t,n){if(ma.current!==fa)throw Error(Vt(168));ha(ma,t),ha(va,n)}function Sa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(Vt(108,kn(e)||"Unknown",i));return En({},n,r)}function Ca(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fa,ga=ma.current,ha(ma,e),ha(va,va.current),!0}function Ea(e,t,n){var r=e.stateNode;if(!r)throw Error(Vt(169));n?(e=Sa(e,t,ga),r.__reactInternalMemoizedMergedChildContext=e,pa(va),pa(ma),ha(ma,e)):pa(va),ha(va,n)}var Ta=null,Na=!1,Pa=!1;function Ra(e){null===Ta?Ta=[e]:Ta.push(e)}function Ia(){if(!Pa&&null!==Ta){Pa=!0;var e=0,t=oi;try{var n=Ta;for(oi=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ta=null,Na=!1}catch(i){throw null!==Ta&&(Ta=Ta.slice(e+1)),Or(Br,Ia),i}finally{oi=t,Pa=!1}}return null}var ka=[],ja=0,_a=null,Aa=0,Oa=[],Da=0,Ma=null,La=1,za="";function Fa(e,t){ka[ja++]=Aa,ka[ja++]=_a,_a=e,Aa=t}function Ba(e,t,n){Oa[Da++]=La,Oa[Da++]=za,Oa[Da++]=Ma,Ma=e;var r=La;e=za;var i=32-Gr(r)-1;r&=~(1<<i),n+=1;var s=32-Gr(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,La=1<<32-Gr(t)+i|n<<i|r,za=s+e}else La=1<<s|n<<i|r,za=e}function Ua(e){null!==e.return&&(Fa(e,1),Ba(e,1,0))}function Wa(e){for(;e===_a;)_a=ka[--ja],ka[ja]=null,Aa=ka[--ja],ka[ja]=null;for(;e===Ma;)Ma=Oa[--Da],Oa[Da]=null,za=Oa[--Da],Oa[Da]=null,La=Oa[--Da],Oa[Da]=null}var $a=null,Ha=null,Va=!1,qa=null;function Ga(e,t){var n=vp(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ka(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,$a=e,Ha=Yo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,$a=e,Ha=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ma?{id:La,overflow:za}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=vp(18,null,null,0)).stateNode=t,n.return=e,e.child=n,$a=e,Ha=null,!0);default:return!1}}function Ja(e){return!(!(1&e.mode)||128&e.flags)}function Ya(e){if(Va){var t=Ha;if(t){var n=t;if(!Ka(e,t)){if(Ja(e))throw Error(Vt(418));t=Yo(n.nextSibling);var r=$a;t&&Ka(e,t)?Ga(r,n):(e.flags=-4097&e.flags|2,Va=!1,$a=e)}}else{if(Ja(e))throw Error(Vt(418));e.flags=-4097&e.flags|2,Va=!1,$a=e}}}function Za(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;$a=e}function Qa(e){if(e!==$a)return!1;if(!Va)return Za(e),Va=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!$o(e.type,e.memoizedProps)),t&&(t=Ha)){if(Ja(e))throw Xa(),Error(Vt(418));for(;t;)Ga(e,t),t=Yo(t.nextSibling)}if(Za(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Vt(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ha=Yo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ha=null}}else Ha=$a?Yo(e.stateNode.nextSibling):null;return!0}function Xa(){for(var e=Ha;e;)e=Yo(e.nextSibling)}function el(){Ha=$a=null,Va=!1}function tl(e){null===qa?qa=[e]:qa.push(e)}var nl=an.ReactCurrentBatchConfig;function rl(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Vt(309));var r=n.stateNode}if(!r)throw Error(Vt(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(Vt(284));if(!n._owner)throw Error(Vt(290,e))}return e}function il(e,t){throw e=Object.prototype.toString.call(t),Error(Vt(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sl(e){return(0,e._init)(e._payload)}function ol(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=yp(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function a(e,t,n,r){return null===t||6!==t.tag?((t=Sp(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===un?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===bn&&sl(s)===t.type)?((r=i(t,n.props)).ref=rl(e,t,n),r.return=e,r):((r=bp(n.type,n.key,n.props,null,e.mode,r)).ref=rl(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Cp(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=xp(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Sp(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ln:return(n=bp(t.type,t.key,t.props,null,e.mode,n)).ref=rl(e,null,t),n.return=e,n;case cn:return(t=Cp(t,e.mode,n)).return=e,t;case bn:return d(e,(0,t._init)(t._payload),n)}if(Wn(t)||Sn(t))return(t=xp(t,e.mode,n,null)).return=e,t;il(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ln:return n.key===i?l(e,t,n,r):null;case cn:return n.key===i?c(e,t,n,r):null;case bn:return p(e,t,(i=n._init)(n._payload),r)}if(Wn(n)||Sn(n))return null!==i?null:u(e,t,n,r,null);il(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return a(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ln:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case cn:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case bn:return h(e,t,n,(0,r._init)(r._payload),i)}if(Wn(r)||Sn(r))return u(t,e=e.get(n)||null,r,i,null);il(t,r)}return null}return function a(l,c,u,f){if("object"==typeof u&&null!==u&&u.type===un&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case ln:e:{for(var m=u.key,v=c;null!==v;){if(v.key===m){if((m=u.type)===un){if(7===v.tag){n(l,v.sibling),(c=i(v,u.props.children)).return=l,l=c;break e}}else if(v.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===bn&&sl(m)===v.type){n(l,v.sibling),(c=i(v,u.props)).ref=rl(l,v,u),c.return=l,l=c;break e}n(l,v);break}t(l,v),v=v.sibling}u.type===un?((c=xp(u.props.children,l.mode,f,u.key)).return=l,l=c):((f=bp(u.type,u.key,u.props,null,l.mode,f)).ref=rl(l,c,u),f.return=l,l=f)}return o(l);case cn:e:{for(v=u.key;null!==c;){if(c.key===v){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=i(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=Cp(u,l.mode,f)).return=l,l=c}return o(l);case bn:return a(l,c,(v=u._init)(u._payload),f)}if(Wn(u))return function(i,o,a,l){for(var c=null,u=null,f=o,m=o=0,v=null;null!==f&&m<a.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var g=p(i,f,a[m],l);if(null===g){null===f&&(f=v);break}e&&f&&null===g.alternate&&t(i,f),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g,f=v}if(m===a.length)return n(i,f),Va&&Fa(i,m),c;if(null===f){for(;m<a.length;m++)null!==(f=d(i,a[m],l))&&(o=s(f,o,m),null===u?c=f:u.sibling=f,u=f);return Va&&Fa(i,m),c}for(f=r(i,f);m<a.length;m++)null!==(v=h(f,i,m,a[m],l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(i,e)}),Va&&Fa(i,m),c}(l,c,u,f);if(Sn(u))return function(i,o,a,l){var c=Sn(a);if("function"!=typeof c)throw Error(Vt(150));if(null==(a=c.call(a)))throw Error(Vt(151));for(var u=c=null,f=o,m=o=0,v=null,g=a.next();null!==f&&!g.done;m++,g=a.next()){f.index>m?(v=f,f=null):v=f.sibling;var y=p(i,f,g.value,l);if(null===y){null===f&&(f=v);break}e&&f&&null===y.alternate&&t(i,f),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,f=v}if(g.done)return n(i,f),Va&&Fa(i,m),c;if(null===f){for(;!g.done;m++,g=a.next())null!==(g=d(i,g.value,l))&&(o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return Va&&Fa(i,m),c}for(f=r(i,f);!g.done;m++,g=a.next())null!==(g=h(f,i,m,g.value,l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach(function(e){return t(i,e)}),Va&&Fa(i,m),c}(l,c,u,f);il(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=i(c,u)).return=l,l=c):(n(l,c),(c=Sp(u,l.mode,f)).return=l,l=c),o(l)):n(l,c)}}var al=ol(!0),ll=ol(!1),cl=da(null),ul=null,dl=null,pl=null;function hl(){pl=dl=ul=null}function fl(e){var t=cl.current;pa(cl),e._currentValue=t}function ml(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vl(e,t){ul=e,pl=dl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(su=!0),e.firstContext=null)}function gl(e){var t=e._currentValue;if(pl!==e)if(e={context:e,memoizedValue:t,next:null},null===dl){if(null===ul)throw Error(Vt(308));dl=e,ul.dependencies={lanes:0,firstContext:e}}else dl=dl.next=e;return t}var yl=null;function bl(e){null===yl?yl=[e]:yl.push(e)}function xl(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,bl(t)):(n.next=i.next,i.next=n),t.interleaved=n,wl(e,r)}function wl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Sl=!1;function Cl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function El(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nl(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&hd){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,wl(e,n)}return null===(i=r.interleaved)?(t.next=t,bl(r)):(t.next=i.next,i.next=t),r.interleaved=t,wl(e,n)}function Pl(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,si(e,n)}}function Rl(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Il(e,t,n,r){var i=e.updateQueue;Sl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&(a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l)}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var p=a.lane,h=a.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(p=t,h=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(h,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(p="function"==typeof(f=m.payload)?f.call(h,d,p):f))break e;d=En({},d,p);break e;case 2:Sl=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[a]:p.push(a))}else h={eventTime:h,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,o|=p;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);wd|=o,e.lanes=o,e.memoizedState=d}}function kl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(Vt(191,i));i.call(r)}}}var jl={},_l=da(jl),Al=da(jl),Ol=da(jl);function Dl(e){if(e===jl)throw Error(Vt(174));return e}function Ml(e,t){switch(ha(Ol,t),ha(Al,e),ha(_l,jl),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jn(null,"");break;default:t=Jn(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pa(_l),ha(_l,t)}function Ll(){pa(_l),pa(Al),pa(Ol)}function zl(e){Dl(Ol.current);var t=Dl(_l.current),n=Jn(t,e.type);t!==n&&(ha(Al,e),ha(_l,n))}function Fl(e){Al.current===e&&(pa(_l),pa(Al))}var Bl=da(0);function Ul(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wl=[];function $l(){for(var e=0;e<Wl.length;e++)Wl[e]._workInProgressVersionPrimary=null;Wl.length=0}var Hl=an.ReactCurrentDispatcher,Vl=an.ReactCurrentBatchConfig,ql=0,Gl=null,Kl=null,Jl=null,Yl=!1,Zl=!1,Ql=0,Xl=0;function ec(){throw Error(Vt(321))}function tc(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gs(e[n],t[n]))return!1;return!0}function nc(e,t,n,r,i,s){if(ql=s,Gl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hl.current=null===e||null===e.memoizedState?Fc:Bc,e=n(r,i),Zl){s=0;do{if(Zl=!1,Ql=0,25<=s)throw Error(Vt(301));s+=1,Jl=Kl=null,t.updateQueue=null,Hl.current=Uc,e=n(r,i)}while(Zl)}if(Hl.current=zc,t=null!==Kl&&null!==Kl.next,ql=0,Jl=Kl=Gl=null,Yl=!1,t)throw Error(Vt(300));return e}function rc(){var e=0!==Ql;return Ql=0,e}function ic(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Jl?Gl.memoizedState=Jl=e:Jl=Jl.next=e,Jl}function sc(){if(null===Kl){var e=Gl.alternate;e=null!==e?e.memoizedState:null}else e=Kl.next;var t=null===Jl?Gl.memoizedState:Jl.next;if(null!==t)Jl=t,Kl=e;else{if(null===e)throw Error(Vt(310));e={memoizedState:(Kl=e).memoizedState,baseState:Kl.baseState,baseQueue:Kl.baseQueue,queue:Kl.queue,next:null},null===Jl?Gl.memoizedState=Jl=e:Jl=Jl.next=e}return Jl}function oc(e,t){return"function"==typeof t?t(e):t}function ac(e){var t=sc(),n=t.queue;if(null===n)throw Error(Vt(311));n.lastRenderedReducer=e;var r=Kl,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ql&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(a=l=d,o=r):l=l.next=d,Gl.lanes|=u,wd|=u}c=c.next}while(null!==c&&c!==s);null===l?o=r:l.next=a,Gs(r,t.memoizedState)||(su=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,Gl.lanes|=s,wd|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lc(e){var t=sc(),n=t.queue;if(null===n)throw Error(Vt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Gs(s,t.memoizedState)||(su=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function cc(){}function uc(e,t){var n=Gl,r=sc(),i=t(),s=!Gs(r.memoizedState,i);if(s&&(r.memoizedState=i,su=!0),r=r.queue,Sc(hc.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==Jl&&1&Jl.memoizedState.tag){if(n.flags|=2048,gc(9,pc.bind(null,n,r,i,t),void 0,null),null===fd)throw Error(Vt(349));30&ql||dc(n,t,i)}return i}function dc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Gl.updateQueue)?(t={lastEffect:null,stores:null},Gl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function pc(e,t,n,r){t.value=n,t.getSnapshot=r,fc(t)&&mc(e)}function hc(e,t,n){return n(function(){fc(t)&&mc(e)})}function fc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gs(e,n)}catch(r){return!0}}function mc(e){var t=wl(e,1);null!==t&&Ud(t,e,1,-1)}function vc(e){var t=ic();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oc,lastRenderedState:e},t.queue=e,e=e.dispatch=Oc.bind(null,Gl,e),[t.memoizedState,e]}function gc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Gl.updateQueue)?(t={lastEffect:null,stores:null},Gl.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yc(){return sc().memoizedState}function bc(e,t,n,r){var i=ic();Gl.flags|=e,i.memoizedState=gc(1|t,n,void 0,void 0===r?null:r)}function xc(e,t,n,r){var i=sc();r=void 0===r?null:r;var s=void 0;if(null!==Kl){var o=Kl.memoizedState;if(s=o.destroy,null!==r&&tc(r,o.deps))return void(i.memoizedState=gc(t,n,s,r))}Gl.flags|=e,i.memoizedState=gc(1|t,n,s,r)}function wc(e,t){return bc(8390656,8,e,t)}function Sc(e,t){return xc(2048,8,e,t)}function Cc(e,t){return xc(4,2,e,t)}function Ec(e,t){return xc(4,4,e,t)}function Tc(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Nc(e,t,n){return n=null!=n?n.concat([e]):null,xc(4,4,Tc.bind(null,t,e),n)}function Pc(){}function Rc(e,t){var n=sc();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&tc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ic(e,t){var n=sc();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&tc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function kc(e,t,n){return 21&ql?(Gs(n,t)||(n=ni(),Gl.lanes|=n,wd|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,su=!0),e.memoizedState=n)}function jc(e,t){var n=oi;oi=0!==n&&4>n?n:4,e(!0);var r=Vl.transition;Vl.transition={};try{e(!1),t()}finally{oi=n,Vl.transition=r}}function _c(){return sc().memoizedState}function Ac(e,t,n){var r=Bd(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dc(e)?Mc(t,n):null!==(n=xl(e,t,n,r))&&(Ud(n,e,r,Fd()),Lc(n,t,r))}function Oc(e,t,n){var r=Bd(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dc(e))Mc(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Gs(a,o)){var l=t.interleaved;return null===l?(i.next=i,bl(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=xl(e,t,i,r))&&(Ud(n,e,r,i=Fd()),Lc(n,t,r))}}function Dc(e){var t=e.alternate;return e===Gl||null!==t&&t===Gl}function Mc(e,t){Zl=Yl=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Lc(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,si(e,n)}}var zc={readContext:gl,useCallback:ec,useContext:ec,useEffect:ec,useImperativeHandle:ec,useInsertionEffect:ec,useLayoutEffect:ec,useMemo:ec,useReducer:ec,useRef:ec,useState:ec,useDebugValue:ec,useDeferredValue:ec,useTransition:ec,useMutableSource:ec,useSyncExternalStore:ec,useId:ec,unstable_isNewReconciler:!1},Fc={readContext:gl,useCallback:function(e,t){return ic().memoizedState=[e,void 0===t?null:t],e},useContext:gl,useEffect:wc,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,bc(4194308,4,Tc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bc(4194308,4,e,t)},useInsertionEffect:function(e,t){return bc(4,2,e,t)},useMemo:function(e,t){var n=ic();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ic();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ac.bind(null,Gl,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ic().memoizedState=e},useState:vc,useDebugValue:Pc,useDeferredValue:function(e){return ic().memoizedState=e},useTransition:function(){var e=vc(!1),t=e[0];return e=jc.bind(null,e[1]),ic().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Gl,i=ic();if(Va){if(void 0===n)throw Error(Vt(407));n=n()}else{if(n=t(),null===fd)throw Error(Vt(349));30&ql||dc(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,wc(hc.bind(null,r,s,e),[e]),r.flags|=2048,gc(9,pc.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ic(),t=fd.identifierPrefix;if(Va){var n=za;t=":"+t+"R"+(n=(La&~(1<<32-Gr(La)-1)).toString(32)+n),0<(n=Ql++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Xl++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Bc={readContext:gl,useCallback:Rc,useContext:gl,useEffect:Sc,useImperativeHandle:Nc,useInsertionEffect:Cc,useLayoutEffect:Ec,useMemo:Ic,useReducer:ac,useRef:yc,useState:function(){return ac(oc)},useDebugValue:Pc,useDeferredValue:function(e){return kc(sc(),Kl.memoizedState,e)},useTransition:function(){return[ac(oc)[0],sc().memoizedState]},useMutableSource:cc,useSyncExternalStore:uc,useId:_c,unstable_isNewReconciler:!1},Uc={readContext:gl,useCallback:Rc,useContext:gl,useEffect:Sc,useImperativeHandle:Nc,useInsertionEffect:Cc,useLayoutEffect:Ec,useMemo:Ic,useReducer:lc,useRef:yc,useState:function(){return lc(oc)},useDebugValue:Pc,useDeferredValue:function(e){var t=sc();return null===Kl?t.memoizedState=e:kc(t,Kl.memoizedState,e)},useTransition:function(){return[lc(oc)[0],sc().memoizedState]},useMutableSource:cc,useSyncExternalStore:uc,useId:_c,unstable_isNewReconciler:!1};function Wc(e,t){if(e&&e.defaultProps){for(var n in t=En({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function $c(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:En({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Hc={isMounted:function(e){return!!(e=e._reactInternals)&&Ir(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Fd(),i=Bd(e),s=Tl(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Nl(e,s,i))&&(Ud(t,e,i,r),Pl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Fd(),i=Bd(e),s=Tl(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Nl(e,s,i))&&(Ud(t,e,i,r),Pl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fd(),r=Bd(e),i=Tl(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Nl(e,i,r))&&(Ud(t,e,r,n),Pl(t,e,r))}};function Vc(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&Ks(n,r)&&Ks(i,s))}function qc(e,t,n){var r=!1,i=fa,s=t.contextType;return"object"==typeof s&&null!==s?s=gl(s):(i=ba(t)?ga:ma.current,s=(r=null!=(r=t.contextTypes))?ya(e,i):fa),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Hc,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Gc(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hc.enqueueReplaceState(t,t.state,null)}function Kc(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Cl(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=gl(s):(s=ba(t)?ga:ma.current,i.context=ya(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&($c(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Hc.enqueueReplaceState(i,i.state,null),Il(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Jc(e,t){try{var n="",r=t;do{n+=Rn(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function Yc(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function Zc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Qc="function"==typeof WeakMap?WeakMap:Map;function Xc(e,t,n){(n=Tl(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Id||(Id=!0,kd=r),Zc(0,t)},n}function eu(e,t,n){(n=Tl(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Zc(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){Zc(0,t),"function"!=typeof r&&(null===jd?jd=new Set([this]):jd.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function tu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Qc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=up.bind(null,e,t,n),t.then(e,e))}function nu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ru(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Tl(-1,1)).tag=2,Nl(n,t,1))),n.lanes|=1),e)}var iu=an.ReactCurrentOwner,su=!1;function ou(e,t,n,r){t.child=null===e?ll(t,null,n,r):al(t,e.child,n,r)}function au(e,t,n,r,i){n=n.render;var s=t.ref;return vl(t,i),r=nc(e,t,n,r,s,i),n=rc(),null===e||su?(Va&&n&&Ua(t),t.flags|=1,ou(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Iu(e,t,i))}function lu(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||gp(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=bp(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,cu(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Ks)(o,r)&&e.ref===t.ref)return Iu(e,t,i)}return t.flags|=1,(e=yp(s,r)).ref=t.ref,e.return=t,t.child=e}function cu(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Ks(s,r)&&e.ref===t.ref){if(su=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Iu(e,t,i);131072&e.flags&&(su=!0)}}return pu(e,t,n,r,i)}function uu(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ha(yd,gd),gd|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ha(yd,gd),gd|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ha(yd,gd),gd|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ha(yd,gd),gd|=r;return ou(e,t,i,n),t.child}function du(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pu(e,t,n,r,i){var s=ba(n)?ga:ma.current;return s=ya(t,s),vl(t,i),n=nc(e,t,n,r,s,i),r=rc(),null===e||su?(Va&&r&&Ua(t),t.flags|=1,ou(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Iu(e,t,i))}function hu(e,t,n,r,i){if(ba(n)){var s=!0;Ca(t)}else s=!1;if(vl(t,i),null===t.stateNode)Ru(e,t),qc(t,n,r),Kc(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;c="object"==typeof c&&null!==c?gl(c):ya(t,c=ba(n)?ga:ma.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Gc(t,o,r,c),Sl=!1;var p=t.memoizedState;o.state=p,Il(t,r,o,i),l=t.memoizedState,a!==r||p!==l||va.current||Sl?("function"==typeof u&&($c(t,n,u,r),l=t.memoizedState),(a=Sl||Vc(t,n,a,r,p,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,El(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Wc(t.type,a),o.props=c,d=t.pendingProps,p=o.context,l="object"==typeof(l=n.contextType)&&null!==l?gl(l):ya(t,l=ba(n)?ga:ma.current);var h=n.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||p!==l)&&Gc(t,o,r,l),Sl=!1,p=t.memoizedState,o.state=p,Il(t,r,o,i);var f=t.memoizedState;a!==d||p!==f||va.current||Sl?("function"==typeof h&&($c(t,n,h,r),f=t.memoizedState),(c=Sl||Vc(t,n,c,r,p,f,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return fu(e,t,n,r,s,i)}function fu(e,t,n,r,i,s){du(e,t);var o=!!(128&t.flags);if(!r&&!o)return i&&Ea(t,n,!1),Iu(e,t,s);r=t.stateNode,iu.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=al(t,e.child,null,s),t.child=al(t,null,a,s)):ou(e,t,a,s),t.memoizedState=r.state,i&&Ea(t,n,!0),t.child}function mu(e){var t=e.stateNode;t.pendingContext?wa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&wa(0,t.context,!1),Ml(e,t.containerInfo)}function vu(e,t,n,r,i){return el(),tl(i),t.flags|=256,ou(e,t,n,r),t.child}var gu,yu,bu,xu={dehydrated:null,treeContext:null,retryLane:0};function wu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Su(e,t,n){var r,i=t.pendingProps,s=Bl.current,o=!1,a=!!(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),ha(Bl,1&s),null===e)return Ya(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},1&i||null===o?o=wp(a,i,0,null):(o.childLanes=0,o.pendingProps=a),e=xp(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=wu(n),t.memoizedState=xu,e):Cu(t,a));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,Eu(e,t,o,r=Yc(Error(Vt(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=wp({mode:"visible",children:r.children},i,0,null),(s=xp(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&al(t,e.child,null,o),t.child.memoizedState=wu(o),t.memoizedState=xu,s);if(!(1&t.mode))return Eu(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var a=r.dgst;return r=a,Eu(e,t,o,r=Yc(s=Error(Vt(419)),r,void 0))}if(a=0!==(o&e.childLanes),su||a){if(null!==(r=fd)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,wl(e,i),Ud(r,e,i,-1))}return ep(),Eu(e,t,o,r=Yc(Error(Vt(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=pp.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ha=Yo(i.nextSibling),$a=t,Va=!0,qa=null,null!==e&&(Oa[Da++]=La,Oa[Da++]=za,Oa[Da++]=Ma,La=e.id,za=e.overflow,Ma=t),(t=Cu(t,r.children)).flags|=4096,t)}(e,t,a,i,r,s,n);if(o){o=i.fallback,a=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&a||t.child===s?(i=yp(s,l)).subtreeFlags=14680064&s.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==r?o=yp(r,o):(o=xp(o,a,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,a=null===(a=e.child.memoizedState)?wu(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=xu,i}return e=(o=e.child).sibling,i=yp(o,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Cu(e,t){return(t=wp({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Eu(e,t,n,r){return null!==r&&tl(r),al(t,e.child,null,n),(e=Cu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Tu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ml(e.return,t,n)}function Nu(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Pu(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ou(e,t,r.children,n),2&(r=Bl.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Tu(e,n,t);else if(19===e.tag)Tu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ha(Bl,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ul(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Nu(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ul(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Nu(t,!0,n,null,s);break;case"together":Nu(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Ru(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Iu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),wd|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(Vt(153));if(null!==t.child){for(n=yp(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=yp(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ku(e,t){if(!Va)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ju(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _u(e,t,n){var r=t.pendingProps;switch(Wa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ju(t),null;case 1:case 17:return ba(t.type)&&xa(),ju(t),null;case 3:return r=t.stateNode,Ll(),pa(va),pa(ma),$l(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Qa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==qa&&(Vd(qa),qa=null))),ju(t),null;case 5:Fl(t);var i=Dl(Ol.current);if(n=t.type,null!==e&&null!=t.stateNode)yu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(Vt(166));return ju(t),null}if(e=Dl(_l.current),Qa(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xo]=t,r[ea]=s,e=!!(1&t.mode),n){case"dialog":No("cancel",r),No("close",r);break;case"iframe":case"object":case"embed":No("load",r);break;case"video":case"audio":for(i=0;i<So.length;i++)No(So[i],r);break;case"source":No("error",r);break;case"img":case"image":case"link":No("error",r),No("load",r);break;case"details":No("toggle",r);break;case"input":Ln(r,s),No("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},No("invalid",r);break;case"textarea":Vn(r,s),No("invalid",r)}for(var o in sr(n,s),i=null,s)if(s.hasOwnProperty(o)){var a=s[o];"children"===o?"string"==typeof a?r.textContent!==a&&(!0!==s.suppressHydrationWarning&&Fo(r.textContent,a,e),i=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(!0!==s.suppressHydrationWarning&&Fo(r.textContent,a,e),i=["children",""+a]):Gt.hasOwnProperty(o)&&null!=a&&"onScroll"===o&&No("scroll",r)}switch(n){case"input":An(r),Bn(r,s,!0);break;case"textarea":An(r),Gn(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Bo)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{o=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=Kn(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),"select"===n&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Xo]=t,e[ea]=r,gu(e,t),t.stateNode=e;e:{switch(o=or(n,r),n){case"dialog":No("cancel",e),No("close",e),i=r;break;case"iframe":case"object":case"embed":No("load",e),i=r;break;case"video":case"audio":for(i=0;i<So.length;i++)No(So[i],e);i=r;break;case"source":No("error",e),i=r;break;case"img":case"image":case"link":No("error",e),No("load",e),i=r;break;case"details":No("toggle",e),i=r;break;case"input":Ln(e,r),i=Mn(e,r),No("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=En({},r,{value:void 0}),No("invalid",e);break;case"textarea":Vn(e,r),i=Hn(e,r),No("invalid",e)}for(s in sr(n,i),a=i)if(a.hasOwnProperty(s)){var l=a[s];"style"===s?rr(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&Qn(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&Xn(e,l):"number"==typeof l&&Xn(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(Gt.hasOwnProperty(s)?null!=l&&"onScroll"===s&&No("scroll",e):null!=l&&on(e,s,l,o))}switch(n){case"input":An(e),Bn(e,r,!1);break;case"textarea":An(e),Gn(e);break;case"option":null!=r.value&&e.setAttribute("value",""+jn(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?$n(e,!!r.multiple,s,!1):null!=r.defaultValue&&$n(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Bo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ju(t),null;case 6:if(e&&null!=t.stateNode)bu(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(Vt(166));if(n=Dl(Ol.current),Dl(_l.current),Qa(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xo]=t,(s=r.nodeValue!==n)&&null!==(e=$a))switch(e.tag){case 3:Fo(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Fo(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xo]=t,t.stateNode=r}return ju(t),null;case 13:if(pa(Bl),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Va&&null!==Ha&&1&t.mode&&!(128&t.flags))Xa(),el(),t.flags|=98560,s=!1;else if(s=Qa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(Vt(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(Vt(317));s[Xo]=t}else el(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ju(t),s=!1}else null!==qa&&(Vd(qa),qa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Bl.current?0===bd&&(bd=3):ep())),null!==t.updateQueue&&(t.flags|=4),ju(t),null);case 4:return Ll(),null===e&&Io(t.stateNode.containerInfo),ju(t),null;case 10:return fl(t.type._context),ju(t),null;case 19:if(pa(Bl),null===(s=t.memoizedState))return ju(t),null;if(r=!!(128&t.flags),null===(o=s.rendering))if(r)ku(s,!1);else{if(0!==bd||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=Ul(e))){for(t.flags|=128,ku(s,!1),null!==(r=o.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(o=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ha(Bl,1&Bl.current|2),t.child}e=e.sibling}null!==s.tail&&zr()>Pd&&(t.flags|=128,r=!0,ku(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Ul(o))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ku(s,!0),null===s.tail&&"hidden"===s.tailMode&&!o.alternate&&!Va)return ju(t),null}else 2*zr()-s.renderingStartTime>Pd&&1073741824!==n&&(t.flags|=128,r=!0,ku(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=s.last)?n.sibling=o:t.child=o,s.last=o)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=zr(),t.sibling=null,n=Bl.current,ha(Bl,r?1&n|2:1&n),t):(ju(t),null);case 22:case 23:return Yd(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&gd)&&(ju(t),6&t.subtreeFlags&&(t.flags|=8192)):ju(t),null;case 24:case 25:return null}throw Error(Vt(156,t.tag))}function Au(e,t){switch(Wa(t),t.tag){case 1:return ba(t.type)&&xa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ll(),pa(va),pa(ma),$l(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Fl(t),null;case 13:if(pa(Bl),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(Vt(340));el()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return pa(Bl),null;case 4:return Ll(),null;case 10:return fl(t.type._context),null;case 22:case 23:return Yd(),null;default:return null}}gu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},yu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Dl(_l.current);var s,o=null;switch(n){case"input":i=Mn(e,i),r=Mn(e,r),o=[];break;case"select":i=En({},i,{value:void 0}),r=En({},r,{value:void 0}),o=[];break;case"textarea":i=Hn(e,i),r=Hn(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Bo)}for(c in sr(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(Gt.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(null!=l||null!=a))if("style"===c)if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(Gt.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&No("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},bu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ou=!1,Du=!1,Mu="function"==typeof WeakSet?WeakSet:Set,Lu=null;function zu(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){cp(e,t,r)}else n.current=null}function Fu(e,t,n){try{n()}catch(r){cp(e,t,r)}}var Bu=!1;function Uu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Fu(t,n,s)}i=i.next}while(i!==r)}}function Wu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $u(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function Hu(e){var t=e.alternate;null!==t&&(e.alternate=null,Hu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[Xo],delete t[ea],delete t[na],delete t[ra],delete t[ia]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vu(e){return 5===e.tag||3===e.tag||4===e.tag}function qu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Vu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Gu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Bo));else if(4!==r&&null!==(e=e.child))for(Gu(e,t,n),e=e.sibling;null!==e;)Gu(e,t,n),e=e.sibling}function Ku(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ku(e,t,n),e=e.sibling;null!==e;)Ku(e,t,n),e=e.sibling}var Ju=null,Yu=!1;function Zu(e,t,n){for(n=n.child;null!==n;)Qu(e,t,n),n=n.sibling}function Qu(e,t,n){if(qr&&"function"==typeof qr.onCommitFiberUnmount)try{qr.onCommitFiberUnmount(Vr,n)}catch(a){}switch(n.tag){case 5:Du||zu(n,t);case 6:var r=Ju,i=Yu;Ju=null,Zu(e,t,n),Yu=i,null!==(Ju=r)&&(Yu?(e=Ju,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):Ju.removeChild(n.stateNode));break;case 18:null!==Ju&&(Yu?(e=Ju,n=n.stateNode,8===e.nodeType?Jo(e.parentNode,n):1===e.nodeType&&Jo(e,n),Ii(e)):Jo(Ju,n.stateNode));break;case 4:r=Ju,i=Yu,Ju=n.stateNode.containerInfo,Yu=!0,Zu(e,t,n),Ju=r,Yu=i;break;case 0:case 11:case 14:case 15:if(!Du&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(2&s||4&s)&&Fu(n,t,o),i=i.next}while(i!==r)}Zu(e,t,n);break;case 1:if(!Du&&(zu(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){cp(n,t,a)}Zu(e,t,n);break;case 21:Zu(e,t,n);break;case 22:1&n.mode?(Du=(r=Du)||null!==n.memoizedState,Zu(e,t,n),Du=r):Zu(e,t,n);break;default:Zu(e,t,n)}}function Xu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Mu),t.forEach(function(t){var r=hp.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ed(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;null!==a;){switch(a.tag){case 5:Ju=a.stateNode,Yu=!1;break e;case 3:case 4:Ju=a.stateNode.containerInfo,Yu=!0;break e}a=a.return}if(null===Ju)throw Error(Vt(160));Qu(s,o,i),Ju=null,Yu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){cp(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)td(t,e),t=t.sibling}function td(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ed(t,e),nd(e),4&r){try{Uu(3,e,e.return),Wu(3,e)}catch(m){cp(e,e.return,m)}try{Uu(5,e,e.return)}catch(m){cp(e,e.return,m)}}break;case 1:ed(t,e),nd(e),512&r&&null!==n&&zu(n,n.return);break;case 5:if(ed(t,e),nd(e),512&r&&null!==n&&zu(n,n.return),32&e.flags){var i=e.stateNode;try{Xn(i,"")}catch(m){cp(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===a&&"radio"===s.type&&null!=s.name&&zn(i,s),or(a,o);var c=or(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];"style"===u?rr(i,d):"dangerouslySetInnerHTML"===u?Qn(i,d):"children"===u?Xn(i,d):on(i,u,d,c)}switch(a){case"input":Fn(i,s);break;case"textarea":qn(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;null!=h?$n(i,!!s.multiple,h,!1):p!==!!s.multiple&&(null!=s.defaultValue?$n(i,!!s.multiple,s.defaultValue,!0):$n(i,!!s.multiple,s.multiple?[]:"",!1))}i[ea]=s}catch(m){cp(e,e.return,m)}}break;case 6:if(ed(t,e),nd(e),4&r){if(null===e.stateNode)throw Error(Vt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){cp(e,e.return,m)}}break;case 3:if(ed(t,e),nd(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ii(t.containerInfo)}catch(m){cp(e,e.return,m)}break;case 4:default:ed(t,e),nd(e);break;case 13:ed(t,e),nd(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Nd=zr())),4&r&&Xu(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Du=(c=Du)||u,ed(t,e),Du=c):ed(t,e),nd(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Lu=e,u=e.child;null!==u;){for(d=Lu=u;null!==Lu;){switch(h=(p=Lu).child,p.tag){case 0:case 11:case 14:case 15:Uu(4,p,p.return);break;case 1:zu(p,p.return);var f=p.stateNode;if("function"==typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){cp(r,n,m)}}break;case 5:zu(p,p.return);break;case 22:if(null!==p.memoizedState){od(d);continue}}null!==h?(h.return=p,Lu=h):od(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{i=d.stateNode,c?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(a=d.stateNode,o=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,a.style.display=nr("display",o))}catch(m){cp(e,e.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){cp(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ed(t,e),nd(e),4&r&&Xu(e);case 21:}}function nd(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(Vu(n)){var r=n;break e}n=n.return}throw Error(Vt(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(Xn(i,""),r.flags&=-33),Ku(e,qu(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;Gu(e,qu(e),s);break;default:throw Error(Vt(161))}}catch(o){cp(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function rd(e,t,n){Lu=e,id(e)}function id(e,t,n){for(var r=!!(1&e.mode);null!==Lu;){var i=Lu,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ou;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Du;a=Ou;var c=Du;if(Ou=o,(Du=l)&&!c)for(Lu=i;null!==Lu;)l=(o=Lu).child,22===o.tag&&null!==o.memoizedState?ad(i):null!==l?(l.return=o,Lu=l):ad(i);for(;null!==s;)Lu=s,id(s),s=s.sibling;Lu=i,Ou=a,Du=c}sd(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,Lu=s):sd(e)}}function sd(e){for(;null!==Lu;){var t=Lu;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Du||Wu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Du)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&kl(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}kl(t,o,n)}break;case 5:var a=t.stateNode;if(null===n&&4&t.flags){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Ii(d)}}}break;default:throw Error(Vt(163))}Du||512&t.flags&&$u(t)}catch(p){cp(t,t.return,p)}}if(t===e){Lu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Lu=n;break}Lu=t.return}}function od(e){for(;null!==Lu;){var t=Lu;if(t===e){Lu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Lu=n;break}Lu=t.return}}function ad(e){for(;null!==Lu;){var t=Lu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Wu(4,t)}catch(l){cp(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){cp(t,i,l)}}var s=t.return;try{$u(t)}catch(l){cp(t,s,l)}break;case 5:var o=t.return;try{$u(t)}catch(l){cp(t,o,l)}}}catch(l){cp(t,t.return,l)}if(t===e){Lu=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Lu=a;break}Lu=t.return}}var ld,cd=Math.ceil,ud=an.ReactCurrentDispatcher,dd=an.ReactCurrentOwner,pd=an.ReactCurrentBatchConfig,hd=0,fd=null,md=null,vd=0,gd=0,yd=da(0),bd=0,xd=null,wd=0,Sd=0,Cd=0,Ed=null,Td=null,Nd=0,Pd=1/0,Rd=null,Id=!1,kd=null,jd=null,_d=!1,Ad=null,Od=0,Dd=0,Md=null,Ld=-1,zd=0;function Fd(){return 6&hd?zr():-1!==Ld?Ld:Ld=zr()}function Bd(e){return 1&e.mode?2&hd&&0!==vd?vd&-vd:null!==nl.transition?(0===zd&&(zd=ni()),zd):0!==(e=oi)?e:e=void 0===(e=window.event)?16:Li(e.type):1}function Ud(e,t,n,r){if(50<Dd)throw Dd=0,Md=null,Error(Vt(185));ii(e,n,r),2&hd&&e===fd||(e===fd&&(!(2&hd)&&(Sd|=n),4===bd&&qd(e,vd)),Wd(e,r),1===n&&0===hd&&!(1&t.mode)&&(Pd=zr()+500,Na&&Ia()))}function Wd(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Gr(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ei(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=Xr(e,e===fd?vd:0);if(0===r)null!==n&&Dr(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Dr(n),1===t)0===e.tag?function(e){Na=!0,Ra(e)}(Gd.bind(null,e)):Ra(Gd.bind(null,e)),Go(function(){!(6&hd)&&Ia()}),n=null;else{switch(ai(r)){case 1:n=Br;break;case 4:n=Ur;break;case 16:default:n=Wr;break;case 536870912:n=Hr}n=fp(n,$d.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $d(e,t){if(Ld=-1,zd=0,6&hd)throw Error(Vt(327));var n=e.callbackNode;if(ap()&&e.callbackNode!==n)return null;var r=Xr(e,e===fd?vd:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=tp(e,r);else{t=r;var i=hd;hd|=2;var s=Xd();for(fd===e&&vd===t||(Rd=null,Pd=zr()+500,Zd(e,t));;)try{rp();break}catch(a){Qd(e,a)}hl(),ud.current=s,hd=i,null!==md?t=0:(fd=null,vd=0,t=bd)}if(0!==t){if(2===t&&0!==(i=ti(e))&&(r=i,t=Hd(e,i)),1===t)throw n=xd,Zd(e,0),qd(e,r),Wd(e,zr()),n;if(6===t)qd(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Gs(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=tp(e,r),2===t&&(s=ti(e),0!==s&&(r=s,t=Hd(e,s))),1!==t)))throw n=xd,Zd(e,0),qd(e,r),Wd(e,zr()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Vt(345));case 2:case 5:op(e,Td,Rd);break;case 3:if(qd(e,r),(130023424&r)===r&&10<(t=Nd+500-zr())){if(0!==Xr(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Fd(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ho(op.bind(null,e,Td,Rd),t);break}op(e,Td,Rd);break;case 4:if(qd(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Gr(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=zr()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cd(r/1960))-r)){e.timeoutHandle=Ho(op.bind(null,e,Td,Rd),r);break}op(e,Td,Rd);break;default:throw Error(Vt(329))}}}return Wd(e,zr()),e.callbackNode===n?$d.bind(null,e):null}function Hd(e,t){var n=Ed;return e.current.memoizedState.isDehydrated&&(Zd(e,t).flags|=256),2!==(e=tp(e,t))&&(t=Td,Td=n,null!==t&&Vd(t)),e}function Vd(e){null===Td?Td=e:Td.push.apply(Td,e)}function qd(e,t){for(t&=~Cd,t&=~Sd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gr(t),r=1<<n;e[n]=-1,t&=~r}}function Gd(e){if(6&hd)throw Error(Vt(327));ap();var t=Xr(e,0);if(!(1&t))return Wd(e,zr()),null;var n=tp(e,t);if(0!==e.tag&&2===n){var r=ti(e);0!==r&&(t=r,n=Hd(e,r))}if(1===n)throw n=xd,Zd(e,0),qd(e,t),Wd(e,zr()),n;if(6===n)throw Error(Vt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,op(e,Td,Rd),Wd(e,zr()),null}function Kd(e,t){var n=hd;hd|=1;try{return e(t)}finally{0===(hd=n)&&(Pd=zr()+500,Na&&Ia())}}function Jd(e){null!==Ad&&0===Ad.tag&&!(6&hd)&&ap();var t=hd;hd|=1;var n=pd.transition,r=oi;try{if(pd.transition=null,oi=1,e)return e()}finally{oi=r,pd.transition=n,!(6&(hd=t))&&Ia()}}function Yd(){gd=yd.current,pa(yd)}function Zd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Vo(n)),null!==md)for(n=md.return;null!==n;){var r=n;switch(Wa(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&xa();break;case 3:Ll(),pa(va),pa(ma),$l();break;case 5:Fl(r);break;case 4:Ll();break;case 13:case 19:pa(Bl);break;case 10:fl(r.type._context);break;case 22:case 23:Yd()}n=n.return}if(fd=e,md=e=yp(e.current,null),vd=gd=t,bd=0,xd=null,Cd=Sd=wd=0,Td=Ed=null,null!==yl){for(t=0;t<yl.length;t++)if(null!==(r=(n=yl[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}yl=null}return e}function Qd(e,t){for(;;){var n=md;try{if(hl(),Hl.current=zc,Yl){for(var r=Gl.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Yl=!1}if(ql=0,Jl=Kl=Gl=null,Zl=!1,Ql=0,dd.current=null,null===n||null===n.return){bd=1,xd=t,md=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=vd,a.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=a,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=nu(o);if(null!==h){h.flags&=-257,ru(h,o,a,0,t),1&h.mode&&tu(s,c,t),l=c;var f=(t=h).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(!(1&t)){tu(s,c,t),ep();break e}l=Error(Vt(426))}else if(Va&&1&a.mode){var v=nu(o);if(null!==v){!(65536&v.flags)&&(v.flags|=256),ru(v,o,a,0,t),tl(Jc(l,a));break e}}s=l=Jc(l,a),4!==bd&&(bd=2),null===Ed?Ed=[s]:Ed.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Rl(s,Xc(0,l,t));break e;case 1:a=l;var g=s.type,y=s.stateNode;if(!(128&s.flags||"function"!=typeof g.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==jd&&jd.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,Rl(s,eu(s,a,t));break e}}s=s.return}while(null!==s)}sp(n)}catch(b){t=b,md===n&&null!==n&&(md=n=n.return);continue}break}}function Xd(){var e=ud.current;return ud.current=zc,null===e?zc:e}function ep(){0!==bd&&3!==bd&&2!==bd||(bd=4),null===fd||!(268435455&wd)&&!(268435455&Sd)||qd(fd,vd)}function tp(e,t){var n=hd;hd|=2;var r=Xd();for(fd===e&&vd===t||(Rd=null,Zd(e,t));;)try{np();break}catch(i){Qd(e,i)}if(hl(),hd=n,ud.current=r,null!==md)throw Error(Vt(261));return fd=null,vd=0,bd}function np(){for(;null!==md;)ip(md)}function rp(){for(;null!==md&&!Mr();)ip(md)}function ip(e){var t=ld(e.alternate,e,gd);e.memoizedProps=e.pendingProps,null===t?sp(e):md=t,dd.current=null}function sp(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Au(n,t)))return n.flags&=32767,void(md=n);if(null===e)return bd=6,void(md=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=_u(n,t,gd)))return void(md=n);if(null!==(t=t.sibling))return void(md=t);md=t=e}while(null!==t);0===bd&&(bd=5)}function op(e,t,n){var r=oi,i=pd.transition;try{pd.transition=null,oi=1,function(e,t,n,r){do{ap()}while(null!==Ad);if(6&hd)throw Error(Vt(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Vt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Gr(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,s),e===fd&&(md=fd=null,vd=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||_d||(_d=!0,fp(Wr,function(){return ap(),null})),s=!!(15990&n.flags),15990&n.subtreeFlags||s){s=pd.transition,pd.transition=null;var o=oi;oi=1;var a=hd;hd|=4,dd.current=null,function(e,t){if(Uo=ji,Xs(e=Qs())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,p=null;t:for(;;){for(var h;d!==n||0!==i&&3!==d.nodeType||(a=o+i),d!==s||0!==r&&3!==d.nodeType||(l=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(h=d.firstChild);)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),null!==(h=d.nextSibling))break;p=(d=p).parentNode}d=h}n=-1===a||-1===l?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wo={focusedElem:e,selectionRange:n},ji=!1,Lu=t;null!==Lu;)if(e=(t=Lu).child,1028&t.subtreeFlags&&null!==e)e.return=t,Lu=e;else for(;null!==Lu;){t=Lu;try{var f=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,v=f.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Wc(t.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(Vt(163))}}catch(x){cp(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Lu=e;break}Lu=t.return}f=Bu,Bu=!1}(e,n),td(n,e),eo(Wo),ji=!!Uo,Wo=Uo=null,e.current=n,rd(n),Lr(),hd=a,oi=o,pd.transition=s}else e.current=n;if(_d&&(_d=!1,Ad=e,Od=i),0===(s=e.pendingLanes)&&(jd=null),function(e){if(qr&&"function"==typeof qr.onCommitFiberRoot)try{qr.onCommitFiberRoot(Vr,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),Wd(e,zr()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Id)throw Id=!1,e=kd,kd=null,e;!!(1&Od)&&0!==e.tag&&ap(),1&(s=e.pendingLanes)?e===Md?Dd++:(Dd=0,Md=e):Dd=0,Ia()}(e,t,n,r)}finally{pd.transition=i,oi=r}return null}function ap(){if(null!==Ad){var e=ai(Od),t=pd.transition,n=oi;try{if(pd.transition=null,oi=16>e?16:e,null===Ad)var r=!1;else{if(e=Ad,Ad=null,Od=0,6&hd)throw Error(Vt(331));var i=hd;for(hd|=4,Lu=e.current;null!==Lu;){var s=Lu,o=s.child;if(16&Lu.flags){var a=s.deletions;if(null!==a){for(var l=0;l<a.length;l++){var c=a[l];for(Lu=c;null!==Lu;){var u=Lu;switch(u.tag){case 0:case 11:case 15:Uu(8,u,s)}var d=u.child;if(null!==d)d.return=u,Lu=d;else for(;null!==Lu;){var p=(u=Lu).sibling,h=u.return;if(Hu(u),u===c){Lu=null;break}if(null!==p){p.return=h,Lu=p;break}Lu=h}}}var f=s.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Lu=s}}if(2064&s.subtreeFlags&&null!==o)o.return=s,Lu=o;else e:for(;null!==Lu;){if(2048&(s=Lu).flags)switch(s.tag){case 0:case 11:case 15:Uu(9,s,s.return)}var g=s.sibling;if(null!==g){g.return=s.return,Lu=g;break e}Lu=s.return}}var y=e.current;for(Lu=y;null!==Lu;){var b=(o=Lu).child;if(2064&o.subtreeFlags&&null!==b)b.return=o,Lu=b;else e:for(o=y;null!==Lu;){if(2048&(a=Lu).flags)try{switch(a.tag){case 0:case 11:case 15:Wu(9,a)}}catch(w){cp(a,a.return,w)}if(a===o){Lu=null;break e}var x=a.sibling;if(null!==x){x.return=a.return,Lu=x;break e}Lu=a.return}}if(hd=i,Ia(),qr&&"function"==typeof qr.onPostCommitFiberRoot)try{qr.onPostCommitFiberRoot(Vr,e)}catch(w){}r=!0}return r}finally{oi=n,pd.transition=t}}return!1}function lp(e,t,n){e=Nl(e,t=Xc(0,t=Jc(n,t),1),1),t=Fd(),null!==e&&(ii(e,1,t),Wd(e,t))}function cp(e,t,n){if(3===e.tag)lp(e,e,n);else for(;null!==t;){if(3===t.tag){lp(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===jd||!jd.has(r))){t=Nl(t,e=eu(t,e=Jc(n,e),1),1),e=Fd(),null!==t&&(ii(t,1,e),Wd(t,e));break}}t=t.return}}function up(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Fd(),e.pingedLanes|=e.suspendedLanes&n,fd===e&&(vd&n)===n&&(4===bd||3===bd&&(130023424&vd)===vd&&500>zr()-Nd?Zd(e,0):Cd|=n),Wd(e,t)}function dp(e,t){0===t&&(1&e.mode?(t=Zr,!(130023424&(Zr<<=1))&&(Zr=4194304)):t=1);var n=Fd();null!==(e=wl(e,t))&&(ii(e,t,n),Wd(e,n))}function pp(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),dp(e,n)}function hp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Vt(314))}null!==r&&r.delete(t),dp(e,n)}function fp(e,t){return Or(e,t)}function mp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vp(e,t,n,r){return new mp(e,t,n,r)}function gp(e){return!(!(e=e.prototype)||!e.isReactComponent)}function yp(e,t){var n=e.alternate;return null===n?((n=vp(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bp(e,t,n,r,i,s){var o=2;if(r=e,"function"==typeof e)gp(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case un:return xp(n.children,i,s,t);case dn:o=8,i|=8;break;case pn:return(e=vp(12,n,t,2|i)).elementType=pn,e.lanes=s,e;case vn:return(e=vp(13,n,t,i)).elementType=vn,e.lanes=s,e;case gn:return(e=vp(19,n,t,i)).elementType=gn,e.lanes=s,e;case xn:return wp(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case hn:o=10;break e;case fn:o=9;break e;case mn:o=11;break e;case yn:o=14;break e;case bn:o=16,r=null;break e}throw Error(Vt(130,null==e?e:typeof e,""))}return(t=vp(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function xp(e,t,n,r){return(e=vp(7,e,r,t)).lanes=n,e}function wp(e,t,n,r){return(e=vp(22,e,r,t)).elementType=xn,e.lanes=n,e.stateNode={isHidden:!1},e}function Sp(e,t,n){return(e=vp(6,e,null,t)).lanes=n,e}function Cp(e,t,n){return(t=vp(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ep(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ri(0),this.expirationTimes=ri(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ri(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Tp(e,t,n,r,i,s,o,a,l){return e=new Ep(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=vp(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cl(s),e}function Np(e){if(!e)return fa;e:{if(Ir(e=e._reactInternals)!==e||1!==e.tag)throw Error(Vt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ba(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(Vt(171))}if(1===e.tag){var n=e.type;if(ba(n))return Sa(e,n,t)}return t}function Pp(e,t,n,r,i,s,o,a,l){return(e=Tp(n,r,!0,e,0,s,0,a,l)).context=Np(null),n=e.current,(s=Tl(r=Fd(),i=Bd(n))).callback=null!=t?t:null,Nl(n,s,i),e.current.lanes=i,ii(e,i,r),Wd(e,r),e}function Rp(e,t,n,r){var i=t.current,s=Fd(),o=Bd(i);return n=Np(n),null===t.context?t.context=n:t.pendingContext=n,(t=Tl(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Nl(i,t,o))&&(Ud(e,i,o,s),Pl(e,i,o)),o}function Ip(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function kp(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function jp(e,t){kp(e,t),(e=e.alternate)&&kp(e,t)}ld=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||va.current)su=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return su=!1,function(e,t,n){switch(t.tag){case 3:mu(t),el();break;case 5:zl(t);break;case 1:ba(t.type)&&Ca(t);break;case 4:Ml(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ha(cl,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ha(Bl,1&Bl.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Su(e,t,n):(ha(Bl,1&Bl.current),null!==(e=Iu(e,t,n))?e.sibling:null);ha(Bl,1&Bl.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Pu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ha(Bl,Bl.current),r)break;return null;case 22:case 23:return t.lanes=0,uu(e,t,n)}return Iu(e,t,n)}(e,t,n);su=!!(131072&e.flags)}else su=!1,Va&&1048576&t.flags&&Ba(t,Aa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ru(e,t),e=t.pendingProps;var i=ya(t,ma.current);vl(t,n),i=nc(null,t,r,e,i,n);var s=rc();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ba(r)?(s=!0,Ca(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Cl(t),i.updater=Hc,t.stateNode=i,i._reactInternals=t,Kc(t,r,e,n),t=fu(null,t,r,!0,s,n)):(t.tag=0,Va&&s&&Ua(t),ou(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ru(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return gp(e)?1:0;if(null!=e){if((e=e.$$typeof)===mn)return 11;if(e===yn)return 14}return 2}(r),e=Wc(r,e),i){case 0:t=pu(null,t,r,e,n);break e;case 1:t=hu(null,t,r,e,n);break e;case 11:t=au(null,t,r,e,n);break e;case 14:t=lu(null,t,r,Wc(r.type,e),n);break e}throw Error(Vt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,pu(e,t,r,i=t.elementType===r?i:Wc(r,i),n);case 1:return r=t.type,i=t.pendingProps,hu(e,t,r,i=t.elementType===r?i:Wc(r,i),n);case 3:e:{if(mu(t),null===e)throw Error(Vt(387));r=t.pendingProps,i=(s=t.memoizedState).element,El(e,t),Il(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=vu(e,t,r,n,i=Jc(Error(Vt(423)),t));break e}if(r!==i){t=vu(e,t,r,n,i=Jc(Error(Vt(424)),t));break e}for(Ha=Yo(t.stateNode.containerInfo.firstChild),$a=t,Va=!0,qa=null,n=ll(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(el(),r===i){t=Iu(e,t,n);break e}ou(e,t,r,n)}t=t.child}return t;case 5:return zl(t),null===e&&Ya(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,$o(r,i)?o=null:null!==s&&$o(r,s)&&(t.flags|=32),du(e,t),ou(e,t,o,n),t.child;case 6:return null===e&&Ya(t),null;case 13:return Su(e,t,n);case 4:return Ml(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=al(t,null,r,n):ou(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,au(e,t,r,i=t.elementType===r?i:Wc(r,i),n);case 7:return ou(e,t,t.pendingProps,n),t.child;case 8:case 12:return ou(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ha(cl,r._currentValue),r._currentValue=o,null!==s)if(Gs(s.value,o)){if(s.children===i.children&&!va.current){t=Iu(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var a=s.dependencies;if(null!==a){o=s.child;for(var l=a.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=Tl(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ml(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(Vt(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),ml(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}ou(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,vl(t,n),r=r(i=gl(i)),t.flags|=1,ou(e,t,r,n),t.child;case 14:return i=Wc(r=t.type,t.pendingProps),lu(e,t,r,i=Wc(r.type,i),n);case 15:return cu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wc(r,i),Ru(e,t),t.tag=1,ba(r)?(e=!0,Ca(t)):e=!1,vl(t,n),qc(t,r,i),Kc(t,r,i,n),fu(null,t,r,!0,e,n);case 19:return Pu(e,t,n);case 22:return uu(e,t,n)}throw Error(Vt(156,t.tag))};var _p="function"==typeof reportError?reportError:function(e){console.error(e)};function Ap(e){this._internalRoot=e}function Op(e){this._internalRoot=e}function Dp(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Mp(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Lp(){}function zp(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=Ip(o);a.call(e)}}Rp(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Ip(o);s.call(e)}}var o=Pp(t,r,e,0,null,!1,0,"",Lp);return e._reactRootContainer=o,e[ta]=o.current,Io(8===e.nodeType?e.parentNode:e),Jd(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=Ip(l);a.call(e)}}var l=Tp(e,0,!1,null,0,!1,0,"",Lp);return e._reactRootContainer=l,e[ta]=l.current,Io(8===e.nodeType?e.parentNode:e),Jd(function(){Rp(t,l,n,r)}),l}(n,t,e,i,r);return Ip(o)}Op.prototype.render=Ap.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(Vt(409));Rp(e,t,null,null)},Op.prototype.unmount=Ap.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(function(){Rp(null,e,null,null)}),t[ta]=null}},Op.prototype.unstable_scheduleHydration=function(e){if(e){var t=di();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xi.length&&0!==t&&t<xi[n].priority;n++);xi.splice(n,0,e),0===n&&Ei(e)}},li=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Qr(t.pendingLanes);0!==n&&(si(t,1|n),Wd(t,zr()),!(6&hd)&&(Pd=zr()+500,Ia()))}break;case 13:Jd(function(){var t=wl(e,1);if(null!==t){var n=Fd();Ud(t,e,1,n)}}),jp(e,1)}},ci=function(e){if(13===e.tag){var t=wl(e,134217728);null!==t&&Ud(t,e,134217728,Fd()),jp(e,134217728)}},ui=function(e){if(13===e.tag){var t=Bd(e),n=wl(e,t);null!==n&&Ud(n,e,t,Fd()),jp(e,t)}},di=function(){return oi},pi=function(e,t){var n=oi;try{return oi=e,t()}finally{oi=n}},cr=function(e,t,n){switch(t){case"input":if(Fn(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=la(r);if(!i)throw Error(Vt(90));On(r),Fn(r,i)}}}break;case"textarea":qn(e,n);break;case"select":null!=(t=n.value)&&$n(e,!!n.multiple,t,!1)}},mr=Kd,vr=Jd;var Fp={usingClientEntryPoint:!1,Events:[oa,aa,la,hr,fr,Kd]},Bp={findFiberByHostInstance:sa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Up={bundleType:Bp.bundleType,version:Bp.version,rendererPackageName:Bp.rendererPackageName,rendererConfig:Bp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:an.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=_r(e))?null:e.stateNode},findFiberByHostInstance:Bp.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Wp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wp.isDisabled&&Wp.supportsFiber)try{Vr=Wp.inject(Up),qr=Wp}catch(Zn){}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fp,Ft.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Dp(t))throw Error(Vt(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:cn,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},Ft.createRoot=function(e,t){if(!Dp(e))throw Error(Vt(299));var n=!1,r="",i=_p;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Tp(e,1,!1,null,0,n,0,r,i),e[ta]=t.current,Io(8===e.nodeType?e.parentNode:e),new Ap(t)},Ft.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Vt(188));throw e=Object.keys(e).join(","),Error(Vt(268,e))}return e=null===(e=_r(t))?null:e.stateNode},Ft.flushSync=function(e){return Jd(e)},Ft.hydrate=function(e,t,n){if(!Mp(t))throw Error(Vt(200));return zp(null,e,t,!0,n)},Ft.hydrateRoot=function(e,t,n){if(!Dp(e))throw Error(Vt(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=_p;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Pp(t,null,e,1,null!=n?n:null,i,0,s,o),e[ta]=t.current,Io(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Op(t)},Ft.render=function(e,t,n){if(!Mp(t))throw Error(Vt(200));return zp(null,e,t,!1,n)},Ft.unmountComponentAtNode=function(e){if(!Mp(e))throw Error(Vt(40));return!!e._reactRootContainer&&(Jd(function(){zp(null,null,e,!1,function(){e._reactRootContainer=null,e[ta]=null})}),!0)},Ft.unstable_batchedUpdates=Kd,Ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Mp(n))throw Error(Vt(200));if(null==e||void 0===e._reactInternals)throw Error(Vt(38));return zp(e,t,n,!1,r)},Ft.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),zt.exports=Ft;var $p=zt.exports;const Hp=Ue($p);var Vp,qp=$p;Vp=qp.createRoot,qp.hydrateRoot;var Gp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Kp={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Jp=new(r=class{constructor(){x(this,t,Kp),x(this,n,!1)}setTimeoutProvider(e){w(this,t,e)}setTimeout(e,n){return b(this,t).setTimeout(e,n)}clearTimeout(e){b(this,t).clearTimeout(e)}setInterval(e,n){return b(this,t).setInterval(e,n)}clearInterval(e){b(this,t).clearInterval(e)}},t=new WeakMap,n=new WeakMap,r),Yp="undefined"==typeof window||"Deno"in globalThis;function Zp(){}function Qp(e){return"number"==typeof e&&e>=0&&e!==1/0}function Xp(e,t){return Math.max(e+(t||0)-Date.now(),0)}function eh(e,t){return"function"==typeof e?e(t):e}function th(e,t){return"function"==typeof e?e(t):e}function nh(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=e;if(o)if(r){if(t.queryHash!==ih(o,t.options))return!1}else if(!oh(t.queryKey,o))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return!("boolean"==typeof a&&t.isStale()!==a||i&&i!==t.state.fetchStatus||s&&!s(t))}function rh(e,t){const{exact:n,status:r,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(sh(t.options.mutationKey)!==sh(s))return!1}else if(!oh(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function ih(e,t){return((null==t?void 0:t.queryKeyHashFn)||sh)(e)}function sh(e){return JSON.stringify(e,(e,t)=>dh(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function oh(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(n=>oh(e[n],t[n]))}var ah=Object.prototype.hasOwnProperty;function lh(e,t){if(e===t)return e;const n=uh(e)&&uh(t);if(!(n||dh(e)&&dh(t)))return t;const r=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),s=i.length,o=n?new Array(s):{};let a=0;for(let l=0;l<s;l++){const s=n?l:i[l],c=e[s],u=t[s];if(c===u){o[s]=c,(n?l<r:ah.call(e,s))&&a++;continue}if(null===c||null===u||"object"!=typeof c||"object"!=typeof u){o[s]=u;continue}const d=lh(c,u);o[s]=d,d===c&&a++}return r===s&&a===r?e:o}function ch(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function uh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function dh(e){if(!ph(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!ph(n)&&!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype}function ph(e){return"[object Object]"===Object.prototype.toString.call(e)}function hh(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?lh(e,t):t}function fh(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function mh(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var vh=Symbol();function gh(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==vh?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function yh(e,t){return"function"==typeof e?e(...t):!!e}var bh=new(a=class extends Gp{constructor(){super(),x(this,i),x(this,s),x(this,o),w(this,o,e=>{if(!Yp&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){b(this,s)||this.setEventListener(b(this,o))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=b(this,s))||e.call(this),w(this,s,void 0))}setEventListener(e){var t;w(this,o,e),null==(t=b(this,s))||t.call(this),w(this,s,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){b(this,i)!==e&&(w(this,i,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return"boolean"==typeof b(this,i)?b(this,i):"hidden"!==(null==(e=globalThis.document)?void 0:e.visibilityState)}},i=new WeakMap,s=new WeakMap,o=new WeakMap,a);function xh(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}var wh=function(e){setTimeout(e,0)},Sh=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},i=wh;const s=r=>{t?e.push(r):i(()=>{n(r)})};return{batch:s=>{let o;t++;try{o=s()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i(()=>{r(()=>{t.forEach(e=>{n(e)})})})})()}return o},batchCalls:e=>(...t)=>{s(()=>{e(...t)})},schedule:s,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{i=e}}}(),Ch=new(d=class extends Gp{constructor(){super(),x(this,l,!0),x(this,c),x(this,u),w(this,u,e=>{if(!Yp&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){b(this,c)||this.setEventListener(b(this,u))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=b(this,c))||e.call(this),w(this,c,void 0))}setEventListener(e){var t;w(this,u,e),null==(t=b(this,c))||t.call(this),w(this,c,e(this.setOnline.bind(this)))}setOnline(e){b(this,l)!==e&&(w(this,l,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return b(this,l)}},l=new WeakMap,c=new WeakMap,u=new WeakMap,d);function Eh(e){return Math.min(1e3*p(2,e),3e4)}function Th(e){return"online"!==(null!=e?e:"online")||Ch.isOnline()}var Nh=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function Ph(e){let t,n=!1,r=0;const i=xh(),s=()=>"pending"!==i.status,o=()=>bh.isFocused()&&("always"===e.networkMode||Ch.isOnline())&&e.canRun(),a=()=>Th(e.networkMode)&&e.canRun(),l=e=>{s()||(null==t||t(),i.resolve(e))},c=e=>{s()||(null==t||t(),i.reject(e))},u=()=>new Promise(n=>{var r;t=e=>{(s()||o())&&n(e)},null==(r=e.onPause)||r.call(e)}).then(()=>{var n;t=void 0,s()||null==(n=e.onContinue)||n.call(e)}),d=()=>{if(s())return;let t;const i=0===r?e.initialPromise:void 0;try{t=null!=i?i:e.fn()}catch(a){t=Promise.reject(a)}Promise.resolve(t).then(l).catch(t=>{var i,a,l;if(s())return;const p=null!=(i=e.retry)?i:Yp?0:3,h=null!=(a=e.retryDelay)?a:Eh,f="function"==typeof h?h(r,t):h,m=!0===p||"number"==typeof p&&r<p||"function"==typeof p&&p(r,t);var v;!n&&m?(r++,null==(l=e.onFail)||l.call(e,r,t),(v=f,new Promise(e=>{Jp.setTimeout(e,v)})).then(()=>o()?void 0:u()).then(()=>{n?c(t):d()})):c(t)})};return{promise:i,status:()=>i.status,cancel:t=>{var n;if(!s()){const r=new Nh(t);c(r),null==(n=e.onCancel)||n.call(e,r)}},continue:()=>(null==t||t(),i),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:a,start:()=>(a()?d():u().then(d),i)}}var Rh=(y=class{constructor(){x(this,h)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Qp(this.gcTime)&&w(this,h,Jp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!=e?e:Yp?1/0:3e5)}clearGcTimeout(){b(this,h)&&(Jp.clearTimeout(b(this,h)),w(this,h,void 0))}},h=new WeakMap,y),Ih=(D=class extends Rh{constructor(e){var t;super(),x(this,A),x(this,N),x(this,P),x(this,R),x(this,I),x(this,k),x(this,j),x(this,_),w(this,_,!1),w(this,j,e.defaultOptions),this.setOptions(e.options),this.observers=[],w(this,I,e.client),w(this,R,b(this,I).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,w(this,N,_h(this.options)),this.state=null!=(t=e.state)?t:b(this,N),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=b(this,k))?void 0:e.promise}setOptions(e){if(this.options=f(f({},b(this,j)),e),this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=_h(this.options);void 0!==e.data&&(this.setState(jh(e.data,e.dataUpdatedAt)),w(this,N,e))}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||b(this,R).remove(this)}setData(e,t){const n=hh(this.state.data,e,this.options);return S(this,A,O).call(this,{data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){S(this,A,O).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,n;const r=null==(t=b(this,k))?void 0:t.promise;return null==(n=b(this,k))||n.cancel(e),r?r.then(Zp).catch(Zp):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(b(this,N))}isActive(){return this.observers.some(e=>!1!==th(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===eh(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!Xp(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=b(this,k))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=b(this,k))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),b(this,R).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(b(this,k)&&(b(this,_)?b(this,k).cancel({revert:!0}):b(this,k).cancelRetry()),this.scheduleGc()),b(this,R).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||S(this,A,O).call(this,{type:"invalidate"})}fetch(e,t){return T(this,null,function*(){var n,r,i,s,o,a,l,c,u,d,p,h;if("idle"!==this.state.fetchStatus&&"rejected"!==(null==(n=b(this,k))?void 0:n.status()))if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(b(this,k))return b(this,k).continueRetry(),b(this,k).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const v=new AbortController,g=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(w(this,_,!0),v.signal)})},y=()=>{const e=gh(this.options,t),n=(()=>{const e={client:b(this,I),queryKey:this.queryKey,meta:this.meta};return g(e),e})();return w(this,_,!1),this.options.persister?this.options.persister(e,n,this):e(n)},x=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:b(this,I),state:this.state,fetchFn:y};return g(e),e})();null==(r=this.options.behavior)||r.onFetch(x,this),w(this,P,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(i=x.fetchOptions)?void 0:i.meta)||S(this,A,O).call(this,{type:"fetch",meta:null==(s=x.fetchOptions)?void 0:s.meta}),w(this,k,Ph({initialPromise:null==t?void 0:t.initialPromise,fn:x.fetchFn,onCancel:e=>{e instanceof Nh&&e.revert&&this.setState(m(f({},b(this,P)),{fetchStatus:"idle"})),v.abort()},onFail:(e,t)=>{S(this,A,O).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{S(this,A,O).call(this,{type:"pause"})},onContinue:()=>{S(this,A,O).call(this,{type:"continue"})},retry:x.options.retry,retryDelay:x.options.retryDelay,networkMode:x.options.networkMode,canRun:()=>!0}));try{const e=yield b(this,k).start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),null==(a=(o=b(this,R).config).onSuccess)||a.call(o,e,this),null==(c=(l=b(this,R).config).onSettled)||c.call(l,e,this.state.error,this),e}catch(C){if(C instanceof Nh){if(C.silent)return b(this,k).promise;if(C.revert){if(void 0===this.state.data)throw C;return this.state.data}}throw S(this,A,O).call(this,{type:"error",error:C}),null==(d=(u=b(this,R).config).onError)||d.call(u,C,this),null==(h=(p=b(this,R).config).onSettled)||h.call(p,this.state.data,C,this),C}finally{this.scheduleGc()}})}},N=new WeakMap,P=new WeakMap,R=new WeakMap,I=new WeakMap,k=new WeakMap,j=new WeakMap,_=new WeakMap,A=new WeakSet,O=function(e){this.state=(t=>{var n;switch(e.type){case"failed":return m(f({},t),{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return m(f({},t),{fetchStatus:"paused"});case"continue":return m(f({},t),{fetchStatus:"fetching"});case"fetch":return m(f(f({},t),kh(t.data,this.options)),{fetchMeta:null!=(n=e.meta)?n:null});case"success":const r=f(m(f(f({},t),jh(e.data,e.dataUpdatedAt)),{dataUpdateCount:t.dataUpdateCount+1}),!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});return w(this,P,e.manual?r:void 0),r;case"error":const i=e.error;return m(f({},t),{error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"});case"invalidate":return m(f({},t),{isInvalidated:!0});case"setState":return f(f({},t),e.state)}})(this.state),Sh.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),b(this,R).notify({query:this,type:"updated",action:e})})},D);function kh(e,t){return f({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Th(t.networkMode)?"fetching":"paused"},void 0===e&&{error:null,status:"pending"})}function jh(e,t){return{data:e,dataUpdatedAt:null!=t?t:Date.now(),error:null,isInvalidated:!1,status:"success"}}function _h(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ah=(le=class extends Gp{constructor(e,t){super(),x(this,Q),x(this,M),x(this,L),x(this,z),x(this,F),x(this,B),x(this,U),x(this,W),x(this,H),x(this,V),x(this,q),x(this,G),x(this,K),x(this,J),x(this,Y),x(this,Z,new Set),this.options=t,w(this,M,e),w(this,H,null),w(this,W,xh()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(b(this,L).addObserver(this),Oh(b(this,L),this.options)?S(this,Q,X).call(this):this.updateResult(),S(this,Q,re).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Dh(b(this,L),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Dh(b(this,L),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,S(this,Q,ie).call(this),S(this,Q,se).call(this),b(this,L).removeObserver(this)}setOptions(e){const t=this.options,n=b(this,L);if(this.options=b(this,M).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof th(this.options.enabled,b(this,L)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");S(this,Q,oe).call(this),b(this,L).setOptions(this.options),t._defaulted&&!ch(this.options,t)&&b(this,M).getQueryCache().notify({type:"observerOptionsUpdated",query:b(this,L),observer:this});const r=this.hasListeners();r&&Mh(b(this,L),n,this.options,t)&&S(this,Q,X).call(this),this.updateResult(),!r||b(this,L)===n&&th(this.options.enabled,b(this,L))===th(t.enabled,b(this,L))&&eh(this.options.staleTime,b(this,L))===eh(t.staleTime,b(this,L))||S(this,Q,ee).call(this);const i=S(this,Q,te).call(this);!r||b(this,L)===n&&th(this.options.enabled,b(this,L))===th(t.enabled,b(this,L))&&i===b(this,Y)||S(this,Q,ne).call(this,i)}getOptimisticResult(e){const t=b(this,M).getQueryCache().build(b(this,M),e),n=this.createResult(t,e);return r=n,!ch(this.getCurrentResult(),r)&&(w(this,F,n),w(this,U,this.options),w(this,B,b(this,L).state)),n;var r}getCurrentResult(){return b(this,F)}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),null==t||t(n),"promise"===n&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==b(this,W).status||b(this,W).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,n))})}trackProp(e){b(this,Z).add(e)}getCurrentQuery(){return b(this,L)}refetch(e={}){var t=v(e,[]);return this.fetch(f({},t))}fetchOptimistic(e){const t=b(this,M).defaultQueryOptions(e),n=b(this,M).getQueryCache().build(b(this,M),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){var t;return S(this,Q,X).call(this,m(f({},e),{cancelRefetch:null==(t=e.cancelRefetch)||t})).then(()=>(this.updateResult(),b(this,F)))}createResult(e,t){var n;const r=b(this,L),i=this.options,s=b(this,F),o=b(this,B),a=b(this,U),l=e!==r?e.state:b(this,z),{state:c}=e;let u,d=f({},c),p=!1;if(t._optimisticResults){const n=this.hasListeners(),s=!n&&Oh(e,t),o=n&&Mh(e,r,t,i);(s||o)&&(d=f(f({},d),kh(c.data,e.options))),"isRestoring"===t._optimisticResults&&(d.fetchStatus="idle")}let{error:h,errorUpdatedAt:m,status:v}=d;u=d.data;let g=!1;if(void 0!==t.placeholderData&&void 0===u&&"pending"===v){let e;(null==s?void 0:s.isPlaceholderData)&&t.placeholderData===(null==a?void 0:a.placeholderData)?(e=s.data,g=!0):e="function"==typeof t.placeholderData?t.placeholderData(null==(n=b(this,G))?void 0:n.state.data,b(this,G)):t.placeholderData,void 0!==e&&(v="success",u=hh(null==s?void 0:s.data,e,t),p=!0)}if(t.select&&void 0!==u&&!g)if(s&&u===(null==o?void 0:o.data)&&t.select===b(this,V))u=b(this,q);else try{w(this,V,t.select),u=t.select(u),u=hh(null==s?void 0:s.data,u,t),w(this,q,u),w(this,H,null)}catch(N){w(this,H,N)}b(this,H)&&(h=b(this,H),u=b(this,q),m=Date.now(),v="error");const y="fetching"===d.fetchStatus,x="pending"===v,S="error"===v,C=x&&y,E=void 0!==u,T={status:v,fetchStatus:d.fetchStatus,isPending:x,isSuccess:"success"===v,isError:S,isInitialLoading:C,isLoading:C,data:u,dataUpdatedAt:d.dataUpdatedAt,error:h,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:y,isRefetching:y&&!x,isLoadingError:S&&!E,isPaused:"paused"===d.fetchStatus,isPlaceholderData:p,isRefetchError:S&&E,isStale:Lh(e,t),refetch:this.refetch,promise:b(this,W),isEnabled:!1!==th(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===T.status?e.reject(T.error):void 0!==T.data&&e.resolve(T.data)},n=()=>{const e=w(this,W,T.promise=xh());t(e)},i=b(this,W);switch(i.status){case"pending":e.queryHash===r.queryHash&&t(i);break;case"fulfilled":"error"!==T.status&&T.data===i.value||n();break;case"rejected":"error"===T.status&&T.error===i.reason||n()}}return T}updateResult(){const e=b(this,F),t=this.createResult(b(this,L),this.options);w(this,B,b(this,L).state),w(this,U,this.options),void 0!==b(this,B).data&&w(this,G,b(this,L)),ch(t,e)||(w(this,F,t),S(this,Q,ae).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!b(this,Z).size)return!0;const r=new Set(null!=n?n:b(this,Z));return this.options.throwOnError&&r.add("error"),Object.keys(b(this,F)).some(t=>{const n=t;return b(this,F)[n]!==e[n]&&r.has(n)})})()}))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&S(this,Q,re).call(this)}},M=new WeakMap,L=new WeakMap,z=new WeakMap,F=new WeakMap,B=new WeakMap,U=new WeakMap,W=new WeakMap,H=new WeakMap,V=new WeakMap,q=new WeakMap,G=new WeakMap,K=new WeakMap,J=new WeakMap,Y=new WeakMap,Z=new WeakMap,Q=new WeakSet,X=function(e){S(this,Q,oe).call(this);let t=b(this,L).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(Zp)),t},ee=function(){S(this,Q,ie).call(this);const e=eh(this.options.staleTime,b(this,L));if(Yp||b(this,F).isStale||!Qp(e))return;const t=Xp(b(this,F).dataUpdatedAt,e)+1;w(this,K,Jp.setTimeout(()=>{b(this,F).isStale||this.updateResult()},t))},te=function(){var e;return null!=(e="function"==typeof this.options.refetchInterval?this.options.refetchInterval(b(this,L)):this.options.refetchInterval)&&e},ne=function(e){S(this,Q,se).call(this),w(this,Y,e),!Yp&&!1!==th(this.options.enabled,b(this,L))&&Qp(b(this,Y))&&0!==b(this,Y)&&w(this,J,Jp.setInterval(()=>{(this.options.refetchIntervalInBackground||bh.isFocused())&&S(this,Q,X).call(this)},b(this,Y)))},re=function(){S(this,Q,ee).call(this),S(this,Q,ne).call(this,S(this,Q,te).call(this))},ie=function(){b(this,K)&&(Jp.clearTimeout(b(this,K)),w(this,K,void 0))},se=function(){b(this,J)&&(Jp.clearInterval(b(this,J)),w(this,J,void 0))},oe=function(){const e=b(this,M).getQueryCache().build(b(this,M),this.options);if(e===b(this,L))return;const t=b(this,L);w(this,L,e),w(this,z,e.state),this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))},ae=function(e){Sh.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(b(this,F))}),b(this,M).getQueryCache().notify({query:b(this,L),type:"observerResultsUpdated"})})},le);function Oh(e,t){return function(e,t){return!1!==th(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Dh(e,t,t.refetchOnMount)}function Dh(e,t,n){if(!1!==th(t.enabled,e)&&"static"!==eh(t.staleTime,e)){const r="function"==typeof n?n(e):n;return"always"===r||!1!==r&&Lh(e,t)}return!1}function Mh(e,t,n,r){return(e!==t||!1===th(r.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&Lh(e,n)}function Lh(e,t){return!1!==th(t.enabled,e)&&e.isStaleByTime(eh(t.staleTime,e))}function zh(e){return{onFetch:(t,n)=>{var r,i,s,o,a;const l=t.options,c=null==(s=null==(i=null==(r=t.fetchOptions)?void 0:r.meta)?void 0:i.fetchMore)?void 0:s.direction,u=(null==(o=t.state.data)?void 0:o.pages)||[],d=(null==(a=t.state.data)?void 0:a.pageParams)||[];let p={pages:[],pageParams:[]},h=0;const f=()=>T(this,null,function*(){var n;let r=!1;const i=gh(t.options,t.fetchOptions),s=(e,n,s)=>T(this,null,function*(){if(r)return Promise.reject();if(null==n&&e.pages.length)return Promise.resolve(e);const o=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:n,direction:s?"backward":"forward",meta:t.options.meta};var i;return i=e,Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",()=>{r=!0}),t.signal)}),e})(),a=yield i(o),{maxPages:l}=t.options,c=s?mh:fh;return{pages:c(e.pages,a,l),pageParams:c(e.pageParams,n,l)}});if(c&&u.length){const e="backward"===c,t={pages:u,pageParams:d},n=(e?Bh:Fh)(l,t);p=yield s(t,n,e)}else{const t=null!=e?e:u.length;do{const e=0===h?null!=(n=d[0])?n:l.initialPageParam:Fh(l,p);if(h>0&&null==e)break;p=yield s(p,e),h++}while(h<t)}return p});t.options.persister?t.fetchFn=()=>{var e,r;return null==(r=(e=t.options).persister)?void 0:r.call(e,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=f}}}function Fh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Bh(e,{pages:t,pageParams:n}){var r;return t.length>0?null==(r=e.getPreviousPageParam)?void 0:r.call(e,t[0],t,n[0],n):void 0}var Uh=(me=class extends Rh{constructor(e){super(),x(this,he),x(this,ce),x(this,ue),x(this,de),x(this,pe),w(this,ce,e.client),this.mutationId=e.mutationId,w(this,de,e.mutationCache),w(this,ue,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){b(this,ue).includes(e)||(b(this,ue).push(e),this.clearGcTimeout(),b(this,de).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){w(this,ue,b(this,ue).filter(t=>t!==e)),this.scheduleGc(),b(this,de).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){b(this,ue).length||("pending"===this.state.status?this.scheduleGc():b(this,de).remove(this))}continue(){var e,t;return null!=(t=null==(e=b(this,pe))?void 0:e.continue())?t:this.execute(this.state.variables)}execute(e){return T(this,null,function*(){var t,n,r,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y,x,C,E;const T=()=>{S(this,he,fe).call(this,{type:"continue"})},N={client:b(this,ce),meta:this.options.meta,mutationKey:this.options.mutationKey};w(this,pe,Ph({fn:()=>this.options.mutationFn?this.options.mutationFn(e,N):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{S(this,he,fe).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{S(this,he,fe).call(this,{type:"pause"})},onContinue:T,retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>b(this,de).canRun(this)}));const P="pending"===this.state.status,R=!b(this,pe).canStart();try{if(P)T();else{S(this,he,fe).call(this,{type:"pending",variables:e,isPaused:R}),yield null==(r=(n=b(this,de).config).onMutate)?void 0:r.call(n,e,this,N);const t=yield null==(s=(i=this.options).onMutate)?void 0:s.call(i,e,N);t!==this.state.context&&S(this,he,fe).call(this,{type:"pending",context:t,variables:e,isPaused:R})}const t=yield b(this,pe).start();return yield null==(a=(o=b(this,de).config).onSuccess)?void 0:a.call(o,t,e,this.state.context,this,N),yield null==(c=(l=this.options).onSuccess)?void 0:c.call(l,t,e,this.state.context,N),yield null==(d=(u=b(this,de).config).onSettled)?void 0:d.call(u,t,null,this.state.variables,this.state.context,this,N),yield null==(h=(p=this.options).onSettled)?void 0:h.call(p,t,null,e,this.state.context,N),S(this,he,fe).call(this,{type:"success",data:t}),t}catch(I){try{throw yield null==(m=(f=b(this,de).config).onError)?void 0:m.call(f,I,e,this.state.context,this,N),yield null==(g=(v=this.options).onError)?void 0:g.call(v,I,e,this.state.context,N),yield null==(x=(y=b(this,de).config).onSettled)?void 0:x.call(y,void 0,I,this.state.variables,this.state.context,this,N),yield null==(E=(C=this.options).onSettled)?void 0:E.call(C,void 0,I,e,this.state.context,N),I}finally{S(this,he,fe).call(this,{type:"error",error:I})}}finally{b(this,de).runNext(this)}})}},ce=new WeakMap,ue=new WeakMap,de=new WeakMap,pe=new WeakMap,he=new WeakSet,fe=function(e){this.state=(t=>{switch(e.type){case"failed":return m(f({},t),{failureCount:e.failureCount,failureReason:e.error});case"pause":return m(f({},t),{isPaused:!0});case"continue":return m(f({},t),{isPaused:!1});case"pending":return m(f({},t),{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return m(f({},t),{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return m(f({},t),{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),Sh.batch(()=>{b(this,ue).forEach(t=>{t.onMutationUpdate(e)}),b(this,de).notify({mutation:this,type:"updated",action:e})})},me),Wh=(be=class extends Gp{constructor(e={}){super(),x(this,ve),x(this,ge),x(this,ye),this.config=e,w(this,ve,new Set),w(this,ge,new Map),w(this,ye,0)}build(e,t,n){const r=new Uh({client:e,mutationCache:this,mutationId:++C(this,ye)._,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){b(this,ve).add(e);const t=$h(e);if("string"==typeof t){const n=b(this,ge).get(t);n?n.push(e):b(this,ge).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(b(this,ve).delete(e)){const t=$h(e);if("string"==typeof t){const n=b(this,ge).get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&b(this,ge).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=$h(e);if("string"==typeof t){const n=b(this,ge).get(t),r=null==n?void 0:n.find(e=>"pending"===e.state.status);return!r||r===e}return!0}runNext(e){var t,n;const r=$h(e);if("string"==typeof r){const i=null==(t=b(this,ge).get(r))?void 0:t.find(t=>t!==e&&t.state.isPaused);return null!=(n=null==i?void 0:i.continue())?n:Promise.resolve()}return Promise.resolve()}clear(){Sh.batch(()=>{b(this,ve).forEach(e=>{this.notify({type:"removed",mutation:e})}),b(this,ve).clear(),b(this,ge).clear()})}getAll(){return Array.from(b(this,ve))}find(e){const t=f({exact:!0},e);return this.getAll().find(e=>rh(t,e))}findAll(e={}){return this.getAll().filter(t=>rh(e,t))}notify(e){Sh.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Sh.batch(()=>Promise.all(e.map(e=>e.continue().catch(Zp))))}},ve=new WeakMap,ge=new WeakMap,ye=new WeakMap,be);function $h(e){var t;return null==(t=e.options.scope)?void 0:t.id}var Hh=(Pe=class extends Gp{constructor(e,t){super(),x(this,Ee),x(this,xe),x(this,we),x(this,Se),x(this,Ce),w(this,xe,e),this.setOptions(t),this.bindMethods(),S(this,Ee,Te).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const n=this.options;this.options=b(this,xe).defaultMutationOptions(e),ch(this.options,n)||b(this,xe).getMutationCache().notify({type:"observerOptionsUpdated",mutation:b(this,Se),observer:this}),(null==n?void 0:n.mutationKey)&&this.options.mutationKey&&sh(n.mutationKey)!==sh(this.options.mutationKey)?this.reset():"pending"===(null==(t=b(this,Se))?void 0:t.state.status)&&b(this,Se).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=b(this,Se))||e.removeObserver(this)}onMutationUpdate(e){S(this,Ee,Te).call(this),S(this,Ee,Ne).call(this,e)}getCurrentResult(){return b(this,we)}reset(){var e;null==(e=b(this,Se))||e.removeObserver(this),w(this,Se,void 0),S(this,Ee,Te).call(this),S(this,Ee,Ne).call(this)}mutate(e,t){var n;return w(this,Ce,t),null==(n=b(this,Se))||n.removeObserver(this),w(this,Se,b(this,xe).getMutationCache().build(b(this,xe),this.options)),b(this,Se).addObserver(this),b(this,Se).execute(e)}},xe=new WeakMap,we=new WeakMap,Se=new WeakMap,Ce=new WeakMap,Ee=new WeakSet,Te=function(){var e,t;const n=null!=(t=null==(e=b(this,Se))?void 0:e.state)?t:{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};w(this,we,m(f({},n),{isPending:"pending"===n.status,isSuccess:"success"===n.status,isError:"error"===n.status,isIdle:"idle"===n.status,mutate:this.mutate,reset:this.reset}))},Ne=function(e){Sh.batch(()=>{var t,n,r,i,s,o,a,l;if(b(this,Ce)&&this.hasListeners()){const c=b(this,we).variables,u=b(this,we).context,d={client:b(this,xe),meta:this.options.meta,mutationKey:this.options.mutationKey};"success"===(null==e?void 0:e.type)?(null==(n=(t=b(this,Ce)).onSuccess)||n.call(t,e.data,c,u,d),null==(i=(r=b(this,Ce)).onSettled)||i.call(r,e.data,null,c,u,d)):"error"===(null==e?void 0:e.type)&&(null==(o=(s=b(this,Ce)).onError)||o.call(s,e.error,c,u,d),null==(l=(a=b(this,Ce)).onSettled)||l.call(a,void 0,e.error,c,u,d))}this.listeners.forEach(e=>{e(b(this,we))})})},Pe),Vh=(Ie=class extends Gp{constructor(e={}){super(),x(this,Re),this.config=e,w(this,Re,new Map)}build(e,t,n){var r;const i=t.queryKey,s=null!=(r=t.queryHash)?r:ih(i,t);let o=this.get(s);return o||(o=new Ih({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){b(this,Re).has(e.queryHash)||(b(this,Re).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=b(this,Re).get(e.queryHash);t&&(e.destroy(),t===e&&b(this,Re).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Sh.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return b(this,Re).get(e)}getAll(){return[...b(this,Re).values()]}find(e){const t=f({exact:!0},e);return this.getAll().find(e=>nh(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>nh(e,t)):t}notify(e){Sh.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Sh.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Sh.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Re=new WeakMap,Ie),qh=(ze=class{constructor(e={}){x(this,ke),x(this,je),x(this,_e),x(this,Ae),x(this,Oe),x(this,De),x(this,Me),x(this,Le),w(this,ke,e.queryCache||new Vh),w(this,je,e.mutationCache||new Wh),w(this,_e,e.defaultOptions||{}),w(this,Ae,new Map),w(this,Oe,new Map),w(this,De,0)}mount(){C(this,De)._++,1===b(this,De)&&(w(this,Me,bh.subscribe(e=>T(this,null,function*(){e&&(yield this.resumePausedMutations(),b(this,ke).onFocus())}))),w(this,Le,Ch.subscribe(e=>T(this,null,function*(){e&&(yield this.resumePausedMutations(),b(this,ke).onOnline())}))))}unmount(){var e,t;C(this,De)._--,0===b(this,De)&&(null==(e=b(this,Me))||e.call(this),w(this,Me,void 0),null==(t=b(this,Le))||t.call(this),w(this,Le,void 0))}isFetching(e){return b(this,ke).findAll(m(f({},e),{fetchStatus:"fetching"})).length}isMutating(e){return b(this,je).findAll(m(f({},e),{status:"pending"})).length}getQueryData(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=b(this,ke).get(n.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=b(this,ke).build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(eh(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return b(this,ke).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=b(this,ke).get(r.queryHash),s=function(e,t){return"function"==typeof e?e(t):e}(t,null==i?void 0:i.state.data);if(void 0!==s)return b(this,ke).build(this,r).setData(s,m(f({},n),{manual:!0}))}setQueriesData(e,t,n){return Sh.batch(()=>b(this,ke).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=b(this,ke).get(n.queryHash))?void 0:t.state}removeQueries(e){const t=b(this,ke);Sh.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=b(this,ke);return Sh.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(f({type:"active"},e),t)))}cancelQueries(e,t={}){const n=f({revert:!0},t),r=Sh.batch(()=>b(this,ke).findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(Zp).catch(Zp)}invalidateQueries(e,t={}){return Sh.batch(()=>{var n,r;return b(this,ke).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries(m(f({},e),{type:null!=(r=null!=(n=null==e?void 0:e.refetchType)?n:null==e?void 0:e.type)?r:"active"}),t)})}refetchQueries(e,t={}){var n;const r=m(f({},t),{cancelRefetch:null==(n=t.cancelRefetch)||n}),i=Sh.batch(()=>b(this,ke).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(Zp)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(i).then(Zp)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=b(this,ke).build(this,t);return n.isStaleByTime(eh(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Zp).catch(Zp)}fetchInfiniteQuery(e){return e.behavior=zh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Zp).catch(Zp)}ensureInfiniteQueryData(e){return e.behavior=zh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ch.isOnline()?b(this,je).resumePausedMutations():Promise.resolve()}getQueryCache(){return b(this,ke)}getMutationCache(){return b(this,je)}getDefaultOptions(){return b(this,_e)}setDefaultOptions(e){w(this,_e,e)}setQueryDefaults(e,t){b(this,Ae).set(sh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...b(this,Ae).values()],n={};return t.forEach(t=>{oh(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){b(this,Oe).set(sh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...b(this,Oe).values()],n={};return t.forEach(t=>{oh(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t=m(f(f(f({},b(this,_e).queries),this.getQueryDefaults(e.queryKey)),e),{_defaulted:!0});return t.queryHash||(t.queryHash=ih(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===vh&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:m(f(f(f({},b(this,_e).mutations),(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{_defaulted:!0})}clear(){b(this,ke).clear(),b(this,je).clear()}},ke=new WeakMap,je=new WeakMap,_e=new WeakMap,Ae=new WeakMap,Oe=new WeakMap,De=new WeakMap,Me=new WeakMap,Le=new WeakMap,ze),Gh=Pt.createContext(void 0),Kh=e=>{const t=Pt.useContext(Gh);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Jh=({client:e,children:t})=>(Pt.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Lt.jsx(Gh.Provider,{value:e,children:t})),Yh=Pt.createContext(!1);Yh.Provider;var Zh=Pt.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),Qh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Xh(e,t,n){var r,i,s,o,a;const l=Pt.useContext(Yh),c=Pt.useContext(Zh),u=Kh(),d=u.defaultQueryOptions(e);null==(i=null==(r=u.getDefaultOptions().queries)?void 0:r._experimental_beforeQuery)||i.call(r,d),d._optimisticResults=l?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,n=e=>"static"===e?e:Math.max(null!=e?e:t,t),r=e.staleTime;e.staleTime="function"==typeof r?(...e)=>n(r(...e)):n(r),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(d),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(d,c),(e=>{Pt.useEffect(()=>{e.clearReset()},[e])})(c);const p=!u.getQueryCache().get(d.queryHash),[h]=Pt.useState(()=>new t(u,d)),f=h.getOptimisticResult(d),m=!l&&!1!==e.subscribed;if(Pt.useSyncExternalStore(Pt.useCallback(e=>{const t=m?h.subscribe(Sh.batchCalls(e)):Zp;return h.updateResult(),t},[h,m]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),Pt.useEffect(()=>{h.setOptions(d)},[d,h]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(d,f))throw Qh(d,h,c);if((({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&void 0===e.data||yh(n,[e.error,r])))({result:f,errorResetBoundary:c,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw f.error;if(null==(o=null==(s=u.getDefaultOptions().queries)?void 0:s._experimental_afterQuery)||o.call(s,d,f),d.experimental_prefetchInRender&&!Yp&&((e,t)=>e.isLoading&&e.isFetching&&!t)(f,l)){const e=p?Qh(d,h,c):null==(a=u.getQueryCache().get(d.queryHash))?void 0:a.promise;null==e||e.catch(Zp).finally(()=>{h.updateResult()})}return d.notifyOnChangeProps?f:h.trackResult(f)}function ef(e,t){const n=Kh(),[r]=Pt.useState(()=>new Hh(n,e));Pt.useEffect(()=>{r.setOptions(e)},[r,e]);const i=Pt.useSyncExternalStore(Pt.useCallback(e=>r.subscribe(Sh.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=Pt.useCallback((e,t)=>{r.mutate(e,t).catch(Zp)},[r]);if(i.error&&yh(r.options.throwOnError,[i.error]))throw i.error;return m(f({},i),{mutate:s,mutateAsync:i.mutate})}const tf={},nf=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in tf)return;tf[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,n&&i.setAttribute("nonce",n),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};
/**
     * react-router v7.9.5
     *
     * Copyright (c) Remix Software Inc.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE.md file in the root directory of this source tree.
     *
     * @license MIT
     */
var rf="popstate";function sf(e={}){return function(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:g.location,delta:t})}function p(e,t){a="PUSH";let n=cf(g.location,e,t);c=u()+1;let r=lf(n,c),d=g.createHref(n);try{o.pushState(r,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(d)}s&&l&&l({action:a,location:g.location,delta:1})}function h(e,t){a="REPLACE";let n=cf(g.location,e,t);c=u();let r=lf(n,c),i=g.createHref(n);o.replaceState(r,"",i),s&&l&&l({action:a,location:g.location,delta:0})}function v(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),of(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:uf(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}(e)}null==c&&(c=0,o.replaceState(m(f({},o.state),{idx:c}),""));let g={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(rf,d),l=e,()=>{i.removeEventListener(rf,d),l=null}},createHref:e=>t(i,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:p,replace:h,go:e=>o.go(e)};return g}(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return cf("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:uf(t)},0,e)}function of(e,t){if(!1===e||null==e)throw new Error(t)}function af(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function lf(e,t){return{usr:e.state,key:e.key,idx:t}}function cf(e,t,n=null,r){return m(f({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?df(t):t),{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function uf({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function df(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function pf(e,t,n="/"){return function(e,t,n,r){let i="string"==typeof t?df(t):t,s=wf(i.pathname||"/",n);if(null==s)return null;let o=hf(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let l=0;null==a&&l<o.length;++l){let e=xf(s);a=yf(o[l],e,r)}return a}(e,t,n,!1)}function hf(e,t=[],n=[],r="",i=!1){let s=(e,s,o=i,a)=>{let l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&o)return;of(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let c=Tf([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(of(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),hf(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:gf(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&(null==(n=e.path)?void 0:n.includes("?")))for(let r of ff(e.path))s(e,t,!0,r);else s(e,t)}),t}function ff(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=ff(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var mf=/^:[\w-]+$/,vf=e=>"*"===e;function gf(e,t){let n=e.split("/"),r=n.length;return n.some(vf)&&(r+=-2),t&&(r+=2),n.filter(e=>!vf(e)).reduce((e,t)=>e+(mf.test(t)?3:""===t?1:10),r)}function yf(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=bf({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=bf({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Tf([s,u.pathname]),pathnameBase:Nf(Tf([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=Tf([s,u.pathnameBase]))}return o}function bf(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){af("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=a[r]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const i=a[r];return e[t]=n&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function xf(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return af(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function wf(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Sf(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Cf(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Ef(e,t,n,r=!1){let i;"string"==typeof e?i=df(e):(i=f({},e),of(!i.pathname||!i.pathname.includes("?"),Sf("?","pathname","search",i)),of(!i.pathname||!i.pathname.includes("#"),Sf("#","pathname","hash",i)),of(!i.search||!i.search.includes("#"),Sf("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:n,search:r="",hash:i=""}="string"==typeof e?df(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:Pf(r),hash:Rf(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Tf=e=>e.join("/").replace(/\/\/+/g,"/"),Nf=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Pf=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Rf=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var If=["POST","PUT","PATCH","DELETE"];new Set(If);var kf=["GET",...If];new Set(kf);var jf=Pt.createContext(null);jf.displayName="DataRouter";var _f=Pt.createContext(null);_f.displayName="DataRouterState",Pt.createContext(!1);var Af=Pt.createContext({isTransitioning:!1});Af.displayName="ViewTransition",Pt.createContext(new Map).displayName="Fetchers",Pt.createContext(null).displayName="Await";var Of=Pt.createContext(null);Of.displayName="Navigation";var Df=Pt.createContext(null);Df.displayName="Location";var Mf=Pt.createContext({outlet:null,matches:[],isDataRoute:!1});Mf.displayName="Route";var Lf=Pt.createContext(null);function zf(){return null!=Pt.useContext(Df)}function Ff(){return of(zf(),"useLocation() may be used only in the context of a <Router> component."),Pt.useContext(Df).location}Lf.displayName="RouteError";var Bf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Uf(e){Pt.useContext(Of).static||Pt.useLayoutEffect(e)}function Wf(){let{isDataRoute:e}=Pt.useContext(Mf);return e?function(){let{router:e}=function(e){let t=Pt.useContext(jf);return of(t,Jf(e)),t}("useNavigate"),t=Yf("useNavigate"),n=Pt.useRef(!1);return Uf(()=>{n.current=!0}),Pt.useCallback((r,...i)=>T(this,[r,...i],function*(r,i={}){af(n.current,Bf),n.current&&("number"==typeof r?e.navigate(r):yield e.navigate(r,f({fromRouteId:t},i)))}),[e,t])}():function(){of(zf(),"useNavigate() may be used only in the context of a <Router> component.");let e=Pt.useContext(jf),{basename:t,navigator:n}=Pt.useContext(Of),{matches:r}=Pt.useContext(Mf),{pathname:i}=Ff(),s=JSON.stringify(Cf(r)),o=Pt.useRef(!1);return Uf(()=>{o.current=!0}),Pt.useCallback((r,a={})=>{if(af(o.current,Bf),!o.current)return;if("number"==typeof r)return void n.go(r);let l=Ef(r,JSON.parse(s),i,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Tf([t,l.pathname])),(a.replace?n.replace:n.push)(l,a.state,a)},[t,n,s,i,e])}()}function $f(e,{relative:t}={}){let{matches:n}=Pt.useContext(Mf),{pathname:r}=Ff(),i=JSON.stringify(Cf(n));return Pt.useMemo(()=>Ef(e,JSON.parse(i),r,"path"===t),[e,i,r,t])}function Hf(e,t,n,r,i){var s;of(zf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Pt.useContext(Of),{matches:a}=Pt.useContext(Mf),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",p=l&&l.route;{let e=p&&p.path||"";Qf(u,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let h,m=Ff();if(t){let e="string"==typeof t?df(t):t;of("/"===d||(null==(s=e.pathname)?void 0:s.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),h=e}else h=m;let v=h.pathname||"/",g=v;if("/"!==d){let e=d.replace(/^\//,"").split("/");g="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=pf(e,{pathname:g});af(p||null!=y,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),af(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=function(e,t=[],n=null,r=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,s=null==n?void 0:n.errors;if(null!=s){let e=i.findIndex(e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id]));of(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let o=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let e=i[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(a=l),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){o=!0,i=a>=0?i.slice(0,a+1):[i[0]];break}}}return i.reduceRight((e,l,c)=>{let u,d=!1,p=null,h=null;n&&(u=s&&l.route.id?s[l.route.id]:void 0,p=l.route.errorElement||qf,o&&(a<0&&0===c?(Qf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,h=null):a===c&&(d=!0,h=l.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,c+1)),m=()=>{let t;return t=u?p:d?h:l.route.Component?Pt.createElement(l.route.Component,null):l.route.element?l.route.element:e,Pt.createElement(Kf,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?Pt.createElement(Gf,{location:n.location,revalidation:n.revalidation,component:p,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0},unstable_onError:r}):m()},null)}(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Tf([d,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Tf([d,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),a,n,r);return t&&b?Pt.createElement(Df.Provider,{value:{location:f({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},b):b}function Vf(){let e=function(){var e;let t=Pt.useContext(Lf),n=function(e){let t=Pt.useContext(_f);return of(t,Jf(e)),t}("useRouteError"),r=Yf("useRouteError");return void 0!==t?t:null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=Pt.createElement(Pt.Fragment,null,Pt.createElement("p",null," Hey developer "),Pt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Pt.createElement("code",{style:s},"ErrorBoundary")," or"," ",Pt.createElement("code",{style:s},"errorElement")," prop on your route.")),Pt.createElement(Pt.Fragment,null,Pt.createElement("h2",null,"Unexpected Application Error!"),Pt.createElement("h3",{style:{fontStyle:"italic"}},t),n?Pt.createElement("pre",{style:i},n):null,o)}Pt.createContext(null);var qf=Pt.createElement(Vf,null),Gf=class extends Pt.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?Pt.createElement(Mf.Provider,{value:this.props.routeContext},Pt.createElement(Lf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Kf({routeContext:e,match:t,children:n}){let r=Pt.useContext(jf);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),Pt.createElement(Mf.Provider,{value:e},n)}function Jf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yf(e){let t=function(e){let t=Pt.useContext(Mf);return of(t,Jf(e)),t}(e),n=t.matches[t.matches.length-1];return of(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var Zf={};function Qf(e,t,n){t||Zf[e]||(Zf[e]=!0,af(!1,n))}function Xf({to:e,replace:t,state:n,relative:r}){of(zf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=Pt.useContext(Of);af(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=Pt.useContext(Mf),{pathname:o}=Ff(),a=Wf(),l=Ef(e,Cf(s),o,"path"===r),c=JSON.stringify(l);return Pt.useEffect(()=>{a(JSON.parse(c),{replace:t,state:n,relative:r})},[a,c,r,t,n]),null}function em(e){of(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tm({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){of(!zf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=Pt.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);"string"==typeof n&&(n=df(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:p="default"}=n,h=Pt.useMemo(()=>{let e=wf(l,o);return null==e?null:{location:{pathname:e,search:c,hash:u,state:d,key:p},navigationType:r}},[o,l,c,u,d,p,r]);return af(null!=h,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==h?null:Pt.createElement(Of.Provider,{value:a},Pt.createElement(Df.Provider,{children:t,value:h}))}function nm({children:e,location:t}){return Hf(rm(e),t)}function rm(e,t=[]){let n=[];return Pt.Children.forEach(e,(e,r)=>{if(!Pt.isValidElement(e))return;let i=[...t,r];if(e.type===Pt.Fragment)return void n.push.apply(n,rm(e.props.children,i));of(e.type===em,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),of(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=rm(e.props.children,i)),n.push(s)}),n}Pt.memo(function({routes:e,future:t,state:n,unstable_onError:r}){return Hf(e,void 0,n,r,t)});var im="get",sm="application/x-www-form-urlencoded";function om(e){return null!=e&&"string"==typeof e.tagName}var am=null,lm=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cm(e){return null==e||lm.has(e)?e:(af(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sm}"`),null)}function um(e,t){let n,r,i,s,o;if(om(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?wf(o,t):null,n=e.getAttribute("method")||im,i=cm(e.getAttribute("enctype"))||sm,s=new FormData(e)}else if(function(e){return om(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return om(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(r=a?wf(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||im,i=cm(e.getAttribute("formenctype"))||cm(o.getAttribute("enctype"))||sm,s=new FormData(o,e),!function(){if(null===am)try{new FormData(document.createElement("form"),0),am=!1}catch(e){am=!0}return am}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,r)}}else{if(om(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=im,r=null,i=sm,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function dm(e,t){if(!1===e||null==e)throw new Error(t)}function pm(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function hm(e,t,n){return T(this,null,function*(){return function(e,t){let n=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(t));return n.has(r)||(n.add(r),e.push({key:r,link:t})),e},[])}((yield Promise.all(e.map(e=>T(this,null,function*(){let r=t.routes[e.route.id];if(r){let e=yield function(e,t){return T(this,null,function*(){if(e.id in t)return t[e.id];try{let n=yield import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}(r,n);return e.links?e.links():[]}return[]})))).flat(1).filter(pm).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?m(f({},e),{rel:"prefetch",as:"style"}):m(f({},e),{rel:"prefetch"})))})}function fm(e,t,n,r,i,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null==(r=n[t].route.path)?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>o(e,t)||a(e,t)):"data"===s?t.filter((t,s)=>{var l;let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null==(l=n[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function mm(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function vm(){let e=Pt.useContext(jf);return dm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gm=Pt.createContext(void 0);function ym(){let e=Pt.useContext(gm);return dm(e,"You must render this element inside a <HydratedRouter> element"),e}function bm(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function xm(e){var t=e,{page:n}=t,r=v(t,["page"]);let{router:i}=vm(),s=Pt.useMemo(()=>pf(i.routes,n,i.basename),[i.routes,n,i.basename]);return s?Pt.createElement(wm,f({page:n,matches:s},r)):null}function wm(e){var t=e,{page:n,matches:r}=t,i=v(t,["page","matches"]);let s=Ff(),{manifest:o,routeModules:a}=ym(),{basename:l}=vm(),{loaderData:c,matches:u}=function(){let e=Pt.useContext(_f);return dm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),d=Pt.useMemo(()=>fm(n,r,u,o,s,"data"),[n,r,u,o,s]),p=Pt.useMemo(()=>fm(n,r,u,o,s,"assets"),[n,r,u,o,s]),h=Pt.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{var r;let i=o.routes[n.route.id];i&&i.hasLoader&&(!d.some(e=>e.route.id===n.route.id)&&n.route.id in c&&(null==(r=a[n.route.id])?void 0:r.shouldRevalidate)||i.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let i=function(e,t,n){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===wf(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}(n,l,"data");return t&&e.size>0&&i.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[l,c,s,o,d,r,n,a]),m=Pt.useMemo(()=>mm(p,o),[p,o]),g=function(e){let{manifest:t,routeModules:n}=ym(),[r,i]=Pt.useState([]);return Pt.useEffect(()=>{let r=!1;return hm(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}(p);return Pt.createElement(Pt.Fragment,null,h.map(e=>Pt.createElement("link",f({key:e,rel:"prefetch",as:"fetch",href:e},i))),m.map(e=>Pt.createElement("link",f({key:e,rel:"modulepreload",href:e},i))),g.map(({key:e,link:t})=>Pt.createElement("link",f({key:e,nonce:i.nonce},t))))}function Sm(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}gm.displayName="FrameworkContext";var Cm="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{Cm&&(window.__reactRouterVersion="7.9.5")}catch(gie){}function Em({basename:e,children:t,window:n}){let r=Pt.useRef();null==r.current&&(r.current=sf({window:n,v5Compat:!0}));let i=r.current,[s,o]=Pt.useState({action:i.action,location:i.location}),a=Pt.useCallback(e=>{Pt.startTransition(()=>o(e))},[o]);return Pt.useLayoutEffect(()=>i.listen(a),[i,a]),Pt.createElement(tm,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var Tm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nm=Pt.forwardRef(function(e,t){var n=e,{onClick:r,discover:i="render",prefetch:s="none",relative:o,reloadDocument:a,replace:l,state:c,target:u,to:d,preventScrollReset:p,viewTransition:h}=n,g=v(n,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"]);let y,{basename:b}=Pt.useContext(Of),x="string"==typeof d&&Tm.test(d),w=!1;if("string"==typeof d&&x&&(y=d,Cm))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=wf(t.pathname,b);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:w=!0}catch(gie){af(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=function(e,{relative:t}={}){of(zf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=Pt.useContext(Of),{hash:i,pathname:s,search:o}=$f(e,{relative:t}),a=s;return"/"!==n&&(a="/"===s?n:Tf([n,s])),r.createHref({pathname:a,search:o,hash:i})}(d,{relative:o}),[C,E,T]=function(e,t){let n=Pt.useContext(gm),[r,i]=Pt.useState(!1),[s,o]=Pt.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,p=Pt.useRef(null);Pt.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),Pt.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let h=()=>{i(!0)},f=()=>{i(!1),o(!1)};return n?"intent"!==e?[s,p,{}]:[s,p,{onFocus:bm(a,h),onBlur:bm(l,f),onMouseEnter:bm(c,h),onMouseLeave:bm(u,f),onTouchStart:bm(d,h)}]:[!1,p,{}]}(s,g),N=function(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Wf(),l=Ff(),c=$f(e,{relative:s});return Pt.useCallback(u=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(u,t)){u.preventDefault();let t=void 0!==n?n:uf(l)===uf(c);a(e,{replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,t,e,i,s,o])}(d,{replace:l,state:c,target:u,preventScrollReset:p,relative:o,viewTransition:h}),P=Pt.createElement("a",m(f(f({},g),T),{href:y||S,onClick:w||a?r:function(e){r&&r(e),e.defaultPrevented||N(e)},ref:Sm(t,E),target:u,"data-discover":x||"render"!==i?void 0:"true"}));return C&&!x?Pt.createElement(Pt.Fragment,null,P,Pt.createElement(xm,{page:S})):P});function Pm(e){let t=Pt.useContext(jf);return of(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}Nm.displayName="Link",Pt.forwardRef(function(e,t){var n=e,{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=n,d=v(n,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let p=$f(l,{relative:d.relative}),h=Ff(),g=Pt.useContext(_f),{navigator:y,basename:b}=Pt.useContext(Of),x=null!=g&&function(e,{relative:t}={}){let n=Pt.useContext(Af);of(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Pm("useViewTransitionState"),i=$f(e,{relative:t});if(!n.isTransitioning)return!1;let s=wf(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=wf(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=bf(i.pathname,o)||null!=bf(i.pathname,s)}(p)&&!0===c,w=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,S=h.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(S=S.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&b&&(C=wf(C,b)||C);const E="/"!==w&&w.endsWith("/")?w.length-1:w.length;let T,N=S===w||!o&&S.startsWith(w)&&"/"===S.charAt(E),P=null!=C&&(C===w||!o&&C.startsWith(w)&&"/"===C.charAt(w.length)),R={isActive:N,isPending:P,isTransitioning:x},I=N?r:void 0;T="function"==typeof s?s(R):[s,N?"active":null,P?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let k="function"==typeof a?a(R):a;return Pt.createElement(Nm,m(f({},d),{"aria-current":I,className:T,ref:t,style:k,to:l,viewTransition:c}),"function"==typeof u?u(R):u)}).displayName="NavLink",Pt.forwardRef((e,t)=>{var n=e,{discover:r="render",fetcherKey:i,navigate:s,reloadDocument:o,replace:a,state:l,method:c=im,action:u,onSubmit:d,relative:p,preventScrollReset:h,viewTransition:g}=n,y=v(n,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"]);let b=function(){let{router:e}=Pm("useSubmit"),{basename:t}=Pt.useContext(Of),n=Yf("useRouteId");return Pt.useCallback((r,...i)=>T(this,[r,...i],function*(r,i={}){let{action:s,method:o,encType:a,formData:l,body:c}=um(r,t);if(!1===i.navigate){let t=i.fetcherKey||`__${String(++Rm)}__`;yield e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else yield e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[e,t,n])}(),x=function(e,{relative:t}={}){let{basename:n}=Pt.useContext(Of),r=Pt.useContext(Mf);of(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s=f({},$f(e||".",{relative:t})),o=Ff();if(null==e){s.search=o.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?`?${n}`:""}}return e&&"."!==e||!i.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),"/"!==n&&(s.pathname="/"===s.pathname?n:Tf([n,s.pathname])),uf(s)}(u,{relative:p}),w="get"===c.toLowerCase()?"get":"post",S="string"==typeof u&&Tm.test(u);return Pt.createElement("form",m(f({ref:t,method:w,action:x,onSubmit:o?d:e=>{if(d&&d(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null==t?void 0:t.getAttribute("formmethod"))||c;b(t||e.currentTarget,{fetcherKey:i,method:n,navigate:s,replace:a,state:l,relative:p,preventScrollReset:h,viewTransition:g})}},y),{"data-discover":S||"render"!==r?void 0:"true"}))}).displayName="Form";var Rm=0;function Im(){return"undefined"!=typeof window&&window.runtimeConfig?window.runtimeConfig:{API_BASE_URL:"undefined"!=typeof window&&(window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1"))?"/api":"",CORS_ALLOW_ORIGINS:"*"}}"undefined"!=typeof window&&function(){if("undefined"!=typeof window){const e=Im();console.log(" Runtime Config:",{API_BASE_URL:e.API_BASE_URL,CORS_ALLOW_ORIGINS:e.CORS_ALLOW_ORIGINS,windowRuntimeConfig:window.runtimeConfig,currentLocation:window.location.href})}}();const km=!0,jm=!1,_m="undefined"!=typeof window&&(window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1")),Am="undefined"!=typeof window&&/\.azurestaticapps\.net$/i.test(window.location.hostname);"undefined"!=typeof window&&console.log(" :",{hostname:window.location.hostname,isProduction:km,isDevelopment:jm,isLocalhost:_m,isAzureStaticWebApp:Am,windowBackendUrl:window.BACKEND_SERVICE_URL});const Om=(()=>{if(Am&&"undefined"!=typeof window&&window.BACKEND_SERVICE_URL){const e=window.BACKEND_SERVICE_URL.replace(/\/$/,"");return console.log(" Azure Static Web App: BACKEND_SERVICE_URL:",e),e}try{const e=Im();if(e&&e.API_BASE_URL)return console.log(" Runtime configAPI_BASE_URL:",e.API_BASE_URL),e.API_BASE_URL.replace(/\/$/,"")}catch(e){console.warn(" Runtime config:",e)}return console.log(" API_BASE_URL:","/api"),"/api".replace(/\/$/,"")})();function Dm(e){const t=e.startsWith("/")?e:`/${e}`,n=t.startsWith("/api/")?t.replace(/^\/api/,""):t.startsWith("/api")?"/":t;if(Am&&"undefined"!=typeof window){let r="";try{const e=Im();e&&e.API_BASE_URL&&!e.API_BASE_URL.startsWith("/")&&(r=e.API_BASE_URL.replace(/\/$/,"").replace(/\/api$/,""),console.log(" buildApiUrl: runtime-config:",r))}catch(s){console.warn(" buildApiUrl: runtime-config:",s)}r||(r="https://emergency-assistance-bfckhjejb3fbf9du.japanwest-01.azurewebsites.net",console.log(" buildApiUrl: URL:",r));const i=`${r}/api${n.startsWith("/")?n:"/"+n}`;return console.log(" buildApiUrl (Azure SWA):",{originalPath:e,cleanPath:t,pathWithoutApi:n,baseUrl:r,finalUrl:i}),i}const r=Om.replace(/\/$/,"").replace(/\/api$/,""),i=r?`${r}/api${n.startsWith("/")?n:"/"+n}`:`/api${n.startsWith("/")?n:"/"+n}`;return console.log(" buildApiUrl (Azure SWA):",{originalPath:e,cleanPath:t,baseUrl:r,finalUrl:i}),i}function Mm(e){return T(this,arguments,function*(e,t={}){const n=Dm(e),r=m(f({},t),{headers:f({"Content-Type":"application/json"},t.headers),credentials:"include",mode:"cors"});console.log(` User API Request (No Auth): ${t.method||"GET"} ${n}`);try{const e=yield fetch(n,r);if(!e.ok){const t=yield e.text();throw console.error(` User API Error: ${e.status} ${e.statusText}`,t),new Error(`API Error ${e.status}: ${t}`)}const i=yield e.json();return console.log(` User API Response: ${t.method||"GET"} ${n}`,i),i}catch(i){throw console.error(` User API Request Failed: ${t.method||"GET"} ${n}`,i),i}})}function Lm(e){return T(this,arguments,function*(e,t={}){const n=Dm(e),r=localStorage.getItem("authToken"),i=m(f({},t),{headers:f(f({"Content-Type":"application/json"},r&&{Authorization:`Bearer ${r}`}),t.headers),credentials:"include",mode:"cors"});console.log(` API Request: ${t.method||"GET"} ${n}`);try{const e=yield fetch(n,i);if(!e.ok){const t=yield e.text();if(console.error(` API Error: ${e.status} ${e.statusText}`,t),401===e.status)throw console.log(" : "),localStorage.removeItem("authToken"),new Error("AUTHENTICATION_ERROR");throw new Error(`API Error ${e.status}: ${t}`)}const r=yield e.json();return console.log(` API Response: ${t.method||"GET"} ${n}`,r),r}catch(s){throw console.error(` API Request Failed: ${t.method||"GET"} ${n}`,s),s}})}const zm={get:e=>Lm(e,{method:"GET"}),post:(e,t)=>Lm(e,{method:"POST",body:t?JSON.stringify(t):void 0}),put:(e,t)=>Lm(e,{method:"PUT",body:t?JSON.stringify(t):void 0}),delete:e=>Lm(e,{method:"DELETE"})},Fm={get:e=>Mm(e,{method:"GET"}),post:(e,t)=>Mm(e,{method:"POST",body:t?JSON.stringify(t):void 0}),put:(e,t)=>Mm(e,{method:"PUT",body:t?JSON.stringify(t):void 0}),delete:e=>Mm(e,{method:"DELETE"})},Bm={login:e=>Fm.post("/auth/login",e),logout:()=>zm.post("/auth/logout"),getCurrentUser:()=>zm.get("/auth/me"),handshake:()=>Fm.get("/auth/handshake")};console.log(" API:",{isProduction:km,isDevelopment:jm,isLocalhost:_m,isAzureStaticWebApp:Am,API_BASE_URL:Om,hostname:window.location.hostname,exampleUrl:Dm("/health")});const Um=Object.freeze(Object.defineProperty({__proto__:null,API_BASE_URL:Om,api:zm,apiRequest:Lm,auth:Bm,buildApiUrl:Dm,userApi:Fm,userApiRequest:Mm},Symbol.toStringTag,{value:"Module"})),Wm=t=>T(e,null,function*(){try{console.log(" :",{username:t.username});const e=yield Bm.login(t);if(e.token||e.accessToken){const t=e.token||e.accessToken;localStorage.setItem("authToken",t),console.info("[auth] token saved to authToken:",!!t)}return console.log(" :",e),e}catch(e){if(console.error(" Login error:",e),e instanceof Error){if(e.message.includes("500"))throw new Error("");if(e.message.includes("401"))throw new Error("");if(e.message.includes("fetch"))throw new Error("");throw e}throw new Error("")}}),$m=()=>T(e,null,function*(){try{console.log(" ");const e=yield Bm.getCurrentUser();return console.log(" :",e),e}catch(e){return console.warn(" :",e),e instanceof Error&&e.message.includes("401")?(console.log("  (401) - "),null):e instanceof Error&&e.message.includes("500")?(console.warn("  (500) - "),null):null}}),Hm=Wm,Vm=$m,qm=Pt.createContext(void 0);function Gm({children:t}){const[n,r]=Pt.useState(null),[i,s]=Pt.useState(!0),[o,a]=Pt.useState(!1),[l,c]=Pt.useState(null);Pt.useEffect(()=>{(()=>{T(this,null,function*(){try{if(s(!0),localStorage.getItem("authToken")){console.log(" ...");try{const e=yield $m();e&&e.success&&e.user?(console.log(" "),r({id:e.user.id,username:e.user.username,displayName:e.user.displayName||e.user.display_name,role:e.user.role,department:e.user.department})):(console.log(" "),localStorage.removeItem("authToken"),r(null))}catch(e){console.log(" :",e),localStorage.removeItem("authToken"),r(null)}}else console.log(" "),r(null)}catch(e){console.warn(" :",e),r(null)}finally{s(!1),a(!0)}})})()},[]);const u=(e,t)=>T(this,null,function*(){console.log(" :",{username:e});try{s(!0);const n=yield Wm({username:e,password:t});if(console.log(" :",n),!(n&&n.success&&n.user))throw console.log(" :",n),new Error("");{const e=n.token||n.accessToken;e&&(localStorage.setItem("authToken",e),console.log(" localStorage")),r({id:n.user.id,username:n.user.username,displayName:n.user.displayName||n.user.display_name,role:n.user.role,department:n.user.department})}}catch(n){throw console.error(" :",n),r(null),n}finally{s(!1)}}),d=()=>T(this,null,function*(){console.log(" ");try{yield T(e,null,function*(){try{console.log(" "),localStorage.removeItem("authToken"),yield Bm.logout(),console.log(" ")}catch(e){throw console.error(" Logout error:",e),new Error("")}}),console.log(" ")}catch(t){console.error(" :",t)}finally{localStorage.removeItem("authToken"),console.log(" localStorage"),r(null)}});return i?Lt.jsx(qm.Provider,{value:{user:n,isLoading:i,login:u,logout:d,authMode:l},children:Lt.jsx("div",{className:"flex justify-center items-center h-screen",children:Lt.jsxs("div",{className:"text-center",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),Lt.jsx("p",{className:"text-gray-600",children:"..."})]})})}):Lt.jsx(qm.Provider,{value:{user:n,isLoading:i,login:u,logout:d,authMode:l},children:t})}function Km(){const e=Pt.useContext(qm);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}let Jm=0;const Ym=new Map,Zm=e=>{if(Ym.has(e))return;const t=setTimeout(()=>{Ym.delete(e),ev({type:"REMOVE_TOAST",toastId:e})},1e6);Ym.set(e,t)},Qm=[];let Xm={toasts:[]};function ev(e){Xm=((e,t)=>{switch(t.type){case"ADD_TOAST":return m(f({},e),{toasts:[t.toast,...e.toasts].slice(0,1)});case"UPDATE_TOAST":return m(f({},e),{toasts:e.toasts.map(e=>e.id===t.toast.id?f(f({},e),t.toast):e)});case"DISMISS_TOAST":{const{toastId:n}=t;return n?Zm(n):e.toasts.forEach(e=>{Zm(e.id)}),m(f({},e),{toasts:e.toasts.map(e=>e.id===n||void 0===n?m(f({},e),{open:!1}):e)})}case"REMOVE_TOAST":return void 0===t.toastId?m(f({},e),{toasts:[]}):m(f({},e),{toasts:e.toasts.filter(e=>e.id!==t.toastId)})}})(Xm,e),Qm.forEach(e=>{e(Xm)})}function tv(e){var t=v(e,[]);const n=(Jm=(Jm+1)%Number.MAX_SAFE_INTEGER,Jm.toString()),r=()=>ev({type:"DISMISS_TOAST",toastId:n});return ev({type:"ADD_TOAST",toast:m(f({},t),{id:n,open:!0,onOpenChange:e=>{e||r()}})}),{id:n,dismiss:r,update:e=>ev({type:"UPDATE_TOAST",toast:m(f({},e),{id:n})})}}function nv(){const[e,t]=Pt.useState(Xm);return Pt.useEffect(()=>(Qm.push(t),()=>{const e=Qm.indexOf(t);e>-1&&Qm.splice(e,1)}),[]),m(f({},e),{toast:tv,dismiss:e=>ev({type:"DISMISS_TOAST",toastId:e})})}class rv{constructor(){g(this,"recognition",null),g(this,"sendToServer",null)}start(){return T(this,null,function*(){if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))throw new Error("");const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="ja-JP",this.recognition.onresult=e=>{for(let t=e.resultIndex;t<e.results.length;t++)e.results[t].isFinal&&this.sendToServer&&this.sendToServer(e.results[t][0].transcript)},this.recognition.onerror=e=>{console.error("Web Speech:",e.error)},this.recognition.start()})}stop(){this.recognition&&(this.recognition.stop(),this.recognition=null)}}class iv{constructor(e,t){g(this,"recognizer",null),g(this,"sendToServer",null),this.subscriptionKey=e,this.region=t}start(){return T(this,null,function*(){try{const e=yield nf(()=>Promise.resolve().then(()=>mO),[]),t=e.SpeechConfig.fromSubscription(this.subscriptionKey,this.region);t.speechRecognitionLanguage="ja-JP";const n=e.AudioConfig.fromDefaultMicrophoneInput();this.recognizer=new e.SpeechRecognizer(t,n),this.recognizer.recognizing=(e,t)=>{},this.recognizer.recognized=(t,n)=>{n.result.reason===e.ResultReason.RecognizedSpeech&&this.sendToServer&&this.sendToServer(n.result.text)},this.recognizer.startContinuousRecognitionAsync()}catch(e){throw console.error("Azure Speech SDK:",e),e}})}stop(){this.recognizer&&(this.recognizer.stopContinuousRecognitionAsync(),this.recognizer=null)}}let sv=null;const ov=()=>{sv&&(sv.stop(),sv=null)},av=()=>{sv&&(sv.stop(),sv=null)},lv=Pt.createContext(null),cv=()=>{const t=Pt.useContext(lv);return null===t?(console.error("ChatContext is null - this likely means useChat was called outside of the ChatProvider"),{messages:[],isLoading:!1,searching:!1,searchResults:[],selectedText:"",setSelectedText:()=>{},sendMessage:()=>T(e,null,function*(){}),startRecording:()=>{},stopRecording:()=>{},isRecording:!1,recordedText:"",searchBySelectedText:()=>T(e,null,function*(){}),clearSearchResults:()=>{},captureImage:()=>T(e,null,function*(){}),exportChatHistory:()=>T(e,null,function*(){}),exportFormattedData:()=>T(e,null,function*(){return{}}),lastExportTimestamp:null,isExporting:!1,hasUnexportedMessages:!1,sendEmergencyGuide:()=>T(e,null,function*(){}),sendFlowExecutionResult:()=>T(e,null,function*(){}),draftMessage:null,setDraftMessage:()=>{},clearChatHistory:()=>T(e,null,function*(){}),isClearing:!1,initializeChat:()=>T(e,null,function*(){return""}),chatId:null}):t},uv=({children:t})=>{const[n,r]=Pt.useState([]),[i,s]=Pt.useState(!1),[o,a]=Pt.useState(!1),[l,c]=Pt.useState(""),[u,d]=Pt.useState(""),[p,h]=Pt.useState(!1),[v,g]=Pt.useState([]),[y,b]=Pt.useState(null),[x,w]=Pt.useState(!1),[S,C]=Pt.useState(!1),[E,N]=Pt.useState(null),[P,R]=Pt.useState(!1),[I,k]=Pt.useState(!1),[j,_]=Pt.useState([]),[A,O]=Pt.useState(null),{toast:D}=nv(),M=Kh(),[L,z]=Pt.useState(""),[F,B]=Pt.useState(null),[U,W]=Pt.useState([]),[$,H]=Pt.useState(!1),[V,q]=Pt.useState(0),[G,K]=Pt.useState(!1),[J,Y]=Pt.useState(""),[Z,Q]=Pt.useState(!1),[X,ee]=Pt.useState(Date.now()),[te,ne]=Pt.useState(null),[re,ie]=Pt.useState([]),[se,oe]=Pt.useState(null),ae=Pt.useCallback(()=>T(e,null,function*(){try{R(!0);const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return N(e),console.log(" ID:",e),e}catch(e){console.error(" Failed to initialize chat:",e);const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return N(t),console.log(" ID:",t),t}finally{R(!1)}}),[]);Pt.useEffect(()=>{ae()},[ae]),Pt.useEffect(()=>{E&&!P&&(console.log(` : chatId=${E}`),r(e=>0===e.length?(console.log(""),[]):(console.log(`${e.length}`),e)),g([]),b(null),C(!1))},[E,P]),Pt.useEffect(()=>{let e=!1,t=null;const n=n=>{if(e)console.log("");else if(n.detail&&"string"==typeof n.detail.content){const{content:r}=n.detail;if(!r.trim())return void O(null);e=!0;const i=(null==A?void 0:A.media)||[];O({content:r,media:i}),t&&clearTimeout(t),t=setTimeout(()=>{e=!1},300)}},r=e=>{console.log(""),O(null),c(""),z(""),W([]),H(!1),Q(!1),ov(),av()};return window.addEventListener("update-draft-message",n),window.addEventListener("clear-draft-message",r),()=>{t&&clearTimeout(t),window.removeEventListener("update-draft-message",n),window.removeEventListener("clear-draft-message",r)}},[A]),Pt.useCallback((t,n=!1)=>T(e,null,function*(){console.log(" ")}),[]);const le=Pt.useCallback(()=>{g([])},[]);Pt.useCallback(()=>T(e,null,function*(){try{const e=new Event("open-camera");return window.dispatchEvent(e),Promise.resolve()}catch(e){return console.error(":",e),D({title:"",description:"",variant:"destructive"}),Promise.resolve()}}),[D]),Pt.useCallback(e=>{console.log(" :",{id:e.id,hasContent:!!e.content,contentType:typeof e.content,hasText:!!e.text,hasMessage:!!e.message,messageKeys:Object.keys(e||{}),fullMessage:e});let t="";if("string"==typeof e.content&&e.content.trim())t=e.content,console.log(" content:",t.substring(0,50)+"...");else if("string"==typeof e.text&&e.text.trim())t=e.text,console.log(" text:",t.substring(0,50)+"...");else if("string"==typeof e.message&&e.message.trim())t=e.message,console.log(" message:",t.substring(0,50)+"...");else if(e.choices&&Array.isArray(e.choices)&&e.choices.length>0){const n=e.choices[0];n.message&&"string"==typeof n.message.content&&(t=n.message.content,console.log(" OpenAI API:",t.substring(0,50)+"..."))}else if("object"==typeof e.content&&null!==e.content)if(console.warn(" content:",e.content),e.content.preview&&"string"==typeof e.content.preview)t=e.content.preview,console.log(" preview:",t.substring(0,50)+"...");else if(e.content.url&&"string"==typeof e.content.url)t=e.content.url,console.log(" url:",t);else{const n=e.content.text||e.content.content||e.content.message||e.content.data||e.content.response||e.content.answer;"string"==typeof n&&n.trim()?(t=n,console.log(" :",t.substring(0,50)+"...")):(t=JSON.stringify(e.content,null,2),console.log(" JSON"))}else console.error(" :",{message:e,contentType:typeof e.content,hasText:!!e.text,hasMessage:!!e.message,hasChoices:!!e.choices}),console.log("  - :",{messageKeys:Object.keys(e),contentKeys:e.content?Object.keys(e.content):"content is null/undefined",textType:typeof e.text,messageType:typeof e.message}),t=`[ - : ${JSON.stringify({id:e.id,keys:Object.keys(e),contentType:typeof e.content})}]`;t&&t.trim()||(t="[]",console.warn(" "));const n=m(f({},e),{content:t,text:t,timestamp:e.timestamp?new Date(e.timestamp):new Date(e.createdAt||new Date)});return console.log(" :",{id:n.id,contentLength:t.length,contentPreview:t.substring(0,100)+"...",originalMessageType:typeof e.content,normalizedSuccessfully:!!t&&t.trim().length>0}),n},[]);const ce=Pt.useCallback((t,n,i=!1)=>T(e,null,function*(){if(!t||"string"!=typeof t)return console.error(":",t),void D({title:"",description:"",variant:"destructive"});if(t.trim()||n&&0!==n.length){s(!0);try{let e=E;if(!e&&(console.log("ID"),e=yield ae(),!e))throw new Error("ID");const s=Date.now();let o=[];n&&n.length>0&&(o=n.map((e,n)=>({id:`media_${s}_${n}`,type:e.type,url:e.url,thumbnail:e.thumbnail||e.url,fileName:`${e.type}_${s}_${n}`,title:t.substring(0,50)||`${e.type}`})));const a={id:s,chatId:e,content:t.trim(),text:t.trim(),isAiResponse:i,senderId:i?"ai":"user",timestamp:new Date,media:o};console.log(" :",{id:a.id,content:a.content.substring(0,50)+"...",isAiResponse:a.isAiResponse,mediaCount:o.length}),r(e=>[...e,a]),t.trim()&&(localStorage.setItem("lastSearchKeyword",t.trim()),console.log(" :",t.trim())),setTimeout(()=>{const e=document.getElementById("chatMessages");e&&(e.scrollTop=e.scrollHeight,console.log(""))},100)}catch(e){console.error(":",e),D({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}finally{s(!1)}}else console.log("")}),[E,ae,g,D]),ue=Pt.useCallback(()=>{try{null==A||A.media,((e,t)=>{try{const t="",n="japaneast";if(!t)throw new Error("Azure Speech API");sv=new iv(t,n),sv.sendToServer=e,sv.start()}catch(n){console.error("Azure Speech:",n),t(n instanceof Error?n.message:"")}})(t=>T(e,null,function*(){if(!t.trim())return;console.log(" :",t),ee(Date.now()),te&&clearTimeout(te);const e=setTimeout(()=>{Date.now()-X>=1e4&&(console.log(" "),ov(),av(),a(!1),O(null),W([]),ie([]),z(""),c(""))},1e4);ne(e),ie(e=>{if(e.includes(t))return console.log(" :",t),e;const n=[...e,t];console.log(" :",n),se&&clearTimeout(se);const r=setTimeout(()=>{if(i)return void console.log(" ");const e=n.join(" ").trim();e&&e.length>2&&(console.log(" :",e),ce(e),ie([]))},200);return oe(r),n})}),t=>{console.log("Azure:",t),D({title:"API",duration:1e3}),ov(),c(""),z(""),W([]),ie([]),H(!1),((e,n)=>{try{sv=new rv,sv.sendToServer=e,sv.start()}catch(t){console.error("Web Speech:",t),n(t instanceof Error?t.message:"")}})(t=>T(e,null,function*(){if(!t.trim())return;ee(Date.now()),te&&clearTimeout(te);const e=setTimeout(()=>{Date.now()-X>=1e3&&(ov(),av(),a(!1),O(null),W([]),ie([]),z(""),c(""))},1e3);ne(e),ie(e=>{const n=[...e,t];se&&clearTimeout(se);const r=setTimeout(()=>{const e=n.join(" ");ce(e),ie([])},200);return oe(r),n})}),e=>{D({title:"",description:e,variant:"destructive"}),a(!1)})})}catch(t){console.error(":",t),a(!1),D({title:"",description:"",variant:"destructive"})}},[null==A?void 0:A.media,X,te,se,ce,D]);Pt.useCallback(()=>{a(!0),c(""),z(""),W([]),ie([]),H(!1),ee(Date.now()),ue()},[ue]),Pt.useCallback(()=>{if(a(!1),re.length>0){const e=re.join(" ");ce(e)}c(""),z(""),W([]),ie([]),ov(),av(),te&&(clearTimeout(te),ne(null)),se&&(clearTimeout(se),oe(null))},[te,se,re,ce]);const de=Pt.useCallback(()=>T(e,null,function*(){try{if(!E)return console.error(": chatId"),D({title:"",description:"ID",variant:"destructive"}),null;console.log(":",E),w(!0);const e=yield Lm(`/api/chats/${E}/export`,{method:"POST"});return console.log(":",e),D({title:"",description:""}),b(new Date),C(!1),e}catch(e){return console.error(":",e),D({title:"",description:e instanceof Error?e.message:"",variant:"destructive"}),null}finally{w(!1)}}),[E,D]);Pt.useCallback(()=>T(e,null,function*(){try{return E?yield Lm(`/api/chats/${E}/formatted-export`,{method:"GET"}):{}}catch(e){return console.error(":",e),{}}}),[E]);const pe=Pt.useCallback(t=>T(e,null,function*(){var e;try{if(!E&&!(yield ae()))throw new Error("");s(!0);const i=E||"1";console.log(": ID",i,"");const o=Date.now(),a=`${t.title}`,l={id:o,chatId:i,content:a,text:a,isAiResponse:!1,senderId:"user",timestamp:new Date},c=(null==(e=t.steps)?void 0:e.filter(e=>e.imageUrl&&e.imageUrl.trim()).map((e,t)=>({id:`guide_img_${t}`,type:"image",url:e.imageUrl,thumbnail:e.imageUrl,title:e.title||`${t+1}`,fileName:e.imageFileName})))||[];console.log(" :",c.length,"");const u=` \n\n**${t.title}**\n\n${t.content}\n\n---\n**AI**: `,d={id:o+1,chatId:i,content:u,text:u,isAiResponse:!0,senderId:"ai",timestamp:new Date,media:c};console.log(" ChatMessage:"),console.log("- :",l),console.log("- AI:",d),console.log("- :",c.length),r(e=>{console.log("  - :",e.length);const t=[...e,l,d];return console.log(" :",t.length,""),t});try{const e=yield fetch("/api/api/emergency-guide/send",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},body:JSON.stringify({chatId:i,guideData:{title:t.title,content:t.content,steps:t.steps||[],images:c}})});if(e.ok){const t=yield e.json();console.log(": ",t)}else console.warn(""),console.error(":",e.status,e.statusText)}catch(n){console.error("API:",n)}console.log("  - "),D({title:"",description:""}),setTimeout(()=>{const e=document.getElementById("chatMessages");e&&(e.scrollTop=e.scrollHeight,console.log(""))},100),window.dispatchEvent(new CustomEvent("emergency-guide-sent",{detail:{guideData:t,timestamp:new Date,success:!0,userMessage:l,aiMessage:d}}))}catch(i){console.error(":",i),D({title:"",description:"",variant:"destructive"})}finally{s(!1)}}),[E,ae,r,g,D]),he=Pt.useCallback(t=>T(e,null,function*(){var e,n;try{if(!E&&!(yield ae()))throw new Error("");s(!0);const i=E||"1";console.log(": ID",i,"");const o=Date.now(),a=t.isPartial?`${t.title}`:`${t.title}`,l={id:o,chatId:i,content:a,text:a,isAiResponse:!1,senderId:"user",timestamp:new Date},c=(null==(e=t.executedSteps)?void 0:e.flatMap(e=>{const t=[];return e.imageUrl&&e.imageUrl.trim()&&t.push({id:`flow_img_${e.stepId}_url`,type:"image",url:e.imageUrl,thumbnail:e.imageUrl,title:e.title||"",fileName:`step_${e.stepId}.jpg`}),e.images&&Array.isArray(e.images)&&e.images.forEach((n,r)=>{n.url&&n.url.trim()&&t.push({id:`flow_img_${e.stepId}_${r}`,type:"image",url:n.url,thumbnail:n.url,title:e.title||`${r+1}`,fileName:n.fileName||`step_${e.stepId}_${r}.jpg`})}),t}))||[];console.log(" :",c.length,"");const u=(null==(n=t.executedSteps)?void 0:n.map((e,t)=>{let n=`${t+1}. **${e.title}**\n${e.message}`;return e.selectedCondition&&(n+=`\n: ${e.selectedCondition}`),n}).join("\n\n"))||"",d=t.isPartial?` \n\n**${t.title}**\n\n**:**\n${u}\n\n**:** ${t.completedAt.toLocaleString("ja-JP")}\n\n---\n**AI**: `:` \n\n**${t.title}**\n\n**:**\n${u}\n\n**:** ${t.completedAt.toLocaleString("ja-JP")}\n\n---\n**AI**: `,p={id:o+1,chatId:i,content:d,text:d,isAiResponse:!0,senderId:"ai",timestamp:new Date,media:c};console.log(" :"),console.log("- :",l),console.log("- AI:",p),console.log("- :",c.length),console.log(" :",{chatId:i,title:`: ${t.title}`,description:a,emergencyGuideTitle:t.title,emergencyGuideContent:d,images:c.length}),r(e=>{console.log("  - :",e.length);const t=[...e,l,p];return console.log(" :",t.length,""),t}),D({title:t.isPartial?"":"",description:t.isPartial?"":""}),setTimeout(()=>{const e=document.getElementById("chatMessages");e&&(e.scrollTop=e.scrollHeight,console.log(""))},100),window.dispatchEvent(new CustomEvent("flow-execution-sent",{detail:{flowData:t,timestamp:new Date,success:!0,userMessage:l,aiMessage:p}}))}catch(i){console.error(":",i),D({title:"",description:"",variant:"destructive"})}finally{s(!1)}}),[E,ae,r,D]);Pt.useEffect(()=>{const e=e=>{console.log(" :",e.detail)},t=e=>{console.log(" :",e.detail),he(e.detail)};return window.addEventListener("emergency-guide-sent",e),window.addEventListener("emergency-guide-completed",t),()=>{window.removeEventListener("emergency-guide-sent",e),window.removeEventListener("emergency-guide-completed",t)}},[he]);const fe=Pt.useCallback(()=>T(e,null,function*(){try{k(!0),console.log(" : "),console.log(" "),r([]),g([]),b(null),C(!1),_([]),O(null),c(""),d(""),le();try{M.removeQueries({queryKey:[`/api/chats/${E}/messages`]}),M.removeQueries({queryKey:["search_results"]}),M.invalidateQueries({queryKey:[`/api/chats/${E}/messages`]}),M.clear(),console.log(" ")}catch(e){console.warn(":",e)}console.log(" "),D({title:"",description:""})}catch(t){console.error(" :",t),r([]),g([]),C(!1),D({title:"",description:"",variant:"destructive"})}finally{k(!1)}}),[E,le,D,M]);Pt.useEffect(()=>{E&&!I&&(console.log(" "),r([]),g([]),b(null),C(!1))},[E,I]);const me=Pt.useCallback(()=>T(e,null,function*(){console.log(" ")}),[E]);Pt.useEffect(()=>{me()},[me]),Pt.useEffect(()=>{if(n.length>0&&y){const e=n.some(e=>new Date(e.timestamp)>y);C(e)}else n.length>0?C(!0):C(!1)},[n,y]);const ve={messages:n,setMessages:r,sendMessage:ce,isLoading:i,clearChatHistory:fe,isClearing:I,chatId:E,initializeChat:ae,exportChatHistory:de,searchResults:v,setSearchResults:g,searching:p,setSearching:h,sendEmergencyGuide:pe};return Lt.jsx(lv.Provider,{value:ve,children:t})};function dv({children:e,requireAdmin:t=!1}){const{user:n,isLoading:r}=Km(),i=Ff();return console.log(" ProtectedRoute - :",{isLoading:r,hasUser:!!n,username:null==n?void 0:n.username,role:null==n?void 0:n.role,requireAdmin:t,currentPath:i.pathname,timestamp:(new Date).toISOString()}),r?(console.log(" ProtectedRoute - ..."),Lt.jsx("div",{className:"flex justify-center items-center h-screen",children:Lt.jsxs("div",{className:"text-center",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),Lt.jsx("p",{className:"text-gray-600",children:"..."})]})})):n?t&&"admin"!==n.role&&"employee"!==n.role?(console.log(" ProtectedRoute - "),Lt.jsx(Xf,{to:"/chat",replace:!0})):(console.log(" ProtectedRoute - OK"),Lt.jsx(Lt.Fragment,{children:e})):(console.log(" ProtectedRoute - "),Lt.jsx(Xf,{to:"/login",state:{from:i},replace:!0}))}function pv({children:e}){const{user:t,isLoading:n}=Km();return console.log(" AdminRoute - :",{isLoading:n,hasUser:!!t,role:null==t?void 0:t.role,isAdmin:"admin"===(null==t?void 0:t.role)}),n?Lt.jsx("div",{className:"flex justify-center items-center h-screen",children:Lt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):t?"admin"!==t.role&&"employee"!==t.role?(console.log(" AdminRoute - "),Lt.jsx(Xf,{to:"/chat",replace:!0})):(console.log(" AdminRoute - OK"),Lt.jsx(Lt.Fragment,{children:e})):(console.log(" AdminRoute - "),Lt.jsx(Xf,{to:"/login",replace:!0}))}function hv(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function fv(...e){return t=>{let n=!1;const r=e.map(e=>{const r=hv(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():hv(e[t],null)}}}}function mv(...e){return Pt.useCallback(fv(...e),e)}var vv=Symbol.for("react.lazy"),gv=It[" use ".trim().toString()];function yv(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===vv&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t;var t}function bv(e){const t=wv(e),n=Pt.forwardRef((e,n)=>{let r=e,{children:i}=r,s=v(r,["children"]);yv(i)&&"function"==typeof gv&&(i=gv(i._payload));const o=Pt.Children.toArray(i),a=o.find(Cv);if(a){const e=a.props.children,r=o.map(t=>t===a?Pt.Children.count(e)>1?Pt.Children.only(null):Pt.isValidElement(e)?e.props.children:null:t);return Lt.jsx(t,m(f({},s),{ref:n,children:Pt.isValidElement(e)?Pt.cloneElement(e,void 0,r):null}))}return Lt.jsx(t,m(f({},s),{ref:n,children:i}))});return n.displayName=`${e}.Slot`,n}var xv=bv("Slot");function wv(e){const t=Pt.forwardRef((e,t)=>{let n=e,{children:r}=n,i=v(n,["children"]);if(yv(r)&&"function"==typeof gv&&(r=gv(r._payload)),Pt.isValidElement(r)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(r),n=function(e,t){const n=f({},t);for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]=f(f({},i),s):"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return f(f({},e),n)}(i,r.props);return r.type!==Pt.Fragment&&(n.ref=t?fv(t,e):e),Pt.cloneElement(r,n)}return Pt.Children.count(r)>1?Pt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Sv=Symbol("radix.slottable");function Cv(e){return Pt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Sv}function Ev(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Ev(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Tv(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Ev(e))&&(r&&(r+=" "),r+=t);return r}const Nv=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Pv=Tv,Rv=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return Pv(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(e=>{const t=null==n?void 0:n[e],r=null==s?void 0:s[e];if(null===t)return null;const o=Nv(t)||Nv(r);return i[e][o]}),a=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let n=t,{class:r,className:i}=n,o=v(n,["class","className"]);return Object.entries(o).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes(f(f({},s),a)[t]):f(f({},s),a)[t]===n})?[...e,r,i]:e},[]);return Pv(e,o,l,null==n?void 0:n.class,null==n?void 0:n.className)},Iv=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),s=i?Iv(e.slice(1),i):void 0;if(s)return s;if(0===t.validators.length)return;const o=e.join("-");return null==(n=t.validators.find(({validator:e})=>e(o)))?void 0:n.classGroupId},kv=/^\[(.+)\]$/,jv=e=>{if(kv.test(e)){const t=kv.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},_v=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Mv(Object.entries(e.classGroups),n).forEach(([e,n])=>{Av(n,r,e,t)}),r},Av=(e,t,n,r)=>{e.forEach(e=>{if("string"!=typeof e)return"function"==typeof e?Dv(e)?void Av(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n}):void Object.entries(e).forEach(([e,i])=>{Av(i,Ov(t,e),n,r)});(""===e?t:Ov(t,e)).classGroupId=n})},Ov=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Dv=e=>e.isThemeGetter,Mv=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,Lv=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}},zv=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,i=t[0],s=t.length,o=e=>{const n=[];let o,a=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===a){if(c===i&&(r||e.slice(d,d+s)===t)){n.push(e.slice(l,d)),l=d+s;continue}if("/"===c){o=d;continue}}"["===c?a++:"]"===c&&a--}const c=0===n.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:n,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:o&&o>l?o-l:void 0}};return n?e=>n({className:e,parseClassName:o}):o},Fv=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},Bv=e=>f({cache:Lv(e.cacheSize),parseClassName:zv(e)},(e=>{const t=_v(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Iv(n,t)||jv(e)},getConflictingClassGroupIds:(e,t)=>{const i=n[e]||[];return t&&r[e]?[...i,...r[e]]:i}}})(e)),Uv=/\s+/;function Wv(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=$v(e))&&(r&&(r+=" "),r+=t);return r}const $v=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=$v(e[r]))&&(n&&(n+=" "),n+=t);return n};function Hv(e,...t){let n,r,i,s=function(a){const l=t.reduce((e,t)=>t(e),e());return n=Bv(l),r=n.cache.get,i=n.cache.set,s=o,o(a)};function o(e){const t=r(e);if(t)return t;const s=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,s=[],o=e.trim().split(Uv);let a="";for(let l=o.length-1;l>=0;l-=1){const e=o[l],{modifiers:t,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=n(e);let p=Boolean(d),h=r(p?u.substring(0,d):u);if(!h){if(!p){a=e+(a.length>0?" "+a:a);continue}if(h=r(u),!h){a=e+(a.length>0?" "+a:a);continue}p=!1}const f=Fv(t).join(":"),m=c?f+"!":f,v=m+h;if(s.includes(v))continue;s.push(v);const g=i(h,p);for(let n=0;n<g.length;++n){const e=g[n];s.push(m+e)}a=e+(a.length>0?" "+a:a)}return a})(e,n);return i(e,s),s}return function(){return s(Wv.apply(null,arguments))}}const Vv=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},qv=/^\[(?:([a-z-]+):)?(.+)\]$/i,Gv=/^\d+\/\d+$/,Kv=new Set(["px","full","screen"]),Jv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Qv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Xv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,eg=e=>ng(e)||Kv.has(e)||Gv.test(e),tg=e=>mg(e,"length",vg),ng=e=>Boolean(e)&&!Number.isNaN(Number(e)),rg=e=>mg(e,"number",ng),ig=e=>Boolean(e)&&Number.isInteger(Number(e)),sg=e=>e.endsWith("%")&&ng(e.slice(0,-1)),og=e=>qv.test(e),ag=e=>Jv.test(e),lg=new Set(["length","size","percentage"]),cg=e=>mg(e,lg,gg),ug=e=>mg(e,"position",gg),dg=new Set(["image","url"]),pg=e=>mg(e,dg,bg),hg=e=>mg(e,"",yg),fg=()=>!0,mg=(e,t,n)=>{const r=qv.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},vg=e=>Yv.test(e)&&!Zv.test(e),gg=()=>!1,yg=e=>Qv.test(e),bg=e=>Xv.test(e),xg=Hv(()=>{const e=Vv("colors"),t=Vv("spacing"),n=Vv("blur"),r=Vv("brightness"),i=Vv("borderColor"),s=Vv("borderRadius"),o=Vv("borderSpacing"),a=Vv("borderWidth"),l=Vv("contrast"),c=Vv("grayscale"),u=Vv("hueRotate"),d=Vv("invert"),p=Vv("gap"),h=Vv("gradientColorStops"),f=Vv("gradientColorStopPositions"),m=Vv("inset"),v=Vv("margin"),g=Vv("opacity"),y=Vv("padding"),b=Vv("saturate"),x=Vv("scale"),w=Vv("sepia"),S=Vv("skew"),C=Vv("space"),E=Vv("translate"),T=()=>["auto",og,t],N=()=>[og,t],P=()=>["",eg,tg],R=()=>["auto",ng,og],I=()=>["","0",og],k=()=>[ng,og];return{cacheSize:500,separator:":",theme:{colors:[fg],spacing:[eg,tg],blur:["none","",ag,og],brightness:k(),borderColor:[e],borderRadius:["none","","full",ag,og],borderSpacing:N(),borderWidth:P(),contrast:k(),grayscale:I(),hueRotate:k(),invert:I(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[sg,tg],inset:T(),margin:T(),opacity:k(),padding:N(),saturate:k(),scale:k(),sepia:I(),skew:k(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",og]}],container:["container"],columns:[{columns:[ag]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",og]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ig,og]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",og]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",ig,og]}],"grid-cols":[{"grid-cols":[fg]}],"col-start-end":[{col:["auto",{span:["full",ig,og]},og]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[fg]}],"row-start-end":[{row:["auto",{span:[ig,og]},og]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",og]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",og]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",og,t]}],"min-w":[{"min-w":[og,t,"min","max","fit"]}],"max-w":[{"max-w":[og,t,"none","full","min","max","fit","prose",{screen:[ag]},ag]}],h:[{h:[og,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[og,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[og,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[og,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ag,tg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rg]}],"font-family":[{font:[fg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",og]}],"line-clamp":[{"line-clamp":["none",ng,rg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",eg,og]}],"list-image":[{"list-image":["none",og]}],"list-style-type":[{list:["none","disc","decimal",og]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",eg,tg]}],"underline-offset":[{"underline-offset":["auto",eg,og]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",og]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",og]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ug]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cg]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},pg]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[eg,og]}],"outline-w":[{outline:[eg,tg]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[eg,tg]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ag,hg]}],"shadow-color":[{shadow:[fg]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ag,og]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",og]}],duration:[{duration:k()}],ease:[{ease:["linear","in","out","in-out",og]}],delay:[{delay:k()}],animate:[{animate:["none","spin","ping","pulse","bounce",og]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[ig,og]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",og]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",og]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",og]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[eg,tg,rg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function wg(){try{if("undefined"!=typeof window){if(window.runtimeConfig&&window.runtimeConfig.API_BASE_URL){const e=window.runtimeConfig.API_BASE_URL.replace(/\/$/,"");return console.log(" runtime-configAPI_BASE_URL:",e),e.replace(/\/api$/,"")}if(""!=="/api".trim())return"/api".replace(/\/$/,"");const e=window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1");return/\.azurestaticapps\.net$/i.test(window.location.hostname)?"":e?window.location.origin:""}}catch(e){console.warn("APIURL:",e)}return"undefined"!=typeof window?window.location.origin:"/api"}function Sg(e){if(console.log(" convertImageUrl :",{url:e,type:typeof e}),!e)return console.log(" URL"),"";if("string"!=typeof e){if("string"!=typeof e.url)return console.log(" URL"),"";e=e.url,console.log(" URL:",e)}if("string"==typeof e&&e.includes("localhost:8000")){const t="/api",n="undefined"!=typeof window?window.location.origin:t,r=e.replace(/http:\/\/localhost:8000/g,n);return console.log(" :",{original:e,corrected:r,currentOrigin:n}),r}if(e.startsWith("http://")||e.startsWith("https://"))return console.log(" URL:",e),e;if(e.startsWith("data:image/"))return console.log(" Base64:",e.substring(0,50)+"..."),e;if(e.startsWith("/api/emergency-flow/image/")||e.startsWith("/api/troubleshooting/image/")){const t=e.split("/").pop()||e.split("\\").pop()||e,n=wg();if(e.includes("emergency-flow")){const r=`${n}/api/emergency-flow/image/${t}`;return console.log(" emergency-flow URLURL:",{original:e,fileName:t,apiBaseUrl:n,emergencyUrl:r}),r}const r=`${n}/api/troubleshooting/image/${t}`;return console.log(" troubleshooting URLURL:",{original:e,fileName:t,apiBaseUrl:n,troubleshootingUrl:r}),r}if(e.startsWith("/api/")){const t=wg(),n=`${t}${e}`;return console.log(" APIURL:",{original:e,apiBaseUrl:t,fullUrl:n}),n}if(e.startsWith("/"))return console.log(" :",e),e;const t=wg();console.log(" APIURL:",t);let n=e;if(e.includes("/")?n=e.split("/").pop()||e:e.includes("\\")&&(n=e.split("\\").pop()||e),console.log(" :",{original:e,fileName:n}),n.includes("emergency-flow-step")||e.includes("/api/emergency-flow/image/")){const e=`${t}/api/emergency-flow/image/${n}`;return console.log(" emergency-flow URL:",e),e}const r=`${t}/api/troubleshooting/image/${n}`;return console.log(" troubleshooting URL:",r),r}function Cg(e){const t=Sg(e);return console.log(" buildImageUrl -> convertImageUrl:",{input:e,output:t}),t}const Eg=new Map;function Tg(e,t){const n=e.currentTarget,r=n.src,i=Eg.get(r)||0;if(console.error(":",{imageUrl:t,currentSrc:r,retryCount:i,maxRetries:2}),i>=2)return console.error(" "),n.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBDMTE2LjU2OSA3MCAxMzAgODMuNDMxIDEzMCAxMDBDMTMwIDExNi41NjkgMTE2LjU2OSAxMzAgMTAwIDEzMEM4My40MzEgMTMwIDcwIDExNi41NjkgNzAgMTAwQzcwIDgzLjQzMSA4My40MzEgNzAgMTAwIDcwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDE0MEMxMTYuNTY5IDE0MCAxMzAgMTUzLjQzMSAxMzAgMTcwQzEzMCAxODYuNTY5IDExNi41NjkgMjAwIDEwMCAyMDBDODMuNDMxIDIwMCA3MCAxODYuNTY5IDcwIDE3MEM3MCAxNTMuNDMxIDgzLjQzMSAxNDAgMTAwIDE0MFoiIGZpbGw9IiM5Q0EwQTYiLz4KPHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwIDIwQzIwIDE3LjIzOSAyMi4yMzkgMTUgMjUgMTVIMzVDMzcuNzYxIDE1IDQwIDE3LjIzOSA0MCAyMFYzMEM0MCAzMi43NjEgMzcuNzYxIDM1IDM1IDM1SDI1QzIyLjIzOSAzNSAyMCAzMi43NjEgMjAgMzBWMjBaIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNSAxN0MyNSAxNi40NDc3IDI1LjQ0NzcgMTYgMjYgMTZIMzRDMzQuNTUyMyAxNiAzNSAxNi40NDc3IDM1IDE3VjI5QzM1IDI5LjU1MjMgMzQuNTUyMyAzMCAzNCAzMEgyNkMyNS40NDc3IDMwIDI1IDI5LjU1MjMgMjUgMjlWMTdaIiBmaWxsPSIjOTlBM0Y2Ii8+Cjwvc3ZnPgo8L3N2Zz4K",void Eg.delete(r);Eg.set(r,i+1);try{const e=wg();let s;const o=r.split("/").pop()||r.split("\\").pop();if(o&&o.includes("emergency-flow-step")?(s=o,console.log(" currentSrc:",s)):(s=t.includes("/")?t.split("/").pop():t.includes("\\")?t.split("\\").pop():t,console.log(" imageUrl:",s)),s&&""!==s.trim()&&s.includes("emergency-flow-step")){console.log(" :",{original:t,currentSrc:r,fileName:s,retryCount:i+1,maxRetries:2});{const t=`${e}/api/emergency-flow/image/${s}`;if(t!==r&&!r.endsWith(`/api/emergency-flow/image/${s}`))return console.log(" URLURL:",t),Eg.delete(r),Eg.set(t,i+1),void(n.src=t)}}console.warn(" "),n.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBDMTE2LjU2OSA3MCAxMzAgODMuNDMxIDEzMCAxMDBDMTMwIDExNi41NjkgMTE2LjU2OSAxMzAgMTAwIDEzMEM4My40MzEgMTMwIDcwIDExNi41NjkgNzAgMTAwQzcwIDgzLjQzMSA4My40MzEgNzAgMTAwIDcwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDE0MEMxMTYuNTY5IDE0MCAxMzAgMTUzLjQzMSAxMzAgMTcwQzEzMCAxODYuNTY5IDExNi41NjkgMjAwIDEwMCAyMDBDODMuNDMxIDIwMCA3MCAxODYuNTY5IDcwIDE3MEM3MCAxNTMuNDMxIDgzLjQzMSAxNDAgMTAwIDE0MFoiIGZpbGw9IiM5Q0EwQTYiLz4KPHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwIDIwQzIwIDE3LjIzOSAyMi4yMzkgMTUgMjUgMTVIMzVDMzcuNzYxIDE1IDQwIDE3LjIzOSA0MCAyMFYzMEM0MCAzMi43NjEgMzcuNzYxIDM1IDM1IDM1SDI1QzIyLjIzOSAzNSAyMCAzMi43NjEgMjAgMzBWMjBaIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNSAxN0MyNSAxNi40NDc3IDI1LjQ0NzcgMTYgMjYgMTZIMzRDMzQuNTUyMyAxNiAzNSAxNi40NDc3IDM1IDE3VjI5QzM1IDI5LjU1MjMgMzQuNTUyMyAzMCAzNCAzMEgyNkMyNS40NDc3IDMwIDI1IDI5LjU1MjMgMjUgMjlWMTdaIiBmaWxsPSIjOTlBM0Y2Ii8+Cjwvc3ZnPgo8L3N2Zz4K",Eg.delete(r)}catch(s){console.error(" :",s),n.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBDMTE2LjU2OSA3MCAxMzAgODMuNDMxIDEzMCAxMDBDMTMwIDExNi41NjkgMTE2LjU2OSAxMzAgMTAwIDEzMEM4My40MzEgMTMwIDcwIDExNi41NjkgNzAgMTAwQzcwIDgzLjQzMSA4My40MzEgNzAgMTAwIDcwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDE0MEMxMTYuNTY5IDE0MCAxMzAgMTUzLjQzMSAxMzAgMTcwQzEzMCAxODYuNTY5IDExNi41NjkgMjAwIDEwMCAyMDBDODMuNDMxIDIwMCA3MCAxODYuNTY5IDcwIDE3MEM3MCAxNTMuNDMxIDgzLjQzMSAxNDAgMTAwIDE0MFoiIGZpbGw9IiM5Q0EwQTYiLz4KPHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwIDIwQzIwIDE3LjIzOSAyMi4yMzkgMTUgMjUgMTVIMzVDMzcuNzYxIDE1IDQwIDE3LjIzOSA0MCAyMFYzMEM0MCAzMi43NjEgMzcuNzYxIDM1IDM1IDM1SDI1QzIyLjIzOSAzNSAyMCAzMi43NjEgMjAgMzBWMjBaIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNSAxN0MyNSAxNi40NDc3IDI1LjQ0NzcgMTYgMjYgMTZIMzRDMzQuNTUyMyAxNiAzNSAxNi40NDc3IDM1IDE3VjI5QzM1IDI5LjU1MjMgMzQuNTUyMyAzMCAzNCAzMEgyNkMyNS40NDc3IDMwIDI1IDI5LjU1MjMgMjUgMjlWMTdaIiBmaWxsPSIjOTlBM0Y2Ii8+Cjwvc3ZnPgo8L3N2Zz4K",Eg.delete(r)}}function Ng(...e){return xg(Tv(e))}const Pg=Rv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Rg=Pt.forwardRef((e,t)=>{var n=e,{className:r,variant:i,size:s,asChild:o=!1}=n,a=v(n,["className","variant","size","asChild"]);const l=o?xv:"button";return Lt.jsx(l,f({className:Ng(Pg({variant:i,size:s,className:r})),ref:t},a))});Rg.displayName="Button";
/**
     * @license lucide-react v0.453.0 - ISC
     *
     * This source code is licensed under the ISC license.
     * See the LICENSE file in the root directory of this source tree.
     */
const Ig=(...e)=>e.filter((e,t,n)=>Boolean(e)&&n.indexOf(e)===t).join(" ");
/**
     * @license lucide-react v0.453.0 - ISC
     *
     * This source code is licensed under the ISC license.
     * See the LICENSE file in the root directory of this source tree.
     */
var kg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
     * @license lucide-react v0.453.0 - ISC
     *
     * This source code is licensed under the ISC license.
     * See the LICENSE file in the root directory of this source tree.
     */const jg=Pt.forwardRef((e,t)=>{var n=e,{color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,iconNode:c}=n,u=v(n,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return Pt.createElement("svg",f(m(f({ref:t},kg),{width:i,height:i,stroke:r,strokeWidth:o?24*Number(s)/Number(i):s,className:Ig("lucide",a)}),u),[...c.map(([e,t])=>Pt.createElement(e,t)),...Array.isArray(l)?l:[l]])}),_g=(e,t)=>{const n=Pt.forwardRef((n,r)=>{var i,s=n,{className:o}=s,a=v(s,["className"]);return Pt.createElement(jg,f({ref:r,iconNode:t,className:Ig(`lucide-${i=e,i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,o)},a))});return n.displayName=`${e}`,n},Ag=_g("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),Og=_g("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Dg=_g("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Mg=_g("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Lg=_g("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]),zg=_g("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Fg=_g("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Bg=_g("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Ug=_g("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Wg=_g("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),$g=_g("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Hg=_g("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Vg=_g("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),qg=_g("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Gg=_g("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Kg=_g("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Jg=_g("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Yg=_g("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Zg=_g("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Qg=_g("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),Xg=_g("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),ey=_g("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ty=_g("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ny=_g("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]),ry=_g("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),iy=_g("FileType",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]),sy=_g("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]),oy=_g("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),ay=_g("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),ly=_g("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),cy=_g("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),uy=_g("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),dy=_g("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),py=_g("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),hy=_g("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),fy=_g("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),my=_g("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),vy=_g("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),gy=_g("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),yy=_g("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),by=_g("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),xy=_g("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),wy=_g("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Sy=_g("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Cy=_g("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ey=_g("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Ty=_g("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ny=_g("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Py=_g("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Ry=_g("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Iy=_g("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ky=_g("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]),jy=_g("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),_y=_g("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Ay=_g("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Oy=_g("TabletSmartphone",[["rect",{width:"10",height:"14",x:"3",y:"8",rx:"2",key:"1vrsiq"}],["path",{d:"M5 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-2.4",key:"1j4zmg"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Dy=_g("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),My=_g("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ly=_g("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),zy=_g("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Fy=_g("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),By=_g("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Uy=_g("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Wy=_g("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),$y=_g("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Hy=_g("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),Vy=_g("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),qy=_g("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),Gy=_g("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Ky=_g("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jy=_g("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
     * @license lucide-react v0.453.0 - ISC
     *
     * This source code is licensed under the ISC license.
     * See the LICENSE file in the root directory of this source tree.
     */function Yy(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function Zy(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>Pt.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return Pt.useMemo(()=>({[`__scope${e}`]:m(f({},n),{[e]:r})}),[n,r])}};return r.scopeName=e,[function(t,r){const i=Pt.createContext(r),s=n.length;n=[...n,r];const o=t=>{var n;const r=t,{scope:o,children:a}=r,l=v(r,["scope","children"]),c=(null==(n=null==o?void 0:o[e])?void 0:n[s])||i,u=Pt.useMemo(()=>l,Object.values(l));return Lt.jsx(c.Provider,{value:u,children:a})};return o.displayName=t+"Provider",[o,function(n,o){var a;const l=(null==(a=null==o?void 0:o[e])?void 0:a[s])||i,c=Pt.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Qy(r,...t)]}function Qy(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>{const i=n(e)[`__scope${r}`];return f(f({},t),i)},{});return Pt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}var Xy=(null==globalThis?void 0:globalThis.document)?Pt.useLayoutEffect:()=>{},eb=It[" useId ".trim().toString()]||(()=>{}),tb=0;function nb(e){const[t,n]=Pt.useState(eb());return Xy(()=>{n(e=>null!=e?e:String(tb++))},[e]),t?`radix-${t}`:""}var rb=It[" useInsertionEffect ".trim().toString()]||Xy;function ib({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,o]=function({defaultProp:e,onChange:t}){const[n,r]=Pt.useState(e),i=Pt.useRef(n),s=Pt.useRef(t);return rb(()=>{s.current=t},[t]),Pt.useEffect(()=>{var e;i.current!==n&&(null==(e=s.current)||e.call(s,n),i.current=n)},[n,i]),[n,r,s]}({defaultProp:t,onChange:n}),a=void 0!==e,l=a?e:i;{const t=Pt.useRef(void 0!==e);Pt.useEffect(()=>{const e=t.current;if(e!==a){const t=e?"controlled":"uncontrolled",n=a?"controlled":"uncontrolled";console.warn(`${r} is changing from ${t} to ${n}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=a},[a,r])}const c=Pt.useCallback(t=>{var n;if(a){const r=function(e){return"function"==typeof e}(t)?t(e):t;r!==e&&(null==(n=o.current)||n.call(o,r))}else s(t)},[a,e,s,o]);return[l,c]}function sb(e){const t=ob(e),n=Pt.forwardRef((e,n)=>{const r=e,{children:i}=r,s=v(r,["children"]),o=Pt.Children.toArray(i),a=o.find(lb);if(a){const e=a.props.children,r=o.map(t=>t===a?Pt.Children.count(e)>1?Pt.Children.only(null):Pt.isValidElement(e)?e.props.children:null:t);return Lt.jsx(t,m(f({},s),{ref:n,children:Pt.isValidElement(e)?Pt.cloneElement(e,void 0,r):null}))}return Lt.jsx(t,m(f({},s),{ref:n,children:i}))});return n.displayName=`${e}.Slot`,n}function ob(e){const t=Pt.forwardRef((e,t)=>{const n=e,{children:r}=n,i=v(n,["children"]);if(Pt.isValidElement(r)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(r),n=function(e,t){const n=f({},t);for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]=f(f({},i),s):"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return f(f({},e),n)}(i,r.props);return r.type!==Pt.Fragment&&(n.ref=t?fv(t,e):e),Pt.cloneElement(r,n)}return Pt.Children.count(r)>1?Pt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ab=Symbol("radix.slottable");function lb(e){return Pt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ab}var cb=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=sb(`Primitive.${t}`),r=Pt.forwardRef((e,r)=>{const i=e,{asChild:s}=i,o=v(i,["asChild"]),a=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Lt.jsx(a,m(f({},o),{ref:r}))});return r.displayName=`Primitive.${t}`,m(f({},e),{[t]:r})},{});function ub(e,t){e&&$p.flushSync(()=>e.dispatchEvent(t))}function db(e){const t=Pt.useRef(e);return Pt.useEffect(()=>{t.current=e}),Pt.useMemo(()=>(...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)},[])}var pb,hb="dismissableLayer.update",fb="dismissableLayer.pointerDownOutside",mb="dismissableLayer.focusOutside",vb=Pt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gb=Pt.forwardRef((e,t)=>{var n;const r=e,{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:l,onDismiss:c}=r,u=v(r,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),d=Pt.useContext(vb),[p,h]=Pt.useState(null),g=null!=(n=null==p?void 0:p.ownerDocument)?n:null==globalThis?void 0:globalThis.document,[,y]=Pt.useState({}),b=mv(t,e=>h(e)),x=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),S=x.indexOf(w),C=p?x.indexOf(p):-1,E=d.layersWithOutsidePointerEventsDisabled.size>0,T=C>=S,N=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=db(e),r=Pt.useRef(!1),i=Pt.useRef(()=>{});return Pt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){xb(fb,n,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=r,t.addEventListener("click",i.current,{once:!0})):r()}else t.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...d.branches].some(e=>e.contains(t));T&&!n&&(null==o||o(e),null==l||l(e),e.defaultPrevented||null==c||c())},g),P=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=db(e),r=Pt.useRef(!1);return Pt.useEffect(()=>{const e=e=>{e.target&&!r.current&&xb(mb,n,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(null==a||a(e),null==l||l(e),e.defaultPrevented||null==c||c())},g);return function(e,t=(null==globalThis?void 0:globalThis.document)){const n=db(e);Pt.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{C===d.layers.size-1&&(null==s||s(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},g),Pt.useEffect(()=>{if(p)return i&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(pb=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),bb(),()=>{i&&1===d.layersWithOutsidePointerEventsDisabled.size&&(g.body.style.pointerEvents=pb)}},[p,g,i,d]),Pt.useEffect(()=>()=>{p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),bb())},[p,d]),Pt.useEffect(()=>{const e=()=>y({});return document.addEventListener(hb,e),()=>document.removeEventListener(hb,e)},[]),Lt.jsx(cb.div,m(f({},u),{ref:b,style:f({pointerEvents:E?T?"auto":"none":void 0},e.style),onFocusCapture:Yy(e.onFocusCapture,P.onFocusCapture),onBlurCapture:Yy(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Yy(e.onPointerDownCapture,N.onPointerDownCapture)}))});gb.displayName="DismissableLayer";var yb=Pt.forwardRef((e,t)=>{const n=Pt.useContext(vb),r=Pt.useRef(null),i=mv(t,r);return Pt.useEffect(()=>{const e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),Lt.jsx(cb.div,m(f({},e),{ref:i}))});function bb(){const e=new CustomEvent(hb);document.dispatchEvent(e)}function xb(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?ub(i,s):i.dispatchEvent(s)}yb.displayName="DismissableLayerBranch";var wb=gb,Sb=yb,Cb="focusScope.autoFocusOnMount",Eb="focusScope.autoFocusOnUnmount",Tb={bubbles:!1,cancelable:!0},Nb=Pt.forwardRef((e,t)=>{const n=e,{loop:r=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:o}=n,a=v(n,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[l,c]=Pt.useState(null),u=db(s),d=db(o),p=Pt.useRef(null),h=mv(t,e=>c(e)),g=Pt.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Pt.useEffect(()=>{if(i){let e=function(e){if(g.paused||!l)return;const t=e.target;l.contains(t)?p.current=t:kb(p.current,{select:!0})},t=function(e){if(g.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||kb(p.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&kb(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[i,l,g.paused]),Pt.useEffect(()=>{if(l){jb.add(g);const e=document.activeElement;if(!l.contains(e)){const t=new CustomEvent(Cb,Tb);l.addEventListener(Cb,u),l.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(kb(r,{select:t}),document.activeElement!==n)return}(Pb(l).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&kb(l))}return()=>{l.removeEventListener(Cb,u),setTimeout(()=>{const t=new CustomEvent(Eb,Tb);l.addEventListener(Eb,d),l.dispatchEvent(t),t.defaultPrevented||kb(null!=e?e:document.body,{select:!0}),l.removeEventListener(Eb,d),jb.remove(g)},0)}}},[l,u,d,g]);const y=Pt.useCallback(e=>{if(!r&&!i)return;if(g.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[i,s]=function(e){const t=Pb(e),n=Rb(t,e),r=Rb(t.reverse(),e);return[n,r]}(t);i&&s?e.shiftKey||n!==s?e.shiftKey&&n===i&&(e.preventDefault(),r&&kb(s,{select:!0})):(e.preventDefault(),r&&kb(i,{select:!0})):n===t&&e.preventDefault()}},[r,i,g.paused]);return Lt.jsx(cb.div,m(f({tabIndex:-1},a),{ref:h,onKeyDown:y}))});function Pb(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Rb(e,t){for(const n of e)if(!Ib(n,{upTo:t}))return n}function Ib(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function kb(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Nb.displayName="FocusScope";var jb=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=_b(e,t),e.unshift(t)},remove(t){var n;e=_b(e,t),null==(n=e[0])||n.resume()}}}();function _b(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var Ab=Pt.forwardRef((e,t)=>{var n;const r=e,{container:i}=r,s=v(r,["container"]),[o,a]=Pt.useState(!1);Xy(()=>a(!0),[]);const l=i||o&&(null==(n=null==globalThis?void 0:globalThis.document)?void 0:n.body);return l?Hp.createPortal(Lt.jsx(cb.div,m(f({},s),{ref:t})),l):null});Ab.displayName="Portal";var Ob=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=Pt.useState(),r=Pt.useRef(null),i=Pt.useRef(e),s=Pt.useRef("none"),o=e?"mounted":"unmounted",[a,l]=function(e,t){return Pt.useReducer((e,n)=>{const r=t[e][n];return null!=r?r:e},e)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Pt.useEffect(()=>{const e=Db(r.current);s.current="mounted"===a?e:"none"},[a]),Xy(()=>{const t=r.current,n=i.current;if(n!==e){const r=s.current,o=Db(t);e?l("MOUNT"):"none"===o||"none"===(null==t?void 0:t.display)?l("UNMOUNT"):l(n&&r!==o?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),Xy(()=>{var e;if(t){let n;const o=null!=(e=t.ownerDocument.defaultView)?e:window,a=e=>{const s=Db(r.current).includes(CSS.escape(e.animationName));if(e.target===t&&s&&(l("ANIMATION_END"),!i.current)){const e=t.style.animationFillMode;t.style.animationFillMode="forwards",n=o.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},c=e=>{e.target===t&&(s.current=Db(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{o.clearTimeout(n),t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:Pt.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),i="function"==typeof n?n({present:r.isPresent}):Pt.Children.only(n),s=mv(r.ref,function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(i));return"function"==typeof n||r.isPresent?Pt.cloneElement(i,{ref:s}):null};function Db(e){return(null==e?void 0:e.animationName)||"none"}Ob.displayName="Presence";var Mb=0;function Lb(){Pt.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!=(e=n[0])?e:zb()),document.body.insertAdjacentElement("beforeend",null!=(t=n[1])?t:zb()),Mb++,()=>{1===Mb&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Mb--}},[])}function zb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Fb=function(){return Fb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Fb.apply(this,arguments)};function Bb(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Ub(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(gie){s(gie)}}function a(e){try{l(r.throw(e))}catch(gie){s(gie)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var Wb="right-scroll-bar-position",$b="width-before-scroll-bar";function Hb(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var Vb="undefined"!=typeof window?Pt.useLayoutEffect:Pt.useEffect,qb=new WeakMap;function Gb(e,t){var n,r,i,s=(n=null,r=function(t){return e.forEach(function(e){return Hb(e,t)})},(i=Pt.useState(function(){return{value:n,callback:r,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}})[0]).callback=r,i.facade);return Vb(function(){var t=qb.get(s);if(t){var n=new Set(t),r=new Set(e),i=s.current;n.forEach(function(e){r.has(e)||Hb(e,null)}),r.forEach(function(e){n.has(e)||Hb(e,i)})}qb.set(s,e)},[e]),s}function Kb(e){return e}var Jb=function(e){var t=e.sideCar,n=Bb(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return Pt.createElement(r,Fb({},n))};Jb.isSideCarExport=!0;var Yb=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=Kb);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var s=function(){var n=t;t=[],n.forEach(e)},o=function(){return Promise.resolve().then(s)};o(),n={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=Fb({async:!0,ssr:!1},e),t}(),Zb=function(){},Qb=Pt.forwardRef(function(e,t){var n=Pt.useRef(null),r=Pt.useState({onScrollCapture:Zb,onWheelCapture:Zb,onTouchMoveCapture:Zb}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,p=e.sideCar,h=e.noRelative,f=e.noIsolation,m=e.inert,v=e.allowPinchZoom,g=e.as,y=void 0===g?"div":g,b=e.gapMode,x=Bb(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,S=Gb([n,t]),C=Fb(Fb({},x),i);return Pt.createElement(Pt.Fragment,null,u&&Pt.createElement(w,{sideCar:Yb,removeScrollBar:c,shards:d,noRelative:h,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:b}),o?Pt.cloneElement(Pt.Children.only(a),Fb(Fb({},C),{ref:S})):Pt.createElement(y,Fb({},C,{className:l,ref:S}),a))});function Xb(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}Qb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Qb.classNames={fullWidth:$b,zeroRight:Wb};var ex=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=Xb())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tx=function(){var e,t=(e=ex(),function(t,n){Pt.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},nx={left:0,top:0,right:0,gap:0},rx=function(e){return parseInt(e||"",10)||0},ix=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return nx;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[rx(n),rx(r),rx(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},sx=tx(),ox="data-scroll-locked",ax=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(a,"px ").concat(r,";\n  }\n  body[").concat(ox,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Wb," {\n    right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat($b," {\n    margin-right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(Wb," .").concat(Wb," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat($b," .").concat($b," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(ox,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},lx=function(){var e=parseInt(document.body.getAttribute(ox)||"0",10);return isFinite(e)?e:0},cx=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r;Pt.useEffect(function(){return document.body.setAttribute(ox,(lx()+1).toString()),function(){var e=lx()-1;e<=0?document.body.removeAttribute(ox):document.body.setAttribute(ox,e.toString())}},[]);var s=Pt.useMemo(function(){return ix(i)},[i]);return Pt.createElement(sx,{styles:ax(s,!t,i,n?"":"!important")})},ux=!1;if("undefined"!=typeof window)try{var dx=Object.defineProperty({},"passive",{get:function(){return ux=!0,!0}});window.addEventListener("test",dx,dx),window.removeEventListener("test",dx,dx)}catch(yie){ux=!1}var px=!!ux&&{passive:!1},hx=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},fx=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),mx(e,r)){var i=vx(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},mx=function(e,t){return"v"===e?function(e){return hx(e,"overflowY")}(t):function(e){return hx(e,"overflowX")}(t)},vx=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},gx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},yx=function(e){return[e.deltaX,e.deltaY]},bx=function(e){return e&&"current"in e?e.current:e},xx=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},wx=0,Sx=[];function Cx(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ex=(Tx=function(e){var t=Pt.useRef([]),n=Pt.useRef([0,0]),r=Pt.useRef(),i=Pt.useState(wx++)[0],s=Pt.useState(tx)[0],o=Pt.useRef(e);Pt.useEffect(function(){o.current=e},[e]),Pt.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(bx),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=Pt.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var i,s=gx(e),a=n.current,l="deltaX"in e?e.deltaX:a[0]-s[0],c="deltaY"in e?e.deltaY:a[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var p=fx(d,u);if(!p)return!0;if(p?i=d:(i="v"===d?"h":"v",p=fx(d,u)),!p)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=i),!i)return!0;var h=r.current||i;return function(e,t,n,r){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=i*r,o=n.target,a=t.contains(o),l=!1,c=s>0,u=0,d=0;do{if(!o)break;var p=vx(e,o),h=p[0],f=p[1]-p[2]-i*h;(h||f)&&mx(e,o)&&(u+=f,d+=h);var m=o.parentNode;o=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!a&&o!==document.body||a&&(t.contains(o)||t===o));return(c&&Math.abs(u)<1||!c&&Math.abs(d)<1)&&(l=!0),l}(h,t,e,"h"===h?l:c)},[]),l=Pt.useCallback(function(e){var n=e;if(Sx.length&&Sx[Sx.length-1]===s){var r="deltaY"in n?yx(n):gx(n),i=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,i=r,t[0]===i[0]&&t[1]===i[1]);var t,i})[0];if(i&&i.should)n.cancelable&&n.preventDefault();else if(!i){var l=(o.current.shards||[]).map(bx).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?a(n,l[0]):!o.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=Pt.useCallback(function(e,n,r,i){var s={name:e,delta:n,target:r,should:i,shadowParent:Cx(r)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),u=Pt.useCallback(function(e){n.current=gx(e),r.current=void 0},[]),d=Pt.useCallback(function(t){c(t.type,yx(t),t.target,a(t,e.lockRef.current))},[]),p=Pt.useCallback(function(t){c(t.type,gx(t),t.target,a(t,e.lockRef.current))},[]);Pt.useEffect(function(){return Sx.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",l,px),document.addEventListener("touchmove",l,px),document.addEventListener("touchstart",u,px),function(){Sx=Sx.filter(function(e){return e!==s}),document.removeEventListener("wheel",l,px),document.removeEventListener("touchmove",l,px),document.removeEventListener("touchstart",u,px)}},[]);var h=e.removeScrollBar,f=e.inert;return Pt.createElement(Pt.Fragment,null,f?Pt.createElement(s,{styles:xx(i)}):null,h?Pt.createElement(cx,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},Yb.useMedium(Tx),Jb);var Tx,Nx=Pt.forwardRef(function(e,t){return Pt.createElement(Qb,Fb({},e,{ref:t,sideCar:Ex}))});Nx.classNames=Qb.classNames;var Px=new WeakMap,Rx=new WeakMap,Ix={},kx=0,jx=function(e){return e&&(e.host||jx(e.parentNode))},_x=function(e,t,n,r){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=jx(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Ix[n]||(Ix[n]=new WeakMap);var s=Ix[n],o=[],a=new Set,l=new Set(i),c=function(e){e&&!a.has(e)&&(a.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(a.has(e))u(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(Px.get(e)||0)+1,c=(s.get(e)||0)+1;Px.set(e,l),s.set(e,c),o.push(e),1===l&&i&&Rx.set(e,!0),1===c&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(gie){console.error("aria-hidden: cannot operate on ",e,gie)}})};return u(t),a.clear(),kx++,function(){o.forEach(function(e){var t=Px.get(e)-1,i=s.get(e)-1;Px.set(e,t),s.set(e,i),t||(Rx.has(e)||e.removeAttribute(r),Rx.delete(e)),i||e.removeAttribute(n)}),--kx||(Px=new WeakMap,Px=new WeakMap,Rx=new WeakMap,Ix={})}},Ax=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),_x(r,i,n,"aria-hidden")):function(){return null}};function Ox(e){const t=Dx(e),n=Pt.forwardRef((e,n)=>{const r=e,{children:i}=r,s=v(r,["children"]),o=Pt.Children.toArray(i),a=o.find(Lx);if(a){const e=a.props.children,r=o.map(t=>t===a?Pt.Children.count(e)>1?Pt.Children.only(null):Pt.isValidElement(e)?e.props.children:null:t);return Lt.jsx(t,m(f({},s),{ref:n,children:Pt.isValidElement(e)?Pt.cloneElement(e,void 0,r):null}))}return Lt.jsx(t,m(f({},s),{ref:n,children:i}))});return n.displayName=`${e}.Slot`,n}function Dx(e){const t=Pt.forwardRef((e,t)=>{const n=e,{children:r}=n,i=v(n,["children"]);if(Pt.isValidElement(r)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(r),n=function(e,t){const n=f({},t);for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]=f(f({},i),s):"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return f(f({},e),n)}(i,r.props);return r.type!==Pt.Fragment&&(n.ref=t?fv(t,e):e),Pt.cloneElement(r,n)}return Pt.Children.count(r)>1?Pt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Mx=Symbol("radix.slottable");function Lx(e){return Pt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Mx}var zx="Dialog",[Fx,Bx]=Zy(zx),[Ux,Wx]=Fx(zx),$x=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,a=Pt.useRef(null),l=Pt.useRef(null),[c,u]=ib({prop:r,defaultProp:null!=i&&i,onChange:s,caller:zx});return Lt.jsx(Ux,{scope:t,triggerRef:a,contentRef:l,contentId:nb(),titleId:nb(),descriptionId:nb(),open:c,onOpenChange:u,onOpenToggle:Pt.useCallback(()=>u(e=>!e),[u]),modal:o,children:n})};$x.displayName=zx;var Hx="DialogTrigger",Vx=Pt.forwardRef((e,t)=>{const n=e,{__scopeDialog:r}=n,i=v(n,["__scopeDialog"]),s=Wx(Hx,r),o=mv(t,s.triggerRef);return Lt.jsx(cb.button,m(f({type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":dw(s.open)},i),{ref:o,onClick:Yy(e.onClick,s.onOpenToggle)}))});Vx.displayName=Hx;var qx="DialogPortal",[Gx,Kx]=Fx(qx,{forceMount:void 0}),Jx=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=Wx(qx,t);return Lt.jsx(Gx,{scope:t,forceMount:n,children:Pt.Children.map(r,e=>Lt.jsx(Ob,{present:n||s.open,children:Lt.jsx(Ab,{asChild:!0,container:i,children:e})}))})};Jx.displayName=qx;var Yx="DialogOverlay",Zx=Pt.forwardRef((e,t)=>{const n=Kx(Yx,e.__scopeDialog),r=e,{forceMount:i=n.forceMount}=r,s=v(r,["forceMount"]),o=Wx(Yx,e.__scopeDialog);return o.modal?Lt.jsx(Ob,{present:i||o.open,children:Lt.jsx(Xx,m(f({},s),{ref:t}))}):null});Zx.displayName=Yx;var Qx=Ox("DialogOverlay.RemoveScroll"),Xx=Pt.forwardRef((e,t)=>{const n=e,{__scopeDialog:r}=n,i=v(n,["__scopeDialog"]),s=Wx(Yx,r);return Lt.jsx(Nx,{as:Qx,allowPinchZoom:!0,shards:[s.contentRef],children:Lt.jsx(cb.div,m(f({"data-state":dw(s.open)},i),{ref:t,style:f({pointerEvents:"auto"},i.style)}))})}),ew="DialogContent",tw=Pt.forwardRef((e,t)=>{const n=Kx(ew,e.__scopeDialog),r=e,{forceMount:i=n.forceMount}=r,s=v(r,["forceMount"]),o=Wx(ew,e.__scopeDialog);return Lt.jsx(Ob,{present:i||o.open,children:o.modal?Lt.jsx(nw,m(f({},s),{ref:t})):Lt.jsx(rw,m(f({},s),{ref:t}))})});tw.displayName=ew;var nw=Pt.forwardRef((e,t)=>{const n=Wx(ew,e.__scopeDialog),r=Pt.useRef(null),i=mv(t,n.contentRef,r);return Pt.useEffect(()=>{const e=r.current;if(e)return Ax(e)},[]),Lt.jsx(iw,m(f({},e),{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Yy(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:Yy(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:Yy(e.onFocusOutside,e=>e.preventDefault())}))}),rw=Pt.forwardRef((e,t)=>{const n=Wx(ew,e.__scopeDialog),r=Pt.useRef(!1),i=Pt.useRef(!1);return Lt.jsx(iw,m(f({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,o;null==(s=e.onCloseAutoFocus)||s.call(e,t),t.defaultPrevented||(r.current||null==(o=n.triggerRef.current)||o.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{var s,o;null==(s=e.onInteractOutside)||s.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const a=t.target;(null==(o=n.triggerRef.current)?void 0:o.contains(a))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}}))}),iw=Pt.forwardRef((e,t)=>{const n=e,{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o}=n,a=v(n,["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"]),l=Wx(ew,r),c=Pt.useRef(null),u=mv(t,c);return Lb(),Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Nb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:o,children:Lt.jsx(gb,m(f({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":dw(l.open)},a),{ref:u,onDismiss:()=>l.onOpenChange(!1)}))}),Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(mw,{titleId:l.titleId}),Lt.jsx(vw,{contentRef:c,descriptionId:l.descriptionId})]})]})}),sw="DialogTitle",ow=Pt.forwardRef((e,t)=>{const n=e,{__scopeDialog:r}=n,i=v(n,["__scopeDialog"]),s=Wx(sw,r);return Lt.jsx(cb.h2,m(f({id:s.titleId},i),{ref:t}))});ow.displayName=sw;var aw="DialogDescription",lw=Pt.forwardRef((e,t)=>{const n=e,{__scopeDialog:r}=n,i=v(n,["__scopeDialog"]),s=Wx(aw,r);return Lt.jsx(cb.p,m(f({id:s.descriptionId},i),{ref:t}))});lw.displayName=aw;var cw="DialogClose",uw=Pt.forwardRef((e,t)=>{const n=e,{__scopeDialog:r}=n,i=v(n,["__scopeDialog"]),s=Wx(cw,r);return Lt.jsx(cb.button,m(f({type:"button"},i),{ref:t,onClick:Yy(e.onClick,()=>s.onOpenChange(!1))}))});function dw(e){return e?"open":"closed"}uw.displayName=cw;var pw="DialogTitleWarning",[hw,fw]=function(e,t){const n=Pt.createContext(t),r=e=>{const t=e,{children:r}=t,i=v(t,["children"]),s=Pt.useMemo(()=>i,Object.values(i));return Lt.jsx(n.Provider,{value:s,children:r})};return r.displayName=e+"Provider",[r,function(r){const i=Pt.useContext(n);if(i)return i;if(void 0!==t)return t;throw new Error(`\`${r}\` must be used within \`${e}\``)}]}(pw,{contentName:ew,titleName:sw,docsSlug:"dialog"}),mw=({titleId:e})=>{const t=fw(pw),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return Pt.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},vw=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${fw("DialogDescriptionWarning").contentName}}.`;return Pt.useEffect(()=>{var r;const i=null==(r=e.current)?void 0:r.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},gw=$x,yw=Vx,bw=Jx,xw=Zx,ww=tw,Sw=ow,Cw=lw,Ew=uw;const Tw=gw,Nw=yw,Pw=bw,Rw=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(xw,m(f({className:Ng("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},i),{ref:t}))});Rw.displayName=xw.displayName;const Iw=Rv("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),kw=Pt.forwardRef((e,t)=>{var n=e,{side:r="right",className:i,children:s}=n,o=v(n,["side","className","children"]);return Lt.jsxs(Pw,{children:[Lt.jsx(Rw,{}),Lt.jsxs(ww,m(f({ref:t,className:Ng(Iw({side:r}),i)},o),{children:[s,Lt.jsxs(Ew,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[Lt.jsx(Ky,{className:"h-4 w-4"}),Lt.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});function jw(){const e=Ff().pathname,{user:t}=Km(),n="admin"===(null==t?void 0:t.role),r=[{title:"",path:"/chat",icon:Lt.jsx(yy,{className:"mr-2 h-5 w-5 text-blue-600"}),className:"text-blue-600 font-bold text-lg border border-blue-300 rounded-md bg-blue-50"},{title:"",path:"/history",icon:Lt.jsx(cy,{className:"mr-2 h-4 w-4"}),adminOnly:!0},{title:"",path:"/base-data",icon:Lt.jsx(Gy,{className:"mr-2 h-4 w-4"}),adminOnly:!0},{title:"",path:"/troubleshooting",icon:Lt.jsx(ry,{className:"mr-2 h-4 w-4"}),adminOnly:!0},{title:"",path:"/settings",icon:Lt.jsx(Ry,{className:"mr-2 h-4 w-4"}),adminOnly:!0}].filter(e=>!e.adminOnly||n);return Lt.jsx("div",{className:"flex items-center space-x-2",children:r.map(t=>Lt.jsx(Nm,{to:t.path,children:Lt.jsxs(Rg,{variant:"ghost",className:Ng("px-4 py-3 rounded-md",e===t.path?"text-primary font-semibold bg-blue-100":"text-gray-600 hover:bg-gray-100",t.className),children:[t.icon,t.title]})},t.path))})}function _w({onModelChange:e,onMachineNumberChange:t}){const{user:n,logout:r}=Km();Ff();const i=Wf(),[s,o]=Pt.useState(!1),[a,l]=Pt.useState(""),[c,u]=Pt.useState("");if(!n)return null;const d=()=>T(this,null,function*(){try{yield r()}catch(e){console.error(":",e)}}),p=()=>{console.log(""),i("/settings")};return Lt.jsxs("header",{className:"bg-primary text-white py-3 px-4 flex items-center justify-between shadow-md",children:[Lt.jsxs("div",{className:"flex items-center",children:[Lt.jsx("h1",{className:"text-sm font-semibold mr-6",style:{fontSize:"70%"},children:""}),Lt.jsx("div",{className:"hidden md:flex items-center space-x-1",children:Lt.jsx(jw,{})})]}),Lt.jsxs("div",{className:"flex items-center space-x-4",children:[Lt.jsxs("div",{className:"text-xs",style:{fontSize:"80%"},children:[Lt.jsxs("div",{children:["",(null==n?void 0:n.display_name)||(null==n?void 0:n.username)||""]}),Lt.jsx("div",{className:"text-blue-200",children:"admin"===(null==n?void 0:n.role)?"":""})]}),Lt.jsx(Rg,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:p,title:"",children:Lt.jsx(Ry,{className:"h-6 w-6"})}),Lt.jsx(Rg,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:d,title:"",children:Lt.jsx(fy,{className:"h-6 w-6"})}),Lt.jsx("div",{className:"md:hidden",children:Lt.jsxs(Tw,{open:s,onOpenChange:o,children:[Lt.jsx(Nw,{asChild:!0,children:Lt.jsx(Rg,{variant:"ghost",size:"icon",className:"text-white",children:Lt.jsx(vy,{})})}),Lt.jsxs(kw,{side:"left",className:"p-0",children:[Lt.jsx("div",{className:"bg-primary text-white p-4",children:Lt.jsx("h2",{className:"text-xl font-semibold",children:""})}),Lt.jsxs("nav",{className:"p-4",children:[Lt.jsx(jw,{}),Lt.jsxs("div",{className:"mt-4 pt-4 border-t",children:[Lt.jsxs("button",{onClick:()=>{p(),o(!1)},className:"flex items-center w-full px-3 py-2 text-sm rounded-md hover:bg-gray-100 text-blue-600",children:[Lt.jsx(Ry,{className:"mr-2 h-4 w-4"}),""]}),Lt.jsxs("button",{onClick:()=>{d(),o(!1)},className:"flex items-center w-full px-3 py-2 text-sm rounded-md hover:bg-gray-100 text-red-600",children:[Lt.jsx(fy,{className:"mr-2 h-4 w-4"}),""]})]})]})]})]})})]})]})}function Aw(e){const t=Ow(e),n=Pt.forwardRef((e,n)=>{const r=e,{children:i}=r,s=v(r,["children"]),o=Pt.Children.toArray(i),a=o.find(Mw);if(a){const e=a.props.children,r=o.map(t=>t===a?Pt.Children.count(e)>1?Pt.Children.only(null):Pt.isValidElement(e)?e.props.children:null:t);return Lt.jsx(t,m(f({},s),{ref:n,children:Pt.isValidElement(e)?Pt.cloneElement(e,void 0,r):null}))}return Lt.jsx(t,m(f({},s),{ref:n,children:i}))});return n.displayName=`${e}.Slot`,n}function Ow(e){const t=Pt.forwardRef((e,t)=>{const n=e,{children:r}=n,i=v(n,["children"]);if(Pt.isValidElement(r)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(r),n=function(e,t){const n=f({},t);for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]=f(f({},i),s):"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return f(f({},e),n)}(i,r.props);return r.type!==Pt.Fragment&&(n.ref=t?fv(t,e):e),Pt.cloneElement(r,n)}return Pt.Children.count(r)>1?Pt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}kw.displayName=ww.displayName,Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(Sw,f({ref:t,className:Ng("text-lg font-semibold text-foreground",r)},i))}).displayName=Sw.displayName,Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(Cw,f({ref:t,className:Ng("text-sm text-muted-foreground",r)},i))}).displayName=Cw.displayName;var Dw=Symbol("radix.slottable");function Mw(e){return Pt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Dw}function Lw(e){const t=e+"CollectionProvider",[n,r]=Zy(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:n}=e,r=Rt.useRef(null),s=Rt.useRef(new Map).current;return Lt.jsx(i,{scope:t,itemMap:s,collectionRef:r,children:n})};o.displayName=t;const a=e+"CollectionSlot",l=Aw(a),c=Rt.forwardRef((e,t)=>{const{scope:n,children:r}=e,i=mv(t,s(a,n).collectionRef);return Lt.jsx(l,{ref:i,children:r})});c.displayName=a;const u=e+"CollectionItemSlot",d="data-radix-collection-item",p=Aw(u),h=Rt.forwardRef((e,t)=>{const n=e,{scope:r,children:i}=n,o=v(n,["scope","children"]),a=Rt.useRef(null),l=mv(t,a),c=s(u,r);return Rt.useEffect(()=>(c.itemMap.set(a,f({ref:a},o)),()=>{c.itemMap.delete(a)})),Lt.jsx(p,m(f({},{[d]:""}),{ref:l,children:i}))});return h.displayName=u,[{Provider:o,Slot:c,ItemSlot:h},function(t){const n=s(e+"CollectionConsumer",t),r=Rt.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),r=Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return r},[n.collectionRef,n.itemMap]);return r},r]}var zw=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Fw=Pt.forwardRef((e,t)=>Lt.jsx(cb.span,m(f({},e),{ref:t,style:f(f({},zw),e.style)})));Fw.displayName="VisuallyHidden";var Bw=Fw,Uw="ToastProvider",[Ww,$w,Hw]=Lw("Toast"),[Vw]=Zy("Toast",[Hw]),[qw,Gw]=Vw(Uw),Kw=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=e,[a,l]=Pt.useState(null),[c,u]=Pt.useState(0),d=Pt.useRef(!1),p=Pt.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Uw}\`. Expected non-empty \`string\`.`),Lt.jsx(Ww.Provider,{scope:t,children:Lt.jsx(qw,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:Pt.useCallback(()=>u(e=>e+1),[]),onToastRemove:Pt.useCallback(()=>u(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:p,children:o})})};Kw.displayName=Uw;var Jw="ToastViewport",Yw=["F8"],Zw="toast.viewportPause",Qw="toast.viewportResume",Xw=Pt.forwardRef((e,t)=>{const n=e,{__scopeToast:r,hotkey:i=Yw,label:s="Notifications ({hotkey})"}=n,o=v(n,["__scopeToast","hotkey","label"]),a=Gw(Jw,r),l=$w(r),c=Pt.useRef(null),u=Pt.useRef(null),d=Pt.useRef(null),p=Pt.useRef(null),h=mv(t,p,a.onViewportChange),g=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;Pt.useEffect(()=>{const e=e=>{var t;0!==i.length&&i.every(t=>e[t]||e.code===t)&&(null==(t=p.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),Pt.useEffect(()=>{const e=c.current,t=p.current;if(y&&e&&t){const n=()=>{if(!a.isClosePausedRef.current){const e=new CustomEvent(Zw);t.dispatchEvent(e),a.isClosePausedRef.current=!0}},r=()=>{if(a.isClosePausedRef.current){const e=new CustomEvent(Qw);t.dispatchEvent(e),a.isClosePausedRef.current=!1}},i=t=>{!e.contains(t.relatedTarget)&&r()},s=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",s),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[y,a.isClosePausedRef]);const b=Pt.useCallback(({tabbingDirection:e})=>{const t=l().map(t=>{const n=t.ref.current,r=[n,...yS(n)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[l]);return Pt.useEffect(()=>{const e=p.current;if(e){const t=t=>{var n,r,i;const s=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!s){const s=document.activeElement,o=t.shiftKey;if(t.target===e&&o)return void(null==(n=u.current)||n.focus());const a=b({tabbingDirection:o?"backwards":"forwards"}),l=a.findIndex(e=>e===s);bS(a.slice(l+1))?t.preventDefault():o?null==(r=u.current)||r.focus():null==(i=d.current)||i.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[l,b]),Lt.jsxs(Sb,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&Lt.jsx(tS,{ref:u,onFocusFromOutsideViewport:()=>{bS(b({tabbingDirection:"forwards"}))}}),Lt.jsx(Ww.Slot,{scope:r,children:Lt.jsx(cb.ol,m(f({tabIndex:-1},o),{ref:h}))}),y&&Lt.jsx(tS,{ref:d,onFocusFromOutsideViewport:()=>{bS(b({tabbingDirection:"backwards"}))}})]})});Xw.displayName=Jw;var eS="ToastFocusProxy",tS=Pt.forwardRef((e,t)=>{const n=e,{__scopeToast:r,onFocusFromOutsideViewport:i}=n,s=v(n,["__scopeToast","onFocusFromOutsideViewport"]),o=Gw(eS,r);return Lt.jsx(Fw,m(f({tabIndex:0},s),{ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null==(t=o.viewport)?void 0:t.contains(n))&&i()}}))});tS.displayName=eS;var nS="Toast",rS=Pt.forwardRef((e,t)=>{const n=e,{forceMount:r,open:i,defaultOpen:s,onOpenChange:o}=n,a=v(n,["forceMount","open","defaultOpen","onOpenChange"]),[l,c]=ib({prop:i,defaultProp:null==s||s,onChange:o,caller:nS});return Lt.jsx(Ob,{present:r||l,children:Lt.jsx(oS,m(f({open:l},a),{ref:t,onClose:()=>c(!1),onPause:db(e.onPause),onResume:db(e.onResume),onSwipeStart:Yy(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Yy(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:Yy(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Yy(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),c(!1)})}))})});rS.displayName=nS;var[iS,sS]=Vw(nS,{onClose(){}}),oS=Pt.forwardRef((e,t)=>{const n=e,{__scopeToast:r,type:i="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:p,onSwipeCancel:h,onSwipeEnd:g}=n,y=v(n,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),b=Gw(nS,r),[x,w]=Pt.useState(null),S=mv(t,e=>w(e)),C=Pt.useRef(null),E=Pt.useRef(null),T=s||b.duration,N=Pt.useRef(0),P=Pt.useRef(T),R=Pt.useRef(0),{onToastAdd:I,onToastRemove:k}=b,j=db(()=>{var e;(null==x?void 0:x.contains(document.activeElement))&&(null==(e=b.viewport)||e.focus()),a()}),_=Pt.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(R.current),N.current=(new Date).getTime(),R.current=window.setTimeout(j,e))},[j]);Pt.useEffect(()=>{const e=b.viewport;if(e){const t=()=>{_(P.current),null==u||u()},n=()=>{const e=(new Date).getTime()-N.current;P.current=P.current-e,window.clearTimeout(R.current),null==c||c()};return e.addEventListener(Zw,n),e.addEventListener(Qw,t),()=>{e.removeEventListener(Zw,n),e.removeEventListener(Qw,t)}}},[b.viewport,T,c,u,_]),Pt.useEffect(()=>{o&&!b.isClosePausedRef.current&&_(T)},[o,T,b.isClosePausedRef,_]),Pt.useEffect(()=>(I(),()=>k()),[I,k]);const A=Pt.useMemo(()=>x?mS(x):null,[x]);return b.viewport?Lt.jsxs(Lt.Fragment,{children:[A&&Lt.jsx(aS,{__scopeToast:r,role:"status","aria-live":"foreground"===i?"assertive":"polite",children:A}),Lt.jsx(iS,{scope:r,onClose:j,children:$p.createPortal(Lt.jsx(Ww.ItemSlot,{scope:r,children:Lt.jsx(wb,{asChild:!0,onEscapeKeyDown:Yy(l,()=>{b.isFocusedToastEscapeKeyDownRef.current||j(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:Lt.jsx(cb.li,m(f({tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":b.swipeDirection},y),{ref:S,style:f({userSelect:"none",touchAction:"none"},e.style),onKeyDown:Yy(e.onKeyDown,e=>{"Escape"===e.key&&(null==l||l(e.nativeEvent),e.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:Yy(e.onPointerDown,e=>{0===e.button&&(C.current={x:e.clientX,y:e.clientY})}),onPointerMove:Yy(e.onPointerMove,e=>{if(!C.current)return;const t=e.clientX-C.current.x,n=e.clientY-C.current.y,r=Boolean(E.current),i=["left","right"].includes(b.swipeDirection),s=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,o=i?s(0,t):0,a=i?0:s(0,n),l="touch"===e.pointerType?10:2,c={x:o,y:a},u={originalEvent:e,delta:c};r?(E.current=c,vS("toast.swipeMove",p,u,{discrete:!1})):gS(c,b.swipeDirection,l)?(E.current=c,vS("toast.swipeStart",d,u,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(C.current=null)}),onPointerUp:Yy(e.onPointerUp,e=>{const t=E.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),E.current=null,C.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};gS(t,b.swipeDirection,b.swipeThreshold)?vS("toast.swipeEnd",g,r,{discrete:!0}):vS("toast.swipeCancel",h,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})}))})}),b.viewport)})]}):null}),aS=e=>{const t=e,{__scopeToast:n,children:r}=t,i=v(t,["__scopeToast","children"]),s=Gw(nS,n),[o,a]=Pt.useState(!1),[l,c]=Pt.useState(!1);return function(e=()=>{}){const t=db(e);Xy(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>a(!0)),Pt.useEffect(()=>{const e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),l?null:Lt.jsx(Ab,{asChild:!0,children:Lt.jsx(Fw,m(f({},i),{children:o&&Lt.jsxs(Lt.Fragment,{children:[s.label," ",r]})}))})},lS=Pt.forwardRef((e,t)=>{const n=e,{__scopeToast:r}=n,i=v(n,["__scopeToast"]);return Lt.jsx(cb.div,m(f({},i),{ref:t}))});lS.displayName="ToastTitle";var cS=Pt.forwardRef((e,t)=>{const n=e,{__scopeToast:r}=n,i=v(n,["__scopeToast"]);return Lt.jsx(cb.div,m(f({},i),{ref:t}))});cS.displayName="ToastDescription";var uS="ToastAction",dS=Pt.forwardRef((e,t)=>{const n=e,{altText:r}=n,i=v(n,["altText"]);return r.trim()?Lt.jsx(fS,{altText:r,asChild:!0,children:Lt.jsx(hS,m(f({},i),{ref:t}))}):(console.error(`Invalid prop \`altText\` supplied to \`${uS}\`. Expected non-empty \`string\`.`),null)});dS.displayName=uS;var pS="ToastClose",hS=Pt.forwardRef((e,t)=>{const n=e,{__scopeToast:r}=n,i=v(n,["__scopeToast"]),s=sS(pS,r);return Lt.jsx(fS,{asChild:!0,children:Lt.jsx(cb.button,m(f({type:"button"},i),{ref:t,onClick:Yy(e.onClick,s.onClose)}))})});hS.displayName=pS;var fS=Pt.forwardRef((e,t)=>{const n=e,{__scopeToast:r,altText:i}=n,s=v(n,["__scopeToast","altText"]);return Lt.jsx(cb.div,m(f({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0},s),{ref:t}))});function mS(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...mS(e))}}),t}function vS(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?ub(i,s):i.dispatchEvent(s)}var gS=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),s=r>i;return"left"===t||"right"===t?s&&r>n:!s&&i>n};function yS(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function bS(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var xS=Xw,wS=rS,SS=lS,CS=cS,ES=dS,TS=hS;const NS=Kw,PS=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(xS,f({ref:t,className:Ng("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r)},i))});PS.displayName=xS.displayName;const RS=Rv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),IS=Pt.forwardRef((e,t)=>{var n=e,{className:r,variant:i}=n,s=v(n,["className","variant"]);return Lt.jsx(wS,f({ref:t,className:Ng(RS({variant:i}),r)},s))});IS.displayName=wS.displayName,Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(ES,f({ref:t,className:Ng("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r)},i))}).displayName=ES.displayName;const kS=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(TS,m(f({ref:t,className:Ng("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":""},i),{children:Lt.jsx(Ky,{className:"h-4 w-4"})}))});kS.displayName=TS.displayName;const jS=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(SS,f({ref:t,className:Ng("text-sm font-semibold",r)},i))});jS.displayName=SS.displayName;const _S=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(CS,f({ref:t,className:Ng("text-sm opacity-90",r)},i))});_S.displayName=CS.displayName;const AS=()=>{const{toasts:e}=nv();return Lt.jsxs(NS,{children:[e.map(function(e){var t=e,{id:n,title:r,description:i,action:s}=t,o=v(t,["id","title","description","action"]);return Lt.jsxs(IS,m(f({},o),{children:[Lt.jsxs("div",{className:"grid gap-1",children:[r&&Lt.jsx(jS,{children:r}),i&&Lt.jsx(_S,{children:i})]}),s,Lt.jsx(kS,{})]}),n)}),Lt.jsx(PS,{})]})};let OS=class extends Pt.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return console.error(" ErrorBoundary caught an error:",e),{hasError:!0,error:e}}componentDidCatch(e,t){console.error(" ErrorBoundary error details:",{error:e.message,stack:e.stack,componentStack:t.componentStack})}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:Lt.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-b from-red-50 to-red-100 p-4",children:Lt.jsxs("div",{className:"text-center max-w-md",children:[Lt.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),Lt.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:""}),Lt.jsx("p",{className:"text-red-600 mb-6",children:""}),Lt.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:Lt.jsx("p",{className:"text-sm text-red-700 font-mono",children:(null==(e=this.state.error)?void 0:e.message)||"Unknown error"})}),Lt.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:""})]})}):this.props.children}};function DS(){const e=Ff();return Pt.useEffect(()=>{console.log(" :",{pathname:e.pathname,search:e.search,hash:e.hash,state:e.state,timestamp:(new Date).toISOString()})},[e]),null}console.info("API BASE =","/api");const MS=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>LL),void 0)),LS=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>GW),void 0)),zS=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>P$),void 0)),FS=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>O$),void 0)),BS=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>pV),void 0)),US=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>GV),void 0)),WS=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>n3),void 0)),$S=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>q5),void 0)),HS=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>iie),void 0)),VS=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>hie),void 0)),qS=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>fie),void 0)),GS=Pt.lazy(()=>nf(()=>Promise.resolve().then(()=>mie),void 0));function KS(){const[e,t]=Pt.useState("checking"),[n,r]=Pt.useState(null);return Pt.useEffect(()=>{(()=>{T(this,null,function*(){console.log(" APIUI"),t("connected")})})()},[]),"checking"===e?Lt.jsx("div",{className:"flex justify-center items-center h-screen",children:Lt.jsxs("div",{className:"text-center",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),Lt.jsx("p",{className:"text-gray-600",children:"API..."})]})}):"failed"===e?(console.warn(" API:",n),Lt.jsx("div",{className:"fixed top-4 right-4 z-50 bg-yellow-50 border border-yellow-200 rounded-lg p-3 max-w-sm",children:Lt.jsxs("div",{className:"flex items-center",children:[Lt.jsx("div",{className:"text-yellow-600 text-lg mr-2",children:""}),Lt.jsxs("div",{children:[Lt.jsx("p",{className:"text-yellow-800 font-medium text-sm",children:"API"}),Lt.jsx("p",{className:"text-yellow-600 text-xs",children:n})]})]})})):null}function JS(){console.log(" RootRedirect - ");const{user:e,isLoading:t}=Km();return console.log(" RootRedirect - :",{isLoading:t,hasUser:!!e,username:null==e?void 0:e.username}),t?Lt.jsx("div",{className:"flex justify-center items-center h-screen",children:Lt.jsxs("div",{className:"text-center",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),Lt.jsx("p",{className:"text-gray-600",children:"..."})]})}):Lt.jsx(Xf,{to:e?"/chat":"/login",replace:!0})}function YS(){return Lt.jsxs("div",{className:"flex flex-col h-screen",children:[Lt.jsx(ZS,{}),Lt.jsx(KS,{}),Lt.jsx(_w,{}),Lt.jsxs("main",{className:"flex-1 overflow-auto",children:[Lt.jsx(QS,{}),Lt.jsx(Pt.Suspense,{fallback:Lt.jsx("div",{className:"flex justify-center items-center h-full",children:Lt.jsxs("div",{className:"text-center",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),Lt.jsx("p",{className:"text-gray-600",children:"..."})]})}),children:Lt.jsxs(nm,{children:[Lt.jsx(em,{path:"/login",element:Lt.jsx(MS,{})}),Lt.jsx(em,{path:"/chat",element:Lt.jsx(dv,{children:Lt.jsx(LS,{})})}),Lt.jsx(em,{path:"/settings",element:Lt.jsx(dv,{children:Lt.jsx(zS,{})})}),Lt.jsx(em,{path:"/system-diagnostic",element:Lt.jsx(dv,{children:Lt.jsx(FS,{})})}),Lt.jsx(em,{path:"/history",element:Lt.jsx(dv,{children:Lt.jsx(BS,{})})}),Lt.jsx(em,{path:"/documents",element:Lt.jsx(dv,{children:Lt.jsx(US,{})})}),Lt.jsx(em,{path:"/troubleshooting",element:Lt.jsx(dv,{children:Lt.jsx(WS,{})})}),Lt.jsx(em,{path:"/emergency-guide",element:Lt.jsx(dv,{children:Lt.jsx($S,{})})}),Lt.jsx(em,{path:"/users",element:Lt.jsx(pv,{children:Lt.jsx(HS,{})})}),Lt.jsx(em,{path:"/base-data",element:Lt.jsx(pv,{children:Lt.jsx(VS,{})})}),Lt.jsx(em,{path:"/machine-management",element:Lt.jsx(pv,{children:Lt.jsx(qS,{})})}),Lt.jsx(em,{path:"/not-found",element:Lt.jsx(GS,{})}),Lt.jsx(em,{path:"/",element:Lt.jsx(JS,{})}),Lt.jsx(em,{path:"*",element:Lt.jsx(Xf,{to:"/not-found",replace:!0})})]})})]}),Lt.jsx(AS,{})]})}function ZS(){const{authMode:e}=Km();return e?Lt.jsx("div",{className:`fixed top-4 right-4 z-50 px-3 py-1 rounded-full border text-sm font-medium ${(e=>{switch(e){case"safe":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"jwt-bypass":return"bg-orange-100 text-orange-800 border-orange-200";case"jwt":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e)}`,children:(e=>{switch(e){case"safe":return"";case"jwt-bypass":return"JWT";case"jwt":return"";default:return e}})(e)}):null}function QS(){const{authMode:e}=Km();return"jwt"===e?null:Lt.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:Lt.jsx("div",{className:"flex",children:Lt.jsx("div",{className:"ml-3",children:Lt.jsxs("p",{className:"text-sm text-yellow-700",children:[Lt.jsx("strong",{children:""}),"safe"===e&&" ","jwt-bypass"===e&&" JWT"]})})})})}function XS(){return console.log(" App.tsx: "),console.log(" App.tsx: :",{VITE_API_BASE_URL:"/api",NODE_ENV:void 0,timestamp:(new Date).toISOString()}),console.log(" App.tsx: "),Lt.jsx(OS,{children:Lt.jsxs(Em,{children:[Lt.jsx(DS,{}),Lt.jsx(Gm,{children:Lt.jsx(uv,{children:Lt.jsx(YS,{})})})]})})}const eC=new qh({defaultOptions:{queries:{retry:!1,refetchOnWindowFocus:!1},mutations:{retry:!1}}});let tC=class extends Rt.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("React Error:",e,t)}render(){return this.state.hasError?Lt.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:Lt.jsxs("div",{className:"text-center",children:[Lt.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Application Error"}),Lt.jsx("p",{className:"text-gray-600 mb-4",children:""}),Lt.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:""})]})}):this.props.children}};function nC(){try{console.log(" ...");const e=document.getElementById("root");if(!e)throw new Error("Root container not found");Vp(e).render(Lt.jsx(Rt.StrictMode,{children:Lt.jsx(tC,{children:Lt.jsx(Jh,{client:eC,children:Lt.jsx(XS,{})})})})),console.log(" ")}catch(e){console.error(" :",e);const t=document.getElementById("root");t&&(t.innerHTML='\n        <div style="\n          min-height: 100vh;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background-color: #f9fafb;\n          font-family: system-ui, -apple-system, sans-serif;\n        ">\n          <div style="text-align: center; padding: 2rem;">\n            <h1 style="color: #dc2626; font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">\n              \n            </h1>\n            <p style="color: #6b7280; margin-bottom: 1rem;">\n              \n            </p>\n            <button \n              onclick="window.location.reload()"\n              style="\n                background-color: #3b82f6;\n                color: white;\n                padding: 0.5rem 1rem;\n                border: none;\n                border-radius: 0.25rem;\n                cursor: pointer;\n                font-size: 0.875rem;\n              "\n              onmouseover="this.style.backgroundColor=\'#2563eb\'"\n              onmouseout="this.style.backgroundColor=\'#3b82f6\'"\n            >\n              \n            </button>\n          </div>\n        </div>\n      ')}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",nC):nC();var rC={},iC={},sC={},oC={},aC={},lC={},cC={},uC={},dC={},pC={};let hC;Object.defineProperty(pC,"__esModule",{value:!0}),pC.default=function(){if(!hC&&(hC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hC))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hC(fC)};const fC=new Uint8Array(16);var mC={},vC={},gC={};Object.defineProperty(gC,"__esModule",{value:!0}),gC.default=void 0,gC.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Object.defineProperty(vC,"__esModule",{value:!0}),vC.default=void 0;var yC,bC=(yC=gC)&&yC.__esModule?yC:{default:yC},xC=function(e){return"string"==typeof e&&bC.default.test(e)};vC.default=xC,Object.defineProperty(mC,"__esModule",{value:!0}),mC.default=void 0,mC.unsafeStringify=CC;var wC=function(e){return e&&e.__esModule?e:{default:e}}(vC);const SC=[];for(let p=0;p<256;++p)SC.push((p+256).toString(16).slice(1));function CC(e,t=0){return SC[e[t+0]]+SC[e[t+1]]+SC[e[t+2]]+SC[e[t+3]]+"-"+SC[e[t+4]]+SC[e[t+5]]+"-"+SC[e[t+6]]+SC[e[t+7]]+"-"+SC[e[t+8]]+SC[e[t+9]]+"-"+SC[e[t+10]]+SC[e[t+11]]+SC[e[t+12]]+SC[e[t+13]]+SC[e[t+14]]+SC[e[t+15]]}var EC=function(e,t=0){const n=CC(e,t);if(!(0,wC.default)(n))throw TypeError("Stringified UUID is invalid");return n};mC.default=EC,Object.defineProperty(dC,"__esModule",{value:!0}),dC.default=void 0;var TC=function(e){return e&&e.__esModule?e:{default:e}}(pC),NC=mC;let PC,RC,IC=0,kC=0;var jC=function(e,t,n){let r=t&&n||0;const i=t||new Array(16);let s=(e=e||{}).node||PC,o=void 0!==e.clockseq?e.clockseq:RC;if(null==s||null==o){const t=e.random||(e.rng||TC.default)();null==s&&(s=PC=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==o&&(o=RC=16383&(t[6]<<8|t[7]))}let a=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:kC+1;const c=a-IC+(l-kC)/1e4;if(c<0&&void 0===e.clockseq&&(o=o+1&16383),(c<0||a>IC)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");IC=a,kC=l,RC=o,a+=122192928e5;const u=(1e4*(268435455&a)+l)%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=255&u;const d=a/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=255&d,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(let p=0;p<6;++p)i[r+p]=s[p];return t||(0,NC.unsafeStringify)(i)};dC.default=jC;var _C={},AC={},OC={};Object.defineProperty(OC,"__esModule",{value:!0}),OC.default=void 0;var DC=function(e){return e&&e.__esModule?e:{default:e}}(vC),MC=function(e){if(!(0,DC.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};OC.default=MC,Object.defineProperty(AC,"__esModule",{value:!0}),AC.URL=AC.DNS=void 0,AC.default=function(e,t,n){function r(e,r,i,s){var o;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,zC.default)(r)),16!==(null===(o=r)||void 0===o?void 0:o.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),a=n(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,i){s=s||0;for(let e=0;e<16;++e)i[s+e]=a[e];return i}return(0,LC.unsafeStringify)(a)}try{r.name=e}catch(yie){}return r.DNS=FC,r.URL=BC,r};var LC=mC,zC=function(e){return e&&e.__esModule?e:{default:e}}(OC);const FC="6ba7b810-9dad-11d1-80b4-00c04fd430c8";AC.DNS=FC;const BC="6ba7b811-9dad-11d1-80b4-00c04fd430c8";AC.URL=BC;var UC={};function WC(e){return 14+(e+64>>>9<<4)+1}function $C(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function HC(e,t,n,r,i,s){return $C((o=$C($C(t,e),$C(r,s)))<<(a=i)|o>>>32-a,n);var o,a}function VC(e,t,n,r,i,s,o){return HC(t&n|~t&r,e,t,i,s,o)}function qC(e,t,n,r,i,s,o){return HC(t&r|n&~r,e,t,i,s,o)}function GC(e,t,n,r,i,s,o){return HC(t^n^r,e,t,i,s,o)}function KC(e,t,n,r,i,s,o){return HC(n^(t|~r),e,t,i,s,o)}Object.defineProperty(UC,"__esModule",{value:!0}),UC.default=void 0;var JC=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let i=0;i<n;i+=8){const n=e[i>>5]>>>i%32&255,s=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[WC(t)-1]=t;let n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const t=n,a=r,l=i,c=s;n=VC(n,r,i,s,e[o],7,-680876936),s=VC(s,n,r,i,e[o+1],12,-389564586),i=VC(i,s,n,r,e[o+2],17,606105819),r=VC(r,i,s,n,e[o+3],22,-1044525330),n=VC(n,r,i,s,e[o+4],7,-176418897),s=VC(s,n,r,i,e[o+5],12,1200080426),i=VC(i,s,n,r,e[o+6],17,-1473231341),r=VC(r,i,s,n,e[o+7],22,-45705983),n=VC(n,r,i,s,e[o+8],7,1770035416),s=VC(s,n,r,i,e[o+9],12,-1958414417),i=VC(i,s,n,r,e[o+10],17,-42063),r=VC(r,i,s,n,e[o+11],22,-1990404162),n=VC(n,r,i,s,e[o+12],7,1804603682),s=VC(s,n,r,i,e[o+13],12,-40341101),i=VC(i,s,n,r,e[o+14],17,-1502002290),r=VC(r,i,s,n,e[o+15],22,1236535329),n=qC(n,r,i,s,e[o+1],5,-165796510),s=qC(s,n,r,i,e[o+6],9,-1069501632),i=qC(i,s,n,r,e[o+11],14,643717713),r=qC(r,i,s,n,e[o],20,-373897302),n=qC(n,r,i,s,e[o+5],5,-701558691),s=qC(s,n,r,i,e[o+10],9,38016083),i=qC(i,s,n,r,e[o+15],14,-660478335),r=qC(r,i,s,n,e[o+4],20,-405537848),n=qC(n,r,i,s,e[o+9],5,568446438),s=qC(s,n,r,i,e[o+14],9,-1019803690),i=qC(i,s,n,r,e[o+3],14,-187363961),r=qC(r,i,s,n,e[o+8],20,1163531501),n=qC(n,r,i,s,e[o+13],5,-1444681467),s=qC(s,n,r,i,e[o+2],9,-51403784),i=qC(i,s,n,r,e[o+7],14,1735328473),r=qC(r,i,s,n,e[o+12],20,-1926607734),n=GC(n,r,i,s,e[o+5],4,-378558),s=GC(s,n,r,i,e[o+8],11,-2022574463),i=GC(i,s,n,r,e[o+11],16,1839030562),r=GC(r,i,s,n,e[o+14],23,-35309556),n=GC(n,r,i,s,e[o+1],4,-1530992060),s=GC(s,n,r,i,e[o+4],11,1272893353),i=GC(i,s,n,r,e[o+7],16,-155497632),r=GC(r,i,s,n,e[o+10],23,-1094730640),n=GC(n,r,i,s,e[o+13],4,681279174),s=GC(s,n,r,i,e[o],11,-358537222),i=GC(i,s,n,r,e[o+3],16,-722521979),r=GC(r,i,s,n,e[o+6],23,76029189),n=GC(n,r,i,s,e[o+9],4,-640364487),s=GC(s,n,r,i,e[o+12],11,-421815835),i=GC(i,s,n,r,e[o+15],16,530742520),r=GC(r,i,s,n,e[o+2],23,-995338651),n=KC(n,r,i,s,e[o],6,-198630844),s=KC(s,n,r,i,e[o+7],10,1126891415),i=KC(i,s,n,r,e[o+14],15,-1416354905),r=KC(r,i,s,n,e[o+5],21,-57434055),n=KC(n,r,i,s,e[o+12],6,1700485571),s=KC(s,n,r,i,e[o+3],10,-1894986606),i=KC(i,s,n,r,e[o+10],15,-1051523),r=KC(r,i,s,n,e[o+1],21,-2054922799),n=KC(n,r,i,s,e[o+8],6,1873313359),s=KC(s,n,r,i,e[o+15],10,-30611744),i=KC(i,s,n,r,e[o+6],15,-1560198380),r=KC(r,i,s,n,e[o+13],21,1309151649),n=KC(n,r,i,s,e[o+4],6,-145523070),s=KC(s,n,r,i,e[o+11],10,-1120210379),i=KC(i,s,n,r,e[o+2],15,718787259),r=KC(r,i,s,n,e[o+9],21,-343485551),n=$C(n,t),r=$C(r,a),i=$C(i,l),s=$C(s,c)}return[n,r,i,s]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(WC(t));for(let r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))};UC.default=JC,Object.defineProperty(_C,"__esModule",{value:!0}),_C.default=void 0;var YC=QC(AC),ZC=QC(UC);function QC(e){return e&&e.__esModule?e:{default:e}}var XC=(0,YC.default)("v3",48,ZC.default);_C.default=XC;var eE={},tE={};Object.defineProperty(tE,"__esModule",{value:!0}),tE.default=void 0;var nE={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};tE.default=nE,Object.defineProperty(eE,"__esModule",{value:!0}),eE.default=void 0;var rE=oE(tE),iE=oE(pC),sE=mC;function oE(e){return e&&e.__esModule?e:{default:e}}var aE=function(e,t,n){if(rE.default.randomUUID&&!t&&!e)return rE.default.randomUUID();const r=(e=e||{}).random||(e.rng||iE.default)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return(0,sE.unsafeStringify)(r)};eE.default=aE;var lE={},cE={};function uE(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function dE(e,t){return e<<t|e>>>32-t}Object.defineProperty(cE,"__esModule",{value:!0}),cE.default=void 0;var pE=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,i=Math.ceil(r/16),s=new Array(i);for(let o=0;o<i;++o){const t=new Uint32Array(16);for(let n=0;n<16;++n)t[n]=e[64*o+4*n]<<24|e[64*o+4*n+1]<<16|e[64*o+4*n+2]<<8|e[64*o+4*n+3];s[o]=t}s[i-1][14]=8*(e.length-1)/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=8*(e.length-1)&4294967295;for(let o=0;o<i;++o){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=s[o][t];for(let t=16;t<80;++t)e[t]=dE(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let r=n[0],i=n[1],a=n[2],l=n[3],c=n[4];for(let n=0;n<80;++n){const s=Math.floor(n/20),o=dE(r,5)+uE(s,i,a,l)+c+t[s]+e[n]>>>0;c=l,l=a,a=dE(i,30)>>>0,i=r,r=o}n[0]=n[0]+r>>>0,n[1]=n[1]+i>>>0,n[2]=n[2]+a>>>0,n[3]=n[3]+l>>>0,n[4]=n[4]+c>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};cE.default=pE,Object.defineProperty(lE,"__esModule",{value:!0}),lE.default=void 0;var hE=mE(AC),fE=mE(cE);function mE(e){return e&&e.__esModule?e:{default:e}}var vE=(0,hE.default)("v5",80,fE.default);lE.default=vE;var gE={};Object.defineProperty(gE,"__esModule",{value:!0}),gE.default=void 0,gE.default="00000000-0000-0000-0000-000000000000";var yE={};Object.defineProperty(yE,"__esModule",{value:!0}),yE.default=void 0;var bE=function(e){return e&&e.__esModule?e:{default:e}}(vC),xE=function(e){if(!(0,bE.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};yE.default=xE,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return o.default}});var t=u(dC),n=u(_C),r=u(eE),i=u(lE),s=u(gE),o=u(yE),a=u(vC),l=u(mC),c=u(OC);function u(e){return e&&e.__esModule?e:{default:e}}}(uC),Object.defineProperty(cC,"__esModule",{value:!0}),cC.createNoDashGuid=cC.createGuid=void 0;const wE=uC,SE=()=>(0,wE.v4)();cC.createGuid=SE,cC.createNoDashGuid=()=>SE().replace(new RegExp("-","g"),"").toUpperCase(),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformEvent=e.EventType=void 0;const t=cC;var n;(n=e.EventType||(e.EventType={}))[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.None=4]="None",e.PlatformEvent=class{constructor(e,n){this.privName=e,this.privEventId=(0,t.createNoDashGuid)(),this.privEventTime=(new Date).toISOString(),this.privEventType=n,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}}(lC),Object.defineProperty(aC,"__esModule",{value:!0}),aC.AudioStreamNodeErrorEvent=aC.AudioStreamNodeDetachedEvent=aC.AudioStreamNodeAttachedEvent=aC.AudioStreamNodeAttachingEvent=aC.AudioStreamNodeEvent=aC.AudioSourceErrorEvent=aC.AudioSourceOffEvent=aC.AudioSourceReadyEvent=aC.AudioSourceInitializingEvent=aC.AudioSourceEvent=void 0;const CE=lC;class EE extends CE.PlatformEvent{constructor(e,t,n=CE.EventType.Info){super(e,n),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}aC.AudioSourceEvent=EE,aC.AudioSourceInitializingEvent=class extends EE{constructor(e){super("AudioSourceInitializingEvent",e)}},aC.AudioSourceReadyEvent=class extends EE{constructor(e){super("AudioSourceReadyEvent",e)}},aC.AudioSourceOffEvent=class extends EE{constructor(e){super("AudioSourceOffEvent",e)}},aC.AudioSourceErrorEvent=class extends EE{constructor(e,t){super("AudioSourceErrorEvent",e,CE.EventType.Error),this.privError=t}get error(){return this.privError}};class TE extends EE{constructor(e,t,n){super(e,t),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}aC.AudioStreamNodeEvent=TE,aC.AudioStreamNodeAttachingEvent=class extends TE{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}},aC.AudioStreamNodeAttachedEvent=class extends TE{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}},aC.AudioStreamNodeDetachedEvent=class extends TE{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}},aC.AudioStreamNodeErrorEvent=class extends TE{constructor(e,t,n){super("AudioStreamNodeErrorEvent",e,t),this.privError=n}get error(){return this.privError}};var NE={};Object.defineProperty(NE,"__esModule",{value:!0}),NE.ConnectionRedirectEvent=NE.ConnectionMessageSentEvent=NE.ConnectionMessageReceivedEvent=NE.ConnectionEstablishErrorEvent=NE.ConnectionErrorEvent=NE.ConnectionClosedEvent=NE.ConnectionEstablishedEvent=NE.ConnectionStartEvent=NE.ConnectionEvent=NE.ServiceEvent=void 0;const PE=lC;NE.ServiceEvent=class extends PE.PlatformEvent{constructor(e,t,n=PE.EventType.Info){super(e,n),this.privJsonResult=t}get jsonString(){return this.privJsonResult}};class RE extends PE.PlatformEvent{constructor(e,t,n=PE.EventType.Info){super(e,n),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}NE.ConnectionEvent=RE,NE.ConnectionStartEvent=class extends RE{constructor(e,t,n){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}},NE.ConnectionEstablishedEvent=class extends RE{constructor(e){super("ConnectionEstablishedEvent",e)}},NE.ConnectionClosedEvent=class extends RE{constructor(e,t,n){super("ConnectionClosedEvent",e,PE.EventType.Debug),this.privReason=n,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}},NE.ConnectionErrorEvent=class extends RE{constructor(e,t,n){super("ConnectionErrorEvent",e,PE.EventType.Debug),this.privMessage=t,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}},NE.ConnectionEstablishErrorEvent=class extends RE{constructor(e,t,n){super("ConnectionEstablishErrorEvent",e,PE.EventType.Error),this.privStatusCode=t,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}},NE.ConnectionMessageReceivedEvent=class extends RE{constructor(e,t,n){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}},NE.ConnectionMessageSentEvent=class extends RE{constructor(e,t,n){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}},NE.ConnectionRedirectEvent=class extends RE{constructor(e,t,n,r){super("ConnectionRedirectEvent",e,PE.EventType.Info),this.privRedirectUrl=t,this.privOriginalUrl=n,this.privContext=r}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}};var IE={},kE={};Object.defineProperty(kE,"__esModule",{value:!0}),kE.ObjectDisposedError=kE.InvalidOperationError=kE.ArgumentNullError=void 0;class jE extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}kE.ArgumentNullError=jE;class _E extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}kE.InvalidOperationError=_E;class AE extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}kE.ObjectDisposedError=AE,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionMessage=e.MessageType=void 0;const t=kE,n=cC;var r,i;(i=r=e.MessageType||(e.MessageType={}))[i.Text=0]="Text",i[i.Binary=1]="Binary",e.ConnectionMessage=class{constructor(e,i,s,o){if(this.privBody=null,e===r.Text&&i&&"string"!=typeof i)throw new t.InvalidOperationError("Payload must be a string");if(e===r.Binary&&i&&!(i instanceof ArrayBuffer))throw new t.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=i,this.privHeaders=s||{},this.privId=o||(0,n.createNoDashGuid)(),this.messageType){case r.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===r.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===r.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}}(IE);var OE={};Object.defineProperty(OE,"__esModule",{value:!0}),OE.ConnectionOpenResponse=void 0,OE.ConnectionOpenResponse=class{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};var DE={};Object.defineProperty(DE,"__esModule",{value:!0}),DE.DeferralMap=void 0,DE.DeferralMap=class{constructor(){this.privMap={}}add(e,t){this.privMap[e]=t}getId(e){return this.privMap[e]}complete(e,t){try{this.privMap[e].resolve(t)}catch(n){this.privMap[e].reject(n)}finally{this.privMap[e]=void 0}}};var ME={};Object.defineProperty(ME,"__esModule",{value:!0}),ME.SendingAgentContextMessageEvent=ME.DialogEvent=void 0;const LE=lC;class zE extends LE.PlatformEvent{constructor(e,t=LE.EventType.Info){super(e,t)}}ME.DialogEvent=zE,ME.SendingAgentContextMessageEvent=class extends zE{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}};var FE={},BE={};Object.defineProperty(BE,"__esModule",{value:!0}),BE.EventSource=void 0;const UE=kE,WE=cC;BE.EventSource=class{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new UE.ObjectDisposedError("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){const t=(0,WE.createNoDashGuid)();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach(t=>e.onEvent(t))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(t=>e.onEvent(t)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}},Object.defineProperty(FE,"__esModule",{value:!0}),FE.Events=void 0;const $E=kE,HE=BE;class VE{static setEventSource(e){if(!e)throw new $E.ArgumentNullError("eventSource");VE.privInstance=e}static get instance(){return VE.privInstance}}FE.Events=VE,VE.privInstance=new HE.EventSource;var qE={};Object.defineProperty(qE,"__esModule",{value:!0});var GE,KE,JE={};GE=JE,Object.defineProperty(GE,"__esModule",{value:!0}),GE.ConnectionState=void 0,(KE=GE.ConnectionState||(GE.ConnectionState={}))[KE.None=0]="None",KE[KE.Connected=1]="Connected",KE[KE.Connecting=2]="Connecting",KE[KE.Disconnected=3]="Disconnected";var YE={};Object.defineProperty(YE,"__esModule",{value:!0});var ZE={};Object.defineProperty(ZE,"__esModule",{value:!0});var QE={};Object.defineProperty(QE,"__esModule",{value:!0});var XE={};Object.defineProperty(XE,"__esModule",{value:!0});var eT={};Object.defineProperty(eT,"__esModule",{value:!0});var tT={};Object.defineProperty(tT,"__esModule",{value:!0});var nT={};Object.defineProperty(nT,"__esModule",{value:!0});var rT={};Object.defineProperty(rT,"__esModule",{value:!0});var iT={};Object.defineProperty(iT,"__esModule",{value:!0}),iT.List=void 0;const sT=kE;iT.List=class e{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();const n=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(t=>{e.push(t)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(t){this.throwIfDisposed();const n=[];for(let e=0;e<this.privList.length;e++)n.push(t(this.privList[e],e));return new e(n)}where(t){this.throwIfDisposed();const n=new e;for(let e=0;e<this.privList.length;e++)t(this.privList[e],e)&&n.add(this.privList[e]);return n}orderBy(t){this.throwIfDisposed();const n=this.toArray().sort(t);return new e(n)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((t,n)=>e(n,t))}clone(){return this.throwIfDisposed(),new e(this.toArray())}concat(t){return this.throwIfDisposed(),new e(this.privList.concat(t.toArray()))}concatArray(t){return this.throwIfDisposed(),new e(this.privList.concat(t))}isDisposed(){return null==this.privList}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new sT.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const t in e)t&&e[t]()}};var oT={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.marshalPromiseToCallbacks=e.Sink=e.Deferred=e.PromiseResultEventSource=e.PromiseResult=e.PromiseState=void 0,(n=t=e.PromiseState||(e.PromiseState={}))[n.None=0]="None",n[n.Resolved=1]="Resolved",n[n.Rejected=2]="Rejected";class r{constructor(e){this.throwIfError=()=>{if(this.isError)throw this.error},e.on(e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=e)},e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=e)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}e.PromiseResult=r;class i{constructor(){this.setResult=e=>{this.privOnSetResult(e)},this.setError=e=>{this.privOnSetError(e)},this.on=(e,t)=>{this.privOnSetResult=e,this.privOnSetError=t}}}e.PromiseResultEventSource=i,e.Deferred=class{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise((e,t)=>{this.privResolve=e,this.privReject=t})}get promise(){return this.privPromise}},e.Sink=class{constructor(){this.privState=t.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new i,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(e){if(this.privState!==t.None)throw new Error("'Cannot resolve a completed promise'");this.privState=t.Resolved,this.privPromiseResultEvents.setResult(e);for(let t=0;t<this.privSuccessHandlers.length;t++)this.executeSuccessCallback(e,this.privSuccessHandlers[t],this.privErrorHandlers[t]);this.detachHandlers()}reject(e){if(this.privState!==t.None)throw new Error("'Cannot reject a completed promise'");this.privState=t.Rejected,this.privPromiseResultEvents.setError(e);for(const t of this.privErrorHandlers)this.executeErrorCallback(e,t);this.detachHandlers()}on(e,n){null==e&&(e=()=>{}),this.privState===t.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(n)):(this.privState===t.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,n):this.privState===t.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,n),this.detachHandlers())}executeSuccessCallback(e,t,n){try{t(e)}catch(gie){this.executeErrorCallback(`'Unhandled callback error: ${gie}'`,n)}}executeErrorCallback(e,t){if(!t)throw new Error(`'Unhandled error: ${e}'`);try{t(e)}catch(gie){throw new Error(`'Unhandled callback error: ${gie}. InnerError: ${e}'`)}}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}},e.marshalPromiseToCallbacks=function(e,t,n){e.then(e=>{try{t&&t(e)}catch(r){if(n)try{if(r instanceof Error){const e=r;n(e.name+": "+e.message)}else n(r)}catch(i){}}},e=>{if(n)try{if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e)}catch(t){}})}}(oT);var aT={};Object.defineProperty(aT,"__esModule",{value:!0}),aT.Queue=void 0;const lT=kE,cT=iT,uT=oT;var dT,pT;(pT=dT||(dT={}))[pT.Dequeue=0]="Dequeue",pT[pT.Peek=1]="Peek",aT.Queue=class{constructor(e){this.privPromiseStore=new cT.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new cT.List,this.privDetachables=[],this.privSubscribers=new cT.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(t=>t(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(e=>{this.privList.add(e)},()=>{})}dequeue(){this.throwIfDispose();const e=new uT.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:dT.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new uT.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:dT.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}drainAndDispose(e,t){return T(this,null,function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;)n.removeFirst().deferral.resolve(void 0);this.privSubscribers===n&&(this.privSubscribers=n)}for(const e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach(e=>{t.push(e)}),Promise.all(t).finally(()=>{this.privSubscribers=null,this.privList.forEach(t=>{e(t)}),this.privList=null}).then()}this.privSubscribers=null,this.privList=null}})}dispose(e){return T(this,null,function*(){yield this.drainAndDispose(null,e)})}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const n=e.removeFirst();if(n.type===dT.Peek)n.deferral.resolve(t.first());else{const e=t.removeFirst();n.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new lT.InvalidOperationError(this.privDisposeReason);throw new lT.ObjectDisposedError("Queue")}if(this.privIsDisposing)throw new lT.InvalidOperationError("Queue disposing")}};var hT={};Object.defineProperty(hT,"__esModule",{value:!0}),hT.RawWebsocketMessage=void 0;const fT=IE,mT=kE,vT=cC;hT.RawWebsocketMessage=class{constructor(e,t,n){if(this.privPayload=null,!t)throw new mT.ArgumentNullError("payload");if(e===fT.MessageType.Binary&&"ArrayBuffer"!==Object.getPrototypeOf(t).constructor.name)throw new mT.InvalidOperationError("Payload must be ArrayBuffer");if(e===fT.MessageType.Text&&"string"!=typeof t)throw new mT.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=n||(0,vT.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===fT.MessageType.Binary)throw new mT.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===fT.MessageType.Text)throw new mT.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};var gT={};Object.defineProperty(gT,"__esModule",{value:!0}),gT.RiffPcmEncoder=void 0,gT.RiffPcmEncoder=class{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const n=2*t.length,r=new ArrayBuffer(n),i=new DataView(r);return this.floatTo16BitPCM(i,0,t),r}setString(e,t,n){for(let r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}floatTo16BitPCM(e,t,n){for(let r=0;r<n.length;r++,t+=2){const i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?32768*i:32767*i,!0)}}downSampleAudioFrame(e,t,n){if(!e)return null;if(n===t||n>t)return e;const r=t/n,i=Math.round(e.length/r),s=new Float32Array(i);let o=0,a=0;for(;a<i;){const t=Math.round((a+1)*r);let n=0,i=0;for(;o<t&&o<e.length;)n+=e[o++],i++;s[a++]=n/i}return s}};var yT={};Object.defineProperty(yT,"__esModule",{value:!0}),yT.Stream=void 0;const bT=kE,xT=cC,wT=aT;yT.Stream=class{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||(0,xT.createNoDashGuid)(),this.privReaderQueue=new wT.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(gie){}}read(){if(this.privIsReadEnded)throw new bT.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(e=>T(this,null,function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e}))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new wT.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new bT.InvalidOperationError("Stream closed")}};var ST={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,(t=e.TranslationStatus||(e.TranslationStatus={}))[t.Success=0]="Success",t[t.Error=1]="Error"}(ST);var CT,ET={},TT={};Object.defineProperty(TT,"__esModule",{value:!0});var NT={};Object.defineProperty(NT,"__esModule",{value:!0}),NT.Timeout=void 0;class PT{static load(){const e=new Map([[0,()=>{}]]),t=new Map,n="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),r=new Worker(n);return r.addEventListener("message",({data:n})=>{if(PT.isCallNotification(n)){const{params:{timerId:r}}=n,i=e.get(r);if("number"==typeof i){const e=t.get(i);if(void 0===e||e!==r)throw new Error("The timer is in an undefined state.")}else{if(void 0===i)throw new Error("The timer is in an undefined state.");i(),e.delete(r)}}else{if(!PT.isClearResponse(n)){const{error:{message:e}}=n;throw new Error(e)}{const{id:r}=n,i=t.get(r);if(void 0===i)throw new Error("The timer is in an undefined state.");t.delete(r),e.delete(i)}}}),{clearTimeout:n=>{const i=Math.random();t.set(i,n),e.set(n,i),r.postMessage({id:i,method:"clear",params:{timerId:n}})},setTimeout:(t,n)=>{const i=Math.random();return e.set(i,t),r.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:i}}),i}}}static loadWorkerTimers(){return()=>(null!==PT.workerTimers||(PT.workerTimers=PT.load()),PT.workerTimers)}static isCallNotification(e){return void 0!==e.method&&"call"===e.method}static isClearResponse(e){return null===e.error&&"number"==typeof e.id}}NT.Timeout=PT,PT.workerTimers=null,PT.clearTimeout=e=>PT.timers().clearTimeout(e),PT.setTimeout=(e,t)=>PT.timers().setTimeout(e,t),PT.timers=PT.loadWorkerTimers();var RT={};Object.defineProperty(RT,"__esModule",{value:!0}),RT.OCSPCacheUpdateErrorEvent=RT.OCSPResponseRetrievedEvent=RT.OCSPCacheFetchErrorEvent=RT.OCSPVerificationFailedEvent=RT.OCSPCacheHitEvent=RT.OCSPCacheEntryNeedsRefreshEvent=RT.OCSPCacheEntryExpiredEvent=RT.OCSPWSUpgradeStartedEvent=RT.OCSPStapleReceivedEvent=RT.OCSPCacheUpdateCompleteEvent=RT.OCSPDiskCacheStoreEvent=RT.OCSPMemoryCacheStoreEvent=RT.OCSPCacheUpdateNeededEvent=RT.OCSPDiskCacheHitEvent=RT.OCSPCacheMissEvent=RT.OCSPMemoryCacheHitEvent=RT.OCSPEvent=void 0;const IT=lC;class kT extends IT.PlatformEvent{constructor(e,t,n){super(e,t),this.privSignature=n}}RT.OCSPEvent=kT,RT.OCSPMemoryCacheHitEvent=class extends kT{constructor(e){super("OCSPMemoryCacheHitEvent",IT.EventType.Debug,e)}},RT.OCSPCacheMissEvent=class extends kT{constructor(e){super("OCSPCacheMissEvent",IT.EventType.Debug,e)}},RT.OCSPDiskCacheHitEvent=class extends kT{constructor(e){super("OCSPDiskCacheHitEvent",IT.EventType.Debug,e)}},RT.OCSPCacheUpdateNeededEvent=class extends kT{constructor(e){super("OCSPCacheUpdateNeededEvent",IT.EventType.Debug,e)}},RT.OCSPMemoryCacheStoreEvent=class extends kT{constructor(e){super("OCSPMemoryCacheStoreEvent",IT.EventType.Debug,e)}},RT.OCSPDiskCacheStoreEvent=class extends kT{constructor(e){super("OCSPDiskCacheStoreEvent",IT.EventType.Debug,e)}},RT.OCSPCacheUpdateCompleteEvent=class extends kT{constructor(e){super("OCSPCacheUpdateCompleteEvent",IT.EventType.Debug,e)}},RT.OCSPStapleReceivedEvent=class extends kT{constructor(){super("OCSPStapleReceivedEvent",IT.EventType.Debug,"")}},RT.OCSPWSUpgradeStartedEvent=class extends kT{constructor(e){super("OCSPWSUpgradeStartedEvent",IT.EventType.Debug,e)}},RT.OCSPCacheEntryExpiredEvent=class extends kT{constructor(e,t){super("OCSPCacheEntryExpiredEvent",IT.EventType.Debug,e),this.privExpireTime=t}},RT.OCSPCacheEntryNeedsRefreshEvent=class extends kT{constructor(e,t,n){super("OCSPCacheEntryNeedsRefreshEvent",IT.EventType.Debug,e),this.privExpireTime=n,this.privStartTime=t}},RT.OCSPCacheHitEvent=class extends kT{constructor(e,t,n){super("OCSPCacheHitEvent",IT.EventType.Debug,e),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}},RT.OCSPVerificationFailedEvent=class extends kT{constructor(e,t){super("OCSPVerificationFailedEvent",IT.EventType.Debug,e),this.privError=t}},RT.OCSPCacheFetchErrorEvent=class extends kT{constructor(e,t){super("OCSPCacheFetchErrorEvent",IT.EventType.Debug,e),this.privError=t}},RT.OCSPResponseRetrievedEvent=class extends kT{constructor(e){super("OCSPResponseRetrievedEvent",IT.EventType.Debug,e)}},RT.OCSPCacheUpdateErrorEvent=class extends kT{constructor(e,t){super("OCSPCacheUpdateErrorEvent",IT.EventType.Debug,e),this.privError=t}};var jT,_T,AT={};function OT(){return _T||(_T=1,function(e){var t=Be&&Be.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Be&&Be.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,n(aC,e),n(NE,e),n(IE,e),n(OE,e),n(DE,e),n(ME,e),n(kE,e),n(FE,e),n(BE,e),n(cC,e),n(qE,e),n(JE,e),n(YE,e),n(ZE,e),n(QE,e),n(XE,e),n(eT,e),n(tT,e),n(nT,e),n(rT,e),n(iT,e),n(lC,e),n(oT,e),n(aT,e),n(hT,e),n(gT,e),n(yT,e);var r=ST;Object.defineProperty(e,"TranslationStatus",{enumerable:!0,get:function(){return r.TranslationStatus}}),n(function(){if(CT)return ET;CT=1,Object.defineProperty(ET,"__esModule",{value:!0}),ET.ChunkedArrayBufferStream=void 0;const e=OT();let t=class extends e.Stream{constructor(e,t){super(t),this.privTargetChunkSize=Math.round(e),this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const n=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),r=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(e.buffer.slice(t,n+t));r.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=n,t+=n,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return ET.ChunkedArrayBufferStream=t,ET}(),e),n(TT,e),n(NT,e),n(RT,e),n(function(){if(jT)return AT;jT=1,Object.defineProperty(AT,"__esModule",{value:!0}),AT.BackgroundEvent=void 0;const e=OT();class t extends e.PlatformEvent{constructor(t){super("BackgroundEvent",e.EventType.Error),this.privError=t}get error(){return this.privError}}return AT.BackgroundEvent=t,AT}(),e)}(oC)),oC}var DT={};Object.defineProperty(DT,"__esModule",{value:!0}),DT.HeaderNames=void 0;class MT{}DT.HeaderNames=MT,MT.AuthKey="Ocp-Apim-Subscription-Key",MT.Authorization="Authorization",MT.SpIDAuthKey="Apim-Subscription-Id",MT.ConnectionId="X-ConnectionId",MT.ContentType="Content-Type",MT.CustomCommandsAppId="X-CommandsAppId",MT.Path="Path",MT.RequestId="X-RequestId",MT.RequestStreamId="X-StreamId",MT.RequestTimestamp="X-Timestamp";var LT={};Object.defineProperty(LT,"__esModule",{value:!0}),LT.AuthInfo=void 0,LT.AuthInfo=class{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}},Object.defineProperty(sC,"__esModule",{value:!0}),sC.CognitiveSubscriptionKeyAuthentication=void 0;const zT=OT(),FT=DT,BT=LT;sC.CognitiveSubscriptionKeyAuthentication=class{constructor(e){if(!e)throw new zT.ArgumentNullError("subscriptionKey");this.privAuthInfo=new BT.AuthInfo(FT.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}};var UT={};Object.defineProperty(UT,"__esModule",{value:!0}),UT.CognitiveTokenAuthentication=void 0;const WT=OT(),$T=LT,HT=DT;class VT{constructor(e,t){if(!e)throw new WT.ArgumentNullError("fetchCallback");if(!t)throw new WT.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(e){return this.privFetchCallback(e).then(e=>new $T.AuthInfo(HT.HeaderNames.Authorization,void 0===e?void 0:VT.privTokenPrefix+e))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(e=>new $T.AuthInfo(HT.HeaderNames.Authorization,void 0===e?void 0:VT.privTokenPrefix+e))}}UT.CognitiveTokenAuthentication=VT,VT.privTokenPrefix="Bearer ";var qT={};Object.defineProperty(qT,"__esModule",{value:!0});var GT={};Object.defineProperty(GT,"__esModule",{value:!0});var KT={},JT={},YT={};const ZT=We(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var QT={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;const t=OT();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.EventType}})}(QT);var XT={};Object.defineProperty(XT,"__esModule",{value:!0}),XT.Contracts=void 0;class eN{static throwIfNullOrUndefined(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(eN.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfNullOrTooLong(e,t,n){if(eN.throwIfNullOrUndefined(e,t),(""+e).length>n)throw new Error("throwIfNullOrTooLong:"+t+" (more than "+n.toString()+" characters)")}static throwIfNullOrTooShort(e,t,n){if(eN.throwIfNullOrUndefined(e,t),(""+e).length<n)throw new Error("throwIfNullOrTooShort:"+t+" (less than "+n.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(eN.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const n of e)eN.throwIfNullOrWhitespace(n,t)}static throwIfFileDoesNotExist(e,t){eN.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}static throwIfNumberOutOfRange(e,t,n,r){if(eN.throwIfNullOrUndefined(e,t),e<n||e>r)throw new Error("throwIfNumberOutOfRange:"+t+" (must be between "+n.toString()+" and "+r.toString()+")")}}XT.Contracts=eN;var tN=Be&&Be.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),nN=Be&&Be.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),rN=Be&&Be.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&tN(t,e,n);return nN(t,e),t};Object.defineProperty(YT,"__esModule",{value:!0}),YT.ConsoleLoggingListener=void 0;const iN=rN(ZT),sN=QT,oN=XT;YT.ConsoleLoggingListener=class{constructor(e=sN.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){oN.Contracts.throwIfNullOrUndefined(iN.openSync,"\nFile System access not available"),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const t=this.toString(e);if(this.logCallback&&this.logCallback(t),this.privLogPath&&iN.writeFileSync(this.privLogPath,t+"\n",{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case sN.LogLevel.Debug:console.debug(t);break;case sN.LogLevel.Info:console.info(t);break;case sN.LogLevel.Warning:console.warn(t);break;case sN.LogLevel.Error:console.error(t);break;default:console.log(t)}}}toString(e){const t=[`${e.eventTime}`,`${e.name}`],n=e;for(const r in n)if(r&&e.hasOwnProperty(r)&&"eventTime"!==r&&"eventType"!==r&&"eventId"!==r&&"name"!==r&&"constructor"!==r){const e=n[r];let i="<NULL>";null!=e&&(i="number"==typeof e||"string"==typeof e?e.toString():JSON.stringify(e)),t.push(`${r}: ${i}`)}return t.join(" | ")}};var aN={};Object.defineProperty(aN,"__esModule",{value:!0});var lN,cN={},uN={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.AudioStreamFormatImpl=e.AudioStreamFormat=e.AudioFormatTag=void 0,(n=t=e.AudioFormatTag||(e.AudioFormatTag={}))[n.PCM=1]="PCM",n[n.MuLaw=2]="MuLaw",n[n.Siren=3]="Siren",n[n.MP3=4]="MP3",n[n.SILKSkype=5]="SILKSkype",n[n.OGG_OPUS=6]="OGG_OPUS",n[n.WEBM_OPUS=7]="WEBM_OPUS",n[n.ALaw=8]="ALaw",n[n.FLAC=9]="FLAC",n[n.OPUS=10]="OPUS",n[n.AMR_WB=11]="AMR_WB",n[n.G722=12]="G722";class r{static getDefaultInputFormat(){return i.getDefaultInputFormat()}static getWaveFormat(e,t,n,r){return new i(e,t,n,r)}static getWaveFormatPCM(e,t,n){return new i(e,t,n)}}e.AudioStreamFormat=r;class i extends r{constructor(e=16e3,n=16,r=1,i=t.PCM){super();let s=!0;switch(i){case t.PCM:this.formatTag=1;break;case t.ALaw:this.formatTag=6;break;case t.MuLaw:this.formatTag=7;break;default:s=!1}if(this.bitsPerSample=n,this.samplesPerSec=e,this.channels=r,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),s){this.privHeader=new ArrayBuffer(44);const e=new DataView(this.privHeader);this.setString(e,0,"RIFF"),e.setUint32(4,0,!0),this.setString(e,8,"WAVEfmt "),e.setUint32(16,16,!0),e.setUint16(20,this.formatTag,!0),e.setUint16(22,this.channels,!0),e.setUint32(24,this.samplesPerSec,!0),e.setUint32(28,this.avgBytesPerSec,!0),e.setUint16(32,this.channels*(this.bitsPerSample/8),!0),e.setUint16(34,this.bitsPerSample,!0),this.setString(e,36,"data"),e.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new i}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,t,n){for(let r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}}e.AudioStreamFormatImpl=i}(uN);var dN,pN={},hN={};Object.defineProperty(hN,"__esModule",{value:!0}),hN.PcmRecorder=void 0;const fN=OT();hN.PcmRecorder=class{constructor(e){this.privStopInputOnRelease=e}record(e,t,n){const r=new fN.RiffPcmEncoder(e.sampleRate,16e3),i=e.createMediaStreamSource(t),s=()=>{const s=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(n){t=2048;let r=e.sampleRate;for(;t<16384&&r>=32e3;)t<<=1,r>>=1;return e.createScriptProcessor(t,1,1)}})();s.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const e=r.encode(t);e&&n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},i.connect(s),s.connect(e.destination),this.privMediaResources={scriptProcessorNode:s,source:i,stream:t}},o=!!this.privSpeechProcessorScript&&"ignore"===this.privSpeechProcessorScript.toLowerCase();if(e.audioWorklet&&!o){if(!this.privSpeechProcessorScript){const e=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(e)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const s=new AudioWorkletNode(e,"speech-processor");s.port.onmessage=e=>{const t=e.data;if(n&&!n.isClosed){const e=r.encode(t);e&&n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},i.connect(s),s.connect(e.destination),this.privMediaResources={scriptProcessorNode:s,source:i,stream:t}}).catch(()=>{s()})}else try{s()}catch(yie){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${yie}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(e=>e.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}};var mN={},vN={},gN=Be&&Be.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),yN=Be&&Be.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),bN=Be&&Be.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&gN(t,e,n);return yN(t,e),t},xN=Be&&Be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vN,"__esModule",{value:!0}),vN.WebsocketMessageAdapter=void 0;const wN=bN(ZT),SN=bN(ZT),CN=xN(ZT),EN=xN(ZT),TN=xN(ZT),NN=DT,PN=OT();class RN{constructor(e,t,n,r,i,s){if(!e)throw new PN.ArgumentNullError("uri");if(!n)throw new PN.ArgumentNullError("messageFormatter");this.proxyInfo=r,this.privConnectionEvents=new PN.EventSource,this.privConnectionId=t,this.privMessageFormatter=n,this.privConnectionState=PN.ConnectionState.None,this.privUri=e,this.privHeaders=i,this.privEnableCompression=s,this.privHeaders[NN.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===PN.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new PN.Deferred,this.privCertificateValidatedDeferral=new PN.Deferred,this.privConnectionState=PN.ConnectionState.Connecting;try{if("undefined"==typeof WebSocket||RN.forceNpmWebSocket){let e=new URL(this.privUri).protocol;"wss:"===(null==e?void 0:e.toLocaleLowerCase())?e="https:":"ws:"===(null==e?void 0:e.toLocaleLowerCase())&&(e="http:");const t={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:"https:"===e.toLocaleLowerCase()};this.privCertificateValidatedDeferral.resolve(),t.agent=this.getAgent(),t.agent.protocol=e,this.privWebsocketClient=new TN.default(this.privUri,t),this.privWebsocketClient.on("redirect",e=>{const t=new PN.ConnectionRedirectEvent(this.privConnectionId,e,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${e}'`);PN.Events.instance.onEvent(t)})}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new PN.Queue,this.privDisconnectDeferral=new PN.Deferred,this.privSendMessageQueue=new PN.Queue,this.processSendQueue().catch(e=>{PN.Events.instance.onEvent(new PN.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new PN.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new PN.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=PN.ConnectionState.Connected,this.onEvent(new PN.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new PN.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new PN.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===PN.ConnectionState.Connecting?(this.privConnectionState=PN.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new PN.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=PN.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new PN.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(e=>{PN.Events.instance.onEvent(new PN.BackgroundEvent(e))})},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===PN.ConnectionState.Connected){const n=new PN.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){const r=new PN.RawWebsocketMessage(PN.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(r).then(e=>{this.onEvent(new PN.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),n.resolve(e)},e=>{n.reject(`Invalid binary message format. Error: ${e}`)})}else{const r=new PN.RawWebsocketMessage(PN.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(r).then(e=>{this.onEvent(new PN.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),n.resolve(e)},e=>{n.reject(`Invalid text message format. Error: ${e}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==PN.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${PN.ConnectionState[this.privConnectionState]} state`);const t=new PN.Deferred,n=new PN.Deferred;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(e).then(r=>{n.resolve({Message:e,RawWebsocketMessage:r,sendStatusDeferral:t})},e=>{n.reject(`Error formatting the message. ${e}`)}),t.promise}read(){return this.privConnectionState!==PN.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){return this.privWebsocketClient?(this.privConnectionState!==PN.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(e){try{return e?(this.onEvent(new PN.ConnectionMessageSentEvent(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(gie){return Promise.reject(`websocket send error: ${gie}`)}}onClose(e,t){return T(this,null,function*(){const n=`Connection closed. ${e}: ${t}`;this.privConnectionState=PN.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(()=>{},n),yield this.privSendMessageQueue.drainAndDispose(e=>{e.sendStatusDeferral.reject(n)},n)})}processSendQueue(){return T(this,null,function*(){for(;;){const t=this.privSendMessageQueue.dequeue(),n=yield t;if(!n)return;try{yield this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(e){n.sendStatusDeferral.reject(e)}}})}onEvent(e){this.privConnectionEvents.onEvent(e),PN.Events.instance.onEvent(e)}getAgent(){const e=new CN.default.Agent(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+Buffer.from(`${e.UserName}:${void 0===e.Password?"":e.Password}`).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new EN.default(t)}createConnection(e,t){let n;if(t=f(f({},t),{requestOCSP:!0,servername:t.host}),this.proxyInfo){const r=RN.GetProxyAgent(this.proxyInfo);n=new Promise((n,i)=>{r.callback(e,t,(e,t)=>{e?i(e):n(t)})})}else n=t.secureEndpoint?Promise.resolve(SN.connect(t)):Promise.resolve(wN.connect(t));return n}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}vN.WebsocketMessageAdapter=RN,RN.forceNpmWebSocket=!1,Object.defineProperty(mN,"__esModule",{value:!0}),mN.WebsocketConnection=void 0;const IN=OT(),kN=vN;mN.WebsocketConnection=class{constructor(e,t,n,r,i,s=!1,o){if(this.privIsDisposed=!1,!e)throw new IN.ArgumentNullError("uri");if(!r)throw new IN.ArgumentNullError("messageFormatter");this.privMessageFormatter=r;let a="",l=0;if(t)for(const c in t)if(c){a+=0===l&&-1===e.indexOf("?")?"?":"&",a+=encodeURIComponent(c);let n=t[c];n&&(n=encodeURIComponent(n),a+=`=${n}`),l++}if(n)for(const c in n)c&&(a+=0===l&&-1===e.indexOf("?")?"?":"&",a+=`${c}=${encodeURIComponent(n[c])}`,l++);this.privUri=e+a,this.privId=o||(0,IN.createNoDashGuid)(),this.privConnectionMessageAdapter=new kN.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,i,n,s)}dispose(){return T(this,null,function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())})}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};var jN={};Object.defineProperty(jN,"__esModule",{value:!0}),jN.ReplayableAudioNode=void 0,jN.ReplayableAudioNode=class{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);0!=t%2&&t++;let n=0;for(;n<this.privBuffers.length&&t>=this.privBuffers[n].chunk.buffer.byteLength;)t-=this.privBuffers[n++].chunk.buffer.byteLength;if(n<this.privBuffers.length){const e=this.privBuffers[n].chunk.buffer.slice(t);return this.privReplayOffset+=e.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:e,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&this.privBuffers&&(this.privBuffers.push(new _N(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let n=Math.round(t*this.privBytesPerSecond*1e-7),r=0;for(;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(r)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const n=t.byteOffset/this.privBytesPerSecond*1e7,r=n+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=n&&e<=r)return t.chunk.timeReceived}return 0}};class _N{constructor(e,t,n){this.chunk=e,this.serial=t,this.byteOffset=n}}var AN={},ON={},DN={},MN={},LN=Be&&Be.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),zN=Be&&Be.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),FN=Be&&Be.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&LN(t,e,n);return zN(t,e),t};Object.defineProperty(MN,"__esModule",{value:!0}),MN.AudioFileWriter=void 0;const BN=FN(ZT),UN=XT;MN.AudioFileWriter=class{constructor(e){UN.Contracts.throwIfNullOrUndefined(BN.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=BN.openSync(e,"w")}set format(e){UN.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=BN.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){UN.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),BN.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),BN.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};var WN,$N={};function HN(){if(WN)return $N;WN=1,Object.defineProperty($N,"__esModule",{value:!0}),$N.PullAudioInputStreamImpl=$N.PullAudioInputStream=$N.PushAudioInputStreamImpl=$N.PushAudioInputStream=$N.AudioInputStream=void 0;const e=fO(),t=OT(),n=cC,r=sj(),i=uN;let s=class{constructor(){}static createPushStream(e){return o.create(e)}static createPullStream(e,t){return l.create(e,t)}};$N.AudioInputStream=s;class o extends s{static create(e){return new a(e)}}$N.PushAudioInputStream=o;class a extends o{constructor(e){super(),this.privFormat=void 0===e?i.AudioStreamFormatImpl.getDefaultInputFormat():e,this.privEvents=new t.EventSource,this.privId=(0,n.createNoDashGuid)(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}attach(e){return T(this,null,function*(){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn();const n=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>T(this,null,function*(){return this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>n.read()}})}detach(e){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(e){this.privEvents.onEvent(e),t.Events.instance.onEvent(e)}toBuffer(e){const t=Buffer.alloc(e.byteLength),n=new Uint8Array(e);for(let r=0;r<t.length;++r)t[r]=n[r];return t}}$N.PushAudioInputStreamImpl=a;class l extends s{constructor(){super()}static create(e,t){return new c(e,t)}}$N.PullAudioInputStream=l;class c extends l{constructor(e,i){super(),this.privFormat=void 0===i?r.AudioStreamFormat.getDefaultInputFormat():i,this.privEvents=new t.EventSource,this.privId=(0,n.createNoDashGuid)(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}attach(e){return T(this,null,function*(){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const n=new ArrayBuffer(this.privBufferSize-t),r=this.privCallback.read(n);if(void 0===e?e=n:new Int8Array(e).set(new Int8Array(n),t),0===r)break;t+=r}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}})}detach(e){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(e){this.privEvents.onEvent(e),t.Events.instance.onEvent(e)}}return $N.PullAudioInputStreamImpl=c,$N}var VN={},qN={},GN={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisOutputFormat=void 0,(t=e.SpeechSynthesisOutputFormat||(e.SpeechSynthesisOutputFormat={}))[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(GN),Object.defineProperty(qN,"__esModule",{value:!0}),qN.AudioOutputFormatImpl=void 0;const KN=GN,JN=uN;class YN extends JN.AudioStreamFormatImpl{constructor(e,t,n,r,i,s,o,a,l){super(n,s,t,e),this.formatTag=e,this.avgBytesPerSec=r,this.blockAlign=i,this.priAudioFormatString=o,this.priRequestAudioFormatString=a,this.priHasHeader=l}static fromSpeechSynthesisOutputFormat(e){return void 0===e?YN.getDefaultOutputFormat():YN.fromSpeechSynthesisOutputFormatString(YN.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new YN(JN.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new YN(JN.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new YN(JN.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new YN(JN.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new YN(JN.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new YN(JN.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new YN(JN.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new YN(JN.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new YN(JN.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new YN(JN.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new YN(JN.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new YN(JN.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new YN(JN.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new YN(JN.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new YN(JN.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new YN(JN.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new YN(JN.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new YN(JN.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new YN(JN.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new YN(JN.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new YN(JN.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new YN(JN.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new YN(JN.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new YN(JN.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new YN(JN.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new YN(JN.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new YN(JN.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new YN(JN.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new YN(JN.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,e,e,!1);case"g722-16khz-64kbps":return new YN(JN.AudioFormatTag.G722,1,16e3,8e3,2,16,e,e,!1);default:return new YN(JN.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return YN.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const t=new Uint8Array(e.byteLength+this.header.byteLength);return t.set(new Uint8Array(this.header),0),t.set(new Uint8Array(e),this.header.byteLength),t.buffer}}qN.AudioOutputFormatImpl=YN,YN.SpeechSynthesisOutputFormatToString={[KN.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[KN.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[KN.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[KN.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[KN.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[KN.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[KN.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[KN.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[KN.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[KN.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[KN.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[KN.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[KN.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[KN.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[KN.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[KN.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[KN.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[KN.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[KN.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[KN.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[KN.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[KN.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[KN.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[KN.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[KN.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[KN.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[KN.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[KN.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"},Object.defineProperty(VN,"__esModule",{value:!0}),VN.PushAudioOutputStreamImpl=VN.PushAudioOutputStream=VN.PullAudioOutputStreamImpl=VN.PullAudioOutputStream=VN.AudioOutputStream=void 0;const ZN=OT(),QN=XT,XN=qN;class eP{constructor(){}static createPullStream(){return tP.create()}}VN.AudioOutputStream=eP;class tP extends eP{static create(){return new nP}}VN.PullAudioOutputStream=tP;class nP extends tP{constructor(){super(),this.privId=(0,ZN.createNoDashGuid)(),this.privStream=new ZN.Stream}set format(e){null==e&&(this.privFormat=XN.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return T(this,null,function*(){const t=new Int8Array(e);let n=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<e.byteLength&&!this.privStream.isReadEnded;){const r=yield this.privStream.read();if(void 0===r||r.isEnd)this.privStream.readEnded();else{let i;r.buffer.byteLength>e.byteLength-n?(i=r.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(r.buffer.slice(e.byteLength-n))):i=r.buffer,t.set(new Int8Array(i),n),n+=i.byteLength}}return n})}write(e){QN.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}VN.PullAudioOutputStreamImpl=nP;class rP extends eP{constructor(){super()}static create(e){return new iP(e)}}VN.PushAudioOutputStream=rP;class iP extends rP{constructor(e){super(),this.privId=(0,ZN.createNoDashGuid)(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}var sP;function oP(){if(sP)return DN;sP=1,Object.defineProperty(DN,"__esModule",{value:!0}),DN.AudioOutputConfigImpl=DN.AudioConfigImpl=DN.AudioConfig=void 0;const e=mj(),t=XT,n=sj(),r=MN,i=HN(),s=VN;let o=class t{static fromDefaultMicrophoneInput(){const t=new e.PcmRecorder(!0);return new a(new e.MicAudioSource(t))}static fromMicrophoneInput(t){const n=new e.PcmRecorder(!0);return new a(new e.MicAudioSource(n,t))}static fromWavFileInput(t,n="unnamedBuffer.wav"){return new a(new e.FileAudioSource(t,n))}static fromStreamInput(t){if(t instanceof n.PullAudioInputStreamCallback)return new a(new i.PullAudioInputStreamImpl(t));if(t instanceof n.AudioInputStream)return new a(t);if("undefined"!=typeof MediaStream&&t instanceof MediaStream){const n=new e.PcmRecorder(!1);return new a(new e.MicAudioSource(n,null,null,t))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new l(new n.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(void 0===e)return t.fromDefaultSpeakerOutput();if(e instanceof n.SpeakerAudioDestination)return new l(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new l(new r.AudioFileWriter(e))}static fromStreamOutput(e){if(e instanceof n.PushAudioOutputStreamCallback)return new l(new s.PushAudioOutputStreamImpl(e));if(e instanceof n.PushAudioOutputStream)return new l(e);if(e instanceof n.PullAudioOutputStream)return new l(e);throw new Error("Not Supported Type")}};DN.AudioConfig=o;class a extends o{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then(()=>{e&&e()},e=>{t&&t(e)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,n){if(t.Contracts.throwIfNull(n,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,n)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}DN.AudioConfigImpl=a;class l extends o{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return DN.AudioOutputConfigImpl=l,DN}VN.PushAudioOutputStreamImpl=iP;var aP={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationReason=void 0,(t=e.CancellationReason||(e.CancellationReason={}))[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"}(aP);var lP={};Object.defineProperty(lP,"__esModule",{value:!0}),lP.PullAudioInputStreamCallback=void 0,lP.PullAudioInputStreamCallback=class{};var cP={};Object.defineProperty(cP,"__esModule",{value:!0}),cP.PushAudioOutputStreamCallback=void 0,cP.PushAudioOutputStreamCallback=class{};var uP={};Object.defineProperty(uP,"__esModule",{value:!0}),uP.KeywordRecognitionModel=void 0;const dP=XT;uP.KeywordRecognitionModel=class{constructor(){this.privDisposed=!1}static fromFile(e){throw dP.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw dP.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};var pP={};Object.defineProperty(pP,"__esModule",{value:!0}),pP.SessionEventArgs=void 0,pP.SessionEventArgs=class{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}};var hP,fP={},mP={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.OutputFormat=void 0,(t=e.OutputFormat||(e.OutputFormat={}))[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"}(mP);var vP,gP={},yP={};Object.defineProperty(yP,"__esModule",{value:!0}),yP.RecognitionResult=void 0,yP.RecognitionResult=class{constructor(e,t,n,r,i,s,o,a,l,c){this.privResultId=e,this.privReason=t,this.privText=n,this.privDuration=r,this.privOffset=i,this.privLanguage=s,this.privLanguageDetectionConfidence=o,this.privErrorDetails=a,this.privJson=l,this.privProperties=c}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};var bP,xP,wP={},SP={},CP={};Object.defineProperty(CP,"__esModule",{value:!0}),CP.LanguageUnderstandingModelImpl=CP.LanguageUnderstandingModel=void 0;const EP=XT;class TP{constructor(){}static fromEndpoint(e){EP.Contracts.throwIfNull(e,"uri"),EP.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const t=new NP,n=e.host.indexOf(".");if(-1===n)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,n);const r=e.pathname.lastIndexOf("/")+1;if(-1===r)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(r),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){EP.Contracts.throwIfNullOrWhitespace(e,"appId");const t=new NP;return t.appId=e,t}static fromSubscription(e,t,n){EP.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),EP.Contracts.throwIfNullOrWhitespace(t,"appId"),EP.Contracts.throwIfNullOrWhitespace(n,"region");const r=new NP;return r.appId=t,r.region=n,r.subscriptionKey=e,r}}CP.LanguageUnderstandingModel=TP;class NP extends TP{}CP.LanguageUnderstandingModelImpl=NP;var PP,RP,IP,kP={},jP={},_P={};function AP(){if(RP)return _P;RP=1,Object.defineProperty(_P,"__esModule",{value:!0}),_P.CancellationEventArgsBase=void 0;const e=sj();let t=class extends e.RecognitionEventArgs{constructor(e,t,n,r,i){super(r,i),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return _P.CancellationEventArgsBase=t,_P}var OP,DP,MP,LP={},zP={},FP={};function BP(){if(MP)return FP;MP=1,Object.defineProperty(FP,"__esModule",{value:!0}),FP.TranslationRecognitionResult=void 0;const e=sj();let t=class t extends e.SpeechRecognitionResult{constructor(e,t,n,r,i,s,o,a,l,c,u){super(t,n,r,i,s,o,a,void 0,l,c,u),this.privTranslations=e}static fromSpeechRecognitionResult(e){return new t(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)}get translations(){return this.privTranslations}};return FP.TranslationRecognitionResult=t,FP}var UP={};Object.defineProperty(UP,"__esModule",{value:!0}),UP.TranslationSynthesisResult=void 0,UP.TranslationSynthesisResult=class{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}};var WP={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReason=void 0,(t=e.ResultReason||(e.ResultReason={}))[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(WP);var $P,HP,VP,qP={},GP={},KP={};function JP(){if(VP)return KP;VP=1,Object.defineProperty(KP,"__esModule",{value:!0}),KP.PropertyCollection=void 0;const e=sj();return KP.PropertyCollection=class t{constructor(){this.privKeys=[],this.privValues=[]}getProperty(t,n){let r;r="string"==typeof t?t:e.PropertyId[t];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===r)return this.privValues[e];if(void 0!==n)return String(n)}setProperty(t,n){let r;r="string"==typeof t?t:e.PropertyId[t];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===r)return void(this.privValues[e]=n);this.privKeys.push(r),this.privValues.push(n)}clone(){const e=new t;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach(t=>{if(void 0===e.getProperty(t,void 0)){const n=this.getProperty(t);e.setProperty(t,n)}})}get keys(){return this.privKeys}},KP}var YP={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyId=void 0,(t=e.PropertyId||(e.PropertyId={}))[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",t[t.SpeechServiceConnection_IntentRegion=10]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=11]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=12]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=13]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=14]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=15]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=16]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=17]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=18]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=19]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=20]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=21]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=22]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=23]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=24]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=25]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=26]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=27]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=28]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=29]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=30]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=31]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=32]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=33]="Speech_SegmentationSilenceTimeoutMs",t[t.Speech_SegmentationMaximumTimeMs=34]="Speech_SegmentationMaximumTimeMs",t[t.Speech_SegmentationStrategy=35]="Speech_SegmentationStrategy",t[t.Speech_StartEventSensitivity=36]="Speech_StartEventSensitivity",t[t.SpeechServiceConnection_EnableAudioLogging=37]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=38]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=39]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=40]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=41]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=42]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=43]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=44]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=45]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=46]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=47]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=48]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=49]="SpeechServiceResponse_RequestSentenceBoundary",t[t.SpeechServiceResponse_DiarizeIntermediateResults=50]="SpeechServiceResponse_DiarizeIntermediateResults",t[t.Conversation_ApplicationId=51]="Conversation_ApplicationId",t[t.Conversation_DialogType=52]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=53]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=54]="Conversation_From_Id",t[t.Conversation_Conversation_Id=55]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=56]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=57]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=58]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=59]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=60]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=61]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=62]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=63]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=64]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=65]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=66]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=67]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=68]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=69]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=70]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=71]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=72]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=73]="TalkingAvatarService_WebRTC_SDP"}(YP);var ZP,QP,XP={},eR={},tR={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechStartEventSensitivity=e.RecognitionMode=void 0,(t=e.RecognitionMode||(e.RecognitionMode={})).Interactive="Interactive",t.Dictation="Dictation",t.Conversation="Conversation",t.None="None",(n=e.SpeechStartEventSensitivity||(e.SpeechStartEventSensitivity={})).Low="low",n.Medium="medium",n.High="high"}(tR);var nR,rR={},iR={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceProfileType=void 0,(t=e.VoiceProfileType||(e.VoiceProfileType={}))[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"}(iR);var sR,oR,aR,lR={},cR={},uR={};function dR(){if(sR)return uR;sR=1,Object.defineProperty(uR,"__esModule",{value:!0}),uR.ConnectionMessageImpl=uR.ConnectionMessage=void 0;const e=DT,t=OT(),n=JP(),r=YP;return uR.ConnectionMessage=class{},uR.ConnectionMessageImpl=class{constructor(t){this.privConnectionMessage=t,this.privProperties=new n.PropertyCollection,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]&&this.privProperties.setProperty(r.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(e=>{this.privProperties.setProperty(e,this.privConnectionMessage.headers[e])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(e=>e.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===t.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===t.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}},uR}function pR(){if(oR)return cR;oR=1,Object.defineProperty(cR,"__esModule",{value:!0}),cR.Connection=void 0;const e=fO(),t=OT(),n=dR(),r=XT,i=sj();return cR.Connection=class s{static fromRecognizer(e){const t=e.internalData,n=new s;return n.privInternalData=t,n.setupEvents(),n}static fromSynthesizer(e){const t=e.internalData,n=new s;return n.privInternalData=t,n.setupEvents(),n}openConnection(e,n){(0,t.marshalPromiseToCallbacks)(this.privInternalData.connect(),e,n)}closeConnection(n,r){if(this.privInternalData instanceof e.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,t.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),n,r)}setMessageProperty(t,n,i){if(r.Contracts.throwIfNullOrWhitespace(n,"propertyName"),this.privInternalData instanceof e.ServiceRecognizerBase){if("speech.context"!==t.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.getContext()[n]=i}else if(this.privInternalData instanceof e.SynthesisAdapterBase){if("speech.config"!==t.toLowerCase()&&"synthesis.context"!==t.toLowerCase())throw new Error("Only speech.config and synthesis.context message paths are currently supported for synthesizer");if("speech.config"===t.toLowerCase()){if("context"!==n.toLowerCase())throw new Error("Only context property is currently supported for speech.config message path for synthesizer");this.privInternalData.synthesizerConfig.setContextFromJson(i)}else this.privInternalData.synthesisContext.setSection(n,i)}}sendMessageAsync(e,n,r,i){(0,t.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(e,n),r,i)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(e=>{"ConnectionEstablishedEvent"===e.name?this.connected&&this.connected(new i.ConnectionEventArgs(e.connectionId)):"ConnectionClosedEvent"===e.name?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(e.connectionId)):"ConnectionMessageSentEvent"===e.name?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(e.message))):"ConnectionMessageReceivedEvent"===e.name&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(e.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(e.jsonString,e.name))})}},cR}var hR,fR={},mR={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.NoMatchReason=void 0,(t=e.NoMatchReason||(e.NoMatchReason={}))[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(mR);var vR,gR={},yR={};Object.defineProperty(yR,"__esModule",{value:!0}),yR.TranslationRecognitionCanceledEventArgs=void 0,yR.TranslationRecognitionCanceledEventArgs=class{constructor(e,t,n,r,i){this.privCancelReason=t,this.privErrorDetails=n,this.privResult=i,this.privSessionId=e,this.privErrorCode=r}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};var bR,xR={},wR={};Object.defineProperty(wR,"__esModule",{value:!0}),wR.CancellationDetailsBase=void 0,wR.CancellationDetailsBase=class{constructor(e,t,n){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};var SR,CR={},ER={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationErrorCode=void 0,(t=e.CancellationErrorCode||(e.CancellationErrorCode={}))[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"}(ER);var TR,NR,PR={},RR={},IR={};Object.defineProperty(IR,"__esModule",{value:!0}),IR.PhraseListGrammar=void 0;const kR=XT;class jR{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const t=e.internalData;return new jR(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}setWeight(e){kR.Contracts.throwIfNumberOutOfRange(e,"weight",0,2),this.privGrammerBuilder.setWeight(e)}}IR.PhraseListGrammar=jR;var _R,AR={};function OR(){if(_R)return AR;_R=1,Object.defineProperty(AR,"__esModule",{value:!0}),AR.DialogServiceConfigImpl=AR.DialogServiceConfig=void 0;const e=XT,t=sj();let n=class{constructor(){}set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};return AR.DialogServiceConfig=n,AR.DialogServiceConfigImpl=class extends n{constructor(){super(),this.privSpeechConfig=new t.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(t){e.Contracts.throwIfNullOrWhitespace(t,"value"),this.privSpeechConfig.speechRecognitionLanguage=t}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,t){this.privSpeechConfig.setProperty(e,t)}getProperty(e,t){return this.privSpeechConfig.getProperty(e)}setProxy(e,n,r,i){this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPort,`${n}`),r&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName,r),i&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword,i)}setServiceProperty(e,t,n){this.privSpeechConfig.setServiceProperty(e,t)}close(){}},AR}var DR,MR,LR,zR,FR,BR={},UR={},WR={},$R={},HR={},VR={};Object.defineProperty(VR,"__esModule",{value:!0}),VR.QueryParameterNames=void 0;class qR{}function GR(){if(LR)return HR;LR=1,Object.defineProperty(HR,"__esModule",{value:!0}),HR.ConnectionFactoryBase=void 0;const e=fO(),t=OT(),n=sj(),r=VR;return HR.ConnectionFactoryBase=class{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(t,i,s){new Map([[n.PropertyId.Speech_SegmentationSilenceTimeoutMs,r.QueryParameterNames.SegmentationSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_EnableAudioLogging,r.QueryParameterNames.EnableAudioLogging],[n.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,r.QueryParameterNames.EndSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,r.QueryParameterNames.InitialSilenceTimeoutMs],[n.PropertyId.SpeechServiceResponse_PostProcessingOption,r.QueryParameterNames.Postprocessing],[n.PropertyId.SpeechServiceResponse_ProfanityOption,r.QueryParameterNames.Profanity],[n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,r.QueryParameterNames.EnableWordLevelTimestamps],[n.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,r.QueryParameterNames.StableIntermediateThreshold]]).forEach((e,n)=>{this.setUrlParameter(n,e,t,i,s)});const o=JSON.parse(t.parameters.getProperty(e.ServicePropertiesPropertyName,"{}"));Object.keys(o).forEach(e=>{i[e]=o[e]})}setUrlParameter(e,t,n,r,i){const s=n.parameters.getProperty(e,void 0);!s||i&&-1!==i.search(t)||(r[t]=s.toLocaleLowerCase())}static getRedirectUrlFromEndpoint(e){return T(this,null,function*(){const n=new URL(e);n.protocol="https:",n.port="443",n.searchParams.append("GenerateRedirectResponse","true");const r=n.toString();t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",r,void 0,"ConnectionFactoryBase: redirectUrl request"));const i=yield fetch(r);if(200!==i.status)return e;const s=yield i.text();t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",s,e,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(s.trim()).toString()}catch(o){return e}})}},HR}function KR(){if(FR)return WR;FR=1,Object.defineProperty(WR,"__esModule",{value:!0}),WR.DialogServiceConnector=void 0;const e=function(){if(zR)return $R;zR=1,Object.defineProperty($R,"__esModule",{value:!0}),$R.DialogConnectionFactory=void 0;const e=mj(),t=fO(),n=sj(),r=GR(),i=fO(),s=DT,o=VR;class a extends r.ConnectionFactoryBase{create(l,c,u){const d=l.parameters.getProperty(n.PropertyId.Conversation_ApplicationId,""),p=l.parameters.getProperty(n.PropertyId.Conversation_DialogType),h=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),f=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),m=l.parameters.getProperty(n.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),v={};v[s.HeaderNames.ConnectionId]=u,v[o.QueryParameterNames.Format]=l.parameters.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase(),v[o.QueryParameterNames.Language]=f,v[o.QueryParameterNames.RequestBotStatusMessages]=m,d&&(v[o.QueryParameterNames.BotId]=d,p===n.DialogServiceConfig.DialogTypes.CustomCommands&&(v[s.HeaderNames.CustomCommandsAppId]=d));const g=p===n.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",y=p===n.DialogServiceConfig.DialogTypes.CustomCommands?"v1":p===n.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",b={};null!=c.token&&""!==c.token&&(b[c.headerName]=c.token);let x=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,"");if(!x){const e=r.ConnectionFactoryBase.getHostSuffix(h),t=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,`wss://${h}.${a.BaseUrl}${e}`);x=`${t.endsWith("/")?t:t+"/"}${g}${a.ApiKey}/${y}`}this.setCommonUrlParams(l,v,x);const w="true"===l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new e.WebsocketConnection(x,v,b,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),w,u))}}return $R.DialogConnectionFactory=a,a.ApiKey="api",a.BaseUrl="convai.speech",$R}(),t=fO(),n=tR,r=OT(),i=XT,s=sj(),o=YP;let a=class a extends s.Recognizer{constructor(t,n){const r=t;i.Contracts.throwIfNull(t,"dialogConfig"),super(n,r.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=r.properties.clone();const s=this.buildAgentConfig();this.privReco.agentConfig.set(s)}connect(e,t){(0,r.marshalPromiseToCallbacks)(this.privReco.connect(),e,t)}disconnect(e,t){(0,r.marshalPromiseToCallbacks)(this.privReco.disconnect(),e,t)}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){i.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(o.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(o.PropertyId.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,t){if(this.isTurnComplete){i.Contracts.throwIfDisposed(this.privIsDisposed);const s=(()=>T(this,null,function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;const e=new r.Deferred;yield this.privReco.recognize(n.RecognitionMode.Conversation,e.resolve,e.reject);const t=yield e.promise;return yield this.implRecognizerStop(),t}))();s.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,r.marshalPromiseToCallbacks)(s.finally(()=>{this.isTurnComplete=!0}),e,t)}}sendActivityAsync(e,t,n){(0,r.marshalPromiseToCallbacks)(this.privReco.sendMessage(e),t,n)}close(e,t){i.Contracts.throwIfDisposed(this.privIsDisposed),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}dispose(e){return T(this,null,function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield E(a.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new t.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,n,r,i){const s=r;return new t.DialogServiceAdapter(e,n,s,i,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(o.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(o.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(o.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return WR.DialogServiceConnector=a,WR}VR.QueryParameterNames=qR,qR.BotId="botid",qR.CustomSpeechDeploymentId="cid",qR.CustomVoiceDeploymentId="deploymentId",qR.EnableAudioLogging="storeAudio",qR.EnableLanguageId="lidEnabled",qR.EnableWordLevelTimestamps="wordLevelTimestamps",qR.EndSilenceTimeoutMs="endSilenceTimeoutMs",qR.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",qR.SegmentationMaximumTimeMs="segmentationMaximumTimeMs",qR.SegmentationStrategy="segmentationStrategy",qR.Format="format",qR.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",qR.Language="language",qR.Profanity="profanity",qR.RequestBotStatusMessages="enableBotMessageStatus",qR.StableIntermediateThreshold="stableIntermediateThreshold",qR.StableTranslation="stableTranslation",qR.TestHooks="testhooks",qR.Postprocessing="postprocessing",qR.CtsMeetingId="meetingId",qR.CtsDeviceId="deviceId",qR.CtsIsParticipant="isParticipant",qR.EnableAvatar="enableTalkingAvatar";var JR={};Object.defineProperty(JR,"__esModule",{value:!0}),JR.ActivityReceivedEventArgs=void 0,JR.ActivityReceivedEventArgs=class{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};var YR={},ZR={};Object.defineProperty(ZR,"__esModule",{value:!0}),ZR.TurnStatusResponsePayload=void 0;class QR{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new QR(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}ZR.TurnStatusResponsePayload=QR,Object.defineProperty(YR,"__esModule",{value:!0}),YR.TurnStatusReceivedEventArgs=void 0;const XR=ZR;YR.TurnStatusReceivedEventArgs=class{constructor(e){this.privTurnStatus=XR.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};var eI={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ServicePropertyChannel=void 0,(t=e.ServicePropertyChannel||(e.ServicePropertyChannel={}))[t.UriQueryParameter=0]="UriQueryParameter"}(eI);var tI={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ProfanityOption=void 0,(t=e.ProfanityOption||(e.ProfanityOption={}))[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"}(tI);var nI,rI={},iI={};Object.defineProperty(iI,"__esModule",{value:!0}),iI.ConnectionMessageEventArgs=void 0,iI.ConnectionMessageEventArgs=class{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};var sI={};Object.defineProperty(sI,"__esModule",{value:!0}),sI.VoiceProfile=void 0,sI.VoiceProfile=class{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}};var oI,aI,lI,cI,uI,dI,pI,hI,fI={},mI={},vI={},gI={},yI={},bI={},xI={},wI={},SI={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdMode=void 0,(t=e.LanguageIdMode||(e.LanguageIdMode={}))[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"}(SI);var CI={};Object.defineProperty(CI,"__esModule",{value:!0}),CI.AutoDetectSourceLanguageResult=void 0;const EI=XT;class TI{constructor(e,t){EI.Contracts.throwIfNullOrUndefined(e,"language"),EI.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new TI(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new TI(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}CI.AutoDetectSourceLanguageResult=TI;var NI={};Object.defineProperty(NI,"__esModule",{value:!0}),NI.SourceLanguageConfig=void 0;const PI=XT;class RI{constructor(e,t){PI.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new RI(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}NI.SourceLanguageConfig=RI;var II,kI,jI={},_I={},AI={};function OI(){if(kI)return AI;kI=1,Object.defineProperty(AI,"__esModule",{value:!0}),AI.ConversationImpl=AI.Conversation=void 0;const e=fO(),t=OT(),n=XT,r=sj();let i=class{constructor(){}static createConversationAsync(i,o,a,l){let c,u,d;return n.Contracts.throwIfNullOrUndefined(i,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(i.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),i.subscriptionKey||i.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])||n.Contracts.throwIfNullOrUndefined(i.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof o?(c=new s(i,o),(0,t.marshalPromiseToCallbacks)((()=>T(this,null,function*(){}))(),a,l)):(c=new s(i),u=o,d=a,c.createConversationAsync(()=>{u&&u()},e=>{d&&d(e)})),c}};AI.Conversation=i;class s extends i{constructor(t,i){if(super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=e=>{var t;this.privIsConnected=!0;try{(null==(t=this.privConversationTranslator)?void 0:t.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(n){}},this.onDisconnected=e=>{var t;try{(null==(t=this.privConversationTranslator)?void 0:t.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(n){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{var n;try{(null==(n=this.privConversationTranslator)?void 0:n.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(r){}},this.onParticipantUpdateCommandReceived=(t,n)=>{try{const t=this.privParticipants.getParticipant(n.id);if(void 0!==t){switch(n.key){case e.ConversationTranslatorCommandTypes.changeNickname:t.displayName=n.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:t.isUsingTts=n.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:t.profanity=n.value;break;case e.ConversationTranslatorCommandTypes.setMute:t.isMuted=n.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:t.translateToLanguages=n.value}this.privParticipants.addOrUpdateParticipant(t),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(t)],n.sessionId))}}catch(i){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach(e=>e.isMuted=!e.isHost&&t.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(n){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(n){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(n){}},this.onTranslationReceived=(t,n)=>{try{switch(n.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(n.payload,void 0,n.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(n.payload,void 0,n.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(n.payload,void 0,n.sessionId))}}catch(i){}},this.onParticipantsListReceived=(e,t)=>{var n;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){const e=null==(n=this.privConversationTranslator)?void 0:n.properties.getProperty(r.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(i){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(n){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new e.ConversationManager,t.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||t.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=t.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),i)this.privConversationId=i;else{0===t.targetLanguages.length&&t.addTargetLanguage(this.privLanguage),t.getProperty(r.PropertyId[r.PropertyId.SpeechServiceResponse_ProfanityOption])||t.setProfanity(r.ProfanityOption.Masked);let e=t.getProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name]);null==e&&(e="Host"),n.Contracts.throwIfNullOrTooLong(e,"nickname",50),n.Contracts.throwIfNullOrTooShort(e,"nickname",2),t.setProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name],e)}this.privConfig=t;const s=t;n.Contracts.throwIfNull(s,"speechConfig"),this.privProperties=s.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return!(null==(e=this.privParticipants.me)?void 0:e.isHost)&&(null==(t=this.privParticipants.me)?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const t=this.conversationId,n=this.participants.map(e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice})),r={};for(const i of e.ConversationConnectionConfig.transcriptionEventKeys){const e=this.properties.getProperty(i,"");""!==e&&(r[i]=e)}return{id:t,participants:n,conversationProperties:r}}get canSend(){var e;return this.privIsConnected&&!(null==(e=this.privParticipants.me)?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null==(e=this.privParticipants.me)?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){n.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}onToken(e){this.privConversationTranslator.onToken(e)}createConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,n=>{n||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=n,this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}startConversationAsync(t,r){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),r),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}addParticipantAsync(e,r,i){n.Contracts.throwIfNullOrUndefined(e,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(e),r,i)}joinConversationAsync(e,t,r,i,s){try{n.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,e=>{n.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,i&&i(e.cognitiveSpeechAuthToken)},e=>{this.handleError(e,s)})}catch(o){this.handleError(o,s)}}deleteConversationAsync(e,n){(0,t.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),e,n)}deleteConversationImplAsync(){return T(this,null,function*(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endConversationAsync(e,n){(0,t.marshalPromiseToCallbacks)(this.endConversationImplAsync(),e,n)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,t){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}muteAllParticipantsAsync(e,t){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}muteParticipantAsync(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}removeParticipantAsync(e,r,i){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(e),r,i);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),i);let t="";"string"==typeof e?t=e:e.hasOwnProperty("id")?t=e.id:e.hasOwnProperty("userId")&&(t=e.userId),n.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","userId")),-1===this.participants.findIndex(e=>e.id===t)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(t),()=>{this.handleCallback(r,i)},e=>{this.handleError(e,i)})}}catch(s){this.handleError(s,i)}}unlockConversationAsync(e,t){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}unmuteAllParticipantsAsync(e,t){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}unmuteParticipantAsync(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}sendTextMessageAsync(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}setTranslatedLanguagesAsync(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}changeNicknameAsync(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return T(this,null,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this})}getKeepAlive(){const t=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:t,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")}close(e){return T(this,null,function*(){var t;try{this.privIsConnected=!1,yield null==(t=this.privConversationRecognizer)?void 0:t.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(gie){throw gie}e&&this.dispose()})}handleCallback(e,t){if(e){try{e()}catch(gie){t&&t(gie)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const n=e;t(n.name+": "+n.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map(e=>this.toParticipant(e));return e?t:t.filter(e=>!1===e.isHost)}toParticipant(e){return new r.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getMuteCommand(t,r){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(t,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:t,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:r})}getLockCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getEjectCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(t,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:t,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getChangeNicknameCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(t,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:t,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getMessageCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(t,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:t,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return AI.ConversationImpl=s,AI}var DI={};Object.defineProperty(DI,"__esModule",{value:!0}),DI.ConversationCommon=void 0,DI.ConversationCommon=class{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(gie){t&&t(gie)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const n=e;t(n.name+": "+n.message)}else t(e)}};var MI,LI,zI,FI,BI,UI,WI,$I={},HI={},VI={},qI={},GI={},KI={},JI={},YI={};function ZI(){return WI||(WI=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranslator=e.SpeechState=void 0;const t=fO(),n=function(){if(UI)return JI;UI=1,Object.defineProperty(JI,"__esModule",{value:!0}),JI.ConversationTranslatorConnectionFactory=void 0;const e=mj(),t=YI,n=XT,r=sj(),i=DT,s=VR,o=GR(),a=fO();let l=class l extends o.ConnectionFactoryBase{constructor(e){super(),n.Contracts.throwIfNullOrUndefined(e,"convGetter"),this.privConvGetter=e}create(n,c,u){const d="TRUE"===n.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase(),p=this.privConvGetter().room,h=p.cognitiveSpeechRegion||n.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,""),f={hostSuffix:o.ConnectionFactoryBase.getHostSuffix(h),path:l.CTS_VIRT_MIC_PATH,region:encodeURIComponent(h)};f[s.QueryParameterNames.Language]=encodeURIComponent(n.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"")),f[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(p.roomId),f[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(p.participantId),f[s.QueryParameterNames.CtsIsParticipant]=p.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let m="";const v={},g={};if(d){m=n.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint),m||(m="wss://"+n.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),m=t.StringUtils.formatString(m,f);const e=new URL(m);e.searchParams.forEach((e,t)=>{v[t]=e}),(new a.TranscriberConnectionFactory).setQueryParams(v,n,m),v[s.QueryParameterNames.CtsMeetingId]=f[s.QueryParameterNames.CtsMeetingId],v[s.QueryParameterNames.CtsDeviceId]=f[s.QueryParameterNames.CtsDeviceId],p.isHost||(v[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in v||(v[s.QueryParameterNames.Format]="simple"),e.searchParams.forEach((t,n)=>{e.searchParams.set(n,v[n]),delete v[n]}),m=e.toString()}else{const e=new a.TranslationConnectionFactory;m=e.getEndpointUrl(n,!0),m=t.StringUtils.formatString(m,f),e.setQueryParams(v,n,m)}g[i.HeaderNames.ConnectionId]=u,g[e.RestConfigBase.configParams.token]=p.token,c.token&&(g[c.headerName]=c.token);const y="TRUE"===n.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase();return Promise.resolve(new e.WebsocketConnection(m,v,g,new a.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(n),y,u))}};return JI.ConversationTranslatorConnectionFactory=l,l.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",JI}(),r=OT(),i=XT,s=sj(),o=OI(),a=pk();var l,c;(c=l=e.SpeechState||(e.SpeechState={}))[c.Inactive=0]="Inactive",c[c.Connecting=1]="Connecting",c[c.Connected=2]="Connected";class u extends s.TranslationRecognizer{constructor(e,t,r,i){super(e,t,new n.ConversationTranslatorConnectionFactory(i)),this.privSpeechState=l.Inactive,r&&(this.privTranslator=r,this.sessionStarted=()=>{this.privSpeechState=l.Connected},this.sessionStopped=()=>{this.privSpeechState=l.Inactive},this.recognizing=(e,t)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,t)},this.recognized=(e,t)=>T(this,null,function*(){var e;(null==(e=t.result)?void 0:e.errorDetails)?(yield this.cancelSpeech(),this.fireCancelEvent(t.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,t)}),this.canceled=()=>T(this,null,function*(){if(this.privSpeechState!==l.Inactive)try{yield this.cancelSpeech()}catch(e){this.privSpeechState=l.Inactive}}))}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}set authentication(e){this.privReco.authentication=e}onConnection(){this.privSpeechState=l.Connected}onCancelSpeech(){return T(this,null,function*(){this.privSpeechState=l.Inactive,yield this.cancelSpeech()})}fireCancelEvent(e){try{if(this.privTranslator.canceled){const t=new a.ConversationTranslationCanceledEventArgs(s.CancellationReason.Error,e,s.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,t)}}catch(gie){}}cancelSpeech(){return T(this,null,function*(){var e;try{this.stopContinuousRecognitionAsync(),yield null==(e=this.privReco)?void 0:e.disconnect(),this.privSpeechState=l.Inactive}catch(gie){}})}}class d extends a.ConversationCommon{constructor(e){super(e),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new s.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var e;return null==(e=this.privConversation)?void 0:e.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===l.Connected||this.privCTRecognizer.state===l.Connecting||this.privConversation.isMutedByHost)}onToken(e){this.privCTRecognizer.authentication=e}setServiceProperty(e,n){const r=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));r[e]=n,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(r))}joinConversationAsync(e,n,r,a,l){try{if("string"==typeof e){i.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),l);let c=r;null!=c&&""!==c||(c=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=s.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(s.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(c),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],c),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],n);const u=[s.PropertyId.SpeechServiceConnection_Host,s.PropertyId.ConversationTranslator_Host,s.PropertyId.SpeechServiceConnection_Endpoint,s.PropertyId.SpeechServiceConnection_ProxyHostName,s.PropertyId.SpeechServiceConnection_ProxyPassword,s.PropertyId.SpeechServiceConnection_ProxyPort,s.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const e of u){const t=this.privProperties.getProperty(e);if(t){const n="string"==typeof e?e:s.PropertyId[e];this.privSpeechTranslationConfig.setProperty(n,t)}}const d=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const e of Object.keys(d))this.privSpeechTranslationConfig.setServiceProperty(e,d[e],s.ServicePropertyChannel.UriQueryParameter);this.privConversation=new o.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,n,c,e=>{e||this.handleError(new Error(this.privErrors.permissionDeniedConnect),l),this.privSpeechTranslationConfig.authorizationToken=e,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(a,l)},e=>{this.handleError(e,l)})},e=>{this.handleError(e,l)})}else"object"==typeof e?(i.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(s.PropertyId.ConversationTranslator_Name,n),this.privConversation=e,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(r,a)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),a)}catch(c){this.handleError(c,"string"==typeof r?l:a)}}leaveConversationAsync(e,t){(0,r.marshalPromiseToCallbacks)((()=>T(this,null,function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()}))(),e,t)}sendTextMessageAsync(e,t,n){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,t,n)}catch(r){this.handleError(r,n)}}startTranscribingAsync(e,t){(0,r.marshalPromiseToCallbacks)((()=>T(this,null,function*(){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&(yield this.connectTranslatorRecognizer()),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(e){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),e}}))(),e,t)}stopTranscribingAsync(e,t){(0,r.marshalPromiseToCallbacks)((()=>T(this,null,function*(){try{if(!this.privIsSpeaking)return void(yield this.cancelSpeech());this.privIsSpeaking=!1,yield new Promise((e,t)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(e,t)})}catch(e){yield this.cancelSpeech()}}))(),e,t)}isDisposed(){return this.privIsDisposed}dispose(e,t,n){(0,r.marshalPromiseToCallbacks)((()=>T(this,null,function*(){this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)}))(),t,n)}cancelSpeech(){return T(this,null,function*(){var e;try{this.privIsSpeaking=!1,yield null==(e=this.privCTRecognizer)?void 0:e.onCancelSpeech(),this.privCTRecognizer=void 0}catch(gie){}})}connectTranslatorRecognizer(){return T(this,null,function*(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=s.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key],"");const e=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,e)}catch(e){throw yield this.cancelSpeech(),e}})}startContinuousRecognition(){return new Promise((e,t)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,t)})}}e.ConversationTranslator=d}(KI)),KI}Object.defineProperty(YI,"__esModule",{value:!0}),YI.StringUtils=void 0,YI.StringUtils=class{static formatString(e,t){if(!e)return"";if(!t)return e;let n="",r="";const i=e=>{n+=e},s=e=>{r+=e};let o=i;for(let a=0;a<e.length;a++){const l=e[a],c=a+1<e.length?e[a+1]:"";switch(l){case"{":"{"===c?(o("{"),a++):o=s;break;case"}":"}"===c?(o("}"),a++):(t.hasOwnProperty(r)&&(n+=t[r]),o=i,r="");break;default:o(l)}}return n}};var QI,XI,ek={},tk={},nk={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ParticipantChangedReason=void 0,(t=e.ParticipantChangedReason||(e.ParticipantChangedReason={}))[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"}(nk);var rk,ik,sk,ok,ak,lk={},ck={},uk={},dk={};function pk(){return ak||(ak=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranscriptionResult=e.MeetingTranscriber=e.MeetingTranscriptionCanceledEventArgs=e.MeetingImpl=e.Meeting=e.ParticipantChangedReason=e.User=e.Participant=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.ConversationCommon=e.ConversationImpl=e.Conversation=void 0;var t=OI();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return t.Conversation}}),Object.defineProperty(e,"ConversationImpl",{enumerable:!0,get:function(){return t.ConversationImpl}});var n=DI;Object.defineProperty(e,"ConversationCommon",{enumerable:!0,get:function(){return n.ConversationCommon}});var r=function(){if(MI)return $I;MI=1,Object.defineProperty($I,"__esModule",{value:!0}),$I.ConversationExpirationEventArgs=void 0;const e=sj();let t=class extends e.SessionEventArgs{constructor(e,t){super(t),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}};return $I.ConversationExpirationEventArgs=t,$I}();Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return r.ConversationExpirationEventArgs}});var i=function(){if(LI)return HI;LI=1,Object.defineProperty(HI,"__esModule",{value:!0}),HI.ConversationParticipantsChangedEventArgs=void 0;const e=sj();let t=class extends e.SessionEventArgs{constructor(e,t,n){super(n),this.privReason=e,this.privParticipant=t}get reason(){return this.privReason}get participants(){return this.privParticipant}};return HI.ConversationParticipantsChangedEventArgs=t,HI}();Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var s=function(){if(zI)return VI;zI=1,Object.defineProperty(VI,"__esModule",{value:!0}),VI.ConversationTranslationCanceledEventArgs=void 0;const e=AP();let t=class extends e.CancellationEventArgsBase{};return VI.ConversationTranslationCanceledEventArgs=t,VI}();Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var o=function(){if(FI)return qI;FI=1,Object.defineProperty(qI,"__esModule",{value:!0}),qI.ConversationTranslationEventArgs=void 0;const e=sj();let t=class extends e.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}};return qI.ConversationTranslationEventArgs=t,qI}();Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return o.ConversationTranslationEventArgs}});var a=function(){if(BI)return GI;BI=1,Object.defineProperty(GI,"__esModule",{value:!0}),GI.ConversationTranslationResult=void 0;const e=BP();let t=class extends e.TranslationRecognitionResult{constructor(e,t,n,r,i,s,o,a,l,c,u){super(t,r,i,s,o,a,void 0,void 0,l,c,u),this.privId=e,this.privOrigLang=n}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return GI.ConversationTranslationResult=t,GI}();Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return a.ConversationTranslationResult}});var l=ZI();Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return l.ConversationTranslator}});var c=function(){if(QI)return ek;QI=1,Object.defineProperty(ek,"__esModule",{value:!0}),ek.ConversationTranscriber=void 0;const e=fO(),t=tR,n=OT(),r=XT,i=sj();let s=class s extends i.Recognizer{constructor(t,n){const s=t;r.Contracts.throwIfNull(s,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(s.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,s.properties,new e.ConversationTranscriberConnectionFactory,t.tokenCredential),this.privProperties.setProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(e,t,n){const r=e;return t.properties.mergeTo(r.properties),new s(e,n)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(e,r){(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),e,r)}stopTranscribingAsync(e,t){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(e,t){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}dispose(e){return T(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield E(s.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(t,n,r,i){const s=r;return i.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(t,n,s,i,this)}};return ek.ConversationTranscriber=s,ek}();Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return c.ConversationTranscriber}});var u=function(){if(XI)return tk;XI=1,Object.defineProperty(tk,"__esModule",{value:!0}),tk.Participant=tk.User=void 0;const e=sj();tk.User=class{constructor(e){this.privUserId=e}get userId(){return this.privUserId}};class t{constructor(t,n,r,i,s,o,a,l){this.privId=t,this.privAvatar=n,this.privDisplayName=r,this.privIsHost=i,this.privIsMuted=s,this.privIsUsingTts=o,this.privPreferredLanguage=a,this.privVoice=l,this.privProperties=new e.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,n,r){return new t(e,"",e,!1,!1,!1,n,r)}}return tk.Participant=t,tk}();Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return u.Participant}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return u.User}});var d=nk;Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return d.ParticipantChangedReason}});var p=function(){if(rk)return lk;rk=1,Object.defineProperty(lk,"__esModule",{value:!0}),lk.MeetingImpl=lk.Meeting=void 0;const e=fO(),t=OT(),n=XT,r=sj();let i=class{constructor(){}static createMeetingAsync(i,o,a,l){if(n.Contracts.throwIfNullOrUndefined(i,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(i.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),n.Contracts.throwIfNull(o,"meetingId"),0===o.length)throw new Error("meetingId cannot be empty");i.subscriptionKey||i.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])||n.Contracts.throwIfNullOrUndefined(i.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const c=new s(i,o);return(0,t.marshalPromiseToCallbacks)((()=>T(this,null,function*(){}))(),a,l),c}};lk.Meeting=i;class s extends i{constructor(t,i){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=e=>{var t;this.privIsConnected=!0;try{(null==(t=this.privConversationTranslator)?void 0:t.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(n){}},this.onDisconnected=e=>{var t;try{(null==(t=this.privConversationTranslator)?void 0:t.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(n){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{var n;try{(null==(n=this.privConversationTranslator)?void 0:n.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(r){}},this.onParticipantUpdateCommandReceived=(t,n)=>{try{const t=this.privParticipants.getParticipant(n.id);if(void 0!==t){switch(n.key){case e.ConversationTranslatorCommandTypes.changeNickname:t.displayName=n.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:t.isUsingTts=n.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:t.profanity=n.value;break;case e.ConversationTranslatorCommandTypes.setMute:t.isMuted=n.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:t.translateToLanguages=n.value}this.privParticipants.addOrUpdateParticipant(t),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(t)],n.sessionId))}}catch(i){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach(e=>e.isMuted=!e.isHost&&t.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(n){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(n){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(n){}},this.onTranslationReceived=(t,n)=>{try{switch(n.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(n.payload,void 0,n.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(n.payload,void 0,n.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(n.payload,void 0,n.sessionId))}}catch(i){}},this.onParticipantsListReceived=(e,t)=>{var n;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){const e=null==(n=this.privConversationTranslator)?void 0:n.properties.getProperty(r.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(i){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(n){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new e.ConversationManager,t.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||t.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=t.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=i,this.privConfig=t;const s=t;n.Contracts.throwIfNull(s,"speechConfig"),this.privProperties=s.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return!(null==(e=this.privParticipants.me)?void 0:e.isHost)&&(null==(t=this.privParticipants.me)?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const t=this.meetingId,n=this.participants.map(e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice})),r={};for(const i of e.ConversationConnectionConfig.transcriptionEventKeys){const e=this.properties.getProperty(i,"");""!==e&&(r[i]=e)}return{id:t,participants:n,meetingProperties:r}}get canSend(){var e;return this.privIsConnected&&!(null==(e=this.privParticipants.me)?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null==(e=this.privParticipants.me)?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){n.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}createMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,n=>{n||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=n,this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}startMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}addParticipantAsync(e,r,i){n.Contracts.throwIfNullOrUndefined(e,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(e),r,i)}joinMeetingAsync(e,t,r,i,s){try{n.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,e=>{n.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,i&&i(e.cognitiveSpeechAuthToken)},e=>{this.handleError(e,s)})}catch(o){this.handleError(o,s)}}deleteMeetingAsync(e,n){(0,t.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),e,n)}deleteMeetingImplAsync(){return T(this,null,function*(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endMeetingAsync(e,n){(0,t.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),e,n)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(e,t){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}muteAllParticipantsAsync(e,t){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}muteParticipantAsync(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}removeParticipantAsync(e,r,i){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(e),r,i);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),i);let t="";"string"==typeof e?t=e:e.hasOwnProperty("id")?t=e.id:e.hasOwnProperty("userId")&&(t=e.userId),n.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","userId")),-1===this.participants.findIndex(e=>e.id===t)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(t),()=>{this.handleCallback(r,i)},e=>{this.handleError(e,i)})}}catch(s){this.handleError(s,i)}}unlockMeetingAsync(e,t){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}unmuteAllParticipantsAsync(e,t){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}unmuteParticipantAsync(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}sendTextMessageAsync(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}setTranslatedLanguagesAsync(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}changeNicknameAsync(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(i){this.handleError(i,r)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return T(this,null,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this})}getKeepAlive(){const t=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:t,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"leave")}close(e){return T(this,null,function*(){var t;try{this.privIsConnected=!1,yield null==(t=this.privConversationRecognizer)?void 0:t.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(gie){throw gie}e&&this.dispose()})}handleCallback(e,t){if(e){try{e()}catch(gie){t&&t(gie)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const n=e;t(n.name+": "+n.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map(e=>this.toParticipant(e));return e?t:t.filter(e=>!1===e.isHost)}toParticipant(e){return new r.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getMuteCommand(t,r){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(t,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:t,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:r})}getLockCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getEjectCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(t,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:t,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getChangeNicknameCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(t,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:t,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getMessageCommand(t){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(t,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:t,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return lk.MeetingImpl=s,lk}();Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return p.Meeting}}),Object.defineProperty(e,"MeetingImpl",{enumerable:!0,get:function(){return p.MeetingImpl}});var h=function(){if(ik)return ck;ik=1,Object.defineProperty(ck,"__esModule",{value:!0}),ck.MeetingTranscriptionCanceledEventArgs=void 0;const e=AP();class t extends e.CancellationEventArgsBase{}return ck.MeetingTranscriptionCanceledEventArgs=t,ck}();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var f=function(){if(sk)return uk;sk=1,Object.defineProperty(uk,"__esModule",{value:!0}),uk.MeetingTranscriber=void 0;const e=fO(),t=OT(),n=XT,r=sj(),i=pk();return uk.MeetingTranscriber=class{constructor(e){this.privAudioConfig=e,this.privProperties=new r.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return r.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){n.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,e)}joinMeetingAsync(r,s,o){const a=r;n.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(r.config,this.privAudioConfig),n.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,t.marshalPromiseToCallbacks)(a.connectTranscriberRecognizer(this.privRecognizer),s,o)}startTranscribingAsync(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)}stopTranscribingAsync(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)}leaveMeetingAsync(e,n){this.privRecognizer.disconnectCallbacks(),(0,t.marshalPromiseToCallbacks)((()=>T(this,null,function*(){}))(),e,n)}close(e,r){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}dispose(e){return T(this,null,function*(){this.privDisposedRecognizer||(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))})}},uk}();Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return f.MeetingTranscriber}});var m=function(){if(ok)return dk;ok=1,Object.defineProperty(dk,"__esModule",{value:!0}),dk.ConversationTranscriptionResult=void 0;const e=sj();let t=class extends e.RecognitionResult{constructor(e,t,n,r,i,s,o,a,l,c,u){super(e,t,n,r,i,s,o,l,c,u),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}};return dk.ConversationTranscriptionResult=t,dk}();Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return m.ConversationTranscriptionResult}})}(_I)),_I}var hk,fk={};function mk(){if(hk)return fk;hk=1,Object.defineProperty(fk,"__esModule",{value:!0}),fk.SynthesisRequest=fk.Synthesizer=void 0;const e=fO(),t=OT(),n=XT,r=sj();return fk.Synthesizer=class i{constructor(e){const r=e;n.Contracts.throwIfNull(r,"speechConfig"),this.privProperties=r.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue,this.tokenCredential=e.tokenCredential}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){n.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(e){const t={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let n=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),s=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,""),o=i.XMLEncode(e);return this.autoDetectSourceLanguage?n="en-US":s=s||t[n],s&&(o=`<voice name='${s}'>${o}</voice>`),o=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${n}'>${o}</speak>`,o}dispose(e){return T(this,null,function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)})}adapterSpeak(){return T(this,null,function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}})}createSynthesizerConfig(t){return new e.SynthesizerConfig(t,this.privProperties)}implCommonSynthesizeSetup(){let t="undefined"!=typeof window?"Browser":"Node",n="unknown",i="unknown";"undefined"!=typeof navigator&&(t=t+"/"+navigator.platform,n=navigator.userAgent,i=navigator.appVersion);const s=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(t,n,i)))),o=this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0),a=o&&""!==o?new e.CognitiveSubscriptionKeyAuthentication(o):this.tokenCredential?new e.CognitiveTokenAuthentication(()=>T(this,null,function*(){var e;try{const t=yield this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return null!=(e=null==t?void 0:t.token)?e:""}catch(yie){throw yie}}),()=>T(this,null,function*(){var e;try{const t=yield this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return null!=(e=null==t?void 0:t.token)?e:""}catch(yie){throw yie}})):new e.CognitiveTokenAuthentication(()=>{const e=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)},()=>{const e=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)});this.privAdapter=this.createSynthesisAdapter(a,this.privConnectionFactory,s),this.privRestAdapter=this.createRestSynthesisAdapter(a,s)}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}},fk.SynthesisRequest=class{constructor(e,t,n,r,i,s){this.requestId=e,this.text=t,this.isSSML=n,this.cb=r,this.err=i,this.dataStream=s}},fk}var vk,gk={},yk={};Object.defineProperty(yk,"__esModule",{value:!0}),yk.SynthesisResult=void 0,yk.SynthesisResult=class{constructor(e,t,n,r){this.privResultId=e,this.privReason=t,this.privErrorDetails=n,this.privProperties=r}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};var bk,xk={},wk={};Object.defineProperty(wk,"__esModule",{value:!0}),wk.SpeechSynthesisEventArgs=void 0,wk.SpeechSynthesisEventArgs=class{constructor(e){this.privResult=e}get result(){return this.privResult}};var Sk={};Object.defineProperty(Sk,"__esModule",{value:!0}),Sk.SpeechSynthesisWordBoundaryEventArgs=void 0,Sk.SpeechSynthesisWordBoundaryEventArgs=class{constructor(e,t,n,r,i,s){this.privAudioOffset=e,this.privDuration=t,this.privText=n,this.privWordLength=r,this.privTextOffset=i,this.privBoundaryType=s}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};var Ck={};Object.defineProperty(Ck,"__esModule",{value:!0}),Ck.SpeechSynthesisBookmarkEventArgs=void 0,Ck.SpeechSynthesisBookmarkEventArgs=class{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};var Ek={};Object.defineProperty(Ek,"__esModule",{value:!0}),Ek.SpeechSynthesisVisemeEventArgs=void 0,Ek.SpeechSynthesisVisemeEventArgs=class{constructor(e,t,n){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};var Tk={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisBoundaryType=void 0,(t=e.SpeechSynthesisBoundaryType||(e.SpeechSynthesisBoundaryType={})).Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"}(Tk);var Nk,Pk={},Rk={};!function(e){var t,n,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=void 0,(n=t=e.SynthesisVoiceGender||(e.SynthesisVoiceGender={}))[n.Unknown=0]="Unknown",n[n.Female=1]="Female",n[n.Male=2]="Male",n[n.Neutral=3]="Neutral",(i=r=e.SynthesisVoiceType||(e.SynthesisVoiceType={}))[i.Unknown=0]="Unknown",i[i.OnlineNeural=1]="OnlineNeural",i[i.OnlineStandard=2]="OnlineStandard",i[i.OfflineNeural=3]="OfflineNeural",i[i.OfflineStandard=4]="OfflineStandard",i[i.OnlineNeuralHD=5]="OnlineNeuralHD";const s={[t[t.Neutral]]:t.Neutral,[t[t.Male]]:t.Male,[t[t.Female]]:t.Female},o={Neural:r.OnlineNeural,NeuralHD:r.OnlineNeuralHD};e.VoiceInfo=class{constructor(e){if(this.privStyleList=[],e){if(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=o[e.VoiceType]||r.Unknown,this.privGender=s[e.Gender]||t.Unknown,e.StyleList&&Array.isArray(e.StyleList))for(const t of e.StyleList)this.privStyleList.push(t);this.privSampleRateHertz=e.SampleRateHertz,this.privStatus=e.Status,e.ExtendedPropertyMap&&(this.privExtendedPropertyMap=e.ExtendedPropertyMap),this.privWordsPerMinute=e.WordsPerMinute,Array.isArray(e.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...e.SecondaryLocaleList]),Array.isArray(e.RolePlayList)&&(this.privRolePlayList=[...e.RolePlayList]),e.VoiceTag&&(this.privVoiceTag=e.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}}(Rk);var Ik={};Object.defineProperty(Ik,"__esModule",{value:!0}),Ik.SpeakerAudioDestination=void 0;const kk=OT(),jk=VN,_k=uN,Ak={[_k.AudioFormatTag.PCM]:"audio/wav",[_k.AudioFormatTag.MuLaw]:"audio/x-wav",[_k.AudioFormatTag.MP3]:"audio/mpeg",[_k.AudioFormatTag.OGG_OPUS]:"audio/ogg",[_k.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[_k.AudioFormatTag.ALaw]:"audio/x-wav",[_k.AudioFormatTag.FLAC]:"audio/flac",[_k.AudioFormatTag.AMR_WB]:"audio/amr-wb",[_k.AudioFormatTag.G722]:"audio/G722"};Ik.SpeakerAudioDestination=class{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||(0,kk.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,n){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{t&&t()},e=>{n&&n(e)})):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},e=>{t&&t(e)});else if(void 0!==this.privAudioOutputStream&&"undefined"!=typeof window)if(this.privFormat.formatTag!==_k.AudioFormatTag.PCM&&this.privFormat.formatTag!==_k.AudioFormatTag.MuLaw&&this.privFormat.formatTag!==_k.AudioFormatTag.ALaw||!1!==this.privFormat.hasHeader){let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then(()=>{n=this.privFormat.addHeader(n);const r=new Blob([n],{type:Ak[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(r),this.notifyPlayback().then(()=>{e&&e()},e=>{t&&t(e)})},e=>{t&&t(e)})}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!=typeof AudioContext||"undefined"!=typeof window&&void 0!==window.webkitAudioContext){this.privFormat=e;const t=Ak[this.privFormat.formatTag];void 0===t?console.warn(`Unknown mimeType for format ${_k.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(e=>{kk.Events.instance.onEvent(new kk.BackgroundEvent(e))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(e=>{kk.Events.instance.onEvent(new kk.BackgroundEvent(e))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(e=>{kk.Events.instance.onEvent(new kk.BackgroundEvent(e))})):(console.warn(`Format ${_k.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new jk.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e,t;return null!=(t=null==(e=this.privAudio)?void 0:e.volume)?t:-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then(()=>{e&&e()},e=>{t&&t(e)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return T(this,null,function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch(e){return this.privAudioBuffer.unshift(t),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())})}handleSourceBufferUpdateEnd(){return T(this,null,function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())})}notifyPlayback(){return T(this,null,function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))})}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}};var Ok,Dk,Mk={},Lk={},zk={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGradingSystem=void 0,(t=e.PronunciationAssessmentGradingSystem||(e.PronunciationAssessmentGradingSystem={}))[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"}(zk);var Fk={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGranularity=void 0,(t=e.PronunciationAssessmentGranularity||(e.PronunciationAssessmentGranularity={}))[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"}(Fk);var Bk,Uk,Wk,$k={},Hk={},Vk={},qk={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarEventArgs=e.AvatarEventTypes=void 0,(t=e.AvatarEventTypes||(e.AvatarEventTypes={})).SwitchedToSpeaking="SwitchedToSpeaking",t.SwitchedToIdle="SwitchedToIdle",t.SessionClosed="SessionClosed",e.AvatarEventArgs=class{constructor(e,t){this.privOffset=e,this.privDescription=t}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}}(qk);var Gk,Kk,Jk={},Yk={};function Zk(){if(Gk)return Yk;Gk=1,Object.defineProperty(Yk,"__esModule",{value:!0}),Yk.SpeechSynthesisConnectionFactory=void 0;const e=mj(),t=sj(),n=GR(),r=fO(),i=DT,s=VR;return Yk.SpeechSynthesisConnectionFactory=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}create(o,a,l){return T(this,null,function*(){let c=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const u=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),d=n.ConnectionFactoryBase.getHostSuffix(u),p=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),h=void 0===p?"tts":"voice",f=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+u+"."+h+".speech"+d),m={},v={};if(void 0!==a.token&&""!==a.token&&(v[a.headerName]=a.token),v[i.HeaderNames.ConnectionId]=l,void 0!==p&&""!==p&&(c&&-1!==c.search(s.QueryParameterNames.CustomVoiceDeploymentId)||(m[s.QueryParameterNames.CustomVoiceDeploymentId]=p)),o.avatarEnabled&&(c&&-1!==c.search(s.QueryParameterNames.EnableAvatar)||(m[s.QueryParameterNames.EnableAvatar]="true")),c){const e=new URL(c),t=e.pathname;""!==t&&"/"!==t||(e.pathname=this.synthesisUri,c=yield n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(e.toString()))}c||(c=f+this.synthesisUri),o.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,c);const g="true"===o.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new e.WebsocketConnection(c,m,v,new r.WebsocketMessageFormatter,e.ProxyInfo.fromParameters(o.parameters),g,l)})}},Yk}var Qk={};Object.defineProperty(Qk,"__esModule",{value:!0}),Qk.AvatarVideoFormat=Qk.Coordinate=void 0,Qk.Coordinate=class{constructor(e,t){this.x=e,this.y=t}},Qk.AvatarVideoFormat=class{constructor(e="H264",t=2e6,n=1920,r=1080){this.codec=e,this.bitrate=t,this.width=n,this.height=r}setCropRange(e,t){this.cropRange={bottomRight:t,topLeft:e}}};var Xk,ej,tj,nj,rj={},ij={};function sj(){return tj||(tj=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionEventArgs=e.CancellationErrorCode=e.CancellationDetails=e.CancellationDetailsBase=e.IntentRecognitionCanceledEventArgs=e.TranslationRecognitionCanceledEventArgs=e.NoMatchDetails=e.NoMatchReason=e.Translations=e.TranslationRecognizer=e.VoiceProfileType=e.IntentRecognizer=e.SpeechRecognizer=e.Recognizer=e.PropertyId=e.PropertyCollection=e.SpeechTranslationConfigImpl=e.SpeechTranslationConfig=e.SpeechConfigImpl=e.SpeechConfig=e.ResultReason=e.TranslationSynthesisResult=e.TranslationRecognitionResult=e.TranslationSynthesisEventArgs=e.TranslationRecognitionEventArgs=e.SpeechRecognitionCanceledEventArgs=e.MeetingTranscriptionEventArgs=e.ConversationTranscriptionEventArgs=e.SpeechRecognitionEventArgs=e.LanguageUnderstandingModel=e.IntentRecognitionResult=e.SpeechRecognitionResult=e.RecognitionResult=e.IntentRecognitionEventArgs=e.OutputFormat=e.RecognitionEventArgs=e.SessionEventArgs=e.KeywordRecognitionModel=e.PushAudioOutputStreamCallback=e.PullAudioInputStreamCallback=e.CancellationReason=e.PushAudioOutputStream=e.PullAudioOutputStream=e.AudioOutputStream=e.PushAudioInputStream=e.PullAudioInputStream=e.AudioInputStream=e.AudioFormatTag=e.AudioStreamFormat=e.AudioConfig=void 0,e.SpeechSynthesisEventArgs=e.SpeechSynthesisResult=e.SynthesisResult=e.SpeechSynthesizer=e.SpeechSynthesisOutputFormat=e.Synthesizer=e.User=e.ParticipantChangedReason=e.Participant=e.MeetingTranscriber=e.Meeting=e.ConversationTranscriptionResult=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.Conversation=e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResultType=e.SpeakerRecognitionResult=e.SourceLanguageConfig=e.AutoDetectSourceLanguageResult=e.AutoDetectSourceLanguageConfig=e.SpeakerVerificationModel=e.SpeakerIdentificationModel=e.SpeakerRecognizer=e.VoiceProfileClient=e.VoiceProfilePhraseResult=e.VoiceProfileCancellationDetails=e.VoiceProfileResult=e.VoiceProfileEnrollmentCancellationDetails=e.VoiceProfileEnrollmentResult=e.VoiceProfile=e.ConnectionMessage=e.ConnectionMessageEventArgs=e.BaseAudioPlayer=e.ProfanityOption=e.ServicePropertyChannel=e.TurnStatusReceivedEventArgs=e.ActivityReceivedEventArgs=e.DialogServiceConnector=e.CustomCommandsConfig=e.BotFrameworkConfig=e.DialogServiceConfig=e.PhraseListGrammar=e.Connection=e.ServiceEventArgs=void 0,e.LogLevel=e.Diagnostics=e.AvatarWebRTCConnectionResult=e.Coordinate=e.AvatarVideoFormat=e.AvatarSynthesizer=e.AvatarEventArgs=e.AvatarConfig=e.LanguageIdMode=e.PronunciationAssessmentResult=e.PronunciationAssessmentConfig=e.PronunciationAssessmentGranularity=e.PronunciationAssessmentGradingSystem=e.MeetingTranscriptionCanceledEventArgs=e.ConversationTranscriptionCanceledEventArgs=e.SpeakerAudioDestination=e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=e.SynthesisVoicesResult=e.SpeechSynthesisBoundaryType=e.SpeechSynthesisVisemeEventArgs=e.SpeechSynthesisBookmarkEventArgs=e.SpeechSynthesisWordBoundaryEventArgs=void 0;var t=oP();Object.defineProperty(e,"AudioConfig",{enumerable:!0,get:function(){return t.AudioConfig}});var n=uN;Object.defineProperty(e,"AudioStreamFormat",{enumerable:!0,get:function(){return n.AudioStreamFormat}}),Object.defineProperty(e,"AudioFormatTag",{enumerable:!0,get:function(){return n.AudioFormatTag}});var r=HN();Object.defineProperty(e,"AudioInputStream",{enumerable:!0,get:function(){return r.AudioInputStream}}),Object.defineProperty(e,"PullAudioInputStream",{enumerable:!0,get:function(){return r.PullAudioInputStream}}),Object.defineProperty(e,"PushAudioInputStream",{enumerable:!0,get:function(){return r.PushAudioInputStream}});var i=VN;Object.defineProperty(e,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(e,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(e,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var s=aP;Object.defineProperty(e,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var o=lP;Object.defineProperty(e,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return o.PullAudioInputStreamCallback}});var a=cP;Object.defineProperty(e,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return a.PushAudioOutputStreamCallback}});var l=uP;Object.defineProperty(e,"KeywordRecognitionModel",{enumerable:!0,get:function(){return l.KeywordRecognitionModel}});var c=pP;Object.defineProperty(e,"SessionEventArgs",{enumerable:!0,get:function(){return c.SessionEventArgs}});var u=function(){if(hP)return fP;hP=1,Object.defineProperty(fP,"__esModule",{value:!0}),fP.RecognitionEventArgs=void 0;const e=sj();let t=class extends e.SessionEventArgs{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}};return fP.RecognitionEventArgs=t,fP}();Object.defineProperty(e,"RecognitionEventArgs",{enumerable:!0,get:function(){return u.RecognitionEventArgs}});var d=mP;Object.defineProperty(e,"OutputFormat",{enumerable:!0,get:function(){return d.OutputFormat}});var p=function(){if(vP)return gP;vP=1,Object.defineProperty(gP,"__esModule",{value:!0}),gP.IntentRecognitionEventArgs=void 0;const e=sj();let t=class extends e.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}};return gP.IntentRecognitionEventArgs=t,gP}();Object.defineProperty(e,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return p.IntentRecognitionEventArgs}});var h=yP;Object.defineProperty(e,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var f=function(){if(bP)return wP;bP=1,Object.defineProperty(wP,"__esModule",{value:!0}),wP.SpeechRecognitionResult=void 0;const e=sj();let t=class extends e.RecognitionResult{constructor(e,t,n,r,i,s,o,a,l,c,u){super(e,t,n,r,i,s,o,l,c,u),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}};return wP.SpeechRecognitionResult=t,wP}();Object.defineProperty(e,"SpeechRecognitionResult",{enumerable:!0,get:function(){return f.SpeechRecognitionResult}});var m=function(){if(xP)return SP;xP=1,Object.defineProperty(SP,"__esModule",{value:!0}),SP.IntentRecognitionResult=void 0;const e=sj();let t=class extends e.SpeechRecognitionResult{constructor(e,t,n,r,i,s,o,a,l,c,u){super(t,n,r,i,s,o,a,void 0,l,c,u),this.privIntentId=e}get intentId(){return this.privIntentId}};return SP.IntentRecognitionResult=t,SP}();Object.defineProperty(e,"IntentRecognitionResult",{enumerable:!0,get:function(){return m.IntentRecognitionResult}});var v=CP;Object.defineProperty(e,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return v.LanguageUnderstandingModel}});var g=function(){if(PP)return kP;PP=1,Object.defineProperty(kP,"__esModule",{value:!0}),kP.MeetingTranscriptionEventArgs=kP.ConversationTranscriptionEventArgs=kP.SpeechRecognitionEventArgs=void 0;const e=sj();let t=class extends e.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}};kP.SpeechRecognitionEventArgs=t;class n extends e.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}return kP.ConversationTranscriptionEventArgs=n,kP.MeetingTranscriptionEventArgs=class extends t{},kP}();Object.defineProperty(e,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return g.SpeechRecognitionEventArgs}}),Object.defineProperty(e,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return g.ConversationTranscriptionEventArgs}}),Object.defineProperty(e,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return g.MeetingTranscriptionEventArgs}});var y=function(){if(IP)return jP;IP=1,Object.defineProperty(jP,"__esModule",{value:!0}),jP.SpeechRecognitionCanceledEventArgs=void 0;const e=AP();let t=class extends e.CancellationEventArgsBase{};return jP.SpeechRecognitionCanceledEventArgs=t,jP}();Object.defineProperty(e,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return y.SpeechRecognitionCanceledEventArgs}});var b=function(){if(OP)return LP;OP=1,Object.defineProperty(LP,"__esModule",{value:!0}),LP.TranslationRecognitionEventArgs=void 0;const e=sj();let t=class extends e.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}};return LP.TranslationRecognitionEventArgs=t,LP}();Object.defineProperty(e,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return b.TranslationRecognitionEventArgs}});var x=function(){if(DP)return zP;DP=1,Object.defineProperty(zP,"__esModule",{value:!0}),zP.TranslationSynthesisEventArgs=void 0;const e=sj();let t=class extends e.SessionEventArgs{constructor(e,t){super(t),this.privResult=e}get result(){return this.privResult}};return zP.TranslationSynthesisEventArgs=t,zP}();Object.defineProperty(e,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return x.TranslationSynthesisEventArgs}});var w=BP();Object.defineProperty(e,"TranslationRecognitionResult",{enumerable:!0,get:function(){return w.TranslationRecognitionResult}});var S=UP;Object.defineProperty(e,"TranslationSynthesisResult",{enumerable:!0,get:function(){return S.TranslationSynthesisResult}});var C=WP;Object.defineProperty(e,"ResultReason",{enumerable:!0,get:function(){return C.ResultReason}});var N=function(){if($P)return qP;$P=1,Object.defineProperty(qP,"__esModule",{value:!0}),qP.SpeechConfigImpl=qP.SpeechConfig=void 0;const e=fO(),t=XT,n=sj();let r=class{constructor(){}static fromSubscription(e,r){t.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(r,"region");const s=new i;return s.setProperty(n.PropertyId.SpeechServiceConnection_Region,r),s.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,r),s.setProperty(n.PropertyId.SpeechServiceConnection_Key,e),s}static fromEndpoint(e,r){t.Contracts.throwIfNull(e,"endpoint");const s="string"==typeof r&&r.trim().length>0,o="object"==typeof r&&null!==r&&"function"==typeof r.getToken,a="object"==typeof r&&null!==r&&"string"==typeof r.key;if(void 0!==r&&!s&&!o&&!a)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let l;return"string"==typeof r?(l=new i,l.setProperty(n.PropertyId.SpeechServiceConnection_Key,r)):"object"==typeof r&&"function"==typeof r.getToken?l=new i(r):"object"==typeof r&&"string"==typeof r.key?(l=new i,l.setProperty(n.PropertyId.SpeechServiceConnection_Key,r.key)):l=new i,l.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,e.href),l}static fromHost(e,r){t.Contracts.throwIfNull(e,"hostName");const s=new i;return s.setProperty(n.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),s.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),void 0!==r&&s.setProperty(n.PropertyId.SpeechServiceConnection_Key,r),s}static fromAuthorizationToken(e,r){t.Contracts.throwIfNull(e,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(r,"region");const s=new i;return s.setProperty(n.PropertyId.SpeechServiceConnection_Region,r),s.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,r),s.authorizationToken=e,s}close(){}};qP.SpeechConfig=r;class i extends r{constructor(e){super(),this.privProperties=new n.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=n.OutputFormat.Simple,this.privTokenCredential=e}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return n.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(t){this.privProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[t])}get endpointId(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,e)}get tokenCredential(){return this.privTokenCredential}setProperty(e,n){t.Contracts.throwIfNull(n,"value"),this.privProperties.setProperty(e,n)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,r,i){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],i)}setServiceProperty(t,n){const r=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));r[t]=n,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[e])}enableAudioLogging(){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(e.ForceDictationPropertyName,"true")}clone(){const e=new i(this.tokenCredential);return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[e])}}return qP.SpeechConfigImpl=i,qP}();Object.defineProperty(e,"SpeechConfig",{enumerable:!0,get:function(){return N.SpeechConfig}}),Object.defineProperty(e,"SpeechConfigImpl",{enumerable:!0,get:function(){return N.SpeechConfigImpl}});var P=function(){if(HP)return GP;HP=1,Object.defineProperty(GP,"__esModule",{value:!0}),GP.SpeechTranslationConfigImpl=GP.SpeechTranslationConfig=void 0;const e=fO(),t=XT,n=sj();let r=class extends n.SpeechConfig{constructor(){super()}static fromSubscription(e,r){t.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(r,"region");const s=new i;return s.properties.setProperty(n.PropertyId.SpeechServiceConnection_Key,e),s.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,r),s}static fromAuthorizationToken(e,r){t.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(r,"region");const s=new i;return s.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,e),s.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,r),s}static fromHost(e,r){t.Contracts.throwIfNull(e,"hostName");const s=new i;return s.setProperty(n.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==r&&s.setProperty(n.PropertyId.SpeechServiceConnection_Key,r),s}static fromEndpoint(e,r){t.Contracts.throwIfNull(e,"endpoint");const s="string"==typeof r&&r.trim().length>0,o="object"==typeof r&&null!==r&&"function"==typeof r.getToken,a="object"==typeof r&&null!==r&&"string"==typeof r.key;if(void 0!==r&&!s&&!o&&!a)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let l;return"string"==typeof r?(l=new i,l.setProperty(n.PropertyId.SpeechServiceConnection_Key,r)):"object"==typeof r&&"function"==typeof r.getToken?l=new i(r):"object"==typeof r&&"string"==typeof r.key?(l=new i,l.setProperty(n.PropertyId.SpeechServiceConnection_Key,r.key)):l=new i,l.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,e.href),l}};GP.SpeechTranslationConfig=r;class i extends r{constructor(e){super(),this.privSpeechProperties=new n.PropertyCollection,this.outputFormat=n.OutputFormat.Simple,this.privTokenCredential=e}set authorizationToken(e){t.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){t.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return n.OutputFormat[this.privSpeechProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(t){this.privSpeechProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[t])}get endpointId(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){t.Contracts.throwIfNullOrWhitespace(e,"value");const r=this.targetLanguages;r.includes(e)||(r.push(e),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,r.join(",")))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(e){t.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(e,t,r,i){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],i)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(t,n){const r=JSON.parse(this.privSpeechProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));r[t]=n,this.privSpeechProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(e.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[e])}}return GP.SpeechTranslationConfigImpl=i,GP}();Object.defineProperty(e,"SpeechTranslationConfig",{enumerable:!0,get:function(){return P.SpeechTranslationConfig}}),Object.defineProperty(e,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return P.SpeechTranslationConfigImpl}});var R=JP();Object.defineProperty(e,"PropertyCollection",{enumerable:!0,get:function(){return R.PropertyCollection}});var I=YP;Object.defineProperty(e,"PropertyId",{enumerable:!0,get:function(){return I.PropertyId}});var k=function(){if(ZP)return XP;ZP=1,Object.defineProperty(XP,"__esModule",{value:!0}),XP.Recognizer=void 0;const e=fO(),t=OT(),n=XT,r=sj();return XP.Recognizer=class i{constructor(e,t,n,i){this.audioConfig=void 0!==e?e:r.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=n,this.tokenCredential=i,this.implCommonRecognizerSetup()}close(e,r){n.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}get internalData(){return this.privReco}dispose(e){return T(this,null,function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))})}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(t){e.ServiceRecognizerBase.telemetryDataEnabled=t}implCommonRecognizerSetup(){let t="undefined"!=typeof window?"Browser":"Node",n="unknown",r="unknown";"undefined"!=typeof navigator&&(t=t+"/"+navigator.platform,n=navigator.userAgent,r=navigator.appVersion);const s=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(t,n,r))));this.privReco=this.createServiceRecognizer(i.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,s)}recognizeOnceAsyncImpl(e){return T(this,null,function*(){n.Contracts.throwIfDisposed(this.privDisposed);const r=new t.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(e,r.resolve,r.reject);const i=yield r.promise;return yield this.implRecognizerStop(),i})}startContinuousRecognitionAsyncImpl(e){return T(this,null,function*(){n.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)})}stopContinuousRecognitionAsyncImpl(){return T(this,null,function*(){n.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()})}implRecognizerStop(){return T(this,null,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}static getAuth(t,n){const i=t.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0);return i&&""!==i?new e.CognitiveSubscriptionKeyAuthentication(i):n?new e.CognitiveTokenAuthentication(()=>T(this,null,function*(){var e;try{const t=yield n.getToken("https://cognitiveservices.azure.com/.default");return null!=(e=null==t?void 0:t.token)?e:""}catch(yie){throw yie}}),()=>T(this,null,function*(){var e;try{const t=yield n.getToken("https://cognitiveservices.azure.com/.default");return null!=(e=null==t?void 0:t.token)?e:""}catch(yie){throw yie}})):new e.CognitiveTokenAuthentication(()=>{const e=t.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)},()=>{const e=t.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)})}},XP}();Object.defineProperty(e,"Recognizer",{enumerable:!0,get:function(){return k.Recognizer}});var j=function(){if(QP)return eR;QP=1,Object.defineProperty(eR,"__esModule",{value:!0}),eR.SpeechRecognizer=void 0;const e=fO(),t=tR,n=OT(),r=XT,i=sj();let s=class s extends i.Recognizer{constructor(t,n){const s=t;r.Contracts.throwIfNull(s,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(s.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(n,s.properties,new e.SpeechConnectionFactory,t.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(e,t,n){const r=e;return t.properties.mergeTo(r.properties),new s(e,n)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,r){(0,n.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),e,r)}startContinuousRecognitionAsync(r,i){(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(void 0===this.properties.getProperty(e.ForceDictationPropertyName,void 0)?t.RecognitionMode.Conversation:t.RecognitionMode.Dictation),r,i)}stopContinuousRecognitionAsync(e,t){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,n){r.Contracts.throwIfNull(e,"model"),n&&n("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,t){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}dispose(e){return T(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield E(s.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(t,n,r,i){const s=r;return new e.SpeechServiceRecognizer(t,n,s,i,this)}};return eR.SpeechRecognizer=s,eR}();Object.defineProperty(e,"SpeechRecognizer",{enumerable:!0,get:function(){return j.SpeechRecognizer}});var _=function(){if(nR)return rR;nR=1,Object.defineProperty(rR,"__esModule",{value:!0}),rR.IntentRecognizer=void 0;const e=fO(),t=tR,n=OT(),r=XT,i=sj();let s=class s extends i.Recognizer{constructor(t,n){r.Contracts.throwIfNullOrUndefined(t,"speechConfig");const s=t;r.Contracts.throwIfNullOrUndefined(s,"speechConfig"),super(n,s.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=s.properties,r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,i){if(r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=e.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,n.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),e,i)}startContinuousRecognitionAsync(e,r){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=e.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),e,r)}stopContinuousRecognitionAsync(e,t){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,n){r.Contracts.throwIfNull(e,"model"),n&&n("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){if(e)try{e()}catch(gie){t&&t(gie)}}addIntent(e,t){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(t,"intentId"),r.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])}addIntentWithLanguageModel(t,n,i){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(t,"intentId"),r.Contracts.throwIfNull(n,"model");const s=n;r.Contracts.throwIfNullOrWhitespace(s.appId,"model.appId"),this.privAddedLmIntents[t]=new e.AddedLmIntent(s,i)}addAllIntents(t,n){r.Contracts.throwIfNull(t,"model");const i=t;r.Contracts.throwIfNullOrWhitespace(i.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(i,n)}close(e,t){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(t,n,r,i){const s=r;return new e.IntentServiceRecognizer(t,n,s,i,this)}dispose(e){return T(this,null,function*(){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,yield E(s.prototype,this,"dispose").call(this,e))})}buildSpeechContext(){let e,t,n;const r=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,n=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const i of Object.keys(this.privAddedLmIntents)){const s=this.privAddedLmIntents[i];if(void 0===e)e=s.modelImpl.appId;else if(e!==s.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=s.modelImpl.region;else if(t!==s.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===n)n=s.modelImpl.subscriptionKey;else if(n!==s.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const o="luis/"+e+"-PRODUCTION#"+i;r.push(o)}return{Intent:{id:e,key:void 0===n?this.privProperties.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_Key]):n,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?r:["luis/"+e+"-PRODUCTION"]}}};return rR.IntentRecognizer=s,rR}();Object.defineProperty(e,"IntentRecognizer",{enumerable:!0,get:function(){return _.IntentRecognizer}});var A=iR;Object.defineProperty(e,"VoiceProfileType",{enumerable:!0,get:function(){return A.VoiceProfileType}});var O=function(){if(aR)return lR;aR=1,Object.defineProperty(lR,"__esModule",{value:!0}),lR.TranslationRecognizer=void 0;const e=fO(),t=tR,n=OT(),r=pR(),i=XT,s=sj();let o=class o extends s.Recognizer{constructor(t,n,r){const o=t;i.Contracts.throwIfNull(o,"speechConfig"),super(n,o.properties,r||new e.TranslationConnectionFactory,t.tokenCredential),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice),s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationVoice]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages),s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationToLanguages]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(t,n,r){const i=t;return n.properties.mergeTo(i.properties),n.properties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===e.AutoDetectSourceLanguagesOpenRangeOptionName&&i.properties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new o(t,r)}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,r){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,n.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),e,r)}startContinuousRecognitionAsync(e,r){(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),e,r)}stopContinuousRecognitionAsync(e,t){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}removeTargetLanguage(e){if(i.Contracts.throwIfNullOrUndefined(e,"language to be removed"),void 0!==this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){const t=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),n=t.indexOf(e);n>-1&&(t.splice(n,1),this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}}addTargetLanguage(e){i.Contracts.throwIfNullOrUndefined(e,"language to be added");let t=[];void 0!==this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(t=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),t.includes(e)||(t.push(e),this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))):(this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)}close(e,t){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}onConnection(){}dispose(e){return T(this,null,function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield E(o.prototype,this,"dispose").call(this,e)))})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(t,n,r,i){const s=r;return new e.TranslationServiceRecognizer(t,n,s,i,this)}updateLanguages(e){const t=r.Connection.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}};return lR.TranslationRecognizer=o,lR}();Object.defineProperty(e,"TranslationRecognizer",{enumerable:!0,get:function(){return O.TranslationRecognizer}});var D=function(){if(hR)return fR;hR=1,Object.defineProperty(fR,"__esModule",{value:!0}),fR.Translations=void 0;const e=sj();return fR.Translations=class{constructor(){this.privMap=new e.PropertyCollection}get languages(){return this.privMap.keys}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}},fR}();Object.defineProperty(e,"Translations",{enumerable:!0,get:function(){return D.Translations}});var M=mR;Object.defineProperty(e,"NoMatchReason",{enumerable:!0,get:function(){return M.NoMatchReason}});var L=function(){if(vR)return gR;vR=1,Object.defineProperty(gR,"__esModule",{value:!0}),gR.NoMatchDetails=void 0;const e=fO(),t=sj();return gR.NoMatchDetails=class n{constructor(e){this.privReason=e}static fromResult(r){const i=e.SimpleSpeechPhrase.fromJSON(r.json,0);let s=t.NoMatchReason.NotRecognized;switch(i.RecognitionStatus){case e.RecognitionStatus.BabbleTimeout:s=t.NoMatchReason.InitialBabbleTimeout;break;case e.RecognitionStatus.InitialSilenceTimeout:s=t.NoMatchReason.InitialSilenceTimeout;break;default:s=t.NoMatchReason.NotRecognized}return new n(s)}get reason(){return this.privReason}},gR}();Object.defineProperty(e,"NoMatchDetails",{enumerable:!0,get:function(){return L.NoMatchDetails}});var z=yR;Object.defineProperty(e,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return z.TranslationRecognitionCanceledEventArgs}});var F=function(){if(bR)return xR;bR=1,Object.defineProperty(xR,"__esModule",{value:!0}),xR.IntentRecognitionCanceledEventArgs=void 0;const e=sj();let t=class extends e.IntentRecognitionEventArgs{constructor(e,t,n,r,i,s){super(r,i,s),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return xR.IntentRecognitionCanceledEventArgs=t,xR}();Object.defineProperty(e,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return F.IntentRecognitionCanceledEventArgs}});var B=wR;Object.defineProperty(e,"CancellationDetailsBase",{enumerable:!0,get:function(){return B.CancellationDetailsBase}});var U=function(){if(SR)return CR;SR=1,Object.defineProperty(CR,"__esModule",{value:!0}),CR.CancellationDetails=void 0;const e=fO(),t=wR,n=sj();let r=class r extends t.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(t){let i=n.CancellationReason.Error,s=n.CancellationErrorCode.NoError;if(t instanceof n.RecognitionResult&&t.json){const n=e.SimpleSpeechPhrase.fromJSON(t.json,0);i=e.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus)}return t.properties&&(s=n.CancellationErrorCode[t.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new r(i,t.errorDetails||e.EnumTranslation.implTranslateErrorDetails(s),s)}};return CR.CancellationDetails=r,CR}();Object.defineProperty(e,"CancellationDetails",{enumerable:!0,get:function(){return U.CancellationDetails}});var W=ER;Object.defineProperty(e,"CancellationErrorCode",{enumerable:!0,get:function(){return W.CancellationErrorCode}});var $=function(){if(TR)return PR;TR=1,Object.defineProperty(PR,"__esModule",{value:!0}),PR.ConnectionEventArgs=void 0;const e=sj();let t=class extends e.SessionEventArgs{};return PR.ConnectionEventArgs=t,PR}();Object.defineProperty(e,"ConnectionEventArgs",{enumerable:!0,get:function(){return $.ConnectionEventArgs}});var H=function(){if(NR)return RR;NR=1,Object.defineProperty(RR,"__esModule",{value:!0}),RR.ServiceEventArgs=void 0;const e=sj();let t=class extends e.SessionEventArgs{constructor(e,t,n){super(n),this.privJsonResult=e,this.privEventName=t}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return RR.ServiceEventArgs=t,RR}();Object.defineProperty(e,"ServiceEventArgs",{enumerable:!0,get:function(){return H.ServiceEventArgs}});var V=pR();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return V.Connection}});var q=IR;Object.defineProperty(e,"PhraseListGrammar",{enumerable:!0,get:function(){return q.PhraseListGrammar}});var G=OR();Object.defineProperty(e,"DialogServiceConfig",{enumerable:!0,get:function(){return G.DialogServiceConfig}});var K=function(){if(DR)return BR;DR=1,Object.defineProperty(BR,"__esModule",{value:!0}),BR.BotFrameworkConfig=void 0;const e=XT,t=OR(),n=sj();let r=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(r,i,s){e.Contracts.throwIfNullOrWhitespace(r,"subscription"),e.Contracts.throwIfNullOrWhitespace(i,"region");const o=new t.DialogServiceConfigImpl;return o.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(n.PropertyId.SpeechServiceConnection_Key,r),o.setProperty(n.PropertyId.SpeechServiceConnection_Region,i),s&&o.setProperty(n.PropertyId.Conversation_ApplicationId,s),o}static fromAuthorizationToken(r,i,s){e.Contracts.throwIfNullOrWhitespace(r,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(i,"region");const o=new t.DialogServiceConfigImpl;return o.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,r),o.setProperty(n.PropertyId.SpeechServiceConnection_Region,i),s&&o.setProperty(n.PropertyId.Conversation_ApplicationId,s),o}static fromHost(r,i,s){e.Contracts.throwIfNullOrUndefined(r,"host");const o=r instanceof URL?r:new URL(`wss://${r}.convai.speech.azure.us`);e.Contracts.throwIfNullOrUndefined(o,"resolvedHost");const a=new t.DialogServiceConfigImpl;return a.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),a.setProperty(n.PropertyId.SpeechServiceConnection_Host,o.toString()),void 0!==i&&a.setProperty(n.PropertyId.SpeechServiceConnection_Key,i),a}static fromEndpoint(r,i){e.Contracts.throwIfNull(r,"endpoint");const s=new t.DialogServiceConfigImpl;return s.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,r.toString()),void 0!==i&&s.setProperty(n.PropertyId.SpeechServiceConnection_Key,i),s}};return BR.BotFrameworkConfig=r,BR}();Object.defineProperty(e,"BotFrameworkConfig",{enumerable:!0,get:function(){return K.BotFrameworkConfig}});var J=function(){if(MR)return UR;MR=1,Object.defineProperty(UR,"__esModule",{value:!0}),UR.CustomCommandsConfig=void 0;const e=XT,t=OR(),n=sj();let r=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(r,i,s){e.Contracts.throwIfNullOrWhitespace(r,"applicationId"),e.Contracts.throwIfNullOrWhitespace(i,"subscription"),e.Contracts.throwIfNullOrWhitespace(s,"region");const o=new t.DialogServiceConfigImpl;return o.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),o.setProperty(n.PropertyId.Conversation_ApplicationId,r),o.setProperty(n.PropertyId.SpeechServiceConnection_Key,i),o.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),o}static fromAuthorizationToken(r,i,s){e.Contracts.throwIfNullOrWhitespace(r,"applicationId"),e.Contracts.throwIfNullOrWhitespace(i,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(s,"region");const o=new t.DialogServiceConfigImpl;return o.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),o.setProperty(n.PropertyId.Conversation_ApplicationId,r),o.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,i),o.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),o}set applicationId(t){e.Contracts.throwIfNullOrWhitespace(t,"value"),this.setProperty(n.PropertyId.Conversation_ApplicationId,t)}get applicationId(){return this.getProperty(n.PropertyId.Conversation_ApplicationId)}};return UR.CustomCommandsConfig=r,UR}();Object.defineProperty(e,"CustomCommandsConfig",{enumerable:!0,get:function(){return J.CustomCommandsConfig}});var Y=KR();Object.defineProperty(e,"DialogServiceConnector",{enumerable:!0,get:function(){return Y.DialogServiceConnector}});var Z=JR;Object.defineProperty(e,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return Z.ActivityReceivedEventArgs}});var Q=YR;Object.defineProperty(e,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Q.TurnStatusReceivedEventArgs}});var X=eI;Object.defineProperty(e,"ServicePropertyChannel",{enumerable:!0,get:function(){return X.ServicePropertyChannel}});var ee=tI;Object.defineProperty(e,"ProfanityOption",{enumerable:!0,get:function(){return ee.ProfanityOption}});var te=function(){if(nI)return rI;nI=1,Object.defineProperty(rI,"__esModule",{value:!0}),rI.BaseAudioPlayer=void 0;const e=kE,t=sj(),n=uN;return rI.BaseAudioPlayer=class{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=t.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}playAudioSample(e,t,n){try{this.ensureInitializedContext();const n=this.formatAudioData(e),r=new Float32Array(this.samples.length+n.length);r.set(this.samples,0),r.set(n,this.samples.length),this.samples=r,t&&t()}catch(gie){n&&n(gie)}}stopAudio(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{e&&e()},e=>{t&&t(e)}),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(null===this.audioContext){this.createAudioContext();const e=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},e)}}createAudioContext(){this.audioContext=n.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(t){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(t),128);case 16:return this.formatArrayBuffer(new Int16Array(t),32768);case 32:return this.formatArrayBuffer(new Int32Array(t),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,t){const n=new Float32Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]/t;return n}updateAudioBuffer(){if(0===this.samples.length)return;const e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),n=this.samples.length/e,r=this.audioContext.createBuffer(e,n,this.audioFormat.samplesPerSec);for(let i=0;i<e;i++){let t=i;const n=r.getChannelData(i);for(let r=0;r<this.samples.length;r++,t+=e)n[r]=this.samples[t]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=r,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=r.duration,this.samples=new Float32Array}playAudio(e){return T(this,null,function*(){null===this.audioContext&&this.createAudioContext();const t=this.audioContext.createBufferSource(),n=this.audioContext.destination;yield this.audioContext.decodeAudioData(e,e=>{t.buffer=e,t.connect(n),t.start(0)})})}},rI}();Object.defineProperty(e,"BaseAudioPlayer",{enumerable:!0,get:function(){return te.BaseAudioPlayer}});var ne=iI;Object.defineProperty(e,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return ne.ConnectionMessageEventArgs}});var re=dR();Object.defineProperty(e,"ConnectionMessage",{enumerable:!0,get:function(){return re.ConnectionMessage}});var ie=sI;Object.defineProperty(e,"VoiceProfile",{enumerable:!0,get:function(){return ie.VoiceProfile}});var se=function(){if(oI)return fI;oI=1,Object.defineProperty(fI,"__esModule",{value:!0}),fI.VoiceProfileEnrollmentCancellationDetails=fI.VoiceProfileEnrollmentResult=void 0;const e=fO(),t=sj();fI.VoiceProfileEnrollmentResult=class n{constructor(n,r,i){this.privReason=n,this.privProperties=new t.PropertyCollection,this.privReason!==t.ResultReason.Canceled?r&&(this.privDetails=JSON.parse(r),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=t.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=i,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){const r=[];for(const i of e.value){const e="enrolling"===i.enrollmentStatus.toLowerCase()?t.ResultReason.EnrollingVoiceProfile:"enrolled"===i.enrollmentStatus.toLowerCase()?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,s=new n(e,null,null);s.privDetails=this.getIdentificationDetails(i),r.push(s)}return r}static FromVerificationProfileList(e){const r=[];for(const i of e.value){const e="enrolling"===i.enrollmentStatus.toLowerCase()?t.ResultReason.EnrollingVoiceProfile:"enrolled"===i.enrollmentStatus.toLowerCase()?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,s=new n(e,null,null);s.privDetails=this.getVerificationDetails(i),r.push(s)}return r}static getIdentificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}};class n extends t.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(r){const i=t.CancellationReason.Error;let s=t.CancellationErrorCode.NoError;return r.properties&&(s=t.CancellationErrorCode[r.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new n(i,r.errorDetails,s)}}return fI.VoiceProfileEnrollmentCancellationDetails=n,fI}();Object.defineProperty(e,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return se.VoiceProfileEnrollmentResult}}),Object.defineProperty(e,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return se.VoiceProfileEnrollmentCancellationDetails}});var oe=function(){if(aI)return mI;aI=1,Object.defineProperty(mI,"__esModule",{value:!0}),mI.VoiceProfileCancellationDetails=mI.VoiceProfileResult=void 0;const e=fO(),t=XT,n=sj();mI.VoiceProfileResult=class{constructor(r,i){this.privReason=r,this.privProperties=new n.PropertyCollection,r===n.ResultReason.Canceled&&(t.Contracts.throwIfNullOrUndefined(i,"statusText"),this.privErrorDetails=i,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};class r extends n.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(t){const i=n.CancellationReason.Error;let s=n.CancellationErrorCode.NoError;return t.properties&&(s=n.CancellationErrorCode[t.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new r(i,t.errorDetails,s)}}return mI.VoiceProfileCancellationDetails=r,mI}();Object.defineProperty(e,"VoiceProfileResult",{enumerable:!0,get:function(){return oe.VoiceProfileResult}}),Object.defineProperty(e,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return oe.VoiceProfileCancellationDetails}});var ae=function(){if(lI)return vI;lI=1,Object.defineProperty(vI,"__esModule",{value:!0}),vI.VoiceProfilePhraseResult=void 0;const e=XT,t=sj();let n=class extends t.VoiceProfileResult{constructor(t,n,r,i){super(t,n),this.privPhrases=[],e.Contracts.throwIfNullOrUndefined(i,"phrase array"),this.privType=r,i&&i[0]&&(this.privPhrases=i)}get phrases(){return this.privPhrases}get type(){return this.privType}};return vI.VoiceProfilePhraseResult=n,vI}();Object.defineProperty(e,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return ae.VoiceProfilePhraseResult}});var le=function(){if(cI)return gI;cI=1,Object.defineProperty(gI,"__esModule",{value:!0}),gI.VoiceProfileClient=void 0;const e=fO(),t=oP(),n=XT,r=sj();let i=class i extends r.Recognizer{constructor(i){n.Contracts.throwIfNullOrUndefined(i,"speechConfig");const s=i;n.Contracts.throwIfNull(s,"speechConfig"),super(t.AudioConfig.fromStreamInput(r.AudioInputStream.createPushStream()),s.properties,new e.VoiceProfileConnectionFactory),this.privProperties=s.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){n.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,e)}createProfileAsync(e,t){return T(this,null,function*(){const n=yield this.privVoiceAdapter.createProfile(e,t);return new r.VoiceProfile(n[0],e)})}retrieveEnrollmentResultAsync(e){return T(this,null,function*(){return this.privVoiceAdapter.retrieveEnrollmentResult(e)})}getAllProfilesAsync(e){return T(this,null,function*(){return this.privVoiceAdapter.getAllProfiles(e)})}getActivationPhrasesAsync(e,t){return T(this,null,function*(){return this.privVoiceAdapter.getActivationPhrases(e,t)})}enrollProfileAsync(e,t){return T(this,null,function*(){const r=t;return n.Contracts.throwIfNullOrUndefined(r,"audioConfig"),this.audioConfig=t,this.privVoiceAdapter.SpeakerAudioSource=r,this.privVoiceAdapter.enrollProfile(e)})}deleteProfileAsync(e){return T(this,null,function*(){return this.privVoiceAdapter.deleteProfile(e)})}resetProfileAsync(e){return T(this,null,function*(){return this.privVoiceAdapter.resetProfile(e)})}close(){return T(this,null,function*(){yield this.dispose(!0)})}createServiceRecognizer(t,n,r,i){const s=r;return new e.VoiceServiceRecognizer(t,n,s,i,this)}dispose(e){return T(this,null,function*(){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,e&&(yield E(i.prototype,this,"dispose").call(this,e)))})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.properties)}getResult(e,t){return new r.VoiceProfileResult(e.ok?t:r.ResultReason.Canceled,e.statusText)}};return gI.VoiceProfileClient=i,gI}();Object.defineProperty(e,"VoiceProfileClient",{enumerable:!0,get:function(){return le.VoiceProfileClient}});var ce=function(){if(uI)return yI;uI=1,Object.defineProperty(yI,"__esModule",{value:!0}),yI.SpeakerRecognizer=void 0;const e=fO(),t=XT,n=sj();let r=class r extends n.Recognizer{constructor(n,r){t.Contracts.throwIfNullOrUndefined(n,"speechConfig");const i=n;t.Contracts.throwIfNullOrUndefined(i,"speechConfig"),super(r,i.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=r,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=i.properties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){t.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e){return T(this,null,function*(){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(e)})}close(){return T(this,null,function*(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.dispose(!0)})}recognizeSpeakerOnceAsyncImpl(e){return T(this,null,function*(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.implRecognizerStop();const n=yield this.privReco.recognizeSpeaker(e);return yield this.implRecognizerStop(),n})}implRecognizerStop(){return T(this,null,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(t,n,r,i){const s=r;return new e.SpeakerServiceRecognizer(t,n,s,i,this)}dispose(e){return T(this,null,function*(){this.privDisposedSpeakerRecognizer||e&&(this.privDisposedSpeakerRecognizer=!0,yield E(r.prototype,this,"dispose").call(this,e))})}};return yI.SpeakerRecognizer=r,yI}();Object.defineProperty(e,"SpeakerRecognizer",{enumerable:!0,get:function(){return ce.SpeakerRecognizer}});var ue=function(){if(dI)return bI;dI=1,Object.defineProperty(bI,"__esModule",{value:!0}),bI.SpeakerIdentificationModel=void 0;const e=XT,t=sj();return bI.SpeakerIdentificationModel=class n{constructor(n){if(this.privVoiceProfiles=[],this.privProfileIds=[],e.Contracts.throwIfNullOrUndefined(n,"VoiceProfiles"),0===n.length)throw new Error("Empty Voice Profiles array");for(const e of n){if(e.profileType!==t.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+e.profileId);this.privVoiceProfiles.push(e),this.privProfileIds.push(e.profileId)}}static fromProfiles(e){return new n(e)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}},bI}();Object.defineProperty(e,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return ue.SpeakerIdentificationModel}});var de=function(){if(pI)return xI;pI=1,Object.defineProperty(xI,"__esModule",{value:!0}),xI.SpeakerVerificationModel=void 0;const e=XT,t=sj();return xI.SpeakerVerificationModel=class n{constructor(n){if(e.Contracts.throwIfNullOrUndefined(n,"VoiceProfile"),n.profileType===t.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=n}static fromProfile(e){return new n(e)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===t.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}},xI}();Object.defineProperty(e,"SpeakerVerificationModel",{enumerable:!0,get:function(){return de.SpeakerVerificationModel}});var pe=function(){if(hI)return wI;hI=1,Object.defineProperty(wI,"__esModule",{value:!0}),wI.AutoDetectSourceLanguageConfig=void 0;const e=fO(),t=XT,n=sj(),r=SI;return wI.AutoDetectSourceLanguageConfig=class i{constructor(){this.privProperties=new n.PropertyCollection,this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=r.LanguageIdMode.AtStart}static fromOpenRange(){const t=new i;return t.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.AutoDetectSourceLanguagesOpenRangeOptionName),t.properties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),t}static fromLanguages(e){t.Contracts.throwIfArrayEmptyOrWhitespace(e,"languages");const r=new i;return r.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),r}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const t=new i,r=[];return e.forEach(e=>{if(r.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){const r=e.language+n.PropertyId.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(r,e.endpointId)}}),t.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.join()),t}get properties(){return this.privProperties}set mode(e){e===r.LanguageIdMode.Continuous?(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e}},wI}();Object.defineProperty(e,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return pe.AutoDetectSourceLanguageConfig}});var he=CI;Object.defineProperty(e,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return he.AutoDetectSourceLanguageResult}});var fe=NI;Object.defineProperty(e,"SourceLanguageConfig",{enumerable:!0,get:function(){return fe.SourceLanguageConfig}});var me=(II||(II=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResult=e.SpeakerRecognitionResultType=void 0;const t=fO(),n=sj();var r,i;(i=r=e.SpeakerRecognitionResultType||(e.SpeakerRecognitionResultType={}))[i.Verify=0]="Verify",i[i.Identify=1]="Identify",e.SpeakerRecognitionResult=class{constructor(e,i=n.ResultReason.RecognizedSpeaker,s=n.CancellationErrorCode.NoError,o=""){this.privProperties=new n.PropertyCollection;const a="TextIndependentIdentification"===e.scenario?r.Identify:r.Verify;this.privReason=i,this.privReason!==n.ResultReason.Canceled?a===r.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=n.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,"accept"!==e.verificationResult.recognitionResult.toLowerCase()&&(this.privReason=n.ResultReason.NoMatch),void 0!==e.verificationResult.profileId&&""!==e.verificationResult.profileId&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=o,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[s])),this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};class s extends n.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(e){const r=n.CancellationReason.Error;let i=n.CancellationErrorCode.NoError;return e.properties&&(i=n.CancellationErrorCode[e.properties.getProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new s(r,e.errorDetails,i)}}e.SpeakerRecognitionCancellationDetails=s}(jI)),jI);Object.defineProperty(e,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return me.SpeakerRecognitionResult}}),Object.defineProperty(e,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return me.SpeakerRecognitionResultType}}),Object.defineProperty(e,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return me.SpeakerRecognitionCancellationDetails}});var ve=pk();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return ve.Conversation}}),Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return ve.ConversationExpirationEventArgs}}),Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return ve.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return ve.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return ve.ConversationTranslationEventArgs}}),Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return ve.ConversationTranslationResult}}),Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return ve.ConversationTranslator}}),Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return ve.ConversationTranscriber}}),Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return ve.ConversationTranscriptionResult}}),Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return ve.Meeting}}),Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return ve.MeetingTranscriber}}),Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return ve.Participant}}),Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return ve.ParticipantChangedReason}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return ve.User}});var ge=mk();Object.defineProperty(e,"Synthesizer",{enumerable:!0,get:function(){return ge.Synthesizer}});var ye=GN;Object.defineProperty(e,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return ye.SpeechSynthesisOutputFormat}});var be=function(){if(vk)return gk;vk=1,Object.defineProperty(gk,"__esModule",{value:!0}),gk.SpeechSynthesizer=void 0;const e=fO(),t=OT(),n=MN,r=qN,i=VN,s=XT,o=sj(),a=mk();let l=class l extends o.Synthesizer{constructor(t,n){super(t),null!==n&&(this.audioConfig=void 0===n?"undefined"==typeof window?void 0:o.AudioConfig.fromDefaultSpeakerOutput():n),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(e,t,n){const r=e;return t.properties.mergeTo(r.properties),new l(e,n)}speakTextAsync(e,t,n,r){this.speakImpl(e,!1,t,n,r)}speakSsmlAsync(e,t,n,r){this.speakImpl(e,!0,t,n,r)}getVoicesAsync(e=""){return T(this,null,function*(){return this.getVoices(e)})}close(e,n){s.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),e,n)}get internalData(){return this.privAdapter}createSynthesisAdapter(t,n,r){return new e.SpeechSynthesisAdapter(t,n,r,this,this.audioConfig)}createRestSynthesisAdapter(t,n){return new e.SynthesisRestAdapter(n,t)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(o.SpeechSynthesisOutputFormat[this.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,r,l,c,u){try{s.Contracts.throwIfDisposed(this.privDisposed);const d=(0,t.createNoDashGuid)();let p;p=u instanceof o.PushAudioOutputStreamCallback?new i.PushAudioOutputStreamImpl(u):u instanceof o.PullAudioOutputStream?u:void 0!==u?new n.AudioFileWriter(u):void 0,this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(d,e,r,e=>{if(this.privSynthesizing=!1,l)try{l(e)}catch(t){c&&c(t)}l=void 0,this.adapterSpeak().catch(()=>{})},e=>{c&&c(e)},p)),this.adapterSpeak().catch(()=>{})}catch(d){if(c)if(d instanceof Error){const e=d;c(e.name+": "+e.message)}else c(d);this.dispose(!0).catch(()=>{})}}getVoices(e){return T(this,null,function*(){const n=(0,t.createNoDashGuid)(),r=yield this.privRestAdapter.getVoicesList(n);if(r.ok&&Array.isArray(r.json)){let t=r.json;return e&&e.length>0&&(t=t.filter(t=>!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase())),new o.SynthesisVoicesResult(n,t,void 0)}return new o.SynthesisVoicesResult(n,void 0,`Error: ${r.status}: ${r.statusText}`)})}};return gk.SpeechSynthesizer=l,gk}();Object.defineProperty(e,"SpeechSynthesizer",{enumerable:!0,get:function(){return be.SpeechSynthesizer}});var xe=yk;Object.defineProperty(e,"SynthesisResult",{enumerable:!0,get:function(){return xe.SynthesisResult}});var we=function(){if(bk)return xk;bk=1,Object.defineProperty(xk,"__esModule",{value:!0}),xk.SpeechSynthesisResult=void 0;const e=sj();let t=class extends e.SynthesisResult{constructor(e,t,n,r,i,s){super(e,t,r,i),this.privAudioData=n,this.privAudioDuration=s}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return xk.SpeechSynthesisResult=t,xk}();Object.defineProperty(e,"SpeechSynthesisResult",{enumerable:!0,get:function(){return we.SpeechSynthesisResult}});var Se=wk;Object.defineProperty(e,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return Se.SpeechSynthesisEventArgs}});var Ce=Sk;Object.defineProperty(e,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Ce.SpeechSynthesisWordBoundaryEventArgs}});var Ee=Ck;Object.defineProperty(e,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Ee.SpeechSynthesisBookmarkEventArgs}});var Te=Ek;Object.defineProperty(e,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return Te.SpeechSynthesisVisemeEventArgs}});var Ne=Tk;Object.defineProperty(e,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Ne.SpeechSynthesisBoundaryType}});var Pe=function(){if(Nk)return Pk;Nk=1,Object.defineProperty(Pk,"__esModule",{value:!0}),Pk.SynthesisVoicesResult=void 0;const e=sj();let t=class extends e.SynthesisResult{constructor(t,n,r){if(Array.isArray(n)){super(t,e.ResultReason.VoicesListRetrieved,void 0,new e.PropertyCollection),this.privVoices=[];for(const t of n)this.privVoices.push(new e.VoiceInfo(t))}else super(t,e.ResultReason.Canceled,r||"Error information unavailable",new e.PropertyCollection)}get voices(){return this.privVoices}};return Pk.SynthesisVoicesResult=t,Pk}();Object.defineProperty(e,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Pe.SynthesisVoicesResult}});var Re=Rk;Object.defineProperty(e,"SynthesisVoiceGender",{enumerable:!0,get:function(){return Re.SynthesisVoiceGender}}),Object.defineProperty(e,"SynthesisVoiceType",{enumerable:!0,get:function(){return Re.SynthesisVoiceType}}),Object.defineProperty(e,"VoiceInfo",{enumerable:!0,get:function(){return Re.VoiceInfo}});var Ie=Ik;Object.defineProperty(e,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Ie.SpeakerAudioDestination}});var ke=function(){if(Ok)return Mk;Ok=1,Object.defineProperty(Mk,"__esModule",{value:!0}),Mk.ConversationTranscriptionCanceledEventArgs=void 0;const e=AP();let t=class extends e.CancellationEventArgsBase{};return Mk.ConversationTranscriptionCanceledEventArgs=t,Mk}();Object.defineProperty(e,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return ke.ConversationTranscriptionCanceledEventArgs}});var je=function(){if(Dk)return Lk;Dk=1,Object.defineProperty(Lk,"__esModule",{value:!0}),Lk.MeetingTranscriptionCanceledEventArgs=void 0;const e=AP();let t=class extends e.CancellationEventArgsBase{};return Lk.MeetingTranscriptionCanceledEventArgs=t,Lk}();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return je.MeetingTranscriptionCanceledEventArgs}});var _e=zk;Object.defineProperty(e,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return _e.PronunciationAssessmentGradingSystem}});var Ae=Fk;Object.defineProperty(e,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Ae.PronunciationAssessmentGranularity}});var Oe=function(){if(Bk)return $k;Bk=1,Object.defineProperty($k,"__esModule",{value:!0}),$k.PronunciationAssessmentConfig=void 0;const e=XT,t=sj();return $k.PronunciationAssessmentConfig=class n{constructor(n,r=t.PronunciationAssessmentGradingSystem.FivePoint,i=t.PronunciationAssessmentGranularity.Phoneme,s=!1){e.Contracts.throwIfNullOrUndefined(n,"referenceText"),this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,n),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_GradingSystem,t.PronunciationAssessmentGradingSystem[r]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Granularity,t.PronunciationAssessmentGranularity[i]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,String(s))}static fromJSON(r){e.Contracts.throwIfNullOrUndefined(r,"json");const i=new n("");return i.privProperties=new t.PropertyCollection,i.properties.setProperty(t.PropertyId.PronunciationAssessment_Json,r),i}toJSON(){return this.updateJson(),this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Params)}applyTo(e){this.updateJson();const n=e.internalData;n.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(t.PropertyId.PronunciationAssessment_Params),n.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(n){e.Contracts.throwIfNullOrWhitespace(n,"referenceText"),this.properties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,n)}set phonemeAlphabet(t){e.Contracts.throwIfNullOrWhitespace(t,"phonemeAlphabet"),this.privPhonemeAlphabet=t}set enableMiscue(e){const n=e?"true":"false";this.properties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,n)}get enableMiscue(){return"true"===this.properties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}set enableProsodyAssessment(e){this.privEnableProsodyAssessment=e}get properties(){return this.privProperties}updateJson(){const e=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Json,"{}"),n=JSON.parse(e),r=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText);r&&(n.referenceText=r);const i=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_GradingSystem);i&&(n.gradingSystem=i);const s=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Granularity);s&&(n.granularity=s),this.privPhonemeAlphabet&&(n.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(n.nbestPhonemeCount=this.privNBestPhonemeCount),n.enableProsodyAssessment=this.privEnableProsodyAssessment,n.dimension="Comprehensive",this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue)&&(n.enableMiscue=this.enableMiscue),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Params,JSON.stringify(n))}},$k}();Object.defineProperty(e,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return Oe.PronunciationAssessmentConfig}});var De=function(){if(Uk)return Hk;Uk=1,Object.defineProperty(Hk,"__esModule",{value:!0}),Hk.PronunciationAssessmentResult=void 0;const e=XT,t=sj();return Hk.PronunciationAssessmentResult=class n{constructor(t){const n=JSON.parse(t);e.Contracts.throwIfNullOrUndefined(n.NBest[0],"NBest"),this.privPronJson=n.NBest[0]}static fromResult(r){e.Contracts.throwIfNullOrUndefined(r,"result");const i=r.properties.getProperty(t.PropertyId.SpeechServiceResponse_JsonResult);return e.Contracts.throwIfNullOrUndefined(i,"json"),new n(i)}get detailResult(){return this.privPronJson}get accuracyScore(){var e;return null==(e=this.detailResult.PronunciationAssessment)?void 0:e.AccuracyScore}get pronunciationScore(){var e;return null==(e=this.detailResult.PronunciationAssessment)?void 0:e.PronScore}get completenessScore(){var e;return null==(e=this.detailResult.PronunciationAssessment)?void 0:e.CompletenessScore}get fluencyScore(){var e;return null==(e=this.detailResult.PronunciationAssessment)?void 0:e.FluencyScore}get prosodyScore(){var e;return null==(e=this.detailResult.PronunciationAssessment)?void 0:e.ProsodyScore}},Hk}();Object.defineProperty(e,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return De.PronunciationAssessmentResult}});var Me=SI;Object.defineProperty(e,"LanguageIdMode",{enumerable:!0,get:function(){return Me.LanguageIdMode}});var Le=function(){if(Wk)return Vk;Wk=1,Object.defineProperty(Vk,"__esModule",{value:!0}),Vk.AvatarConfig=void 0;const e=XT,t=sj();return Vk.AvatarConfig=class{constructor(n,r,i){this.privCustomized=!1,this.privUseBuiltInVoice=!1,e.Contracts.throwIfNullOrWhitespace(n,"character"),this.character=n,this.style=r,void 0===i&&(i=new t.AvatarVideoFormat),this.videoFormat=i}get customized(){return this.privCustomized}set customized(e){this.privCustomized=e}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(e){this.privUseBuiltInVoice=e}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(e){this.privBackgroundColor=e}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(e){this.privBackgroundImage=e}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(e){this.privRemoteIceServers=e}},Vk}();Object.defineProperty(e,"AvatarConfig",{enumerable:!0,get:function(){return Le.AvatarConfig}});var ze=qk;Object.defineProperty(e,"AvatarEventArgs",{enumerable:!0,get:function(){return ze.AvatarEventArgs}});var Fe=function(){if(Kk)return Jk;Kk=1,Object.defineProperty(Jk,"__esModule",{value:!0}),Jk.AvatarSynthesizer=void 0;const e=Zk(),t=fO(),n=OT(),r=qN,i=sj(),s=XT,o=mk();let a=class extends i.Synthesizer{constructor(t,n){super(t),s.Contracts.throwIfNullOrUndefined(n,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=n,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}startAvatarAsync(e){return T(this,null,function*(){s.Contracts.throwIfNullOrUndefined(e,"peerConnection"),this.privIceServers=e.getConfiguration().iceServers,s.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const t=new n.Deferred;e.onicegatheringstatechange=()=>{n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering state: "+e.iceGatheringState,n.EventType.Debug)),"complete"===e.iceGatheringState&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering complete.",n.EventType.Info)),t.resolve())},e.onicecandidate=e=>{e.candidate?n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: "+e.candidate.candidate,n.EventType.Debug)):(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: complete",n.EventType.Debug)),t.resolve())},setTimeout(()=>{"complete"!==e.iceGatheringState&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering timeout.",n.EventType.Warning)),t.resolve())},2e3);const r=yield e.createOffer();yield e.setLocalDescription(r),yield t.promise,n.Events.instance.onEvent(new n.PlatformEvent("peer connection: got local SDP.",n.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(e.localDescription));const o=yield this.speak("",!1);if(o.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(o.resultId,o.reason,o.errorDetails,o.properties);const a=atob(o.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),l=new RTCSessionDescription(JSON.parse(a));return yield e.setRemoteDescription(l),new i.SynthesisResult(o.resultId,o.reason,void 0,o.properties)})}speakTextAsync(e){return T(this,null,function*(){const t=yield this.speak(e,!1);return new i.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)})}speakSsmlAsync(e){return T(this,null,function*(){const t=yield this.speak(e,!0);return new i.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)})}stopSpeakingAsync(){return T(this,null,function*(){for(;this.synthesisRequestQueue.length()>0;)(yield this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()})}stopAvatarAsync(){return T(this,null,function*(){return s.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)})}close(){return T(this,null,function*(){if(!this.privDisposed)return this.dispose(!0)})}get iceServers(){return this.privIceServers}createSynthesisAdapter(e,n,r){return new t.AvatarSynthesisAdapter(e,n,r,this,this.privAvatarConfig)}createRestSynthesisAdapter(e,t){}createSynthesizerConfig(e){const t=super.createSynthesizerConfig(e);return t.avatarEnabled=!0,t}speak(e,t){return T(this,null,function*(){const r=(0,n.createNoDashGuid)(),i=new n.Deferred;return this.synthesisRequestQueue.enqueue(new o.SynthesisRequest(r,e,t,e=>{i.resolve(e),this.privSynthesizing=!1,this.adapterSpeak()},e=>{i.reject(e),this.privSynthesizing=!1})),this.adapterSpeak(),i.promise})}};return Jk.AvatarSynthesizer=a,Jk}();Object.defineProperty(e,"AvatarSynthesizer",{enumerable:!0,get:function(){return Fe.AvatarSynthesizer}});var Be=Qk;Object.defineProperty(e,"AvatarVideoFormat",{enumerable:!0,get:function(){return Be.AvatarVideoFormat}}),Object.defineProperty(e,"Coordinate",{enumerable:!0,get:function(){return Be.Coordinate}});var Ue=function(){if(Xk)return rj;Xk=1,Object.defineProperty(rj,"__esModule",{value:!0}),rj.AvatarWebRTCConnectionResult=void 0;const e=sj();let t=class extends e.SynthesisResult{constructor(e,t,n,r,i){super(t,n,r,i),this.privSDPAnswer=e}get SDPAnswer(){return this.privSDPAnswer}};return rj.AvatarWebRTCConnectionResult=t,rj}();Object.defineProperty(e,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return Ue.AvatarWebRTCConnectionResult}});var We=function(){if(ej)return ij;ej=1,Object.defineProperty(ij,"__esModule",{value:!0}),ij.Diagnostics=void 0;const e=mj(),t=OT();let n=class{static SetLoggingLevel(n){this.privListener=new e.ConsoleLoggingListener(n),t.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(e){if("undefined"!=typeof window)throw new Error("File system logging not available in browser.");this.privListener&&(this.privListener.logPath=e)}static set onLogOutput(e){this.privListener&&(this.privListener.logCallback=e)}};return ij.Diagnostics=n,n.privListener=void 0,ij}();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return We.Diagnostics}});var $e=QT;Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return $e.LogLevel}})}(ON)),ON}var oj={};const aj=new Set(["json","buffer","string"]),lj=e=>(...t)=>{const n=new Set;let r,i,s,o="";return t.forEach(e=>{if("string"==typeof e)if(e.toUpperCase()===e){if(r)throw new Error(`Can't set method to ${e}, already set to ${r}.`);r=e}else if(e.startsWith("http:")||e.startsWith("https:"))o=e;else{if(!aj.has(e))throw new Error(`Unknown encoding, ${e}`);i=e}else if("number"==typeof e)n.add(e);else{if("object"!=typeof e)throw new Error("Unknown type: "+typeof e);if(Array.isArray(e)||e instanceof Set)e.forEach(e=>n.add(e));else{if(s)throw new Error("Cannot set headers twice.");s=e}}}),r||(r="GET"),0===n.size&&n.add(200),e(n,r,i,s,o)};class cj extends Error{constructor(e,...t){let n;super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,cj),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e),Object.defineProperty(this,"responseBody",{get:()=>(n||(n=this.arrayBuffer()),n)}),this.headers={};for(const[r,i]of e.headers.entries())this.headers[r.toLowerCase()]=i}}var uj=lj((t,n,r,i,s)=>(o,a,...l)=>T(e,[o,a,...l],function*(e,o,a={}){e=s+(e||"");let l=new URL(e);if(i||(i={}),l.username&&(i.Authorization="Basic "+btoa(l.username+":"+l.password),l=new URL(l.protocol+"//"+l.host+l.pathname+l.search)),"https:"!==l.protocol&&"http:"!==l.protocol)throw new Error(`Unknown protocol, ${l.protocol}`);if(o)if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||"string"==typeof o);else{if("object"!=typeof o)throw new Error("Unknown body type.");o=JSON.stringify(o),i["Content-Type"]="application/json"}a=new Headers(f(f({},i||{}),a));const c=yield fetch(l,{method:n,headers:a,body:o});if(c.statusCode=c.status,!t.has(c.status))throw new cj(c);return"json"===r?c.json():"buffer"===r?c.arrayBuffer():"string"===r?c.text():c}));!function(e){var t=Be&&Be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.RestMessageAdapter=e.RestRequestType=void 0;const n=t(uj),r=OT();var i,s;(s=i=e.RestRequestType||(e.RestRequestType={})).Get="GET",s.Post="POST",s.Delete="DELETE",s.File="file",e.RestMessageAdapter=class{constructor(e){if(!e)throw new r.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,t){let n="";try{const r=t.trim().split(/[\r\n]+/),i={};r.forEach(e=>{const t=e.split(": "),n=t.shift().toLowerCase(),r=t.join(": ");i[n]=r}),n=i[e.toLowerCase()]}catch(gie){}return n}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t,s={},o=null){const a=new r.Deferred,l=e===i.File?"POST":e,c=(e,t={})=>{const n=e;return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:n.statusText?n.statusText:n.statusMessage}};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===i.Post&&o&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),(r=>{(0,n.default)(t,l,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(s)?"":`?${this.queryParams(s)}`,r).then(t=>T(this,null,function*(){if(e===i.Delete||204===t.statusCode)a.resolve(c(t));else try{const e=yield t.json();a.resolve(c(t,e))}catch(gie){a.resolve(c(t))}})).catch(e=>{a.reject(e)})})(o),a.promise}queryParams(e={}){return Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}}}(oj);var dj,pj,hj={};Object.defineProperty(hj,"__esModule",{value:!0}),hj.RestConfigBase=void 0;class fj{static get requestOptions(){return fj.privDefaultRequestOptions}static get configParams(){return fj.privDefaultParams}static get restErrors(){return fj.privRestErrors}}function mj(){return dj||(dj=1,function(e){var t=Be&&Be.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Be&&Be.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(YT,e),n(aN,e),n((lN||(lN=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicAudioSource=e.AudioWorkletSourceURLPropertyName=void 0;const t=fO(),n=OT(),r=uN;e.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(e,t,r,s){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=r||(0,n.createNoDashGuid)(),this.privEvents=new n.EventSource,this.privMediaStream=s||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new n.Deferred;try{this.createAudioContext()}catch(r){if(r instanceof Error){const e=r;this.privInitializeDeferral.reject(e.name+": "+e.message)}else this.privInitializeDeferral.reject(r);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,n,r)=>{e.mediaDevices.getUserMedia(t).then(n).catch(r)}),t){const e=()=>{this.onEvent(new n.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},e=>{this.privMediaStream=e,this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},e=>{const t=`Error occurred during microphone initialization: ${e}`;this.privInitializeDeferral.reject(t),this.onEvent(new n.AudioSourceErrorEvent(this.privId,t))})};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch(e=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${e}`)}):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new n.AudioSourceErrorEvent(e,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new n.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then(t=>(this.onEvent(new n.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>T(this,null,function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>t.read()}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){return T(this,null,function*(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new n.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()})}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(e=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:i.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(t,n){if(t!==e.AudioWorkletSourceURLPropertyName)throw new Error("Property '"+t+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(n)}getMicrophoneLabel(){const e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;const t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);const r=new n.Deferred;return navigator.mediaDevices.enumerateDevices().then(e=>{for(const n of e)if(n.deviceId===t){this.privMicrophoneLabel=n.label;break}r.resolve(this.privMicrophoneLabel)},()=>r.resolve(this.privMicrophoneLabel)),r.promise}listen(e){return T(this,null,function*(){yield this.turnOn();const t=new n.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(r){throw this.onEvent(new n.AudioStreamNodeErrorEvent(this.privId,e,r)),r}return t})}onEvent(e){this.privEvents.onEvent(e),n.Events.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=r.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return T(this,null,function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())})}}e.MicAudioSource=i,i.AUDIOFORMAT=r.AudioStreamFormat.getDefaultInputFormat()}(cN)),cN),e),n(function(){if(dN)return pN;dN=1,Object.defineProperty(pN,"__esModule",{value:!0}),pN.FileAudioSource=void 0;const e=fO(),t=OT(),n=uN;return pN.FileAudioSource=class{constructor(e,n,r){this.privStreams={},this.privHeaderEnd=44,this.privId=r||(0,t.createNoDashGuid)(),this.privEvents=new t.EventSource,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=n||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}attach(e){return T(this,null,function*(){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,e));const n=yield this.upload(e);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,e)),Promise.resolve({detach:()=>T(this,null,function*(){n.readEnded(),delete this.privStreams[e],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e)),yield this.turnOff()}),id:()=>e,read:()=>n.read()})})}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(t=>Promise.resolve({bitspersample:t.bitsPerSample,channelcount:t.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:t.samplesPerSec,type:e.type.File}))}readHeader(){const e=this.privSource.slice(0,4296),r=new t.Deferred,i=e=>{const t=new DataView(e),i=e=>String.fromCharCode(t.getUint8(e),t.getUint8(e+1),t.getUint8(e+2),t.getUint8(e+3));if("RIFF"!==i(0))return void r.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==i(8)||"fmt "!==i(12))return void r.reject("Invalid WAV header in file, WAVEfmt was not found");const s=t.getInt32(16,!0),o=t.getUint16(22,!0),a=t.getUint32(24,!0),l=t.getUint16(34,!0);let c=36+Math.max(s-16,0);for(;"data"!==i(c);c+=2)if(c>4288)return void r.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=c+8,r.resolve(n.AudioStreamFormat.getWaveFormatPCM(a,l,o))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{const t=e.target.result;i(t)},t.readAsArrayBuffer(e)}else{const t=e;i(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}return r.promise}upload(e){return T(this,null,function*(){const n=n=>{const r=`Error occurred while processing '${this.privFilename}'. ${n}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,e,r)),new Error(r)};try{yield this.turnOn();const r=yield this.privAudioFormatPromise,i=new t.ChunkedArrayBufferStream(r.avgBytesPerSec/10,e);this.privStreams[e]=i;const s=this.privSource.slice(this.privHeaderEnd),o=e=>{i.isClosed||(i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),i.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&s instanceof Blob){const e=new FileReader;e.onerror=e=>n(e.toString()),e.onload=e=>{const t=e.target.result;o(t)},e.readAsArrayBuffer(s)}else{const e=s;o(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}return i}catch(gie){n(gie)}})}onEvent(e){this.privEvents.onEvent(e),t.Events.instance.onEvent(e)}},pN}(),e),n(hN,e),n(mN,e),n(vN,e),n(jN,e),n(function(){if(nj)return AN;nj=1,Object.defineProperty(AN,"__esModule",{value:!0}),AN.ProxyInfo=void 0;const e=sj();return AN.ProxyInfo=class t{constructor(e,t,n,r){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=n,this.privProxyPassword=r}static fromParameters(n){return new t(n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPort),10),n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName),n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}},AN}(),e),n(oj,e),n(hj,e)}(JT)),JT}hj.RestConfigBase=fj,fj.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},fj.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},fj.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var vj,gj={},yj={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionEndedEvent=e.RecognitionCompletionStatus=e.RecognitionStartedEvent=e.ConnectingToServiceEvent=e.ListeningStartedEvent=e.RecognitionTriggeredEvent=e.SpeechRecognitionEvent=void 0;const t=OT();class n extends t.PlatformEvent{constructor(e,n,r,i=t.EventType.Info){super(e,i),this.privRequestId=n,this.privSessionId=r}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}var r,i;e.SpeechRecognitionEvent=n,e.RecognitionTriggeredEvent=class extends n{constructor(e,t,n,r){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=n,this.privAudioNodeId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}},e.ListeningStartedEvent=class extends n{constructor(e,t,n,r){super("ListeningStartedEvent",e,t),this.privAudioSourceId=n,this.privAudioNodeId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}},e.ConnectingToServiceEvent=class extends n{constructor(e,t,n){super("ConnectingToServiceEvent",e,n),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}},e.RecognitionStartedEvent=class extends n{constructor(e,t,n,r,i){super("RecognitionStartedEvent",e,i),this.privAudioSourceId=t,this.privAudioNodeId=n,this.privAuthFetchEventId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}},(i=r=e.RecognitionCompletionStatus||(e.RecognitionCompletionStatus={}))[i.Success=0]="Success",i[i.AudioSourceError=1]="AudioSourceError",i[i.AudioSourceTimeout=2]="AudioSourceTimeout",i[i.AuthTokenFetchError=3]="AuthTokenFetchError",i[i.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",i[i.UnAuthorized=5]="UnAuthorized",i[i.ConnectTimeout=6]="ConnectTimeout",i[i.ConnectError=7]="ConnectError",i[i.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",i[i.UnknownError=9]="UnknownError",e.RecognitionEndedEvent=class extends n{constructor(e,n,i,s,o,a,l,c){super("RecognitionEndedEvent",e,o,l===r.Success?t.EventType.Info:t.EventType.Error),this.privAudioSourceId=n,this.privAudioNodeId=i,this.privAuthFetchEventId=s,this.privStatus=l,this.privError=c,this.privServiceTag=a}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}}(yj);var bj={},xj={};Object.defineProperty(xj,"__esModule",{value:!0}),xj.SpeechConnectionMessage=void 0;const wj=OT(),Sj=DT;class Cj extends wj.ConnectionMessage{constructor(e,t,n,r,i,s,o,a){if(!t)throw new wj.ArgumentNullError("path");if(!n)throw new wj.ArgumentNullError("requestId");const l={};if(l[Sj.HeaderNames.Path]=t,l[Sj.HeaderNames.RequestId]=n,l[Sj.HeaderNames.RequestTimestamp]=(new Date).toISOString(),r&&(l[Sj.HeaderNames.ContentType]=r),s&&(l[Sj.HeaderNames.RequestStreamId]=s),o)for(const c in o)c&&(l[c]=o[c]);a?super(e,i,l,a):super(e,i,l),this.privPath=t,this.privRequestId=n,this.privContentType=r,this.privStreamId=s,this.privAdditionalHeaders=o}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,n=null,r=null,i=null;const s={};if(e.headers)for(const o in e.headers)o&&(o.toLowerCase()===Sj.HeaderNames.Path.toLowerCase()?t=e.headers[o]:o.toLowerCase()===Sj.HeaderNames.RequestId.toLowerCase()?n=e.headers[o]:o.toLowerCase()===Sj.HeaderNames.ContentType.toLowerCase()?r=e.headers[o]:o.toLowerCase()===Sj.HeaderNames.RequestStreamId.toLowerCase()?i=e.headers[o]:s[o]=e.headers[o]);return new Cj(e.messageType,t,n,r,e.body,i,s,e.id)}}xj.SpeechConnectionMessage=Cj;var Ej={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SegmentationMode=void 0,(t=e.SegmentationMode||(e.SegmentationMode={})).Normal="Normal",t.Disabled="Disabled",t.Custom="Custom",t.Semantic="Semantic"}(Ej);var Tj={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,(t=e.NextAction||(e.NextAction={})).None="None",t.Synthesize="Synthesize"}(Tj);var Nj={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.Mode=void 0,(t=e.Mode||(e.Mode={})).None="None",t.Always="Always"}(Nj);var Pj={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdDetectionPriority=e.LanguageIdDetectionMode=void 0,(t=e.LanguageIdDetectionMode||(e.LanguageIdDetectionMode={})).DetectAtAudioStart="DetectAtAudioStart",t.DetectContinuous="DetectContinuous",t.DetectSegments="DetectSegments",(n=e.LanguageIdDetectionPriority||(e.LanguageIdDetectionPriority={})).Auto="Auto",n.PrioritizeLatency="PrioritizeLatency",n.PrioritizeAccuracy="PrioritizeAccuracy"}(Pj);var Rj={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,(t=e.NextAction||(e.NextAction={})).Recognize="Recognize",t.None="None"}(Rj);var Ij={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.OnUnknownAction=void 0,(t=e.OnUnknownAction||(e.OnUnknownAction={})).RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",t.None="None"}(Ij);var kj={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ResultType=void 0,(t=e.ResultType||(e.ResultType={})).Auto="Auto",t.StableFragment="StableFragment",t.Hypothesis="Hypothesis",t.None="None"}(kj);var jj={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.PhraseResultOutputType=void 0,(t=e.PhraseResultOutputType||(e.PhraseResultOutputType={})).Always="Always",t.None="None"}(jj);var _j,Aj={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,(t=e.NextAction||(e.NextAction={})).None="None",t.Translate="Translate"}(Aj);var Oj,Dj,Mj={},Lj={},zj={};Object.defineProperty(zj,"__esModule",{value:!0});var Fj={};Object.defineProperty(Fj,"__esModule",{value:!0}),Fj.WebsocketMessageFormatter=void 0;const Bj=OT();Fj.WebsocketMessageFormatter=class{toConnectionMessage(e){const t=new Bj.Deferred;try{if(e.messageType===Bj.MessageType.Text){const n=e.textContent;let r={},i=null;if(n){const e=n.split("\r\n\r\n");e&&e.length>0&&(r=this.parseHeaders(e[0]),e.length>1&&(i=e[1]))}t.resolve(new Bj.ConnectionMessage(e.messageType,i,r,e.id))}else if(e.messageType===Bj.MessageType.Binary){const n=e.binaryContent;let r={},i=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const s=new DataView(n),o=s.getInt16(0);if(n.byteLength<o+2)throw new Error("Invalid binary message format. Header content missing.");let a="";for(let e=0;e<o;e++)a+=String.fromCharCode(s.getInt8(e+2));r=this.parseHeaders(a),n.byteLength>o+2&&(i=n.slice(2+o)),t.resolve(new Bj.ConnectionMessage(e.messageType,i,r,e.id))}}catch(gie){t.reject(`Error formatting the message. Error: ${gie}`)}return t.promise}fromConnectionMessage(e){const t=new Bj.Deferred;try{if(e.messageType===Bj.MessageType.Text){const n=`${this.makeHeaders(e)}\r\n${e.textBody?e.textBody:""}`;t.resolve(new Bj.RawWebsocketMessage(Bj.MessageType.Text,n,e.id))}else if(e.messageType===Bj.MessageType.Binary){const n=this.makeHeaders(e),r=e.binaryBody,i=this.stringToArrayBuffer(n),s=new Int8Array(i),o=s.byteLength,a=new Int8Array(2+o+(r?r.byteLength:0));if(a[0]=o>>8&255,a[1]=255&o,a.set(s,2),r){const e=new Int8Array(r);a.set(e,2+o)}const l=a.buffer;t.resolve(new Bj.RawWebsocketMessage(Bj.MessageType.Binary,l,e.id))}}catch(gie){t.reject(`Error formatting the message. ${gie}`)}return t.promise}makeHeaders(e){let t="";if(e.headers)for(const n in e.headers)n&&(t+=`${n}: ${e.headers[n]}\r\n`);return t}parseHeaders(e){const t={};if(e){const n=e.match(/[^\r\n]+/g);if(t)for(const e of n)if(e){const n=e.indexOf(":"),r=n>0?e.substr(0,n).trim().toLowerCase():e,i=n>0&&e.length>n+1?e.substr(n+1).trim():"";t[r]=i}}return t}stringToArrayBuffer(e){const t=new ArrayBuffer(e.length),n=new DataView(t);for(let r=0;r<e.length;r++)n.setUint8(r,e.charCodeAt(r));return t}};var Uj,Wj,$j,Hj,Vj,qj={},Gj={},Kj={},Jj={},Yj={},Zj={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionStatus=e.SynthesisStatus=void 0,(t=e.SynthesisStatus||(e.SynthesisStatus={}))[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error",(n=e.RecognitionStatus||(e.RecognitionStatus={}))[n.Success=0]="Success",n[n.NoMatch=1]="NoMatch",n[n.InitialSilenceTimeout=2]="InitialSilenceTimeout",n[n.BabbleTimeout=3]="BabbleTimeout",n[n.Error=4]="Error",n[n.EndOfDictation=5]="EndOfDictation",n[n.TooManyRequests=6]="TooManyRequests",n[n.BadRequest=7]="BadRequest",n[n.Forbidden=8]="Forbidden"}(Zj);var Qj,Xj={},e_={};Object.defineProperty(e_,"__esModule",{value:!0}),e_.TranslationHypothesis=void 0;const t_=XT,n_=ST;class r_{constructor(e,t){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Offset+=t,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(e,t){return new r_(JSON.parse(e),t)}static fromTranslationResponse(e,t){t_.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const n=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,n.Translation=e,new r_(n,t)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return null==(e=this.privTranslationHypothesis.PrimaryLanguage)?void 0:e.Language}asJson(){const e=f({},this.privTranslationHypothesis);return void 0!==e.Translation?JSON.stringify(m(f({},e),{TranslationStatus:n_.TranslationStatus[e.Translation.TranslationStatus]})):JSON.stringify(e)}mapTranslationStatus(e){return"string"==typeof e?n_.TranslationStatus[e]:"number"==typeof e?e:void 0}}e_.TranslationHypothesis=r_;var i_,s_,o_={},a_={},l_={};Object.defineProperty(l_,"__esModule",{value:!0}),l_.SpeechDetected=void 0;class c_{constructor(e,t){this.privSpeechStartDetected=JSON.parse(e),this.privSpeechStartDetected.Offset+=t}static fromJSON(e,t){return new c_(e,t)}get Offset(){return this.privSpeechStartDetected.Offset}}l_.SpeechDetected=c_;var u_={};Object.defineProperty(u_,"__esModule",{value:!0}),u_.SpeechHypothesis=void 0;class d_{constructor(e,t){this.privSpeechHypothesis=JSON.parse(e),this.updateOffset(t)}static fromJSON(e,t){return new d_(e,t)}updateOffset(e){this.privSpeechHypothesis.Offset+=e}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}u_.SpeechHypothesis=d_;var p_={};Object.defineProperty(p_,"__esModule",{value:!0}),p_.SpeechKeyword=void 0;class h_{constructor(e,t){this.privSpeechKeyword=JSON.parse(e),this.privSpeechKeyword.Offset+=t}static fromJSON(e,t){return new h_(e,t)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}}p_.SpeechKeyword=h_;var f_,m_,v_={},g_={},y_={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityProvider=e.SpeakerDiarizationMode=void 0,(t=e.SpeakerDiarizationMode||(e.SpeakerDiarizationMode={})).None="None",t.Identity="Identity",t.Anonymous="Anonymous",(e.IdentityProvider||(e.IdentityProvider={})).CallCenter="CallCenter"}(y_);var b_,x_,w_,S_={},C_={},E_={},T_={};Object.defineProperty(T_,"__esModule",{value:!0}),T_.AddedLmIntent=void 0,T_.AddedLmIntent=class{constructor(e,t){this.modelImpl=e,this.intentName=t}};var N_,P_={},R_={};Object.defineProperty(R_,"__esModule",{value:!0}),R_.IntentResponse=void 0;class I_{constructor(e){this.privIntentResponse=""===e?{}:JSON.parse(e)}static fromJSON(e){return new I_(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}R_.IntentResponse=I_;var k_={};Object.defineProperty(k_,"__esModule",{value:!0});var j_={},__={};Object.defineProperty(__,"__esModule",{value:!0}),__.ServiceTelemetryListener=void 0;const A_=OT(),O_=yj;__.ServiceTelemetryListener=class{constructor(e,t,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){if(!this.privIsDisposed&&(e instanceof O_.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof A_.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof A_.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof A_.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof A_.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof A_.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof O_.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof A_.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof A_.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof A_.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof A_.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)){this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array);const t=50;this.privReceivedMessages[e.message.headers.path].length<t&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)}}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}},Object.defineProperty(j_,"__esModule",{value:!0}),j_.RequestSession=void 0;const D_=OT(),M_=yj,L_=__;j_.RequestSession=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=(0,D_.createNoDashGuid)(),this.privAudioNodeId=(0,D_.createNoDashGuid)(),this.privTurnDeferral=new D_.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new L_.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new M_.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t){return T(this,null,function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new M_.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))})}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new M_.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(e){return T(this,null,function*(){e&&(yield this.onComplete())})}onConnectionEstablishCompleted(e,t){return T(this,null,function*(){if(200===e)return this.onEvent(new M_.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&(yield this.onComplete())})}onServiceTurnEndResponse(e){return T(this,null,function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())})}onSpeechContext(){this.privRequestId=(0,D_.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new D_.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(){return T(this,null,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}})}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return T(this,null,function*(){yield this.onComplete()})}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),D_.Events.instance.onEvent(e)}onComplete(){return T(this,null,function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())})}detachAudioNode(){return T(this,null,function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))})}};var z_={},F_={};!function(e){var t,n,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.TentativePhraseResultsOption=e.OutputFormat=e.PhraseExtension=e.PhraseOption=void 0,(t=e.PhraseOption||(e.PhraseOption={})).WordTimings="WordTimings",t.SNR="SNR",t.Pronunciation="Pronunciation",t.WordPronunciation="WordPronunciation",t.WordConfidence="WordConfidence",t.Words="Words",t.Sentiment="Sentiment",t.PronunciationAssessment="PronunciationAssessment",t.ContentAssessment="ContentAssessment",t.PhraseAMScore="PhraseAMScore",t.PhraseLMScore="PhraseLMScore",t.WordAMScore="WordAMScore",t.WordLMScore="WordLMScore",t.RuleTree="RuleTree",t.NBestTimings="NBestTimings",t.DecoderDiagnostics="DecoderDiagnostics",t.DisplayWordTimings="DisplayWordTimings",t.DisplayWords="DisplayWords",(n=e.PhraseExtension||(e.PhraseExtension={})).Graph="Graph",n.Corrections="Corrections",n.Sentiment="Sentiment",(r=e.OutputFormat||(e.OutputFormat={})).Simple="Simple",r.Detailed="Detailed",(i=e.TentativePhraseResultsOption||(e.TentativePhraseResultsOption={})).None="None",i.Always="Always"}(F_),Object.defineProperty(z_,"__esModule",{value:!0}),z_.SpeechContext=void 0;const B_=tR,U_=F_;z_.SpeechContext=class{constructor(e){this.privContext={},this.privDynamicGrammar=e}getContext(){return this.privContext}setPronunciationAssessmentParams(e,t=!1){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),void 0===this.privContext.phraseDetection.enrichment&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e)||{},t&&(this.privContext.phraseDetection.mode=B_.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(U_.PhraseOption.PronunciationAssessment),-1===this.privContext.phraseOutput.detailed.options.indexOf(U_.PhraseOption.SNR)&&this.privContext.phraseOutput.detailed.options.push(U_.PhraseOption.SNR)}setDetailedOutputFormat(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=U_.OutputFormat.Detailed}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=U_.OutputFormat.Detailed,-1===this.privContext.phraseOutput.detailed.options.indexOf(U_.PhraseOption.WordTimings)&&this.privContext.phraseOutput.detailed.options.push(U_.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=e,JSON.stringify(this.privContext)}};var W_={},$_={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.SubstringMatchType=e.GroupType=void 0,(t=e.GroupType||(e.GroupType={})).IntentText="IntentText",t.IntentEntity="IntentEntity",t.Generic="Generic",t.People="People",t.Place="Place",t.DynamicEntity="DynamicEntity",(n=e.SubstringMatchType||(e.SubstringMatchType={})).None="None",n.LeftRooted="LeftRooted",n.PartialName="PartialName",n.MiddleOfSentence="MiddleOfSentence"}($_),Object.defineProperty(W_,"__esModule",{value:!0}),W_.DynamicGrammarBuilder=void 0;const H_=$_;W_.DynamicGrammarBuilder=class{constructor(){this.privWeight=1}addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}setWeight(e){this.privWeight=e}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.referenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach(e=>{t.push({text:e})}),e.groups=[{type:H_.GroupType.Generic,items:t}],e.bias=this.privWeight}return e}};var V_={},q_={},G_={},K_={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataStreamType=e.ActivityPayloadResponse=void 0;class t{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}var n;e.ActivityPayloadResponse=t,(n=e.MessageDataStreamType||(e.MessageDataStreamType={}))[n.None=0]="None",n[n.TextToSpeechAudio=1]="TextToSpeechAudio"}(K_),Object.defineProperty(G_,"__esModule",{value:!0}),G_.DialogServiceTurnState=void 0;const J_=qN,Y_=VN,Z_=K_;G_.DialogServiceTurnState=class{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===Z_.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=Y_.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==t?t:J_.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}},Object.defineProperty(q_,"__esModule",{value:!0}),q_.DialogServiceTurnStateManager=void 0;const Q_=kE,X_=G_;q_.DialogServiceTurnStateManager=class{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new Q_.InvalidOperationError("Service error: There is already a turn with id:"+e);const t=new X_.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new Q_.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}};var eA={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.InvocationSource=void 0,(t=e.InvocationSource||(e.InvocationSource={})).None="None",t.VoiceActivationWithKeyword="VoiceActivationWithKeyword"}(eA);var tA,nA={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.OnRejectAction=e.KeywordDetectionType=void 0,(e.KeywordDetectionType||(e.KeywordDetectionType={})).StartTrigger="StartTrigger",(t=e.OnRejectAction||(e.OnRejectAction={})).EndOfTurn="EndOfTurn",t.Continue="Continue"}(nA);var rA={};Object.defineProperty(rA,"__esModule",{value:!0}),rA.AgentConfig=void 0,rA.AgentConfig=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}};var iA={},sA={},oA={};Object.defineProperty(oA,"__esModule",{value:!0}),oA.ConversationConnectionConfig=void 0;const aA=hj;class lA extends aA.RestConfigBase{static get host(){return lA.privHost}static get apiVersion(){return lA.privApiVersion}static get clientAppId(){return lA.privClientAppId}static get defaultLanguageCode(){return lA.privDefaultLanguageCode}static get restPath(){return lA.privRestPath}static get webSocketPath(){return lA.privWebSocketPath}static get transcriptionEventKeys(){return lA.privTranscriptionEventKeys}}var cA;oA.ConversationConnectionConfig=lA,lA.privHost="dev.microsofttranslator.com",lA.privRestPath="/capito/room",lA.privApiVersion="2.0",lA.privDefaultLanguageCode="en-US",lA.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",lA.privWebSocketPath="/capito/translate",lA.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var uA={},dA={},pA={},hA={};Object.defineProperty(hA,"__esModule",{value:!0}),hA.ConversationConnectionMessage=void 0;const fA=OT();class mA extends fA.ConnectionMessage{constructor(e,t,n,r){super(e,t,n,r);const i=JSON.parse(this.textBody);void 0!==i.type&&(this.privConversationMessageType=i.type)}get conversationMessageType(){return this.privConversationMessageType}}hA.ConversationConnectionMessage=mA,Object.defineProperty(pA,"__esModule",{value:!0}),pA.ConversationWebsocketMessageFormatter=void 0;const vA=OT(),gA=hA;var yA;pA.ConversationWebsocketMessageFormatter=class{toConnectionMessage(e){const t=new vA.Deferred;try{if(e.messageType===vA.MessageType.Text){const n=new gA.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(n)}else e.messageType===vA.MessageType.Binary&&t.resolve(new gA.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(gie){t.reject(`Error formatting the message. Error: ${gie}`)}return t.promise}fromConnectionMessage(e){const t=new vA.Deferred;try{if(e.messageType===vA.MessageType.Text){const n=`${e.textBody?e.textBody:""}`;t.resolve(new vA.RawWebsocketMessage(vA.MessageType.Text,n,e.id))}}catch(gie){t.reject(`Error formatting the message. ${gie}`)}return t.promise}};var bA={},xA={};Object.defineProperty(xA,"__esModule",{value:!0}),xA.ConversationRequestSession=void 0;const wA=OT();xA.ConversationRequestSession=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=(0,wA.createNoDashGuid)(),this.privRequestCompletionDeferral=new wA.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,t){this.privSessionId=t}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){200!==e&&403===e&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=(0,wA.createNoDashGuid)():this.onComplete()}dispose(){return T(this,null,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach()}})}onComplete(){}};var SA,CA={};function EA(){if(SA)return CA;SA=1,Object.defineProperty(CA,"__esModule",{value:!0}),CA.ConversationReceivedTranslationEventArgs=CA.ParticipantsListEventArgs=CA.ParticipantAttributeEventArgs=CA.ParticipantEventArgs=CA.LockRoomEventArgs=CA.MuteAllEventArgs=void 0;const e=sj();class t extends e.SessionEventArgs{constructor(e,t){super(t),this.privIsMuted=e}get isMuted(){return this.privIsMuted}}CA.MuteAllEventArgs=t;class n extends e.SessionEventArgs{constructor(e,t){super(t),this.privIsLocked=e}get isMuted(){return this.privIsLocked}}CA.LockRoomEventArgs=n;class r extends e.SessionEventArgs{constructor(e,t){super(t),this.privParticipant=e}get participant(){return this.privParticipant}}CA.ParticipantEventArgs=r;class i extends e.SessionEventArgs{constructor(e,t,n,r){super(r),this.privKey=t,this.privValue=n,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}CA.ParticipantAttributeEventArgs=i;class s extends e.SessionEventArgs{constructor(e,t,n,r,i,s,o,a,l){super(l),this.privRoomId=e,this.privSessionToken=t,this.privTranslateTo=n,this.privProfanityFilter=r,this.privRoomProfanityFilter=i,this.privIsRoomLocked=s,this.privIsRoomLocked=o,this.privParticipants=a}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}return CA.ParticipantsListEventArgs=s,CA.ConversationReceivedTranslationEventArgs=class{constructor(e,t,n){this.privPayload=t,this.privCommand=e,this.privSessionId=n}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}},CA}var TA={};Object.defineProperty(TA,"__esModule",{value:!0}),TA.ConversationTranslatorCommandTypes=TA.ConversationTranslatorMessageTypes=TA.InternalParticipants=void 0,TA.InternalParticipants=class{constructor(e=[],t){this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(void 0===e)return;const t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(t=>t.id===e)}getParticipant(e){return this.participants.find(t=>t.id===e)}deleteParticipant(e){this.participants=this.participants.filter(t=>t.id!==e)}get host(){return this.participants.find(e=>!0===e.isHost)}get me(){return this.getParticipant(this.meId)}},TA.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},TA.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var NA={},PA={};Object.defineProperty(PA,"__esModule",{value:!0}),PA.CommandResponsePayload=void 0;class RA{constructor(e){this.privCommandResponse=(e=>JSON.parse(e))(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new RA(e)}}PA.CommandResponsePayload=RA;var IA={};Object.defineProperty(IA,"__esModule",{value:!0}),IA.ParticipantPayloadResponse=IA.ParticipantsListPayloadResponse=void 0;class kA{constructor(e){this.privParticipantsPayloadResponse=(e=>JSON.parse(e))(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new kA(e)}}IA.ParticipantsListPayloadResponse=kA;class jA{constructor(e){this.privParticipantPayloadResponse=(e=>JSON.parse(e))(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new jA(e)}}IA.ParticipantPayloadResponse=jA;var _A,AA,OA={};Object.defineProperty(OA,"__esModule",{value:!0}),OA.TextResponsePayload=OA.SpeechResponsePayload=void 0;class DA{constructor(e){this.privSpeechResponse=(e=>JSON.parse(e))(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}static fromJSON(e){return new DA(e)}}OA.SpeechResponsePayload=DA;class MA{constructor(e){this.privTextResponse=(e=>JSON.parse(e))(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new MA(e)}}function LA(){if(AA)return uA;AA=1,Object.defineProperty(uA,"__esModule",{value:!0}),uA.ConversationTranslatorRecognizer=uA.ConversationRecognizerFactory=void 0;const e=fO(),t=OT(),n=XT,r=sj(),i=function(){if(yA)return dA;yA=1,Object.defineProperty(dA,"__esModule",{value:!0}),dA.ConversationConnectionFactory=void 0;const e=mj(),t=OT(),n=XT,r=sj(),i=GR(),s=oA,o=pA;let a=class extends i.ConnectionFactoryBase{create(i,a,l){const c=i.parameters.getProperty(r.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),u=i.parameters.getProperty(r.PropertyId.ConversationTranslator_CorrelationId,(0,t.createGuid)()),d=`wss://${c}${s.ConversationConnectionConfig.webSocketPath}`,p=i.parameters.getProperty(r.PropertyId.ConversationTranslator_Token,void 0);n.Contracts.throwIfNullOrUndefined(p,"token");const h={};h[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,h[s.ConversationConnectionConfig.configParams.token]=p,h[s.ConversationConnectionConfig.configParams.correlationId]=u;const f="true"===i.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new e.WebsocketConnection(d,h,{},new o.ConversationWebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(i),f,l))}};return dA.ConversationConnectionFactory=a,dA}(),s=function(){if(_A)return bA;_A=1,Object.defineProperty(bA,"__esModule",{value:!0}),bA.ConversationServiceAdapter=void 0;const e=OT(),t=sj(),n=fO(),r=hA,i=xA,s=EA(),o=TA,a=NA;let l=class l extends n.ServiceRecognizerBase{constructor(t,n,r,s,o){super(t,n,r,s,o),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=o,this.privConversationAuthentication=t,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=e=>this.conversationConnectImpl(e),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession((0,e.createNoDashGuid)()),this.privConversationConnectionFactory=n,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(e){return T(this,null,function*(){if(this.privConversationIsDisposed=!0,void 0!==this.privConnectionConfigPromise){const t=yield this.privConnectionConfigPromise;yield t.dispose(e)}yield E(l.prototype,this,"dispose").call(this,e)})}sendMessage(t){return T(this,null,function*(){return(yield this.fetchConnection()).send(new r.ConversationConnectionMessage(e.MessageType.Text,t))})}sendMessageAsync(t){return T(this,null,function*(){const n=yield this.fetchConnection();yield n.send(new r.ConversationConnectionMessage(e.MessageType.Text,t))})}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return T(this,null,function*(){return!0})}cancelRecognition(e,n,r,i,s){this.terminateMessageLoop=!0;const o=new t.ConversationTranslationCanceledEventArgs(r,s,i,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,o)}catch(gie){}}conversationConnectImpl(e){return T(this,null,function*(){return this.privConnectionLoop=this.startMessageLoop(),e})}receiveConversationMessageOverride(){return T(this,null,function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const r=new e.Deferred;try{const e=yield this.fetchConnection(),i=yield e.read();if(this.isDisposed()||this.terminateMessageLoop)return r.resolve(),Promise.resolve();if(!i)return this.receiveConversationMessageOverride();const l=this.privConversationRequestSession.sessionId,c=i.conversationMessageType.toLowerCase();let u=!1;try{switch(c){case"info":case"participant_command":case"command":const e=a.CommandResponsePayload.fromJSON(i.textBody);switch(e.command.toLowerCase()){case"participantlist":const r=a.ParticipantsListPayloadResponse.fromJSON(i.textBody),c=r.participants.map(e=>({avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new s.ParticipantsListEventArgs(r.roomid,r.token,r.translateTo,r.profanityFilter,r.roomProfanityFilter,r.roomLocked,r.muteAll,c,l));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(e.participantId,o.ConversationTranslatorCommandTypes.setTranslateToLanguages,e.value,l));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(e.participantId,o.ConversationTranslatorCommandTypes.setProfanityFiltering,e.value,l));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(e.participantId,o.ConversationTranslatorCommandTypes.setMute,e.value,l));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new s.MuteAllEventArgs(e.value,l));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(e.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(e.participantId,o.ConversationTranslatorCommandTypes.setUseTTS,e.value,l));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new s.LockRoomEventArgs(e.value,l));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(e.participantId,o.ConversationTranslatorCommandTypes.changeNickname,e.value,l));break;case"joinsession":const u=a.ParticipantPayloadResponse.fromJSON(i.textBody),d={avatar:u.avatar,displayName:u.nickname,id:u.participantId,isHost:u.ishost,isMuted:u.ismuted,isUsingTts:u.usetts,preferredLanguage:u.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(d,l));break;case"leavesession":const p={id:e.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(p,l));break;case"disconnectsession":e.participantId;break;case"token":const h=new n.CognitiveTokenAuthentication(()=>{const t=e.token;return Promise.resolve(t)},()=>{const t=e.token;return Promise.resolve(t)});this.authentication=h,this.privConversationServiceConnector.onToken(h)}break;case"partial":case"final":const r=a.SpeechResponsePayload.fromJSON(i.textBody),d="final"===c?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,p=new t.ConversationTranslationResult(r.participantId,this.getTranslations(r.translations),r.language,r.id,d,r.recognition,void 0,void 0,i.textBody,void 0);r.isFinal?((void 0!==p.text&&p.text.length>0||r.id===this.privLastPartialUtteranceId)&&(u=!0),u&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(o.ConversationTranslatorMessageTypes.final,p,l))):void 0!==p.text&&(this.privLastPartialUtteranceId=r.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(o.ConversationTranslatorMessageTypes.partial,p,l)));break;case"translated_message":const h=a.TextResponsePayload.fromJSON(i.textBody),f=new t.ConversationTranslationResult(h.participantId,this.getTranslations(h.translations),h.language,void 0,void 0,h.originalText,void 0,void 0,void 0,i.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(o.ConversationTranslatorMessageTypes.instantMessage,f,l))}}catch(gie){}return this.receiveConversationMessageOverride()}catch(gie){this.terminateMessageLoop=!0}return r.promise})}startMessageLoop(){return T(this,null,function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const e=this.receiveConversationMessageOverride();try{return yield e}catch(n){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,n),null}})}configConnection(){return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then(t=>t.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(e=>e),this.privConnectionConfigPromise)}getTranslations(e){let n;if(void 0!==e){n=new t.Translations;for(const t of e)n.set(t.lang,t.translation)}return n}};return bA.ConversationServiceAdapter=l,bA}();uA.ConversationRecognizerFactory=class{static fromConfig(e,t,n){return new o(e,t,n)}};let o=class o extends r.Recognizer{constructor(e,s,o){const a=s;n.Contracts.throwIfNull(a,"speechConfig");const l=e;n.Contracts.throwIfNull(l,"conversationImpl"),super(o,a.properties,new i.ConversationConnectionFactory),this.privConversation=l,this.privIsDisposed=!1,this.privProperties=a.properties.clone(),this.privConnection=r.Connection.fromRecognizer(this),"on"===this.privProperties.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!=typeof Blob&&"undefined"!=typeof Worker?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):"undefined"!=typeof window?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,t,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(t,r)}catch(i){if(r)if(i instanceof Error){const e=i;r(e.name+": "+e.message)}else r(i)}}disconnect(e,r){try{n.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{e&&e()},e=>{r&&r(e)})}catch(i){if(r)if(i instanceof Error){const e=i;r(e.name+": "+e.message)}else r(i);this.dispose(!0).catch(e=>{t.Events.instance.onEvent(new t.BackgroundEvent(e))})}}sendRequest(e,r,i){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,r,i)}catch(s){if(i)if(s instanceof Error){const e=s;i(e.name+": "+e.message)}else i(s);this.dispose(!0).catch(e=>{t.Events.instance.onEvent(new t.BackgroundEvent(e))})}}onToken(e){this.privConversation.onToken(e)}close(){return T(this,null,function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))})}dispose(e){return T(this,null,function*(){this.privIsDisposed||e&&(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield E(o.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(e,t,n,r){const i=n;return new s.ConversationServiceAdapter(e,t,i,r,this)}sendMessage(e,t,n){const r=this.privReco;var i,s,o;i=r.sendMessageAsync(e),s=t,o=n,void 0!==i?i.then(()=>{try{s&&s()}catch(gie){o&&o(`'Unhandled error on promise callback: ${gie}'`)}},e=>{try{o&&o(e)}catch(t){}}):o&&o("Null promise"),this.resetConversationTimeout()}resetConversationTimeout(){void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return uA.ConversationTranslatorRecognizer=o,uA}OA.TextResponsePayload=MA,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextResponsePayload=e.SpeechResponsePayload=e.ParticipantPayloadResponse=e.ParticipantsListPayloadResponse=e.CommandResponsePayload=void 0;var t=PA;Object.defineProperty(e,"CommandResponsePayload",{enumerable:!0,get:function(){return t.CommandResponsePayload}});var n=IA;Object.defineProperty(e,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantsListPayloadResponse}}),Object.defineProperty(e,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantPayloadResponse}});var r=OA;Object.defineProperty(e,"SpeechResponsePayload",{enumerable:!0,get:function(){return r.SpeechResponsePayload}}),Object.defineProperty(e,"TextResponsePayload",{enumerable:!0,get:function(){return r.TextResponsePayload}})}(NA);var zA,FA,BA={};function UA(){return FA||(FA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InternalParticipants=e.ConversationTranslatorMessageTypes=e.ConversationTranslatorCommandTypes=e.ParticipantsListEventArgs=e.ParticipantEventArgs=e.ParticipantAttributeEventArgs=e.MuteAllEventArgs=e.LockRoomEventArgs=e.ConversationReceivedTranslationEventArgs=e.TranscriberRecognizer=e.ConversationRecognizerFactory=e.ConversationConnectionConfig=e.ConversationManager=void 0;var t=function(){if(cA)return sA;cA=1,Object.defineProperty(sA,"__esModule",{value:!0}),sA.ConversationManager=void 0;const e=mj(),t=XT,n=sj(),r=oA;return sA.ConversationManager=class{constructor(){this.privRequestParams=r.ConversationConnectionConfig.configParams,this.privErrors=r.ConversationConnectionConfig.restErrors,this.privHost=r.ConversationConnectionConfig.host,this.privApiVersion=r.ConversationConnectionConfig.apiVersion,this.privRestPath=r.ConversationConnectionConfig.restPath,this.privRestAdapter=new e.RestMessageAdapter({})}createOrJoin(i,s,o,a){try{t.Contracts.throwIfNullOrUndefined(i,"args");const l=i.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,r.ConversationConnectionConfig.defaultLanguageCode),c=i.getProperty(n.PropertyId.ConversationTranslator_Name,"conversation_host"),u=i.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),d=i.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),p=i.getProperty(n.PropertyId.SpeechServiceConnection_Key),h=i.getProperty(n.PropertyId.SpeechServiceConnection_Region),f=i.getProperty(n.PropertyId.SpeechServiceAuthorization_Token);t.Contracts.throwIfNullOrWhitespace(l,"languageCode"),t.Contracts.throwIfNullOrWhitespace(c,"nickname"),t.Contracts.throwIfNullOrWhitespace(u,"endpointHost");const m={};m[this.privRequestParams.apiVersion]=this.privApiVersion,m[this.privRequestParams.languageCode]=l,m[this.privRequestParams.nickname]=c;const v={};d&&(v[this.privRequestParams.correlationId]=d),v[this.privRequestParams.clientAppId]=r.ConversationConnectionConfig.clientAppId,void 0!==s?m[this.privRequestParams.roomId]=s:(t.Contracts.throwIfNullOrUndefined(h,this.privErrors.authInvalidSubscriptionRegion),v[this.privRequestParams.subscriptionRegion]=h,p?v[this.privRequestParams.subscriptionKey]=p:f?v[this.privRequestParams.authorization]=`Bearer ${f}`:t.Contracts.throwIfNullOrUndefined(p,this.privErrors.authInvalidSubscriptionKey));const g={};g.headers=v,this.privRestAdapter.options=g;const y=`https://${u}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Post,y,m,null).then(t=>{const n=e.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,t.headers);if(!t.ok){if(a){let e,r=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",t.status.toString());try{e=JSON.parse(t.data),r+=` [${e.error.code}: ${e.error.message}]`}catch(gie){r+=` [${t.data}]`}n&&(r+=` ${n}`),a(r)}return}const r=JSON.parse(t.data);if(r&&(r.requestId=n),o){try{o(r)}catch(gie){a&&a(gie)}o=void 0}}).catch(()=>{})}catch(l){if(a)if(l instanceof Error){const e=l;a(e.name+": "+e.message)}else a(l)}}leave(r,i){return new Promise((s,o)=>{try{t.Contracts.throwIfNullOrUndefined(r,this.privErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","token"));const o=r.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),a=r.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),l={};l[this.privRequestParams.apiVersion]=this.privApiVersion,l[this.privRequestParams.sessionToken]=i;const c={};a&&(c[this.privRequestParams.correlationId]=a);const u={};u.headers=c,this.privRestAdapter.options=u;const d=`https://${o}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Delete,d,l,null).then(e=>{e.ok,s()}).catch(()=>{})}catch(a){if(a instanceof Error){const e=a;o(e.name+": "+e.message)}else o(a)}})}},sA}();Object.defineProperty(e,"ConversationManager",{enumerable:!0,get:function(){return t.ConversationManager}});var n=oA;Object.defineProperty(e,"ConversationConnectionConfig",{enumerable:!0,get:function(){return n.ConversationConnectionConfig}});var r=LA();Object.defineProperty(e,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return r.ConversationRecognizerFactory}});var i=function(){if(zA)return BA;zA=1,Object.defineProperty(BA,"__esModule",{value:!0}),BA.TranscriberRecognizer=void 0;const e=OT(),t=XT,n=sj(),r=fO(),i=tR;let s=class s extends n.Recognizer{constructor(e,i){const s=e;t.Contracts.throwIfNull(s,"speechTranslationConfig");const o=i;t.Contracts.throwIfNull(o,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(s.speechRecognitionLanguage,n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(i,s.properties,new r.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){t.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,e)}set conversation(e){t.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(e){t.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(t,n){(0,e.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),t,n)}stopContinuousRecognitionAsync(t,n){(0,e.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),t,n)}close(){return T(this,null,function*(){this.privDisposedRecognizer||(yield this.dispose(!0))})}pushConversationEvent(e,n){return T(this,null,function*(){const r=this.privReco;t.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),yield r.sendSpeechEventAsync(e,n)})}pushMeetingEvent(e,n){return T(this,null,function*(){const r=this.privReco;t.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),yield r.sendMeetingSpeechEventAsync(e,n)})}enforceAudioGating(){return T(this,null,function*(){const e=this.audioConfig,t=(yield e.format).channels;if(1===t){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==t)throw new Error(`Unsupported audio configuration: Detected ${t}-channel audio`)})}connectMeetingCallbacks(e){this.isMeetingRecognizer=!0,this.canceled=(t,n)=>{e.canceled&&e.canceled(e,n)},this.recognizing=(t,n)=>{e.transcribing&&e.transcribing(e,n)},this.recognized=(t,n)=>{e.transcribed&&e.transcribed(e,n)},this.sessionStarted=(t,n)=>{e.sessionStarted&&e.sessionStarted(e,n)},this.sessionStopped=(t,n)=>{e.sessionStopped&&e.sessionStopped(e,n)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(e){return T(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield E(s.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,n,i){const s=n;return new r.TranscriptionServiceRecognizer(e,t,s,i,this)}};return BA.TranscriberRecognizer=s,BA}();Object.defineProperty(e,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var s=EA();Object.defineProperty(e,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(e,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(e,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(e,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(e,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var o=TA;Object.defineProperty(e,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return o.ConversationTranslatorCommandTypes}}),Object.defineProperty(e,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return o.ConversationTranslatorMessageTypes}}),Object.defineProperty(e,"InternalParticipants",{enumerable:!0,get:function(){return o.InternalParticipants}})}(iA)),iA}var WA={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesisAudioMetadata=e.MetadataType=void 0,(t=e.MetadataType||(e.MetadataType={})).WordBoundary="WordBoundary",t.Bookmark="Bookmark",t.Viseme="Viseme",t.SentenceBoundary="SentenceBoundary",t.SessionEnd="SessionEnd",t.AvatarSignal="TalkingAvatarSignal";class n{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new n(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}e.SynthesisAudioMetadata=n}(WA);var $A={},HA={};Object.defineProperty(HA,"__esModule",{value:!0}),HA.SynthesisStartedEvent=HA.ConnectingToSynthesisServiceEvent=HA.SynthesisTriggeredEvent=HA.SpeechSynthesisEvent=void 0;const VA=OT();class qA extends VA.PlatformEvent{constructor(e,t,n=VA.EventType.Info){super(e,n),this.privRequestId=t}get requestId(){return this.privRequestId}}var GA;HA.SpeechSynthesisEvent=qA,HA.SynthesisTriggeredEvent=class extends qA{constructor(e,t,n){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}},HA.ConnectingToSynthesisServiceEvent=class extends qA{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}},HA.SynthesisStartedEvent=class extends qA{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}};var KA,JA,YA,ZA,QA,XA,eO,tO,nO,rO,iO={},sO={},oO={},aO={},lO={},cO={},uO={},dO={},pO={},hO={};function fO(){return rO||(rO=1,function(e){var t=Be&&Be.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Be&&Be.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDetectSourceLanguagesOpenRangeOptionName=e.ForceDictationPropertyName=e.ServicePropertiesPropertyName=e.CancellationErrorCodePropertyName=e.OutputFormatPropertyName=e.SpeechSynthesisAdapter=e.AvatarSynthesisAdapter=void 0,n(sC,e),n(UT,e),n(LT,e),n(qT,e),n(GT,e),n(function(){if(pj)return KT;pj=1,Object.defineProperty(KT,"__esModule",{value:!0}),KT.IntentConnectionFactory=void 0;const e=mj(),t=sj(),n=GR(),r=fO(),i=DT;let s=class extends n.ConnectionFactoryBase{create(s,o,a){let l=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const e=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_IntentRegion),r=n.ConnectionFactoryBase.getHostSuffix(e);l=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+e+".sr.speech"+r)+"/speech/recognition/interactive/cognitiveservices/v1"}const c={format:"simple",language:s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(s,c,l);const u={};void 0!==o.token&&""!==o.token&&(u[o.headerName]=o.token),u[i.HeaderNames.ConnectionId]=a,s.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,l);const d="true"===s.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new e.WebsocketConnection(l,c,u,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(s),d,a))}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}};return KT.IntentConnectionFactory=s,KT}(),e),n(function(){if(vj)return gj;vj=1,Object.defineProperty(gj,"__esModule",{value:!0}),gj.VoiceProfileConnectionFactory=gj.SpeakerRecognitionConnectionFactory=void 0;const e=mj(),t=sj(),n=GR(),r=fO(),i=DT;class s extends n.ConnectionFactoryBase{create(s,o,a,l){let c=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!c){const e=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),r=n.ConnectionFactoryBase.getHostSuffix(e),i=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${e}.spr-frontend.speech${r}`),o=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");c=`${i}/speaker/ws/${this.scenarioToPath(o)}/${a}`}const u={format:"simple",language:s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(s,u,c);const d={};void 0!==o.token&&""!==o.token&&(d[o.headerName]=o.token),d[i.HeaderNames.ConnectionId]=l,d[i.HeaderNames.SpIDAuthKey]=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Key),s.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,c);const p="true"===s.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new e.WebsocketConnection(c,u,d,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(s),p,l))}scenarioToPath(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}return gj.SpeakerRecognitionConnectionFactory=class extends s{create(e,t,n){return super.create(e,t,"recognition",n)}},gj.VoiceProfileConnectionFactory=class extends s{create(e,t,n){return super.create(e,t,"profile",n)}},gj}(),e),n(yj,e),n(function(){if(_j)return bj;_j=1,Object.defineProperty(bj,"__esModule",{value:!0}),bj.ServiceRecognizerBase=void 0;const e=mj(),t=OT(),n=sj(),r=fO(),i=xj,s=Ej,o=tR,a=Tj,l=Nj,c=Pj,u=Rj,d=Ij,p=kj,h=jj,f=Aj;let m=class m{constructor(e,i,s,o,a){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new t.ArgumentNullError("authentication");if(!i)throw new t.ArgumentNullError("connectionFactory");if(!s)throw new t.ArgumentNullError("audioSource");if(!o)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=o.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=i,this.privAudioSource=s,this.privRecognizerConfig=o,this.privIsDisposed=!1,this.privRecognizer=a,this.privRequestSession=new r.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new r.DynamicGrammarBuilder,this.privSpeechContext=new r.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new r.AgentConfig,"on"===this.privRecognizerConfig.parameters.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!=typeof Blob&&"undefined"!=typeof Worker?this.privSetTimeout=t.Timeout.setTimeout:("undefined"!=typeof window&&(this.privSetTimeout=window.setTimeout.bind(window)),"undefined"!=typeof globalThis&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(e=>{if("ConnectionClosedEvent"===e.name){const t=e;(1003===t.statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(n.CancellationReason.Error,1007===t.statusCode?n.CancellationErrorCode.BadRequestParameters:n.CancellationErrorCode.ConnectionFailure,`${t.reason} websocket error code: ${t.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,t.createNoDashGuid)())}setTranslationJson(){const e=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(void 0!==e){const t=e.split(","),r=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),i=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),s=void 0!==r?a.NextAction.Synthesize:a.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:s},onSuccess:{action:s},output:{includePassThroughResults:!0,interimResults:{mode:l.Mode.Always}},targetLanguages:t},void 0!==i&&(this.privSpeechContext.getContext().translation.category=i),void 0!==r){const e={};for(const n of t)e[n]=r;this.privSpeechContext.getContext().synthesis={defaultVoices:e}}const o=this.privSpeechContext.getContext().phraseDetection||{};o.onSuccess={action:f.NextAction.Translate},o.onInterim={action:f.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=o}}setSpeechSegmentationTimeoutJson(){var e,t,r;const i=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),a=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),l=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationStrategy,void 0),c={mode:s.SegmentationMode.Normal};let u=!1;if(void 0!==l){u=!0;let e=s.SegmentationMode.Normal;switch(l.toLowerCase()){case"default":break;case"time":e=s.SegmentationMode.Custom;break;case"semantic":e=s.SegmentationMode.Semantic}c.mode=e}if(void 0!==i){u=!0;const e=parseInt(i,10);c.mode=s.SegmentationMode.Custom,c.segmentationSilenceTimeoutMs=e}if(void 0!==a){u=!0;const e=parseInt(a,10);c.mode=s.SegmentationMode.Custom,c.segmentationForcedTimeoutMs=e}if(u){const n=this.privSpeechContext.getContext().phraseDetection||{};switch(n.mode=this.recognitionMode,this.recognitionMode){case o.RecognitionMode.Conversation:n.conversation=null!=(e=n.conversation)?e:{segmentation:{}},n.conversation.segmentation=c;break;case o.RecognitionMode.Interactive:n.interactive=null!=(t=n.interactive)?t:{segmentation:{}},n.interactive.segmentation=c;break;case o.RecognitionMode.Dictation:n.dictation=null!=(r=n.dictation)?r:{},n.dictation.segmentation=c}this.privSpeechContext.getContext().phraseDetection=n}}setLanguageIdJson(){const e=this.privSpeechContext.getContext().phraseDetection||{};if(void 0!==this.privRecognizerConfig.autoDetectSourceLanguages){const t=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let n;1===t.length&&t[0]===r.AutoDetectSourceLanguagesOpenRangeOptionName&&(t[0]="UND"),n="Continuous"===this.privRecognizerConfig.languageIdMode?c.LanguageIdDetectionMode.DetectContinuous:c.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:t,mode:n,onSuccess:{action:u.NextAction.Recognize},onUnknown:{action:d.OnUnknownAction.None},priority:c.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:p.ResultType.Auto},phraseResults:{resultType:h.PhraseResultOutputType.Always}};const i=this.privRecognizerConfig.sourceLanguageModels;void 0!==i&&(e.customModels=i,e.onInterim={action:f.NextAction.None},e.onSuccess={action:f.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=e}setOutputDetailLevelJson(){this.privEnableSpeakerId&&("true"===this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(r.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()===n.OutputFormat[n.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}setSpeechStartEventSensitivityJson(){const e=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_StartEventSensitivity,void 0);if(void 0!==e){let t=!1;switch(e.toLowerCase()){case o.SpeechStartEventSensitivity.Low:case o.SpeechStartEventSensitivity.Medium:case o.SpeechStartEventSensitivity.High:t=!0}if(t){const t=this.privSpeechContext.getContext().phraseDetection||{};t.voiceOnsetSensitivity=e.toLowerCase(),this.privSpeechContext.getContext().phraseDetection=t}}}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.ConversationTranslator_Token,e)}set voiceProfileType(e){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)}set authentication(e){this.privAuthentication=e}isDisposed(){return this.privIsDisposed}dispose(e){return T(this,null,function*(){if(this.privIsDisposed=!0,void 0!==this.privConnectionPromise)try{const t=yield this.privConnectionPromise;yield t.dispose(e)}catch(t){return}})}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(t,i,s){return T(this,null,function*(){if(void 0!==this.recognizeOverride)return void(yield this.recognizeOverride(t,i,s));if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=t,"2"===this.privRecognizerConfig.recognitionEndpointVersion){const e=this.privSpeechContext.getContext().phraseDetection||{};e.mode=t,this.privSpeechContext.getContext().phraseDetection=e}this.setLanguageIdJson(),this.setTranslationJson(),void 0!==this.privRecognizerConfig.autoDetectSourceLanguages&&void 0!==this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.setSpeechStartEventSensitivityJson(),this.privSuccessCallback=i,this.privErrorCallback=s,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const o=this.connectImpl();let a;try{const t=yield this.audioSource.attach(this.privRequestSession.audioNodeId),n=yield this.audioSource.format,i=yield this.audioSource.deviceInfo;this.privIsLiveAudio=i.type&&i.type===r.type.Microphones,a=new e.ReplayableAudioNode(t,n.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(a,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:i}}catch(c){throw yield this.privRequestSession.onStopRecognizing(),c}try{yield o}catch(c){return void(yield this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,c))}const l=new n.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,l),this.receiveMessage(),this.sendAudio(a).catch(e=>T(this,null,function*(){yield this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,e)}))})}stopRecognizing(){return T(this,null,function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}})}connect(){return T(this,null,function*(){return yield this.connectImpl(),Promise.resolve()})}connectAsync(e,t){this.connectImpl().then(()=>{try{e&&e()}catch(gie){t&&t(gie)}},e=>{try{t&&t(e)}catch(n){}})}disconnect(){return T(this,null,function*(){if(yield this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride()),void 0!==this.privConnectionPromise)try{yield(yield this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=void 0})}sendMessage(e){}sendNetworkMessage(e,n){return T(this,null,function*(){const r="string"==typeof n?t.MessageType.Text:t.MessageType.Binary,s="string"==typeof n?"application/json":"";return(yield this.fetchConnection()).send(new i.SpeechConnectionMessage(r,e,this.privRequestSession.requestId,s,n))})}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(e){this.privExpectContentAssessmentResponse=e}sendTelemetryData(){return T(this,null,function*(){const e=this.privRequestSession.getTelemetry();if(!0!==m.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(m.telemetryData)try{m.telemetryData(e)}catch(gie){}const n=yield this.fetchConnection();yield n.send(new i.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))})}cancelRecognitionLocal(e,t,n){return T(this,null,function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,n))})}receiveMessage(){return T(this,null,function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection();const s=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!s)return this.receiveMessage();this.privServiceHasSentMessage=!0;const o=i.SpeechConnectionMessage.fromConnectionMessage(s);if(o.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(o.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const i=r.SpeechDetected.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset),s=new n.RecognitionEventArgs(i.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,s);break;case"speech.enddetected":let a;a=o.textBody.length>0?o.textBody:"{ Offset: 0 }";const l=r.SpeechDetected.fromJSON(a,this.privRequestSession.currentTurnAudioOffset),c=new n.RecognitionEventArgs(l.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,c);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(n.CancellationReason.EndOfStream,n.CancellationErrorCode.NoError,void 0));const u=new n.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,u));e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(o))||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(o.path.toLowerCase(),o.textBody))}return this.receiveMessage()}catch(e){return null}})}updateSpeakerDiarizationAudioOffset(){const e=this.privRequestSession.recognitionBytesSent,t=0!==this.privAverageBytesPerMs?e/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(t)}sendSpeechContext(e,n){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const r=this.speechContext.toJSON();if(n&&this.privRequestSession.onSpeechContext(),r)return e.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",r))}setupTranslationWithLanguageId(){const e=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),t=void 0!==this.privRecognizerConfig.autoDetectSourceLanguages;if(void 0!==e&&t){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:p.ResultType.None},phraseResults:{resultType:h.PhraseResultOutputType.None}};const e=this.privSpeechContext.getContext().translation;if(e){const t=this.privRecognizerConfig.sourceLanguageModels;if(void 0!==t&&t.length>0){const e=this.privSpeechContext.getContext().phraseDetection||{};e.customModels=t,this.privSpeechContext.getContext().phraseDetection=e}void 0!==this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&(e.onSuccess={action:a.NextAction.Synthesize},e.onPassthrough={action:a.NextAction.Synthesize})}}}noOp(){}sendPrePayloadJSON(e,t=!0){return T(this,null,function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e,t),yield this.sendWaveHeader(e)})}sendWaveHeader(e){return T(this,null,function*(){const n=yield this.audioSource.format;return e.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",n.header))})}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then(e=>e.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(e,n,r){if(n.onSpeechContext(),!0!==m.telemetryDataEnabled){const e={context:{system:JSON.parse(r).context.system}};r=JSON.stringify(e)}if("true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){const e=JSON.parse(r);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",r=JSON.stringify(e)}if(r)return e.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.config",n.requestId,"application/json",r))}fetchConnection(){return T(this,null,function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(e=>e.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}sendAudio(e){return T(this,null,function*(){const n=yield this.audioSource.format;this.privAverageBytesPerMs=n.avgBytesPerSec/1e3;let r=Date.now();const s=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),o=n.avgBytesPerSec/1e3*parseInt(s,10),a=this.privRequestSession.recogNumber,l=()=>T(this,null,function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===a){const s=yield this.fetchConnection(),c=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let u,d;if(!c||c.isEnd?(u=null,d=0):(u=c.buffer,this.privRequestSession.onAudioSent(u.byteLength),d=o>=this.privRequestSession.bytesSent?0:Math.max(0,r-Date.now())),0!==d&&(yield this.delay(d)),null!==u&&(r=Date.now()+1e3*u.byteLength/(2*n.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===a){if(s.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,u)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),!(null==c?void 0:c.isEnd))return l();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}});return l()})}retryableConnect(){return T(this,null,function*(){let e=!1;this.privAuthFetchEventId=(0,t.createNoDashGuid)();const r=this.privRequestSession.sessionId;this.privConnectionId=void 0!==r?r:(0,t.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let i=0,s="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),n=yield t;yield this.privRequestSession.onAuthCompleted(!1);const r=yield this.privConnectionFactory.create(this.privRecognizerConfig,n,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(r.events),r.events.attach(e=>{this.connectionEvents.onEvent(e)});const o=yield r.open();if(200===o.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(o.statusCode),Promise.resolve(r);1006===o.statusCode&&(e=!0),i=o.statusCode,s=o.reason}return yield this.privRequestSession.onConnectionEstablishCompleted(i,s),Promise.reject(`Unable to contact server. StatusCode: ${i}, ${this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${s}`)})}delay(e){return new Promise(t=>this.privSetTimeout(t,e))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const n=new Uint8Array(e);t+=`${e.byteLength}\r\n`;for(let r=0;r<e.byteLength;r++)t+=n[r].toString(16).padStart(2,"0")+" ",(r+1)%16==0&&(console.info(t),t="")}console.info(t)}sendFinalAudio(){return T(this,null,function*(){const e=yield this.fetchConnection();yield e.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))})}configureConnection(){return T(this,null,function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e,!1),e)})}};return bj.ServiceRecognizerBase=m,m.telemetryDataEnabled=!0,bj}(),e),n(function(){if(Oj)return Mj;Oj=1,Object.defineProperty(Mj,"__esModule",{value:!0}),Mj.ConversationServiceRecognizer=void 0;const e=sj(),t=fO();let n=class extends t.ServiceRecognizerBase{constructor(e,t,n,r,i){super(e,t,n,r,i),this.handleSpeechPhraseMessage=e=>T(this,null,function*(){return this.handleSpeechPhrase(e)}),this.handleSpeechHypothesisMessage=e=>this.handleSpeechHypothesis(e)}processTypeSpecificMessages(e){}handleRecognizedCallback(e,t,n){}handleRecognizingCallback(e,t,n){}processSpeechMessages(e){return T(this,null,function*(){let t=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),t=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&(yield this.handleSpeechPhraseMessage(e.textBody)),t=!0}return t})}cancelRecognition(e,t,n,r,i){}handleSpeechPhrase(n){return T(this,null,function*(){const r=t.SimpleSpeechPhrase.fromJSON(n,this.privRequestSession.currentTurnAudioOffset),i=t.EnumTranslation.implTranslateRecognitionResult(r.RecognitionStatus);let s;const o=new e.PropertyCollection;if(o.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,n),this.privRequestSession.onPhraseRecognized(r.Offset+r.Duration),e.ResultReason.Canceled===i){const e=t.EnumTranslation.implTranslateCancelResult(r.RecognitionStatus),n=t.EnumTranslation.implTranslateCancelErrorCode(r.RecognitionStatus);yield this.cancelRecognitionLocal(e,n,t.EnumTranslation.implTranslateErrorDetails(n))}else if(r.RecognitionStatus!==t.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,i,r.DisplayText,r.Duration,r.Offset,r.Language,r.LanguageDetectionConfidence,r.SpeakerId,void 0,r.asJson(),o);else{const r=t.DetailedSpeechPhrase.fromJSON(n,this.privRequestSession.currentTurnAudioOffset);s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,i,r.Text,r.Duration,r.Offset,r.Language,r.LanguageDetectionConfidence,r.SpeakerId,void 0,r.asJson(),o)}this.handleRecognizedCallback(s,s.offset,this.privRequestSession.sessionId)}})}handleSpeechHypothesis(n){const r=t.SpeechHypothesis.fromJSON(n,this.privRequestSession.currentTurnAudioOffset),i=new e.PropertyCollection;i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,n);const s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,r.Text,r.Duration,r.Offset,r.Language,r.LanguageDetectionConfidence,r.SpeakerId,void 0,r.asJson(),i);this.privRequestSession.onHypothesis(r.Offset),this.handleRecognizingCallback(s,r.Duration,this.privRequestSession.sessionId)}};return Mj.ConversationServiceRecognizer=n,Mj}(),e),n((Dj||(Dj=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerConfig=e.SpeechResultFormat=void 0;const t=sj(),n=fO(),r=tR;var i;(i=e.SpeechResultFormat||(e.SpeechResultFormat={}))[i.Simple=0]="Simple",i[i.Detailed=1]="Detailed",e.RecognizerConfig=class{constructor(e,r){this.privSpeechServiceConfig=e||new n.SpeechServiceConfig(new n.Context(null)),this.privParameters=r,this.privMaxRetryCount=parseInt(r.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=r.getProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===r.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r.RecognitionMode[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==r.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(e){this.parameters.setProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,e)}get sourceLanguageModels(){const e=[];let n=!1;if(void 0!==this.autoDetectSourceLanguages)for(const r of this.autoDetectSourceLanguages.split(",")){const i=r+t.PropertyId.SpeechServiceConnection_EndpointId.toString(),s=this.parameters.getProperty(i,void 0);void 0!==s?(e.push({language:r,endpoint:s}),n=!0):e.push({language:r,endpoint:""})}return n?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(e){this.privEnableSpeakerId=e}}}(Lj)),Lj),e),n(zj,e),n(Fj,e),n(function(){if(Uj)return qj;Uj=1,Object.defineProperty(qj,"__esModule",{value:!0}),qj.SpeechConnectionFactory=void 0;const e=mj(),t=fO(),n=sj(),r=GR(),i=fO(),s=DT,o=VR,a=tR;let l=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}create(l,c,u){return T(this,null,function*(){let d=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);const p=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),h=r.ConnectionFactoryBase.getHostSuffix(p),f=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+p+".stt.speech"+h),m={},v=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(v?d&&-1!==d.search(o.QueryParameterNames.CustomSpeechDeploymentId)||(m[o.QueryParameterNames.CustomSpeechDeploymentId]=v):g&&(d&&-1!==d.search(o.QueryParameterNames.Language)||(m[o.QueryParameterNames.Language]=g)),d&&-1!==d.search(o.QueryParameterNames.Format)||(m[o.QueryParameterNames.Format]=l.parameters.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()),void 0!==l.autoDetectSourceLanguages&&(m[o.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(l,m,d),d){const e=new URL(d),t=e.pathname;""!==t&&"/"!==t||(e.pathname=this.universalUri+l.recognitionEndpointVersion,d=yield r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(e.toString()))}if(!d)switch(l.recognitionMode){case a.RecognitionMode.Conversation:d="true"===l.parameters.getProperty(t.ForceDictationPropertyName,"false")?f+this.dictationRelativeUri:void 0!==l.recognitionEndpointVersion&&parseInt(l.recognitionEndpointVersion,10)>1?`${f}${this.universalUri}${l.recognitionEndpointVersion}`:f+this.conversationRelativeUri;break;case a.RecognitionMode.Dictation:d=f+this.dictationRelativeUri;break;default:d=void 0!==l.recognitionEndpointVersion&&parseInt(l.recognitionEndpointVersion,10)>1?`${f}${this.universalUri}${l.recognitionEndpointVersion}`:f+this.interactiveRelativeUri}const y={};void 0!==c.token&&""!==c.token&&(y[c.headerName]=c.token),y[s.HeaderNames.ConnectionId]=u,y.connectionId=u;const b="true"===l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),x=new e.WebsocketConnection(d,m,y,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),b,u),w=x.uri;return l.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,w),x})}};return qj.SpeechConnectionFactory=l,qj}(),e),n(function(){if(Wj)return Gj;Wj=1,Object.defineProperty(Gj,"__esModule",{value:!0}),Gj.ConversationTranscriberConnectionFactory=void 0;const e=mj(),t=sj(),n=fO(),r=GR(),i=fO(),s=DT,o=VR;let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.conversationRelativeUriV1="/speech/recognition/conversation/cognitiveservices/v1"}create(n,a,l){return T(this,null,function*(){let c=n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const u=n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),d=r.ConnectionFactoryBase.getHostSuffix(u),p=n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+u+".stt.speech"+d),h={},f=n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(f?c&&-1!==c.search(o.QueryParameterNames.CustomSpeechDeploymentId)||(h[o.QueryParameterNames.CustomSpeechDeploymentId]=f):m&&(c&&-1!==c.search(o.QueryParameterNames.Language)||(h[o.QueryParameterNames.Language]=m)),void 0!==n.autoDetectSourceLanguages&&(h[o.QueryParameterNames.EnableLanguageId]="true"),"1"===n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0))c=`${p}${this.universalUri}`;else{if(this.setV2UrlParams(n,h,c),c){const e=new URL(c),t=e.pathname;""!==t&&"/"!==t||(e.pathname=this.universalUri,c=yield r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(e.toString()))}c||(c=`${p}${this.conversationRelativeUriV1}`)}const v={};void 0!==a.token&&""!==a.token&&(v[a.headerName]=a.token),v[s.HeaderNames.ConnectionId]=l;const g="true"===n.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),y=new e.WebsocketConnection(c,h,v,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(n),g,l),b=y.uri;return n.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,b),y})}setV2UrlParams(e,r,i){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,o.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,o.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,o.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,o.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,o.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,o.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,o.QueryParameterNames.StableIntermediateThreshold]]).forEach((t,n)=>{this.setUrlParameter(n,t,e,r,i)});const s=JSON.parse(e.parameters.getProperty(n.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach(e=>{r[e]=s[e]})}};return Gj.ConversationTranscriberConnectionFactory=a,Gj}(),e),n(function(){if($j)return Kj;$j=1,Object.defineProperty(Kj,"__esModule",{value:!0}),Kj.TranscriberConnectionFactory=void 0;const e=mj(),t=sj(),n=GR(),r=fO(),i=DT,s=VR;let o=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(s,o,a){let l=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const c=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"centralus"),u="wss://transcribe."+c+".cts.speech"+n.ConnectionFactoryBase.getHostSuffix(c)+this.multiaudioRelativeUri,d=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,u),p={};this.setQueryParams(p,s,l),l||(l=d);const h={};void 0!==o.token&&""!==o.token&&(h[o.headerName]=o.token),h[i.HeaderNames.ConnectionId]=a,s.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,l);const f="true"===s.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new e.WebsocketConnection(l,p,h,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(s),f,a))}setQueryParams(e,n,i){const o=n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),a=n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);o&&!(s.QueryParameterNames.CustomSpeechDeploymentId in e)&&(e[s.QueryParameterNames.CustomSpeechDeploymentId]=o),a&&!(s.QueryParameterNames.Language in e)&&(e[s.QueryParameterNames.Language]=a);const l="true"===n.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),c=n.parameters.getProperty(r.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple])!==t.OutputFormat[t.OutputFormat.Simple];(l||c)&&(e[s.QueryParameterNames.Format]=t.OutputFormat[t.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(n,e,i)}};return Kj.TranscriberConnectionFactory=o,Kj}(),e),n(function(){if(Hj)return Jj;Hj=1,Object.defineProperty(Jj,"__esModule",{value:!0}),Jj.TranslationConnectionFactory=void 0;const e=mj(),t=YI,n=sj(),r=GR(),i=fO(),s=DT,o=VR,a=tR;let l=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}create(t,o,a){return T(this,null,function*(){let l=this.getEndpointUrl(t);const c={};if(this.setQueryParams(c,t,l),l){const e=new URL(l),t=e.pathname;""!==t&&"/"!==t||(e.pathname=this.universalUri,l=yield r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(e.toString()))}const u={};void 0!==o.token&&""!==o.token&&(u[o.headerName]=o.token),u[s.HeaderNames.ConnectionId]=a,t.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,l);const d="true"===t.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new e.WebsocketConnection(l,c,u,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(t),d,a)})}getEndpointUrl(e,i){const s=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),o=r.ConnectionFactoryBase.getHostSuffix(s);let a=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);return a||(a="true"===e.parameters.getProperty("SPEECH-ForceV1Endpoint","false")?e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+o)+this.translationV1Uri:e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+o)+this.universalUri),!0===i?a:t.StringUtils.formatString(a,{region:s})}setQueryParams(e,t,r){e.from=t.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=t.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages),e.scenario=t.recognitionMode===a.RecognitionMode.Interactive?"interactive":t.recognitionMode===a.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(t,e,r),this.setUrlParameter(n.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,o.QueryParameterNames.StableTranslation,t,e,r);const i=t.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);void 0!==i&&(e.voice=i,e.features="requireVoice")}};return Jj.TranslationConnectionFactory=l,Jj}(),e),n(Zk(),e),n(function(){if(Vj)return Yj;Vj=1,Object.defineProperty(Yj,"__esModule",{value:!0}),Yj.EnumTranslation=void 0;const e=sj(),t=fO();return Yj.EnumTranslation=class{static implTranslateRecognitionResult(n,r=!1){let i=e.ResultReason.Canceled;switch(n){case t.RecognitionStatus.Success:i=e.ResultReason.RecognizedSpeech;break;case t.RecognitionStatus.EndOfDictation:i=r?e.ResultReason.RecognizedSpeech:e.ResultReason.NoMatch;break;case t.RecognitionStatus.NoMatch:case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:i=e.ResultReason.NoMatch;break;case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:i=e.ResultReason.Canceled}return i}static implTranslateCancelResult(n){let r=e.CancellationReason.EndOfStream;switch(n){case t.RecognitionStatus.Success:case t.RecognitionStatus.EndOfDictation:case t.RecognitionStatus.NoMatch:r=e.CancellationReason.EndOfStream;break;case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:r=e.CancellationReason.Error}return r}static implTranslateCancelErrorCode(n){let r=e.CancellationErrorCode.NoError;switch(n){case t.RecognitionStatus.Error:r=e.CancellationErrorCode.ServiceError;break;case t.RecognitionStatus.TooManyRequests:r=e.CancellationErrorCode.TooManyRequests;break;case t.RecognitionStatus.BadRequest:r=e.CancellationErrorCode.BadRequestParameters;break;case t.RecognitionStatus.Forbidden:r=e.CancellationErrorCode.Forbidden;break;default:r=e.CancellationErrorCode.NoError}return r}static implTranslateErrorDetails(t){let n="The speech service encountered an internal error and could not continue.";switch(t){case e.CancellationErrorCode.Forbidden:n="The recognizer is using a free subscription that ran out of quota.";break;case e.CancellationErrorCode.BadRequestParameters:n="Invalid parameter or unsupported audio format in the request.";break;case e.CancellationErrorCode.TooManyRequests:n="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return n}},Yj}(),e),n(Zj,e),n(function(){if(Qj)return Xj;Qj=1,Object.defineProperty(Xj,"__esModule",{value:!0}),Xj.TranslationSynthesisEnd=void 0;const e=fO();return Xj.TranslationSynthesisEnd=class t{constructor(t){this.privSynthesisEnd=JSON.parse(t),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(e){return new t(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}},Xj}(),e),n(e_,e),n(function(){if(i_)return o_;i_=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.TranslationPhrase=void 0;const e=XT,t=fO(),n=ST;return o_.TranslationPhrase=class r{constructor(e,t){this.privTranslationPhrase=e,this.privTranslationPhrase.Offset+=t,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(e,t){return new r(JSON.parse(e),t)}static fromTranslationResponse(t,n){e.Contracts.throwIfNullOrUndefined(t,"translationResponse");const i=t.SpeechPhrase;return t.SpeechPhrase=void 0,i.Translation=t,i.Text=i.DisplayText,new r(i,n)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var e;return null==(e=this.privTranslationPhrase.PrimaryLanguage)?void 0:e.Language}get Confidence(){var e;return null==(e=this.privTranslationPhrase.PrimaryLanguage)?void 0:e.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const e=f({},this.privTranslationPhrase),r=m(f({},e),{RecognitionStatus:t.RecognitionStatus[e.RecognitionStatus]});return e.Translation&&(r.Translation=m(f({},e.Translation),{TranslationStatus:n.TranslationStatus[e.Translation.TranslationStatus]})),JSON.stringify(r)}mapRecognitionStatus(e){return"string"==typeof e?t.RecognitionStatus[e]:"number"==typeof e?e:void 0}mapTranslationStatus(e){return"string"==typeof e?n.TranslationStatus[e]:"number"==typeof e?e:void 0}},o_}(),e),n(function(){if(s_)return a_;s_=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.TranslationServiceRecognizer=void 0;const e=OT(),t=sj(),n=fO();let r=class extends n.ConversationServiceRecognizer{constructor(e,t,n,r,i){super(e,t,n,r,i),this.privTranslationRecognizer=i,this.connectionEvents.attach(e=>{"ConnectionEstablishedEvent"===e.name&&this.privTranslationRecognizer.onConnection()})}processTypeSpecificMessages(r){return T(this,null,function*(){const i=new t.PropertyCollection;let s=yield this.processSpeechMessages(r);if(s)return!0;const o=e=>T(this,null,function*(){if(i.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,e.asJson()),this.privRequestSession.onPhraseRecognized(e.Offset+e.Duration),e.RecognitionStatus===n.RecognitionStatus.Success){const t=this.fireEventForResult(e,i);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,t)}catch(r){}if(this.privSuccessCallback){try{this.privSuccessCallback(t.result)}catch(gie){this.privErrorCallback&&this.privErrorCallback(gie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const o=n.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),a=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,o,e.Text,e.Duration,e.Offset,e.Language,e.Confidence,void 0,e.asJson(),i);if(o===t.ResultReason.Canceled){const t=n.EnumTranslation.implTranslateCancelResult(e.RecognitionStatus),r=n.EnumTranslation.implTranslateCancelErrorCode(e.RecognitionStatus);yield this.cancelRecognitionLocal(t,r,n.EnumTranslation.implTranslateErrorDetails(r))}else if(e.RecognitionStatus!==n.RecognitionStatus.EndOfDictation){const e=new t.TranslationRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(r){}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(gie){this.privErrorCallback&&this.privErrorCallback(gie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0}}),a=e=>{i.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,e.asJson());const n=this.fireEventForResult(e,i);if(this.privRequestSession.onHypothesis(n.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,n)}catch(r){}s=!0};switch(r.messageType===e.MessageType.Text&&i.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,r.textBody),r.path.toLowerCase()){case"translation.hypothesis":a(n.TranslationHypothesis.fromJSON(r.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const e=JSON.parse(r.textBody);if(e.SpeechPhrase)yield o(n.TranslationPhrase.fromTranslationResponse(e,this.privRequestSession.currentTurnAudioOffset));else{const e=JSON.parse(r.textBody);e.SpeechHypothesis&&a(n.TranslationHypothesis.fromTranslationResponse(e,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":yield o(n.TranslationPhrase.fromJSON(r.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(r.binaryBody,this.privRequestSession.sessionId),s=!0;break;case"audio.end":case"translation.synthesis.end":const i=n.TranslationSynthesisEnd.fromJSON(r.textBody);switch(i.SynthesisStatus){case n.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const e=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),n=new t.TranslationSynthesisEventArgs(e,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,n)}catch(l){}}if(this.privTranslationRecognizer.canceled){const e=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,i.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,e)}catch(l){}}break;case n.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}s=!0}return s})}cancelRecognition(e,r,i,s,o){const a=new t.PropertyCollection;if(a.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[s]),this.privTranslationRecognizer.canceled){const n=new t.TranslationRecognitionCanceledEventArgs(e,i,o,s,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,n)}catch(gie){}}if(this.privSuccessCallback){const e=new t.TranslationRecognitionResult(void 0,r,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(gie){}}}handleRecognizingCallback(e,n,r){try{const i=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(e),n,r);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch(i){}}handleRecognizedCallback(e,n,r){try{const i=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(e),n,r);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,i)}catch(i){}}fireEventForResult(r,i){let s,o,a;if(void 0!==r.Translation.Translations){s=new t.Translations;for(const e of r.Translation.Translations)s.set(e.Language,e.Text||e.DisplayText)}r instanceof n.TranslationPhrase?(o=r.Translation&&r.Translation.TranslationStatus===e.TranslationStatus.Success?t.ResultReason.TranslatedSpeech:t.ResultReason.RecognizedSpeech,a=r.Confidence):o=t.ResultReason.TranslatingSpeech;const l=r.Language,c=new t.TranslationRecognitionResult(s,this.privRequestSession.requestId,o,r.Text,r.Duration,r.Offset,l,a,r.Translation.FailureReason,r.asJson(),i);return new t.TranslationRecognitionEventArgs(c,r.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(e,n){const r=void 0===e?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,i=new t.TranslationSynthesisResult(r,e),s=new t.TranslationSynthesisEventArgs(i,n);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,s)}catch(o){}}};return a_.TranslationServiceRecognizer=r,a_}(),e),n(l_,e),n(u_,e),n(p_,e),n(function(){if(f_)return v_;f_=1,Object.defineProperty(v_,"__esModule",{value:!0}),v_.SpeechServiceRecognizer=void 0;const e=sj(),t=fO();let n=class extends t.ServiceRecognizerBase{constructor(e,t,n,r,i){super(e,t,n,r,i),this.privSpeechRecognizer=i}processTypeSpecificMessages(n){return T(this,null,function*(){let r;const i=new e.PropertyCollection;let s=!1;switch(n.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const a=t.SpeechHypothesis.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset);i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.asJson()),r=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,a.Text,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,void 0,void 0,a.asJson(),i),this.privRequestSession.onHypothesis(a.Offset);const l=new e.SpeechRecognitionEventArgs(r,a.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch(o){}s=!0;break;case"speech.phrase":const c=t.SimpleSpeechPhrase.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset);i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,c.asJson());const u=t.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(c.Offset+c.Duration),e.ResultReason.Canceled===u){const e=t.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),n=t.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(e,n,t.EnumTranslation.implTranslateErrorDetails(n))}else{if(c.RecognitionStatus===t.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])r=new e.SpeechRecognitionResult(this.privRequestSession.requestId,u,c.DisplayText,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,void 0,void 0,c.asJson(),i);else{const s=t.DetailedSpeechPhrase.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset);i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.asJson()),r=new e.SpeechRecognitionResult(this.privRequestSession.requestId,u,s.RecognitionStatus===t.RecognitionStatus.Success?s.NBest[0].Display:"",s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,void 0,void 0,s.asJson(),i)}const s=new e.SpeechRecognitionEventArgs(r,r.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,s)}catch(o){}if(this.privSuccessCallback){try{this.privSuccessCallback(r)}catch(gie){this.privErrorCallback&&this.privErrorCallback(gie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0}return s})}cancelRecognition(n,r,i,s,o){const a=new e.PropertyCollection;if(a.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[s]),this.privSpeechRecognizer.canceled){const t=new e.SpeechRecognitionCanceledEventArgs(i,o,s,void 0,n);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch(gie){}}if(this.privSuccessCallback){const t=new e.SpeechRecognitionResult(r,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(t),this.privSuccessCallback=void 0}catch(gie){}}}};return v_.SpeechServiceRecognizer=n,v_}(),e),n(function(){if(m_)return g_;m_=1,Object.defineProperty(g_,"__esModule",{value:!0}),g_.ConversationTranscriptionServiceRecognizer=void 0;const e=sj(),t=fO(),n=y_,r=tR;let i=class extends t.ServiceRecognizerBase{constructor(e,t,n,r,i){super(e,t,n,r,i),this.privConversationTranscriber=i,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const t=this.privSpeechContext.getContext().phraseDetection||{};t.mode=r.RecognitionMode.Conversation;const i={};i.mode=n.SpeakerDiarizationMode.Anonymous,i.audioSessionId=this.privDiarizationSessionId,i.audioOffsetMs=0,i.diarizeIntermediates="true"===this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false"),t.speakerDiarization=i,this.privSpeechContext.getContext().phraseDetection=t}}processTypeSpecificMessages(n){return T(this,null,function*(){let r;const i=new e.PropertyCollection;i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,n.textBody);let s=!1;switch(n.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const a=t.SpeechHypothesis.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset);r=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,a.Text,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,a.SpeakerId,void 0,a.asJson(),i),this.privRequestSession.onHypothesis(a.Offset);const l=new e.ConversationTranscriptionEventArgs(r,a.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch(o){}s=!0;break;case"speech.phrase":const c=t.SimpleSpeechPhrase.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset),u=t.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(c.Offset+c.Duration),e.ResultReason.Canceled===u){const e=t.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),n=t.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(e,n,t.EnumTranslation.implTranslateErrorDetails(n))}else if(!this.privRequestSession.isSpeechEnded||u!==e.ResultReason.NoMatch||c.RecognitionStatus===t.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])r=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,u,c.DisplayText,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,c.asJson(),i);else{const s=t.DetailedSpeechPhrase.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset);r=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,u,s.RecognitionStatus===t.RecognitionStatus.Success?s.NBest[0].Display:void 0,s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,c.SpeakerId,void 0,s.asJson(),i)}const s=new e.ConversationTranscriptionEventArgs(r,r.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,s)}catch(o){}}s=!0}return s})}cancelRecognition(n,r,i,s,o){if((new e.PropertyCollection).setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[s]),this.privConversationTranscriber.canceled){const t=new e.ConversationTranscriptionCanceledEventArgs(i,o,s,void 0,n);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,t)}catch(gie){}}}};return g_.ConversationTranscriptionServiceRecognizer=i,g_}(),e),n(function(){if(b_)return S_;b_=1,Object.defineProperty(S_,"__esModule",{value:!0}),S_.TranscriptionServiceRecognizer=void 0;const e=OT(),t=sj(),n=fO(),r=xj;let i=class extends n.ConversationServiceRecognizer{constructor(e,n,r,i,s){super(e,n,r,i,s),this.privTranscriberRecognizer=s,this.sendPrePayloadJSONOverride=e=>this.sendTranscriptionStartJSON(e),"true"===this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)&&this.privSpeechContext.setWordLevelTimings()}sendSpeechEventAsync(e,t){return T(this,null,function*(){if(this.privRequestSession.isRecognizing){const n=yield this.fetchConnection();yield this.sendSpeechEvent(n,this.createSpeechEventPayload(e,t))}})}sendMeetingSpeechEventAsync(e,t){return T(this,null,function*(){if(this.privRequestSession.isRecognizing){const n=yield this.fetchConnection();yield this.sendSpeechEvent(n,this.createMeetingSpeechEventPayload(e,t))}})}processTypeSpecificMessages(e){return this.processSpeechMessages(e)}handleRecognizedCallback(e,n,r){try{const i=new t.SpeechRecognitionEventArgs(e,n,r);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,i),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(gie){this.privErrorCallback&&this.privErrorCallback(gie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch(i){}}handleRecognizingCallback(e,n,r){try{const i=new t.SpeechRecognitionEventArgs(e,n,r);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,i)}catch(i){}}cancelRecognition(e,r,i,s,o){const a=new t.PropertyCollection;if(a.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[s]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const n=new t.MeetingTranscriptionCanceledEventArgs(i,o,s,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,n)}catch(gie){}}}else if(this.privTranscriberRecognizer.canceled){const n=new t.ConversationTranscriptionCanceledEventArgs(i,o,s,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,n)}catch(gie){}}if(this.privSuccessCallback){const e=new t.SpeechRecognitionResult(r,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(gie){}}}sendTranscriptionStartJSON(e){return T(this,null,function*(){if(yield this.sendSpeechContext(e,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const t=this.privTranscriberRecognizer.getMeetingInfo(),n=this.createMeetingSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,n)}else{const t=this.privTranscriberRecognizer.getConversationInfo(),n=this.createSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,n)}yield this.sendWaveHeader(e)})}sendSpeechEvent(t,n){const i=JSON.stringify(n);if(i)return t.send(new r.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",i))}createSpeechEventPayload(e,t){const n={id:"meeting",name:t,meeting:e.conversationProperties};return n.meeting.id=e.id,n.meeting.attendees=e.participants,n}createMeetingSpeechEventPayload(e,t){const n={id:"meeting",name:t,meeting:e.meetingProperties};return n.meeting.id=e.id,n.meeting.attendees=e.participants,n}};return S_.TranscriptionServiceRecognizer=i,S_}(),e),n(function(){if(x_)return C_;x_=1,Object.defineProperty(C_,"__esModule",{value:!0}),C_.DetailedSpeechPhrase=void 0;const e=fO();return C_.DetailedSpeechPhrase=class t{constructor(e,t){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(t)}static fromJSON(e,n){return new t(e,n)}updateOffsets(e){if(this.privDetailedSpeechPhrase.Offset+=e,this.privDetailedSpeechPhrase.NBest)for(const t of this.privDetailedSpeechPhrase.NBest){if(t.Words)for(const n of t.Words)n.Offset+=e;if(t.DisplayWords)for(const n of t.DisplayWords)n.Offset+=e}}asJson(){const t=f({},this.privDetailedSpeechPhrase);return JSON.stringify(m(f({},t),{RecognitionStatus:e.RecognitionStatus[t.RecognitionStatus]}))}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(t){return"string"==typeof t?e.RecognitionStatus[t]:"number"==typeof t?t:void 0}},C_}(),e),n(function(){if(w_)return E_;w_=1,Object.defineProperty(E_,"__esModule",{value:!0}),E_.SimpleSpeechPhrase=void 0;const e=fO();return E_.SimpleSpeechPhrase=class t{constructor(e,t=0){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(t)}static fromJSON(e,n){return new t(e,n)}updateOffset(e){this.privSimpleSpeechPhrase.Offset+=e}asJson(){const t=f({},this.privSimpleSpeechPhrase);return JSON.stringify(m(f({},t),{RecognitionStatus:e.RecognitionStatus[t.RecognitionStatus]}))}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(t){return"string"==typeof t?e.RecognitionStatus[t]:"number"==typeof t?t:void 0}},E_}(),e),n(T_,e),n(function(){if(N_)return P_;N_=1,Object.defineProperty(P_,"__esModule",{value:!0}),P_.IntentServiceRecognizer=void 0;const e=OT(),t=sj(),n=fO();let r=class extends n.ServiceRecognizerBase{constructor(e,t,n,r,i){super(e,t,n,r,i),this.privIntentRecognizer=i,this.privIntentDataSent=!1,r.recognitionEndpointVersion="1"}setIntents(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0}processTypeSpecificMessages(r){let i,s,o=!1;const a=new t.PropertyCollection;switch(r.messageType===e.MessageType.Text&&a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,r.textBody),r.path.toLowerCase()){case"speech.hypothesis":const e=n.SpeechHypothesis.fromJSON(r.textBody,this.privRequestSession.currentTurnAudioOffset);if(i=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.ResultReason.RecognizingIntent,e.Text,e.Duration,e.Offset,e.Language,e.LanguageDetectionConfidence,void 0,e.asJson(),a),this.privRequestSession.onHypothesis(i.offset),s=new t.IntentRecognitionEventArgs(i,e.Offset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,s)}catch(c){}o=!0;break;case"speech.phrase":const l=n.SimpleSpeechPhrase.fromJSON(r.textBody,this.privRequestSession.currentTurnAudioOffset);i=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,n.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),l.DisplayText,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,void 0,l.asJson(),a),s=new t.IntentRecognitionEventArgs(i,i.offset,this.privRequestSession.sessionId);const u=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch(c){}if(this.privSuccessCallback){try{this.privSuccessCallback(i)}catch(gie){this.privErrorCallback&&this.privErrorCallback(gie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||t.ResultReason.NoMatch===s.result.reason?(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),u()):this.privPendingIntentArgs=s,o=!0;break;case"response":if(s=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===s){if(""===r.textBody)return;s=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const d=n.IntentResponse.fromJSON(r.textBody);if(null!==d&&d.topScoringIntent&&d.topScoringIntent.intent){let e=this.privAddedLmIntents[d.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent),e){const n=void 0===e||void 0===e.intentName?d.topScoringIntent.intent:e.intentName;let i=s.result.reason;void 0!==n&&(i=t.ResultReason.RecognizedIntent);const o=void 0!==s.result.properties?s.result.properties:new t.PropertyCollection;o.setProperty(t.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,r.textBody),s=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult(n,s.result.resultId,i,s.result.text,s.result.duration,s.result.offset,void 0,void 0,s.result.errorDetails,s.result.json,o),s.offset,s.sessionId)}}if(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch(c){}if(this.privSuccessCallback){try{this.privSuccessCallback(s.result)}catch(gie){this.privErrorCallback&&this.privErrorCallback(gie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}o=!0}const l=new e.Deferred;return l.resolve(o),l.promise}cancelRecognition(e,r,i,s,o){const a=new t.PropertyCollection;if(a.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[s]),this.privIntentRecognizer.canceled){const n=new t.IntentRecognitionCanceledEventArgs(i,o,s,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,n)}catch(gie){}}if(this.privSuccessCallback){const e=new t.IntentRecognitionResult(void 0,r,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(gie){}}}};return P_.IntentServiceRecognizer=r,P_}(),e),n(R_,e),n(k_,e),n(j_,e),n(z_,e),n(W_,e),n(function(){if(tA)return V_;tA=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.DialogServiceAdapter=void 0;const e=mj(),t=ME,n=OT(),r=qN,i=sj(),s=q_,o=fO(),a=K_,l=eA,c=nA,u=xj;let d=class extends o.ServiceRecognizerBase{constructor(e,t,r,i,o){super(e,t,r,i,o),this.privEvents=new n.EventSource,this.privDialogServiceConnector=o,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new s.DialogServiceTurnStateManager,this.recognizeOverride=(e,t,n)=>this.listenOnce(e,t,n),this.postConnectImplOverride=e=>this.dialogConnectImpl(e),this.configConnectionOverride=e=>this.configConnection(e),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=r,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(e=>{"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0)})}sendMessage(e){return T(this,null,function*(){const t=(0,n.createGuid)(),r=(0,n.createNoDashGuid)(),i={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},s=JSON.stringify(i),o=yield this.fetchConnection();yield o.send(new u.SpeechConnectionMessage(n.MessageType.Text,"agent",r,"application/json",s))})}privDisconnect(){return T(this,null,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1})}processTypeSpecificMessages(e){const t=new i.PropertyCollection;let r,s;switch(e.messageType===n.MessageType.Text&&t.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":const n=o.SimpleSpeechPhrase.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(n.Offset+n.Duration),n.RecognitionStatus!==o.RecognitionStatus.TooManyRequests&&n.RecognitionStatus!==o.RecognitionStatus.Error){const e=this.fireEventForResult(n,t);if(this.privLastResult=e.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,e)}catch(l){}}s=!0;break;case"speech.hypothesis":const a=o.SpeechHypothesis.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);r=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,a.Text,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,void 0,void 0,a.asJson(),t),this.privRequestSession.onHypothesis(a.Offset);const c=new i.SpeechRecognitionEventArgs(r,a.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,c)}catch(l){}s=!0;break;case"speech.keyword":const u=o.SpeechKeyword.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);r=new i.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===u.Status?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,u.Text,u.Duration,u.Offset,void 0,void 0,void 0,void 0,u.asJson(),t),"Accepted"!==u.Status&&(this.privLastResult=r);const d=new i.SpeechRecognitionEventArgs(r,r.duration,r.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,d)}catch(l){}s=!0;break;case"audio":{const t=e.requestId.toUpperCase(),n=this.privTurnStateManager.GetTurn(t);try{e.binaryBody?n.audioStream.write(e.binaryBody):n.endAudioStream()}catch(l){}}s=!0;break;case"response":this.handleResponseMessage(e),s=!0}const a=new n.Deferred;return a.resolve(s),a.promise}cancelRecognition(e,t,n,r,s){return T(this,null,function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){const t=new i.PropertyCollection;t.setProperty(o.CancellationErrorCodePropertyName,i.CancellationErrorCode[r]);const a=new i.SpeechRecognitionCanceledEventArgs(n,s,r,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,a)}catch(gie){}if(this.privSuccessCallback){const e=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,t);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(gie){}}}})}listenOnce(t,n,r){return T(this,null,function*(){this.privRecognizerConfig.recognitionMode=t,this.privSuccessCallback=n,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const s=this.connectImpl(),o=this.sendPreAudioMessages(),a=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),l=yield this.privDialogAudioSource.format,c=yield this.privDialogAudioSource.deviceInfo,u=new e.ReplayableAudioNode(a,l.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield s,yield o}catch(p){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,p),Promise.resolve()}const d=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.sendAudio(u).then(()=>{},e=>T(this,null,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,e)}))})}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){const e=new n.Deferred,t=()=>T(this,null,function*(){try{const r=this.isDisposed(),s=!this.isDisposed()&&this.terminateMessageLoop;if(r||s)return void e.resolve(void 0);const a=yield this.fetchConnection(),l=yield a.read();if(!l)return t();const c=u.SpeechConnectionMessage.fromConnectionMessage(l);switch(c.path.toLowerCase()){case"turn.start":{const e=c.requestId.toUpperCase();e!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(e):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const e=o.SpeechDetected.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset),t=new i.RecognitionEventArgs(e.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,t);break;case"speech.enddetected":let r;r=c.textBody.length>0?c.textBody:"{ Offset: 0 }";const s=o.SpeechDetected.fromJSON(r,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(s.Offset);const a=new i.RecognitionEventArgs(s.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,a);break;case"turn.end":{const e=c.requestId.toUpperCase();if(e!==this.privRequestSession.requestId.toUpperCase())this.privTurnStateManager.CompleteTurn(e);else{const e=new i.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,e),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(gie){this.privErrorCallback&&this.privErrorCallback(gie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{(yield this.processTypeSpecificMessages(c))||this.serviceEvents&&this.serviceEvents.onEvent(new n.ServiceEvent(c.path.toLowerCase(),c.textBody))}catch(gie){}}return t()}catch(r){this.terminateMessageLoop=!0,e.resolve()}});return t().catch(e=>{n.Events.instance.onEvent(new n.BackgroundEvent(e))}),e.promise}startMessageLoop(){return T(this,null,function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(e){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,e)}return Promise.resolve()})}configConnection(e){return T(this,null,function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(e),e)})}sendPreAudioMessages(){return T(this,null,function*(){const e=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(e,!0),yield this.sendAgentContext(e),yield this.sendWaveHeader(e)})}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const e=this.agentConfig.get();e.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(e)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const r=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new u.SpeechConnectionMessage(n.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",r))}}sendAgentContext(e){const t=(0,n.createGuid)(),r=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),s={channelData:"",context:{interactionId:t},messagePayload:void 0===typeof r?void 0:r,version:.5},o=JSON.stringify(s);return e.send(new u.SpeechConnectionMessage(n.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",o))}fireEventForResult(e,t){const n=o.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),r=new i.SpeechRecognitionResult(this.privRequestSession.requestId,n,e.DisplayText,e.Duration,e.Offset,e.Language,e.LanguageDetectionConfidence,void 0,void 0,e.asJson(),t);return new i.SpeechRecognitionEventArgs(r,e.Offset,this.privRequestSession.sessionId)}handleResponseMessage(e){const t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":const o=e.requestId.toUpperCase(),l=a.ActivityPayloadResponse.fromJSON(e.textBody),c=this.privTurnStateManager.GetTurn(o);if(l.conversationId){const e=this.agentConfig.get();e.botInfo.conversationId=l.conversationId,this.agentConfig.set(e)}const u=c.processActivityPayload(l,r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),d=new i.ActivityReceivedEventArgs(l.messagePayload,u);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,d)}catch(s){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(e.textBody))}catch(s){}break;default:n.Events.instance.onEvent(new n.BackgroundEvent(`Unexpected response of type ${t.messageType}. Ignoring.`))}}onEvent(e){this.privEvents.onEvent(e),n.Events.instance.onEvent(e)}addKeywordContextData(){const e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===e)return;const t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),n=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),r=e.split(";"),i=void 0===t?[]:t.split(";"),s=void 0===n?[]:n.split(";"),o=[];for(let a=0;a<r.length;a++){const e={text:r[a]};a<i.length&&(e.startOffset=Number(i[a])),a<s.length&&(e.duration=Number(s[a])),o.push(e)}this.speechContext.getContext().invocationSource=l.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:o,onReject:{action:c.OnRejectAction.EndOfTurn},type:c.KeywordDetectionType.StartTrigger}]}};return V_.DialogServiceAdapter=d,V_}(),e),n(rA,e),n(UA(),e),n(WA,e),n(function(){if(GA)return $A;GA=1,Object.defineProperty($A,"__esModule",{value:!0}),$A.SynthesisTurn=void 0;const e=OT(),t=VN,n=sj(),r=WA,i=HA;return $A.SynthesisTurn=class s{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,e.createNoDashGuid)(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const e=new n.PropertyCollection;return e.setProperty(n.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),e}}getAllReceivedAudio(){return T(this,null,function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null})}getAllReceivedAudioWithHeader(){return T(this,null,function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(e),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()})}startNewSynthesis(e,n,r,s){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=n,this.privIsSSML=r,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",void 0!==s&&(this.privTurnAudioDestination=s,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,void 0===s?void 0:s.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(200===e)return this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()}onServiceResponseMessage(e){const t=JSON.parse(e);this.streamId=t.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(t){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const n=JSON.parse(t);n.webrtc&&(this.privWebRTCSDP=n.webrtc.connectionString)}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}constructSynthesisResult(){return T(this,null,function*(){const e=yield this.getAllReceivedAudioWithHeader();return new n.SpeechSynthesisResult(this.requestId,n.ResultReason.SynthesizingAudioCompleted,e,void 0,this.extraProperties,this.audioDuration)})}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(t){e.Events.instance.onEvent(t)}static isXmlTag(e){return e.length>=2&&"<"===e[0]&&">"===e[e.length-1]}updateTextOffset(e,t){t===r.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!s.isXmlTag(e)&&this.updateTextOffset(e,t))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!s.isXmlTag(e)&&this.updateTextOffset(e,t)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return T(this,null,function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(gie){this.privReceivedAudio=new ArrayBuffer(0)}}})}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}},$A}(),e),n(function(){if(KA)return iO;KA=1,Object.defineProperty(iO,"__esModule",{value:!0}),iO.SynthesisAdapterBase=void 0;const e=OT(),t=sj(),n=fO(),r=xj;let i=class{constructor(r,i,s,o){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!r)throw new e.ArgumentNullError("authentication");if(!i)throw new e.ArgumentNullError("connectionFactory");if(!s)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=r,this.privConnectionFactory=i,this.privSynthesizerConfig=s,this.privIsDisposed=!1,this.privSessionAudioDestination=o,this.privSynthesisTurn=new n.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new n.SynthesisContext,this.privAgentConfig=new n.AgentConfig,this.connectionEvents.attach(e=>{if("ConnectionClosedEvent"===e.name){const n=e;1e3!==n.statusCode&&this.cancelSynthesisLocal(t.CancellationReason.Error,1007===n.statusCode?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${n.reason} websocket error code: ${n.statusCode}`)}})}get synthesizerConfig(){return this.privSynthesizerConfig}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}isDisposed(){return this.privIsDisposed}dispose(e){return T(this,null,function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}})}connect(){return T(this,null,function*(){yield this.connectImpl()})}sendNetworkMessage(t,n){return T(this,null,function*(){const i="string"==typeof n?e.MessageType.Text:e.MessageType.Binary,s="string"==typeof n?"application/json":"";return(yield this.fetchConnection()).send(new r.SpeechConnectionMessage(i,t,this.privSynthesisTurn.requestId,s,n))})}Speak(e,n,r,i,s,o){return T(this,null,function*(){let a;if(a=n?e:this.privSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(a,r,i,s);this.privSuccessCallback=i,this.privErrorCallback=s,this.privSynthesisTurn.startNewSynthesis(r,e,n,o);try{yield this.connectImpl();const e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,a,r),this.onSynthesisStarted(r),this.receiveMessage()}catch(gie){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,gie),Promise.reject(gie)}})}stopSpeaking(){return T(this,null,function*(){return yield this.connectImpl(),(yield this.fetchConnection()).send(new r.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))})}cancelSynthesis(e,r,i,s){const o=new t.PropertyCollection;o.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[i]);const a=new t.SpeechSynthesisResult(e,t.ResultReason.Canceled,void 0,s,o);if(this.onSynthesisCancelled(a),this.privSuccessCallback)try{this.privSuccessCallback(a)}catch(gie){}}cancelSynthesisLocal(e,t,n){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,n))}processTypeSpecificMessages(e){return!0}receiveMessage(){return T(this,null,function*(){try{const s=yield this.fetchConnection(),o=yield s.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!o)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const a=r.SpeechConnectionMessage.fromConnectionMessage(o);if(a.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(a.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(a.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(a.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===a.streamId.toLowerCase()&&a.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(a.binaryBody),this.onSynthesizing(a.binaryBody),void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(a.binaryBody));break;case"audio.metadata":const r=n.SynthesisAudioMetadata.fromJSON(a.textBody).Metadata;for(const e of r)switch(e.Type){case n.MetadataType.WordBoundary:case n.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(e);const r=new t.SpeechSynthesisWordBoundaryEventArgs(e.Data.Offset,e.Data.Duration,e.Data.text.Text,e.Data.text.Length,e.Type===n.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,e.Data.text.BoundaryType);this.onWordBoundary(r);break;case n.MetadataType.Bookmark:const i=new t.SpeechSynthesisBookmarkEventArgs(e.Data.Offset,e.Data.Bookmark);this.onBookmarkReached(i);break;case n.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(e),e.Data.IsLastAnimation){const n=new t.SpeechSynthesisVisemeEventArgs(e.Data.Offset,e.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(n)}break;case n.MetadataType.AvatarSignal:this.onAvatarEvent(e);break;case n.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(e)}break;case"turn.end":let s;this.privSynthesisTurn.onServiceTurnEndResponse();try{s=yield this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(s)}catch(i){this.privErrorCallback&&this.privErrorCallback(i)}this.onSynthesisCompleted(s);break;default:this.processTypeSpecificMessages(a)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(a.path.toLowerCase(),a.textBody))}return this.receiveMessage()}catch(gie){}})}sendSynthesisContext(t){this.setSynthesisContextSynthesisSection();const n=this.synthesisContext.toJSON();if(n)return t.send(new r.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",n))}setSpeechConfigSynthesisSection(){}connectImpl(n=!1){if(null!=this.privConnectionPromise)return this.privConnectionPromise.then(t=>t.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,e.createNoDashGuid)(),this.privConnectionId=(0,e.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const r=n?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=r.then(e=>T(this,null,function*(){this.privSynthesisTurn.onAuthCompleted(!1);const r=yield this.privConnectionFactory.create(this.privSynthesizerConfig,e,this.privConnectionId);r.events.attach(e=>{this.connectionEvents.onEvent(e)});const i=yield r.open();return 200===i.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(i.statusCode),Promise.resolve(r)):403!==i.statusCode||n?(this.privSynthesisTurn.onConnectionEstablishCompleted(i.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${i.statusCode},\n                    ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Url)} Reason: ${i.reason}`)):this.connectImpl(!0)}),e=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(e)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(t,n){if(n)return t.send(new r.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",n))}sendSsmlMessage(t,n,i){return t.send(new r.SpeechConnectionMessage(e.MessageType.Text,"ssml",i,"application/ssml+xml",n))}fetchConnection(){return T(this,null,function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(t=>t.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}configureConnection(){return T(this,null,function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(this.setSpeechConfigSynthesisSection(),yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)})}onAvatarEvent(e){}onSynthesisStarted(e){}onSynthesizing(e){}onSynthesisCancelled(e){}onSynthesisCompleted(e){}onWordBoundary(e){}onVisemeReceived(e){}onBookmarkReached(e){}};return iO.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,iO}(),e);var r=function(){if(JA)return sO;JA=1,Object.defineProperty(sO,"__esModule",{value:!0}),sO.AvatarSynthesisAdapter=void 0;const e=sj(),t=fO();let n=class extends t.SynthesisAdapterBase{constructor(e,t,n,r,i){super(e,t,n,void 0),this.privAvatarSynthesizer=r,this.privSynthesizer=r,this.privAvatarConfig=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var t,n,r,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:null==(t=this.privAvatarConfig.videoFormat)?void 0:t.bitrate,codec:null==(n=this.privAvatarConfig.videoFormat)?void 0:n.codec,crop:{bottomRight:{x:null==(s=null==(i=null==(r=this.privAvatarConfig.videoFormat)?void 0:r.cropRange)?void 0:i.bottomRight)?void 0:s.x,y:null==(l=null==(a=null==(o=this.privAvatarConfig.videoFormat)?void 0:o.cropRange)?void 0:a.bottomRight)?void 0:l.y},topLeft:{x:null==(d=null==(u=null==(c=this.privAvatarConfig.videoFormat)?void 0:c.cropRange)?void 0:u.topLeft)?void 0:d.x,y:null==(f=null==(h=null==(p=this.privAvatarConfig.videoFormat)?void 0:p.cropRange)?void 0:h.topLeft)?void 0:f.y}},resolution:{height:null==(m=this.privAvatarConfig.videoFormat)?void 0:m.height,width:null==(v=this.privAvatarConfig.videoFormat)?void 0:v.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:null!=(g=this.privAvatarConfig.remoteIceServers)?g:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:null==(y=this.privAvatarConfig.backgroundImage)?void 0:y.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(t){if(this.privAvatarSynthesizer.avatarEventReceived){const r=new e.AvatarEventArgs(t.Data.Offset,t.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,r)}catch(n){}}}};return sO.AvatarSynthesisAdapter=n,sO}();Object.defineProperty(e,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return r.AvatarSynthesisAdapter}});var i=function(){if(YA)return oO;YA=1,Object.defineProperty(oO,"__esModule",{value:!0}),oO.SpeechSynthesisAdapter=void 0;const e=sj(),t=fO();let n=class extends t.SynthesisAdapterBase{constructor(e,t,n,r,i){super(e,t,n,i),this.privSpeechSynthesizer=r,this.privSynthesizer=r}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(t){const n=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(t,e.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,n)}onSynthesizing(t){if(this.privSpeechSynthesizer.synthesizing)try{const n=this.privSynthesisTurn.audioOutputFormat.addHeader(t),r=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(this.privSynthesisTurn.requestId,e.ResultReason.SynthesizingAudio,n));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,r)}catch(n){}}onSynthesisCancelled(t){if(this.privSpeechSynthesizer.SynthesisCanceled){const n=new e.SpeechSynthesisEventArgs(t);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,n)}catch(gie){}}}onSynthesisCompleted(t){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new e.SpeechSynthesisEventArgs(t))}catch(gie){}}onWordBoundary(e){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(t){}}onVisemeReceived(e){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(t){}}onBookmarkReached(e){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,e)}catch(t){}}};return oO.SpeechSynthesisAdapter=n,oO}();Object.defineProperty(e,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),n(function(){if(ZA)return aO;ZA=1,Object.defineProperty(aO,"__esModule",{value:!0}),aO.SynthesisRestAdapter=void 0;const e=mj(),t=sj(),n=GR(),r=DT;return aO.SynthesisRestAdapter=class{constructor(r,i){let s=r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!s){const e=r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"westus"),i=n.ConnectionFactoryBase.getHostSuffix(e);s=r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`https://${e}.tts.speech${i}`)}this.privUri=`${s}/cognitiveservices/voices/list`;const o=e.RestConfigBase.requestOptions;this.privRestAdapter=new e.RestMessageAdapter(o),this.privAuthentication=i}getVoicesList(t){return this.privRestAdapter.setHeaders(r.HeaderNames.ConnectionId,t),this.privAuthentication.fetch(t).then(t=>(this.privRestAdapter.setHeaders(t.headerName,t.token),this.privRestAdapter.request(e.RestRequestType.Get,this.privUri)))}},aO}(),e),n((QA||(QA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesizerConfig=e.SynthesisServiceType=void 0;const t=fO();var n,r;(r=n=e.SynthesisServiceType||(e.SynthesisServiceType={}))[r.Standard=0]="Standard",r[r.Custom=1]="Custom",e.SynthesizerConfig=class{constructor(e,r){this.privSynthesisServiceType=n.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=e||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=r}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}set synthesisVideoSection(e){this.privSpeechServiceConfig.Context.synthesis={video:e}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}setContextFromJson(e){const t=JSON.parse(e);t.system&&(this.privSpeechServiceConfig.Context.system=t.system),t.os&&(this.privSpeechServiceConfig.Context.os=t.os),t.audio&&(this.privSpeechServiceConfig.Context.audio=t.audio),t.synthesis&&(this.privSpeechServiceConfig.Context.synthesis=t.synthesis)}}}(lO)),lO),e),n(function(){if(XA)return cO;XA=1,Object.defineProperty(cO,"__esModule",{value:!0}),cO.SynthesisContext=void 0;const e=sj();return cO.SynthesisContext=class{constructor(){this.privContext={}}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(e){const t=this.buildSynthesisContext(e);this.setSection("synthesis",t)}buildSynthesisContext(t){return{audio:{metadataOptions:{bookmarkEnabled:!!(null==t?void 0:t.bookmarkReached),punctuationBoundaryEnabled:null==t?void 0:t.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(null==t?void 0:t.wordBoundary)),sentenceBoundaryEnabled:null==t?void 0:t.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(null==t?void 0:t.visemeReceived),wordBoundaryEnabled:null==t?void 0:t.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(null==t?void 0:t.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:null==t?void 0:t.autoDetectSourceLanguage}}}},cO}(),e),n(function(){if(eO)return uO;eO=1,Object.defineProperty(uO,"__esModule",{value:!0}),uO.SpeakerRecognitionConfig=void 0;const e=fO();return uO.SpeakerRecognitionConfig=class{constructor(t,n){this.privContext=t||new e.Context(null),this.privParameters=n}get parameters(){return this.privParameters}get Context(){return this.privContext}},uO}(),e),n(function(){if(tO)return dO;tO=1,Object.defineProperty(dO,"__esModule",{value:!0}),dO.SpeakerServiceRecognizer=void 0;const e=mj(),t=OT(),n=sj(),r=fO(),i=xj;let s=class extends r.ServiceRecognizerBase{constructor(e,t,n,r,i){super(e,t,n,r,i),this.privSpeakerRecognizer=i,this.privSpeakerAudioSource=n,this.recognizeSpeaker=e=>this.recognizeSpeakerOnce(e),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(e){let r=!1;const i=new n.PropertyCollection;if(e.messageType===t.MessageType.Text&&i.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),"speaker.response"===e.path.toLowerCase()){const t=JSON.parse(e.textBody);let i;i="success"!==t.status.statusCode.toLowerCase()?new n.SpeakerRecognitionResult(t,n.ResultReason.Canceled,n.CancellationErrorCode.ServiceError,t.status.reason):new n.SpeakerRecognitionResult(t,n.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(i),r=!0}const s=new t.Deferred;return s.resolve(r),s.promise}cancelRecognition(e,t,i,s,o){if((new n.PropertyCollection).setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[s]),this.privResultDeferral){const e=new n.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:o,reason:o}},n.ResultReason.Canceled,s,o);try{this.privResultDeferral.resolve(e)}catch(a){this.privResultDeferral.reject(a)}}}recognizeSpeakerOnce(r){return T(this,null,function*(){this.privSpeakerModel=r,this.voiceProfileType=r.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const i=this.connectImpl(),s=this.sendPreAudioMessages(this.extractSpeakerContext(r)),o=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),a=yield this.privSpeakerAudioSource.format,l=yield this.privSpeakerAudioSource.deviceInfo,c=new e.ReplayableAudioNode(o,a.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(c,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l};try{yield i,yield s}catch(yie){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,yie)}const u=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,u),this.receiveMessage(),this.sendAudio(c).then(()=>{},e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,e)}),this.privResultDeferral.promise})}sendPreAudioMessages(e){return T(this,null,function*(){const t=yield this.fetchConnection();yield this.sendSpeakerRecognition(t,e)})}sendSpeakerRecognition(e,n){return T(this,null,function*(){const r=JSON.stringify(n);return e.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",r))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}};return dO.SpeakerServiceRecognizer=s,dO}(),e),n(function(){if(nO)return pO;nO=1,Object.defineProperty(pO,"__esModule",{value:!0}),pO.VoiceServiceRecognizer=void 0;const e=mj(),t=OT(),n=sj(),r=fO(),i=xj;let s=class extends r.ServiceRecognizerBase{constructor(e,n,r,i,s){super(e,n,r,i,s),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=r,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(e){this.privSpeakerAudioSource=e}processTypeSpecificMessages(e){let r=!1;const i=new n.PropertyCollection;switch(e.messageType===t.MessageType.Text&&i.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.profiles":const t=JSON.parse(e.textBody);switch(t.operation.toLowerCase()){case"create":this.handleCreateResponse(t,e.requestId);break;case"delete":case"reset":this.handleResultResponse(t,e.requestId);break;case"fetch":const n=JSON.parse(e.textBody);this.handleFetchResponse(n,e.requestId)}r=!0;break;case"speaker.phrases":const i=JSON.parse(e.textBody);this.handlePhrasesResponse(i,e.requestId),r=!0;break;case"speaker.profile.enrollment":const s=JSON.parse(e.textBody),o=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(s.enrollment?s.enrollment.enrollmentStatus:s.status.statusCode),s.enrollment?JSON.stringify(s.enrollment):void 0,s.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,o),this.privRequestSession.onSpeechEnded(),r=!0}const s=new t.Deferred;return s.resolve(r),s.promise}cancelRecognition(e,t,i,s,o){(new n.PropertyCollection).setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[s]);const a=new n.VoiceProfileEnrollmentResult(n.ResultReason.Canceled,o,o);this.privDeferralMap.getId(t)&&this.privDeferralMap.complete(t,a)}createProfile(e,n){return T(this,null,function*(){this.voiceProfileType=e.toString();const r=this.connectImpl();try{const i=new t.Deferred;return yield r,yield this.sendCreateProfile(i,e,n),this.receiveMessage(),i.promise}catch(yie){throw yie}})}resetProfile(e){return T(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("reset",e.profileType,e)})}deleteProfile(e){return T(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("delete",e.profileType,e)})}retrieveEnrollmentResult(e){return T(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,this.sendCommonRequest("fetch",e.profileType,e)})}getAllProfiles(e){return T(this,null,function*(){return this.voiceProfileType=e.toString(),this.sendCommonRequest("fetch",e)})}getActivationPhrases(e,n){return T(this,null,function*(){this.voiceProfileType=e.toString();const r=this.connectImpl();try{const i=new t.Deferred;return yield r,yield this.sendPhrasesRequest(i,e,n),this.receiveMessage(),i.promise}catch(yie){throw yie}})}enrollProfile(r){return T(this,null,function*(){this.voiceProfileType=r.profileType.toString();const i=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const s=this.connectImpl(),o=this.sendPreAudioMessages(r,i),a=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),l=yield this.privSpeakerAudioSource.format,c=yield this.privSpeakerAudioSource.deviceInfo,u=new e.ReplayableAudioNode(a,l.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield s,yield o}catch(yie){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,yie)}const d=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(u).then(()=>{},e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,e)}),i.promise})}sendPreAudioMessages(e,t){return T(this,null,function*(){const n=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,t),yield this.sendBaseRequest(n,"enroll",this.scenarioFrom(e.profileType),e)})}sendPhrasesRequest(e,n,r){return T(this,null,function*(){const s=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);const o=this.scenarioFrom(n),a={locale:r,scenario:o};return s.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(a)))})}sendCreateProfile(e,r,s){return T(this,null,function*(){const o=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);const a=r===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":r===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",l={locale:s,number:"1",scenario:a};return o.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(l)))})}sendCommonRequest(e,n,r=void 0){return T(this,null,function*(){const i=this.connectImpl();try{const s=new t.Deferred;this.privRequestSession.onSpeechContext(),yield i;const o=yield this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,s),yield this.sendBaseRequest(o,e,this.scenarioFrom(n),r),this.receiveMessage(),s.promise}catch(yie){throw yie}})}sendBaseRequest(e,n,r,s){return T(this,null,function*(){const o={scenario:r};return s?o.profileIds=[s.profileId]:o.maxPageSize=-1,e.send(new i.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${n}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}handlePhrasesResponse(e,t){if(!this.privDeferralMap.getId(t))throw new Error(`Voice Profile get activation phrases request for requestID ${t} not found`);if("success"!==e.status.statusCode.toLowerCase()){const r=n.ResultReason.Canceled,i=new n.VoiceProfilePhraseResult(r,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(t,i)}else{if(!(e.phrases&&e.phrases.length>0))throw new Error("Voice Profile get activation phrases failed, no phrases received");{const r=n.ResultReason.EnrollingVoiceProfile,i=new n.VoiceProfilePhraseResult(r,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(t,i)}}}handleCreateResponse(e,t){if(!(e.profiles&&e.profiles.length>0))throw new Error("Voice Profile create failed, no profile id received");if(!this.privDeferralMap.getId(t))throw new Error(`Voice Profile create request for requestID ${t} not found`);{const n=e.profiles.map(e=>e.profileId);this.privDeferralMap.complete(t,n)}}handleResultResponse(e,t){if(!this.privDeferralMap.getId(t))throw new Error(`Voice Profile create request for requestID ${t} not found`);{const r="delete"===e.operation.toLowerCase()?n.ResultReason.DeletedVoiceProfile:n.ResultReason.ResetVoiceProfile,i="success"===e.status.statusCode.toLowerCase()?r:n.ResultReason.Canceled,s=new n.VoiceProfileResult(i,`statusCode: ${e.status.statusCode}, errorDetails: ${e.status.reason}`);this.privDeferralMap.complete(t,s)}}handleFetchResponse(e,t){if(!this.privDeferralMap.getId(t)||!e.profiles[0])throw new Error(`Voice Profile fetch request for requestID ${t} not found`);if(this.privExpectedProfileId&&1===e.profiles.length&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const r=e.profiles[0],i=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(r.enrollmentStatus),JSON.stringify(r),e.status.reason);this.privDeferralMap.complete(t,i)}else if(e.profiles.length>0){const r=e.profiles,i=[];for(const t of r)i.push(new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(t.enrollmentStatus),JSON.stringify(t),e.status.reason));this.privDeferralMap.complete(t,i)}}enrollmentReasonFrom(e){switch(e.toLowerCase()){case"enrolled":return n.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return n.ResultReason.Canceled;default:return n.ResultReason.EnrollingVoiceProfile}}scenarioFrom(e){return e===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return pO.VoiceServiceRecognizer=s,pO}(),e),n(hO,e),e.OutputFormatPropertyName="OutputFormat",e.CancellationErrorCodePropertyName="CancellationErrorCode",e.ServicePropertiesPropertyName="ServiceProperties",e.ForceDictationPropertyName="ForceDictation",e.AutoDetectSourceLanguagesOpenRangeOptionName="UND"}(iC)),iC}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.type=e.connectivity=e.Device=e.OS=e.System=e.Context=e.SpeechServiceConfig=void 0,e.SpeechServiceConfig=class{constructor(e){this.context=e}serialize(){return JSON.stringify(this,(e,t)=>{if(t&&"object"==typeof t&&!Array.isArray(t)){const e={};for(const n in t)Object.hasOwnProperty.call(t,n)&&(e[n&&n.charAt(0).toLowerCase()+n.substring(1)]=t[n]);return e}return t})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}},e.Context=class{constructor(e){this.system=new t,this.os=e}};class t{constructor(){this.name="SpeechSDK",this.version="1.46.0",this.build="JavaScript",this.lang="JavaScript"}}var n,r;e.System=t,e.OS=class{constructor(e,t,n){this.platform=e,this.name=t,this.version=n}},e.Device=class{constructor(e,t,n){this.manufacturer=e,this.model=t,this.version=n}},(n=e.connectivity||(e.connectivity={})).Bluetooth="Bluetooth",n.Wired="Wired",n.WiFi="WiFi",n.Cellular="Cellular",n.InBuilt="InBuilt",n.Unknown="Unknown",(r=e.type||(e.type={})).Phone="Phone",r.Speaker="Speaker",r.Car="Car",r.Headset="Headset",r.Thermostat="Thermostat",r.Microphones="Microphones",r.Deskphone="Deskphone",r.RemoteControl="RemoteControl",r.Unknown="Unknown",r.File="File",r.Stream="Stream"}(hO),function(e){var t=Be&&Be.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Be&&Be.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),new(fO().AgentConfig),n(sj(),e)}(rC);const mO=Fe({__proto__:null,default:Ue(rC)},[rC]);var vO=e=>"checkbox"===e.type,gO=e=>e instanceof Date,yO=e=>null==e;const bO=e=>"object"==typeof e;var xO=e=>!yO(e)&&!Array.isArray(e)&&bO(e)&&!gO(e),wO="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function SO(e){let t;const n=Array.isArray(e),r="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(wO&&(e instanceof Blob||r)||!n&&!xO(e))return e;if(t=n?[]:Object.create(Object.getPrototypeOf(e)),n||(e=>{const t=e.constructor&&e.constructor.prototype;return xO(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=SO(e[n]));else t=e}return t}var CO=e=>/^\w*$/.test(e),EO=e=>void 0===e,TO=e=>Array.isArray(e)?e.filter(Boolean):[],NO=e=>TO(e.replace(/["|']|\]/g,"").split(/\.|\[/)),PO=(e,t,n)=>{if(!t||!xO(e))return n;const r=(CO(t)?[t]:NO(t)).reduce((e,t)=>yO(e)?e:e[t],e);return EO(r)||r===e?EO(e[t])?n:e[t]:r},RO=e=>"boolean"==typeof e,IO=(e,t,n)=>{let r=-1;const i=CO(t)?[t]:NO(t),s=i.length,o=s-1;for(;++r<s;){const t=i[r];let s=n;if(r!==o){const n=e[t];s=xO(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}};const kO="blur",jO="focusout",_O="onBlur",AO="onChange",OO="onSubmit",DO="onTouched",MO="all",LO="max",zO="min",FO="maxLength",BO="minLength",UO="pattern",WO="required",$O="validate",HO=Rt.createContext(null);HO.displayName="HookFormContext";const VO="undefined"!=typeof window?Rt.useLayoutEffect:Rt.useEffect;var qO=e=>"string"==typeof e,GO=e=>yO(e)||!bO(e);function KO(e,t,n=new WeakSet){if(GO(e)||GO(t))return e===t;if(gO(e)&&gO(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const s of r){const r=e[s];if(!i.includes(s))return!1;if("ref"!==s){const e=t[s];if(gO(r)&&gO(e)||xO(r)&&xO(e)||Array.isArray(r)&&Array.isArray(e)?!KO(r,e,n):r!==e)return!1}}return!0}var JO=(e,t,n,r,i)=>t?m(f({},n[e]),{types:m(f({},n[e]&&n[e].types?n[e].types:{}),{[r]:i||!0})}):{},YO=e=>Array.isArray(e)?e:[e],ZO=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function QO(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r],s=t[r];if(i&&xO(i)&&s){const e=QO(i,s);xO(e)&&(n[r]=e)}else e[r]&&(n[r]=s)}return n}var XO=e=>xO(e)&&!Object.keys(e).length,eD=e=>"file"===e.type,tD=e=>"function"==typeof e,nD=e=>{if(!wO)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},rD=e=>"select-multiple"===e.type,iD=e=>"radio"===e.type,sD=e=>nD(e)&&e.isConnected;function oD(e,t){const n=Array.isArray(t)?t:CO(t)?[t]:NO(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=EO(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,s=n[i];return r&&delete r[s],0!==i&&(xO(r)&&XO(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!EO(e[t]))return!1;return!0}(r))&&oD(e,n.slice(0,-1)),e}function aD(e){return Array.isArray(e)||xO(e)&&!(e=>{for(const t in e)if(tD(e[t]))return!0;return!1})(e)}function lD(e,t={}){for(const n in e)aD(e[n])?(t[n]=Array.isArray(e[n])?[]:{},lD(e[n],t[n])):EO(e[n])||(t[n]=!0);return t}function cD(e,t,n){n||(n=lD(t));for(const r in e)aD(e[r])?EO(t)||GO(n[r])?n[r]=lD(e[r],Array.isArray(e[r])?[]:{}):cD(e[r],yO(t)?{}:t[r],n[r]):n[r]=!KO(e[r],t[r]);return n}const uD={value:!1,isValid:!1},dD={value:!0,isValid:!0};var pD=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!EO(e[0].attributes.value)?EO(e[0].value)||""===e[0].value?dD:{value:e[0].value,isValid:!0}:dD:uD}return uD},hD=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>EO(e)?e:t?""===e?NaN:e?+e:e:n&&qO(e)?new Date(e):r?r(e):e;const fD={isValid:!1,value:null};var mD=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,fD):fD;function vD(e){const t=e.ref;return eD(t)?t.files:iD(t)?mD(e.refs).value:rD(t)?[...t.selectedOptions].map(({value:e})=>e):vO(t)?pD(e.refs).value:hD(EO(t.value)?e.ref.value:t.value,e)}var gD=e=>e instanceof RegExp,yD=e=>EO(e)?e:gD(e)?e.source:xO(e)?gD(e.value)?e.value.source:e.value:e,bD=e=>({isOnSubmit:!e||e===OO,isOnBlur:e===_O,isOnChange:e===AO,isOnAll:e===MO,isOnTouch:e===DO});const xD="AsyncFunction";var wD=e=>!!e&&!!e.validate&&!!(tD(e.validate)&&e.validate.constructor.name===xD||xO(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===xD)),SD=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const CD=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const n=PO(e,i);if(n){const e=n,{_f:s}=e,o=v(e,["_f"]);if(s){if(s.refs&&s.refs[0]&&t(s.refs[0],i)&&!r)return!0;if(s.ref&&t(s.ref,s.name)&&!r)return!0;if(CD(o,t))break}else if(xO(o)&&CD(o,t))break}}};function ED(e,t,n){const r=PO(e,n);if(r||CO(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),s=PO(t,r),o=PO(e,r);if(s&&!Array.isArray(s)&&n!==r)return{name:n};if(o&&o.type)return{name:r,error:o};if(o&&o.root&&o.root.type)return{name:`${r}.root`,error:o.root};i.pop()}return{name:n}}var TD=(e,t,n)=>{const r=YO(PO(e,n));return IO(r,"root",t[n]),IO(e,n,r),e};function ND(e,t,n="validate"){if(qO(e)||Array.isArray(e)&&e.every(qO)||RO(e)&&!e)return{type:n,message:qO(e)?e:"",ref:t}}var PD=e=>xO(e)&&!gD(e)?e:{value:e,message:""},RD=(t,n,r,i,s,o)=>T(e,null,function*(){const{ref:e,refs:a,required:l,maxLength:c,minLength:u,min:d,max:p,pattern:h,validate:m,name:v,valueAsNumber:g,mount:y}=t._f,b=PO(r,v);if(!y||n.has(v))return{};const x=a?a[0]:e,w=e=>{s&&x.reportValidity&&(x.setCustomValidity(RO(e)?"":e||""),x.reportValidity())},S={},C=iD(e),E=vO(e),T=C||E,N=(g||eD(e))&&EO(e.value)&&EO(b)||nD(e)&&""===e.value||""===b||Array.isArray(b)&&!b.length,P=JO.bind(null,v,i,S),R=(t,n,r,i=FO,s=BO)=>{const o=t?n:r;S[v]=f({type:t?i:s,message:o,ref:e},P(t?i:s,o))};if(o?!Array.isArray(b)||!b.length:l&&(!T&&(N||yO(b))||RO(b)&&!b||E&&!pD(a).isValid||C&&!mD(a).isValid)){const{value:e,message:t}=qO(l)?{value:!!l,message:l}:PD(l);if(e&&(S[v]=f({type:WO,message:t,ref:x},P(WO,t)),!i))return w(t),S}if(!(N||yO(d)&&yO(p))){let t,n;const r=PD(p),s=PD(d);if(yO(b)||isNaN(b)){const i=e.valueAsDate||new Date(b),o=e=>new Date((new Date).toDateString()+" "+e),a="time"==e.type,l="week"==e.type;qO(r.value)&&b&&(t=a?o(b)>o(r.value):l?b>r.value:i>new Date(r.value)),qO(s.value)&&b&&(n=a?o(b)<o(s.value):l?b<s.value:i<new Date(s.value))}else{const i=e.valueAsNumber||(b?+b:b);yO(r.value)||(t=i>r.value),yO(s.value)||(n=i<s.value)}if((t||n)&&(R(!!t,r.message,s.message,LO,zO),!i))return w(S[v].message),S}if((c||u)&&!N&&(qO(b)||o&&Array.isArray(b))){const e=PD(c),t=PD(u),n=!yO(e.value)&&b.length>+e.value,r=!yO(t.value)&&b.length<+t.value;if((n||r)&&(R(n,e.message,t.message),!i))return w(S[v].message),S}if(h&&!N&&qO(b)){const{value:t,message:n}=PD(h);if(gD(t)&&!b.match(t)&&(S[v]=f({type:UO,message:n,ref:e},P(UO,n)),!i))return w(n),S}if(m)if(tD(m)){const e=ND(yield m(b,r),x);if(e&&(S[v]=f(f({},e),P($O,e.message)),!i))return w(e.message),S}else if(xO(m)){let e={};for(const t in m){if(!XO(e)&&!i)break;const n=ND(yield m[t](b,r),x,t);n&&(e=f(f({},n),P(t,n.message)),w(n.message),i&&(S[v]=e))}if(!XO(e)&&(S[v]=f({ref:x},e),!i))return S}return w(!0),S});const ID={mode:OO,reValidateMode:AO,shouldFocusError:!0};function kD(e={}){let t,n=f(f({},ID),e),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:tD(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},s=(xO(n.defaultValues)||xO(n.values))&&SO(n.defaultValues||n.values)||{},o=n.shouldUnregister?{}:SO(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d=f({},u);const p={array:ZO(),state:ZO()},h=n.criteriaMode===MO,g=e=>T(this,null,function*(){if(!n.disabled&&(u.isValid||d.isValid||e)){const e=n.resolver?XO((yield S()).errors):yield E(i,!0);e!==r.isValid&&p.state.next({isValid:e})}}),y=(e,t)=>{!n.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?IO(r.validatingFields,e,t):oD(r.validatingFields,e))}),p.state.next({validatingFields:r.validatingFields,isValidating:!XO(r.validatingFields)}))},b=(e,t,n,r)=>{const l=PO(i,e);if(l){const i=PO(o,e,EO(n)?PO(s,e):n);EO(i)||r&&r.defaultChecked||t?IO(o,e,t?i:vD(l._f)):R(e,i),a.mount&&g()}},x=(e,t,i,o,a)=>{let l=!1,c=!1;const h={name:e};if(!n.disabled){if(!i||o){(u.isDirty||d.isDirty)&&(c=r.isDirty,r.isDirty=h.isDirty=N(),l=c!==h.isDirty);const n=KO(PO(s,e),t);c=!!PO(r.dirtyFields,e),n?oD(r.dirtyFields,e):IO(r.dirtyFields,e,!0),h.dirtyFields=r.dirtyFields,l=l||(u.dirtyFields||d.dirtyFields)&&c!==!n}if(i){const t=PO(r.touchedFields,e);t||(IO(r.touchedFields,e,i),h.touchedFields=r.touchedFields,l=l||(u.touchedFields||d.touchedFields)&&t!==i)}l&&a&&p.state.next(h)}return l?h:{}},w=(e,i,s,o)=>{const a=PO(r.errors,e),l=(u.isValid||d.isValid)&&RO(i)&&r.isValid!==i;var h;if(n.delayError&&s?(h=()=>((e,t)=>{IO(r.errors,e,t),p.state.next({errors:r.errors})})(e,s),t=e=>{clearTimeout(c),c=setTimeout(h,e)},t(n.delayError)):(clearTimeout(c),t=null,s?IO(r.errors,e,s):oD(r.errors,e)),(s?!KO(a,s):a)||!XO(o)||l){const t=m(f(f({},o),l&&RO(i)?{isValid:i}:{}),{errors:r.errors,name:e});r=f(f({},r),t),p.state.next(t)}},S=e=>T(this,null,function*(){y(e,!0);const t=yield n.resolver(o,n.context,((e,t,n,r)=>{const i={};for(const s of e){const e=PO(t,s);e&&IO(i,s,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}})(e||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return y(e),t}),C=e=>T(this,null,function*(){const{errors:t}=yield S(e);if(e)for(const n of e){const e=PO(t,n);e?IO(r.errors,n,e):oD(r.errors,n)}else r.errors=t;return t}),E=(e,t,...i)=>T(this,[e,t,...i],function*(e,t,i={valid:!0}){for(const s in e){const a=e[s];if(a){const e=a,{_f:s}=e,c=v(e,["_f"]);if(s){const e=l.array.has(s.name),c=a._f&&wD(a._f);c&&u.validatingFields&&y([s.name],!0);const d=yield RD(a,l.disabled,o,h,n.shouldUseNativeValidation&&!t,e);if(c&&u.validatingFields&&y([s.name]),d[s.name]&&(i.valid=!1,t))break;!t&&(PO(d,s.name)?e?TD(r.errors,d,s.name):IO(r.errors,s.name,d[s.name]):oD(r.errors,s.name))}!XO(c)&&(yield E(c,t,i))}}return i.valid}),N=(e,t)=>!n.disabled&&(e&&t&&IO(o,e,t),!KO(O(),s)),P=(e,t,n)=>((e,t,n,r,i)=>qO(e)?(r&&t.watch.add(e),PO(n,e,i)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),PO(n,e))):(r&&(t.watchAll=!0),n))(e,l,f({},a.mount?o:EO(t)?s:qO(e)?{[e]:t}:t),n,t),R=(e,t,n={})=>{const r=PO(i,e);let s=t;if(r){const n=r._f;n&&(!n.disabled&&IO(o,e,hD(t,n)),s=nD(n.ref)&&yO(t)?"":t,rD(n.ref)?[...n.ref.options].forEach(e=>e.selected=s.includes(e.value)):n.refs?vO(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(s)?e.checked=!!s.find(t=>t===e.value):e.checked=s===e.value||!!s)}):n.refs.forEach(e=>e.checked=e.value===s):eD(n.ref)?n.ref.value="":(n.ref.value=s,n.ref.type||p.state.next({name:e,values:SO(o)})))}(n.shouldDirty||n.shouldTouch)&&x(e,s,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&A(e)},I=(e,t,n)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const s=t[r],o=e+"."+r,a=PO(i,o);(l.array.has(e)||xO(s)||a&&!a._f)&&!gO(s)?I(o,s,n):R(o,s,n)}},k=(e,t,n={})=>{const c=PO(i,e),h=l.array.has(e),v=SO(t);IO(o,e,v),h?(p.array.next({name:e,values:SO(o)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&n.shouldDirty&&p.state.next({name:e,dirtyFields:cD(s,o),isDirty:N(e,v)})):!c||c._f||yO(v)?R(e,v,n):I(e,v,n),SD(e,l)&&p.state.next(m(f({},r),{name:e})),p.state.next({name:a.mount?e:void 0,values:SO(o)})},j=e=>T(this,null,function*(){a.mount=!0;const s=e.target;let c=s.name,m=!0;const v=PO(i,c),b=e=>{m=Number.isNaN(e)||gO(e)&&isNaN(e.getTime())||KO(e,PO(o,c,e))},C=bD(n.mode),T=bD(n.reValidateMode);if(v){let a,P;const R=s.type?vD(v._f):(e=>xO(e)&&e.target?vO(e.target)?e.target.checked:e.target.value:e)(e),I=e.type===kO||e.type===jO,k=!((N=v._f).mount&&(N.required||N.min||N.max||N.maxLength||N.minLength||N.pattern||N.validate)||n.resolver||PO(r.errors,c)||v._f.deps)||((e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e))(I,PO(r.touchedFields,c),r.isSubmitted,T,C),j=SD(c,l,I);IO(o,c,R),I?s&&s.readOnly||(v._f.onBlur&&v._f.onBlur(e),t&&t(0)):v._f.onChange&&v._f.onChange(e);const _=x(c,R,I),O=!XO(_)||j;if(!I&&p.state.next({name:c,type:e.type,values:SO(o)}),k)return(u.isValid||d.isValid)&&("onBlur"===n.mode?I&&g():I||g()),O&&p.state.next(f({name:c},j?{}:_));if(!I&&j&&p.state.next(f({},r)),n.resolver){const{errors:e}=yield S([c]);if(b(R),m){const t=ED(r.errors,i,c),n=ED(e,i,t.name||c);a=n.error,c=n.name,P=XO(e)}}else y([c],!0),a=(yield RD(v,l.disabled,o,h,n.shouldUseNativeValidation))[c],y([c]),b(R),m&&(a?P=!1:(u.isValid||d.isValid)&&(P=yield E(i,!0)));m&&(v._f.deps&&(!Array.isArray(v._f.deps)||v._f.deps.length>0)&&A(v._f.deps),w(c,P,a,_))}var N}),_=(e,t)=>{if(PO(r.errors,t)&&e.focus)return e.focus(),1},A=(e,...t)=>T(this,[e,...t],function*(e,t={}){let s,o;const a=YO(e);if(n.resolver){const t=yield C(EO(e)?e:a);s=XO(t),o=e?!a.some(e=>PO(t,e)):s}else e?(o=(yield Promise.all(a.map(e=>T(this,null,function*(){const t=PO(i,e);return yield E(t&&t._f?{[e]:t}:t)})))).every(Boolean),(o||r.isValid)&&g()):o=s=yield E(i);return p.state.next(m(f(f({},!qO(e)||(u.isValid||d.isValid)&&s!==r.isValid?{}:{name:e}),n.resolver||!e?{isValid:s}:{}),{errors:r.errors})),t.shouldFocus&&!o&&CD(i,_,e?a:l.mount),o}),O=(e,t)=>{let n=f({},a.mount?o:s);return t&&(n=QO(t.dirtyFields?r.dirtyFields:r.touchedFields,n)),EO(e)?n:qO(e)?PO(n,e):e.map(e=>PO(n,e))},D=(e,t)=>({invalid:!!PO((t||r).errors,e),isDirty:!!PO((t||r).dirtyFields,e),error:PO((t||r).errors,e),isValidating:!!PO(r.validatingFields,e),isTouched:!!PO((t||r).touchedFields,e)}),M=(e,t,n)=>{const s=(PO(i,e,{_f:{}})._f||{}).ref,o=PO(r.errors,e)||{},{ref:a,message:l,type:c}=o,u=v(o,["ref","message","type"]);IO(r.errors,e,m(f(f({},u),t),{ref:s})),p.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&s&&s.focus&&s.focus()},L=e=>p.state.subscribe({next:t=>{var n,i,a;n=e.name,i=t.name,a=e.exact,n&&i&&n!==i&&!YO(n).some(e=>e&&(a?e===i:e.startsWith(i)||i.startsWith(e)))||!((e,t,n,r)=>{n(e);const i=e,{name:s}=i,o=v(i,["name"]);return XO(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(e=>t[e]===(!r||MO))})(t,e.formState||u,V,e.reRenderRoot)||e.callback(m(f(f({values:f({},o)},r),t),{defaultValues:s}))}}).unsubscribe,z=(e,t={})=>{for(const a of e?YO(e):l.mount)l.mount.delete(a),l.array.delete(a),t.keepValue||(oD(i,a),oD(o,a)),!t.keepError&&oD(r.errors,a),!t.keepDirty&&oD(r.dirtyFields,a),!t.keepTouched&&oD(r.touchedFields,a),!t.keepIsValidating&&oD(r.validatingFields,a),!n.shouldUnregister&&!t.keepDefaultValue&&oD(s,a);p.state.next({values:SO(o)}),p.state.next(f(f({},r),t.keepDirty?{isDirty:N()}:{})),!t.keepIsValid&&g()},F=({disabled:e,name:t})=>{(RO(e)&&a.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},B=(e,t={})=>{let r=PO(i,e);const o=RO(t.disabled)||RO(n.disabled);return IO(i,e,m(f({},r||{}),{_f:f(m(f({},r&&r._f?r._f:{ref:{name:e}}),{name:e,mount:!0}),t)})),l.mount.add(e),r?F({disabled:RO(t.disabled)?t.disabled:n.disabled,name:e}):b(e,!0,t.value),m(f(f({},o?{disabled:t.disabled||n.disabled}:{}),n.progressive?{required:!!t.required,min:yD(t.min),max:yD(t.max),minLength:yD(t.minLength),maxLength:yD(t.maxLength),pattern:yD(t.pattern)}:{}),{name:e,onChange:j,onBlur:j,ref:o=>{if(o){B(e,t),r=PO(i,e);const n=EO(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,a=(e=>iD(e)||vO(e))(n),l=r._f.refs||[];if(a?l.find(e=>e===n):n===r._f.ref)return;IO(i,e,{_f:f(f({},r._f),a?{refs:[...l.filter(sD),n,...Array.isArray(PO(s,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n})}),b(e,!1,void 0,n)}else r=PO(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!((e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)))(l.array,e)||!a.action)&&l.unMount.add(e)}})},U=()=>n.shouldFocusError&&CD(i,_,l.mount),W=(e,t)=>s=>T(this,null,function*(){let a;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let c=SO(o);if(p.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=yield S();r.errors=e,c=SO(t)}else yield E(i);if(l.disabled.size)for(const e of l.disabled)oD(c,e);if(oD(r.errors,"root"),XO(r.errors)){p.state.next({errors:{}});try{yield e(c,s)}catch(u){a=u}}else t&&(yield t(f({},r.errors),s)),U(),setTimeout(U);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:XO(r.errors)&&!a,submitCount:r.submitCount+1,errors:r.errors}),a)throw a}),$=(e,t={})=>{const c=e?SO(e):s,d=SO(c),h=XO(e),m=h?s:d;if(t.keepDefaultValues||(s=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(cD(s,o))]);for(const t of Array.from(e))PO(r.dirtyFields,t)?IO(m,t,PO(o,t)):k(t,PO(m,t))}else{if(wO&&EO(e))for(const e of l.mount){const t=PO(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(nD(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)k(e,PO(m,e));else i={}}o=n.shouldUnregister?t.keepDefaultValues?SO(s):{}:SO(m),p.array.next({values:f({},m)}),p.state.next({values:f({},m)})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!t.keepIsValid||!!t.keepDirtyValues||!n.shouldUnregister&&!XO(m),a.watch=!!n.shouldUnregister,p.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!h&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||KO(e,s))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:h?{}:t.keepDirtyValues?t.keepDefaultValues&&o?cD(s,o):r.dirtyFields:t.keepDefaultValues&&e?cD(s,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1,defaultValues:s})},H=(e,t)=>$(tD(e)?e(o):e,t),V=e=>{r=f(f({},r),e)},q={control:{register:B,unregister:z,getFieldState:D,handleSubmit:W,setError:M,_subscribe:L,_runSchema:S,_focusError:U,_getWatch:P,_getDirty:N,_setValid:g,_setFieldArray:(e,t=[],l,c,h=!0,f=!0)=>{if(c&&l&&!n.disabled){if(a.action=!0,f&&Array.isArray(PO(i,e))){const t=l(PO(i,e),c.argA,c.argB);h&&IO(i,e,t)}if(f&&Array.isArray(PO(r.errors,e))){const t=l(PO(r.errors,e),c.argA,c.argB);h&&IO(r.errors,e,t),((e,t)=>{!TO(PO(e,t)).length&&oD(e,t)})(r.errors,e)}if((u.touchedFields||d.touchedFields)&&f&&Array.isArray(PO(r.touchedFields,e))){const t=l(PO(r.touchedFields,e),c.argA,c.argB);h&&IO(r.touchedFields,e,t)}(u.dirtyFields||d.dirtyFields)&&(r.dirtyFields=cD(s,o)),p.state.next({name:e,isDirty:N(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else IO(o,e,t)},_setDisabledField:F,_setErrors:e=>{r.errors=e,p.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>TO(PO(a.mount?o:s,e,n.shouldUnregister?PO(s,e,[]):[])),_reset:$,_resetDefaultValues:()=>tD(n.defaultValues)&&n.defaultValues().then(e=>{H(e,n.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=PO(i,e);t&&(t._f.refs?t._f.refs.every(e=>!sD(e)):!sD(t._f.ref))&&z(e)}l.unMount=new Set},_disableForm:e=>{RO(e)&&(p.state.next({disabled:e}),CD(i,(t,n)=>{const r=PO(i,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:p,_proxyFormState:u,get _fields(){return i},get _formValues(){return o},get _state(){return a},set _state(e){a=e},get _defaultValues(){return s},get _names(){return l},set _names(e){l=e},get _formState(){return r},get _options(){return n},set _options(e){n=f(f({},n),e)}},subscribe:e=>(a.mount=!0,d=f(f({},d),e.formState),L(m(f({},e),{formState:d}))),trigger:A,register:B,handleSubmit:W,watch:(e,t)=>tD(e)?p.state.subscribe({next:n=>"values"in n&&e(P(void 0,t),n)}):P(e,t,!0),setValue:k,getValues:O,reset:H,resetField:(e,t={})=>{PO(i,e)&&(EO(t.defaultValue)?k(e,SO(PO(s,e))):(k(e,t.defaultValue),IO(s,e,SO(t.defaultValue))),t.keepTouched||oD(r.touchedFields,e),t.keepDirty||(oD(r.dirtyFields,e),r.isDirty=t.defaultValue?N(e,SO(PO(s,e))):N()),t.keepError||(oD(r.errors,e),u.isValid&&g()),p.state.next(f({},r)))},clearErrors:e=>{e&&YO(e).forEach(e=>oD(r.errors,e)),p.state.next({errors:e?r.errors:{}})},unregister:z,setError:M,setFocus:(e,t={})=>{const n=PO(i,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&tD(e.select)&&e.select())}},getFieldState:D};return m(f({},q),{formControl:q})}function jD(e={}){const t=Rt.useRef(void 0),n=Rt.useRef(void 0),[r,i]=Rt.useState({isDirty:!1,isValidating:!1,isLoading:tD(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:tD(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current=m(f({},e.formControl),{formState:r}),e.defaultValues&&!tD(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const n=kD(e),{formControl:i}=n,s=v(n,["formControl"]);t.current=m(f({},s),{formState:r})}const s=t.current.control;return s._options=e,VO(()=>{const e=s._subscribe({formState:s._proxyFormState,callback:()=>i(f({},s._formState)),reRenderRoot:!0});return i(e=>m(f({},e),{isReady:!0})),s._formState.isReady=!0,e},[s]),Rt.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),Rt.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),Rt.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),Rt.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),Rt.useEffect(()=>{if(s._proxyFormState.isDirty){const e=s._getDirty();e!==r.isDirty&&s._subjects.state.next({isDirty:e})}},[s,r.isDirty]),Rt.useEffect(()=>{e.values&&!KO(e.values,n.current)?(s._reset(e.values,f({keepFieldsRef:!0},s._options.resetOptions)),n.current=e.values,i(e=>f({},e))):s._resetDefaultValues()},[s,e.values]),Rt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next(f({},s._formState))),s._removeUnmounted()}),t.current.formState=((e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const n=s;return t._proxyFormState[n]!==MO&&(t._proxyFormState[n]=!r||MO),e[n]}});return i})(r,s),t.current}var _D,AD,OD,DD=function(e,t,n){if(e&&"reportValidity"in e){var r=PO(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},MD=function(e,t){var n=function(n){var r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?DD(r.ref,n,e):r.refs&&r.refs.forEach(function(t){return DD(t,n,e)})};for(var r in t.fields)n(r)},LD=function(e,t){t.shouldUseNativeValidation&&MD(e,t);var n={};for(var r in e){var i=PO(t.fields,r);IO(n,r,Object.assign(e[r],{ref:i&&i.ref}))}return n},zD=function(e,t){for(var n={};e.length;){var r=e[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=n[o].types,c=l&&l[r.code];n[o]=JO(o,t,n,i,c?[].concat(c,r.message):r.message)}e.shift()}return n};(AD=_D||(_D={})).assertEqual=e=>{},AD.assertIs=function(e){},AD.assertNever=function(e){throw new Error},AD.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},AD.getValidEnumValues=e=>{const t=AD.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(const r of t)n[r]=e[r];return AD.objectValues(n)},AD.objectValues=e=>AD.objectKeys(e).map(function(t){return e[t]}),AD.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},AD.find=(e,t)=>{for(const n of e)if(t(n))return n},AD.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,AD.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},AD.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(OD||(OD={})).mergeShapes=(e,t)=>f(f({},e),t);const FD=_D.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),BD=e=>{switch(typeof e){case"undefined":return FD.undefined;case"string":return FD.string;case"number":return Number.isNaN(e)?FD.nan:FD.number;case"boolean":return FD.boolean;case"function":return FD.function;case"bigint":return FD.bigint;case"symbol":return FD.symbol;case"object":return Array.isArray(e)?FD.array:null===e?FD.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?FD.promise:"undefined"!=typeof Map&&e instanceof Map?FD.map:"undefined"!=typeof Set&&e instanceof Set?FD.set:"undefined"!=typeof Date&&e instanceof Date?FD.date:FD.object;default:return FD.unknown}},UD=_D.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class WD extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof WD))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_D.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)if(r.path.length>0){const n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}WD.create=e=>new WD(e);const $D=(e,t)=>{let n;switch(e.code){case UD.invalid_type:n=e.received===FD.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case UD.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,_D.jsonStringifyReplacer)}`;break;case UD.unrecognized_keys:n=`Unrecognized key(s) in object: ${_D.joinValues(e.keys,", ")}`;break;case UD.invalid_union:n="Invalid input";break;case UD.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${_D.joinValues(e.options)}`;break;case UD.invalid_enum_value:n=`Invalid enum value. Expected ${_D.joinValues(e.options)}, received '${e.received}'`;break;case UD.invalid_arguments:n="Invalid function arguments";break;case UD.invalid_return_type:n="Invalid function return type";break;case UD.invalid_date:n="Invalid date";break;case UD.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:_D.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case UD.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case UD.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case UD.custom:n="Invalid input";break;case UD.invalid_intersection_types:n="Intersection results could not be merged";break;case UD.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case UD.not_finite:n="Number must be finite";break;default:n=t.defaultError,_D.assertNever(e)}return{message:n}};let HD=$D;function VD(e,t){const n=HD,r=(e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],o=m(f({},i),{path:s});if(void 0!==i.message)return m(f({},i),{path:s,message:i.message});let a="";const l=r.filter(e=>!!e).slice().reverse();for(const c of l)a=c(o,{data:t,defaultError:a}).message;return m(f({},i),{path:s,message:a})})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===$D?void 0:$D].filter(e=>!!e)});e.common.issues.push(r)}class qD{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return GD;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static mergeObjectAsync(e,t){return T(this,null,function*(){const n=[];for(const e of t){const t=yield e.key,r=yield e.value;n.push({key:t,value:r})}return qD.mergeObjectSync(e,n)})}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return GD;if("aborted"===i.status)return GD;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!r.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const GD=Object.freeze({status:"aborted"}),KD=e=>({status:"dirty",value:e}),JD=e=>({status:"valid",value:e}),YD=e=>"aborted"===e.status,ZD=e=>"dirty"===e.status,QD=e=>"valid"===e.status,XD=e=>"undefined"!=typeof Promise&&e instanceof Promise;var eM,tM;(tM=eM||(eM={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},tM.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class nM{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const rM=(e,t)=>{if(QD(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new WD(e.common.issues);return this._error=t,this._error}}};function iM(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var s,o;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:i.defaultError}:void 0===i.data?{message:null!=(s=null!=a?a:r)?s:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!=(o=null!=a?a:n)?o:i.defaultError}},description:i}}class sM{get description(){return this._def.description}_getType(e){return BD(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:BD(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qD,ctx:{common:e.parent.common,data:e.data,parsedType:BD(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(XD(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!=(n=null==t?void 0:t.async)&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:BD(e)},i=this._parseSync({data:e,path:r.path,parent:r});return rM(r,i)}"~validate"(e){var t,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:BD(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:r});return QD(t)?{value:t.value}:{issues:r.common.issues}}catch(yie){(null==(n=null==(t=null==yie?void 0:yie.message)?void 0:t.toLowerCase())?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(e=>QD(e)?{value:e.value}:{issues:r.common.issues})}parseAsync(e,t){return T(this,null,function*(){const n=yield this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error})}safeParseAsync(e,t){return T(this,null,function*(){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:BD(e)},r=this._parse({data:e,path:n.path,parent:n}),i=yield XD(r)?r:Promise.resolve(r);return rM(n,i)})}refine(e,t){return this._refinement((n,r)=>{const i=e(n),s=()=>r.addIssue(f({code:UD.custom},(e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t)(n)));return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new rL({schema:this,typeName:pL.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return iL.create(this,this._def)}nullable(){return sL.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return WM.create(this)}promise(){return nL.create(this,this._def)}or(e){return VM.create([this,e],this._def)}and(e){return GM.create(this,e,this._def)}transform(e){return new rL(m(f({},iM(this._def)),{schema:this,typeName:pL.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const t="function"==typeof e?e:()=>e;return new oL(m(f({},iM(this._def)),{innerType:this,defaultValue:t,typeName:pL.ZodDefault}))}brand(){return new cL(f({typeName:pL.ZodBranded,type:this},iM(this._def)))}catch(e){const t="function"==typeof e?e:()=>e;return new aL(m(f({},iM(this._def)),{innerType:this,catchValue:t,typeName:pL.ZodCatch}))}describe(e){return new(0,this.constructor)(m(f({},this._def),{description:e}))}pipe(e){return uL.create(this,e)}readonly(){return dL.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const oM=/^c[^\s-]{8,}$/i,aM=/^[0-9a-z]+$/,lM=/^[0-9A-HJKMNP-TV-Z]{26}$/i,cM=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,uM=/^[a-z0-9_-]{21}$/i,dM=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,pM=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hM=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let fM;const mM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,vM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,gM=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,yM=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bM=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xM=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,wM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",SM=new RegExp(`^${wM}$`);function CM(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function EM(e){return new RegExp(`^${CM(e)}$`)}function TM(e){let t=`${wM}T${CM(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function NM(e,t){return!("v4"!==t&&t||!mM.test(e))||!("v6"!==t&&t||!gM.test(e))}function PM(e,t){if(!dM.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!("object"!=typeof i||null===i||"typ"in i&&"JWT"!==(null==i?void 0:i.typ)||!i.alg||t&&i.alg!==t)}catch(gie){return!1}}function RM(e,t){return!("v4"!==t&&t||!vM.test(e))||!("v6"!==t&&t||!yM.test(e))}class IM extends sM{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==FD.string){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.string,received:t.parsedType}),GD}const t=new qD;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),VD(n,{code:UD.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),VD(n,{code:UD.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const i=e.data.length>r.value,s=e.data.length<r.value;(i||s)&&(n=this._getOrReturnCtx(e,n),i?VD(n,{code:UD.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):s&&VD(n,{code:UD.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)hM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"email",code:UD.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)fM||(fM=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),fM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"emoji",code:UD.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)cM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"uuid",code:UD.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)uM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"nanoid",code:UD.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)oM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"cuid",code:UD.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)aM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"cuid2",code:UD.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)lM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"ulid",code:UD.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch(gie){n=this._getOrReturnCtx(e,n),VD(n,{validation:"url",code:UD.invalid_string,message:r.message}),t.dirty()}else"regex"===r.kind?(r.regex.lastIndex=0,r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"regex",code:UD.invalid_string,message:r.message}),t.dirty())):"trim"===r.kind?e.data=e.data.trim():"includes"===r.kind?e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),VD(n,{code:UD.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty()):"toLowerCase"===r.kind?e.data=e.data.toLowerCase():"toUpperCase"===r.kind?e.data=e.data.toUpperCase():"startsWith"===r.kind?e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),VD(n,{code:UD.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty()):"endsWith"===r.kind?e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),VD(n,{code:UD.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty()):"datetime"===r.kind?TM(r).test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{code:UD.invalid_string,validation:"datetime",message:r.message}),t.dirty()):"date"===r.kind?SM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{code:UD.invalid_string,validation:"date",message:r.message}),t.dirty()):"time"===r.kind?EM(r).test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{code:UD.invalid_string,validation:"time",message:r.message}),t.dirty()):"duration"===r.kind?pM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"duration",code:UD.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?NM(e.data,r.version)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"ip",code:UD.invalid_string,message:r.message}),t.dirty()):"jwt"===r.kind?PM(e.data,r.alg)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"jwt",code:UD.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?RM(e.data,r.version)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"cidr",code:UD.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?bM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"base64",code:UD.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?xM.test(e.data)||(n=this._getOrReturnCtx(e,n),VD(n,{validation:"base64url",code:UD.invalid_string,message:r.message}),t.dirty()):_D.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),f({validation:t,code:UD.invalid_string},eM.errToObj(n)))}_addCheck(e){return new IM(m(f({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(f({kind:"email"},eM.errToObj(e)))}url(e){return this._addCheck(f({kind:"url"},eM.errToObj(e)))}emoji(e){return this._addCheck(f({kind:"emoji"},eM.errToObj(e)))}uuid(e){return this._addCheck(f({kind:"uuid"},eM.errToObj(e)))}nanoid(e){return this._addCheck(f({kind:"nanoid"},eM.errToObj(e)))}cuid(e){return this._addCheck(f({kind:"cuid"},eM.errToObj(e)))}cuid2(e){return this._addCheck(f({kind:"cuid2"},eM.errToObj(e)))}ulid(e){return this._addCheck(f({kind:"ulid"},eM.errToObj(e)))}base64(e){return this._addCheck(f({kind:"base64"},eM.errToObj(e)))}base64url(e){return this._addCheck(f({kind:"base64url"},eM.errToObj(e)))}jwt(e){return this._addCheck(f({kind:"jwt"},eM.errToObj(e)))}ip(e){return this._addCheck(f({kind:"ip"},eM.errToObj(e)))}cidr(e){return this._addCheck(f({kind:"cidr"},eM.errToObj(e)))}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(f({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(n=null==e?void 0:e.local)&&n},eM.errToObj(null==e?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(f({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision},eM.errToObj(null==e?void 0:e.message)))}duration(e){return this._addCheck(f({kind:"duration"},eM.errToObj(e)))}regex(e,t){return this._addCheck(f({kind:"regex",regex:e},eM.errToObj(t)))}includes(e,t){return this._addCheck(f({kind:"includes",value:e,position:null==t?void 0:t.position},eM.errToObj(null==t?void 0:t.message)))}startsWith(e,t){return this._addCheck(f({kind:"startsWith",value:e},eM.errToObj(t)))}endsWith(e,t){return this._addCheck(f({kind:"endsWith",value:e},eM.errToObj(t)))}min(e,t){return this._addCheck(f({kind:"min",value:e},eM.errToObj(t)))}max(e,t){return this._addCheck(f({kind:"max",value:e},eM.errToObj(t)))}length(e,t){return this._addCheck(f({kind:"length",value:e},eM.errToObj(t)))}nonempty(e){return this.min(1,eM.errToObj(e))}trim(){return new IM(m(f({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new IM(m(f({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new IM(m(f({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function kM(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/p(10,i)}IM.create=e=>{var t;return new IM(f({checks:[],typeName:pL.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t},iM(e)))};class jM extends sM{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==FD.number){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.number,received:t.parsedType}),GD}let t;const n=new qD;for(const r of this._def.checks)"int"===r.kind?_D.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),VD(t,{code:UD.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),VD(t,{code:UD.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),VD(t,{code:UD.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==kM(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),VD(t,{code:UD.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),VD(t,{code:UD.not_finite,message:r.message}),n.dirty()):_D.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,eM.toString(t))}gt(e,t){return this.setLimit("min",e,!1,eM.toString(t))}lte(e,t){return this.setLimit("max",e,!0,eM.toString(t))}lt(e,t){return this.setLimit("max",e,!1,eM.toString(t))}setLimit(e,t,n,r){return new jM(m(f({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:eM.toString(r)}]}))}_addCheck(e){return new jM(m(f({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:eM.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:eM.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:eM.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:eM.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:eM.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:eM.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:eM.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:eM.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:eM.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&_D.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}jM.create=e=>new jM(f({checks:[],typeName:pL.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1},iM(e)));class _M extends sM{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(gie){return this._getInvalidInput(e)}if(this._getType(e)!==FD.bigint)return this._getInvalidInput(e);let t;const n=new qD;for(const r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),VD(t,{code:UD.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),VD(t,{code:UD.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),VD(t,{code:UD.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):_D.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.bigint,received:t.parsedType}),GD}gte(e,t){return this.setLimit("min",e,!0,eM.toString(t))}gt(e,t){return this.setLimit("min",e,!1,eM.toString(t))}lte(e,t){return this.setLimit("max",e,!0,eM.toString(t))}lt(e,t){return this.setLimit("max",e,!1,eM.toString(t))}setLimit(e,t,n,r){return new _M(m(f({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:eM.toString(r)}]}))}_addCheck(e){return new _M(m(f({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:eM.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:eM.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:eM.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:eM.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:eM.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}_M.create=e=>{var t;return new _M(f({checks:[],typeName:pL.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t},iM(e)))};class AM extends sM{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==FD.boolean){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.boolean,received:t.parsedType}),GD}return JD(e.data)}}AM.create=e=>new AM(f({typeName:pL.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1},iM(e)));class OM extends sM{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==FD.date){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.date,received:t.parsedType}),GD}if(Number.isNaN(e.data.getTime()))return VD(this._getOrReturnCtx(e),{code:UD.invalid_date}),GD;const t=new qD;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),VD(n,{code:UD.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),VD(n,{code:UD.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):_D.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new OM(m(f({},this._def),{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:eM.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:eM.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}OM.create=e=>new OM(f({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:pL.ZodDate},iM(e)));class DM extends sM{_parse(e){if(this._getType(e)!==FD.symbol){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.symbol,received:t.parsedType}),GD}return JD(e.data)}}DM.create=e=>new DM(f({typeName:pL.ZodSymbol},iM(e)));class MM extends sM{_parse(e){if(this._getType(e)!==FD.undefined){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.undefined,received:t.parsedType}),GD}return JD(e.data)}}MM.create=e=>new MM(f({typeName:pL.ZodUndefined},iM(e)));class LM extends sM{_parse(e){if(this._getType(e)!==FD.null){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.null,received:t.parsedType}),GD}return JD(e.data)}}LM.create=e=>new LM(f({typeName:pL.ZodNull},iM(e)));class zM extends sM{constructor(){super(...arguments),this._any=!0}_parse(e){return JD(e.data)}}zM.create=e=>new zM(f({typeName:pL.ZodAny},iM(e)));class FM extends sM{constructor(){super(...arguments),this._unknown=!0}_parse(e){return JD(e.data)}}FM.create=e=>new FM(f({typeName:pL.ZodUnknown},iM(e)));class BM extends sM{_parse(e){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.never,received:t.parsedType}),GD}}BM.create=e=>new BM(f({typeName:pL.ZodNever},iM(e)));class UM extends sM{_parse(e){if(this._getType(e)!==FD.undefined){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.void,received:t.parsedType}),GD}return JD(e.data)}}UM.create=e=>new UM(f({typeName:pL.ZodVoid},iM(e)));class WM extends sM{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==FD.array)return VD(t,{code:UD.invalid_type,expected:FD.array,received:t.parsedType}),GD;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(VD(t,{code:e?UD.too_big:UD.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(VD(t,{code:UD.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(VD(t,{code:UD.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new nM(t,e,t.path,n)))).then(e=>qD.mergeArray(n,e));const i=[...t.data].map((e,n)=>r.type._parseSync(new nM(t,e,t.path,n)));return qD.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new WM(m(f({},this._def),{minLength:{value:e,message:eM.toString(t)}}))}max(e,t){return new WM(m(f({},this._def),{maxLength:{value:e,message:eM.toString(t)}}))}length(e,t){return new WM(m(f({},this._def),{exactLength:{value:e,message:eM.toString(t)}}))}nonempty(e){return this.min(1,e)}}function $M(e){if(e instanceof HM){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=iL.create($M(r))}return new HM(m(f({},e._def),{shape:()=>t}))}return e instanceof WM?new WM(m(f({},e._def),{type:$M(e.element)})):e instanceof iL?iL.create($M(e.unwrap())):e instanceof sL?sL.create($M(e.unwrap())):e instanceof KM?KM.create(e.items.map(e=>$M(e))):e}WM.create=(e,t)=>new WM(f({type:e,minLength:null,maxLength:null,exactLength:null,typeName:pL.ZodArray},iM(t)));class HM extends sM{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=_D.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==FD.object){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.object,received:t.parsedType}),GD}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof BM&&"strip"===this._def.unknownKeys))for(const a in n.data)i.includes(a)||s.push(a);const o=[];for(const a of i){const e=r[a],t=n.data[a];o.push({key:{status:"valid",value:a},value:e._parse(new nM(n,t,n.path,a)),alwaysSet:a in n.data})}if(this._def.catchall instanceof BM){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of s)o.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)s.length>0&&(VD(n,{code:UD.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const r=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new nM(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(()=>T(this,null,function*(){const e=[];for(const t of o){const n=yield t.key,r=yield t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then(e=>qD.mergeObjectSync(t,e)):qD.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return eM.errToObj,new HM(f(m(f({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:(t,n)=>{var r,i,s,o;const a=null!=(s=null==(i=(r=this._def).errorMap)?void 0:i.call(r,t,n).message)?s:n.defaultError;return"unrecognized_keys"===t.code?{message:null!=(o=eM.errToObj(e).message)?o:a}:{message:a}}}:{}))}strip(){return new HM(m(f({},this._def),{unknownKeys:"strip"}))}passthrough(){return new HM(m(f({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new HM(m(f({},this._def),{shape:()=>f(f({},this._def.shape()),e)}))}merge(e){return new HM({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>f(f({},this._def.shape()),e._def.shape()),typeName:pL.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new HM(m(f({},this._def),{catchall:e}))}pick(e){const t={};for(const n of _D.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new HM(m(f({},this._def),{shape:()=>t}))}omit(e){const t={};for(const n of _D.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new HM(m(f({},this._def),{shape:()=>t}))}deepPartial(){return $M(this)}partial(e){const t={};for(const n of _D.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new HM(m(f({},this._def),{shape:()=>t}))}required(e){const t={};for(const n of _D.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof iL;)e=e._def.innerType;t[n]=e}return new HM(m(f({},this._def),{shape:()=>t}))}keyof(){return XM(_D.objectKeys(this.shape))}}HM.create=(e,t)=>new HM(f({shape:()=>e,unknownKeys:"strip",catchall:BM.create(),typeName:pL.ZodObject},iM(t))),HM.strictCreate=(e,t)=>new HM(f({shape:()=>e,unknownKeys:"strict",catchall:BM.create(),typeName:pL.ZodObject},iM(t))),HM.lazycreate=(e,t)=>new HM(f({shape:e,unknownKeys:"strip",catchall:BM.create(),typeName:pL.ZodObject},iM(t)));class VM extends sM{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(e=>T(this,null,function*(){const n=m(f({},t),{common:m(f({},t.common),{issues:[]}),parent:null});return{result:yield e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map(e=>new WD(e.ctx.common.issues));return VD(t,{code:UD.invalid_union,unionErrors:n}),GD});{let e;const r=[];for(const s of n){const n=m(f({},t),{common:m(f({},t.common),{issues:[]}),parent:null}),i=s._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map(e=>new WD(e));return VD(t,{code:UD.invalid_union,unionErrors:i}),GD}}get options(){return this._def.options}}function qM(e,t){const n=BD(e),r=BD(t);if(e===t)return{valid:!0,data:e};if(n===FD.object&&r===FD.object){const n=_D.objectKeys(t),r=_D.objectKeys(e).filter(e=>-1!==n.indexOf(e)),i=f(f({},e),t);for(const s of r){const n=qM(e[s],t[s]);if(!n.valid)return{valid:!1};i[s]=n.data}return{valid:!0,data:i}}if(n===FD.array&&r===FD.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=qM(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===FD.date&&r===FD.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}VM.create=(e,t)=>new VM(f({options:e,typeName:pL.ZodUnion},iM(t)));class GM extends sM{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(YD(e)||YD(r))return GD;const i=qM(e.value,r.value);return i.valid?((ZD(e)||ZD(r))&&t.dirty(),{status:t.value,value:i.data}):(VD(n,{code:UD.invalid_intersection_types}),GD)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}GM.create=(e,t,n)=>new GM(f({left:e,right:t,typeName:pL.ZodIntersection},iM(n)));class KM extends sM{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==FD.array)return VD(n,{code:UD.invalid_type,expected:FD.array,received:n.parsedType}),GD;if(n.data.length<this._def.items.length)return VD(n,{code:UD.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),GD;!this._def.rest&&n.data.length>this._def.items.length&&(VD(n,{code:UD.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new nM(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>qD.mergeArray(t,e)):qD.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new KM(m(f({},this._def),{rest:e}))}}KM.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new KM(f({items:e,typeName:pL.ZodTuple,rest:null},iM(t)))};class JM extends sM{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==FD.map)return VD(n,{code:UD.invalid_type,expected:FD.map,received:n.parsedType}),GD;const r=this._def.keyType,i=this._def.valueType,s=[...n.data.entries()].map(([e,t],s)=>({key:r._parse(new nM(n,e,n.path,[s,"key"])),value:i._parse(new nM(n,t,n.path,[s,"value"]))}));if(n.common.async){const e=new Map;return Promise.resolve().then(()=>T(this,null,function*(){for(const n of s){const r=yield n.key,i=yield n.value;if("aborted"===r.status||"aborted"===i.status)return GD;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of s){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return GD;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}JM.create=(e,t,n)=>new JM(f({valueType:t,keyType:e,typeName:pL.ZodMap},iM(n)));class YM extends sM{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==FD.set)return VD(n,{code:UD.invalid_type,expected:FD.set,received:n.parsedType}),GD;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(VD(n,{code:UD.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(VD(n,{code:UD.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const n=new Set;for(const r of e){if("aborted"===r.status)return GD;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const o=[...n.data.values()].map((e,t)=>i._parse(new nM(n,e,n.path,t)));return n.common.async?Promise.all(o).then(e=>s(e)):s(o)}min(e,t){return new YM(m(f({},this._def),{minSize:{value:e,message:eM.toString(t)}}))}max(e,t){return new YM(m(f({},this._def),{maxSize:{value:e,message:eM.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}YM.create=(e,t)=>new YM(f({valueType:e,minSize:null,maxSize:null,typeName:pL.ZodSet},iM(t)));class ZM extends sM{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ZM.create=(e,t)=>new ZM(f({getter:e,typeName:pL.ZodLazy},iM(t)));class QM extends sM{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return VD(t,{received:t.data,code:UD.invalid_literal,expected:this._def.value}),GD}return{status:"valid",value:e.data}}get value(){return this._def.value}}function XM(e,t){return new eL(f({values:e,typeName:pL.ZodEnum},iM(t)))}QM.create=(e,t)=>new QM(f({value:e,typeName:pL.ZodLiteral},iM(t)));class eL extends sM{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return VD(t,{expected:_D.joinValues(n),received:t.parsedType,code:UD.invalid_type}),GD}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return VD(t,{received:t.data,code:UD.invalid_enum_value,options:n}),GD}return JD(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eL.create(e,f(f({},this._def),t))}exclude(e,t=this._def){return eL.create(this.options.filter(t=>!e.includes(t)),f(f({},this._def),t))}}eL.create=XM;class tL extends sM{_parse(e){const t=_D.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==FD.string&&n.parsedType!==FD.number){const e=_D.objectValues(t);return VD(n,{expected:_D.joinValues(e),received:n.parsedType,code:UD.invalid_type}),GD}if(this._cache||(this._cache=new Set(_D.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=_D.objectValues(t);return VD(n,{received:n.data,code:UD.invalid_enum_value,options:e}),GD}return JD(e.data)}get enum(){return this._def.values}}tL.create=(e,t)=>new tL(f({values:e,typeName:pL.ZodNativeEnum},iM(t)));class nL extends sM{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==FD.promise&&!1===t.common.async)return VD(t,{code:UD.invalid_type,expected:FD.promise,received:t.parsedType}),GD;const n=t.parsedType===FD.promise?t.data:Promise.resolve(t.data);return JD(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}nL.create=(e,t)=>new nL(f({type:e,typeName:pL.ZodPromise},iM(t)));class rL extends sM{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pL.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{VD(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const e=r.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(e=>T(this,null,function*(){if("aborted"===t.value)return GD;const r=yield this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?GD:"dirty"===r.status||"dirty"===t.value?KD(r.value):r}));{if("aborted"===t.value)return GD;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?GD:"dirty"===r.status||"dirty"===t.value?KD(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?GD:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?GD:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!QD(e))return GD;const s=r.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>QD(e)?Promise.resolve(r.transform(e.value,i)).then(e=>({status:t.value,value:e})):GD)}_D.assertNever(r)}}rL.create=(e,t,n)=>new rL(f({schema:e,typeName:pL.ZodEffects,effect:t},iM(n))),rL.createWithPreprocess=(e,t,n)=>new rL(f({schema:t,effect:{type:"preprocess",transform:e},typeName:pL.ZodEffects},iM(n)));class iL extends sM{_parse(e){return this._getType(e)===FD.undefined?JD(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}iL.create=(e,t)=>new iL(f({innerType:e,typeName:pL.ZodOptional},iM(t)));class sL extends sM{_parse(e){return this._getType(e)===FD.null?JD(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}sL.create=(e,t)=>new sL(f({innerType:e,typeName:pL.ZodNullable},iM(t)));class oL extends sM{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===FD.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}oL.create=(e,t)=>new oL(f({innerType:e,typeName:pL.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default},iM(t)));class aL extends sM{_parse(e){const{ctx:t}=this._processInputParams(e),n=m(f({},t),{common:m(f({},t.common),{issues:[]})}),r=this._def.innerType._parse({data:n.data,path:n.path,parent:f({},n)});return XD(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new WD(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new WD(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}aL.create=(e,t)=>new aL(f({innerType:e,typeName:pL.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch},iM(t)));class lL extends sM{_parse(e){if(this._getType(e)!==FD.nan){const t=this._getOrReturnCtx(e);return VD(t,{code:UD.invalid_type,expected:FD.nan,received:t.parsedType}),GD}return{status:"valid",value:e.data}}}lL.create=e=>new lL(f({typeName:pL.ZodNaN},iM(e)));class cL extends sM{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class uL extends sM{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(()=>T(this,null,function*(){const e=yield this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?GD:"dirty"===e.status?(t.dirty(),KD(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})}))();{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?GD:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new uL({in:e,out:t,typeName:pL.ZodPipeline})}}class dL extends sM{_parse(e){const t=this._def.innerType._parse(e),n=e=>(QD(e)&&(e.value=Object.freeze(e.value)),e);return XD(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}var pL,hL;dL.create=(e,t)=>new dL(f({innerType:e,typeName:pL.ZodReadonly},iM(t))),(hL=pL||(pL={})).ZodString="ZodString",hL.ZodNumber="ZodNumber",hL.ZodNaN="ZodNaN",hL.ZodBigInt="ZodBigInt",hL.ZodBoolean="ZodBoolean",hL.ZodDate="ZodDate",hL.ZodSymbol="ZodSymbol",hL.ZodUndefined="ZodUndefined",hL.ZodNull="ZodNull",hL.ZodAny="ZodAny",hL.ZodUnknown="ZodUnknown",hL.ZodNever="ZodNever",hL.ZodVoid="ZodVoid",hL.ZodArray="ZodArray",hL.ZodObject="ZodObject",hL.ZodUnion="ZodUnion",hL.ZodDiscriminatedUnion="ZodDiscriminatedUnion",hL.ZodIntersection="ZodIntersection",hL.ZodTuple="ZodTuple",hL.ZodRecord="ZodRecord",hL.ZodMap="ZodMap",hL.ZodSet="ZodSet",hL.ZodFunction="ZodFunction",hL.ZodLazy="ZodLazy",hL.ZodLiteral="ZodLiteral",hL.ZodEnum="ZodEnum",hL.ZodEffects="ZodEffects",hL.ZodNativeEnum="ZodNativeEnum",hL.ZodOptional="ZodOptional",hL.ZodNullable="ZodNullable",hL.ZodDefault="ZodDefault",hL.ZodCatch="ZodCatch",hL.ZodPromise="ZodPromise",hL.ZodBranded="ZodBranded",hL.ZodPipeline="ZodPipeline",hL.ZodReadonly="ZodReadonly";const fL=IM.create;BM.create,WM.create;const mL=HM.create;VM.create,GM.create,KM.create,eL.create,nL.create,iL.create,sL.create;const vL=mL({username:fL().min(1,""),password:fL().min(1,"")}),gL=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("div",f({ref:t,className:Ng("rounded-lg border bg-card text-card-foreground shadow-sm",r)},i))});gL.displayName="Card";const yL=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("div",f({ref:t,className:Ng("flex flex-col space-y-1.5 p-6",r)},i))});yL.displayName="CardHeader";const bL=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("h3",f({ref:t,className:Ng("text-2xl font-semibold leading-none tracking-tight",r)},i))});bL.displayName="CardTitle";const xL=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("p",f({ref:t,className:Ng("text-sm text-muted-foreground",r)},i))});xL.displayName="CardDescription";const wL=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("div",f({ref:t,className:Ng("p-6 pt-0",r)},i))});wL.displayName="CardContent";const SL=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("div",f({ref:t,className:Ng("flex items-center p-6 pt-0",r)},i))});SL.displayName="CardFooter";var CL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=bv(`Primitive.${t}`),r=Pt.forwardRef((e,r)=>{const i=e,{asChild:s}=i,o=v(i,["asChild"]),a=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Lt.jsx(a,m(f({},o),{ref:r}))});return r.displayName=`Primitive.${t}`,m(f({},e),{[t]:r})},{}),EL=Pt.forwardRef((e,t)=>Lt.jsx(CL.label,m(f({},e),{ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null==(n=e.onMouseDown)||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));EL.displayName="Label";var TL=EL;const NL=Rv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),PL=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(TL,f({ref:t,className:Ng(NL(),r)},i))});PL.displayName=TL.displayName;const RL=e=>{const t=e,{children:n}=t,r=v(t,["children"]);return Rt.createElement(HO.Provider,{value:r},n)},IL=Pt.createContext({}),kL=()=>{const e=Pt.useContext(IL),t=Pt.useContext(jL),{getFieldState:n,formState:r}=Rt.useContext(HO),i=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:s}=t;return f({id:s,name:e.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`},i)},jL=Pt.createContext({}),_L=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);const s=Pt.useId();return Lt.jsx(jL.Provider,{value:{id:s},children:Lt.jsx("div",f({ref:t,className:Ng("space-y-2",r)},i))})});_L.displayName="FormItem";const AL=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);const{error:s,formItemId:o}=kL();return Lt.jsx(PL,f({ref:t,className:Ng(s&&"text-destructive",r),htmlFor:o},i))});AL.displayName="FormLabel";const OL=Pt.forwardRef((e,t)=>{var n=v(e,[]);const{error:r,formItemId:i,formDescriptionId:s,formMessageId:o}=kL();return Lt.jsx(xv,f({ref:t,id:i,"aria-describedby":r?`${s} ${o}`:`${s}`,"aria-invalid":!!r},n))});OL.displayName="FormControl",Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);const{formDescriptionId:s}=kL();return Lt.jsx("p",f({ref:t,id:s,className:Ng("text-sm text-muted-foreground",r)},i))}).displayName="FormDescription";const DL=Pt.forwardRef((e,t)=>{var n=e,{className:r,children:i}=n,s=v(n,["className","children"]);const{error:o,formMessageId:a}=kL(),l=o?String(null==o?void 0:o.message):i;return l?Lt.jsx("p",m(f({ref:t,id:a,className:Ng("text-sm font-medium text-destructive",r)},s),{children:l})):null});DL.displayName="FormMessage";const ML=Pt.forwardRef((e,t)=>{var n=e,{className:r,type:i}=n,s=v(n,["className","type"]);return Lt.jsx("input",f({type:i,className:Ng("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t},s))});ML.displayName="Input";const LL=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=Pt.useState(""),[n,r]=Pt.useState(""),[i,s]=Pt.useState(!1),[o,a]=Pt.useState(""),{login:l,user:c,isLoading:u}=Km(),d=Wf();Ff(),console.log(" Login  :",{authLoading:u,hasUser:!!c,username:null==c?void 0:c.username,isLoading:i,errorMessage:o}),Pt.useEffect(()=>{console.log("  - :",{authLoading:u,hasUser:!!c,username:null==c?void 0:c.username}),!u&&c&&c.username?(console.log("  - "),d("/chat",{replace:!0})):u||c||console.log("  - ")},[c,u,d]);const p=jD({resolver:(h=vL,void 0===g&&(g={}),function(e,t,n){try{return Promise.resolve(function(t,r){try{var i=Promise.resolve(h["sync"===g.mode?"parse":"parseAsync"](e,v)).then(function(t){return n.shouldUseNativeValidation&&MD({},n),{errors:{},values:g.rawValues?e:t}})}catch(s){return r(s)}return i&&i.then?i.then(void 0,r):i}(0,function(e){return{values:{},errors:e.isEmpty?{}:LD(zD(e.errors,!n.shouldUseNativeValidation&&"all"===n.criteriaMode),n)}}))}catch(r){return Promise.reject(r)}}),defaultValues:{username:"",password:""}});var h,v,g;return Pt.useEffect(()=>{const e=e=>console.debug("[login] document submit caught",e);return document.addEventListener("submit",e,!0),()=>document.removeEventListener("submit",e,!0)},[]),Pt.useEffect(()=>{const e=p.watch(e=>{console.log(" :",e)});return()=>e.unsubscribe()},[p]),u?(console.log(" Login: "),Lt.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-b from-primary/10 to-primary/5 p-4",children:Lt.jsxs("div",{className:"text-center",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),Lt.jsx("p",{className:"text-gray-600",children:"..."})]})})):(console.log(" Login: "),Lt.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-b from-primary/10 to-primary/5 p-4",children:Lt.jsxs("div",{className:"w-full max-w-md",children:[Lt.jsxs("div",{className:"text-center mb-6",children:[Lt.jsx("h1",{className:"text-2xl font-bold text-primary",children:""}),Lt.jsx("p",{className:"text-neutral-600 mt-2",children:"Emergency Support System"})]}),Lt.jsxs(gL,{className:"w-full shadow-lg",children:[Lt.jsx(yL,{className:"text-center bg-primary text-white rounded-t-lg",children:Lt.jsx(bL,{className:"text-2xl font-bold",children:""})}),Lt.jsx(wL,{className:"pt-6",children:Lt.jsx(RL,m(f({},p),{children:Lt.jsxs("form",{id:"login-form",onSubmit:t=>T(this,null,function*(){if(t.preventDefault(),console.debug("[login] submit",{usernameLen:e.length}),console.trace("[login] submit trace"),a(""),!i)if(e.trim()&&n){s(!0);try{console.log(" :",{username:e.trim()}),yield l(e.trim(),n),console.log(" : "),d("/chat")}catch(r){console.warn("[login] :",r);let e="";(null==r?void 0:r.message)&&(e=r.message.includes("500")?"":r.message.includes("401")?"":r.message.includes("")?"":r.message.includes("")?"":r.message),a(e)}finally{s(!1)}}else a("/")}),className:"space-y-4",noValidate:!0,children:[Lt.jsxs(_L,{children:[Lt.jsx(AL,{children:""}),Lt.jsx(OL,{children:Lt.jsx(ML,{name:"username",placeholder:"",autoComplete:"off",value:e,onChange:e=>t(e.target.value),disabled:i})}),Lt.jsx(DL,{})]}),Lt.jsxs(_L,{children:[Lt.jsx(AL,{children:""}),Lt.jsx(OL,{children:Lt.jsx(ML,{name:"password",type:"password",placeholder:"",autoComplete:"new-password",value:n,onChange:e=>r(e.target.value),disabled:i})}),Lt.jsx(DL,{})]}),o&&Lt.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:o}),Lt.jsxs("div",{className:"p-3 text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-md",children:[Lt.jsx("p",{children:""}),Lt.jsx("p",{className:"mt-1",children:""})]}),Lt.jsx(Rg,{type:"submit",className:"w-full bg-primary",disabled:i,form:"login-form",children:i?"...":""}),Lt.jsx("button",{type:"button",onClick:()=>T(this,null,function*(){console.debug("[login] force send"),yield Hm(e.trim());const t=yield Vm();console.debug("[login] me after force",t)}),style:{display:"none"},"data-testid":"force-login",children:"force"})]})}))}),Lt.jsx(SL,{className:"flex flex-col space-y-2 text-center text-sm text-neutral-500 border-t pt-4 mt-2",children:Lt.jsx("p",{children:""})})]})]})}))}},Symbol.toStringTag,{value:"Module"})),zL=6048e5,FL=Symbol.for("constructDateFrom");function BL(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&FL in e?e[FL](t):e instanceof Date?new e.constructor(t):new Date(t)}function UL(e,t){return BL(t||e,e)}let WL={};function $L(){return WL}function HL(e,t){var n,r,i,s,o,a,l,c;const u=$L(),d=null!=(c=null!=(l=null!=(s=null!=(i=null==t?void 0:t.weekStartsOn)?i:null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.weekStartsOn)?s:u.weekStartsOn)?l:null==(a=null==(o=u.locale)?void 0:o.options)?void 0:a.weekStartsOn)?c:0,p=UL(e,null==t?void 0:t.in),h=p.getDay(),f=(h<d?7:0)+h-d;return p.setDate(p.getDate()-f),p.setHours(0,0,0,0),p}function VL(e,t){return HL(e,m(f({},t),{weekStartsOn:1}))}function qL(e,t){const n=UL(e,null==t?void 0:t.in),r=n.getFullYear(),i=BL(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=VL(i),o=BL(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=VL(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function GL(e){const t=UL(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function KL(e,t){const n=UL(e,null==t?void 0:t.in);return n.setHours(0,0,0,0),n}function JL(e,t,n){const[r,i]=function(e,...t){const n=BL.bind(null,t.find(e=>"object"==typeof e));return t.map(n)}(null==n||n.in,e,t),s=KL(r),o=KL(i),a=+s-GL(s),l=+o-GL(o);return Math.round((a-l)/864e5)}function YL(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+UL(e)));var t}const ZL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function QL(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const XL={date:QL({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:QL({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:QL({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ez={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function tz(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function nz(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const o=s[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}(a,e=>e.test(o)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}(a,e=>e.test(o));let c;return c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c,{value:c,rest:t.slice(o.length)}}}function rz(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];return o=n.valueCallback?n.valueCallback(o):o,{value:o,rest:t.slice(i.length)}}}const iz={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=ZL[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:XL,formatRelative:(e,t,n,r)=>ez[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:tz({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:tz({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:tz({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:tz({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:tz({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:rz({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:nz({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:nz({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:nz({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:nz({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:nz({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function sz(e,t){const n=UL(e,null==t?void 0:t.in),r=JL(n,function(e,t){const n=UL(e,null==t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n));return r+1}function oz(e,t){const n=UL(e,null==t?void 0:t.in),r=+VL(n)-+function(e,t){const n=qL(e,t),r=BL(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),VL(r)}(n);return Math.round(r/zL)+1}function az(e,t){var n,r,i,s,o,a,l,c;const u=UL(e,null==t?void 0:t.in),d=u.getFullYear(),p=$L(),h=null!=(c=null!=(l=null!=(s=null!=(i=null==t?void 0:t.firstWeekContainsDate)?i:null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)?s:p.firstWeekContainsDate)?l:null==(a=null==(o=p.locale)?void 0:o.options)?void 0:a.firstWeekContainsDate)?c:1,f=BL((null==t?void 0:t.in)||e,0);f.setFullYear(d+1,0,h),f.setHours(0,0,0,0);const m=HL(f,t),v=BL((null==t?void 0:t.in)||e,0);v.setFullYear(d,0,h),v.setHours(0,0,0,0);const g=HL(v,t);return+u>=+m?d+1:+u>=+g?d:d-1}function lz(e,t){const n=UL(e,null==t?void 0:t.in),r=+HL(n,t)-+function(e,t){var n,r,i,s,o,a,l,c;const u=$L(),d=null!=(c=null!=(l=null!=(s=null!=(i=null==t?void 0:t.firstWeekContainsDate)?i:null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)?s:u.firstWeekContainsDate)?l:null==(a=null==(o=u.locale)?void 0:o.options)?void 0:a.firstWeekContainsDate)?c:1,p=az(e,t),h=BL((null==t?void 0:t.in)||e,0);return h.setFullYear(p,0,d),h.setHours(0,0,0,0),HL(h,t)}(n,t);return Math.round(r/zL)+1}function cz(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const uz={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return cz("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):cz(n+1,2)},d:(e,t)=>cz(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>cz(e.getHours()%12||12,t.length),H:(e,t)=>cz(e.getHours(),t.length),m:(e,t)=>cz(e.getMinutes(),t.length),s:(e,t)=>cz(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return cz(Math.trunc(r*Math.pow(10,n-3)),t.length)}},dz="midnight",pz="noon",hz="morning",fz="afternoon",mz="evening",vz="night",gz={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return uz.y(e,t)},Y:function(e,t,n,r){const i=az(e,r),s=i>0?i:1-i;return"YY"===t?cz(s%100,2):"Yo"===t?n.ordinalNumber(s,{unit:"year"}):cz(s,t.length)},R:function(e,t){return cz(qL(e),t.length)},u:function(e,t){return cz(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return cz(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return cz(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return uz.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return cz(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=lz(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):cz(i,t.length)},I:function(e,t,n){const r=oz(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):cz(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):uz.d(e,t)},D:function(e,t,n){const r=sz(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):cz(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return cz(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return cz(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return cz(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?pz:0===r?dz:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?mz:r>=12?fz:r>=4?hz:vz,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return uz.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):uz.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):cz(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):cz(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):uz.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):uz.s(e,t)},S:function(e,t){return uz.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return bz(r);case"XXXX":case"XX":return xz(r);default:return xz(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return bz(r);case"xxxx":case"xx":return xz(r);default:return xz(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+yz(r,":");default:return"GMT"+xz(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+yz(r,":");default:return"GMT"+xz(r,":")}},t:function(e,t,n){return cz(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return cz(+e,t.length)}};function yz(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return 0===s?n+String(i):n+String(i)+t+cz(s,2)}function bz(e,t){return e%60==0?(e>0?"-":"+")+cz(Math.abs(e)/60,2):xz(e,t)}function xz(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+cz(Math.trunc(r/60),2)+t+cz(r%60,2)}const wz=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Sz=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Cz={p:Sz,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return wz(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",wz(r,t)).replace("{{time}}",Sz(i,t))}},Ez=/^D+$/,Tz=/^Y+$/,Nz=["D","DD","YY","YYYY"],Pz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Iz=/^'([^]*?)'?$/,kz=/''/g,jz=/[a-zA-Z]/;function _z(e,t,n){var r,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y,b,x;const w=$L(),S=null!=(i=null!=(r=null==n?void 0:n.locale)?r:w.locale)?i:iz,C=null!=(p=null!=(d=null!=(l=null!=(a=null==n?void 0:n.firstWeekContainsDate)?a:null==(o=null==(s=null==n?void 0:n.locale)?void 0:s.options)?void 0:o.firstWeekContainsDate)?l:w.firstWeekContainsDate)?d:null==(u=null==(c=w.locale)?void 0:c.options)?void 0:u.firstWeekContainsDate)?p:1,E=null!=(x=null!=(b=null!=(v=null!=(m=null==n?void 0:n.weekStartsOn)?m:null==(f=null==(h=null==n?void 0:n.locale)?void 0:h.options)?void 0:f.weekStartsOn)?v:w.weekStartsOn)?b:null==(y=null==(g=w.locale)?void 0:g.options)?void 0:y.weekStartsOn)?x:0,T=UL(e,null==n?void 0:n.in);if(!YL(T))throw new RangeError("Invalid time value");let N=t.match(Rz).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,Cz[t])(e,S.formatLong):e}).join("").match(Pz).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Az(e)};if(gz[t])return{isToken:!0,value:e};if(t.match(jz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});S.localize.preprocessor&&(N=S.localize.preprocessor(T,N));const P={firstWeekContainsDate:C,weekStartsOn:E,locale:S};return N.map(r=>{if(!r.isToken)return r.value;const i=r.value;return(!(null==n?void 0:n.useAdditionalWeekYearTokens)&&function(e){return Tz.test(e)}(i)||!(null==n?void 0:n.useAdditionalDayOfYearTokens)&&function(e){return Ez.test(e)}(i))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),Nz.includes(e))throw new RangeError(r)}(i,t,String(e)),(0,gz[i[0]])(T,i,S.localize,P)}).join("")}function Az(e){const t=e.match(Iz);return t?t[1].replace(kz,"'"):e}const Oz={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},Dz={date:QL({formats:{full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},defaultWidth:"full"}),time:QL({formats:{full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:QL({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},Mz={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},Lz={code:"ja",formatDistance:(e,t,n)=>{let r;n=n||{};const i=Oz[e];return r="string"==typeof i?i:1===t?n.addSuffix&&i.oneWithSuffix?i.oneWithSuffix:i.one:n.addSuffix&&i.otherWithSuffix?i.otherWithSuffix.replace("{{count}}",String(t)):i.other.replace("{{count}}",String(t)),n.addSuffix?n.comparison&&n.comparison>0?r+"":r+"":r},formatLong:Dz,formatRelative:(e,t,n,r)=>Mz[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e);switch(String(null==t?void 0:t.unit)){case"year":return`${n}`;case"quarter":return`${n}`;case"month":return`${n}`;case"week":return`${n}`;case"date":return`${n}`;case"hour":return`${n}`;case"minute":return`${n}`;case"second":return`${n}`;default:return`${n}`}},era:tz({values:{narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},defaultWidth:"wide"}),quarter:tz({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:tz({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},defaultWidth:"wide"}),day:tz({values:{narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},defaultWidth:"wide"}),dayPeriod:tz({values:{narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},defaultWidth:"wide",formattingValues:{narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:rz({matchPattern:/^?\d+(|||||||)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:nz({matchPatterns:{narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},defaultParseWidth:"any"}),quarter:nz({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:nz({matchPatterns:{narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:nz({matchPatterns:{narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},defaultMatchWidth:"wide",parsePatterns:{any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},defaultParseWidth:"any"}),dayPeriod:nz({matchPatterns:{any:/^(AM|PM|||||||)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function zz({message:e,isDraft:t=!1}){const{user:n}=Km(),{setSelectedText:r}=cv(),[i,s]=Pt.useState(""),[o,a]=Pt.useState(!1),[l,c]=Pt.useState(!1),{toast:u}=nv(),d=!e.isAiResponse,p=e.content&&e.content.includes("");p&&console.log(" :",{id:e.id,isAiResponse:e.isAiResponse,contentStart:e.content.substring(0,50)+"...",timestamp:e.timestamp});let h="--:--";try{const t=e.timestamp||e.createdAt;if(t){const e=new Date(t);h=isNaN(e.getTime())?_z(new Date,"HH:mm",{locale:Lz}):_z(e,"HH:mm",{locale:Lz})}else h=_z(new Date,"HH:mm",{locale:Lz})}catch(m){console.error(":",m,"timestamp:",e.timestamp),h=_z(new Date,"HH:mm",{locale:Lz})}const f=t=>{var n;const r=(null==(n=e.media)?void 0:n.map(e=>e.url))||[];window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:t,all_slides:r.length>1?r:void 0,title:"",content:e.content}}))};return Lt.jsxs("div",{className:`flex items-end mb-4 ${d?"justify-start":"justify-end"} min-w-[250px] ${t?"draft-message animate-pulse":""}`,onMouseUp:()=>{const e=window.getSelection(),t=null==e?void 0:e.toString();if(e&&t&&t.trim().length>0){const e=t.trim();s(e),a(!0)}else s(""),a(!1)},children:[Lt.jsxs("div",{className:`mx-2 flex flex-col ${d?"items-start":"items-end"} max-w-[70%] min-w-[230px]`,children:[Lt.jsx("div",{className:"flex items-center gap-2 mb-1",children:!d&&Lt.jsx("button",{onClick:()=>T(this,null,function*(){if(l)"speechSynthesis"in window&&window.speechSynthesis.cancel(),c(!1),u({title:"",duration:2e3});else{const t=e.content||e.text||"";if(!d&&t&&"string"==typeof t&&t.trim()){c(!0),u({title:"",duration:2e3});try{yield((e,t={})=>new Promise((n,r)=>{if(!("speechSynthesis"in window))return void r(new Error(""));const i=new SpeechSynthesisUtterance(e);i.rate=t.rate||1,i.pitch=t.pitch||1,i.volume=t.volume||1,i.lang=t.lang||"ja-JP",i.onend=()=>{n()},i.onerror=e=>{r(new Error(`: ${e.error}`))},window.speechSynthesis.cancel(),window.speechSynthesis.speak(i)}))(t,{rate:1,pitch:1,lang:"ja-JP"})}catch(m){u({title:"",description:m instanceof Error?m.message:"",variant:"destructive"})}finally{c(!1)}}}}),className:"w-8 h-8 flex items-center justify-center rounded-full shadow-sm \n                "+(l?"bg-indigo-600 text-white animate-pulse":"bg-blue-50 text-blue-600 hover:bg-blue-100"),title:l?"":"",children:Lt.jsx(Hy,{size:16})})}),Lt.jsxs("div",{className:"px-4 py-3 mb-1 shadow-sm w-full "+(d?"chat-bubble-user bg-blue-500 text-white rounded-[18px_18px_18px_4px] border border-blue-500":"chat-bubble-ai bg-white rounded-[18px_18px_4px_18px] border border-gray-200"),children:[Lt.jsxs("div",{className:"relative",children:[(()=>{const t=e.content||"";return t.startsWith("data:image/")||t.includes(".jpg")||t.includes(".png")||t.includes("/knowledge-base/images/")?Lt.jsx("img",{src:t,alt:"",className:"rounded-lg max-w-xs cursor-pointer",style:{maxHeight:"300px",objectFit:"contain"},onClick:()=>f(t)}):Lt.jsx("p",{className:d?"text-white":"text-gray-900",children:t})})(),o&&Lt.jsx("button",{onClick:()=>{i&&(r(i),u({title:"",description:""}),a(!1))},className:"absolute -top-2 -right-2 bg-blue-600 text-white p-1.5 rounded-full shadow-md hover:bg-blue-700 transition-colors",title:"",children:Lt.jsx(Zg,{size:14})})]}),(e.media&&e.media.length>0&&console.log(":",{messageId:e.id,mediaCount:e.media.length,mediaDetails:e.media.map((e,t)=>({index:t,type:e.type,urlPrefix:e.url.substring(0,50)+"...",urlLength:e.url.length,isBase64:e.url.startsWith("data:"),title:e.title,fileName:e.fileName}))}),Lt.jsx(Lt.Fragment,{children:e.media&&e.media.length>0&&Lt.jsxs("div",{className:"mt-3",children:[p&&e.media.length>0&&Lt.jsxs("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[Lt.jsxs("div",{className:"text-sm text-blue-700 font-medium mb-2",children:["  (",e.media.length,")"]}),Lt.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:e.media.map((t,n)=>Lt.jsx("div",{className:"relative",children:"image"===t.type&&Lt.jsxs("div",{className:"group cursor-pointer",children:[Lt.jsx("img",{src:t.url,alt:t.title||`${n+1}`,className:"w-full h-20 object-cover rounded border border-blue-300 shadow-sm group-hover:shadow-md transition-shadow",onClick:()=>f(t.url),onLoad:r=>{console.log(":",{messageId:e.id,mediaIndex:n,title:t.title,fileName:t.fileName})},onError:r=>{var i;console.error(":",{messageId:e.id,mediaIndex:n,url:t.url.substring(0,100)+"...",title:t.title});const s=r.target;s.onerror=null,s.style.display="none";const o=document.createElement("div");o.className="w-full h-20 bg-gray-100 border border-gray-300 rounded flex items-center justify-center",o.innerHTML=`\n                                <div class="text-center text-gray-500 text-xs">\n                                  <div class="mb-1"></div>\n                                  <div>${t.fileName||""}</div>\n                                </div>\n                              `,null==(i=s.parentNode)||i.insertBefore(o,s)}}),Lt.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-20 rounded",children:Lt.jsx("div",{className:"bg-white bg-opacity-80 p-1 rounded",children:Lt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Lt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),t.fileName&&Lt.jsx("div",{className:"text-xs text-gray-600 mt-1 truncate",children:t.fileName})]})},`${e.id}-guide-media-${n}`))})]}),(!p||0===e.media.length)&&e.media&&e.media.length>0&&Lt.jsx(Lt.Fragment,{children:e.media.map((t,n)=>Lt.jsxs("div",{className:"mt-2",children:["image"===t.type&&Lt.jsxs("div",{className:"relative",children:[Lt.jsx("img",{src:t.url,alt:"",className:"rounded-lg w-full max-w-xs cursor-pointer border border-blue-200 shadow-md",style:{maxHeight:"300px",objectFit:"contain"},onClick:()=>f(t.url),onLoad:r=>{console.log(":",{messageId:e.id,mediaIndex:n,width:r.target.naturalWidth,height:r.target.naturalHeight,urlType:t.url.startsWith("data:")?"base64":"url"})},onError:r=>{var i,s;console.warn(":",{messageId:e.id,mediaIndex:n,url:t.url.substring(0,100)+"...",isBase64:t.url.startsWith("data:"),error:r});const o=r.target;if(o.onerror=null,t.url.startsWith("data:image/")){o.style.display="none";const e=document.createElement("div");e.className="flex items-center justify-center bg-gray-100 border border-gray-300 rounded-lg p-4 max-w-xs",e.innerHTML='<span class="text-gray-500 text-sm"></span>',null==(i=o.parentNode)||i.insertBefore(e,o)}else if(t.url.includes("/api/")){o.style.display="none";const e=document.createElement("div");e.className="flex items-center justify-center bg-gray-100 border border-gray-300 rounded-lg p-4 max-w-xs",e.innerHTML='<span class="text-gray-500 text-sm"></span>',null==(s=o.parentNode)||s.insertBefore(e,o)}else o.src.includes("/placeholder-image.png")||(o.src="/placeholder-image.png")}}),Lt.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",onClick:()=>f(t.url),children:Lt.jsx("div",{className:"bg-blue-600 bg-opacity-70 p-2 rounded-full",children:Lt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Lt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})})]}),"video"===t.type&&Lt.jsxs("div",{className:"relative",children:[Lt.jsx("video",{src:t.url,controls:!0,className:"rounded-lg w-full max-w-xs border border-blue-200 shadow-md",style:{maxHeight:"300px"},onClick:e=>{e.stopPropagation()},onLoadedMetadata:r=>{console.log(":",{messageId:e.id,mediaIndex:n,duration:r.target.duration,urlType:t.url.startsWith("blob:")?"blob":"url"})},onError:r=>{console.error(":",{messageId:e.id,mediaIndex:n,url:t.url.substring(0,100)+"...",isBlob:t.url.startsWith("blob:")})}}),Lt.jsx("div",{className:"absolute top-2 right-2 flex items-center justify-center opacity-50 hover:opacity-100 transition-opacity",onClick:()=>f(t.url),children:Lt.jsx("div",{className:"bg-blue-600 bg-opacity-70 p-2 rounded-full",children:Lt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Lt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),Lt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]})]},`${e.id}-media-${n}`))})]})}))]}),Lt.jsx("span",{className:"text-xs "+(d?"text-blue-400":"text-gray-400"),children:h})]}),Lt.jsx("div",{children:Lt.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(d?"bg-blue-500":"bg-gray-500"),children:Lt.jsx("span",{className:"text-white text-sm",children:d?"":""})})})]})}const Fz=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("textarea",f({className:Ng("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t},i))});function Bz({onSendMessage:e,isLoading:t=!1,disabled:n=!1}){const[r,i]=Pt.useState(""),[s,o]=Pt.useState([]),{recordedText:a,selectedText:l,draftMessage:c,setDraftMessage:u}=cv(),d=function(){const[e,t]=Pt.useState(void 0);return Pt.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),n=()=>{t(window.innerWidth<768)};return e.addEventListener("change",n),t(window.innerWidth<768),()=>e.removeEventListener("change",n)},[]),{isMobile:!!e}}(),p=Pt.useRef(null),h=Pt.useRef(null);Pt.useEffect(()=>{l&&(i(l),d&&h.current?h.current.focus():p.current&&p.current.focus())},[l,d]);const f=e=>{i(e.target.value)},m=a=>T(this,null,function*(){if(a.preventDefault(),!r.trim()&&0===s.length)return;if(t||n)return;const l=r,c=[...s];i(""),o([]),yield e(l,c)}),v=()=>{window.dispatchEvent(new CustomEvent("open-camera"))},g=()=>{i(""),d&&h.current?h.current.focus():p.current&&p.current.focus()};return Lt.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-t border-blue-200 p-2 message-input-container",children:Lt.jsxs("form",{onSubmit:m,className:"flex items-center",children:[Lt.jsxs("div",{className:"flex-1 flex items-center bg-white border border-blue-200 rounded-full px-3 py-1 shadow-inner",children:[d?Lt.jsxs("div",{className:"flex-1 relative h-[48px]",children:[" ",Lt.jsx(Fz,{ref:h,className:"absolute inset-0 bg-transparent border-none focus-visible:ring-0 focus-visible:ring-offset-0 resize-none py-1 overflow-y-auto text-lg",placeholder:"...",value:r,onChange:f,disabled:t,rows:1,style:{lineHeight:"1.2"},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m(e))}}),r.trim()&&Lt.jsx("button",{type:"button",onClick:g,className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:Lt.jsx(Ky,{size:16})})]}):Lt.jsxs("div",{className:"flex-1 h-[48px] flex items-center relative",children:[" ",Lt.jsx(ML,{ref:p,type:"text",className:"w-full h-full bg-transparent border-none focus-visible:ring-0 focus-visible:ring-offset-0 text-lg",placeholder:"...",value:r,onChange:f,disabled:t}),r.trim()&&Lt.jsx("button",{type:"button",onClick:g,className:"absolute right-1 text-gray-400 hover:text-gray-600",children:Lt.jsx(Ky,{size:16})})]}),Lt.jsx(Rg,{type:"submit",disabled:t||!r.trim(),size:"icon",variant:"ghost",className:"ml-1 p-1 min-w-[28px] min-h-[28px] h-7 w-7 bg-gradient-to-r from-sky-100 to-blue-100 hover:from-sky-200 hover:to-blue-200 rounded-full border border-blue-300",children:Lt.jsx(Ny,{className:"h-4 w-4 text-blue-600"})})]}),Lt.jsxs("div",{className:"md:hidden flex flex-col items-center ml-2",children:[Lt.jsx("span",{className:"text-xs font-medium text-indigo-700 mb-0.5",children:""}),Lt.jsx(Rg,{type:"button",onClick:v,size:"icon",variant:"ghost",className:"p-2 h-10 w-10 rounded-full bg-gradient-to-r from-indigo-100 to-cyan-100 hover:from-indigo-200 hover:to-cyan-200 border border-indigo-300",children:Lt.jsx(Bg,{className:"h-5 w-5 text-indigo-600"})})]}),Lt.jsxs("div",{className:"hidden md:flex md:flex-col md:items-center md:ml-2",children:[Lt.jsx("span",{className:"text-xs font-medium text-indigo-700 mb-0.5",children:""}),Lt.jsx(Rg,{type:"button",onClick:v,size:"icon",variant:"ghost",className:"p-2 h-10 w-10 rounded-full bg-gradient-to-r from-indigo-100 to-cyan-100 hover:from-indigo-200 hover:to-cyan-200 border border-indigo-300",children:Lt.jsx(Bg,{className:"h-5 w-5 text-indigo-600"})})]})]})})}Fz.displayName="Textarea";const Uz=gw,Wz=yw,$z=bw,Hz=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(xw,f({ref:t,className:Ng("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},i))});Hz.displayName=xw.displayName;const Vz=Pt.forwardRef((e,t)=>{var n=e,{className:r,children:i,showCloseButton:s=!0}=n,o=v(n,["className","children","showCloseButton"]);return Lt.jsxs($z,{children:[Lt.jsx(Hz,{}),Lt.jsxs(ww,m(f({ref:t,className:Ng("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r)},o),{children:[i,s&&Lt.jsxs(Ew,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Lt.jsx(Ky,{className:"h-4 w-4"}),Lt.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});Vz.displayName=ww.displayName;const qz=e=>{var t=e,{className:n}=t,r=v(t,["className"]);return Lt.jsx("div",f({className:Ng("flex flex-col space-y-1.5 text-center sm:text-left",n)},r))};qz.displayName="DialogHeader";const Gz=e=>{var t=e,{className:n}=t,r=v(t,["className"]);return Lt.jsx("div",f({className:Ng("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n)},r))};Gz.displayName="DialogFooter";const Kz=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(Sw,f({ref:t,className:Ng("text-lg font-semibold leading-none tracking-tight",r)},i))});Kz.displayName=Sw.displayName;const Jz=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(Cw,f({ref:t,className:Ng("text-sm text-muted-foreground",r)},i))});function Yz(e){const t=Pt.useRef({value:e,previous:e});return Pt.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function Zz(e){const[t,n]=Pt.useState(void 0);return Xy(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let i,s;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,s=t.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}Jz.displayName=Cw.displayName;var Qz="Switch",[Xz]=Zy(Qz),[eF,tF]=Xz(Qz),nF=Pt.forwardRef((e,t)=>{const n=e,{__scopeSwitch:r,name:i,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d}=n,p=v(n,["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]),[h,g]=Pt.useState(null),y=mv(t,e=>g(e)),b=Pt.useRef(!1),x=!h||d||!!h.closest("form"),[w,S]=ib({prop:s,defaultProp:null!=o&&o,onChange:u,caller:Qz});return Lt.jsxs(eF,{scope:r,checked:w,disabled:l,children:[Lt.jsx(cb.button,m(f({type:"button",role:"switch","aria-checked":w,"aria-required":a,"data-state":oF(w),"data-disabled":l?"":void 0,disabled:l,value:c},p),{ref:y,onClick:Yy(e.onClick,e=>{S(e=>!e),x&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})),x&&Lt.jsx(sF,{control:h,bubbles:!b.current,name:i,value:c,checked:w,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});nF.displayName=Qz;var rF="SwitchThumb",iF=Pt.forwardRef((e,t)=>{const n=e,{__scopeSwitch:r}=n,i=v(n,["__scopeSwitch"]),s=tF(rF,r);return Lt.jsx(cb.span,m(f({"data-state":oF(s.checked),"data-disabled":s.disabled?"":void 0},i),{ref:t}))});iF.displayName=rF;var sF=Pt.forwardRef((e,t)=>{var n=e,{__scopeSwitch:r,control:i,checked:s,bubbles:o=!0}=n,a=v(n,["__scopeSwitch","control","checked","bubbles"]);const l=Pt.useRef(null),c=mv(l,t),u=Yz(s),d=Zz(i);return Pt.useEffect(()=>{const e=l.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(u!==s&&n){const t=new Event("click",{bubbles:o});n.call(e,s),e.dispatchEvent(t)}},[u,s,o]),Lt.jsx("input",m(f({type:"checkbox","aria-hidden":!0,defaultChecked:s},a),{tabIndex:-1,ref:c,style:m(f(f({},a.style),d),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});function oF(e){return e?"checked":"unchecked"}sF.displayName="SwitchBubbleInput";var aF=nF,lF=iF;const cF=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(aF,m(f({className:Ng("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r)},i),{ref:t,children:Lt.jsx(lF,{className:Ng("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}))});function uF(){const[e,t]=Pt.useState(!1),[n,r]=Pt.useState(!1),[i,s]=Pt.useState(!1),[o,a]=Pt.useState(null),[l,c]=Pt.useState(null),[u]=Pt.useState(!0),d=Pt.useRef(null),p=Pt.useRef(null),h=Pt.useRef([]),{captureImage:f,sendMessage:m}=cv(),{toast:v}=nv(),g=function(){const[e,t]=Pt.useState(window.innerWidth>window.innerHeight?"landscape":"portrait");return Pt.useEffect(()=>{const e=()=>{t(window.innerWidth>window.innerHeight?"landscape":"portrait")};return window.addEventListener("resize",e),window.addEventListener("orientationchange",e),e(),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),e}();Pt.useEffect(()=>{const e=e=>{console.log(" CameraModal: open-camera ",e),t(!0)};return console.log(" CameraModal: open-camera "),window.addEventListener("open-camera",e),()=>{console.log(" CameraModal: open-camera "),window.removeEventListener("open-camera",e)}},[]),Pt.useEffect(()=>{e?(()=>{T(this,null,function*(){try{const e=yield navigator.permissions.query({name:"camera"});if(console.log(" :",e.state),"denied"===e.state)return void v({title:"",description:"",variant:"destructive"})}catch(yie){console.log(" API:",yie)}setTimeout(()=>{y()},300)})})():b()},[e]);const y=()=>T(this,null,function*(){try{if(console.log(" "),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("");const e="https:"===location.protocol||"localhost"===location.hostname;if(console.log(" :",e,":",location.protocol,":",location.hostname),!e)throw new Error("HTTPS");l&&(console.log(" "),l.getTracks().forEach(e=>e.stop())),console.log(" :",{facingMode:u?"environment":"user",videoMode:n,constraints:{video:{facingMode:u?"environment":"user",width:{ideal:1280},height:{ideal:720}},audio:n}});const t={video:{facingMode:u?"environment":"user",width:{ideal:1280},height:{ideal:720}},audio:n};console.log(" getUserMedia");const r=yield navigator.mediaDevices.getUserMedia(t);console.log(" getUserMedia:",{streamActive:r.active,videoTracks:r.getVideoTracks().length,audioTracks:r.getAudioTracks().length}),c(r),d.current&&(console.log(" "),d.current.srcObject=r,d.current.onloadedmetadata=()=>{var e;console.log(" "),null==(e=d.current)||e.play().catch(e=>{console.error(" :",e)})})}catch(e){console.error(" :",e);let t="";e instanceof Error&&(t="NotAllowedError"===e.name?"":"NotFoundError"===e.name?"":"NotReadableError"===e.name?"":"OverconstrainedError"===e.name?"":"SecurityError"===e.name?"HTTPS":`: ${e.message}`),v({title:"",description:t,variant:"destructive"})}}),b=()=>{l&&(l.getTracks().forEach(e=>e.stop()),c(null)),i&&w(),a(null)},x=()=>{if(h.current=[],l){const e=new MediaRecorder(l);p.current=e,e.ondataavailable=e=>{e.data.size>0&&h.current.push(e.data)},e.onstop=()=>{const e=new Blob(h.current,{type:"video/mp4"}),t=URL.createObjectURL(e);a(t),s(!1)},e.start(),s(!0)}},w=()=>{p.current&&i&&p.current.stop()};return Lt.jsx(Uz,{open:e,onOpenChange:t,children:Lt.jsxs(Vz,{className:("landscape"===g?"max-w-3xl":"max-w-md")+" p-0 overflow-hidden bg-blue-50 border border-blue-200 camera-modal","aria-describedby":"camera-modal-desc",children:[Lt.jsx(Kz,{className:"sr-only",children:""}),Lt.jsx("div",{id:"camera-modal-desc",className:"sr-only",children:""}),Lt.jsxs(qz,{className:"p-4 border-b border-blue-200 flex flex-row justify-between items-center bg-blue-100",children:[Lt.jsx(Kz,{className:"text-indigo-600 text-lg font-bold",children:""}),Lt.jsxs("div",{className:"flex items-center space-x-4",children:[Lt.jsxs("div",{className:"flex items-center bg-white px-2 py-1 rounded-full",children:[Lt.jsx(Oy,{className:"h-6 w-6 mr-2 text-indigo-600"}),Lt.jsx(cF,{id:"camera-mode",checked:n,onCheckedChange:()=>{i&&w(),r(!n),a(null),b(),setTimeout(()=>y(),300)}}),Lt.jsx($y,{className:"h-6 w-6 ml-2 text-indigo-600"})]}),Lt.jsx(Rg,{variant:"ghost",size:"icon",className:"p-2 rounded-full hover:bg-blue-200 text-blue-700",onClick:()=>t(!1),children:Lt.jsx(Ky,{})})]})]}),Lt.jsxs("div",{className:"relative bg-black",children:[o?n?Lt.jsx("video",{src:o,controls:!0,className:`w-full ${"landscape"===g?"h-64":"h-80"} bg-neutral-800 object-contain`,onClick:()=>window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:o}}))}):Lt.jsx("img",{src:o,alt:"Captured",className:`w-full ${"landscape"===g?"h-64":"h-80"} bg-neutral-800 object-contain`,onClick:()=>window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:o}}))}):Lt.jsx("video",{ref:d,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full ${"landscape"===g?"h-64":"h-80"} bg-neutral-800 object-cover`}),!o&&Lt.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center space-x-4",children:n?Lt.jsx(Lt.Fragment,{children:i?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Rg,{className:"bg-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg",variant:"outline",size:"icon",onClick:w,children:Lt.jsx(xy,{className:"h-6 w-6 text-blue-600"})}),Lt.jsx(Rg,{className:"bg-red-500 rounded-full w-14 h-14 flex items-center justify-center shadow-lg",variant:"outline",size:"icon",onClick:w,children:Lt.jsx(Ay,{className:"h-6 w-6 text-white"})})]}):Lt.jsx(Rg,{className:"bg-blue-600 rounded-full w-16 h-16 flex items-center justify-center shadow-lg border-2 border-white",variant:"outline",size:"icon",onClick:x,children:Lt.jsx(Jg,{className:"h-8 w-8 text-white"})})}):Lt.jsx(Rg,{className:"bg-blue-600 rounded-full w-16 h-16 flex items-center justify-center shadow-lg border-2 border-white",variant:"outline",size:"icon",onClick:()=>{if(d.current)if(n)i?w():x();else{const t=document.createElement("canvas"),n=d.current,r=874,i=1240;let{videoWidth:s,videoHeight:o}=n;if(s>r||o>i){const e=s/o;s>o?(s=r,o=r/e):(o=i,s=i*e)}t.width=s,t.height=o;const l=t.getContext("2d");if(l&&n){l.drawImage(n,0,0,s,o);try{const e=t.toDataURL("image/jpeg",.4);if(!e.startsWith("data:image/"))return console.error("Base64:",e.substring(0,50)),void console.error("canvas.toDataURL():",typeof e,e.length);console.log(" Base64:",{format:"image/jpeg",quality:.4,resolution:"150dpi",originalSize:`${n.videoWidth}x${n.videoHeight}`,compressedSize:`${s}x${o}`,maxResolution:`${r}x${i}`,dataLength:e.length,dataSizeMB:(e.length/1024/1024).toFixed(2),isValidBase64:e.startsWith("data:image/jpeg;base64,"),mimeType:e.split(";")[0],preview:e.substring(0,50)+"..."}),a(e)}catch(e){console.error("canvas.toDataURL():",e)}}}},children:Lt.jsx(Jg,{className:"h-12 w-12 text-white"})})})]}),Lt.jsx("div",{className:"p-4 bg-blue-50",children:o?Lt.jsx(Rg,{className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium text-lg",onClick:()=>T(this,null,function*(){if(o)try{console.log("");let e=o;if(!o.startsWith("data:image/")){if(console.log("Base64:",typeof o),"object"==typeof o)return void console.error("Base64");e=`data:image/jpeg;base64,${o}`}console.log(":",{isBase64:e.startsWith("data:image/"),urlLength:e.length,mimeType:e.split(";")[0],preview:e.substring(0,50)+"..."}),yield m(e),t(!1),a(null)}catch(e){console.error(":",e)}}),children:""}):Lt.jsx("div",{className:"flex items-center justify-between",children:Lt.jsx("p",{className:"text-sm text-blue-700 font-medium",children:n?i?"... ":" ":" "})})})]})})}cF.displayName=aF.displayName;var dF=Pt.createContext(void 0);function pF(e){const t=Pt.useContext(dF);return e||t||"ltr"}var hF="rovingFocusGroup.onEntryFocus",fF={bubbles:!1,cancelable:!0},mF="RovingFocusGroup",[vF,gF,yF]=Lw(mF),[bF,xF]=Zy(mF,[yF]),[wF,SF]=bF(mF),CF=Pt.forwardRef((e,t)=>Lt.jsx(vF.Provider,{scope:e.__scopeRovingFocusGroup,children:Lt.jsx(vF.Slot,{scope:e.__scopeRovingFocusGroup,children:Lt.jsx(EF,m(f({},e),{ref:t}))})}));CF.displayName=mF;var EF=Pt.forwardRef((e,t)=>{const n=e,{__scopeRovingFocusGroup:r,orientation:i,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1}=n,p=v(n,["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"]),h=Pt.useRef(null),g=mv(t,h),y=pF(o),[b,x]=ib({prop:a,defaultProp:null!=l?l:null,onChange:c,caller:mF}),[w,S]=Pt.useState(!1),C=db(u),E=gF(r),T=Pt.useRef(!1),[N,P]=Pt.useState(0);return Pt.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(hF,C),()=>e.removeEventListener(hF,C)},[C]),Lt.jsx(wF,{scope:r,orientation:i,dir:y,loop:s,currentTabStopId:b,onItemFocus:Pt.useCallback(e=>x(e),[x]),onItemShiftTab:Pt.useCallback(()=>S(!0),[]),onFocusableItemAdd:Pt.useCallback(()=>P(e=>e+1),[]),onFocusableItemRemove:Pt.useCallback(()=>P(e=>e-1),[]),children:Lt.jsx(cb.div,m(f({tabIndex:w||0===N?-1:0,"data-orientation":i},p),{ref:g,style:f({outline:"none"},e.style),onMouseDown:Yy(e.onMouseDown,()=>{T.current=!0}),onFocus:Yy(e.onFocus,e=>{const t=!T.current;if(e.target===e.currentTarget&&t&&!w){const t=new CustomEvent(hF,fF);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=E().filter(e=>e.focusable);RF([e.find(e=>e.active),e.find(e=>e.id===b),...e].filter(Boolean).map(e=>e.ref.current),d)}}T.current=!1}),onBlur:Yy(e.onBlur,()=>S(!1))}))})}),TF="RovingFocusGroupItem",NF=Pt.forwardRef((e,t)=>{const n=e,{__scopeRovingFocusGroup:r,focusable:i=!0,active:s=!1,tabStopId:o,children:a}=n,l=v(n,["__scopeRovingFocusGroup","focusable","active","tabStopId","children"]),c=nb(),u=o||c,d=SF(TF,r),p=d.currentTabStopId===u,h=gF(r),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:b}=d;return Pt.useEffect(()=>{if(i)return g(),()=>y()},[i,g,y]),Lt.jsx(vF.ItemSlot,{scope:r,id:u,focusable:i,active:s,children:Lt.jsx(cb.span,m(f({tabIndex:p?0:-1,"data-orientation":d.orientation},l),{ref:t,onMouseDown:Yy(e.onMouseDown,e=>{i?d.onItemFocus(u):e.preventDefault()}),onFocus:Yy(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Yy(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:PF[r]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const s=i.indexOf(e.currentTarget);i=d.loop?(r=s+1,(n=i).map((e,t)=>n[(r+t)%n.length])):i.slice(s+1)}setTimeout(()=>RF(i))}var n,r}),children:"function"==typeof a?a({isCurrentTabStop:p,hasTabStop:null!=b}):a}))})});NF.displayName=TF;var PF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function RF(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var IF=CF,kF=NF,jF="Tabs",[_F]=Zy(jF,[xF]),AF=xF(),[OF,DF]=_F(jF),MF=Pt.forwardRef((e,t)=>{const n=e,{__scopeTabs:r,value:i,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic"}=n,u=v(n,["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"]),d=pF(l),[p,h]=ib({prop:i,onChange:s,defaultProp:null!=o?o:"",caller:jF});return Lt.jsx(OF,{scope:r,baseId:nb(),value:p,onValueChange:h,orientation:a,dir:d,activationMode:c,children:Lt.jsx(cb.div,m(f({dir:d,"data-orientation":a},u),{ref:t}))})});MF.displayName=jF;var LF="TabsList",zF=Pt.forwardRef((e,t)=>{const n=e,{__scopeTabs:r,loop:i=!0}=n,s=v(n,["__scopeTabs","loop"]),o=DF(LF,r),a=AF(r);return Lt.jsx(IF,m(f({asChild:!0},a),{orientation:o.orientation,dir:o.dir,loop:i,children:Lt.jsx(cb.div,m(f({role:"tablist","aria-orientation":o.orientation},s),{ref:t}))}))});zF.displayName=LF;var FF="TabsTrigger",BF=Pt.forwardRef((e,t)=>{const n=e,{__scopeTabs:r,value:i,disabled:s=!1}=n,o=v(n,["__scopeTabs","value","disabled"]),a=DF(FF,r),l=AF(r),c=$F(a.baseId,i),u=HF(a.baseId,i),d=i===a.value;return Lt.jsx(kF,m(f({asChild:!0},l),{focusable:!s,active:d,children:Lt.jsx(cb.button,m(f({type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c},o),{ref:t,onMouseDown:Yy(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():a.onValueChange(i)}),onKeyDown:Yy(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&a.onValueChange(i)}),onFocus:Yy(e.onFocus,()=>{const e="manual"!==a.activationMode;d||s||!e||a.onValueChange(i)})}))}))});BF.displayName=FF;var UF="TabsContent",WF=Pt.forwardRef((e,t)=>{const n=e,{__scopeTabs:r,value:i,forceMount:s,children:o}=n,a=v(n,["__scopeTabs","value","forceMount","children"]),l=DF(UF,r),c=$F(l.baseId,i),u=HF(l.baseId,i),d=i===l.value,p=Pt.useRef(d);return Pt.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),Lt.jsx(Ob,{present:s||d,children:({present:n})=>Lt.jsx(cb.div,m(f({"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!n,id:u,tabIndex:0},a),{ref:t,style:m(f({},e.style),{animationDuration:p.current?"0s":void 0}),children:n&&o}))})});function $F(e,t){return`${e}-trigger-${t}`}function HF(e,t){return`${e}-content-${t}`}WF.displayName=UF;var VF=zF,qF=BF,GF=WF;const KF=MF,JF=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(VF,f({ref:t,className:Ng("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r)},i))});JF.displayName=VF.displayName;const YF=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(qF,f({ref:t,className:Ng("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r)},i))});YF.displayName=qF.displayName;const ZF=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(GF,f({ref:t,className:Ng("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r)},i))});function QF(e){if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;if(e.includes("/knowledge-base/images/"))return e;if(e.includes("/uploads/"))return e.replace("/uploads/","/knowledge-base/");if(e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".svg")){const t=e.split("/").pop();if(t)return t.endsWith(".svg")?`/knowledge-base/images/${t.replace(".svg",".png")}`:`/knowledge-base/images/${t}`}return e}function XF(){var e,t;const[n,r]=Pt.useState(!1),[i,s]=Pt.useState(""),[o,a]=Pt.useState(""),[l,c]=Pt.useState(""),[u,d]=Pt.useState([]),[p,h]=Pt.useState(0),[f,m]=Pt.useState(null),[v,g]=Pt.useState(!1),[y,b]=Pt.useState(""),[x,w]=Pt.useState(""),S=e=>T(this,null,function*(){try{g(!0);const t=yield fetch(e);if(!t.ok)throw new Error("Metadata fetch failed");const n=yield t.json();m(n)}catch(t){console.error("Failed to load metadata:",t),m(null)}finally{g(!1)}}),C=e=>{if(!u.length)return;let t;t="next"===e?(p+1)%u.length:(p-1+u.length)%u.length,h(t);const n=u[t];s(n),a("")};Pt.useEffect(()=>{const e=e=>{const t=e;if(t.detail){if(t.detail.url&&s(t.detail.url),t.detail.pngFallbackUrl?a(t.detail.pngFallbackUrl):a(""),t.detail.title?b(t.detail.title):b(""),t.detail.content?w(t.detail.content):w(""),t.detail.metadata_json?(c(t.detail.metadata_json),S(t.detail.metadata_json)):(c(""),m(null)),t.detail.all_slides&&Array.isArray(t.detail.all_slides)){d(t.detail.all_slides);const e=t.detail.all_slides.findIndex(e=>e===t.detail.url);h(e>=0?e:0)}else d([]),h(0);r(!0)}};return window.addEventListener("preview-image",e),()=>{window.removeEventListener("preview-image",e)}},[]);const E=(()=>{if(!f||!f.slides)return null;const e=p+1;return f.slides.find(t=>t.===e)})();return Lt.jsx(Uz,{open:n,onOpenChange:r,children:Lt.jsxs(Vz,{className:"max-w-5xl bg-black bg-opacity-90 border border-blue-400 flex flex-col items-center justify-center p-0 rounded-xl","aria-labelledby":"dialog-title","aria-describedby":"dialog-description image-preview-description",children:[Lt.jsxs("div",{className:"sr-only",children:[Lt.jsx("h2",{id:"dialog-title",children:(null==(e=null==f?void 0:f.metadata)?void 0:e.)||y}),Lt.jsx("p",{id:"dialog-description",children:""}),Lt.jsx("p",{id:"image-preview-description",children:""})]}),Lt.jsxs("div",{className:"w-full flex justify-between items-center p-2 bg-blue-700 text-white",children:[Lt.jsxs("h3",{className:"text-sm font-medium ml-2",children:[(null==(t=null==f?void 0:f.metadata)?void 0:t.)||y,u.length>1&&` -  ${p+1}/${u.length}`]}),Lt.jsx("div",{className:"flex items-center",children:Lt.jsx(Rg,{className:"text-white hover:bg-blue-600 rounded-full",variant:"ghost",size:"icon",onClick:()=>r(!1),children:Lt.jsx(Ky,{className:"h-5 w-5"})})})]}),Lt.jsxs("div",{className:"relative w-full max-h-[70vh] flex items-center justify-center p-2",children:[u.length>1&&Lt.jsx(Rg,{className:"absolute left-2 z-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full opacity-75 hover:opacity-100",size:"icon",onClick:()=>C("prev"),children:Lt.jsx($g,{className:"h-5 w-5"})}),Lt.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-0 bg-gray-50",children:Lt.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-blue-600 border-t-transparent animate-spin"})}),Lt.jsx("img",{src:QF(i||""),alt:(null==E?void 0:E.)||y||"",className:"max-w-full max-h-[70vh] object-contain rounded-lg border border-blue-500 z-10 relative",loading:"eager",decoding:"async",onLoad:e=>{const t=e.currentTarget;t.classList.add("loaded");const n=t.parentElement;n&&n.querySelectorAll(".animate-spin").forEach(e=>{e.parentElement&&(e.parentElement.style.display="none")})},onError:e=>{const t=e.currentTarget,n=t.src||"";console.log(":",n);try{if(o&&""!==o.trim())return console.log("URL:",o),void(t.src=QF(o));if(n.endsWith(".svg")){console.log("SVG->PNG");const e=n.replace(".svg",".png");return void(t.src=e)}if(n.endsWith(".jpeg")||n.endsWith(".jpg")){console.log("JPEG->PNG");const e=n.replace(/\.(jpeg|jpg)$/,".png");return void(t.src=e)}if(!n.includes("/knowledge-base/")){const e=n.split("/").pop();if(e)return console.log("knowledge-base"),void(t.src=`/knowledge-base/images/${e}`)}if(u.length>1){const e=(p+1)%u.length;return console.log(`(${e})`),void C("next")}console.log("");const e=t.parentElement;if(e&&(t.style.opacity="0.2",!e.querySelector(".error-message"))){const t=document.createElement("div");t.className="error-message absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 text-white p-4 rounded-lg z-20";const r=document.createElement("p");r.className="text-xl mb-2",r.textContent="";const i=document.createElement("p");i.className="text-sm",i.textContent=n.split("/").pop()||"",t.appendChild(r),t.appendChild(i),e.appendChild(t)}}catch(r){console.error(":",r)}}}),u.length>1&&Lt.jsx(Rg,{className:"absolute right-2 z-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full opacity-75 hover:opacity-100",size:"icon",onClick:()=>C("next"),children:Lt.jsx(Hg,{className:"h-5 w-5"})})]}),!1,u.length>1&&Lt.jsx("div",{className:"w-full px-2 py-3 border-t border-blue-500 overflow-x-auto flex bg-gray-800",children:u.map((e,t)=>Lt.jsx("div",{className:"flex-shrink-0 mx-1 cursor-pointer transition-all "+(t===p?"border-2 border-blue-500 scale-105":"border border-gray-600 hover:border-blue-400"),onClick:()=>{h(t),s(e),a("")},children:Lt.jsxs("div",{className:"relative h-16 w-24",children:[Lt.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-700 z-0",children:Lt.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-blue-500 border-t-transparent animate-spin"})}),Lt.jsx("img",{src:QF(e),alt:` ${t+1}`,className:"h-16 w-24 object-cover relative z-10",loading:"eager",decoding:"async",onLoad:e=>{const t=e.currentTarget.parentElement;t&&t.querySelectorAll(".animate-spin").forEach(e=>{e.parentElement&&(e.parentElement.style.display="none")})},onError:e=>{console.log(`(${t})`);const n=e.currentTarget;n.style.opacity="0.3";const r=n.parentElement;if(r){const e=document.createElement("div");e.className="absolute inset-0 flex items-center justify-center z-20 bg-black bg-opacity-50 text-white text-xs",e.textContent="",r.appendChild(e)}}})]})},t))})]})})}function eB({guideId:e,onExit:t,isPreview:n=!1,onSendToChat:r,backButtonText:i=""}){const[s,o]=Pt.useState(null),[a,l]=Pt.useState(0),[c,u]=Pt.useState(!0),[d,p]=Pt.useState(""),[h,f]=Pt.useState(null),[m,v]=Pt.useState([]),[g,y]=Pt.useState(!1),[b,x]=Pt.useState(!1);Pt.useEffect(()=>{e&&(()=>{T(this,null,function*(){try{u(!0),console.log(" :",e);const t=Date.now(),n=`?ts=${t}&r=${Math.random().toString(36).substring(2)}`,{buildApiUrl:r}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),i=r(`/emergency-flow/${e}${n}`);console.log(" API URL:",i);const s=yield fetch(i,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate, max-age=0",Pragma:"no-cache",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","X-Requested-With":"XMLHttpRequest"}});if(console.log(" :",s.status,s.statusText),!s.ok){const e=yield s.text();throw console.error(" API :",e),new Error(`Failed to fetch guide data: ${s.status} - ${e}`)}const a=yield s.json();console.log(" :",a);const l=a.success&&a.data?a.data:a;if(console.log(" :",l),o(l),l.steps&&l.steps.length>0){const e=l.steps[0];v([{stepId:e.id,title:e.title,message:e.message,type:e.type,imageUrl:e.imageUrl,images:e.images,timestamp:new Date}])}}catch(yie){console.error("Guide data fetch error:",yie),p("")}finally{u(!1)}})})()},[e]);const w=e=>{if(s)if(e){const t=s.steps.findIndex(t=>t.id===e);if(-1!==t){l(t),f(null);const e=s.steps[t],n={stepId:e.id,title:e.title,message:e.message,type:e.type,imageUrl:e.imageUrl,images:e.images,selectedCondition:h,timestamp:new Date};v(e=>[...e,n])}}else if(a<s.steps.length-1){const e=a+1;l(e),f(null);const t=s.steps[e],n={stepId:t.id,title:t.title,message:t.message,type:t.type,imageUrl:t.imageUrl,images:t.images,timestamp:new Date};v(e=>[...e,n])}},S=()=>{if(!s||0===m.length)return;const e={title:s.title,description:s.description,executedSteps:m.filter(e=>"start"!==e.type&&"end"!==e.type),totalSteps:m.length,completedAt:new Date,isPartial:!g};window.dispatchEvent(new CustomEvent("emergency-guide-completed",{detail:e})),r&&r(),g?t():(console.log(":",e),x(!0),setTimeout(()=>{x(!1)},3e3))};if(c)return Lt.jsx(gL,{className:"w-full max-w-4xl mx-auto",children:Lt.jsx(wL,{className:"flex justify-center items-center py-12",children:Lt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})});if(d||!s)return Lt.jsxs(gL,{className:"w-full max-w-4xl mx-auto",children:[Lt.jsx(yL,{children:Lt.jsx(bL,{className:"text-red-600",children:""})}),Lt.jsxs(wL,{children:[Lt.jsx("p",{className:"mb-4",children:d||""}),Lt.jsx(Rg,{onClick:t,children:""})]})]});const C=s&&s.steps&&0!==s.steps.length&&s.steps[a]||null,E=a===s.steps.length-1,N=0===a;return C?Lt.jsxs(gL,{className:"w-full max-w-4xl mx-auto",children:[Lt.jsx(yL,{children:Lt.jsxs("div",{className:"flex items-start justify-between",children:[Lt.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[Lt.jsxs(Rg,{variant:"ghost",size:"sm",onClick:t,className:"flex-shrink-0",children:[Lt.jsx(Og,{className:"h-4 w-4"}),i]}),Lt.jsxs(bL,{className:"text-xl break-words leading-tight",children:[s.title,n&&" ()"]})]}),Lt.jsxs("div",{className:"text-sm text-gray-500 flex-shrink-0 ml-4",children:[" ",a+1," / ",s.steps.length]})]})}),Lt.jsx(wL,{children:Lt.jsxs("div",{className:"space-y-6",children:[Lt.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[Lt.jsx("h3",{className:"font-semibold text-blue-900 mb-2 text-lg",children:C.title}),C.description&&Lt.jsx("p",{className:"text-blue-800 text-sm mb-3",children:C.description}),Lt.jsx("div",{className:"text-blue-800 whitespace-pre-line",children:C.message})]}),"decision"===C.type&&C.conditions&&C.conditions.length>0&&Lt.jsxs("div",{className:"space-y-3",children:[Lt.jsx("h4",{className:"font-medium text-gray-900",children:n?":":""}),n?Lt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:C.conditions.map((e,t)=>Lt.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg bg-gray-50",children:[Lt.jsx("div",{className:"font-medium text-sm",children:e.label}),Lt.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[":"," ",(()=>{const t=s.steps.find(t=>t.id===e.nextId),n=s.steps.findIndex(t=>t.id===e.nextId);return t?`${t.title||` ${n+1}`}`:""})()]})]},t))}):Lt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:C.conditions.map((e,t)=>Lt.jsx(Rg,{variant:"outline",className:"h-auto p-4 text-left justify-start",onClick:()=>(e=>{f(e.nextId),w(e.nextId)})(e),children:Lt.jsx("div",{className:"flex flex-col items-start",children:Lt.jsx("span",{className:"font-medium",children:e.label})})},t))})]}),C.images&&C.images.length>0?Lt.jsx("div",{className:"mt-4",children:Lt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.images.map((e,t)=>Lt.jsx("div",{className:"relative",children:Lt.jsx("img",{src:Cg(e.url),alt:`${C.title} - ${e.fileName||""}`,className:"w-full h-auto rounded-lg shadow-md",crossOrigin:"anonymous",onError:n=>{console.error("  (emergency-guide-display):",{imageUrl:e.url,builtUrl:Cg(e.url),fileName:e.fileName,stepTitle:C.title,index:t}),Tg(n,e.url)},onLoad:()=>{console.log("  (emergency-guide-display):",{imageUrl:e.url,builtUrl:Cg(e.url),fileName:e.fileName,stepTitle:C.title,index:t})}})},t))})}):C.imageUrl?Lt.jsx("div",{className:"mt-4",children:Lt.jsx("img",{src:Cg(C.imageUrl),alt:C.title,className:"w-full h-auto rounded-lg shadow-md",crossOrigin:"anonymous",onError:e=>{console.error("  (legacy imageUrl):",{imageUrl:C.imageUrl,builtUrl:Cg(C.imageUrl),stepTitle:C.title}),Tg(e,C.imageUrl)},onLoad:()=>{console.log("  (legacy imageUrl):",{imageUrl:C.imageUrl,builtUrl:Cg(C.imageUrl),stepTitle:C.title})}})}):Lt.jsxs("div",{className:"mt-4 text-center py-4 bg-gray-50 rounded-lg",children:[Lt.jsx(uy,{className:"mx-auto h-8 w-8 text-gray-400"}),Lt.jsx("p",{className:"mt-2 text-sm text-gray-600",children:""})]}),Lt.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[Lt.jsxs(Rg,{variant:"outline",onClick:()=>{a>0&&(l(a-1),f(null),v(e=>e.slice(0,-1)))},disabled:N,children:[Lt.jsx(Og,{className:"h-4 w-4 mr-2"}),""]}),Lt.jsxs("div",{className:"flex gap-2",children:[a>=1&&!g&&!n&&Lt.jsxs(Rg,{onClick:S,variant:"outline",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-300",children:[Lt.jsx(Ny,{className:"h-4 w-4 mr-2"}),""]}),(n||"decision"!==C.type)&&Lt.jsx(Rg,{onClick:E?()=>{y(!0)}:()=>w(),className:"flex items-center gap-2",children:E?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Gg,{className:"h-4 w-4"}),""]}):Lt.jsxs(Lt.Fragment,{children:["",Lt.jsx(Dg,{className:"h-4 w-4"})]})})]})]}),g&&!n&&Lt.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(Gg,{className:"h-5 w-5 text-green-600"}),Lt.jsx("span",{className:"text-green-800 font-medium",children:""})]}),Lt.jsxs(Rg,{onClick:S,className:"bg-green-600 hover:bg-green-700 text-white",children:[Lt.jsx(Ny,{className:"h-4 w-4 mr-2"}),""]})]}),Lt.jsx("p",{className:"text-green-700 text-sm mt-2",children:""})]}),g&&n&&Lt.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(Gg,{className:"h-5 w-5 text-blue-600"}),Lt.jsx("span",{className:"text-blue-800 font-medium",children:""})]}),Lt.jsx("p",{className:"text-blue-700 text-sm mt-2",children:""})]}),b&&!n&&Lt.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg animate-pulse",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(Gg,{className:"h-5 w-5 text-blue-600"}),Lt.jsx("span",{className:"text-blue-800 font-medium",children:""})]}),Lt.jsx("p",{className:"text-blue-700 text-sm mt-2",children:""})]})]})},C.id)]}):Lt.jsx(gL,{className:"w-full max-w-4xl mx-auto",children:Lt.jsxs(wL,{children:[Lt.jsx("p",{className:"text-center py-8",children:""}),Lt.jsx(Rg,{onClick:t,className:"w-full",children:""})]})})}ZF.displayName=GF.displayName;const tB=({onKeywordClick:e})=>Lt.jsxs("div",{className:"flex flex-wrap gap-2 my-3",children:[Lt.jsx("span",{className:"text-sm text-gray-600 self-center mr-1",children:":"}),["","","",""].map(t=>Lt.jsx(Rg,{variant:"outline",size:"sm",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200",onClick:()=>e(t),children:t},t))]}),nB=["top","right","bottom","left"],rB=Math.min,iB=Math.max,sB=Math.round,oB=Math.floor,aB=e=>({x:e,y:e}),lB={left:"right",right:"left",bottom:"top",top:"bottom"},cB={start:"end",end:"start"};function uB(e,t,n){return iB(e,rB(t,n))}function dB(e,t){return"function"==typeof e?e(t):e}function pB(e){return e.split("-")[0]}function hB(e){return e.split("-")[1]}function fB(e){return"x"===e?"y":"x"}function mB(e){return"y"===e?"height":"width"}const vB=new Set(["top","bottom"]);function gB(e){return vB.has(pB(e))?"y":"x"}function yB(e){return fB(gB(e))}function bB(e){return e.replace(/start|end/g,e=>cB[e])}const xB=["left","right"],wB=["right","left"],SB=["top","bottom"],CB=["bottom","top"];function EB(e,t,n,r){const i=hB(e);let s=function(e,t,n){switch(e){case"top":case"bottom":return n?t?wB:xB:t?xB:wB;case"left":case"right":return t?SB:CB;default:return[]}}(pB(e),"start"===n,r);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(bB)))),s}function TB(e){return e.replace(/left|right|bottom|top/g,e=>lB[e])}function NB(e){return"number"!=typeof e?function(e){return f({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function PB(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function RB(e,t,n){let{reference:r,floating:i}=e;const s=gB(t),o=yB(t),a=mB(o),l=pB(t),c="y"===s,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(hB(t)){case"start":h[o]-=p*(n&&c?-1:1);break;case"end":h[o]+=p*(n&&c?-1:1)}return h}function IB(e,t){return T(this,null,function*(){var n;void 0===t&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=dB(t,e),f=NB(h),m=a[p?"floating"===d?"reference":"floating":d],v=PB(yield s.getClippingRect({element:null==(n=yield null==s.isElement?void 0:s.isElement(m))||n?m:m.contextElement||(yield null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),g="floating"===d?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=yield null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating),b=(yield null==s.isElement?void 0:s.isElement(y))&&(yield null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},x=PB(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:g,offsetParent:y,strategy:l}):g);return{top:(v.top-x.top+f.top)/b.y,bottom:(x.bottom-v.bottom+f.bottom)/b.y,left:(v.left-x.left+f.left)/b.x,right:(x.right-v.right+f.right)/b.x}})}function kB(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jB(e){return nB.some(t=>e[t]>=0)}const _B=new Set(["left","top"]);function AB(){return"undefined"!=typeof window}function OB(e){return LB(e)?(e.nodeName||"").toLowerCase():"#document"}function DB(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function MB(e){var t;return null==(t=(LB(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function LB(e){return!!AB()&&(e instanceof Node||e instanceof DB(e).Node)}function zB(e){return!!AB()&&(e instanceof Element||e instanceof DB(e).Element)}function FB(e){return!!AB()&&(e instanceof HTMLElement||e instanceof DB(e).HTMLElement)}function BB(e){return!(!AB()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof DB(e).ShadowRoot)}const UB=new Set(["inline","contents"]);function WB(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=eU(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!UB.has(i)}const $B=new Set(["table","td","th"]);function HB(e){return $B.has(OB(e))}const VB=[":popover-open",":modal"];function qB(e){return VB.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const GB=["transform","translate","scale","rotate","perspective"],KB=["transform","translate","scale","rotate","perspective","filter"],JB=["paint","layout","strict","content"];function YB(e){const t=ZB(),n=zB(e)?eU(e):e;return GB.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||KB.some(e=>(n.willChange||"").includes(e))||JB.some(e=>(n.contain||"").includes(e))}function ZB(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const QB=new Set(["html","body","#document"]);function XB(e){return QB.has(OB(e))}function eU(e){return DB(e).getComputedStyle(e)}function tU(e){return zB(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function nU(e){if("html"===OB(e))return e;const t=e.assignedSlot||e.parentNode||BB(e)&&e.host||MB(e);return BB(t)?t.host:t}function rU(e){const t=nU(e);return XB(t)?e.ownerDocument?e.ownerDocument.body:e.body:FB(t)&&WB(t)?t:rU(t)}function iU(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=rU(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),o=DB(i);if(s){const e=sU(o);return t.concat(o,o.visualViewport||[],WB(i)?i:[],e&&n?iU(e):[])}return t.concat(i,iU(i,[],n))}function sU(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function oU(e){const t=eU(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=FB(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=sB(n)!==s||sB(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function aU(e){return zB(e)?e:e.contextElement}function lU(e){const t=aU(e);if(!FB(t))return aB(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=oU(t);let o=(s?sB(n.width):n.width)/r,a=(s?sB(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const cU=aB(0);function uU(e){const t=DB(e);return ZB()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:cU}function dU(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=aU(e);let o=aB(1);t&&(r?zB(r)&&(o=lU(r)):o=lU(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==DB(e))&&t}(s,n,r)?uU(s):aB(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const e=DB(s),t=r&&zB(r)?DB(r):r;let n=e,i=sU(n);for(;i&&r&&t!==n;){const e=lU(i),t=i.getBoundingClientRect(),r=eU(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=s,c+=o,n=DB(i),i=sU(n)}}return PB({width:u,height:d,x:l,y:c})}function pU(e,t){const n=tU(e).scrollLeft;return t?t.left+n:dU(MB(e)).left+n}function hU(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-pU(e,n),y:n.top+t.scrollTop}}const fU=new Set(["absolute","fixed"]);function mU(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=DB(e),r=MB(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const e=ZB();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}const c=pU(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,o=Math.abs(r.clientWidth-t.clientWidth-i);o<=25&&(s-=o)}else c<=25&&(s+=c);return{width:s,height:o,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=MB(e),n=tU(e),r=e.ownerDocument.body,i=iB(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=iB(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+pU(e);const a=-n.scrollTop;return"rtl"===eU(r).direction&&(o+=iB(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}(MB(e));else if(zB(t))r=function(e,t){const n=dU(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=FB(e)?lU(e):aB(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:r*s.y}}(t,n);else{const n=uU(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return PB(r)}function vU(e,t){const n=nU(e);return!(n===t||!zB(n)||XB(n))&&("fixed"===eU(n).position||vU(n,t))}function gU(e,t,n){const r=FB(t),i=MB(t),s="fixed"===n,o=dU(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=aB(0);function c(){l.x=pU(i)}if(r||!r&&!s)if(("body"!==OB(t)||WB(i))&&(a=tU(t)),r){const e=dU(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();s&&!r&&i&&c();const u=!i||r||s?aB(0):hU(i,a);return{x:o.left+a.scrollLeft-l.x-u.x,y:o.top+a.scrollTop-l.y-u.y,width:o.width,height:o.height}}function yU(e){return"static"===eU(e).position}function bU(e,t){if(!FB(e)||"fixed"===eU(e).position)return null;if(t)return t(e);let n=e.offsetParent;return MB(e)===n&&(n=n.ownerDocument.body),n}function xU(e,t){const n=DB(e);if(qB(e))return n;if(!FB(e)){let t=nU(e);for(;t&&!XB(t);){if(zB(t)&&!yU(t))return t;t=nU(t)}return n}let r=bU(e,t);for(;r&&HB(r)&&yU(r);)r=bU(r,t);return r&&XB(r)&&yU(r)&&!YB(r)?n:r||function(e){let t=nU(e);for(;FB(t)&&!XB(t);){if(YB(t))return t;if(qB(t))return null;t=nU(t)}return null}(e)||n}const wU={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s="fixed"===i,o=MB(r),a=!!t&&qB(t.floating);if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=aB(1);const u=aB(0),d=FB(r);if((d||!d&&!s)&&(("body"!==OB(r)||WB(o))&&(l=tU(r)),FB(r))){const e=dU(r);c=lU(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const p=!o||d||s?aB(0):hU(o,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}},getDocumentElement:MB,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[..."clippingAncestors"===n?qB(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=iU(e,[],!1).filter(e=>zB(e)&&"body"!==OB(e)),i=null;const s="fixed"===eU(e).position;let o=s?nU(e):e;for(;zB(o)&&!XB(o);){const t=eU(o),n=YB(o);n||"fixed"!==t.position||(i=null),(s?!n&&!i:!n&&"static"===t.position&&i&&fU.has(i.position)||WB(o)&&!n&&vU(e,o))?r=r.filter(e=>e!==o):i=t,o=nU(o)}return t.set(e,r),r}(t,this._c):[].concat(n),r],o=s[0],a=s.reduce((e,n)=>{const r=mU(t,n,i);return e.top=iB(r.top,e.top),e.right=rB(r.right,e.right),e.bottom=rB(r.bottom,e.bottom),e.left=iB(r.left,e.left),e},mU(t,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:xU,getElementRects:function(e){return T(this,null,function*(){const t=this.getOffsetParent||xU,n=this.getDimensions,r=yield n(e.floating);return{reference:gU(e.reference,yield t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}})},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=oU(e);return{width:t,height:n}},getScale:lU,isElement:zB,isRTL:function(e){return"rtl"===eU(e).direction}};function SU(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function CU(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=aU(e),u=i||s?[...c?iU(c):[],...iU(t)]:[];u.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)});const d=c&&a?function(e,t){let n,r=null;const i=MB(e);function s(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:p,height:h}=c;if(a||t(),!p||!h)return;const v={rootMargin:-oB(d)+"px "+-oB(i.clientWidth-(u+p))+"px "+-oB(i.clientHeight-(d+h))+"px "+-oB(u)+"px",threshold:iB(0,rB(1,l))||1};let g=!0;function y(t){const r=t[0].intersectionRatio;if(r!==l){if(!g)return o();r?o(!1,r):n=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==r||SU(c,e.getBoundingClientRect())||o(),g=!1}try{r=new IntersectionObserver(y,m(f({},v),{root:i.ownerDocument}))}catch(b){r=new IntersectionObserver(y,v)}r.observe(e)}(!0),s}(c,n):null;let p,h=-1,v=null;o&&(v=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&v&&(v.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=v)||e.observe(t)})),n()}),c&&!l&&v.observe(c),v.observe(t));let g=l?dU(e):null;return l&&function t(){const r=dU(e);g&&!SU(g,r)&&n(),g=r,p=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=v)||e.disconnect(),v=null,l&&cancelAnimationFrame(p)}}const EU=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn(t){return T(this,null,function*(){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=yield function(e,t){return T(this,null,function*(){const{placement:n,platform:r,elements:i}=e,s=yield null==r.isRTL?void 0:r.isRTL(i.floating),o=pB(n),a=hB(n),l="y"===gB(n),c=_B.has(o)?-1:1,u=s&&l?-1:1,d=dB(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof f&&(h="end"===a?-1*f:f),l?{x:h*u,y:p*c}:{x:p*c,y:h*u}})}(t,e);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:m(f({},l),{placement:o})}})}}},TU=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn(t){return T(this,null,function*(){const{x:n,y:r,placement:i}=t,s=dB(e,t),{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=s,c=v(s,["mainAxis","crossAxis","limiter"]),u={x:n,y:r},d=yield IB(t,c),p=gB(pB(i)),h=fB(p);let g=u[h],y=u[p];if(o){const e="y"===h?"bottom":"right";g=uB(g+d["y"===h?"top":"left"],g,g-d[e])}if(a){const e="y"===p?"bottom":"right";y=uB(y+d["y"===p?"top":"left"],y,y-d[e])}const b=l.fn(m(f({},t),{[h]:g,[p]:y}));return m(f({},b),{data:{x:b.x-n,y:b.y-r,enabled:{[h]:o,[p]:a}}})})}}},NU=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn(t){return T(this,null,function*(){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,u=dB(e,t),{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0}=u,y=v(u,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const b=pB(i),x=gB(a),w=pB(a)===a,S=yield null==l.isRTL?void 0:l.isRTL(c.floating),C=h||(w||!g?[TB(a)]:function(e){const t=TB(e);return[bB(e),t,bB(t)]}(a)),E="none"!==m;!h&&E&&C.push(...EB(a,g,m,S));const T=[a,...C],N=yield IB(t,y),P=[];let R=(null==(r=s.flip)?void 0:r.overflows)||[];if(d&&P.push(N[b]),p){const e=function(e,t,n){void 0===n&&(n=!1);const r=hB(e),i=yB(e),s=mB(i);let o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=TB(o)),[o,TB(o)]}(i,o,S);P.push(N[e[0]],N[e[1]])}if(R=[...R,{placement:i,overflows:P}],!P.every(e=>e<=0)){var I,k;const e=((null==(I=s.flip)?void 0:I.index)||0)+1,t=T[e];if(t&&("alignment"!==p||x===gB(t)||R.every(e=>gB(e.placement)!==x||e.overflows[0]>0)))return{data:{index:e,overflows:R},reset:{placement:t}};let n=null==(k=R.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:k.placement;if(!n)switch(f){case"bestFit":{var j;const e=null==(j=R.filter(e=>{if(E){const t=gB(e.placement);return t===x||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:j[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}})}}},PU=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn(t){return T(this,null,function*(){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,l=dB(e,t),{apply:c=()=>{}}=l,u=v(l,["apply"]),d=yield IB(t,u),p=pB(i),h=hB(i),g="y"===gB(i),{width:y,height:b}=s.floating;let x,w;"top"===p||"bottom"===p?(x=p,w=h===((yield null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=p,x="end"===h?"top":"bottom");const S=b-d.top-d.bottom,C=y-d.left-d.right,E=rB(b-d[x],S),T=rB(y-d[w],C),N=!t.middlewareData.shift;let P=E,R=T;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(R=C),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(P=S),N&&!h){const e=iB(d.left,0),t=iB(d.right,0),n=iB(d.top,0),r=iB(d.bottom,0);g?R=y-2*(0!==e||0!==t?e+t:iB(d.left,d.right)):P=b-2*(0!==n||0!==r?n+r:iB(d.top,d.bottom))}yield c(m(f({},t),{availableWidth:R,availableHeight:P}));const I=yield o.getDimensions(a.floating);return y!==I.width||b!==I.height?{reset:{rects:!0}}:{}})}}},RU=function(e){return void 0===e&&(e={}),{name:"hide",options:e,fn(t){return T(this,null,function*(){const{rects:n}=t,r=dB(e,t),{strategy:i="referenceHidden"}=r,s=v(r,["strategy"]);switch(i){case"referenceHidden":{const e=kB(yield IB(t,m(f({},s),{elementContext:"reference"})),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:jB(e)}}}case"escaped":{const e=kB(yield IB(t,m(f({},s),{altBoundary:!0})),n.floating);return{data:{escapedOffsets:e,escaped:jB(e)}}}default:return{}}})}}},IU=e=>({name:"arrow",options:e,fn(t){return T(this,null,function*(){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=dB(e,t)||{};if(null==c)return{};const d=NB(u),p={x:n,y:r},h=yB(i),m=mB(h),v=yield o.getDimensions(c),g="y"===h,y=g?"top":"left",b=g?"bottom":"right",x=g?"clientHeight":"clientWidth",w=s.reference[m]+s.reference[h]-p[h]-s.floating[m],S=p[h]-s.reference[h],C=yield null==o.getOffsetParent?void 0:o.getOffsetParent(c);let E=C?C[x]:0;E&&(yield null==o.isElement?void 0:o.isElement(C))||(E=a.floating[x]||s.floating[m]);const T=w/2-S/2,N=E/2-v[m]/2-1,P=rB(d[y],N),R=rB(d[b],N),I=P,k=E-v[m]-R,j=E/2-v[m]/2+T,_=uB(I,j,k),A=!l.arrow&&null!=hB(i)&&j!==_&&s.reference[m]/2-(j<I?P:R)-v[m]/2<0,O=A?j<I?j-I:j-k:0;return{[h]:p[h]+O,data:f({[h]:_,centerOffset:j-_-O},A&&{alignmentOffset:O}),reset:A}})}}),kU=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=dB(e,t),u={x:n,y:r},d=gB(i),p=fB(d);let h=u[p],m=u[d];const v=dB(a,t),g="number"==typeof v?{mainAxis:v,crossAxis:0}:f({mainAxis:0,crossAxis:0},v);if(l){const e="y"===p?"height":"width",t=s.reference[p]-s.floating[e]+g.mainAxis,n=s.reference[p]+s.reference[e]-g.mainAxis;h<t?h=t:h>n&&(h=n)}if(c){var y,b;const e="y"===p?"width":"height",t=_B.has(pB(i)),n=s.reference[d]-s.floating[e]+(t&&(null==(y=o.offset)?void 0:y[d])||0)+(t?0:g.crossAxis),r=s.reference[d]+s.reference[e]+(t?0:(null==(b=o.offset)?void 0:b[d])||0)-(t?g.crossAxis:0);m<n?m=n:m>r&&(m=r)}return{[p]:h,[d]:m}}}},jU=(t,n,r)=>{const i=new Map,s=f({platform:wU},r),o=m(f({},s.platform),{_c:i});return((t,n,r)=>T(e,null,function*(){const{placement:e="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=yield null==o.isRTL?void 0:o.isRTL(n);let c=yield o.getElementRects({reference:t,floating:n,strategy:i}),{x:u,y:d}=RB(c,e,l),p=e,h={},v=0;for(let r=0;r<a.length;r++){const{name:s,fn:g}=a[r],{x:y,y:b,data:x,reset:w}=yield g({x:u,y:d,initialPlacement:e,placement:p,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:n}});u=null!=y?y:u,d=null!=b?b:d,h=m(f({},h),{[s]:f(f({},h[s]),x)}),w&&v<=50&&(v++,"object"==typeof w&&(w.placement&&(p=w.placement),w.rects&&(c=!0===w.rects?yield o.getElementRects({reference:t,floating:n,strategy:i}):w.rects),({x:u,y:d}=RB(c,p,l))),r=-1)}return{x:u,y:d,placement:p,strategy:i,middlewareData:h}}))(t,n,m(f({},s),{platform:o}))};var _U="undefined"!=typeof document?Pt.useLayoutEffect:function(){};function AU(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!AU(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(!("_owner"===n&&e.$$typeof||AU(e[n],t[n])))return!1}return!0}return e!=e&&t!=t}function OU(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function DU(e,t){const n=OU(e);return Math.round(t*n)/n}function MU(e){const t=Pt.useRef(e);return _U(()=>{t.current=e}),t}const LU=(e,t)=>m(f({},TU(e)),{options:[e,t]}),zU=(e,t)=>m(f({},kU(e)),{options:[e,t]}),FU=(e,t)=>m(f({},NU(e)),{options:[e,t]}),BU=(e,t)=>m(f({},PU(e)),{options:[e,t]}),UU=(e,t)=>m(f({},RU(e)),{options:[e,t]}),WU=(e,t)=>m(f({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?IU({element:n.current,padding:r}).fn(t):{}:n?IU({element:n,padding:r}).fn(t):{};var i}}))(e)),{options:[e,t]});var $U=Pt.forwardRef((e,t)=>{const n=e,{children:r,width:i=10,height:s=5}=n,o=v(n,["children","width","height"]);return Lt.jsx(cb.svg,m(f({},o),{ref:t,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:Lt.jsx("polygon",{points:"0,0 30,0 15,10"})}))});$U.displayName="Arrow";var HU=$U,VU="Popper",[qU,GU]=Zy(VU),[KU,JU]=qU(VU),YU=e=>{const{__scopePopper:t,children:n}=e,[r,i]=Pt.useState(null);return Lt.jsx(KU,{scope:t,anchor:r,onAnchorChange:i,children:n})};YU.displayName=VU;var ZU="PopperAnchor",QU=Pt.forwardRef((e,t)=>{const n=e,{__scopePopper:r,virtualRef:i}=n,s=v(n,["__scopePopper","virtualRef"]),o=JU(ZU,r),a=Pt.useRef(null),l=mv(t,a),c=Pt.useRef(null);return Pt.useEffect(()=>{const e=c.current;c.current=(null==i?void 0:i.current)||a.current,e!==c.current&&o.onAnchorChange(c.current)}),i?null:Lt.jsx(cb.div,m(f({},s),{ref:l}))});QU.displayName=ZU;var XU="PopperContent",[eW,tW]=qU(XU),nW=Pt.forwardRef((e,t)=>{var n,r,i,s,o,a,l,c;const u=e,{__scopePopper:d,side:p="bottom",sideOffset:h=0,align:g="center",alignOffset:y=0,arrowPadding:b=0,avoidCollisions:x=!0,collisionBoundary:w=[],collisionPadding:S=0,sticky:C="partial",hideWhenDetached:E=!1,updatePositionStrategy:T="optimized",onPlaced:N}=u,P=v(u,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),R=JU(XU,d),[I,k]=Pt.useState(null),j=mv(t,e=>k(e)),[_,A]=Pt.useState(null),O=Zz(_),D=null!=(n=null==O?void 0:O.width)?n:0,M=null!=(r=null==O?void 0:O.height)?r:0,L=p+("center"!==g?"-"+g:""),z="number"==typeof S?S:f({top:0,right:0,bottom:0,left:0},S),F=Array.isArray(w)?w:[w],B=F.length>0,U={padding:z,boundary:F.filter(oW),altBoundary:B},{refs:W,floatingStyles:$,placement:H,isPositioned:V,middlewareData:q}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=Pt.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=Pt.useState(r);AU(p,r)||h(r);const[v,g]=Pt.useState(null),[y,b]=Pt.useState(null),x=Pt.useCallback(e=>{e!==E.current&&(E.current=e,g(e))},[]),w=Pt.useCallback(e=>{e!==T.current&&(T.current=e,b(e))},[]),S=s||v,C=o||y,E=Pt.useRef(null),T=Pt.useRef(null),N=Pt.useRef(u),P=null!=l,R=MU(l),I=MU(i),k=MU(c),j=Pt.useCallback(()=>{if(!E.current||!T.current)return;const e={placement:t,strategy:n,middleware:p};I.current&&(e.platform=I.current),jU(E.current,T.current,e).then(e=>{const t=m(f({},e),{isPositioned:!1!==k.current});_.current&&!AU(N.current,t)&&(N.current=t,$p.flushSync(()=>{d(t)}))})},[p,t,n,I,k]);_U(()=>{!1===c&&N.current.isPositioned&&(N.current.isPositioned=!1,d(e=>m(f({},e),{isPositioned:!1})))},[c]);const _=Pt.useRef(!1);_U(()=>(_.current=!0,()=>{_.current=!1}),[]),_U(()=>{if(S&&(E.current=S),C&&(T.current=C),S&&C){if(R.current)return R.current(S,C,j);j()}},[S,C,j,R,P]);const A=Pt.useMemo(()=>({reference:E,floating:T,setReference:x,setFloating:w}),[x,w]),O=Pt.useMemo(()=>({reference:S,floating:C}),[S,C]),D=Pt.useMemo(()=>{const e={position:n,left:0,top:0};if(!O.floating)return e;const t=DU(O.floating,u.x),r=DU(O.floating,u.y);return a?f(m(f({},e),{transform:"translate("+t+"px, "+r+"px)"}),OU(O.floating)>=1.5&&{willChange:"transform"}):{position:n,left:t,top:r}},[n,a,O.floating,u.x,u.y]);return Pt.useMemo(()=>m(f({},u),{update:j,refs:A,elements:O,floatingStyles:D}),[u,j,A,O,D])}({strategy:"fixed",placement:L,whileElementsMounted:(...e)=>CU(...e,{animationFrame:"always"===T}),elements:{reference:R.anchor},middleware:[(G={mainAxis:h+M,alignmentAxis:y},m(f({},EU(G)),{options:[G,K]})),x&&LU(f({mainAxis:!0,crossAxis:!1,limiter:"partial"===C?zU():void 0},U)),x&&FU(f({},U)),BU(m(f({},U),{apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:i,height:s}=t.reference,o=e.floating.style;o.setProperty("--radix-popper-available-width",`${n}px`),o.setProperty("--radix-popper-available-height",`${r}px`),o.setProperty("--radix-popper-anchor-width",`${i}px`),o.setProperty("--radix-popper-anchor-height",`${s}px`)}})),_&&WU({element:_,padding:b}),aW({arrowWidth:D,arrowHeight:M}),E&&UU(f({strategy:"referenceHidden"},U))]});var G,K;const[J,Y]=lW(H),Z=db(N);Xy(()=>{V&&(null==Z||Z())},[V,Z]);const Q=null==(i=q.arrow)?void 0:i.x,X=null==(s=q.arrow)?void 0:s.y,ee=0!==(null==(o=q.arrow)?void 0:o.centerOffset),[te,ne]=Pt.useState();return Xy(()=>{I&&ne(window.getComputedStyle(I).zIndex)},[I]),Lt.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:f(m(f({},$),{transform:V?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[null==(a=q.transformOrigin)?void 0:a.x,null==(l=q.transformOrigin)?void 0:l.y].join(" ")}),(null==(c=q.hide)?void 0:c.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:e.dir,children:Lt.jsx(eW,{scope:d,placedSide:J,onArrowChange:A,arrowX:Q,arrowY:X,shouldHideArrow:ee,children:Lt.jsx(cb.div,m(f({"data-side":J,"data-align":Y},P),{ref:j,style:m(f({},P.style),{animation:V?void 0:"none"})}))})})});nW.displayName=XU;var rW="PopperArrow",iW={top:"bottom",right:"left",bottom:"top",left:"right"},sW=Pt.forwardRef(function(e,t){const n=e,{__scopePopper:r}=n,i=v(n,["__scopePopper"]),s=tW(rW,r),o=iW[s.placedSide];return Lt.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:Lt.jsx(HU,m(f({},i),{ref:t,style:m(f({},i.style),{display:"block"})}))})});function oW(e){return null!==e}sW.displayName=rW;var aW=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=t,u=0!==(null==(n=c.arrow)?void 0:n.centerOffset),d=u?0:e.arrowWidth,p=u?0:e.arrowHeight,[h,f]=lW(a),m={start:"0%",center:"50%",end:"100%"}[f],v=(null!=(i=null==(r=c.arrow)?void 0:r.x)?i:0)+d/2,g=(null!=(o=null==(s=c.arrow)?void 0:s.y)?o:0)+p/2;let y="",b="";return"bottom"===h?(y=u?m:`${v}px`,b=-p+"px"):"top"===h?(y=u?m:`${v}px`,b=`${l.floating.height+p}px`):"right"===h?(y=-p+"px",b=u?m:`${g}px`):"left"===h&&(y=`${l.floating.width+p}px`,b=u?m:`${g}px`),{data:{x:y,y:b}}}});function lW(e){const[t,n="center"]=e.split("-");return[t,n]}var cW=YU,uW=QU,dW=nW,pW=sW,hW=Symbol("radix.slottable");function fW(e){const t=({children:e})=>Lt.jsx(Lt.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=hW,t}var[mW]=Zy("Tooltip",[GU]),vW=GU(),gW="TooltipProvider",yW=700,bW="tooltip.open",[xW,wW]=mW(gW),SW=e=>{const{__scopeTooltip:t,delayDuration:n=yW,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=e,o=Pt.useRef(!0),a=Pt.useRef(!1),l=Pt.useRef(0);return Pt.useEffect(()=>{const e=l.current;return()=>window.clearTimeout(e)},[]),Lt.jsx(xW,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:Pt.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:Pt.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:Pt.useCallback(e=>{a.current=e},[]),disableHoverableContent:i,children:s})};SW.displayName=gW;var CW="Tooltip",[EW,TW]=mW(CW),NW=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=e,l=wW(CW,e.__scopeTooltip),c=vW(t),[u,d]=Pt.useState(null),p=nb(),h=Pt.useRef(0),v=null!=o?o:l.disableHoverableContent,g=null!=a?a:l.delayDuration,y=Pt.useRef(!1),[b,x]=ib({prop:r,defaultProp:null!=i&&i,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(bW))):l.onClose(),null==s||s(e)},caller:CW}),w=Pt.useMemo(()=>b?y.current?"delayed-open":"instant-open":"closed",[b]),S=Pt.useCallback(()=>{window.clearTimeout(h.current),h.current=0,y.current=!1,x(!0)},[x]),C=Pt.useCallback(()=>{window.clearTimeout(h.current),h.current=0,x(!1)},[x]),E=Pt.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{y.current=!0,x(!0),h.current=0},g)},[g,x]);return Pt.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),Lt.jsx(cW,m(f({},c),{children:Lt.jsx(EW,{scope:t,contentId:p,open:b,stateAttribute:w,trigger:u,onTriggerChange:d,onTriggerEnter:Pt.useCallback(()=>{l.isOpenDelayedRef.current?E():S()},[l.isOpenDelayedRef,E,S]),onTriggerLeave:Pt.useCallback(()=>{v?C():(window.clearTimeout(h.current),h.current=0)},[C,v]),onOpen:S,onClose:C,disableHoverableContent:v,children:n})}))};NW.displayName=CW;var PW="TooltipTrigger",RW=Pt.forwardRef((e,t)=>{const n=e,{__scopeTooltip:r}=n,i=v(n,["__scopeTooltip"]),s=TW(PW,r),o=wW(PW,r),a=vW(r),l=mv(t,Pt.useRef(null),s.onTriggerChange),c=Pt.useRef(!1),u=Pt.useRef(!1),d=Pt.useCallback(()=>c.current=!1,[]);return Pt.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),Lt.jsx(uW,m(f({asChild:!0},a),{children:Lt.jsx(cb.button,m(f({"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute},i),{ref:l,onPointerMove:Yy(e.onPointerMove,e=>{"touch"!==e.pointerType&&(u.current||o.isPointerInTransitRef.current||(s.onTriggerEnter(),u.current=!0))}),onPointerLeave:Yy(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Yy(e.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Yy(e.onFocus,()=>{c.current||s.onOpen()}),onBlur:Yy(e.onBlur,s.onClose),onClick:Yy(e.onClick,s.onClose)}))}))});RW.displayName=PW;var[IW,kW]=mW("TooltipPortal",{forceMount:void 0}),jW="TooltipContent",_W=Pt.forwardRef((e,t)=>{const n=kW(jW,e.__scopeTooltip),r=e,{forceMount:i=n.forceMount,side:s="top"}=r,o=v(r,["forceMount","side"]),a=TW(jW,e.__scopeTooltip);return Lt.jsx(Ob,{present:i||a.open,children:a.disableHoverableContent?Lt.jsx(LW,m(f({side:s},o),{ref:t})):Lt.jsx(AW,m(f({side:s},o),{ref:t}))})}),AW=Pt.forwardRef((e,t)=>{const n=TW(jW,e.__scopeTooltip),r=wW(jW,e.__scopeTooltip),i=Pt.useRef(null),s=mv(t,i),[o,a]=Pt.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:d}=r,p=Pt.useCallback(()=>{a(null),d(!1)},[d]),h=Pt.useCallback((e,t)=>{const n=e.currentTarget,r={x:e.clientX,y:e.clientY},i=function(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),s=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...i,...function(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}(t.getBoundingClientRect())]);a(s),d(!0)},[d]);return Pt.useEffect(()=>()=>p(),[p]),Pt.useEffect(()=>{if(l&&u){const e=e=>h(e,u),t=e=>h(e,l);return l.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[l,u,h,p]),Pt.useEffect(()=>{if(o){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},r=(null==l?void 0:l.contains(t))||(null==u?void 0:u.contains(t)),i=!function(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const e=t[s],a=t[o],l=e.x,c=e.y,u=a.x,d=a.y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(i=!i)}return i}(n,o);r?p():i&&(p(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,u,o,c,p]),Lt.jsx(LW,m(f({},e),{ref:s}))}),[OW,DW]=mW(CW,{isInside:!1}),MW=fW("TooltipContent"),LW=Pt.forwardRef((e,t)=>{const n=e,{__scopeTooltip:r,children:i,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a}=n,l=v(n,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),c=TW(jW,r),u=vW(r),{onClose:d}=c;return Pt.useEffect(()=>(document.addEventListener(bW,d),()=>document.removeEventListener(bW,d)),[d]),Pt.useEffect(()=>{if(c.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(c.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,d]),Lt.jsx(gb,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:Lt.jsxs(dW,m(f(f({"data-state":c.stateAttribute},u),l),{ref:t,style:f(f({},l.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}),children:[Lt.jsx(MW,{children:i}),Lt.jsx(OW,{scope:r,isInside:!0,children:Lt.jsx(Bw,{id:c.contentId,role:"tooltip",children:s||i})})]}))})});_W.displayName=jW;var zW="TooltipArrow";Pt.forwardRef((e,t)=>{const n=e,{__scopeTooltip:r}=n,i=v(n,["__scopeTooltip"]),s=vW(r);return DW(zW,r).isInside?null:Lt.jsx(pW,m(f(f({},s),i),{ref:t}))}).displayName=zW;var FW=_W;const BW=SW,UW=NW,WW=RW,$W=Pt.forwardRef((e,t)=>{var n=e,{className:r,sideOffset:i=4}=n,s=v(n,["className","sideOffset"]);return Lt.jsx(FW,f({ref:t,sideOffset:i,className:Ng("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},s))});$W.displayName=FW.displayName;const HW=Rv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function VW(e){var t=e,{className:n,variant:r}=t,i=v(t,["className","variant"]);return Lt.jsx("div",f({className:Ng(HW({variant:r}),n)},i))}function qW(){const[e,t]=Pt.useState([]),[n,r]=Pt.useState(""),[i,s]=Pt.useState(!1),[o,a]=Pt.useState(null),[l,c]=Pt.useState(null),[u,d]=Pt.useState(null),p=Pt.useRef(null),h=Pt.useRef(!1);Pt.useEffect(()=>{var e;null==(e=p.current)||e.scrollIntoView({behavior:"smooth"})},[e]);const f=()=>T(this,null,function*(){s(!0);try{const e=yield fetch("/api/interactive-diagnosis/start",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("");const n=yield e.json();a(n.diagnosisState),c(n.interactiveResponse),d(n.sessionId),n.interactiveResponse.nextQuestion?t([{id:Date.now(),content:n.interactiveResponse.nextQuestion,isAiResponse:!0,timestamp:new Date,type:"question"}]):t([{id:Date.now(),content:n.interactiveResponse.message,isAiResponse:!0,timestamp:new Date,type:"message"}])}catch(e){console.error(":",e)}finally{s(!1)}});Pt.useEffect(()=>{h.current||(h.current=!0,f())},[]);const m=e=>T(this,null,function*(){if(!e.trim()||!o)return;s(!0);const n={id:Date.now(),content:e,isAiResponse:!1,timestamp:new Date,type:"message"};t(e=>[...e,n]),r("");try{const n=yield fetch("/api/interactive-diagnosis",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userResponse:e,currentState:o})});if(!n.ok)throw new Error("");const r=yield n.json();a(r.updatedState),c(r.interactiveResponse),r.interactiveResponse.nextQuestion?t(e=>[...e,{id:Date.now()+1,content:r.interactiveResponse.nextQuestion,isAiResponse:!0,timestamp:new Date,type:"question"}]):t(e=>[...e,{id:Date.now()+1,content:r.interactiveResponse.message,isAiResponse:!0,timestamp:new Date,type:g(r.interactiveResponse.priority)}])}catch(i){console.error(":",i);const e={id:Date.now()+1,content:"",isAiResponse:!0,timestamp:new Date,type:"message"};t(t=>[...t,e])}finally{s(!1)}}),v=e=>{m(e)},g=e=>{switch(e){case"safety":return"safety";case"action":return"action";case"diagnosis":return"question";default:return"message"}},y=e=>{switch(e){case"safety":return Lt.jsx(zy,{className:"w-4 h-4 text-red-500"});case"action":return Lt.jsx(Gy,{className:"w-4 h-4 text-blue-500"});case"question":return Lt.jsx(gy,{className:"w-4 h-4 text-purple-500"});default:return null}};return Lt.jsx("div",{className:"max-w-4xl mx-auto p-4",children:Lt.jsxs(gL,{className:"h-[700px] flex flex-col",children:[Lt.jsx(yL,{className:"py-2 border-b",children:Lt.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Lt.jsxs(bL,{className:"flex items-center gap-2 text-base font-semibold",children:[Lt.jsx(Gy,{className:"w-4 h-4"})," AI"]}),o&&Lt.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Lt.jsx(VW,{variant:"outline",className:(e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}})(o.collectedInfo.urgency),children:o.collectedInfo.urgency}),Lt.jsxs(VW,{variant:"outline",children:[Lt.jsx(Yg,{className:"w-3 h-3 mr-1"})," ",Math.round(100*o.confidence),"%"]}),Lt.jsx(VW,{variant:"outline",children:o.phase})]})]})}),Lt.jsx(wL,{className:"flex-1 flex flex-col",children:Lt.jsxs(Lt.Fragment,{children:[Lt.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[!o&&Lt.jsx("div",{className:"flex justify-center py-8",children:Lt.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[Lt.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}),"..."]})}),e.map(e=>Lt.jsx("div",{className:"flex "+(e.isAiResponse?"justify-end":"justify-start"),children:Lt.jsxs("div",{className:"max-w-[80%] p-3 rounded-lg shadow-sm "+(e.isAiResponse?"bg-white border border-gray-200 text-gray-800 rounded-[18px_18px_4px_18px]":"bg-blue-600 text-white rounded-[18px_18px_18px_4px]"),children:[e.isAiResponse&&Lt.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y(e.type),Lt.jsx("span",{className:"text-[11px] font-medium text-gray-500 tracking-wide",children:"GPT"})]}),Lt.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:e.content}),Lt.jsx("div",{className:"text-[10px] opacity-60 mt-1 text-right",children:e.timestamp.toLocaleTimeString()})]})},e.id)),i&&Lt.jsx("div",{className:"flex justify-start",children:Lt.jsx("div",{className:"bg-white border border-gray-200 p-3 rounded-lg",children:Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}),Lt.jsx("span",{className:"text-sm text-gray-600",children:"..."})]})})}),Lt.jsx("div",{ref:p})]}),o&&(null==l?void 0:l.options)&&l.options.length>0&&Lt.jsxs("div",{className:"mb-4",children:[Lt.jsx("p",{className:"text-sm text-gray-600 mb-2",children:":"}),Lt.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.options.map((e,t)=>Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:()=>v(e),disabled:i,className:"text-sm",children:e},t)),l.details&&!e.some(e=>e.content.includes(l.details))&&Lt.jsx(Rg,{variant:"secondary",size:"sm",onClick:()=>v(""),disabled:i,className:"text-sm",children:""})]})]}),o&&(null==l?void 0:l.requiresInput)&&"completed"!==o.phase&&Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsx(ML,{value:n,onChange:e=>r(e.target.value),placeholder:"...",onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m(n))},disabled:i,className:"flex-1"}),Lt.jsx(Rg,{onClick:()=>m(n),disabled:i||!n.trim(),className:"bg-blue-600 hover:bg-blue-700",children:""})]}),"completed"===(null==o?void 0:o.phase)&&Lt.jsxs("div",{className:"text-center p-4 bg-green-50 border border-green-200 rounded-lg",children:[Lt.jsx(Gg,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),Lt.jsx("p",{className:"text-green-800 font-medium",children:""}),Lt.jsx(Rg,{onClick:()=>window.location.reload(),className:"mt-2",variant:"outline",children:""})]})]})})]})})}const GW=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e}=Km(),{messages:t,setMessages:n,sendMessage:r,isLoading:i,clearChatHistory:s,isClearing:o,chatId:a,initializeChat:l,exportChatHistory:c}=cv();null==e||e.role;const{toast:u}=nv();Wf();const d=Pt.useRef(null);Pt.useRef(null);const[p,h]=Pt.useState(!1),[v,g]=Pt.useState([]),[y,b]=Pt.useState([]),[x,w]=Pt.useState(null),[S,C]=Pt.useState(""),[E,N]=Pt.useState(!1),[P,R]=Pt.useState(!1),[I,k]=Pt.useState(!1),[j,_]=Pt.useState(null),[A,O]=Pt.useState(0),[D,M]=Pt.useState(0),[L,z]=Pt.useState(""),[F,B]=Pt.useState([]),[U,W]=Pt.useState([]),[$,H]=Pt.useState(""),[V,q]=Pt.useState(""),[G,K]=Pt.useState(!1),[J,Y]=Pt.useState(!1),[Z,Q]=Pt.useState(""),[X,ee]=Pt.useState(""),[te,ne]=Pt.useState(!1),[re,ie]=Pt.useState(!1),[se,oe]=Pt.useState([]),[ae,le]=Pt.useState([]),[ce,ue]=Pt.useState(!1),[de,pe]=Pt.useState(null),[he,fe]=Pt.useState([]),[me,ve]=Pt.useState(!1);Pt.useEffect(()=>{Ce(),ge(),Se().catch(e=>{console.error("AI:",e)})},[]),Pt.useEffect(()=>{console.log(" :",{machineTypesCount:F.length,machineTypes:F,filteredMachineTypesCount:se.length}),oe(F)},[F]),Pt.useEffect(()=>{console.log(" :",{machinesCount:U.length,machines:U,filteredMachinesCount:ae.length}),le(U)},[U]);const ge=()=>T(this,null,function*(){try{ve(!0);const{buildApiUrl:e}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),t=e("/knowledge-base"),n=yield fetch(t);if(!n.ok)throw new Error(`Failed to fetch knowledge data: ${n.statusText}`);{const e=yield n.json();e.success?(fe(e.data),console.log(" :",e.data.length+"")):(console.error(" :",e.message),fe([]))}}catch(e){console.error(" :",e),u({title:"",description:e instanceof Error?e.message:"",variant:"destructive"}),fe([])}finally{ve(!1)}});Pt.useEffect(()=>{const e=e=>{const t=e.target;t.closest("#machine-type")||t.closest("#machine-number")||t.closest("#machine-type-menu")||t.closest("#machine-number-menu")||(ne(!1),ie(!1))};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]);const[ye,be]=Pt.useState(null),[xe,we]=Pt.useState({initialPrompt:"",conversationStyle:"frank",questionFlow:{step1:"",step2:"",step3:"",step4:"",step5:""},branchingConditions:{timeCheck:!0,detailsCheck:!0,toolsCheck:!0,safetyCheck:!0},responsePattern:"step_by_step",escalationTime:20,customInstructions:"",enableEmergencyContact:!0}),Se=()=>T(this,null,function*(){try{const e=yield fetch("/api/ai-assist/settings",{credentials:"include"});if(e.ok){const t=yield e.json(),n=t.success?t.data:t;if(n)return we(e=>m(f(f({},e),n),{questionFlow:f(f({},e.questionFlow),n.questionFlow),branchingConditions:f(f({},e.branchingConditions),n.branchingConditions)})),localStorage.setItem("aiAssistSettings",JSON.stringify(n)),console.log(" AI:",n),n}else{const e=localStorage.getItem("aiAssistSettings");if(e){const t=JSON.parse(e);return we(t),console.log(" AI:",t),t}}}catch(e){console.warn("AI:",e);try{const e=localStorage.getItem("aiAssistSettings");if(e){const t=JSON.parse(e);return we(t),console.log(" AI:",t),t}}catch(t){console.error(" AI:",t)}}return null});Pt.useEffect(()=>{const e=e=>{if("aiAssistSettings"===e.key&&e.newValue)try{const t=JSON.parse(e.newValue);we(t),console.log(" localStorageAI:",t)}catch(t){console.error(" AI:",t)}},t=()=>T(this,null,function*(){const e=yield Se();e&&(console.log(" AI:",e),I&&Ie.current&&e.initialPrompt&&n(t=>{const n=t.findIndex(e=>"ai_support"===e.type);if(-1!==n){const r=[...t];return r[n]=m(f({},r[n]),{content:e.initialPrompt}),r}return t}))});return window.addEventListener("storage",e),window.addEventListener("aiAssistSettingsChanged",t),()=>{window.removeEventListener("storage",e),window.removeEventListener("aiAssistSettingsChanged",t)}},[]);const Ce=Pt.useCallback(()=>T(this,null,function*(){try{K(!0),console.log(" ");const{buildApiUrl:e}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),t=e("/machines/machine-types");console.log(" URL:",t),console.log(" URL:",window.location.href),console.log(" :",{VITE_API_BASE_URL:"/api",NODE_ENV:void 0,MODE:"production"});const n=yield fetch(t,{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},credentials:"include"});if(console.log(" :",n.status),console.log(" :",Object.fromEntries(n.headers.entries())),n.ok){const e=yield n.json();if(console.log(" :",e),e.success){const t=e.machineTypes||e.data||[];console.log(" :",t.length,""),console.log(" :",t);const n=t.map(e=>({id:e.id,machine_type_name:e.name||e.machine_type_name||e.category}));B(n),oe(n),0===n.length&&console.log(" 0")}else console.error(" :",e),B([]),oe([])}else{const e=yield n.text();console.error(" :",n.status,e),401===n.status&&console.log(" "),B([]),oe([])}}catch(e){console.error(" :",e),B([]),oe([])}finally{K(!1),console.log(" :",{machineTypesCount:F.length,filteredMachineTypesCount:se.length})}}),[]),Ee=e=>{if(console.log(" :",e,":",F.length),!e.trim())return console.log(" :",F.length,""),void oe(F);const t=F.filter(t=>t.machine_type_name.toLowerCase().includes(e.toLowerCase()));console.log(" :",t.length,""),oe(t)},Te=e=>{if(console.log(" :",e,":",U.length),!e.trim())return console.log(" :",U.length,""),void le(U);const t=U.filter(t=>t.machine_number.toLowerCase().includes(e.toLowerCase()));console.log(" :",t.length,""),le(t)},Ne=Pt.useCallback(e=>T(this,null,function*(){try{Y(!0),console.log(" , ID:",e);const{buildApiUrl:t}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),n=t(`/machines?type_id=${e}`);console.log(" URL:",n);const r=yield fetch(n,{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},credentials:"include"});if(console.log(" :",r.status),r.ok){const e=yield r.json();if(console.log(" :",e),e.success){const t=e.machines||e.data||[];console.log(" :",t.length,""),console.log(" :",t);const n=t.map(e=>({id:e.id,machine_number:e.machine_number}));W(n),le(n),console.log(" :",{machinesCount:n.length,machines:n,machineNumberInput:X,selectedMachineNumber:V,showMachineNumberSuggestions:re})}else console.error(" success=false:",e),W([]),le([])}else{const e=yield r.text();console.error(" :",r.status,e),W([]),le([])}}catch(t){console.error(" :",t),W([]),le([])}finally{Y(!1),console.log(" :",{machinesCount:U.length,filteredMachinesCount:ae.length})}}),[U.length,ae.length,X,V,re]);Pt.useEffect(()=>{var e;null==(e=d.current)||e.scrollIntoView({behavior:"smooth"})},[t]);const Pe=Pt.useRef(!1),Re=Pt.useRef(!1),Ie=Pt.useRef(!1),ke=Pt.useRef(null),je=Pt.useRef(""),_e=Pt.useRef("");Pt.useEffect(()=>{je.current=$,$&&V&&(ke.current=null)},[$]),Pt.useEffect(()=>{_e.current=V,$&&V&&(ke.current=null)},[V]),Pt.useEffect(()=>{if(console.log("  - "),!a){console.log(" ID");try{l()}catch(e){console.error(" ID:",e)}}Ce().catch(e=>{console.error(" :",e)})},[a,l,Ce]),Pt.useEffect(()=>{I||Pe.current||(console.log(" AI"),Pe.current=!0,(()=>{T(this,null,function*(){try{const e=yield Se();if(k(!0),_(new Date),O(0),!Ie.current){Ie.current=!0;const t=(null==e?void 0:e.initialPrompt)||xe.initialPrompt,r={id:Date.now().toString(),content:t,isAiResponse:!0,timestamp:new Date,type:"ai_support"};n(e=>[...e,r]),console.log(" :",t)}}catch(e){console.error(" AI:",e)}})})())},[I,Se,xe,n]),Pt.useEffect(()=>{I&&$&&V&&Re.current&&console.log(" ")},[I,$,V]),Pt.useEffect(()=>{console.log(" :",{machineTypesCount:F.length,selectedMachineType:$,machineTypeInput:Z,isLoadingMachineTypes:G}),F.length>0&&Ee(Z)},[F,Z]),Pt.useEffect(()=>{console.log(" :",{machineTypeInput:Z,selectedMachineType:$})},[Z,$]),Pt.useEffect(()=>{console.log(" machineTypeInput:",{currentValue:Z,length:Z.length,timestamp:(new Date).toISOString()})},[Z]),Pt.useEffect(()=>{console.log(" :",{machinesCount:U.length,selectedMachineNumber:V,machineNumberInput:X,isLoadingMachines:J}),U.length>0&&Te(X)},[U,X]),Pt.useEffect(()=>{console.log(" :",{machineNumberInput:X,selectedMachineNumber:V})},[X,V]),Pt.useEffect(()=>{let e;return I&&j&&(e=setInterval(()=>{const e=new Date,t=Math.floor((e.getTime()-j.getTime())/1e3);O(t);const r=Math.floor(t/60);if(xe.enableEmergencyContact&&r>=xe.escalationTime&&r%5==0){const e={id:Date.now().toString(),content:` ****\n\nAI${r}\n\n**:**\n 0123-456-789\n\n****\n\n\n`,isAiResponse:!0,timestamp:new Date,type:"escalation_notice"};n(t=>[...t,e])}},1e3)),()=>{e&&clearInterval(e)}},[I,j,xe]);const Ae=()=>T(this,null,function*(){try{console.log(" :",{chatId:a,messagesLength:t.length,hasChatId:!!a,hasMessages:t.length>0,messagesWithContent:t.filter(e=>e.content&&e.content.trim()).length,machineInfo:{selectedMachineType:$,selectedMachineNumber:V,machineTypeInput:Z,machineNumberInput:X}});const r=!!a,i=t.length>0,o=t.some(e=>e.content&&e.content.trim());if(console.log(" :",{hasValidChatId:r,hasMessages:i,hasValidMessages:o,messagesCount:t.length,messagesWithContent:t.filter(e=>e.content&&e.content.trim()).length}),!r){console.log(" : ID - ");try{return yield l(),console.log(" ID"),void setTimeout(()=>{Ae()},100)}catch(e){return console.error(" ID:",e),void u({title:"",description:"ID",variant:"destructive"})}}if(!o)return console.log(" : "),void u({title:"",description:"",variant:"destructive"});const c={chatId:a,timestamp:(new Date).toISOString(),machineInfo:{selectedMachineType:$,selectedMachineNumber:V,machineTypeName:Z,machineNumber:X},messages:t.map(e=>{var t;return{id:e.id,content:e.content,isAiResponse:e.isAiResponse,timestamp:e.timestamp,media:(null==(t=e.media)?void 0:t.map(e=>({id:e.id,type:e.type,url:e.url,title:e.title,fileName:e.fileName||""})))||[]}})};console.log(" :",{chatId:c.chatId,messageCount:c.messages.length,machineInfo:c.machineInfo,totalDataSize:JSON.stringify(c).length});const{buildApiUrl:d}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),p="localhost"===window.location.hostname,h=d(p?`/chats/${a}/send-test`:`/chats/${a}/send`);console.log(" URL:",h),console.log(" :",p),console.log(" :",window.location.hostname),console.log(" :",{NODE_ENV:"production",DEV:!1,PROD:!0,VITE_API_BASE_URL:"/api"});const f=yield fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({chatData:c,exportType:"manual_send"})});if(console.log(" :",{status:f.status,statusText:f.statusText,ok:f.ok,headers:Object.fromEntries(f.headers.entries())}),!f.ok){let e=`: ${f.status} ${f.statusText}`,t="";try{const n=yield f.json();e=n.error||n.message||e,t=n.details||n.error||"",console.error(" :",n)}catch(n){console.warn(" :",n)}const r=t?`${e}\n: ${t}`:e;throw new Error(r)}{const e=yield f.json(),n=$&&V?` (: ${Z}, : ${X})`:"";console.log(" :",e);const r=e.knowledgeUpdateScheduled?" ":"";u({title:"",description:`(${t.filter(e=>e.content&&e.content.trim()).length})${n}${r}`}),e.knowledgeUpdateScheduled&&setTimeout(()=>{u({title:" AI",description:"AI",duration:6e3})},2e3),yield s(),H(""),je.current="",q(""),_e.current="",Q(""),ee(""),W([]),le([]),ke.current=null,u({title:"",description:""}),console.log(" ")}}catch(r){console.error(" :",r),u({title:"",description:r instanceof Error?r.message:"",variant:"destructive"})}}),Oe=()=>T(this,null,function*(){try{N(!0),console.log(" ");const e=Date.now(),t=`?ts=${e}&r=${Math.random().toString(36).substring(2)}`,{buildApiUrl:n}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),r=n(`/emergency-flow/list${t}`);console.log(" API URL:",r);const i=yield fetch(r,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate, max-age=0",Pragma:"no-cache",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","X-Requested-With":"XMLHttpRequest"}});if(console.log(" :",i.status,i.statusText),!i.ok){const e=yield i.text();throw console.error(" API :",e),new Error(`Failed to fetch emergency guides: ${i.status} - ${e}`)}{const e=yield i.json();if(console.log(" :",e),e.success){const t=e.data||[];g(t),b(t),console.log(" :",t.length+""),t.forEach((e,t)=>{var n;console.log(`  ${t+1}:`,{id:e.id,title:e.title,fileName:e.fileName,description:(null==(n=e.description)?void 0:n.substring(0,50))+"..."})})}else console.error(" :",e.message),g([]),b([])}}catch(e){console.error(":",e),u({title:"",description:"",variant:"destructive"}),g([]),b([])}finally{N(!1)}}),De=e=>T(this,null,function*(){if(C(e),e.trim())try{const t=v.filter(t=>`${t.title} ${t.description} ${t.keyword||""}`.toLowerCase().includes(e.toLowerCase()));b(t),console.log(` : "${e}" -> ${t.length}`)}catch(t){console.error(":",t),b(v)}else b(v)}),Me=e=>T(this,null,function*(){if(de)try{const t=m(f({},de),{answers:[...de.answers,{stepId:`step_${Date.now()}`,answer:e,timestamp:new Date}]});pe(t),r(e,[],!1);const{buildApiUrl:n}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),i=n("/troubleshooting-qa/answer"),s=yield fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({problemDescription:de.problemDescription,previousAnswers:t.answers.slice(0,-1),currentAnswer:e})});if(!s.ok)throw new Error("");{const e=(yield s.json()).data;"complete"===e.status?(pe(e=>m(f({},e),{currentQuestion:void 0,currentOptions:void 0})),r(e.solution,[],!0),ue(!1)):"emergency"===e.status?(pe(e=>m(f({},e),{currentQuestion:void 0,currentOptions:void 0})),r(e.emergencyAction,[],!0),ue(!1)):(pe(t=>m(f({},t),{currentQuestion:e.question,currentOptions:e.options||[],reasoning:e.reasoning})),r(e.question,[],!0))}}catch(t){console.error(" QA:",t),u({title:"",description:"",variant:"destructive"})}}),Le=(e,...t)=>T(this,[e,...t],function*(e,t=[]){try{const r=je.current,i=_e.current,s=$,o=V,a=r&&""!==r.trim()&&"null"!==r&&"undefined"!==r?r:s&&""!==s.trim()&&"null"!==s&&"undefined"!==s?s:Z&&""!==Z.trim()?Z.trim():"",l=i&&""!==i.trim()&&"null"!==i&&"undefined"!==i?i:o&&""!==o.trim()&&"null"!==o&&"undefined"!==o?o:X&&""!==X.trim()?X.trim():"",c=""!==a,u=""!==l;console.log(" :",{refMachineType:r,refMachineNumber:i,stateMachineType:s,stateMachineNumber:o,machineTypeInput:Z,machineNumberInput:X,currentMachineType:a,currentMachineNumber:l,hasMachineType:c,hasMachineNumber:u});const d={id:Date.now().toString(),content:e,isAiResponse:!1,timestamp:new Date,type:"user_message",media:t};let p=[];if(n(e=>(p=[...e,d],p)),!c||!u){const e="",t=Date.now(),r=t-(ke.current?parseInt(ke.current):0);if(r>5e3){ke.current=t.toString();const r={id:(Date.now()+1).toString(),content:e,isAiResponse:!0,timestamp:new Date,type:"ai_support"};n(e=>[...e,r]),console.log(" :",e)}else console.log(" 5:",r);return}ke.current=null,console.log(" GPT");const h=p.filter(e=>"ai_support"===e.type||"ai_support_response"===e.type||"user_message"===e.type).map(e=>({content:e.content,isAiResponse:e.isAiResponse,timestamp:e.timestamp,type:e.type})),f=yield ze(e,h),m={id:(Date.now()+1).toString(),content:f,isAiResponse:!0,timestamp:new Date,type:"ai_support_response"};n(e=>[...e,m])}catch(r){console.error("AI:",r);const e={id:(Date.now()+1).toString(),content:"AI",isAiResponse:!0,timestamp:new Date,type:"ai_support_response"};n(t=>[...t,e]),u({title:"",description:"AI",variant:"destructive"})}}),ze=(e,...t)=>T(this,[e,...t],function*(e,t=[]){var n;try{const{buildApiUrl:r}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),i=r("/chatgpt"),s=null==(n=t.find(e=>"ai_support"===e.type))?void 0:n.timestamp,o=s?Math.floor((Date.now()-new Date(s).getTime())/6e4):0;if(o>=20)return" 20\n\n\n : 0123-456-789\n\n";const a=t.slice(-6).map(e=>`${e.isAiResponse?"AI":""}: ${e.content}`).join("\n"),l=a?`\n${a}\n\n\n${e}`:e,c=yield fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({text:l,useOnlyKnowledgeBase:!0,conversationHistory:t.slice(-4),elapsedMinutes:o,aiSupportMode:!0,aiAssistSettings:{responsePattern:xe.responsePattern,customInstructions:xe.customInstructions,conversationStyle:xe.conversationStyle,questionFlow:xe.questionFlow,branchingConditions:xe.branchingConditions}})});if(!c.ok)throw new Error("AI");let u=(yield c.json()).response||"AI";if(u=(e=>{switch(xe.conversationStyle){case"frank":return e.replace(//g,"").replace(//g,"");case"business":return`${e}`;case"technical":return`${e}`;default:return e}})(u),"minimal"===xe.responsePattern){const e=u.split(/[\n]/).filter(e=>e.trim());u=e.slice(0,2).join("")+(e.length>2?"...":"")}else xe.responsePattern;return xe.customInstructions,u=Fe(u),o>=15&&o<20&&(u+=`\n\n ${o}5`),u}catch(r){return console.error("AI:",r),"AI"}}),Fe=e=>{let t=e.trim();const n=t.split("");n.length>1&&(t=n[0]+"");const r=t.split("\n");for(const s of r){const e=s.trim();if(e&&(e.includes("")||e.includes("")||e.includes("")||e.includes("")||e.includes(""))){t=e;break}}t.length>100&&(t=t.substring(0,100));let i=t;return[{from://g,to:""},{from://g,to:""},{from://g,to:""},{from://g,to:""},{from://g,to:""},{from://g,to:""},{from://g,to:""},{from://g,to:""}].forEach(({from:e,to:t})=>{i=i.replace(e,t)}),i},Be=e=>{const t=Math.floor(e/60);return t>=20?"critical":t>=15?"warning":"normal"},[Ue,We]=Pt.useState(!1),[$e,He]=Pt.useState(null),[Ve,qe]=Pt.useState(!1);return Lt.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[Lt.jsxs("div",{className:"sticky top-0 z-50 bg-white border-b px-4 py-3 flex items-center justify-between shadow-sm",children:[Lt.jsxs("div",{className:"flex items-center gap-4",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(PL,{htmlFor:"machine-type",className:"text-sm font-medium text-gray-700",children:":"}),Lt.jsxs("div",{className:"relative",children:[Lt.jsx(BW,{children:Lt.jsxs(UW,{open:I&&!je.current&&!$&&!Z.trim(),children:[Lt.jsx(WW,{asChild:!0,children:Lt.jsx("div",{className:"w-48",children:Lt.jsx(ML,{id:"machine-type",type:"text",placeholder:G?"...":"...",value:Z,onChange:e=>{const t=e.target.value;console.log(" :",t),Q(t),Ee(t),ne(!0)},onFocus:()=>{console.log(" :",{machineTypesCount:F.length,machineTypes:F,filteredMachineTypesCount:se.length,showMachineTypeSuggestions:te}),ne(!0),F.length>0&&oe(F)},onBlur:e=>{const t=e.relatedTarget;t&&t.closest(".machine-type-dropdown")||setTimeout(()=>{ne(!1)},150)},disabled:G,className:"w-48"})})}),Lt.jsx($W,{side:"bottom",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:Lt.jsx("p",{children:""})})]})}),(console.log(" :",{showMachineTypeSuggestions:te,filteredMachineTypesCount:se.length,filteredMachineTypes:se,machineTypesCount:F.length,machineTypes:F,isLoadingMachineTypes:G}),null),te&&Lt.jsx("div",{id:"machine-type-menu",className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto machine-type-dropdown",children:G?Lt.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"..."}):se.length>0?se.map(e=>Lt.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{console.log("  ==========================="),console.log(" :",e);try{Q(e.machine_type_name),H(e.id),je.current=e.id,ne(!1),q(""),_e.current="",ee(""),W([]),le([]),ke.current=null,console.log(" :",e.machine_type_name),Ne(e.id)}catch(t){console.error(" :",t)}})(e)},onMouseDown:e=>{e.preventDefault()},tabIndex:0,children:e.machine_type_name},e.id)):Lt.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:Z.trim()?"":0===F.length?"...":""})})]})]}),Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(PL,{htmlFor:"machine-number",className:"text-sm font-medium text-gray-700",children:":"}),Lt.jsxs("div",{className:"relative",children:[Lt.jsx(BW,{children:Lt.jsxs(UW,{open:I&&(je.current||$)&&!_e.current&&!V&&!X.trim(),children:[Lt.jsx(WW,{asChild:!0,children:Lt.jsx("div",{className:"w-48",children:Lt.jsx(ML,{id:"machine-number",type:"text",placeholder:J?"...":"...",value:X,onChange:e=>{const t=e.target.value;console.log(" :",t),ee(t),Te(t),ie(!0)},onFocus:()=>{console.log(" "),console.log(" :",{selectedMachineType:$,machinesCount:U.length,machines:U,filteredMachinesCount:ae.length,filteredMachines:ae,isLoadingMachines:J,machineNumberInput:X,showMachineNumberSuggestions:re}),ie(!0),U.length>0?(le(U),console.log(" :",U.length,"")):console.log(" ")},onBlur:e=>{const t=e.relatedTarget;t&&t.closest(".machine-number-dropdown")||setTimeout(()=>{ie(!1)},150)},disabled:!$||J,className:"w-48"})})}),Lt.jsx($W,{side:"bottom",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:Lt.jsx("p",{children:""})})]})}),(console.log(" :",{showMachineNumberSuggestions:re,filteredMachinesCount:ae.length,filteredMachines:ae,selectedMachineType:$,machineNumberInput:X,isLoadingMachines:J}),null),re&&Lt.jsx("div",{id:"machine-number-menu",className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto machine-number-dropdown",children:ae.length>0?ae.map(e=>Lt.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{console.log(" :",e);try{q(e.id),_e.current=e.id,ee(e.machine_number),ie(!1);const t=je.current&&""!==je.current.trim()||$&&""!==$.trim(),n=e.id&&""!==e.id.trim();t&&n&&(ke.current=null,console.log(" ",{machineType:je.current||$,machineNumber:e.id})),console.log(" :",e.machine_number)}catch(t){console.error(" :",t)}})(e)},onMouseDown:e=>{e.preventDefault()},tabIndex:0,children:e.machine_number},e.id)):Lt.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:X.trim()?"":$?"":""})})]})]})]}),Lt.jsxs("div",{className:"flex items-center gap-6",children:[Lt.jsxs(Rg,{variant:"outline",size:"lg",onClick:()=>T(this,null,function*(){yield Oe(),h(!0)}),disabled:E,className:"bg-blue-50 text-blue-600 hover:bg-blue-100 border-4 border-blue-600 px-8 py-3 text-lg font-bold",children:[Lt.jsx(Ag,{className:"w-6 h-6 mr-3"}),""]}),Lt.jsx("div",{className:"w-16"}),Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:()=>{console.log(" "),window.dispatchEvent(new CustomEvent("open-camera")),console.log(" open-camera ")},className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",children:[Lt.jsx(Bg,{className:"w-4 h-4 mr-2"}),""]}),I&&Lt.jsx("div",{className:"px-4 py-2 rounded-lg border text-sm font-medium "+("critical"===Be(A)?"bg-red-100 text-red-800 border-red-200":"warning"===Be(A)?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200"),children:Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx("span",{children:""}),Lt.jsx("span",{children:(Ge=A,`${Math.floor(Ge/60)}:${(Ge%60).toString().padStart(2,"0")}`)}),"warning"===Be(A)&&Lt.jsx("span",{className:"text-xs",children:"(5)"}),"critical"===Be(A)&&Lt.jsx("span",{className:"text-xs",children:"()"})]})}),Lt.jsxs(Rg,{variant:"outline",size:"lg",onClick:()=>{const e={id:Date.now().toString(),content:"",isAiResponse:!0,timestamp:new Date,type:"ai_support_end"};n(t=>[...t,e]),k(!1),_(null),O(0),M(0),z(""),u({title:"",description:""})},disabled:!I||i,className:"px-8 py-3 text-base font-semibold mr-6 "+(I?"critical"===Be(A)?"bg-red-50 border-red-200 text-red-700 hover:bg-red-100":"warning"===Be(A)?"bg-yellow-50 border-yellow-200 text-yellow-700 hover:bg-yellow-100":"bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100":"bg-gray-50 border-gray-200 text-gray-500 cursor-not-allowed"),children:[Lt.jsx(Ky,{className:"w-6 h-6 mr-3"}),""]})]}),Lt.jsxs("div",{className:"flex items-center gap-4",children:[Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:Ae,disabled:i||0===t.length,children:[Lt.jsx(Fy,{className:"w-4 h-4 mr-2"}),""]}),Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:()=>T(this,null,function*(){try{yield s(),ue(!1),pe(null),k(!1),H(""),je.current="",q(""),_e.current="",Q(""),ee(""),W([]),le([]),Pe.current=!1,Re.current=!1,Ie.current=!1,ke.current=null,u({title:"",description:""})}catch(e){u({title:"",description:"",variant:"destructive"})}}),disabled:i||o||0===t.length,children:[Lt.jsx(My,{className:"w-4 h-4 mr-2"}),""]})]})]}),P?Lt.jsx("div",{className:"flex-1",children:Lt.jsx(qW,{})}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scroll-smooth",children:[t.map(e=>Lt.jsx("div",{className:"flex "+(e.isAiResponse?"justify-end":"justify-start"),children:Lt.jsx("div",{className:"max-w-2xl "+(e.isAiResponse?"w-auto":"w-full"),children:e.isAiResponse&&ce&&(null==de?void 0:de.currentQuestion)===e.content?Lt.jsx(TroubleshootingQABubble,{question:e.content,options:(null==de?void 0:de.currentOptions)||[],reasoning:null==de?void 0:de.reasoning,onAnswer:Me,isLoading:i}):e.isAiResponse&&(e.content.includes("")||e.content.includes(""))?Lt.jsx(SolutionBubble,{solution:e.content,problemDescription:null==de?void 0:de.problemDescription,isEmergency:e.content.includes("")}):Lt.jsx(zz,{message:e})})},e.id)),i&&Lt.jsx("div",{className:"flex justify-end",children:Lt.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),Lt.jsx("span",{className:"text-gray-600",children:"AI..."})]})})}),Lt.jsx("div",{ref:d,className:"h-4"})]}),Lt.jsx("div",{className:"border-t bg-white p-4",children:Lt.jsx(Bz,{onSendMessage:(e,...t)=>T(this,[e,...t],function*(e,t=[]){(e.trim()||0!==t.length)&&(ce&&de?yield Me(e):I?yield Le(e,t):r(e,t,!1))}),isLoading:i,disabled:ce&&!(null==de?void 0:de.currentQuestion)})})]}),Lt.jsx(uF,{}),Ve&&$e&&Lt.jsx(XF,{}),p&&Lt.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Lt.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[Lt.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Lt.jsx("h2",{className:"text-xl font-semibold",children:""}),Lt.jsxs(Rg,{variant:"ghost",size:"sm",onClick:()=>{h(!1),w(null),C("")},className:"text-gray-500 hover:text-gray-700",children:[Lt.jsx(Ky,{className:"w-4 h-4 mr-2"}),""]})]}),Lt.jsx("div",{className:"mb-4",children:Lt.jsx(ML,{type:"text",placeholder:"...",value:S,onChange:e=>De(e.target.value),className:"w-full"})}),Lt.jsx("div",{className:"mb-4",children:Lt.jsx(tB,{onKeywordClick:e=>{De(e)}})}),!x&&Lt.jsx("div",{className:"overflow-auto",children:Lt.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-sm",children:[Lt.jsx("thead",{children:Lt.jsxs("tr",{className:"bg-gray-100",children:[Lt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""})]})}),Lt.jsx("tbody",{children:0===y.length?Lt.jsx("tr",{children:Lt.jsx("td",{colSpan:2,className:"border border-gray-300 p-4 text-center text-gray-500",children:""})}):y.map(e=>Lt.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer "+(x===e.id?"bg-blue-50 ring-2 ring-blue-500":""),onClick:()=>{return t=e.id,void w(t);var t},children:[Lt.jsx("td",{className:"border border-gray-300 p-3",children:Lt.jsx("div",{className:"break-words leading-tight text-sm font-semibold hover:text-blue-600",children:e.title})}),Lt.jsx("td",{className:"border border-gray-300 p-3",children:Lt.jsx("div",{className:"break-words leading-tight text-sm text-gray-600",children:e.description})})]},e.id))})]})}),x&&Lt.jsx("div",{className:"mt-6",children:Lt.jsx(eB,{guideId:x,onExit:()=>w(null),backButtonText:"",onSendToChat:()=>{console.log(""),h(!1)}})})]})})]});var Ge}},Symbol.toStringTag,{value:"Module"}));function KW(e,[t,n]){return Math.min(n,Math.max(t,e))}var JW=["PageUp","PageDown"],YW=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ZW={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},QW="Slider",[XW,e$,t$]=Lw(QW),[n$]=Zy(QW,[t$]),[r$,i$]=n$(QW),s$=Pt.forwardRef((e,t)=>{const n=e,{name:r,min:i=0,max:s=100,step:o=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[i],value:d,onValueChange:p=()=>{},onValueCommit:h=()=>{},inverted:g=!1,form:y}=n,b=v(n,["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"]),x=Pt.useRef(new Set),w=Pt.useRef(0),S="horizontal"===a?l$:c$,[C=[],E]=ib({prop:d,defaultProp:u,onChange:e=>{var t;null==(t=[...x.current][w.current])||t.focus(),p(e)}}),T=Pt.useRef(C);function N(e,t,{commit:n}={commit:!1}){const r=function(e){return(String(e).split(".")[1]||"").length}(o),a=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-i)/o)*o+i,r),l=KW(a,[i,s]);E((e=[])=>{const r=function(e=[],t,n){const r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}(e,l,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(r,c*o)){w.current=r.indexOf(l);const t=String(r)!==String(e);return t&&n&&h(r),t?r:e}return e})}return Lt.jsx(r$,{scope:e.__scopeSlider,name:r,disabled:l,min:i,max:s,valueIndexToChangeRef:w,thumbs:x.current,values:C,orientation:a,form:y,children:Lt.jsx(XW.Provider,{scope:e.__scopeSlider,children:Lt.jsx(XW.Slot,{scope:e.__scopeSlider,children:Lt.jsx(S,m(f({"aria-disabled":l,"data-disabled":l?"":void 0},b),{ref:t,onPointerDown:Yy(b.onPointerDown,()=>{l||(T.current=C)}),min:i,max:s,inverted:g,onSlideStart:l?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}(C,e);N(e,t)},onSlideMove:l?void 0:function(e){N(e,w.current)},onSlideEnd:l?void 0:function(){const e=T.current[w.current];C[w.current]!==e&&h(C)},onHomeKeyDown:()=>!l&&N(i,0,{commit:!0}),onEndKeyDown:()=>!l&&N(s,C.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!l){const n=JW.includes(e.key)||e.shiftKey&&YW.includes(e.key)?10:1,r=w.current;N(C[r]+o*n*t,r,{commit:!0})}}}))})})})});s$.displayName=QW;var[o$,a$]=n$(QW,{startEdge:"left",endEdge:"right",size:"width",direction:1}),l$=Pt.forwardRef((e,t)=>{const n=e,{min:r,max:i,dir:s,inverted:o,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u}=n,d=v(n,["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),[p,h]=Pt.useState(null),g=mv(t,e=>h(e)),y=Pt.useRef(void 0),b=pF(s),x="ltr"===b,w=x&&!o||!x&&o;function S(e){const t=y.current||p.getBoundingClientRect(),n=x$([0,t.width],w?[r,i]:[i,r]);return y.current=t,n(e-t.left)}return Lt.jsx(o$,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:Lt.jsx(u$,m(f({dir:b,"data-orientation":"horizontal"},d),{ref:g,style:m(f({},d.style),{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:e=>{const t=S(e.clientX);null==a||a(t)},onSlideMove:e=>{const t=S(e.clientX);null==l||l(t)},onSlideEnd:()=>{y.current=void 0,null==c||c()},onStepKeyDown:e=>{const t=ZW[w?"from-left":"from-right"].includes(e.key);null==u||u({event:e,direction:t?-1:1})}}))})}),c$=Pt.forwardRef((e,t)=>{const n=e,{min:r,max:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c}=n,u=v(n,["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),d=Pt.useRef(null),p=mv(t,d),h=Pt.useRef(void 0),g=!s;function y(e){const t=h.current||d.current.getBoundingClientRect(),n=x$([0,t.height],g?[i,r]:[r,i]);return h.current=t,n(e-t.top)}return Lt.jsx(o$,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:Lt.jsx(u$,m(f({"data-orientation":"vertical"},u),{ref:p,style:m(f({},u.style),{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:e=>{const t=y(e.clientY);null==o||o(t)},onSlideMove:e=>{const t=y(e.clientY);null==a||a(t)},onSlideEnd:()=>{h.current=void 0,null==l||l()},onStepKeyDown:e=>{const t=ZW[g?"from-bottom":"from-top"].includes(e.key);null==c||c({event:e,direction:t?-1:1})}}))})}),u$=Pt.forwardRef((e,t)=>{const n=e,{__scopeSlider:r,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c}=n,u=v(n,["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"]),d=i$(QW,r);return Lt.jsx(cb.span,m(f({},u),{ref:t,onKeyDown:Yy(e.onKeyDown,e=>{"Home"===e.key?(a(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):JW.concat(YW).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:Yy(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():i(e)}),onPointerMove:Yy(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:Yy(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),o(e))})}))}),d$="SliderTrack",p$=Pt.forwardRef((e,t)=>{const n=e,{__scopeSlider:r}=n,i=v(n,["__scopeSlider"]),s=i$(d$,r);return Lt.jsx(cb.span,m(f({"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation},i),{ref:t}))});p$.displayName=d$;var h$="SliderRange",f$=Pt.forwardRef((e,t)=>{const n=e,{__scopeSlider:r}=n,i=v(n,["__scopeSlider"]),s=i$(h$,r),o=a$(h$,r),a=mv(t,Pt.useRef(null)),l=s.values.length,c=s.values.map(e=>b$(e,s.min,s.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return Lt.jsx(cb.span,m(f({"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0},i),{ref:a,style:m(f({},e.style),{[o.startEdge]:u+"%",[o.endEdge]:d+"%"})}))});f$.displayName=h$;var m$="SliderThumb",v$=Pt.forwardRef((e,t)=>{const n=e$(e.__scopeSlider),[r,i]=Pt.useState(null),s=mv(t,e=>i(e)),o=Pt.useMemo(()=>r?n().findIndex(e=>e.ref.current===r):-1,[n,r]);return Lt.jsx(g$,m(f({},e),{ref:s,index:o}))}),g$=Pt.forwardRef((e,t)=>{const n=e,{__scopeSlider:r,index:i,name:s}=n,o=v(n,["__scopeSlider","index","name"]),a=i$(m$,r),l=a$(m$,r),[c,u]=Pt.useState(null),d=mv(t,e=>u(e)),p=!c||a.form||!!c.closest("form"),h=Zz(c),g=a.values[i],y=void 0===g?0:b$(g,a.min,a.max),b=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(i,a.values.length),x=null==h?void 0:h[l.size],w=x?function(e,t,n){const r=e/2,i=x$([0,50],[0,r]);return(r-i(t)*n)*n}(x,y,l.direction):0;return Pt.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),Lt.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${y}% + ${w}px)`},children:[Lt.jsx(XW.ItemSlot,{scope:e.__scopeSlider,children:Lt.jsx(cb.span,m(f({role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":a.min,"aria-valuenow":g,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0},o),{ref:d,style:void 0===g?{display:"none"}:e.style,onFocus:Yy(e.onFocus,()=>{a.valueIndexToChangeRef.current=i})}))}),p&&Lt.jsx(y$,{name:null!=s?s:a.name?a.name+(a.values.length>1?"[]":""):void 0,form:a.form,value:g},i)]})});v$.displayName=m$;var y$=Pt.forwardRef((e,t)=>{var n=e,{__scopeSlider:r,value:i}=n,s=v(n,["__scopeSlider","value"]);const o=Pt.useRef(null),a=mv(o,t),l=Yz(i);return Pt.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(l!==i&&n){const t=new Event("input",{bubbles:!0});n.call(e,i),e.dispatchEvent(t)}},[l,i]),Lt.jsx(cb.input,m(f({style:{display:"none"}},s),{ref:a,defaultValue:i}))});function b$(e,t,n){return KW(100/(n-t)*(e-t),[0,100])}function x$(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}y$.displayName="RadioBubbleInput";var w$=s$,S$=p$,C$=f$,E$=v$;const T$=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsxs(w$,m(f({ref:t,className:Ng("relative flex w-full touch-none select-none items-center",r)},i),{children:[Lt.jsx(S$,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:Lt.jsx(C$,{className:"absolute h-full bg-primary"})}),Lt.jsx(E$,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}))});function N$({open:e,title:t,message:n,onCancel:r,onConfirm:i}){return Lt.jsx(Uz,{open:e,onOpenChange:r,children:Lt.jsxs(Vz,{className:"sm:max-w-md",children:[Lt.jsxs(qz,{children:[Lt.jsx("div",{className:"text-orange-500 mb-2",children:Lt.jsx(zy,{className:"h-8 w-8"})}),Lt.jsx(Kz,{className:"text-lg font-semibold",children:t}),Lt.jsx(Jz,{className:"mt-2 text-sm",children:n})]}),Lt.jsxs(Gz,{className:"flex justify-end space-x-2 pt-2",children:[Lt.jsx(Rg,{variant:"outline",onClick:r,children:""}),Lt.jsx(Rg,{variant:"default",className:"bg-red-500 hover:bg-red-600 text-white",onClick:i,children:"OK"})]})]})})}T$.displayName=w$.displayName;const P$=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,logout:t}=Km(),{toast:n}=nv(),[r,i]=Pt.useState(!1),[s,o]=Pt.useState(!0),[a,l]=Pt.useState(!0),[c,u]=Pt.useState([80]),[d,p]=Pt.useState(!1),[h,f]=Pt.useState(!0),[m,v]=Pt.useState(!0);Pt.useEffect(()=>{(()=>{try{const e=localStorage.getItem("emergencyRecoverySettings");if(e){const t=JSON.parse(e);void 0!==t.notifications&&o(t.notifications),void 0!==t.textToSpeech&&l(t.textToSpeech),void 0!==t.speechVolume&&u(t.speechVolume),void 0!==t.darkMode&&p(t.darkMode),void 0!==t.autoSave&&f(t.autoSave),void 0!==t.useOnlyKnowledgeBase&&v(t.useOnlyKnowledgeBase)}}catch(e){console.error(":",e)}})()},[]);const g=()=>{try{const e={notifications:s,textToSpeech:a,speechVolume:c,darkMode:d,autoSave:h,useOnlyKnowledgeBase:m};localStorage.setItem("emergencyRecoverySettings",JSON.stringify(e)),localStorage.setItem("useOnlyKnowledgeBase",m.toString()),window.dispatchEvent(new CustomEvent("settingsChanged",{detail:e}))}catch(e){console.error(":",e)}};return Pt.useEffect(()=>{g()},[s,a,c,d,h,m]),Lt.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-5xl mx-auto w-full bg-gradient-to-br from-blue-50 to-indigo-50",children:[Lt.jsxs("div",{className:"mb-6",children:[Lt.jsxs("h1",{className:"text-2xl font-bold flex items-center bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:[Lt.jsx(Ry,{className:"mr-2 h-6 w-6 text-indigo-500"}),""]}),Lt.jsx("p",{className:"text-blue-400",children:""})]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Lt.jsxs(gL,{className:"border border-blue-200 shadow-md overflow-hidden",children:[Lt.jsx(yL,{className:"pb-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:Lt.jsxs(bL,{className:"text-lg flex items-center",children:[Lt.jsx(Uy,{className:"mr-2 h-5 w-5"}),""]})}),Lt.jsx(wL,{className:"bg-white",children:Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex items-center justify-between py-2",children:[Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-blue-800",children:null==e?void 0:e.displayName}),Lt.jsx("p",{className:"text-sm text-blue-400",children:null==e?void 0:e.username}),Lt.jsx("p",{className:"text-sm text-blue-400",children:(null==e?void 0:e.department)||""})]}),Lt.jsx("div",{className:"text-white text-xs px-3 py-1 rounded-full "+("admin"===(null==e?void 0:e.role)?"bg-gradient-to-r from-purple-500 to-indigo-500":"bg-gradient-to-r from-blue-500 to-green-500"),children:"admin"===(null==e?void 0:e.role)?"":""})]}),Lt.jsx("div",{className:"border-t border-blue-100 pt-3",children:Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Emergency Recovery Chat"}),Lt.jsx("p",{className:"text-sm text-blue-500",children:" 1.0.0"}),Lt.jsx("p",{className:"text-sm text-blue-500",children:" 2024 All Rights Reserved"}),Lt.jsx("p",{className:"text-xs text-blue-400",children:""})]})})]})})]}),("admin"===(null==e?void 0:e.role)||"employee"===(null==e?void 0:e.role))&&Lt.jsxs(gL,{className:"border border-blue-200 shadow-md overflow-hidden",children:[Lt.jsx(yL,{className:"pb-2 bg-gradient-to-r from-blue-700 to-indigo-700 text-white",children:Lt.jsxs(bL,{className:"text-lg flex items-center",children:[Lt.jsx(Iy,{className:"mr-2 h-5 w-5"}),""]})}),Lt.jsx(wL,{className:"bg-white",children:Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-blue-800",children:""}),Lt.jsx("p",{className:"text-sm text-blue-400",children:""})]}),Lt.jsx(Nm,{to:"/users",children:Lt.jsxs(Rg,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[Lt.jsx(By,{className:"mr-2 h-4 w-4 text-blue-500"}),""]})})]}),Lt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-blue-800",children:""}),Lt.jsx("p",{className:"text-sm text-blue-400",children:"DBGPT"})]}),Lt.jsx(Nm,{to:"/system-diagnostic",children:Lt.jsxs(Rg,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[Lt.jsx(Gg,{className:"mr-2 h-4 w-4 text-blue-500"}),""]})})]}),Lt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-blue-800",children:""}),Lt.jsx("p",{className:"text-sm text-blue-400",children:""})]}),Lt.jsx(Nm,{to:"/machine-management",children:Lt.jsxs(Rg,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[Lt.jsx(Gy,{className:"mr-2 h-4 w-4 text-blue-500"}),""]})})]}),Lt.jsxs("div",{className:"border-t border-blue-100 pt-4 space-y-3",children:[Lt.jsx("div",{className:"text-sm font-medium text-blue-800 mb-3",children:""}),Lt.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[Lt.jsxs(Rg,{onClick:()=>T(this,null,function*(){try{const e=yield fetch("/api/api/tech-support/cleanup-uploads",{method:"POST"});if(!e.ok)throw new Error("");yield e.json(),n({title:"",description:""})}catch(e){n({title:"",description:"",variant:"destructive"})}}),variant:"destructive",className:"w-full",children:[Lt.jsx(My,{className:"mr-2 h-4 w-4"}),""]}),Lt.jsxs(Rg,{onClick:()=>T(this,null,function*(){try{n({title:"",description:"..."});const e=yield fetch("/api/api/tech-support/backup-logs",{method:"POST"});if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}const t=yield e.json();if(!t.success)throw new Error(t.message||"");{const e=t.totalSize?(t.totalSize/1024/1024).toFixed(2):"0";n({title:"",description:`${t.fileCount} (${e} MB)`})}}catch(e){console.error(":",e),n({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}}),variant:"outline",className:"w-full",children:[Lt.jsx(iy,{className:"mr-2 h-4 w-4"}),""]})]})]})]})})]}),Lt.jsxs(gL,{className:"border border-blue-200 shadow-md overflow-hidden",children:[Lt.jsx(yL,{className:"pb-2 bg-gradient-to-r from-blue-400 to-sky-500 text-white",children:Lt.jsxs(bL,{className:"text-lg flex items-center",children:[Lt.jsx(by,{className:"mr-2 h-5 w-5"}),""]})}),Lt.jsx(wL,{className:"bg-white",children:Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex items-center justify-between py-2",children:[Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-blue-700",children:""}),Lt.jsx("p",{className:"text-sm text-blue-400",children:""})]}),Lt.jsx(cF,{checked:s,onCheckedChange:o,className:"data-[state=checked]:bg-blue-500"})]}),Lt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-blue-700",children:""}),Lt.jsx("p",{className:"text-sm text-blue-400",children:"AI"})]}),Lt.jsx(cF,{checked:a,onCheckedChange:l,className:"data-[state=checked]:bg-blue-500"})]}),a&&Lt.jsxs("div",{className:"py-2 border-t border-blue-100 pt-3",children:[Lt.jsx("p",{className:"font-medium mb-2 text-blue-700",children:""}),Lt.jsx(T$,{value:c,onValueChange:u,max:100,step:1,className:"data-[state=checked]:bg-blue-500"}),Lt.jsxs("div",{className:"flex justify-between mt-1",children:[Lt.jsx(Hy,{className:"h-4 w-4 text-blue-400"}),Lt.jsxs("span",{className:"text-sm text-blue-500 font-medium",children:[c[0],"%"]})]})]})]})})]}),Lt.jsxs(gL,{className:"border border-blue-200 shadow-md overflow-hidden",children:[Lt.jsx(yL,{className:"pb-2 bg-gradient-to-r from-indigo-500 to-blue-600 text-white",children:Lt.jsxs(bL,{className:"text-lg flex items-center",children:[Lt.jsx(Ry,{className:"mr-2 h-5 w-5"}),""]})}),Lt.jsx(wL,{className:"bg-white",children:Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex items-center justify-between py-2",children:[Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-indigo-700",children:""}),Lt.jsx("p",{className:"text-sm text-indigo-400",children:""})]}),Lt.jsx(cF,{checked:d,onCheckedChange:p,className:"data-[state=checked]:bg-indigo-500"})]}),Lt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-indigo-700",children:""}),Lt.jsx("p",{className:"text-sm text-indigo-400",children:""})]}),Lt.jsx(cF,{checked:h,onCheckedChange:f,className:"data-[state=checked]:bg-indigo-500"})]}),Lt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-indigo-700",children:""}),Lt.jsx("p",{className:"text-sm text-indigo-400",children:"AI"})]}),Lt.jsx(cF,{checked:m,onCheckedChange:v,className:"data-[state=checked]:bg-indigo-500"})]}),Lt.jsx("div",{className:"py-2 border-t border-blue-100 pt-3 flex justify-end",children:Lt.jsxs(Rg,{onClick:g,className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white hover:from-blue-600 hover:to-indigo-600",children:[Lt.jsx(Ey,{className:"mr-2 h-4 w-4"}),""]})})]})})]})]}),Lt.jsx(N$,{open:r,title:"",message:"",onCancel:()=>i(!1),onConfirm:()=>T(this,null,function*(){try{yield t()}catch(e){n({title:"",description:"",variant:"destructive"})}finally{i(!1)}})})]})}},Symbol.toStringTag,{value:"Module"}));var R$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=bv(`Primitive.${t}`),r=Pt.forwardRef((e,r)=>{const i=e,{asChild:s}=i,o=v(i,["asChild"]),a=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Lt.jsx(a,m(f({},o),{ref:r}))});return r.displayName=`Primitive.${t}`,m(f({},e),{[t]:r})},{}),I$="horizontal",k$=["horizontal","vertical"],j$=Pt.forwardRef((e,t)=>{const n=e,{decorative:r,orientation:i=I$}=n,s=v(n,["decorative","orientation"]),o=function(e){return k$.includes(e)}(i)?i:I$,a=r?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"};return Lt.jsx(R$.div,m(f(f({"data-orientation":o},a),s),{ref:t}))});j$.displayName="Separator";var _$=j$;const A$=Pt.forwardRef((e,t)=>{var n=e,{className:r,orientation:i="horizontal",decorative:s=!0}=n,o=v(n,["className","orientation","decorative"]);return Lt.jsx(_$,f({ref:t,decorative:s,orientation:i,className:Ng("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",r)},o))});A$.displayName=_$.displayName;const O$=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{toast:e}=nv(),[t,n]=Pt.useState(null),[r,i]=Pt.useState(null),[s,o]=Pt.useState(!1),[a,l]=Pt.useState(!1),c=e=>{const t="/api".replace(/\/$/,""),n=e.startsWith("/")?e:`/${e}`;return t.endsWith("/api")?`${t}${n}`:`${t}/api${n}`},u=()=>T(this,null,function*(){var t,r;o(!0),n(null);try{const i=yield fetch(c("/_diag/postgresql")),s=yield i.json(),o={success:s.success,status:s.success?"OK":"ERROR",message:s.message,error:s.error,current_time:null==(t=s.data)?void 0:t.current_time,version:null==(r=s.data)?void 0:r.version,timestamp:s.timestamp};n(o),"OK"===o.status?e({title:"DB",description:"",variant:"default"}):e({title:"DB",description:o.error||o.message||"",variant:"destructive"})}catch(i){const t=i instanceof Error?i.message:"";n({status:"ERROR",error:t}),e({title:"DB",description:t,variant:"destructive"})}finally{o(!1)}}),d=()=>T(this,null,function*(){l(!0),i(null);try{const t=yield fetch(c("/_diag/gpt")),n=yield t.json(),r={success:n.success,status:n.success?"OK":"ERROR",message:n.message,error:n.error,details:n.details,timestamp:n.timestamp};i(r),"OK"===r.status?e({title:"GPT",description:"GPT",variant:"default"}):e({title:"GPT",description:r.error||r.message||"GPT",variant:"destructive"})}catch(t){const n=t instanceof Error?t.message:"";i({status:"ERROR",error:n}),e({title:"GPT",description:n,variant:"destructive"})}finally{l(!1)}});return Lt.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[Lt.jsxs("div",{className:"mb-8",children:[Lt.jsx("h1",{className:"text-3xl font-bold mb-2",children:""}),Lt.jsx("p",{className:"text-muted-foreground",children:"GPT"})]}),Lt.jsx(gL,{className:"mb-6",children:Lt.jsx(wL,{className:"pt-6",children:Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsxs("div",{children:[Lt.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),Lt.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),Lt.jsxs(Rg,{onClick:()=>T(this,null,function*(){yield u(),yield d()}),disabled:s||a,className:"flex items-center gap-2",children:[s||a?Lt.jsx(hy,{className:"h-4 w-4 animate-spin"}):Lt.jsx(Cy,{className:"h-4 w-4"}),""]})]})})}),Lt.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[Lt.jsxs(gL,{children:[Lt.jsx(yL,{children:Lt.jsxs(bL,{className:"flex items-center gap-2",children:[Lt.jsx(Xg,{className:"h-5 w-5"}),"PostgreSQL"]})}),Lt.jsxs(wL,{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsx("p",{className:"text-sm text-muted-foreground",children:""}),Lt.jsxs(Rg,{onClick:u,disabled:s,size:"sm",variant:"outline",children:[s?Lt.jsx(hy,{className:"h-4 w-4 animate-spin"}):Lt.jsx(Gg,{className:"h-4 w-4"}),""]})]}),t&&Lt.jsxs("div",{className:"space-y-3",children:[Lt.jsx(A$,{}),Lt.jsxs("div",{className:"flex items-center gap-2",children:["OK"===t.status?Lt.jsx(Gg,{className:"h-4 w-4 text-green-500"}):Lt.jsx(Kg,{className:"h-4 w-4 text-red-500"}),Lt.jsx(VW,{variant:"OK"===t.status?"default":"destructive",children:"OK"===t.status?"":""})]}),"OK"===t.status&&t.current_time&&Lt.jsxs("div",{className:"text-sm",children:[Lt.jsx("span",{className:"font-medium",children:"DB:"})," ",new Date(t.current_time).toLocaleString("ja-JP")]}),"ERROR"===t.status&&(t.error||t.message)&&Lt.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md",children:Lt.jsxs("div",{className:"flex items-start gap-2",children:[Lt.jsx(qg,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),Lt.jsx("span",{children:t.error||t.message})]})})]})]})]}),Lt.jsxs(gL,{children:[Lt.jsx(yL,{children:Lt.jsxs(bL,{className:"flex items-center gap-2",children:[Lt.jsx(yy,{className:"h-5 w-5"}),"GPT"]})}),Lt.jsxs(wL,{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsx("p",{className:"text-sm text-muted-foreground",children:"OpenAI API"}),Lt.jsxs(Rg,{onClick:d,disabled:a,size:"sm",variant:"outline",children:[a?Lt.jsx(hy,{className:"h-4 w-4 animate-spin"}):Lt.jsx(Gg,{className:"h-4 w-4"}),""]})]}),r&&Lt.jsxs("div",{className:"space-y-3",children:[Lt.jsx(A$,{}),Lt.jsxs("div",{className:"flex items-center gap-2",children:["OK"===r.status?Lt.jsx(Gg,{className:"h-4 w-4 text-green-500"}):Lt.jsx(Kg,{className:"h-4 w-4 text-red-500"}),Lt.jsx(VW,{variant:"OK"===r.status?"default":"destructive",children:"OK"===r.status?"":""})]}),"OK"===r.status&&r.message&&Lt.jsxs("div",{className:"text-sm",children:[Lt.jsx("span",{className:"font-medium",children:"GPT:"}),Lt.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded text-xs max-h-20 overflow-y-auto",children:r.message})]}),"ERROR"===r.status&&(r.error||r.message)&&Lt.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md",children:Lt.jsxs("div",{className:"flex items-start gap-2",children:[Lt.jsx(qg,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),Lt.jsxs("div",{className:"flex-1",children:[Lt.jsx("div",{className:"font-medium",children:r.error}),Lt.jsx("div",{className:"text-red-500 mt-1",children:r.message}),r.details&&Lt.jsx("div",{className:"text-xs text-red-400 mt-1 font-mono",children:r.details})]})]})})]})]})]})]}),t&&r&&Lt.jsxs(gL,{className:"mt-6",children:[Lt.jsx(yL,{children:Lt.jsx(bL,{children:""})}),Lt.jsxs(wL,{children:[Lt.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(Xg,{className:"h-4 w-4"}),Lt.jsx("span",{children:"PostgreSQL:"}),Lt.jsx(VW,{variant:"OK"===t.status?"default":"destructive",children:"OK"===t.status?"":""})]}),Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(yy,{className:"h-4 w-4"}),Lt.jsx("span",{children:"GPT:"}),Lt.jsx(VW,{variant:"OK"===r.status?"default":"destructive",children:"OK"===r.status?"":""})]})]}),"OK"===t.status&&"OK"===r.status&&Lt.jsx("div",{className:"mt-4 p-3 bg-green-50 text-green-700 rounded-md",children:Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(Gg,{className:"h-4 w-4"}),Lt.jsx("span",{className:"font-medium",children:""})]})}),("ERROR"===t.status||"ERROR"===r.status)&&Lt.jsx("div",{className:"mt-4 p-3 bg-yellow-50 text-yellow-700 rounded-md",children:Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(qg,{className:"h-4 w-4"}),Lt.jsx("span",{className:"font-medium",children:""})]})})]})]})]})}},Symbol.toStringTag,{value:"Module"}));function D$(e){const t=M$(e),n=Pt.forwardRef((e,n)=>{const r=e,{children:i}=r,s=v(r,["children"]),o=Pt.Children.toArray(i),a=o.find(z$);if(a){const e=a.props.children,r=o.map(t=>t===a?Pt.Children.count(e)>1?Pt.Children.only(null):Pt.isValidElement(e)?e.props.children:null:t);return Lt.jsx(t,m(f({},s),{ref:n,children:Pt.isValidElement(e)?Pt.cloneElement(e,void 0,r):null}))}return Lt.jsx(t,m(f({},s),{ref:n,children:i}))});return n.displayName=`${e}.Slot`,n}function M$(e){const t=Pt.forwardRef((e,t)=>{const n=e,{children:r}=n,i=v(n,["children"]);if(Pt.isValidElement(r)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(r),n=function(e,t){const n=f({},t);for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]=f(f({},i),s):"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return f(f({},e),n)}(i,r.props);return r.type!==Pt.Fragment&&(n.ref=t?fv(t,e):e),Pt.cloneElement(r,n)}return Pt.Children.count(r)>1?Pt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var L$=Symbol("radix.slottable");function z$(e){return Pt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===L$}var F$=[" ","Enter","ArrowUp","ArrowDown"],B$=[" ","Enter"],U$="Select",[W$,$$,H$]=Lw(U$),[V$]=Zy(U$,[H$,GU]),q$=GU(),[G$,K$]=V$(U$),[J$,Y$]=V$(U$),Z$=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:p,required:h,form:v}=e,g=q$(t),[y,b]=Pt.useState(null),[x,w]=Pt.useState(null),[S,C]=Pt.useState(!1),E=pF(c),[T,N]=ib({prop:r,defaultProp:null!=i&&i,onChange:s,caller:U$}),[P,R]=ib({prop:o,defaultProp:a,onChange:l,caller:U$}),I=Pt.useRef(null),k=!y||v||!!y.closest("form"),[j,_]=Pt.useState(new Set),A=Array.from(j).map(e=>e.props.value).join(";");return Lt.jsx(cW,m(f({},g),{children:Lt.jsxs(G$,{required:h,scope:t,trigger:y,onTriggerChange:b,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:nb(),value:P,onValueChange:R,open:T,onOpenChange:N,dir:E,triggerPointerDownPosRef:I,disabled:p,children:[Lt.jsx(W$.Provider,{scope:t,children:Lt.jsx(J$,{scope:e.__scopeSelect,onNativeOptionAdd:Pt.useCallback(e=>{_(t=>new Set(t).add(e))},[]),onNativeOptionRemove:Pt.useCallback(e=>{_(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:n})}),k?Lt.jsxs(LH,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:P,onChange:e=>R(e.target.value),disabled:p,form:v,children:[void 0===P?Lt.jsx("option",{value:""}):null,Array.from(j)]},A):null]})}))};Z$.displayName=U$;var Q$="SelectTrigger",X$=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,disabled:i=!1}=n,s=v(n,["__scopeSelect","disabled"]),o=q$(r),a=K$(Q$,r),l=a.disabled||i,c=mv(t,a.onTriggerChange),u=$$(r),d=Pt.useRef("touch"),[p,h,g]=FH(e=>{const t=u().filter(e=>!e.disabled),n=t.find(e=>e.value===a.value),r=BH(t,e,n);void 0!==r&&a.onValueChange(r.value)}),y=e=>{l||(a.onOpenChange(!0),g()),e&&(a.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return Lt.jsx(uW,m(f({asChild:!0},o),{children:Lt.jsx(cb.button,m(f({type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":zH(a.value)?"":void 0},s),{ref:c,onClick:Yy(s.onClick,e=>{e.currentTarget.focus(),"mouse"!==d.current&&y(e)}),onPointerDown:Yy(s.onPointerDown,e=>{d.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(y(e),e.preventDefault())}),onKeyDown:Yy(s.onKeyDown,e=>{const t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||F$.includes(e.key)&&(y(),e.preventDefault())})}))}))});X$.displayName=Q$;var eH="SelectValue",tH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,className:i,style:s,children:o,placeholder:a=""}=n,l=v(n,["__scopeSelect","className","style","children","placeholder"]),c=K$(eH,r),{onValueNodeHasChildrenChange:u}=c,d=void 0!==o,p=mv(t,c.onValueNodeChange);return Xy(()=>{u(d)},[u,d]),Lt.jsx(cb.span,m(f({},l),{ref:p,style:{pointerEvents:"none"},children:zH(c.value)?Lt.jsx(Lt.Fragment,{children:a}):o}))});tH.displayName=eH;var nH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,children:i}=n,s=v(n,["__scopeSelect","children"]);return Lt.jsx(cb.span,m(f({"aria-hidden":!0},s),{ref:t,children:i||""}))});nH.displayName="SelectIcon";var rH=e=>Lt.jsx(Ab,f({asChild:!0},e));rH.displayName="SelectPortal";var iH="SelectContent",sH=Pt.forwardRef((e,t)=>{const n=K$(iH,e.__scopeSelect),[r,i]=Pt.useState();if(Xy(()=>{i(new DocumentFragment)},[]),!n.open){const t=r;return t?$p.createPortal(Lt.jsx(aH,{scope:e.__scopeSelect,children:Lt.jsx(W$.Slot,{scope:e.__scopeSelect,children:Lt.jsx("div",{children:e.children})})}),t):null}return Lt.jsx(uH,m(f({},e),{ref:t}))});sH.displayName=iH;var oH=10,[aH,lH]=V$(iH),cH=D$("SelectContent.RemoveScroll"),uH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,position:i="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:p,collisionBoundary:h,collisionPadding:g,sticky:y,hideWhenDetached:b,avoidCollisions:x}=n,w=v(n,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),S=K$(iH,r),[C,E]=Pt.useState(null),[T,N]=Pt.useState(null),P=mv(t,e=>E(e)),[R,I]=Pt.useState(null),[k,j]=Pt.useState(null),_=$$(r),[A,O]=Pt.useState(!1),D=Pt.useRef(!1);Pt.useEffect(()=>{if(C)return Ax(C)},[C]),Lb();const M=Pt.useCallback(e=>{const[t,...n]=_().map(e=>e.ref.current),[r]=n.slice(-1),i=document.activeElement;for(const s of e){if(s===i)return;if(null==s||s.scrollIntoView({block:"nearest"}),s===t&&T&&(T.scrollTop=0),s===r&&T&&(T.scrollTop=T.scrollHeight),null==s||s.focus(),document.activeElement!==i)return}},[_,T]),L=Pt.useCallback(()=>M([R,C]),[M,R,C]);Pt.useEffect(()=>{A&&L()},[A,L]);const{onOpenChange:z,triggerPointerDownPosRef:F}=S;Pt.useEffect(()=>{if(C){let e={x:0,y:0};const t=t=>{var n,r,i,s;e={x:Math.abs(Math.round(t.pageX)-(null!=(r=null==(n=F.current)?void 0:n.x)?r:0)),y:Math.abs(Math.round(t.pageY)-(null!=(s=null==(i=F.current)?void 0:i.y)?s:0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():C.contains(n.target)||z(!1),document.removeEventListener("pointermove",t),F.current=null};return null!==F.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[C,z,F]),Pt.useEffect(()=>{const e=()=>z(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[z]);const[B,U]=FH(e=>{const t=_().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=BH(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),W=Pt.useCallback((e,t,n)=>{const r=!D.current&&!n;(void 0!==S.value&&S.value===t||r)&&(I(e),r&&(D.current=!0))},[S.value]),$=Pt.useCallback(()=>null==C?void 0:C.focus(),[C]),H=Pt.useCallback((e,t,n)=>{const r=!D.current&&!n;(void 0!==S.value&&S.value===t||r)&&j(e)},[S.value]),V="popper"===i?pH:dH,q=V===pH?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:p,collisionBoundary:h,collisionPadding:g,sticky:y,hideWhenDetached:b,avoidCollisions:x}:{};return Lt.jsx(aH,{scope:r,content:C,viewport:T,onViewportChange:N,itemRefCallback:W,selectedItem:R,onItemLeave:$,itemTextRefCallback:H,focusSelectedItem:L,selectedItemText:k,position:i,isPositioned:A,searchRef:B,children:Lt.jsx(Nx,{as:cH,allowPinchZoom:!0,children:Lt.jsx(Nb,{asChild:!0,trapped:S.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Yy(s,e=>{var t;null==(t=S.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:Lt.jsx(gb,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:Lt.jsx(V,m(f(f({role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:e=>e.preventDefault()},w),q),{onPlaced:()=>O(!0),ref:P,style:f({display:"flex",flexDirection:"column",outline:"none"},w.style),onKeyDown:Yy(w.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||U(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=_().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>M(t)),e.preventDefault()}})}))})})})})});uH.displayName="SelectContentImpl";var dH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,onPlaced:i}=n,s=v(n,["__scopeSelect","onPlaced"]),o=K$(iH,r),a=lH(iH,r),[l,c]=Pt.useState(null),[u,d]=Pt.useState(null),p=mv(t,e=>d(e)),h=$$(r),g=Pt.useRef(!1),y=Pt.useRef(!0),{viewport:b,selectedItem:x,selectedItemText:w,focusSelectedItem:S}=a,C=Pt.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&b&&x&&w){const e=o.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),n=o.valueNode.getBoundingClientRect(),r=w.getBoundingClientRect();if("rtl"!==o.dir){const i=r.left-t.left,s=n.left-i,o=e.left-s,a=e.width+o,c=Math.max(a,t.width),u=window.innerWidth-oH,d=KW(s,[oH,Math.max(oH,u-c)]);l.style.minWidth=a+"px",l.style.left=d+"px"}else{const i=t.right-r.right,s=window.innerWidth-n.right-i,o=window.innerWidth-e.right-s,a=e.width+o,c=Math.max(a,t.width),u=window.innerWidth-oH,d=KW(s,[oH,Math.max(oH,u-c)]);l.style.minWidth=a+"px",l.style.right=d+"px"}const s=h(),a=window.innerHeight-2*oH,c=b.scrollHeight,d=window.getComputedStyle(u),p=parseInt(d.borderTopWidth,10),f=parseInt(d.paddingTop,10),m=parseInt(d.borderBottomWidth,10),v=p+f+c+parseInt(d.paddingBottom,10)+m,y=Math.min(5*x.offsetHeight,v),S=window.getComputedStyle(b),C=parseInt(S.paddingTop,10),E=parseInt(S.paddingBottom,10),T=e.top+e.height/2-oH,N=a-T,P=x.offsetHeight/2,R=p+f+(x.offsetTop+P),I=v-R;if(R<=T){const e=s.length>0&&x===s[s.length-1].ref.current;l.style.bottom="0px";const t=u.clientHeight-b.offsetTop-b.offsetHeight,n=R+Math.max(N,P+(e?E:0)+t+m);l.style.height=n+"px"}else{const e=s.length>0&&x===s[0].ref.current;l.style.top="0px";const t=Math.max(T,p+b.offsetTop+(e?C:0)+P)+I;l.style.height=t+"px",b.scrollTop=R-T+b.offsetTop}l.style.margin=`${oH}px 0`,l.style.minHeight=y+"px",l.style.maxHeight=a+"px",null==i||i(),requestAnimationFrame(()=>g.current=!0)}},[h,o.trigger,o.valueNode,l,u,b,x,w,o.dir,i]);Xy(()=>C(),[C]);const[E,T]=Pt.useState();Xy(()=>{u&&T(window.getComputedStyle(u).zIndex)},[u]);const N=Pt.useCallback(e=>{e&&!0===y.current&&(C(),null==S||S(),y.current=!1)},[C,S]);return Lt.jsx(hH,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:N,children:Lt.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:Lt.jsx(cb.div,m(f({},s),{ref:p,style:f({boxSizing:"border-box",maxHeight:"100%"},s.style)}))})})});dH.displayName="SelectItemAlignedPosition";var pH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,align:i="start",collisionPadding:s=oH}=n,o=v(n,["__scopeSelect","align","collisionPadding"]),a=q$(r);return Lt.jsx(dW,m(f(f({},a),o),{ref:t,align:i,collisionPadding:s,style:f(f({boxSizing:"border-box"},o.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});pH.displayName="SelectPopperPosition";var[hH,fH]=V$(iH,{}),mH="SelectViewport",vH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,nonce:i}=n,s=v(n,["__scopeSelect","nonce"]),o=lH(mH,r),a=fH(mH,r),l=mv(t,o.onViewportChange),c=Pt.useRef(0);return Lt.jsxs(Lt.Fragment,{children:[Lt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),Lt.jsx(W$.Slot,{scope:r,children:Lt.jsx(cb.div,m(f({"data-radix-select-viewport":"",role:"presentation"},s),{ref:l,style:f({position:"relative",flex:1,overflow:"hidden auto"},s.style),onScroll:Yy(s.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=a;if((null==r?void 0:r.current)&&n){const e=Math.abs(c.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*oH,i=parseFloat(n.style.minHeight),s=parseFloat(n.style.height),o=Math.max(i,s);if(o<r){const i=o+e,s=Math.min(r,i),a=i-s;n.style.height=s+"px","0px"===n.style.bottom&&(t.scrollTop=a>0?a:0,n.style.justifyContent="flex-end")}}}c.current=t.scrollTop})}))})]})});vH.displayName=mH;var gH="SelectGroup",[yH,bH]=V$(gH);Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r}=n,i=v(n,["__scopeSelect"]),s=nb();return Lt.jsx(yH,{scope:r,id:s,children:Lt.jsx(cb.div,m(f({role:"group","aria-labelledby":s},i),{ref:t}))})}).displayName=gH;var xH="SelectLabel",wH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r}=n,i=v(n,["__scopeSelect"]),s=bH(xH,r);return Lt.jsx(cb.div,m(f({id:s.id},i),{ref:t}))});wH.displayName=xH;var SH="SelectItem",[CH,EH]=V$(SH),TH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,value:i,disabled:s=!1,textValue:o}=n,a=v(n,["__scopeSelect","value","disabled","textValue"]),l=K$(SH,r),c=lH(SH,r),u=l.value===i,[d,p]=Pt.useState(null!=o?o:""),[h,g]=Pt.useState(!1),y=mv(t,e=>{var t;return null==(t=c.itemRefCallback)?void 0:t.call(c,e,i,s)}),b=nb(),x=Pt.useRef("touch"),w=()=>{s||(l.onValueChange(i),l.onOpenChange(!1))};if(""===i)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Lt.jsx(CH,{scope:r,value:i,disabled:s,textId:b,isSelected:u,onItemTextChange:Pt.useCallback(e=>{p(t=>{var n;return t||(null!=(n=null==e?void 0:e.textContent)?n:"").trim()})},[]),children:Lt.jsx(W$.ItemSlot,{scope:r,value:i,disabled:s,textValue:d,children:Lt.jsx(cb.div,m(f({role:"option","aria-labelledby":b,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},a),{ref:y,onFocus:Yy(a.onFocus,()=>g(!0)),onBlur:Yy(a.onBlur,()=>g(!1)),onClick:Yy(a.onClick,()=>{"mouse"!==x.current&&w()}),onPointerUp:Yy(a.onPointerUp,()=>{"mouse"===x.current&&w()}),onPointerDown:Yy(a.onPointerDown,e=>{x.current=e.pointerType}),onPointerMove:Yy(a.onPointerMove,e=>{var t;x.current=e.pointerType,s?null==(t=c.onItemLeave)||t.call(c):"mouse"===x.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Yy(a.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=c.onItemLeave)||t.call(c))}),onKeyDown:Yy(a.onKeyDown,e=>{var t;""!==(null==(t=c.searchRef)?void 0:t.current)&&" "===e.key||(B$.includes(e.key)&&w()," "===e.key&&e.preventDefault())})}))})})});TH.displayName=SH;var NH="SelectItemText",PH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,className:i,style:s}=n,o=v(n,["__scopeSelect","className","style"]),a=K$(NH,r),l=lH(NH,r),c=EH(NH,r),u=Y$(NH,r),[d,p]=Pt.useState(null),h=mv(t,e=>p(e),c.onItemTextChange,e=>{var t;return null==(t=l.itemTextRefCallback)?void 0:t.call(l,e,c.value,c.disabled)}),g=null==d?void 0:d.textContent,y=Pt.useMemo(()=>Lt.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:x}=u;return Xy(()=>(b(y),()=>x(y)),[b,x,y]),Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(cb.span,m(f({id:c.textId},o),{ref:h})),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?$p.createPortal(o.children,a.valueNode):null]})});PH.displayName=NH;var RH="SelectItemIndicator",IH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r}=n,i=v(n,["__scopeSelect"]);return EH(RH,r).isSelected?Lt.jsx(cb.span,m(f({"aria-hidden":!0},i),{ref:t})):null});IH.displayName=RH;var kH="SelectScrollUpButton",jH=Pt.forwardRef((e,t)=>{const n=lH(kH,e.__scopeSelect),r=fH(kH,e.__scopeSelect),[i,s]=Pt.useState(!1),o=mv(t,r.onScrollButtonChange);return Xy(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),i?Lt.jsx(OH,m(f({},e),{ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});jH.displayName=kH;var _H="SelectScrollDownButton",AH=Pt.forwardRef((e,t)=>{const n=lH(_H,e.__scopeSelect),r=fH(_H,e.__scopeSelect),[i,s]=Pt.useState(!1),o=mv(t,r.onScrollButtonChange);return Xy(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;s(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),i?Lt.jsx(OH,m(f({},e),{ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});AH.displayName=_H;var OH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r,onAutoScroll:i}=n,s=v(n,["__scopeSelect","onAutoScroll"]),o=lH("SelectScrollButton",r),a=Pt.useRef(null),l=$$(r),c=Pt.useCallback(()=>{null!==a.current&&(window.clearInterval(a.current),a.current=null)},[]);return Pt.useEffect(()=>()=>c(),[c]),Xy(()=>{var e;const t=l().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[l]),Lt.jsx(cb.div,m(f({"aria-hidden":!0},s),{ref:t,style:f({flexShrink:0},s.style),onPointerDown:Yy(s.onPointerDown,()=>{null===a.current&&(a.current=window.setInterval(i,50))}),onPointerMove:Yy(s.onPointerMove,()=>{var e;null==(e=o.onItemLeave)||e.call(o),null===a.current&&(a.current=window.setInterval(i,50))}),onPointerLeave:Yy(s.onPointerLeave,()=>{c()})}))}),DH=Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r}=n,i=v(n,["__scopeSelect"]);return Lt.jsx(cb.div,m(f({"aria-hidden":!0},i),{ref:t}))});DH.displayName="SelectSeparator";var MH="SelectArrow";Pt.forwardRef((e,t)=>{const n=e,{__scopeSelect:r}=n,i=v(n,["__scopeSelect"]),s=q$(r),o=K$(MH,r),a=lH(MH,r);return o.open&&"popper"===a.position?Lt.jsx(pW,m(f(f({},s),i),{ref:t})):null}).displayName=MH;var LH=Pt.forwardRef((e,t)=>{var n=e,{__scopeSelect:r,value:i}=n,s=v(n,["__scopeSelect","value"]);const o=Pt.useRef(null),a=mv(t,o),l=Yz(i);return Pt.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(l!==i&&n){const t=new Event("change",{bubbles:!0});n.call(e,i),e.dispatchEvent(t)}},[l,i]),Lt.jsx(cb.select,m(f({},s),{style:f(f({},zw),s.style),ref:a,defaultValue:i}))});function zH(e){return""===e||void 0===e}function FH(e){const t=db(e),n=Pt.useRef(""),r=Pt.useRef(0),i=Pt.useCallback(e=>{const i=n.current+e;t(i),function e(t){n.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),s=Pt.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return Pt.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function BH(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=(o=e,a=Math.max(i,0),o.map((e,t)=>o[(a+t)%o.length]));var o,a;1===r.length&&(s=s.filter(e=>e!==n));const l=s.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}LH.displayName="SelectBubbleInput";var UH=X$,WH=nH,$H=rH,HH=sH,VH=vH,qH=wH,GH=TH,KH=PH,JH=IH,YH=jH,ZH=AH,QH=DH;const XH=Z$,eV=tH,tV=Pt.forwardRef((e,t)=>{var n=e,{className:r,children:i}=n,s=v(n,["className","children"]);return Lt.jsxs(UH,m(f({ref:t,className:Ng("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},s),{children:[i,Lt.jsx(WH,{asChild:!0,children:Lt.jsx(Wg,{className:"h-4 w-4 opacity-50"})})]}))});tV.displayName=UH.displayName;const nV=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(YH,m(f({ref:t,className:Ng("flex cursor-default items-center justify-center py-1",r)},i),{children:Lt.jsx(Vg,{className:"h-4 w-4"})}))});nV.displayName=YH.displayName;const rV=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(ZH,m(f({ref:t,className:Ng("flex cursor-default items-center justify-center py-1",r)},i),{children:Lt.jsx(Wg,{className:"h-4 w-4"})}))});rV.displayName=ZH.displayName;const iV=Pt.forwardRef((e,t)=>{var n=e,{className:r,children:i,position:s="popper"}=n,o=v(n,["className","children","position"]);return Lt.jsx($H,{children:Lt.jsxs(HH,m(f({ref:t,className:Ng("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:s},o),{children:[Lt.jsx(nV,{}),Lt.jsx(VH,{className:Ng("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),Lt.jsx(rV,{})]}))})});iV.displayName=HH.displayName,Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(qH,f({ref:t,className:Ng("py-1.5 pl-8 pr-2 text-sm font-semibold",r)},i))}).displayName=qH.displayName;const sV=Pt.forwardRef((e,t)=>{var n=e,{className:r,children:i}=n,s=v(n,["className","children"]);return Lt.jsxs(GH,m(f({ref:t,className:Ng("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},s),{children:[Lt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Lt.jsx(JH,{children:Lt.jsx(Ug,{className:"h-4 w-4"})})}),Lt.jsx(KH,{children:i})]}))});sV.displayName=GH.displayName,Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(QH,f({ref:t,className:Ng("-mx-1 my-1 h-px bg-muted",r)},i))}).displayName=QH.displayName;const oV=(...t)=>T(e,[...t],function*(e={}){try{const[t,n]=yield Promise.allSettled([aV(e),lV(e)]);let r=[];if("fulfilled"===t.status&&t.value.items&&(r=[...r,...t.value.items]),"fulfilled"===n.status&&n.value.data){const e=n.value.data.map(cV);r=[...r,...e]}r.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());const i=e.limit||20,s=e.offset||0;return{items:r.slice(s,s+i),total:r.length,hasMore:s+i<r.length}}catch(t){return console.error(":",t),{items:[],total:0,hasMore:!1}}}),aV=(...t)=>T(e,[...t],function*(e={}){const t=new URLSearchParams;e.machineType&&t.append("machineType",e.machineType),e.machineNumber&&t.append("machineNumber",e.machineNumber),e.searchText&&t.append("searchText",e.searchText),e.searchDate&&t.append("searchDate",e.searchDate),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());const n=yield Lm(`/history?${t.toString()}`);return n.ok?n.json():{items:[],total:0,hasMore:!1}}),lV=t=>T(e,null,function*(){return yield((...t)=>T(e,[...t],function*(e={}){const t=new URLSearchParams;e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),e.machineType&&t.append("machineType",e.machineType),e.machineNumber&&t.append("machineNumber",e.machineNumber),e.category&&t.append("category",e.category),e.office&&t.append("office",e.office),e.keyword&&t.append("keyword",e.keyword);const n=yield Lm(`/fault-history?${t.toString()}`);if(!n.success)throw new Error(n.error||"");return n}))({machineType:t.machineType,machineNumber:t.machineNumber,keyword:t.searchText,limit:t.limit,offset:t.offset})}),cV=e=>{const t=e.images&&e.images.length>0?`/api/api/fault-history/images/${e.images[0].fileName}`:void 0;return{id:e.id,machineType:e.machineType||"",machineNumber:e.machineNumber||"",title:e.title,jsonData:m(f({},e.jsonData),{title:e.title,problemDescription:e.description,machineType:e.machineType,machineNumber:e.machineNumber,metadata:{office:e.office,category:e.category,keywords:e.keywords,source:"fault-history-db"}}),imagePath:t,imageUrl:t,createdAt:e.createdAt,source:"fault-history-db"}},uV=e=>e?/^data:image\//.test(e)||/^https?:\/\//i.test(e)?e:e.startsWith("/api/")?"/api"+e:new URL(e,window.location.origin).toString():null,dV=({data:t,fileName:n,onClose:r,onSave:i,onPrint:s})=>{var o,a,l,c,u,d,p,h,v,g,y,b,x,w;const[S,C]=Pt.useState(!1),[E,N]=Pt.useState(!1),[P,R]=Pt.useState({reportId:`R${t.chatId.slice(-5).toUpperCase()}`,machineId:t.machineNumber||(null==(a=null==(o=t.chatData)?void 0:o.machineInfo)?void 0:a.machineNumber)||"M98765",machineType:t.machineType||(null==(c=null==(l=t.chatData)?void 0:l.machineInfo)?void 0:c.machineTypeName)||"",machineNumber:t.machineNumber||(null==(d=null==(u=t.chatData)?void 0:u.machineInfo)?void 0:d.machineNumber)||"",date:new Date(t.exportTimestamp).toISOString().split("T")[0],location:"",failureCode:"FC01",description:t.problemDescription||"",status:"",engineer:t.userId||"",notes:`ID: ${t.chatId}\n: ${(null==(p=t.metadata)?void 0:p.total_messages)||(null==(v=null==(h=t.chatData)?void 0:h.messages)?void 0:v.length)||0}\n: ${t.exportType}`,repairSchedule:"20259",repairLocation:"",incidentTitle:t.title||"",problemDescription:t.problemDescription||"",extractedComponents:t.extractedComponents||[],extractedSymptoms:t.extractedSymptoms||[],possibleModels:t.possibleModels||[]}),[I,k]=Pt.useState(P);Pt.useEffect(()=>{k(P)},[P]);const j=(()=>{const e=[],t={reportId:"ID",machineId:"ID",machineType:"",machineNumber:"",date:"",location:"",failureCode:"",description:"",status:"",engineer:"",notes:"",repairSchedule:"",repairLocation:"",incidentTitle:"",problemDescription:"",extractedComponents:"",extractedSymptoms:"",possibleModels:""};return Object.keys(P).forEach(n=>{const r=P[n],i=I[n];r!==i&&e.push({field:t[n]||n,oldValue:String(r||""),newValue:String(i||"")})}),e})(),_=n=>T(e,null,function*(){try{const e={updatedData:{title:n.incidentTitle,problemDescription:n.problemDescription,machineType:n.machineType||t.machineType||"",machineNumber:n.machineNumber||t.machineNumber||"",extractedComponents:n.extractedComponents,extractedSymptoms:n.extractedSymptoms,possibleModels:n.possibleModels,reportData:n,lastUpdated:(new Date).toISOString()},updatedBy:"user"};console.log(" :",e),console.log(" :",{machineType:`${t.machineType||""}  ${n.machineType||""}`,machineNumber:`${t.machineNumber||""}  ${n.machineNumber||""}`});const r=yield fetch(`/api/history/update-item/${t.chatId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const e=yield r.json();throw new Error(e.error||"")}const i=yield r.json();console.log(" :",i),t.machineType===n.machineType&&t.machineNumber===n.machineNumber||console.log(" :",{machineType:`${t.machineType||""}  ${n.machineType||""}`,machineNumber:`${t.machineNumber||""}  ${n.machineNumber||""}`})}catch(e){console.error(" :",e)}}),A=(e,t)=>{k(n=>m(f({},n),{[e]:t}))},O=(e,t)=>{const n=window.open("","_blank","noopener,noreferrer");if(!n)return;const r=((e,t)=>{const n=t?`<div class="image-section">\n           <h3></h3>\n           <img class="report-img" src="${t}" alt="" />\n         </div>`:"";return`\n      <!doctype html>\n      <html>\n      <head>\n        <meta charset="utf-8">\n        <title></title>\n        <style>\n          @page { size: A4 portrait; margin: 10mm; }\n          @media print {\n            html, body { margin: 0; padding: 0; }\n            .no-print, .print:hidden { display: none !important; }\n            img, .image-cell, .image-section { page-break-inside: avoid; break-inside: avoid; }\n            table { width: 100%; border-collapse: collapse; table-layout: fixed; }\n            th, td { border: 1px solid #ccc; padding: 4px; vertical-align: top; }\n          }\n          img.thumb { width: 32px; height: 32px; object-fit: cover; border: 1px solid #ddd; border-radius: 4px; }\n          .report-img { max-width: 100%; height: auto; }\n        </style>\n      </head>\n      <body>\n        <h1></h1>\n\n        <div class="report-section">\n          <h3></h3>\n          <table>\n            <tr><th>ID</th><td>${e.reportId||"-"}</td></tr>\n            <tr><th>ID</th><td>${e.machineId||"-"}</td></tr>\n            <tr><th></th><td>${e.machineType||"-"}</td></tr>\n            <tr><th></th><td>${e.machineNumber||"-"}</td></tr>\n            <tr><th></th><td>${e.date||"-"}</td></tr>\n            <tr><th></th><td>${e.location||"-"}</td></tr>\n          </table>\n        </div>\n\n        <div class="report-section">\n          <h3></h3>\n          <table>\n            <tr><th></th><td>${e.incidentTitle||"-"}</td></tr>\n            <tr><th></th><td>${e.problemDescription||"-"}</td></tr>\n            <tr><th></th><td>${e.failureCode||"-"}</td></tr>\n            <tr><th></th><td>${e.status||"-"}</td></tr>\n            <tr><th></th><td>${e.engineer||"-"}</td></tr>\n          </table>\n        </div>\n\n        <div class="report-section">\n          <h3></h3>\n          <table>\n            <tr><th></th><td>${Array.isArray(e.extractedComponents)?e.extractedComponents.join(", "):"-"}</td></tr>\n            <tr><th></th><td>${Array.isArray(e.extractedSymptoms)?e.extractedSymptoms.join(", "):"-"}</td></tr>\n            <tr><th></th><td>${Array.isArray(e.possibleModels)?e.possibleModels.join(", "):"-"}</td></tr>\n          </table>\n        </div>\n\n        ${n}\n\n        <div class="report-section">\n          <h3></h3>\n          <p>${e.notes||"-"}</p>\n        </div>\n\n        <div class="report-section">\n          <h3></h3>\n          <table>\n            <tr><th></th><td>${e.repairSchedule||"-"}</td></tr>\n            <tr><th></th><td>${e.repairLocation||"-"}</td></tr>\n          </table>\n        </div>\n      </body>\n      </html>\n    `})(e,t);n.document.write(r),n.document.close(),setTimeout(()=>{n.print()},100)},D=e=>new Date(e).toLocaleString("ja-JP"),M=I,L=(e=>{var t;const n=[e];for(;n.length;){const e=n.pop();if(null!=e){if("string"==typeof e&&e.startsWith("data:image/"))return e;if(Array.isArray(e))for(const t of e)n.push(t);else if("object"==typeof e)for(const t of Object.values(e))n.push(t)}}const r=null==(t=null==e?void 0:e.savedImages)?void 0:t[0],i=uV((null==r?void 0:r.url)||(null==r?void 0:r.path));if(i)return i;const s=null==e?void 0:e.imagePath;return(Array.isArray(s)?uV(s[0]):uV(s))||null})(t);return console.log("[chat-export] final imgSrc:",L&&L.slice(0,60)),Lt.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:Lt.jsxs("div",{className:"max-w-4xl mx-auto",children:[Lt.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Lt.jsx("h1",{className:"text-3xl font-bold text-center flex-1",children:""}),Lt.jsx("div",{className:"flex gap-2",children:S?Lt.jsxs(Lt.Fragment,{children:[Lt.jsxs(Rg,{onClick:()=>{R(I),C(!1),N(!1),t.chatId&&_(I),i&&i(I);const e=[];t.machineType!==I.machineType&&e.push(`: ${t.machineType||""}  ${I.machineType||""}`),t.machineNumber!==I.machineNumber&&e.push(`: ${t.machineNumber||""}  ${I.machineNumber||""}`),e.length>0?alert(`\n\n:\n${e.join("\n")}`):alert("")},className:"flex items-center gap-2",children:[Lt.jsx(Ey,{className:"h-4 w-4"}),""]}),Lt.jsxs(Rg,{onClick:()=>{window.confirm("")&&(k(P),C(!1),N(!1))},variant:"outline",className:"flex items-center gap-2",children:[Lt.jsx(Ky,{className:"h-4 w-4"}),""]}),Lt.jsx(Rg,{onClick:r,variant:"outline",children:""})]}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsxs(Rg,{onClick:()=>{C(!0)},variant:"outline",className:"flex items-center gap-2",children:[Lt.jsx(_y,{className:"h-4 w-4"}),""]}),j.length>0&&Lt.jsx(Rg,{onClick:()=>N(!E),variant:"outline",className:"flex items-center gap-2",children:Lt.jsxs("span",{className:"text-sm",children:[" (",j.length,")"]})}),Lt.jsxs(Rg,{onClick:()=>{O(M,L)},variant:"outline",className:"flex items-center gap-2",children:[Lt.jsx(Sy,{className:"h-4 w-4"}),""]}),Lt.jsxs(Rg,{onClick:()=>{var e;const n=`\n \n\n:\n: ${P.incidentTitle}\nID: ${P.reportId}\nID: ${P.machineId}\n: ${P.date}\n: ${P.location}\n: ${P.failureCode}\n\n:\n: ${P.problemDescription}\n: ${P.status}\n: ${P.engineer}\n: ${P.notes}\n\n:\n: ${P.extractedComponents.join(", ")}\n: ${P.extractedSymptoms.join(", ")}\n: ${P.possibleModels.join(", ")}\n\n:\n: ${P.repairSchedule}\n: ${P.repairLocation}\n\n:\n${(t.conversationHistory||(null==(e=t.chatData)?void 0:e.messages)||[]).map(e=>`${e.isAiResponse?"AI":""}: ${e.content}`).join("\n")}\n    `,r=new Blob([n],{type:"text/plain;charset=utf-8"}),i=window.URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=`_${P.incidentTitle}_${P.date}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)},variant:"outline",className:"flex items-center gap-2",children:[Lt.jsx(ey,{className:"h-4 w-4"}),""]}),Lt.jsx(Rg,{onClick:r,variant:"outline",children:""})]})})]}),E&&j.length>0&&Lt.jsxs(gL,{className:"mb-6 border-orange-200 bg-orange-50",children:[Lt.jsx(yL,{children:Lt.jsx(bL,{className:"text-lg font-semibold text-orange-800 flex items-center gap-2",children:Lt.jsxs("span",{children:["  (",j.length,")"]})})}),Lt.jsxs(wL,{children:[Lt.jsx("div",{className:"space-y-3",children:j.map((e,t)=>Lt.jsxs("div",{className:"flex items-center gap-4 p-3 bg-white rounded-lg border",children:[Lt.jsx("div",{className:"flex-1",children:Lt.jsxs("span",{className:"font-medium text-gray-700",children:[e.field,":"]})}),Lt.jsxs("div",{className:"flex-1 text-right",children:[Lt.jsx("div",{className:"text-sm text-red-600 line-through",children:e.oldValue}),Lt.jsx("div",{className:"text-sm text-green-600 font-medium",children:e.newValue})]})]},t))}),Lt.jsx("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg",children:Lt.jsx("p",{className:"text-sm text-blue-800",children:" "})})]})]}),Lt.jsxs(gL,{className:"mb-6",children:[Lt.jsx(yL,{children:Lt.jsx(bL,{className:"text-lg font-semibold",children:""})}),Lt.jsxs(wL,{className:"space-y-3",children:[Lt.jsxs("div",{children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.incidentTitle,onChange:e=>A("incidentTitle",e.target.value),className:"mt-1",disabled:!S,placeholder:""})]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Lt.jsxs("div",{className:"flex justify-between",children:[Lt.jsx("span",{className:"font-medium",children:"ID:"}),Lt.jsx(ML,{value:M.reportId,onChange:e=>A("reportId",e.target.value),className:"w-32",disabled:!S})]}),Lt.jsxs("div",{className:"flex justify-between",children:[Lt.jsx("span",{className:"font-medium",children:"ID:"}),Lt.jsx(ML,{value:M.machineId,onChange:e=>A("machineId",e.target.value),className:"w-32",disabled:!S})]}),Lt.jsxs("div",{className:"flex justify-between",children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.machineType,onChange:e=>A("machineType",e.target.value),className:"w-32",disabled:!S,placeholder:""})]}),Lt.jsxs("div",{className:"flex justify-between",children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.machineNumber,onChange:e=>A("machineNumber",e.target.value),className:"w-32",disabled:!S,placeholder:""})]}),Lt.jsxs("div",{className:"flex justify-between",children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{type:"date",value:M.date,onChange:e=>A("date",e.target.value),className:"w-32",disabled:!S})]}),Lt.jsxs("div",{className:"flex justify-between",children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.location,onChange:e=>A("location",e.target.value),className:"w-32",disabled:!S})]})]})]})]}),Lt.jsxs(gL,{className:"mb-6",children:[Lt.jsx(yL,{children:Lt.jsx(bL,{className:"text-lg font-semibold",children:""})}),Lt.jsxs(wL,{className:"space-y-3",children:[Lt.jsxs("div",{children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(Fz,{value:M.problemDescription,onChange:e=>A("problemDescription",e.target.value),className:"mt-1",rows:3,disabled:!S,placeholder:""})]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Lt.jsxs("div",{className:"flex justify-between",children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.status,onChange:e=>A("status",e.target.value),className:"w-48",disabled:!S})]}),Lt.jsxs("div",{className:"flex justify-between",children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.engineer,onChange:e=>A("engineer",e.target.value),className:"w-32",disabled:!S})]})]}),Lt.jsxs("div",{children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(Fz,{value:M.notes,onChange:e=>A("notes",e.target.value),className:"mt-1",rows:3,disabled:!S})]})]})]}),Lt.jsxs(gL,{className:"mb-6",children:[Lt.jsx(yL,{children:Lt.jsx(bL,{className:"text-lg font-semibold",children:""})}),Lt.jsxs(wL,{className:"space-y-3",children:[Lt.jsxs("div",{children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.extractedComponents.join(", "),onChange:e=>A("extractedComponents",e.target.value.split(", ").filter(e=>e.trim())),className:"mt-1",disabled:!S,placeholder:", , "})]}),Lt.jsxs("div",{children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.extractedSymptoms.join(", "),onChange:e=>A("extractedSymptoms",e.target.value.split(", ").filter(e=>e.trim())),className:"mt-1",disabled:!S,placeholder:", , "})]}),Lt.jsxs("div",{children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.possibleModels.join(", "),onChange:e=>A("possibleModels",e.target.value.split(", ").filter(e=>e.trim())),className:"mt-1",disabled:!S,placeholder:"MT-100, MR-400"})]})]})]}),Lt.jsxs(gL,{className:"mb-6",children:[Lt.jsx(yL,{children:Lt.jsx(bL,{className:"text-lg font-semibold",children:""})}),Lt.jsx(wL,{children:Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Lt.jsxs("div",{className:"flex justify-between",children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.repairSchedule,onChange:e=>A("repairSchedule",e.target.value),className:"w-32",disabled:!S})]}),Lt.jsxs("div",{className:"flex justify-between",children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx(ML,{value:M.repairLocation,onChange:e=>A("repairLocation",e.target.value),className:"w-48",disabled:!S})]})]})})]}),Lt.jsxs(gL,{className:"mb-6",children:[Lt.jsx(yL,{children:Lt.jsx(bL,{className:"text-lg font-semibold",children:""})}),Lt.jsxs(wL,{children:[Lt.jsx("p",{className:"text-sm text-gray-600 mb-4",children:""}),L?Lt.jsx("img",{src:L,alt:"",style:{maxWidth:"100%",height:"auto",display:"block"},onError:e=>{e.currentTarget.style.display="none"}},L.slice(0,64)):Lt.jsx("div",{className:"text-center text-gray-500",children:""}),Lt.jsx("p",{className:"text-sm text-gray-600 mt-4",children:""})]})]}),Lt.jsxs(gL,{className:"mb-6",children:[Lt.jsx(yL,{children:Lt.jsx(bL,{className:"text-lg font-semibold",children:""})}),Lt.jsxs(wL,{children:[Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(Fg,{className:"h-4 w-4 text-gray-500"}),Lt.jsxs("span",{children:[": ",D(t.exportTimestamp)]})]}),Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(yy,{className:"h-4 w-4 text-gray-500"}),Lt.jsxs("span",{children:[":"," ",(null==(g=t.metadata)?void 0:g.total_messages)||(null==(b=null==(y=t.chatData)?void 0:y.messages)?void 0:b.length)||0,""]})]}),Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(uy,{className:"h-4 w-4 text-gray-500"}),Lt.jsxs("span",{children:[": ",(null==(x=t.savedImages)?void 0:x.length)||0,""]})]})]}),(t.machineType||t.machineNumber)&&Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-3 bg-blue-50 rounded-lg",children:[t.machineType&&Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx("span",{children:t.machineType})]}),t.machineNumber&&Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx("span",{className:"font-medium",children:":"}),Lt.jsx("span",{children:t.machineNumber})]})]}),Lt.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg p-4 bg-gray-50",children:(t.conversationHistory||(null==(w=t.chatData)?void 0:w.messages)||[]).map((e,t)=>{return Lt.jsxs("div",{className:"mb-4 p-3 rounded-lg "+(e.isAiResponse?"bg-blue-50 ml-4":"bg-gray-100 mr-4"),children:[Lt.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[Lt.jsx(VW,{variant:e.isAiResponse?"default":"secondary",className:"text-xs",children:e.isAiResponse?"AI":""}),Lt.jsx("span",{className:"text-xs text-gray-500",children:D(e.timestamp||e.createdAt)})]}),Lt.jsx("div",{className:"mt-1",children:(n=e.content,n&&n.startsWith("data:image/")?Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(uy,{className:"h-4 w-4 text-gray-500"}),Lt.jsx("span",{className:"text-sm text-gray-600",children:""})]}):Lt.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:e.content}))})]},e.id||t);var n})})]})]}),Lt.jsx("div",{className:"text-center text-sm text-gray-500 py-4",children:" 2025 . All rights reserved."})]})})},pV=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var t,n,r,i,s,o,a,l,c,u,d,p;const[h,v]=Pt.useState([]),[g,y]=Pt.useState([]),[b,x]=Pt.useState(""),[w,S]=Pt.useState({machineType:"",machineNumber:"",searchText:"",searchDate:""}),[C,E]=Pt.useState(!0),[N,P]=Pt.useState(null),[R,I]=Pt.useState(new Set),[k,j]=Pt.useState(1),[_,A]=Pt.useState(1),[O,D]=Pt.useState(!1),[M,L]=Pt.useState(!1),[z,F]=Pt.useState(!1),[B,U]=Pt.useState(null),[W,$]=Pt.useState(null),[H,V]=Pt.useState(!1),[q,G]=Pt.useState(!1),[K,J]=Pt.useState({show:!1,id:"",title:""}),[Y,Z]=Pt.useState(!1),[Q,X]=Pt.useState("table"),[ee,te]=Pt.useState(!1),[ne,re]=Pt.useState(null),[ie,se]=Pt.useState(""),[oe,ae]=Pt.useState(!1),[le,ce]=Pt.useState(null),[ue,de]=Pt.useState({machineTypes:[],machines:[]}),[pe,he]=Pt.useState({machineTypes:[],machineNumbers:[]}),[fe,me]=Pt.useState(!1),ve=Pt.useRef(0),ge=Pt.useRef(!1),ye=Pt.useRef(new Set),be=e=>{var t,n,r,i;if(console.log(":",e),!e.jsonData)return console.log("jsonData"),e;if(e.machineType&&e.machineNumber)return console.log(":",{machineType:e.machineType,machineNumber:e.machineNumber}),e;const s=m(f({},e),{machineType:e.machineType||e.jsonData.machineType||"",machineNumber:e.machineNumber||e.jsonData.machineNumber||"",jsonData:m(f({},e.jsonData),{title:(null==(t=e.jsonData)?void 0:t.title)||(()=>{if(e.title)return e.title;if(e.fileName){const t=e.fileName.indexOf("_");return t>0?e.fileName.substring(0,t):e.fileName.replace(/\.json$/,"")}return""})(),problemDescription:(null==(n=e.jsonData)?void 0:n.problemDescription)||"",machineType:e.machineType||e.jsonData.machineType||"",machineNumber:e.machineNumber||e.jsonData.machineNumber||"",extractedComponents:e.jsonData.extractedComponents||e.extractedComponents||[],extractedSymptoms:e.jsonData.extractedSymptoms||e.extractedSymptoms||[],possibleModels:e.jsonData.possibleModels||e.possibleModels||[],conversationHistory:e.jsonData.conversationHistory||[],savedImages:e.jsonData.savedImages||[],chatData:e.jsonData.chatData||e.jsonData})});if(e.jsonData.chatData||s.jsonData.chatData){console.log("chatData");const t=e.jsonData.chatData||s.jsonData.chatData,n=(null==(r=t.machineInfo)?void 0:r.machineTypeName)||"",o=(null==(i=t.machineInfo)?void 0:i.machineNumber)||"";console.log("chatData:",{machineTypeName:n,machineNumber:o}),s.machineType=n||s.machineType,s.machineNumber=o||s.machineNumber,s.jsonData.machineType=n||s.jsonData.machineType,s.jsonData.machineNumber=o||s.jsonData.machineNumber}return console.log(":",s),s},xe=Pt.useCallback(e=>{try{const t=[],n=(null==e?void 0:e.title)||"";n&&t.push(`${n}`);const r=(null==e?void 0:e.problemDescription)||"",i=(null==e?void 0:e.conversationHistory)||[],s=(null==e?void 0:e.chatData)||e,o=(null==s?void 0:s.messages)||[],a=[];Array.isArray(i)&&i.forEach(e=>{if(e&&"object"==typeof e){const t=e.content;"string"!=typeof t||t.startsWith("data:image/")||a.push(t)}});const l=[];Array.isArray(o)&&o.forEach(e=>{if(e&&"object"==typeof e&&!e.isAiResponse){const t=e.content;"string"!=typeof t||t.startsWith("data:image/")||l.push(t)}});const c=[];r&&c.push(r),a.length>0&&c.push(...a),l.length>0&&c.push(...l),c.length>0&&t.push(`${c.join(" ")}`);const u=(null==e?void 0:e.extractedComponents)||[];u.length>0&&t.push(`${u.join(", ")}`);const d=(null==e?void 0:e.extractedSymptoms)||[];d.length>0&&t.push(`${d.join(", ")}`);const p=(null==e?void 0:e.answer)||"";return p&&t.push(`${p}`),0===t.length?"":t.join("\n\n")}catch(t){return console.error(":",t),""}},[]);Pt.useEffect(()=>{if(H&&B&&B.id){if(ye.current.has(B.id))return;ye.current.add(B.id),T(e,null,function*(){var t,n,r,i,s,o,a,l,c;try{const a=(null==(t=B.jsonData)?void 0:t.chatData)||B.jsonData;if(!((null==(n=B.jsonData)?void 0:n.title)||(null==(r=B.jsonData)?void 0:r.problemDescription)||Array.isArray(null==(i=B.jsonData)?void 0:i.conversationHistory)&&B.jsonData.conversationHistory.length>0||Array.isArray(null==a?void 0:a.messages)&&a.messages.length>0||(null==(s=B.jsonData)?void 0:s.answer)))return void console.log(" GPT");console.log(" GPT...");const l=(null==(o=B.jsonData)?void 0:o.chatData)||B.jsonData;let u=f({},B.jsonData);if((null==l?void 0:l.messages)&&Array.isArray(l.messages)){const e=l.messages.filter(e=>!e.isAiResponse&&e.content&&!e.content.startsWith("data:image/")&&!e.content.startsWith("/api/images/")).map(e=>e.content);e.length>0&&(u=m(f({},u),{chatData:m(f({},u.chatData),{messages:l.messages})}),console.log(" GPT:",e.length))}const d=yield(c=u,T(e,null,function*(){try{const e=yield Lm("/history/summarize",{method:"POST",body:JSON.stringify({jsonData:c})});if(!e.success||!e.summary)throw new Error(e.error||"");return e.summary}catch(e){throw console.error("GPT:",e),e}}));d&&(console.log(" GPT:",d.substring(0,100)+"..."),U(m(f({},B),{jsonData:m(f({},B.jsonData),{problemDescription:d,answer:d})})))}catch(u){(null==(a=null==u?void 0:u.message)?void 0:a.includes(""))||(null==(l=null==u?void 0:u.message)?void 0:l.includes("400"))?console.log(" "):console.error(" GPT:",u);const e=xe(B.jsonData);e&&(console.log(" :",e),U(m(f({},B),{jsonData:m(f({},B.jsonData),{problemDescription:e,answer:e})})))}})}},[H,null==B?void 0:B.id]),Pt.useEffect(()=>{const e=e=>{if(e.data&&"UPDATE_HISTORY_ITEM"===e.data.type){const t=e.data.data;console.log(":",t),v(e=>e.map(e=>e.id===t.id||e.chatId===t.chatId?f(f({},e),t):e)),y(e=>e.map(e=>e.id===t.id||e.chatId===t.chatId?f(f({},e),t):e)),!N||N.id!==t.id&&N.chatId!==t.chatId||P(e=>e?f(f({},e),t):null)}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[N]);const[we,Se]=Pt.useState(!1);Pt.useEffect(()=>{console.log(" machineData:",ue)},[ue]);const Ce=Pt.useCallback((t=1)=>T(e,null,function*(){var n,r;try{E(!0);const i=Date.now();if(ve.current&&i-ve.current<1e3)return void console.log(" API...");ve.current=i;const s={machineType:w.machineType,machineNumber:w.machineNumber,searchText:w.searchText,searchDate:w.searchDate},o=new URLSearchParams;s.machineType&&o.append("machineType",s.machineType),s.machineNumber&&o.append("machineNumber",s.machineNumber),s.searchText&&o.append("searchText",s.searchText),s.searchDate&&o.append("searchDate",s.searchDate),o.append("limit","20"),o.append("offset",(20*(t-1)).toString());const{buildApiUrl:a}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),l=a("/history");console.log(" APIURL:",l);const c=yield fetch(l);console.log(" :",c.status,c.statusText);const u=yield c.json();if(console.log(" :",u),console.log(" :",{success:u.success,hasItems:!!u.items,hasData:!!u.data,itemsLength:null==(n=u.items)?void 0:n.length,dataLength:null==(r=u.data)?void 0:r.length,total:u.total}),localStorage.setItem("debug_api_response",JSON.stringify(u,null,2)),Array.isArray(u)){console.log(" :",u.length),u.forEach((e,t)=>{console.log(`  ${t+1}:`,{fileName:e.fileName,title:e.title,chatId:e.chatId})});const n=u.map(e=>{var t,n,r,i,s,o,a;const l=e.title||"",c=e.content||{},u=e.machineType||c.machineType||(null==(n=null==(t=c.chatData)?void 0:t.machineInfo)?void 0:n.machineTypeName)||(null==(r=c.machineInfo)?void 0:r.machineTypeName)||"",d=e.machineNumber||c.machineNumber||(null==(s=null==(i=c.chatData)?void 0:i.machineInfo)?void 0:s.machineNumber)||(null==(o=c.machineInfo)?void 0:o.machineNumber)||"",p=c.problemDescription||c.answer||"",h={id:e.chatId||e.fileName,chatId:e.chatId||e.fileName,fileName:e.fileName,machineType:u,machineNumber:d,title:l,createdAt:e.createdAt,lastModified:e.lastModified,extractedComponents:c.extractedComponents||[],extractedSymptoms:c.extractedSymptoms||[],possibleModels:c.possibleModels||[],machineInfo:{machineTypeName:u,machineNumber:d},jsonData:m(f({},c),{title:l,problemDescription:p,machineType:u,machineNumber:d,extractedComponents:c.extractedComponents||[],extractedSymptoms:c.extractedSymptoms||[],possibleModels:c.possibleModels||[],conversationHistory:c.conversationHistory||(null==(a=c.chatData)?void 0:a.messages)||[],savedImages:c.savedImages||[],fileName:e.fileName,chatData:c.chatData||c})};return console.log(":",{fileName:h.fileName,machineType:h.machineType,machineNumber:h.machineNumber,jsonData:h.jsonData}),h});console.log(" :",{historyItemsLength:h.length,filteredItemsLength:g.length,updatedItemsLength:n.length});const{loadHistoryFromDB:r}=yield nf(()=>T(e,null,function*(){const{loadHistoryFromDB:e}=yield Promise.resolve().then(()=>vie);return{loadHistoryFromDB:e}}),void 0),i=yield r(),s=i;v(s),y(s),A(Math.ceil(s.length/20)),j(t),console.log(" DB:",{dbItemsLength:i.length,totalPages:Math.ceil(s.length/20)})}else{console.log(" :",u);const{loadHistoryFromDB:t}=yield nf(()=>T(e,null,function*(){const{loadHistoryFromDB:e}=yield Promise.resolve().then(()=>vie);return{loadHistoryFromDB:e}}),void 0),n=yield t();n.length>0?(v(n),y(n),A(Math.ceil(n.length/20)),console.log(` DB: ${n.length}`)):(v([]),y([]),A(1))}}catch(i){console.error(":",i),console.error(":",{message:i instanceof Error?i.message:"Unknown error",stack:i instanceof Error?i.stack:void 0});try{const{loadHistoryFromDB:t}=yield nf(()=>T(e,null,function*(){const{loadHistoryFromDB:e}=yield Promise.resolve().then(()=>vie);return{loadHistoryFromDB:e}}),void 0),n=yield t();n.length>0?(v(n),y(n),A(Math.ceil(n.length/20)),console.log(` DB: ${n.length}`)):(v([]),y([]),A(1))}catch(s){console.error("DB:",s),v([]),y([]),A(1)}}finally{E(!1)}}),[]);Pt.useEffect(()=>{ge.current||(ge.current=!0,Ce(1))},[]),Pt.useEffect(()=>{T(e,null,function*(){var e,t;try{me(!0),console.log(" JSON");const n=yield fetch("/api/history/exports/filter-data");if(n.ok){const r=yield n.json();r.success?(he({machineTypes:r.machineTypes||[],machineNumbers:r.machineNumbers||[]}),console.log(" :",{machineTypes:(null==(e=r.machineTypes)?void 0:e.length)||0,machineNumbers:(null==(t=r.machineNumbers)?void 0:t.length)||0})):(console.warn(" :",r),he({machineTypes:[],machineNumbers:[]}))}else console.error(" :",n.statusText),he({machineTypes:[],machineNumbers:[]})}catch(n){console.error(":",n),he({machineTypes:[],machineNumbers:[]})}finally{me(!1)}})},[]),Pt.useEffect(()=>{w.searchText&&w.searchText.trim()||h.length>0&&Ce(1)},[w.machineType,w.machineNumber,w.searchDate]);const Ee=(e,t)=>{S(n=>m(f({},n),{[e]:t}));try{B&&("machineType"!==e&&"machineNumber"!==e||(U(n=>n?m(f({},n),{[e]:t}):n),console.log(`filters -> editingItem sync: ${e} = ${t}`)))}catch(n){console.warn(":",n)}},Te=Pt.useCallback(()=>T(e,null,function*(){if(w.searchText&&w.searchText.trim())try{E(!0);const e=w.searchText.trim(),t=`/api/history/exports/search?keyword=${encodeURIComponent(e)}`;console.log(" :",{keyword:e,searchUrl:t});const n=yield fetch(t);if(n.ok){const e=yield n.json();if(console.log(" :",{success:e.success,total:e.total,keyword:e.keyword}),e.success&&e.data){let t=e.data;console.log(" :",t.length),w.machineType&&(t=t.filter(e=>{var t,n,r,i;return(e.machineType||(null==(t=e.jsonData)?void 0:t.machineType)||(null==(i=null==(r=null==(n=e.jsonData)?void 0:n.chatData)?void 0:r.machineInfo)?void 0:i.machineTypeName)||"")===w.machineType})),w.machineNumber&&(t=t.filter(e=>{var t,n,r,i;return(e.machineNumber||(null==(t=e.jsonData)?void 0:t.machineNumber)||(null==(i=null==(r=null==(n=e.jsonData)?void 0:n.chatData)?void 0:r.machineInfo)?void 0:i.machineNumber)||"")===w.machineNumber})),w.searchDate&&(t=t.filter(e=>new Date(e.createdAt).toISOString().split("T")[0]===w.searchDate)),y(t)}else y([])}else console.error(":",n.statusText),y([])}catch(e){console.error(":",e),y([])}finally{E(!1)}else Ce(1)}),[w.searchText,w.machineType,w.machineNumber,w.searchDate]),Ne=e=>{Ce(e)},Pe=t=>T(e,null,function*(){try{E(!0),yield(t=>T(e,null,function*(){try{const e=yield Lm(`/history/${t}`,{method:"DELETE"});if(e&&!e.success)throw new Error(e.error||e.message||"")}catch(e){throw console.error("API:",e),e}}))(t),yield Ce(k),J({show:!1,id:"",title:""})}catch(n){console.error(":",n),alert("")}finally{E(!1)}}),Re=(t="json")=>T(e,null,function*(){if(0!==R.size)try{D(!0);const n=g.filter(e=>R.has(e.id)),r=yield((t,n="json")=>T(e,null,function*(){return yield Lm("/history/export-selected",{method:"POST",body:JSON.stringify({ids:t,format:n})})}))(n,t);Ie(r,`selected_history.${t}`)}catch(n){console.error(":",n)}finally{D(!1)}else alert("")}),Ie=(e,t)=>{const n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r)},ke=(t="json")=>T(e,null,function*(){try{D(!0);const n=yield((...t)=>T(e,[...t],function*(e={},t="json"){const n=new URLSearchParams;n.append("format",t),e.machineType&&n.append("machineType",e.machineType),e.machineNumber&&n.append("machineNumber",e.machineNumber);const r=yield Lm(`/history/export-all?${n.toString()}`);if(!r.ok)throw new Error(`Failed to export all history: ${r.statusText}`);return r.blob()}))(w,t);Ie(n,`all_history.${t}`)}catch(n){console.error(":",n)}finally{D(!1)}}),je=e=>new Date(e).toLocaleString("ja-JP"),_e=t=>T(e,null,function*(){var e,n,r,i,s,o,a,l,c,u,d,p,h,g,b,x;try{console.log(":",t),console.log("ID:",t.id),console.log("JSON:",t.jsonData);let w=t.id||t.chatId;if(!w)return void alert("ID");if(w.startsWith("export_")){w=w.replace("export_",""),w.endsWith(".json")&&(w=w.replace(".json",""));const e=w.split("_");e.length>=2&&e[1].match(/^[a-f0-9-]+$/)&&(w=e[1])}console.log("ID:",w,"ID:",t.id||t.chatId);const S={updatedData:m(f(f(f(f(f(f(f(f(f(f(f(f(f({},(null==(e=t.jsonData)?void 0:e.title)&&{title:t.jsonData.title}),(null==(n=t.jsonData)?void 0:n.problemDescription)&&{problemDescription:t.jsonData.problemDescription}),(null==(r=t.jsonData)?void 0:r.answer)&&{answer:t.jsonData.answer}),(null==(i=t.jsonData)?void 0:i.machineType)&&{machineType:t.jsonData.machineType}),(null==(s=t.jsonData)?void 0:s.machineNumber)&&{machineNumber:t.jsonData.machineNumber}),(null==(o=t.jsonData)?void 0:o.repairSchedule)&&{repairSchedule:t.jsonData.repairSchedule}),(null==(a=t.jsonData)?void 0:a.location)&&{location:t.jsonData.location}),(null==(l=t.jsonData)?void 0:l.status)&&{status:t.jsonData.status}),(null==(c=t.jsonData)?void 0:c.remarks)&&{remarks:t.jsonData.remarks}),(null==(u=t.jsonData)?void 0:u.savedImages)&&{savedImages:t.jsonData.savedImages}),t.machineType&&{machineType:t.machineType}),t.machineNumber&&{machineNumber:t.machineNumber}),(null==(d=t.jsonData)?void 0:d.title)&&{title:t.jsonData.title}),{lastModified:(new Date).toISOString()}),updatedBy:"user"};console.log(":",S);const C=yield fetch(`/api/history/update-item/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(console.log(":",C.status,C.statusText),!C.ok){const e=yield C.text();console.error(":",e);let t=` (${C.status})`;try{t=JSON.parse(e).error||t}catch(gie){t+=": "+e}return void alert(t)}const E=yield C.json();if(console.log(":",E),w){const e="savedMachineFailureReport_"+w;localStorage.setItem(e,JSON.stringify(t.jsonData)),console.log(":",e)}const T=m(f({},t),{jsonData:t.jsonData,lastModified:(new Date).toISOString(),machineType:(null==(p=t.jsonData)?void 0:p.machineType)||t.machineType,machineNumber:(null==(h=t.jsonData)?void 0:h.machineNumber)||t.machineNumber,title:(null==(g=t.jsonData)?void 0:g.title)||t.title,incidentTitle:(null==(b=t.jsonData)?void 0:b.title)||t.incidentTitle,savedImages:(null==(x=t.jsonData)?void 0:x.savedImages)||[]});v(e=>e.map(e=>e.id===w||e.chatId===w?T:e)),y(e=>e.map(e=>e.id===w||e.chatId===w?T:e)),alert(""),V(!1),U(null),console.log(" - ")}catch(w){console.error(":",w);const e=w instanceof Error?w.message:"Unknown error";alert(": "+e)}});function Ae(e){var t,n,r;if(console.log(" pickFirstImage - :",{hasImages:!!(null==e?void 0:e.images),imagesLength:(null==(t=null==e?void 0:e.images)?void 0:t.length)||0,hasSavedImages:!!(null==e?void 0:e.savedImages),savedImagesLength:(null==(n=null==e?void 0:e.savedImages)?void 0:n.length)||0,hasConversationHistory:!!(null==e?void 0:e.conversationHistory),hasImagePath:!!(null==e?void 0:e.imagePath),hasImageUrl:!!(null==e?void 0:e.imageUrl),dataKeys:Object.keys(e||{})}),"string"==typeof(null==e?void 0:e.imageUrl)&&e.imageUrl.trim())return console.log(" pickFirstImage - imageUrl:",e.imageUrl),e.imageUrl.startsWith("http")?e.imageUrl:`/api${e.imageUrl}`;if("string"==typeof(null==e?void 0:e.imagePath)&&e.imagePath.trim())return console.log(" pickFirstImage - imagePath:",e.imagePath),e.imagePath.startsWith("http")?e.imagePath:`/api${e.imagePath}`;let i=null==e?void 0:e.savedImages;if(i&&0!==i.length||(i=null==(r=null==e?void 0:e.jsonData)?void 0:r.savedImages),Array.isArray(i)&&i.length>0){const e=i[0];if(console.log(" pickFirstImage - savedImages[0]:",e),"string"==typeof e&&!e.startsWith("data:image/"))return e.startsWith("http")?e:`/api${e}`;if(e&&"object"==typeof e){if(e.fileName){const t=`/api/images/chat-exports/${e.fileName}`;console.log(" pickFirstImage - savedImagesfileName:",t);let n="/api";return n=n.replace(/\/api\/?$/,"").replace(/\/$/,""),`${n}${t}`}const t=e.url||e.path;if(t&&!t.startsWith("data:image/")){const e=t.startsWith("http")?t:`/api${t}`;return console.log(" pickFirstImage - savedImagesurl/path:",e),e}}}if(Array.isArray(null==e?void 0:e.images)&&e.images.length>0){const t=e.images[0];if(console.log(" pickFirstImage - images[0]:",t),t&&"object"==typeof t&&t.fileName){const e=`/api/images/chat-exports/${t.fileName}`;console.log(" pickFirstImage - DB:",e);let n="/api";return n=n.replace(/\/api\/?$/,"").replace(/\/$/,""),`${n}${e}`}}if(Array.isArray(null==e?void 0:e.conversationHistory))for(const s of e.conversationHistory)if(s.content&&"string"==typeof s.content&&(s.content.startsWith("/api/images/")||s.content.startsWith("http")))return console.log(" pickFirstImage - conversationHistoryURL"),s.content;if("string"==typeof(null==e?void 0:e.id)||"string"==typeof(null==e?void 0:e.chatId)){const t=e.id||e.chatId;console.log(" pickFirstImage - ID:",t);const n=`/api/images/chat-exports/${t}_3_0.jpeg`;console.log(" pickFirstImage - :",n);let r="/api";return r=r.replace(/\/api\/?$/,"").replace(/\/$/,""),`${r}${n}`}if("string"==typeof(null==e?void 0:e.fileName)){const t=`/api/images/chat-exports/${e.fileName.replace(/\.json$/,"")}_3_0.jpeg`;console.log(" pickFirstImage - fileName:",t);let n="/api";return n=n.replace(/\/api\/?$/,"").replace(/\/$/,""),`${n}${t}`}return console.log(" pickFirstImage - "),null}return C?Lt.jsx("div",{className:"p-6",children:Lt.jsx("div",{className:"flex items-center justify-center h-64",children:Lt.jsxs("div",{className:"text-center",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),Lt.jsx("p",{className:"text-gray-600",children:"..."})]})})}):Lt.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[Lt.jsxs("div",{className:"mb-6",children:[Lt.jsx("h1",{className:"text-2xl font-bold mb-2",children:""}),Lt.jsx("p",{className:"text-gray-600",children:""})]}),Lt.jsxs(gL,{className:"mb-6",children:[Lt.jsx(yL,{children:Lt.jsxs(bL,{className:"flex items-center gap-2",children:[Lt.jsx(Ty,{className:"h-5 w-5"}),""]})}),Lt.jsxs(wL,{children:[Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[Lt.jsx("div",{className:"lg:col-span-2",children:Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(ML,{placeholder:"...",value:w.searchText,onChange:e=>Ee("searchText",e.target.value),onKeyDown:e=>{"Enter"===e.key&&Te()},className:"w-full"}),Lt.jsx("p",{className:"text-xs text-gray-500",children:" "})]})}),Lt.jsx("div",{children:Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(ML,{type:"date",value:w.searchDate,onChange:e=>Ee("searchDate",e.target.value),className:"w-full"}),Lt.jsx("p",{className:"text-xs text-gray-500",children:" "})]})}),Lt.jsx("div",{children:Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs(XH,{value:w.machineType||"all",onValueChange:e=>Ee("machineType","all"===e?"":e),children:[Lt.jsx(tV,{children:Lt.jsx(eV,{placeholder:""})}),Lt.jsxs(iV,{children:[Lt.jsx(sV,{value:"all",children:""}),fe?Lt.jsx(sV,{value:"loading",disabled:!0,children:"..."}):pe.machineTypes&&pe.machineTypes.length>0?pe.machineTypes.map((e,t)=>Lt.jsx(sV,{value:e,children:e},`type-${t}`)):Lt.jsx(sV,{value:"no-data",disabled:!0,children:""})]})]}),Lt.jsxs("p",{className:"text-xs text-gray-500",children:[" JSON",pe.machineTypes&&` (${pe.machineTypes.length})`]})]})}),Lt.jsx("div",{children:Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs(XH,{value:w.machineNumber||"all",onValueChange:e=>Ee("machineNumber","all"===e?"":e),children:[Lt.jsx(tV,{children:Lt.jsx(eV,{placeholder:""})}),Lt.jsxs(iV,{children:[Lt.jsx(sV,{value:"all",children:""}),fe?Lt.jsx(sV,{value:"loading",disabled:!0,children:"..."}):pe.machineNumbers&&pe.machineNumbers.length>0?pe.machineNumbers.map((e,t)=>Lt.jsx(sV,{value:e,children:e},`number-${t}`)):Lt.jsx(sV,{value:"no-data",disabled:!0,children:""})]})]}),Lt.jsxs("p",{className:"text-xs text-gray-500",children:[" JSON",pe.machineNumbers&&` (${pe.machineNumbers.length})`]})]})})]}),Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsxs(Rg,{onClick:Te,className:"flex items-center gap-2",children:[Lt.jsx(Ty,{className:"h-4 w-4"}),""]}),Lt.jsx(Rg,{variant:"outline",onClick:()=>{S({machineType:"",machineNumber:"",searchText:"",searchDate:""}),y(h)},children:""})]})]})]}),Lt.jsxs(gL,{className:"mb-6",children:[Lt.jsx(yL,{children:Lt.jsxs(bL,{className:"flex items-center justify-between",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(ry,{className:"h-5 w-5"})," (",g.length,")"]}),Lt.jsx("div",{className:"flex items-center gap-2",children:z&&Lt.jsx("span",{className:"text-sm text-gray-500",children:"..."})})]})}),Lt.jsx(wL,{children:0===g.length?Lt.jsxs("div",{className:"text-center py-8",children:[Lt.jsx(ry,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Lt.jsx("p",{className:"text-gray-600",children:""})]}):Lt.jsx("div",{className:"space-y-4",children:Lt.jsx("div",{className:"overflow-x-auto",children:Lt.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[Lt.jsx("thead",{children:Lt.jsxs("tr",{className:"bg-gray-50",children:[Lt.jsxs("th",{className:"border border-gray-300 px-3 py-2 text-center text-sm font-medium",children:[Lt.jsx("input",{type:"checkbox",checked:R.size===g.length&&g.length>0,onChange:()=>{R.size===g.length?I(new Set):I(new Set(g.map(e=>e.id)))},className:"mr-2 w-6 h-6"}),""]}),Lt.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left text-sm font-medium",children:""})]})}),Lt.jsx("tbody",{children:g.map(e=>{var t,n,r,i,s,o,a;const l=e.jsonData;let c=(null==l?void 0:l.title)||"";if(!c&&e.fileName){const t=e.fileName.split("_");t.length>1&&(c=t[0])}if(!c&&(c=(null==l?void 0:l.question)||"",""===c&&(null==(t=null==l?void 0:l.chatData)?void 0:t.messages))){const e=l.chatData.messages.filter(e=>!e.isAiResponse);e.length>0&&(c=e[0].content||"")}c||(c="");const u=(null==l?void 0:l.machineType)||(null==(r=null==(n=null==l?void 0:l.chatData)?void 0:n.machineInfo)?void 0:r.machineTypeName)||(null==(i=e.machineInfo)?void 0:i.machineTypeName)||e.machineType||"",d=(null==l?void 0:l.machineNumber)||(null==(o=null==(s=null==l?void 0:l.chatData)?void 0:s.machineInfo)?void 0:o.machineNumber)||(null==(a=e.machineInfo)?void 0:a.machineNumber)||e.machineNumber||"";return Lt.jsxs("tr",{className:"hover:bg-gray-50 bg-blue-50",children:[Lt.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center text-sm",children:Lt.jsx("input",{type:"checkbox",checked:R.has(e.id),onChange:()=>{return t=e.id,void I(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},className:"w-6 h-6"})}),Lt.jsx("td",{className:"border border-gray-300 px-3 py-2 text-sm",children:u||"-"}),Lt.jsx("td",{className:"border border-gray-300 px-3 py-2 text-sm",children:d||"-"}),Lt.jsx("td",{className:"border border-gray-300 px-3 py-2 text-sm max-w-xs truncate",title:c,children:c}),Lt.jsx("td",{className:"border border-gray-300 px-3 py-2 text-sm",children:je(e.createdAt)}),Lt.jsx("td",{className:"border border-gray-300 px-3 py-2",children:(()=>{console.log(" :",{itemId:e.id,itemTitle:e.title,hasImagePath:!!e.imagePath,hasImageUrl:!!e.imageUrl,hasJsonData:!!e.jsonData,jsonDataKeys:Object.keys(e.jsonData||{})});const t=Ae(e);return console.log(" pickFirstImage:",t),t?Lt.jsx("img",{src:t,alt:"",className:"w-12 h-12 object-cover rounded border cursor-pointer hover:scale-110 transition-transform",title:"",onClick:()=>{const e=window.open("","_blank");e&&e.document.write(`\n                                          <html>\n                                            <head><title></title></head>\n                                            <body style="margin:0;padding:20px;text-align:center;background:#f0f0f0;">\n                                              <img src="${t}" style="max-width:90%;max-height:90vh;border:2px solid #333;box-shadow:0 4px 8px rgba(0,0,0,0.3);" alt="" />\n                                            </body>\n                                          </html>\n                                        `)},onError:e=>{console.error(" :",t),e.target.style.display="none"},onLoad:()=>{console.log(" :",t)}}):Lt.jsx("span",{className:"text-gray-500",children:"-"})})()}),Lt.jsx("td",{className:"border border-gray-300 px-3 py-2",children:Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:()=>{var t,n,r,i;console.log("  - :",e),console.log(" item.machineType:",e.machineType),console.log(" item.machineNumber:",e.machineNumber),console.log(" item.jsonData:",e.jsonData);const s=be(e);console.log(" :",s),console.log("  machineType:",s.machineType),console.log("  machineNumber:",s.machineNumber),console.log("  jsonData.title:",null==(t=s.jsonData)?void 0:t.title);const o=(null==(n=s.jsonData)?void 0:n.chatData)||s.jsonData;if((null==o?void 0:o.messages)&&Array.isArray(o.messages)){const e=o.messages.filter(e=>!e.isAiResponse&&e.content&&!e.content.startsWith("data:image/")&&!e.content.startsWith("/api/images/")).map(e=>e.content).join("\n");e&&((null==(r=s.jsonData)?void 0:r.problemDescription)&&""!==s.jsonData.problemDescription||(s.jsonData.problemDescription=e,s.jsonData.answer=e,console.log(" chatData.messages:",e)))}if(!(null==(i=s.jsonData)?void 0:i.problemDescription)||""===s.jsonData.problemDescription){const e=xe(s.jsonData);e&&(s.jsonData.problemDescription=e,s.jsonData.answer=e,console.log(" :",e))}U(s),V(!0)},className:"flex items-center gap-1 text-xs",title:"",children:[Lt.jsx(Ry,{className:"h-3 w-3"}),""]}),Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:()=>{J({show:!0,id:e.id,title:c})},className:"flex items-center gap-1 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",title:"",children:[Lt.jsx(My,{className:"h-3 w-3"}),""]})]})})]},e.id)})})]})})})})]}),Lt.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[Lt.jsx("div",{className:"flex items-center justify-between mb-4",children:Lt.jsx("h2",{className:"text-xl font-bold",children:""})}),Lt.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsxs(Rg,{onClick:()=>Re("json"),disabled:O||0===R.size,variant:"default",className:"flex items-center gap-2",children:[Lt.jsx(ey,{className:"h-4 w-4"}),"JSON (",R.size,")"]}),Lt.jsxs(Rg,{onClick:()=>Re("csv"),disabled:O||0===R.size,variant:"default",className:"flex items-center gap-2",children:[Lt.jsx(ey,{className:"h-4 w-4"}),"CSV (",R.size,")"]}),Lt.jsxs(Rg,{onClick:()=>{const e=window.open("","_blank");if(!e)return;const t=R.size>0?g.filter(e=>R.has(e.id)):g,n=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title> - </title>\n        <style>\n          @page { size: A4 portrait; margin: 10mm; }\n          @media print {\n            html, body { margin: 0; padding: 0; }\n            .no-print { display: none !important; }\n            img, .image-cell { break-inside: avoid; page-break-inside: avoid; }\n            table { width: 100%; border-collapse: collapse; table-layout: fixed; }\n            th, td { border: 1px solid #ccc; padding: 4px; vertical-align: top; }\n          }\n          body { font-family: Arial, sans-serif; margin: 20px; }\n          .header { text-align: center; margin-bottom: 20px; }\n          .header h1 { margin: 0; color: #333; }\n          .header p { margin: 5px 0; color: #666; }\n          table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 12px; vertical-align: top; }\n          th { background-color: #f5f5f5; font-weight: bold; }\n          .summary { margin-bottom: 20px; padding: 10px; background-color: #f9f9f9; border-radius: 5px; }\n          .image-cell img { max-width: 100px; max-height: 100px; object-fit: cover; border: 1px solid #ddd; border-radius: 4px; display: block; margin: 0 auto; }\n          .image-cell { text-align: center; vertical-align: middle; }\n          img.thumb { width: 32px; height: 32px; object-fit: cover; border: 1px solid #ddd; border-radius: 4px; }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1></h1>\n          <p>: ${(new Date).toLocaleString("ja-JP")}</p>\n          <p>: ${t.length}${R.size>0?" ()":""}</p>\n        </div>\n        \n        <div class="summary">\n          <strong>:</strong> ${R.size>0?"":""}<br>\n          <strong>:</strong> ${(new Date).toLocaleString("ja-JP")}<br>\n          <strong>:</strong> ${t.length}\n        </div>\n        \n        <table>\n          <thead>\n            <tr>\n              <th></th>\n              <th></th>\n              <th></th>\n              <th></th>\n              <th></th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            ${t.map(e=>{var t,n,r,i,s,o,a,l;const c=e.jsonData,u=(null==c?void 0:c.machineType)||(null==(n=null==(t=null==c?void 0:c.originalChatData)?void 0:t.machineInfo)?void 0:n.machineTypeName)||(null==(i=null==(r=null==c?void 0:c.chatData)?void 0:r.machineInfo)?void 0:i.machineTypeName)||e.machineType||"",d=(null==c?void 0:c.machineNumber)||(null==(o=null==(s=null==c?void 0:c.originalChatData)?void 0:s.machineInfo)?void 0:o.machineNumber)||(null==(l=null==(a=null==c?void 0:c.chatData)?void 0:a.machineInfo)?void 0:l.machineNumber)||e.machineNumber||"",p=(null==c?void 0:c.title)||(null==c?void 0:c.question)||"",h=(null==c?void 0:c.problemDescription)||(null==c?void 0:c.answer)||"",f=Ae(e);return`\n                <tr>\n                  <td>${u}</td>\n                  <td>${d}</td>\n                  <td>${p}</td>\n                  <td>${h}</td>\n                  <td>${je(e.createdAt)}</td>\n                  <td class="image-cell">${f?`<img class="thumb" src="${f}" alt="" onerror="this.style.display='none'; this.nextSibling.style.display='inline';" /><span style="display:none; color: #999; font-size: 10px;"></span>`:""}</td>\n                </tr>\n              `}).join("")}\n          </tbody>\n        </table>\n        \n        <div class="no-print" style="margin-top: 20px; text-align: center;">\n          <button onclick="window.close()"></button>\n        </div>\n      </body>\n      </html>\n    `;e.document.write(n),e.document.close(),setTimeout(()=>{e.print()},100)},disabled:O||0===R.size,variant:"outline",className:"flex items-center gap-2",children:[Lt.jsx(ry,{className:"h-4 w-4"})," (",R.size,")"]})]}),Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsxs(Rg,{onClick:()=>ke("json"),disabled:O,variant:"secondary",className:"flex items-center gap-2",children:[Lt.jsx(ey,{className:"h-4 w-4"}),"JSON"]}),Lt.jsxs(Rg,{onClick:()=>ke("csv"),disabled:O,variant:"secondary",className:"flex items-center gap-2",children:[Lt.jsx(ey,{className:"h-4 w-4"}),"CSV"]})]})]}),O&&Lt.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),"..."]})]}),_>1&&Lt.jsx("div",{className:"flex justify-center mt-6",children:Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsx(Rg,{variant:"outline",onClick:()=>Ne(k-1),disabled:1===k,children:""}),Array.from({length:Math.min(5,_)},(e,t)=>{const n=Math.max(1,Math.min(_-4,k-2))+t;return Lt.jsx(Rg,{variant:k===n?"default":"outline",onClick:()=>Ne(n),children:n},n)}),Lt.jsx(Rg,{variant:"outline",onClick:()=>Ne(k+1),disabled:k===_,children:""})]})}),q&&W&&Lt.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Lt.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto",children:Lt.jsxs("div",{className:"p-6",children:[Lt.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Lt.jsx("h2",{className:"text-xl font-bold",children:""}),Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsxs(Rg,{onClick:()=>(e=>{var t,n,r,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y,b,x,w,S,C,E,T,N,P,R,I;console.log(" :",e);const k=H&&B&&B.id===e.id?B:e;console.log(" :",{fromEditDialog:H&&B&&B.id===e.id,editingItemTitle:null==(t=null==B?void 0:B.jsonData)?void 0:t.title,itemTitle:null==(n=e.jsonData)?void 0:n.title});const j=window.open("","_blank");if(!j)return console.error(" "),void alert("");console.log(" ");let _=k.jsonData;if("string"==typeof _)try{_=JSON.parse(_)}catch(gie){console.error("JSON:",gie),_={}}let A=(null==(r=k.jsonData)?void 0:r.title)||(null==(i=k.jsonData)?void 0:i.question)||"";if((!A||""===A.trim())&&k.fileName){const e=k.fileName.indexOf("_");A=e>0?k.fileName.substring(0,e):k.fileName.replace(/\.json$/,"")}if((!A||""===A.trim())&&(null==(s=null==_?void 0:_.chatData)?void 0:s.messages)){const e=_.chatData.messages.filter(e=>!e.isAiResponse&&e.content&&!e.content.startsWith("data:image/")&&!e.content.startsWith("/api/images/"));e.length>0&&(A=e[0].content||"")}console.log(" :",{"incidentTitle":A,"incidentTitle":typeof A,"incidentTitle":null==A?void 0:A.length,"":H&&B&&B.id===e.id,"sourceItem.jsonData.title":null==(o=k.jsonData)?void 0:o.title,"sourceItem.jsonData.question":null==(a=k.jsonData)?void 0:a.question,"jsonData.title":null==_?void 0:_.title,"jsonData.question":null==_?void 0:_.question,"sourceItem.title":k.title,"sourceItem.fileName":k.fileName,"sourceItem.jsonData":JSON.stringify(k.jsonData||{},null,2).substring(0,500)});let O="";if((null==(l=k.jsonData)?void 0:l.problemDescription)&&""!==k.jsonData.problemDescription.trim()?O=k.jsonData.problemDescription:(null==(c=k.jsonData)?void 0:c.answer)&&""!==k.jsonData.answer.trim()?O=k.jsonData.answer:(null==_?void 0:_.problemDescription)&&""!==_.problemDescription.trim()?O=_.problemDescription:(null==_?void 0:_.answer)&&""!==_.answer.trim()&&(O=_.answer),!O&&(null==(u=null==_?void 0:_.chatData)?void 0:u.messages)){const e=_.chatData.messages.filter(e=>!e.isAiResponse&&e.content&&!e.content.startsWith("data:image/")&&!e.content.startsWith("/api/images/")).map(e=>e.content).join("\n");e&&(O=e)}O||(O="");const D=(null==(d=k.machineInfo)?void 0:d.machineTypeName)||(null==(p=k.jsonData)?void 0:p.machineType)||(null==_?void 0:_.machineType)||(null==(f=null==(h=null==_?void 0:_.chatData)?void 0:h.machineInfo)?void 0:f.machineTypeName)||k.machineType||(null==(m=e.machineInfo)?void 0:m.machineTypeName)||e.machineType||"",M=(null==(v=k.machineInfo)?void 0:v.machineNumber)||(null==(g=k.jsonData)?void 0:g.machineNumber)||(null==_?void 0:_.machineNumber)||(null==(b=null==(y=null==_?void 0:_.chatData)?void 0:y.machineInfo)?void 0:b.machineNumber)||k.machineNumber||(null==(x=e.machineInfo)?void 0:x.machineNumber)||e.machineNumber||"";null==_||_.extractedComponents,null==_||_.extractedSymptoms,null==_||_.possibleModels;const L=(null==(w=k.jsonData)?void 0:w.location)||(null==_?void 0:_.location)||"";console.log(" :",{incidentTitle:A,location:L,problemDescription:O.substring(0,50)+"..."});let z="",F="";if(console.log(":",{itemId:e.id,hasJsonData:!!_,jsonDataKeys:_?Object.keys(_):[],savedImages:null==_?void 0:_.savedImages,conversationHistory:null==_?void 0:_.conversationHistory,originalChatData:null==_?void 0:_.originalChatData,chatData:null==_?void 0:_.chatData,imagePath:e.imagePath}),(null==_?void 0:_.savedImages)&&Array.isArray(_.savedImages)&&_.savedImages.length>0){const t=_.savedImages[0],n="string"==typeof t?t:t.url||t.path||t.fileName;n&&!n.startsWith("data:image/")&&(z=n,F="object"==typeof t&&t.fileName||`_${e.id}`,console.log(": savedImages"))}if(!z&&(null==_?void 0:_.conversationHistory)&&_.conversationHistory.length>0){const t=_.conversationHistory.find(e=>e.content&&(e.content.startsWith("/api/images/")||e.content.startsWith("http")));t&&(z=t.content,F=`_${e.id}`,console.log(": conversationHistoryURL2"))}if(!z&&(null==(S=null==_?void 0:_.originalChatData)?void 0:S.messages)){const t=_.originalChatData.messages.find(e=>e.content&&(e.content.startsWith("/api/images/")||e.content.startsWith("http")));t&&(z=t.content,F=`_${e.id}`,console.log(": originalChatDataURL3"))}if(!z&&(null==(C=null==_?void 0:_.chatData)?void 0:C.messages)){const t=_.chatData.messages.find(e=>e.content&&(e.content.startsWith("/api/images/")||e.content.startsWith("http")));t&&(z=t.content,F=`_${e.id}`,console.log(": chatDataURL4"))}if(!z&&(null==_?void 0:_.messages)&&Array.isArray(_.messages)){const t=_.messages.find(e=>e.content&&(e.content.startsWith("/api/images/")||e.content.startsWith("http")));t&&(z=t.content,F=`_${e.id}`,console.log(": messagesURL5"))}if(!z&&(null==_?void 0:_.savedImages)&&_.savedImages.length>0){const t=_.savedImages[0];if(t.fileName){const e=`/api/images/chat-exports/${t.fileName}`;let n="/api";n=n.replace(/\/api\/?$/,"").replace(/\/$/,""),z=`${n}${e}`,F=t.fileName,console.log(": savedImagesfileName5:",z)}else if(t.url){if(t.url.startsWith("http"))z=t.url;else{let e="/api";e=e.replace(/\/api\/?$/,"").replace(/\/$/,""),z=`${e}${t.url}`}F=t.fileName||`_${e.id}`,console.log(": savedImagesurl5:",z)}else if(t.path){if(t.path.startsWith("http"))z=t.path;else{let e="/api";e=e.replace(/\/api\/?$/,"").replace(/\/$/,""),z=`${e}${t.path.startsWith("/")?t.path:`/api/images/chat-exports/${t.path}`}`}F=t.fileName||`_${e.id}`,console.log(": savedImagespath5:",z)}z||console.log(": savedImages5 - URL")}if(!z&&(null==(E=null==_?void 0:_.originalChatData)?void 0:E.messages)){const t=_.originalChatData.messages.find(e=>e.content&&e.content.startsWith("data:image/"));t&&(z=t.content,F=`_${e.id}`,console.log(": originalChatDataBase643"))}if(!z&&(null==(T=null==_?void 0:_.chatData)?void 0:T.messages)){const t=_.chatData.messages.find(e=>e.content&&e.content.startsWith("data:image/"));t&&(z=t.content,F=`_${e.id}`,console.log(": chatDataBase644"))}if(!z){const t=(e,n="")=>{const r=[];if(e&&"object"==typeof e)for(const[i,s]of Object.entries(e)){const e=n?`${n}.${i}`:i;"string"==typeof s&&s.startsWith("data:image/")?r.push({path:e,content:s}):Array.isArray(s)?s.forEach((n,i)=>{r.push(...t(n,`${e}[${i}]`))}):"object"==typeof s&&null!==s&&r.push(...t(s,e))}return r},n=t(_);n.length>0&&(z=n[0].content,F=`_${e.id}`,console.log(": 6"))}if(!z&&e.imagePath){if(e.imagePath.startsWith("http"))z=e.imagePath;else if(e.imagePath.startsWith("/")){let t="/api";t=t.replace(/\/api\/?$/,"").replace(/\/$/,""),z=`${t}${e.imagePath.startsWith("/api")?e.imagePath:`/api${e.imagePath}`}`}else{const t=`/api/images/chat-exports/${e.imagePath}`;let n="/api";n=n.replace(/\/api\/?$/,"").replace(/\/$/,""),z=`${n}${t}`}F=`_${e.id}`,console.log(": imagePath")}console.log(": :",{hasImage:!!z,imageUrl:z?z.substring(0,100)+"...":"",imageFileName:F,isBase64:!!z&&z.startsWith("data:image/")});const U=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title> - </title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }\n          .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }\n          .header h1 { margin: 0; color: #333; font-size: 24px; }\n          .header p { margin: 5px 0; color: #666; }\n          .section { margin-bottom: 25px; }\n          .section h2 { color: #333; border-bottom: 1px solid #ddd; padding-bottom: 5px; }\n          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }\n          .info-item { padding: 10px; background-color: #f9f9f9; border-radius: 5px; }\n          .info-item strong { display: block; margin-bottom: 5px; color: #333; }\n          .content-box { background-color: #f9f9f9; padding: 15px; border-radius: 5px; margin-top: 10px; }\n          .image-section { text-align: center; margin: 20px 0; }\n          .image-section img { max-width: 100%; max-height: 300px; border: 1px solid #ddd; border-radius: 5px; }\n          @media print {\n            .no-print { display: none; }\n            body { \n              margin: 0; \n              font-size: 10px;\n              line-height: 1.2;\n            }\n            .header h1 { \n              font-size: 16px; \n              margin: 5px 0; \n            }\n            .header p { \n              font-size: 8px; \n              margin: 2px 0; \n            }\n            .section { \n              margin: 8px 0; \n              page-break-inside: avoid;\n            }\n            .section h2 { \n              font-size: 12px; \n              margin: 5px 0; \n            }\n            .info-grid { \n              gap: 4px; \n            }\n            .info-item { \n              font-size: 9px; \n              padding: 2px; \n            }\n            .content { \n              font-size: 9px; \n              line-height: 1.1;\n            }\n            .image-section { \n              margin: 8px 0; \n            }\n            .image-section img { \n              max-height: 150px; \n            }\n            @page {\n              size: A4;\n              margin: 10mm;\n            }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n                      <h1></h1>\n          <p>: ${(new Date).toLocaleString("ja-JP")}</p>\n        </div>\n        \n        <div class="section">\n          <h2></h2>\n          <div class="info-grid">\n            <div class="info-item">\n              <strong>ID</strong>\n              R${e.id.slice(-5).toUpperCase()}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${D||"-"}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${M||"-"}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${e.createdAt?new Date(e.createdAt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0]}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${L}\n            </div>\n          </div>\n        </div>\n        \n        <div class="section">\n          <h2></h2>\n          <div class="info-grid">\n            <div class="info-item">\n              <strong></strong>\n              ${String(A||"").trim()||"-"}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              -\n            </div>\n          </div>\n          <div class="content-box">\n            <strong></strong>\n            <p>${O||""}</p>\n          </div>\n          <div class="content-box">\n            <strong></strong>\n            <p>${(null==(N=k.jsonData)?void 0:N.remarks)||(null==_?void 0:_.remarks)||"-"}</p>\n          </div>\n        </div>\n        \n        ${z?`\n        <div class="section">\n          <h2></h2>\n          <div class="image-section">\n            <p></p>\n            <img src="${z}" alt="" />\n            <p style="font-size: 12px; color: #666;"></p>\n          </div>\n        </div>\n        `:""}\n        \n        <div class="section">\n          <h2></h2>\n          <div class="info-grid">\n            <div class="info-item">\n              <strong></strong>\n              ${(null==(P=e.jsonData)?void 0:P.repairSchedule)||"-"}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${(null==(R=e.jsonData)?void 0:R.location)||"-"}\n            </div>\n          </div>\n        </div>\n        \n        <div class="section">\n          <h2></h2>\n          <div class="content-box">\n            <p>${(null==(I=e.jsonData)?void 0:I.remarks)||""}</p>\n          </div>\n        </div>\n        \n        <div class="section">\n          <p style="text-align: center; color: #666; font-size: 12px;">\n             2025 . All rights reserved.\n          </p>\n        </div>\n        \n        <div class="no-print" style="margin-top: 30px; text-align: center;">\n          <button onclick="window.print()"></button>\n          <button onclick="window.close()"></button>\n        </div>\n      </body>\n      </html>\n    `;console.log(" HTML:",U.length),console.log(" HTML100:",U.substring(0,100));try{j.document.write(U),j.document.close(),console.log(" document.write()HTML")}catch(W){console.error(" document.write():",W);try{j.document.documentElement.innerHTML=U,console.log(" innerHTMLHTML")}catch($){console.error(" innerHTML:",$),j.document.open(),j.document.write(U),j.document.close(),console.log(" HTML")}}setTimeout(()=>{console.log(" HTML:",j.document.documentElement.innerHTML.length),console.log(" HTML100:",j.document.documentElement.innerHTML.substring(0,100))},100),console.log(" HTML"),j.onload=()=>{console.log(" "),j.focus(),setTimeout(()=>{j.print(),console.log(" ")},1e3)},setTimeout(()=>{j.closed||(j.focus(),j.print(),console.log(" : "))},2e3)})(W),className:"flex items-center gap-2",children:[Lt.jsx(ry,{className:"h-4 w-4"}),""]}),Lt.jsxs(Rg,{onClick:()=>{var e;const t=be(W),n=xe(t.jsonData);!n||(null==(e=t.jsonData)?void 0:e.problemDescription)&&""!==t.jsonData.problemDescription||(t.jsonData.problemDescription=n,t.jsonData.answer=n),U(t),G(!1),V(!0)},className:"flex items-center gap-2",children:[Lt.jsx(Ry,{className:"h-4 w-4"}),""]}),Lt.jsx(Rg,{variant:"ghost",onClick:()=>G(!1),children:""})]})]}),Lt.jsxs("div",{className:"space-y-6",children:[Lt.jsxs("div",{className:"text-center border-b pb-4",children:[Lt.jsx("h1",{className:"text-2xl font-bold mb-2",children:""}),Lt.jsxs("p",{className:"text-sm text-gray-500",children:[": ",je(W.createdAt)]})]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Lt.jsxs("div",{children:[Lt.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(Ry,{className:"h-4 w-4 text-gray-500"}),Lt.jsxs("span",{children:[Lt.jsx("strong",{children:":"})," ",W.machineType]})]}),Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(my,{className:"h-4 w-4 text-gray-500"}),Lt.jsxs("span",{children:[Lt.jsx("strong",{children:":"})," ",W.machineNumber]})]}),Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(Fg,{className:"h-4 w-4 text-gray-500"}),Lt.jsxs("span",{children:[Lt.jsx("strong",{children:":"})," ",je(W.createdAt)]})]}),Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(uy,{className:"h-4 w-4 text-gray-500"}),Lt.jsxs("span",{children:[Lt.jsx("strong",{children:":"})," ",W.imagePath?"":""]})]})]})]}),W.imagePath&&Lt.jsxs("div",{children:[Lt.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),Lt.jsx("img",{src:W.imagePath,alt:"",className:"w-full h-48 object-cover rounded-md"})]})]}),Lt.jsxs("div",{children:[Lt.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),Lt.jsx("div",{className:"bg-gray-50 p-4 rounded-md",children:Lt.jsx("pre",{className:"text-sm overflow-auto max-h-64",children:JSON.stringify(W.jsonData,null,2)})})]})]})]})})}),H&&B&&Lt.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[Lt.jsx("style",{dangerouslySetInnerHTML:{__html:"\n            @media print {\n              @page {\n                size: A4;\n                margin: 1mm 15mm 2mm 10mm;\n              }\n              * {\n                box-sizing: border-box;\n              }\n              html, body {\n                margin: 0 !important;\n                padding: 0 !important;\n                width: 100% !important;\n                height: auto !important;\n                background: white !important;\n                overflow: visible !important;\n              }\n              body > * {\n                visibility: hidden;\n              }\n              .print-content-wrapper,\n              .print-content-wrapper * {\n                visibility: visible !important;\n              }\n              .print-content-wrapper {\n                position: relative !important;\n                display: block !important;\n                width: 100% !important;\n                max-width: 100% !important;\n                margin: 0 !important;\n                padding: 0 !important;\n                background: white !important;\n                font-size: 8pt !important;\n                line-height: 1.2 !important;\n                border: none !important;\n                box-shadow: none !important;\n              }\n              .print-content-wrapper > div {\n                padding: 2mm !important;\n              }\n              .no-print {\n                display: none !important;\n              }\n              .print-content-wrapper h2,\n              .print-content-wrapper h3 {\n                font-size: 9pt !important;\n                margin: 3pt 0 2pt 0 !important;\n                color: #000 !important;\n                font-weight: bold !important;\n                page-break-after: avoid;\n              }\n              .print-content-wrapper .bg-gray-50,\n              .print-content-wrapper .bg-blue-50,\n              .print-content-wrapper .bg-yellow-50,\n              .print-content-wrapper .bg-purple-50 {\n                background: #f5f5f5 !important;\n                border: 1px solid #ddd !important;\n                border-radius: 3px !important;\n                padding: 4pt !important;\n                margin-bottom: 3pt !important;\n                page-break-inside: avoid;\n              }\n              .print-content-wrapper label {\n                font-size: 7pt !important;\n                font-weight: bold !important;\n                display: block !important;\n                margin-bottom: 2pt !important;\n                color: #000 !important;\n              }\n              .print-content-wrapper input,\n              .print-content-wrapper textarea,\n              .print-content-wrapper select {\n                width: 100% !important;\n                padding: 1pt 2pt !important;\n                border: none !important;\n                border-bottom: 1px solid #ccc !important;\n                border-radius: 0 !important;\n                font-size: 7pt !important;\n                background: transparent !important;\n                color: #000 !important;\n                margin-bottom: 2pt !important;\n                display: block !important;\n              }\n              /* 1 */\n              .print-content-wrapper .print-basic-info-grid {\n                display: flex !important;\n                gap: 4pt !important;\n                margin-bottom: 1pt !important;\n                align-items: center !important;\n              }\n              .print-content-wrapper .print-basic-info-item {\n                display: flex !important;\n                align-items: center !important;\n                gap: 2pt !important;\n                margin-bottom: 0 !important;\n              }\n              .print-content-wrapper .print-basic-info-item .print-inline-label {\n                margin-bottom: 0 !important;\n                font-size: 7pt !important;\n                width: auto !important;\n                min-width: 40pt !important;\n                display: inline-block !important;\n              }\n              .print-content-wrapper .print-basic-info-item input,\n              .print-content-wrapper .print-basic-info-item select,\n              .print-content-wrapper .print-basic-info-item [data-radix-select-trigger]::before,\n              .print-content-wrapper .print-basic-info-item .print-select-trigger::before {\n                border: none !important;\n                border-bottom: 1px solid #ccc !important;\n                padding: 0.5pt 1pt !important;\n                margin-bottom: 0 !important;\n                min-height: auto !important;\n                width: auto !important;\n                flex: 1 !important;\n              }\n              /* 1 */\n              .print-content-wrapper .print-location-field {\n                width: 40% !important;\n                margin-top: 1pt !important;\n                display: flex !important;\n                align-items: center !important;\n                gap: 2pt !important;\n              }\n              .print-content-wrapper .print-location-field label {\n                margin-bottom: 0 !important;\n                font-size: 7pt !important;\n                width: auto !important;\n                min-width: 30pt !important;\n                display: inline-block !important;\n              }\n              .print-content-wrapper .print-location-field input {\n                width: auto !important;\n                flex: 1 !important;\n                padding: 0.5pt 1pt !important;\n                border: none !important;\n                border-bottom: 1px solid #ccc !important;\n                margin-bottom: 0 !important;\n              }\n              /*  */\n              .print-content-wrapper .bg-blue-50 {\n                padding: 4pt !important;\n                margin-bottom: 4pt !important;\n              }\n              /*  */\n              .print-content-wrapper .bg-blue-50 h3 {\n                display: flex !important;\n                align-items: center !important;\n                justify-content: space-between !important;\n                margin-bottom: 3pt !important;\n              }\n              .print-content-wrapper .bg-blue-50 h3 > span:last-child {\n                font-size: 6pt !important;\n                font-weight: normal !important;\n                color: #666 !important;\n                margin-left: auto !important;\n              }\n              .print-content-wrapper [data-radix-select-content],\n              .print-content-wrapper [data-radix-portal] {\n                display: none !important;\n              }\n              .print-content-wrapper .print-select-trigger,\n              .print-content-wrapper [data-radix-select-trigger] {\n                display: block !important;\n              }\n              .print-content-wrapper .print-select-trigger > span,\n              .print-content-wrapper [data-radix-select-trigger] > span {\n                display: none !important;\n              }\n              .print-content-wrapper .print-select-trigger::before,\n              .print-content-wrapper [data-radix-select-trigger]::before {\n                content: attr(data-value) !important;\n                display: block !important;\n                padding: 0.5pt 1pt !important;\n                border: none !important;\n                border-bottom: 1px solid #ccc !important;\n                border-radius: 0 !important;\n                font-size: 7pt !important;\n                background: transparent !important;\n                color: #000 !important;\n                margin-bottom: 0 !important;\n                min-height: auto !important;\n              }\n              .print-content-wrapper .print-select-trigger > *,\n              .print-content-wrapper [data-radix-select-trigger] > * {\n                display: none !important;\n              }\n              .print-content-wrapper textarea {\n                min-height: 25pt !important;\n                max-height: 35pt !important;\n                resize: none !important;\n              }\n              /* 1.3 */\n              .print-content-wrapper .bg-blue-50 textarea {\n                min-height: 65pt !important;\n                max-height: 78pt !important;\n              }\n              /* A4 */\n              .print-content-wrapper .print-remarks-section textarea {\n                min-height: 60pt !important;\n                max-height: 90pt !important;\n              }\n              .print-content-wrapper .bg-gray-50:last-of-type {\n                padding: 3pt !important;\n                margin-bottom: 2pt !important;\n              }\n              .print-content-wrapper .bg-gray-50:last-of-type h3 {\n                margin-bottom: 2pt !important;\n              }\n              /*  */\n              .print-content-wrapper .print-remarks-header {\n                display: flex !important;\n                align-items: center !important;\n                justify-content: space-between !important;\n                margin-bottom: 2pt !important;\n              }\n              .print-content-wrapper .print-remarks-hint {\n                font-size: 6pt !important;\n                font-weight: normal !important;\n                color: #666 !important;\n                margin-left: auto !important;\n              }\n              /*  */\n              .print-content-wrapper .print-remarks-section {\n                position: relative !important;\n              }\n              .print-content-wrapper .print-remarks-textarea {\n                border: none !important;\n                background: transparent !important;\n                padding: 2pt 0 !important;\n                min-height: 60pt !important;\n                max-height: 90pt !important;\n                line-height: 1.5em !important;\n                position: relative !important;\n                /*  */\n                background-image: \n                  url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='1.5em'%3E%3Cline x1='0' y1='1.48em' x2='100%25' y2='1.48em' stroke='%23ccc' stroke-width='0.3' stroke-dasharray='2,2'/%3E%3C/svg%3E\") !important;\n                background-repeat: repeat-y !important;\n                background-size: 100% 1.5em !important;\n                background-position: 0 0 !important;\n                -webkit-print-color-adjust: exact !important;\n                print-color-adjust: exact !important;\n                color-adjust: exact !important;\n              }\n              .print-content-wrapper .grid {\n                display: grid !important;\n                gap: 3pt !important;\n                margin-bottom: 3pt !important;\n              }\n              .print-content-wrapper .space-y-4 > * + * {\n                margin-top: 3pt !important;\n              }\n              .print-content-wrapper .space-y-6 > * + * {\n                margin-top: 4pt !important;\n              }\n              /*  */\n              .print-content-wrapper .bg-gray-50,\n              .print-content-wrapper .bg-blue-50,\n              .print-content-wrapper .bg-yellow-50,\n              .print-content-wrapper .bg-purple-50 {\n                padding: 3pt !important;\n                margin-bottom: 3pt !important;\n              }\n              .print-content-wrapper .bg-gray-50 h3,\n              .print-content-wrapper .bg-blue-50 h3,\n              .print-content-wrapper .bg-yellow-50 h3,\n              .print-content-wrapper .bg-purple-50 h3 {\n                margin-bottom: 2pt !important;\n                font-size: 9pt !important;\n              }\n              .print-content-wrapper .grid.grid-cols-1 {\n                grid-template-columns: 1fr;\n              }\n              .print-content-wrapper .grid.grid-cols-2,\n              .print-content-wrapper .grid.md\\:grid-cols-2 {\n                grid-template-columns: repeat(2, 1fr);\n              }\n              /* 1 */\n              .print-content-wrapper .print-repair-plan-grid {\n                display: flex !important;\n                gap: 4pt !important;\n                margin-bottom: 2pt !important;\n                align-items: center !important;\n              }\n              .print-content-wrapper .bg-yellow-50 {\n                padding: 3pt !important;\n                margin-bottom: 2pt !important;\n              }\n              .print-content-wrapper .bg-yellow-50 h3 {\n                margin-bottom: 2pt !important;\n              }\n              .print-content-wrapper .print-repair-plan-item {\n                display: flex !important;\n                align-items: center !important;\n                gap: 2pt !important;\n                margin-bottom: 0 !important;\n              }\n              .print-content-wrapper .print-repair-plan-item .print-inline-label {\n                margin-bottom: 0 !important;\n                font-size: 7pt !important;\n                width: auto !important;\n                min-width: 50pt !important;\n                display: inline-block !important;\n              }\n              .print-content-wrapper .print-repair-plan-item input {\n                border: none !important;\n                border-bottom: 1px solid #ccc !important;\n                padding: 0.5pt 1pt !important;\n                margin-bottom: 0 !important;\n                width: auto !important;\n                flex: 1 !important;\n              }\n              .print-content-wrapper .grid.grid-cols-3,\n              .print-content-wrapper .grid.md\\:grid-cols-3 {\n                grid-template-columns: repeat(3, 1fr);\n              }\n              .print-content-wrapper .space-y-4 > * + * {\n                margin-top: 6pt;\n              }\n              .print-content-wrapper img {\n                max-width: 100% !important;\n                max-height: 45pt !important;\n                border: 1px solid #ddd !important;\n                margin: 3pt 0 !important;\n              }\n              .print-content-wrapper .grid.grid-cols-3 img {\n                max-height: 40pt !important;\n              }\n              .print-content-wrapper svg {\n                display: none !important;\n              }\n              .print-content-wrapper .flex {\n                display: flex !important;\n                gap: 3pt !important;\n              }\n              .print-content-wrapper .flex.items-center {\n                align-items: center !important;\n              }\n              .print-content-wrapper button,\n              .print-content-wrapper [role=\"button\"],\n              .print-content-wrapper .no-print {\n                display: none !important;\n              }\n              .print-content-wrapper [data-radix-portal] {\n                display: none !important;\n              }\n              .print-content-wrapper .print-header {\n                display: block !important;\n                margin-bottom: 0.5pt !important;\n                page-break-after: avoid;\n                text-align: center !important;\n              }\n              .print-content-wrapper .print-header h1 {\n                font-size: 15pt !important;\n                font-weight: bold !important;\n                text-align: center !important;\n                margin: 0 0 0.25pt 0 !important;\n                border-bottom: 1px solid #000 !important;\n                padding-bottom: 0.25pt !important;\n                color: #000 !important;\n                line-height: 1.2 !important;\n              }\n              .print-content-wrapper .print-header p {\n                font-size: 5pt !important;\n                text-align: center !important;\n                margin: 0 0 0.25pt 0 !important;\n                color: #666 !important;\n                line-height: 1.2 !important;\n              }\n              .print-content-wrapper .bg-yellow-50 {\n                background: #f5f5f5 !important;\n                border: 1px solid #ddd !important;\n                border-radius: 3px !important;\n                padding: 4pt !important;\n                margin-bottom: 4pt !important;\n                page-break-inside: avoid;\n              }\n              /*  */\n              .print-content-wrapper .bg-gray-50:last-of-type,\n              .print-content-wrapper .bg-gray-50.print-remarks-section {\n                background: #f5f5f5 !important;\n                border: 1px solid #ddd !important;\n                border-radius: 3px !important;\n                padding: 4pt !important;\n                margin-bottom: 4pt !important;\n                page-break-inside: avoid;\n                display: block !important;\n              }\n            }\n          "}}),Lt.jsx("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[95vh] overflow-auto print-content-wrapper",children:Lt.jsxs("div",{className:"p-6",children:[(0!==ue.machineTypes.length||we||T(e,null,function*(){try{Se(!0),console.log(" ");const{buildApiUrl:t}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),n=yield fetch(t("/machines/machine-types"));console.log(" API:",n.status,n.statusText);const r=yield n.json();if(console.log(" API:",r),r.success&&r.data){const e=new Set,t=[];console.log(" API"),r.data.forEach(n=>{n.machine_type_name&&!e.has(n.machine_type_name)&&(e.add(n.machine_type_name),t.push({id:n.id,machineTypeName:n.machine_type_name}))});const n={machineTypes:t,machines:[]};console.log(" :",n),console.log(" :",n.machineTypes.length),console.log(" :",n.machines.length),console.log(" :",n.machineTypes.map(e=>e.machineTypeName)),console.log(" :",n.machines.map(e=>`${e.machineNumber} (${e.machineTypeName})`)),console.log(" setMachineData:",n),de(n),console.log(" setMachineData")}else console.log(" :",r),console.log(" data.success:",r.success),console.log(" data.machineTypes:",r.machineTypes),console.log(" data.machines:",r.machines),de({machineTypes:[],machines:[]})}catch(t){console.error(":",t),de({machineTypes:[],machines:[]})}finally{Se(!1)}}),console.log("editingItem:",{machineType:B.machineType,machineNumber:B.machineNumber,fileName:B.fileName,title:null==(Oe=B.jsonData)?void 0:Oe.title,question:null==(De=B.jsonData)?void 0:De.question,jsonData:B.jsonData}),null),Lt.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Lt.jsx("h2",{className:"text-xl font-bold no-print",children:""}),Lt.jsxs("div",{className:"flex gap-2 no-print",children:[Lt.jsxs(Rg,{onClick:()=>{console.log(":",B),_e(B)},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",children:[Lt.jsx(ey,{className:"h-4 w-4"}),""]}),Lt.jsxs(Rg,{onClick:()=>{console.log(" "),window.print()},className:"flex items-center gap-2",children:[Lt.jsx(Sy,{className:"h-4 w-4"}),""]}),Lt.jsx(Rg,{variant:"outline",onClick:()=>{console.log(""),V(!1),U(null)},children:""})]})]}),Lt.jsxs("div",{className:"space-y-6 print-content",children:[Lt.jsxs("div",{className:"print-header no-print",style:{display:"none"},children:[Lt.jsx("h1",{children:""}),Lt.jsxs("p",{children:[": ",(new Date).toLocaleString("ja-JP")]})]}),Lt.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[Lt.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[Lt.jsx(Ry,{className:"h-5 w-5"}),""]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 print-basic-info-grid",children:[Lt.jsxs("div",{className:"print-basic-info-item",children:[Lt.jsx("label",{className:"block text-sm font-medium mb-2 print-inline-label",children:""}),Lt.jsxs(XH,{value:B.machineType||"",onValueChange:e=>{console.log(":",e),U(m(f({},B),{machineType:e,jsonData:m(f({},B.jsonData),{machineType:e})}))},children:[Lt.jsx(tV,{"data-value":B.machineType||"",className:"print-select-trigger",children:Lt.jsx(eV,{placeholder:B.machineType?B.machineType:""})}),Lt.jsxs(iV,{children:[B.machineType&&Lt.jsxs(sV,{value:B.machineType,children:[B.machineType," ()"]}),we?Lt.jsx(sV,{value:"loading",disabled:!0,children:"..."}):(null==(n=null==(t=ue.machineTypes)?void 0:t.filter(e=>(null==e?void 0:e.machineTypeName)&&e.machineTypeName!==B.machineType))?void 0:n.map(e=>Lt.jsx(sV,{value:e.machineTypeName||"",children:e.machineTypeName||""},e.id||`machine-type-${Date.now()}-${Math.random()}`)))||[]]})]})]}),Lt.jsxs("div",{className:"print-basic-info-item",children:[Lt.jsx("label",{className:"block text-sm font-medium mb-2 print-inline-label",children:""}),Lt.jsxs(XH,{value:B.machineNumber||"",onValueChange:e=>{console.log(":",e),U(m(f({},B),{machineNumber:e,jsonData:m(f({},B.jsonData),{machineNumber:e})}))},children:[Lt.jsx(tV,{"data-value":B.machineNumber||"",className:"print-select-trigger",children:Lt.jsx(eV,{placeholder:B.machineNumber?B.machineNumber:""})}),Lt.jsxs(iV,{children:[B.machineNumber&&Lt.jsxs(sV,{value:B.machineNumber,children:[B.machineNumber," ()"]}),we?Lt.jsx(sV,{value:"loading",disabled:!0,children:"..."}):(null==(i=null==(r=ue.machines)?void 0:r.filter(e=>(null==e?void 0:e.machineNumber)&&(null==e?void 0:e.machineTypeName)&&(!B.machineType||e.machineTypeName===B.machineType)&&e.machineNumber!==B.machineNumber))?void 0:i.map(e=>Lt.jsxs(sV,{value:e.machineNumber||"",children:[e.machineNumber||""," (",e.machineTypeName||"",")"]},e.id||`machine-${Date.now()}-${Math.random()}`)))||[]]})]})]}),Lt.jsxs("div",{className:"print-basic-info-item",children:[Lt.jsx("label",{className:"block text-sm font-medium mb-2 print-inline-label",children:""}),Lt.jsx(ML,{value:B.fileName||"",onChange:e=>{console.log(":",e.target.value),U(m(f({},B),{fileName:e.target.value}))},placeholder:"",disabled:!0})]})]})]}),Lt.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[Lt.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[Lt.jsx(ry,{className:"h-5 w-5"}),Lt.jsx("span",{children:""}),Lt.jsx("span",{className:"text-xs font-normal text-gray-600 ml-auto",children:""})]}),Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{children:[Lt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Lt.jsx(ML,{value:(()=>{var e,t;if(B.fileName){const e=B.fileName.indexOf("_");return e>0?B.fileName.substring(0,e):B.fileName.replace(/\.json$/,"")}return(null==(e=B.jsonData)?void 0:e.title)||(null==(t=B.jsonData)?void 0:t.question)||""})(),onChange:e=>{console.log(":",e.target.value),U(m(f({},B),{jsonData:m(f({},B.jsonData),{title:e.target.value,question:e.target.value})}))},placeholder:""}),(()=>{var e,t,n,r;const i=(null==(e=B.jsonData)?void 0:e.title)||(null==(t=B.jsonData)?void 0:t.question)||"";return console.log("  - :",i),console.log("  - jsonData.title:",null==(n=B.jsonData)?void 0:n.title),console.log("  - jsonData.question:",null==(r=B.jsonData)?void 0:r.question),null})()]}),Lt.jsxs("div",{children:[Lt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Lt.jsx("textarea",{value:(null==(s=B.jsonData)?void 0:s.problemDescription)||(null==(o=B.jsonData)?void 0:o.answer)||"",onChange:e=>{console.log(":",e.target.value),U(m(f({},B),{jsonData:m(f({},B.jsonData),{problemDescription:e.target.value,answer:e.target.value})}))},className:"w-full h-32 p-3 border border-gray-300 rounded-md",placeholder:""})]}),Lt.jsxs("div",{className:"print-location-field",children:[Lt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Lt.jsx(ML,{value:(null==(a=B.jsonData)?void 0:a.location)||"",onChange:e=>{console.log(":",e.target.value),U(m(f({},B),{jsonData:m(f({},B.jsonData),{location:e.target.value})}))},placeholder:": "})]})]})]}),Lt.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[Lt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Lt.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[Lt.jsx(uy,{className:"h-5 w-5"}),""]}),Lt.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",id:"image-upload-input",onChange:t=>T(e,null,function*(){var e;const n=t.target.files;if(!n||0===n.length)return;const r=[];for(let t=0;t<n.length;t++){const e=n[t],s=new FormData;s.append("image",e);try{const e=yield fetch("/api/history/upload-image",{method:"POST",body:s});if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}const t=yield e.json();r.push({fileName:t.fileName,url:t.imageUrl||t.url})}catch(i){console.error(":",i),alert(`: ${i instanceof Error?i.message:"Unknown error"}`)}}if(r.length>0){const t=(null==(e=B.jsonData)?void 0:e.savedImages)||[];U(m(f({},B),{jsonData:m(f({},B.jsonData),{savedImages:[...r,...t]})}))}t.target.value=""})}),Lt.jsxs(Rg,{type:"button",onClick:()=>{var e;null==(e=document.getElementById("image-upload-input"))||e.click()},className:"text-sm",variant:"outline",children:[Lt.jsx(Fy,{className:"h-4 w-4 mr-1"}),""]})]}),(()=>{const e=(e=>{var t;const n=[];Array.isArray(null==e?void 0:e.savedImages)&&e.savedImages.length>0&&e.savedImages.forEach((e,t)=>{if("string"!=typeof e||e.startsWith("data:image/")){if(e&&"object"==typeof e)if(e.fileName){const r=`/api/images/chat-exports/${e.fileName}`;let i="/api";i=i.replace(/\/api\/?$/,"").replace(/\/$/,""),n.push({url:`${i}${r}`,fileName:e.fileName,index:t})}else if(e.url){const r=e.url.startsWith("http")?e.url:`/api${e.url}`;n.push({url:r,fileName:e.fileName,index:t})}else if(e.path){const r=e.path.startsWith("http")?e.path:`/api${e.path}`;n.push({url:r,fileName:e.fileName,index:t})}}else n.push({url:e,index:t})}),Array.isArray(null==e?void 0:e.images)&&e.images.length>0&&e.images.forEach((e,t)=>{if("string"==typeof e)n.push({url:e,index:t+1e3});else if(e&&"object"==typeof e){const r=e.url||e.path||e.fileName;if(r&&!r.startsWith("data:image/")){const i=r.startsWith("http")?r:`/api${r}`;n.push({url:i,fileName:e.fileName,index:t+1e3})}}}),Array.isArray(null==(t=null==e?void 0:e.jsonData)?void 0:t.savedImages)&&e.jsonData.savedImages.length>0&&e.jsonData.savedImages.forEach((e,t)=>{if("string"!=typeof e||e.startsWith("data:image/")){if(e&&"object"==typeof e)if(e.fileName){const r=`/api/images/chat-exports/${e.fileName}`;let i="/api";i=i.replace(/\/api\/?$/,"").replace(/\/$/,""),n.push({url:`${i}${r}`,fileName:e.fileName,index:t+2e3})}else if(e.url){const r=e.url.startsWith("http")?e.url:`/api${e.url}`;n.push({url:r,fileName:e.fileName,index:t+2e3})}}else n.push({url:e,index:t+2e3})});const r=[],i=new Set;return n.forEach(e=>{i.has(e.url)||(i.add(e.url),r.push(e))}),r})(B);return e.length>0?Lt.jsx("div",{className:"grid grid-cols-3 gap-4",children:e.map((e,t)=>Lt.jsxs("div",{className:"relative group",children:[Lt.jsx("img",{src:e.url,alt:`${t+1}`,className:"w-full h-auto max-h-48 object-contain border border-gray-300 rounded-md shadow-sm",onError:t=>{console.error("  ():",e.url),t.target.style.display="none"}}),Lt.jsx(Rg,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{var t;const n=((null==(t=B.jsonData)?void 0:t.savedImages)||[]).filter((t,n)=>(!e.fileName||t.fileName!==e.fileName)&&t.url!==e.url&&t.path!==e.url);U(m(f({},B),{jsonData:m(f({},B.jsonData),{savedImages:n})}))},children:Lt.jsx(Ky,{className:"h-4 w-4"})})]},t))}):Lt.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:""})})()]}),Lt.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[Lt.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[Lt.jsx(my,{className:"h-5 w-5"}),""]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 print-repair-plan-grid",children:[Lt.jsxs("div",{className:"print-repair-plan-item",children:[Lt.jsx("label",{className:"block text-sm font-medium mb-2 print-inline-label",children:""}),Lt.jsx(ML,{type:"date",value:(null==(l=B.jsonData)?void 0:l.repairSchedule)||"",onChange:e=>{U(m(f({},B),{jsonData:m(f({},B.jsonData),{repairSchedule:e.target.value})}))},placeholder:""})]}),Lt.jsxs("div",{className:"print-repair-plan-item",children:[Lt.jsx("label",{className:"block text-sm font-medium mb-2 print-inline-label",children:""}),Lt.jsx(ML,{value:(null==(c=B.jsonData)?void 0:c.location)||"",onChange:e=>{U(m(f({},B),{jsonData:m(f({},B.jsonData),{location:e.target.value})}))},placeholder:""})]})]})]}),Lt.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg print-remarks-section",children:[Lt.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2 print-remarks-header",children:[Lt.jsx(ry,{className:"h-5 w-5"}),Lt.jsx("span",{children:""}),Lt.jsx("span",{className:"print-remarks-hint",children:"200"})]}),Lt.jsxs("div",{children:[Lt.jsx("textarea",{value:(null==(u=B.jsonData)?void 0:u.remarks)||"",onChange:e=>{e.target.value.length<=200&&U(m(f({},B),{jsonData:m(f({},B.jsonData),{remarks:e.target.value})}))},className:"w-full h-24 p-3 border border-gray-300 rounded-md print-remarks-textarea",placeholder:"",maxLength:200}),Lt.jsxs("p",{className:"text-xs text-gray-500 mt-1 no-print",children:[(null==(p=null==(d=B.jsonData)?void 0:d.remarks)?void 0:p.length)||0,"/200"]})]})]}),Lt.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t no-print",children:[Lt.jsx(Rg,{variant:"outline",onClick:()=>{console.log(""),V(!1),U(null)},children:""}),Lt.jsx(Rg,{onClick:()=>{console.log(":",B),_e(B)},className:"bg-green-600 hover:bg-green-700 text-white",children:""})]})]})]})})]}),K.show&&Lt.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Lt.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[Lt.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:""}),Lt.jsx("p",{className:"text-gray-700 mb-6",children:""}),Lt.jsx("div",{className:"bg-gray-50 p-3 rounded-lg mb-6",children:Lt.jsx("p",{className:"font-medium text-sm text-gray-800",children:K.title})}),Lt.jsxs("div",{className:"flex justify-end gap-3",children:[Lt.jsx(Rg,{variant:"outline",onClick:()=>J({show:!1,id:"",title:""}),children:""}),Lt.jsx(Rg,{variant:"destructive",onClick:()=>Pe(K.id),className:"bg-red-600 hover:bg-red-700",children:""})]})]})}),ee&&ne&&Lt.jsx(dV,{data:ne,fileName:ie,onClose:()=>{te(!1),re(null),se(""),L(!1)},onSave:e=>{console.log(":",e);const t=JSON.parse(localStorage.getItem("savedReports")||"[]"),n={id:Date.now(),fileName:ie,reportData:e,savedAt:(new Date).toISOString()};t.push(n),localStorage.setItem("savedReports",JSON.stringify(t)),console.log(":",n)},onPrint:e=>{console.log(":",e),window.print()}})]});var Oe,De}},Symbol.toStringTag,{value:"Module"}));var hV="Checkbox",[fV]=Zy(hV),[mV,vV]=fV(hV);function gV(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:i,disabled:s,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=e,[p,h]=ib({prop:n,defaultProp:null!=i&&i,onChange:l,caller:hV}),[v,g]=Pt.useState(null),[y,b]=Pt.useState(null),x=Pt.useRef(!1),w=!v||!!o||!!v.closest("form"),S={checked:p,disabled:s,setChecked:h,control:v,setControl:g,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:x,required:c,defaultChecked:!NV(i)&&i,isFormControl:w,bubbleInput:y,setBubbleInput:b};return Lt.jsx(mV,m(f({scope:t},S),{children:TV(d)?d(S):r}))}var yV="CheckboxTrigger",bV=Pt.forwardRef((e,t)=>{var n=e,{__scopeCheckbox:r,onKeyDown:i,onClick:s}=n,o=v(n,["__scopeCheckbox","onKeyDown","onClick"]);const{control:a,value:l,disabled:c,checked:u,required:d,setControl:p,setChecked:h,hasConsumerStoppedPropagationRef:g,isFormControl:y,bubbleInput:b}=vV(yV,r),x=mv(t,p),w=Pt.useRef(u);return Pt.useEffect(()=>{const e=null==a?void 0:a.form;if(e){const t=()=>h(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[a,h]),Lt.jsx(cb.button,m(f({type:"button",role:"checkbox","aria-checked":NV(u)?"mixed":u,"aria-required":d,"data-state":PV(u),"data-disabled":c?"":void 0,disabled:c,value:l},o),{ref:x,onKeyDown:Yy(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:Yy(s,e=>{h(e=>!!NV(e)||!e),b&&y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}))});bV.displayName=yV;var xV=Pt.forwardRef((e,t)=>{const n=e,{__scopeCheckbox:r,name:i,checked:s,defaultChecked:o,required:a,disabled:l,value:c,onCheckedChange:u,form:d}=n,p=v(n,["__scopeCheckbox","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]);return Lt.jsx(gV,{__scopeCheckbox:r,checked:s,defaultChecked:o,disabled:l,required:a,onCheckedChange:u,name:i,form:d,value:c,internal_do_not_use_render:({isFormControl:e})=>Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(bV,m(f({},p),{ref:t,__scopeCheckbox:r})),e&&Lt.jsx(EV,{__scopeCheckbox:r})]})})});xV.displayName=hV;var wV="CheckboxIndicator",SV=Pt.forwardRef((e,t)=>{const n=e,{__scopeCheckbox:r,forceMount:i}=n,s=v(n,["__scopeCheckbox","forceMount"]),o=vV(wV,r);return Lt.jsx(Ob,{present:i||NV(o.checked)||!0===o.checked,children:Lt.jsx(cb.span,m(f({"data-state":PV(o.checked),"data-disabled":o.disabled?"":void 0},s),{ref:t,style:f({pointerEvents:"none"},e.style)}))})});SV.displayName=wV;var CV="CheckboxBubbleInput",EV=Pt.forwardRef((e,t)=>{var n=e,{__scopeCheckbox:r}=n,i=v(n,["__scopeCheckbox"]);const{control:s,hasConsumerStoppedPropagationRef:o,checked:a,defaultChecked:l,required:c,disabled:u,name:d,value:p,form:h,bubbleInput:g,setBubbleInput:y}=vV(CV,r),b=mv(t,y),x=Yz(a),w=Zz(s);Pt.useEffect(()=>{const e=g;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set,r=!o.current;if(x!==a&&n){const t=new Event("click",{bubbles:r});e.indeterminate=NV(a),n.call(e,!NV(a)&&a),e.dispatchEvent(t)}},[g,x,a,o]);const S=Pt.useRef(!NV(a)&&a);return Lt.jsx(cb.input,m(f({type:"checkbox","aria-hidden":!0,defaultChecked:null!=l?l:S.current,required:c,disabled:u,name:d,value:p,form:h},i),{tabIndex:-1,ref:b,style:m(f(f({},i.style),w),{position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"})}))});function TV(e){return"function"==typeof e}function NV(e){return"indeterminate"===e}function PV(e){return NV(e)?"indeterminate":e?"checked":"unchecked"}EV.displayName=CV;const RV=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(xV,m(f({ref:t,className:Ng("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r)},i),{children:Lt.jsx(SV,{className:Ng("flex items-center justify-center text-current"),children:Lt.jsx(Ug,{className:"h-4 w-4"})})}))});function IV(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function kV(){const[e,t]=Pt.useState(""),[n,r]=Pt.useState("");return Lt.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm",children:[Lt.jsx("div",{className:"text-xl font-semibold text-blue-800 mb-3",children:""}),Lt.jsx("div",{className:"mb-6",children:Lt.jsx("p",{className:"text-base font-semibold text-gray-700",children:""})}),Lt.jsxs("div",{className:"space-y-6",children:[Lt.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[Lt.jsxs("div",{className:"space-y-3 mb-6",children:[Lt.jsx("div",{className:"flex items-center space-x-2",children:Lt.jsx("input",{type:"file",accept:".json",onChange:e=>function(n){return T(this,null,function*(){if(!n||!n.length)return;const i=n[0];try{t(`JSON: ${i.name}`);const e=yield i.text();r(e),t(`JSON: ${i.name}`)}catch(e){t(`JSON: ${i.name} (${e.message||e})`)}})}(e.target.files),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"})}),Lt.jsx("div",{className:"text-xs text-gray-500",children:"UIJSON"})]}),Lt.jsxs("div",{className:"space-y-3 mb-6",children:[Lt.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"JSON"}),Lt.jsx("textarea",{value:n,onChange:e=>r(e.target.value),placeholder:"JSON...",className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),Lt.jsx("div",{className:"pt-2 mb-6",children:Lt.jsx("button",{onClick:function(){return T(this,null,function*(){if(n.trim())try{let e;t("JSON...");try{e=JSON.parse(n)}catch(gie){return void t(": JSON")}let i="";if(i=e.messages&&Array.isArray(e.messages)?e.messages.map(e=>e.content||e.text||"").filter(e=>e.trim()).join("\n\n---\n\n"):e.content?e.content:"string"==typeof e?e:JSON.stringify(e,null,2),!i.trim())return void t(": ");const s=yield fetch("/api/ingest",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({filename:`chat_export_${(new Date).toISOString().slice(0,19).replace(/:/g,"-")}.json`,text:i,tags:["chat_export","json"]})});if(!s.ok)throw new Error("ingest failed");const o=yield s.json();t(`JSON  doc_id=${o.doc_id}, chunks=${o.chunks}`),r("")}catch(gie){t(`JSON: ${gie.message||gie}`)}else t(": JSON")})},disabled:!n.trim(),className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:""})})]}),Lt.jsx("div",{className:"text-sm mt-2 p-2 bg-gray-50 rounded border min-h-[2rem]",children:e})]})]})}RV.displayName=xV.displayName,function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){if(!a&&IV)return IV(o);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){return i(t[o][1][e]||e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var s=IV,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){var r=e("./utils"),i=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,o,a,l,c,u=[],d=0,p=e.length,h=p,f="string"!==r.getTypeOf(e);d<e.length;)h=p-d,i=f?(t=e[d++],n=d<p?e[d++]:0,d<p?e[d++]:0):(t=e.charCodeAt(d++),n=d<p?e.charCodeAt(d++):0,d<p?e.charCodeAt(d++):0),o=t>>2,a=(3&t)<<4|n>>4,l=1<h?(15&n)<<2|i>>6:64,c=2<h?63&i:64,u.push(s.charAt(o)+s.charAt(a)+s.charAt(l)+s.charAt(c));return u.join("")},n.decode=function(e){var t,n,r,o,a,l,c=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var p,h=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&h--,e.charAt(e.length-2)===s.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=i.uint8array?new Uint8Array(0|h):new Array(0|h);c<e.length;)t=s.indexOf(e.charAt(c++))<<2|(o=s.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(a=s.indexOf(e.charAt(c++)))>>2,r=(3&a)<<6|(l=s.indexOf(e.charAt(c++))),p[u++]=t,64!==a&&(p[u++]=n),64!==l&&(p[u++]=r);return p}},{"./support":30,"./utils":32}],2:[function(e,t,n){var r=e("./external"),i=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function a(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),a=r?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",s.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,o,u){var d,p,h=e.file,f=e.compression,m=u!==a.utf8encode,v=s.transformTo("string",u(h.name)),g=s.transformTo("string",a.utf8encode(h.name)),y=h.comment,b=s.transformTo("string",u(y)),x=s.transformTo("string",a.utf8encode(y)),w=g.length!==h.name.length,S=x.length!==y.length,C="",E="",T="",N=h.dir,P=h.date,R={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(R.crc32=e.crc32,R.compressedSize=e.compressedSize,R.uncompressedSize=e.uncompressedSize);var I=0;t&&(I|=8),m||!w&&!S||(I|=2048);var k,j,_,A=0,O=0;N&&(A|=16),"UNIX"===o?(O=798,A|=(k=h.unixPermissions,j=N,_=k,k||(_=j?16893:33204),(65535&_)<<16)):(O=20,A|=function(e){return 63&(e||0)}(h.dosPermissions)),d=P.getUTCHours(),d<<=6,d|=P.getUTCMinutes(),d<<=5,d|=P.getUTCSeconds()/2,p=P.getUTCFullYear()-1980,p<<=4,p|=P.getUTCMonth()+1,p<<=5,p|=P.getUTCDate(),w&&(E=r(1,1)+r(l(v),4)+g,C+="up"+r(E.length,2)+E),S&&(T=r(1,1)+r(l(b),4)+x,C+="uc"+r(T.length,2)+T);var D="";return D+="\n\0",D+=r(I,2),D+=f.magic,D+=r(d,2),D+=r(p,2),D+=r(R.crc32,4),D+=r(R.compressedSize,4),D+=r(R.uncompressedSize,4),D+=r(v.length,2),D+=r(C.length,2),{fileRecord:c.LOCAL_FILE_HEADER+D+v+C,dirRecord:c.CENTRAL_FILE_HEADER+r(O,2)+D+r(b.length,2)+"\0\0\0\0"+r(A,4)+r(i,4)+v+C+b}}var s=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(u,o),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t,n=this.streamFiles&&!e.file.dir,s=i(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),n)this.push({data:(t=e,c.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n,i,o,a,l,u,d=this.bytesWritten-e,p=(n=this.dirRecords.length,i=d,o=e,a=this.zipComment,l=this.encodeFileName,u=s.transformTo("string",l(a)),c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(n,2)+r(n,2)+r(i,4)+r(o,4)+r(u.length,2)+u);this.push({data:p,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(r){}return!0},u.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var s=new i(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach(function(e,n){o++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),a=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(i,a).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(s)}),s.entriesCount=o}catch(a){s.error(a)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){var r=e("./utils"),i=e("./external"),s=e("./utf8"),o=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new i.Promise(function(t,n){var r=e.decompressed.getContentWorker().pipe(new a);r.on("error",function(e){n(e)}).on("end",function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var n=new o(t);return n.load(e),n}).then(function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var s=0;s<r.length;s++)n.push(c(r[s]));return i.Promise.all(n)}).then(function(e){for(var i=e.shift(),s=i.files,o=0;o<s.length;o++){var a=s[o],l=a.fileNameStr,c=r.resolve(a.fileNameStr);n.file(c,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(n.file(c).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){var r=e("../utils"),i=e("../stream/GenericWorker");function s(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(s,i),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",function(e,t){i.push(e)||i._helper.pause(),n&&n(t)}).on("error",function(e){i.emit("error",e)}).on("end",function(){i.push(null)})}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){function r(e,t,n){var r,i=s.getTypeOf(t),a=s.extend(n||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=m(e)),a.createFolders&&(r=f(e))&&v.call(this,r,!0);var d="string"===i&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!d),(t instanceof c&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var g=null;g=t instanceof c||t instanceof o?t:p.isNode&&p.isStream(t)?new h(e,t):s.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var y=new u(e,g,a);this.files[e]=y}var i=e("./utf8"),s=e("./utils"),o=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),p=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(r)}),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(g(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(g(e))return this.filter(function(t,n){return n.dir&&e.test(t)});var t=this.root+e,n=v.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");s.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(l){(t=new o("error")).error(l)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===n&&this.data[s+2]===r&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&n===s[1]&&r===s[2]&&i===s[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){var r=e("../utils"),i=e("../support"),s=e("./ArrayReader"),o=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new l(r.transformTo("uint8array",e)):new s(r.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){var r=e("./GenericWorker"),i=e("../utils");function s(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(s,r),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){var r=e("./GenericWorker"),i=e("../crc32");function s(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,r),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){var r=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(s,i),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){var r=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}r.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){var r=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),a=e("../support"),l=e("../external"),c=null;if(a.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(p){}function u(e,t){return new l.Promise(function(n,i){var s=[],a=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",function(e,n){s.push(e),t&&t(n)}).on("error",function(e){s=[],i(e)}).on("end",function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return r.transformTo(e,t)}}(l,function(e,t){var n,r=0,i=null,s=0;for(n=0;n<t.length;n++)s+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(s),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,s),c);n(e)}catch(t){i(t)}s=[]}).resume()})}function d(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(a){this._worker=new s("error"),this._worker.error(a)}}d.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,function(e){t.call(n,e.data,e.meta)}):this._worker.on(e,function(){r.delay(t,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(s){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(o){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(s){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){for(var r=e("./utils"),i=e("./support"),s=e("./nodejsUtils"),o=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function u(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(e){return i.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,n,r,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),s=o=0;o<l;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,s,o=e.length,l=new Array(2*o);for(t=n=0;t<o;)if((i=e[t++])<128)l[n++]=i;else if(4<(s=a[i]))l[n++]=65533,t+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&t<o;)i=i<<6|63&e[t++],s--;1<s?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(c,o),c.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=t;(t=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),t.set(s,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}(t),l=t;o!==t.length&&(i.uint8array?(l=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(l=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(u,o),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){var r=e("./support"),i=e("./base64"),s=e("./nodejsUtils"),o=e("./external");function a(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(s){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,s=e.length;if(s<=n)return String.fromCharCode.apply(null,e);for(;i<s;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,s)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,s)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(s){t=Math.floor(t/2)}return c.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=u;var p={};p.string={string:a,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,s.allocBuffer(e.length))}},p.array={string:u,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},p.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return s.newBufferFrom(e)}},p.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:a},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return p[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&s.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate(function(){e.apply(n||null,t||[])})},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,s,a,c){return o.Promise.resolve(t).then(function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)}):e}).then(function(t){var u,d=n.getTypeOf(t);return d?("arraybuffer"===d?t=n.transformTo("uint8array",t):"string"===d&&(c?t=i.decode(t):s&&!0!==a&&(t=l(u=t,r.uint8array?new Uint8Array(u.length):new Array(u.length)))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){var r=e("./reader/readerFor"),i=e("./utils"),s=e("./signature"),o=e("./zipEntry"),a=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){var r=e("./reader/readerFor"),i=e("./utils"),s=e("./compressedObject"),o=e("./crc32"),a=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var s=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!r&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&r&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(a){(t=new l("error")).error(a)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new s(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var s=0,o=new i(u),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==Be?Be:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){var r=e("immediate");function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(i){return s.reject(e,i)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)})}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function i(t){n||(n=!0,s.resolve(e,t))}var o=f(function(){t(i,r)});"error"===o.status&&r(o.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==l?d(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=f(p,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:s.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return s.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,l=-1,c=new this(i);++l<n;)u(e[l],l);return c;function u(e,i){t.resolve(e).then(function(e){o[i]=e,++a!==n||r||(r=!0,s.resolve(c,o))},function(e){r||(r=!0,s.reject(c,e))})}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o,a=-1,l=new this(i);++a<n;)o=e[a],t.resolve(o).then(function(e){r||(r=!0,s.resolve(l,e))},function(e){r||(r=!0,s.reject(l,e))});return l}},{immediate:36}],38:[function(e,t,n){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){var r=e("./zlib/deflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,p=8;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({level:u,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,f))!==c)throw new Error(o[n]);this._dict_set=!0}}function f(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}h.prototype.push=function(e,t){var n,o,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=s.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(u),a.next_out=0,a.avail_out=u),1!==(n=r.deflate(a,o))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==o||(this.onEnd(c),!(a.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=h,n.deflate=f,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){var r=e("./zlib/inflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(a[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function p(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}d.prototype.push=function(e,t){var n,a,l,c,d,p,h=this.strm,f=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?h.input=s.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(f),h.next_out=0,h.avail_out=f),(n=r.inflate(h,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(p="string"==typeof m?s.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,p)),n===o.Z_BUF_ERROR&&!0===v&&(n=o.Z_OK,v=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&n!==o.Z_STREAM_END&&(0!==h.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=s.utf8border(h.output,h.next_out),c=h.next_out-l,d=s.buf2string(h.output,l),h.next_out=c,h.avail_out=f-c,c&&i.arraySet(h.output,h.output,l,c,0),this.onData(d)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(v=!0)}while((0<h.avail_in||0===h.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(h.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=p,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},n.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){var t,n,r,i,s,o;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)s=e[t],o.set(s,i),i+=s.length;return o}},s={arraySet:function(e,t,n,r,i){for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(r)},{}],42:[function(e,t,n){var r=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(c){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(c){s=!1}for(var o=new r.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,n.string2buf=function(e){var t,n,i,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),s=o=0;o<l;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,s,a=t||e.length,c=new Array(2*a);for(n=r=0;n<a;)if((i=e[n++])<128)c[r++]=i;else if(4<(s=o[i]))c[r++]=65533,n+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&n<a;)i=i<<6|63&e[n++],s--;1<s?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){t.exports=function(e,t,n,r){for(var i=65535&e,s=e>>>16&65535,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;s=s+(i=i+t[r++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16}},{}],44:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var s=r,o=i+n;e^=-1;for(var a=i;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,n){var r,i=e("../utils/common"),s=e("./trees"),o=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=0,u=4,d=0,p=-2,h=-1,f=4,m=2,v=8,g=9,y=286,b=30,x=19,w=2*y+1,S=15,C=3,E=258,T=E+C+1,N=42,P=113,R=1,I=2,k=3,j=4;function _(e,t){return e.msg=l[t],t}function A(e){return(e<<1)-(4<e?9:0)}function O(e){for(var t=e.length;0<=--t;)e[t]=0}function D(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function M(e,t){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,D(e.strm)}function L(e,t){e.pending_buf[e.pending++]=t}function z(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function F(e,t){var n,r,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-T?e.strstart-(e.w_size-T):0,c=e.window,u=e.w_mask,d=e.prev,p=e.strstart+E,h=c[s+o-1],f=c[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+o]===f&&c[n+o-1]===h&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<p);if(r=E-(p-s),s=p-E,o<r){if(e.match_start=t,a<=(o=r))break;h=c[s+o-1],f=c[s+o]}}}while((t=d[t&u])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead}function B(e){var t,n,r,s,l,c,u,d,p,h,f=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-T)){for(i.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=n=e.hash_size;r=e.head[--t],e.head[t]=f<=r?r-f:0,--n;);for(t=n=f;r=e.prev[--t],e.prev[t]=f<=r?r-f:0,--n;);s+=f}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,d=e.strstart+e.lookahead,h=void 0,(p=s)<(h=c.avail_in)&&(h=p),n=0===h?0:(c.avail_in-=h,i.arraySet(u,c.input,c.next_in,h,d),1===c.state.wrap?c.adler=o(c.adler,u,h,d):2===c.state.wrap&&(c.adler=a(c.adler,u,h,d)),c.next_in+=h,c.total_in+=h,h),e.lookahead+=n,e.lookahead+e.insert>=C)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+C-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<C)););}while(e.lookahead<T&&0!==e.strm.avail_in)}function U(e,t){for(var n,r;;){if(e.lookahead<T){if(B(e),e.lookahead<T&&t===c)return R;if(0===e.lookahead)break}if(n=0,e.lookahead>=C&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-T&&(e.match_length=F(e,n)),e.match_length>=C)if(r=s._tr_tally(e,e.strstart-e.match_start,e.match_length-C),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=C){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(M(e,!1),0===e.strm.avail_out))return R}return e.insert=e.strstart<C-1?e.strstart:C-1,t===u?(M(e,!0),0===e.strm.avail_out?k:j):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?R:I}function W(e,t){for(var n,r,i;;){if(e.lookahead<T){if(B(e),e.lookahead<T&&t===c)return R;if(0===e.lookahead)break}if(n=0,e.lookahead>=C&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=C-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-T&&(e.match_length=F(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===C&&4096<e.strstart-e.match_start)&&(e.match_length=C-1)),e.prev_length>=C&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-C,r=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-C),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=C-1,e.strstart++,r&&(M(e,!1),0===e.strm.avail_out))return R}else if(e.match_available){if((r=s._tr_tally(e,0,e.window[e.strstart-1]))&&M(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return R}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<C-1?e.strstart:C-1,t===u?(M(e,!0),0===e.strm.avail_out?k:j):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?R:I}function $(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*w),this.dyn_dtree=new i.Buf16(2*(2*b+1)),this.bl_tree=new i.Buf16(2*(2*x+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(S+1),this.heap=new i.Buf16(2*y+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?N:P,e.adler=2===t.wrap?0:1,t.last_flush=c,s._tr_init(t),d):_(e,p)}function q(e){var t,n=V(e);return n===d&&((t=e.state).window_size=2*t.w_size,O(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=C-1,t.match_available=0,t.ins_h=0),n}function G(e,t,n,r,s,o){if(!e)return p;var a=1;if(t===h&&(t=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),s<1||g<s||n!==v||r<8||15<r||t<0||9<t||o<0||f<o)return _(e,p);8===r&&(r=9);var l=new H;return(e.state=l).strm=e,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+C-1)/C),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,q(e)}r=[new $(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(B(e),0===e.lookahead&&t===c)return R;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,M(e,!1),0===e.strm.avail_out))return R;if(e.strstart-e.block_start>=e.w_size-T&&(M(e,!1),0===e.strm.avail_out))return R}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?k:j):(e.strstart>e.block_start&&(M(e,!1),e.strm.avail_out),R)}),new $(4,4,8,4,U),new $(4,5,16,8,U),new $(4,6,32,32,U),new $(4,4,16,16,W),new $(8,16,32,32,W),new $(8,16,128,128,W),new $(8,32,128,256,W),new $(32,128,258,1024,W),new $(32,258,258,4096,W)],n.deflateInit=function(e,t){return G(e,t,v,15,8,0)},n.deflateInit2=G,n.deflateReset=q,n.deflateResetKeep=V,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?p:(e.state.gzhead=t,d):p},n.deflate=function(e,t){var n,i,o,l;if(!e||!e.state||5<t||t<0)return e?_(e,p):p;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==u)return _(e,0===e.avail_out?-5:p);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===N)if(2===i.wrap)e.adler=0,L(i,31),L(i,139),L(i,8),i.gzhead?(L(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),L(i,255&i.gzhead.time),L(i,i.gzhead.time>>8&255),L(i,i.gzhead.time>>16&255),L(i,i.gzhead.time>>24&255),L(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),L(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(L(i,255&i.gzhead.extra.length),L(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(L(i,0),L(i,0),L(i,0),L(i,0),L(i,0),L(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),L(i,3),i.status=P);else{var h=v+(i.w_bits-8<<4)<<8;h|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=P,z(i,h),0!==i.strstart&&(z(i,e.adler>>>16),z(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),D(e),o=i.pending,i.pending!==i.pending_buf_size));)L(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),D(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,L(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),D(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,L(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&D(e),i.pending+2<=i.pending_buf_size&&(L(i,255&e.adler),L(i,e.adler>>8&255),e.adler=0,i.status=P)):i.status=P),0!==i.pending){if(D(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&A(t)<=A(n)&&t!==u)return _(e,-5);if(666===i.status&&0!==e.avail_in)return _(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==c&&666!==i.status){var f=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(B(e),0===e.lookahead)){if(t===c)return R;break}if(e.match_length=0,n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(M(e,!1),0===e.strm.avail_out))return R}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?k:j):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?R:I}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=E){if(B(e),e.lookahead<=E&&t===c)return R;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=C&&0<e.strstart&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+E;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=E-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=C?(n=s._tr_tally(e,1,e.match_length-C),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(M(e,!1),0===e.strm.avail_out))return R}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?k:j):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?R:I}(i,t):r[i.level].func(i,t);if(f!==k&&f!==j||(i.status=666),f===R||f===k)return 0===e.avail_out&&(i.last_flush=-1),d;if(f===I&&(1===t?s._tr_align(i):5!==t&&(s._tr_stored_block(i,0,0,!1),3===t&&(O(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),D(e),0===e.avail_out))return i.last_flush=-1,d}return t!==u?d:i.wrap<=0?1:(2===i.wrap?(L(i,255&e.adler),L(i,e.adler>>8&255),L(i,e.adler>>16&255),L(i,e.adler>>24&255),L(i,255&e.total_in),L(i,e.total_in>>8&255),L(i,e.total_in>>16&255),L(i,e.total_in>>24&255)):(z(i,e.adler>>>16),z(i,65535&e.adler)),D(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==N&&69!==t&&73!==t&&91!==t&&103!==t&&t!==P&&666!==t?_(e,p):(e.state=null,t===P?_(e,-3):d):p},n.deflateSetDictionary=function(e,t){var n,r,s,a,l,c,u,h,f=t.length;if(!e||!e.state)return p;if(2===(a=(n=e.state).wrap)||1===a&&n.status!==N||n.lookahead)return p;for(1===a&&(e.adler=o(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===a&&(O(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,f-n.w_size,n.w_size,0),t=h,f=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,B(n);n.lookahead>=C;){for(r=n.strstart,s=n.lookahead-(C-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+C-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--s;);n.strstart=r,n.lookahead=C-1,B(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=C-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=a,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){t.exports=function(e,t){var n,r,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y,b,x,w,S,C,E,T,N;n=e.state,r=e.next_in,T=e.input,i=r+(e.avail_in-5),s=e.next_out,N=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,p=n.window,h=n.hold,f=n.bits,m=n.lencode,v=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{f<15&&(h+=T[r++]<<f,f+=8,h+=T[r++]<<f,f+=8),b=m[h&g];t:for(;;){if(h>>>=x=b>>>24,f-=x,0==(x=b>>>16&255))N[s++]=65535&b;else{if(!(16&x)){if(!(64&x)){b=m[(65535&b)+(h&(1<<x)-1)];continue t}if(32&x){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(x&=15)&&(f<x&&(h+=T[r++]<<f,f+=8),w+=h&(1<<x)-1,h>>>=x,f-=x),f<15&&(h+=T[r++]<<f,f+=8,h+=T[r++]<<f,f+=8),b=v[h&y];n:for(;;){if(h>>>=x=b>>>24,f-=x,!(16&(x=b>>>16&255))){if(!(64&x)){b=v[(65535&b)+(h&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(S=65535&b,f<(x&=15)&&(h+=T[r++]<<f,(f+=8)<x&&(h+=T[r++]<<f,f+=8)),l<(S+=h&(1<<x)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=x,f-=x,(x=s-o)<S){if(u<(x=S-x)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=p,(C=0)===d){if(C+=c-x,x<w){for(w-=x;N[s++]=p[C++],--x;);C=s-S,E=N}}else if(d<x){if(C+=c+d-x,(x-=d)<w){for(w-=x;N[s++]=p[C++],--x;);if(C=0,d<w){for(w-=x=d;N[s++]=p[C++],--x;);C=s-S,E=N}}}else if(C+=d-x,x<w){for(w-=x;N[s++]=p[C++],--x;);C=s-S,E=N}for(;2<w;)N[s++]=E[C++],N[s++]=E[C++],N[s++]=E[C++],w-=3;w&&(N[s++]=E[C++],1<w&&(N[s++]=E[C++]))}else{for(C=s-S;N[s++]=N[C++],N[s++]=N[C++],N[s++]=N[C++],2<(w-=3););w&&(N[s++]=N[C++],1<w&&(N[s++]=N[C++]))}break}}break}}while(r<i&&s<a);r-=w=f>>3,h&=(1<<(f-=w<<3))-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=s<a?a-s+257:257-(s-a),n.hold=h,n.bits=f}},{}],49:[function(e,t,n){var r=e("../utils/common"),i=e("./adler32"),s=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),l=1,c=2,u=0,d=-2,p=1,h=852,f=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=p,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(h),t.distcode=t.distdyn=new r.Buf32(f),t.sane=1,t.back=-1,u):d}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,g(e)):d}function b(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,y(e))):d}function x(e,t){var n,r;return e?(r=new v,(e.state=r).window=null,(n=b(e,t))!==u&&(e.state=null),n):d}var w,S,C=!0;function E(e){if(C){var t;for(w=new r.Buf32(512),S=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(l,e.lens,0,288,w,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(c,e.lens,0,32,S,0,e.work,{bits:5}),C=!1}e.lencode=w,e.lenbits=9,e.distcode=S,e.distbits=5}function T(e,t,n,i){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(s=o.wsize-o.wnext)&&(s=i),r.arraySet(o.window,t,n-i,s,o.wnext),(i-=s)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}n.inflateReset=y,n.inflateReset2=b,n.inflateResetKeep=g,n.inflateInit=function(e){return x(e,15)},n.inflateInit2=x,n.inflate=function(e,t){var n,h,f,v,g,y,b,x,w,S,C,N,P,R,I,k,j,_,A,O,D,M,L,z,F=0,B=new r.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),g=e.next_out,f=e.output,b=e.avail_out,v=e.next_in,h=e.input,y=e.avail_in,x=n.hold,w=n.bits,S=y,C=b,M=u;e:for(;;)switch(n.mode){case p:if(0===n.wrap){n.mode=13;break}for(;w<16;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(2&n.wrap&&35615===x){B[n.check=0]=255&x,B[1]=x>>>8&255,n.check=s(n.check,B,2,0),w=x=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&x)<<8)+(x>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&x)){e.msg="unknown compression method",n.mode=30;break}if(w-=4,D=8+(15&(x>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<D,e.adler=n.check=1,n.mode=512&x?10:12,w=x=0;break;case 2:for(;w<16;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(n.flags=x,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=x>>8&1),512&n.flags&&(B[0]=255&x,B[1]=x>>>8&255,n.check=s(n.check,B,2,0)),w=x=0,n.mode=3;case 3:for(;w<32;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}n.head&&(n.head.time=x),512&n.flags&&(B[0]=255&x,B[1]=x>>>8&255,B[2]=x>>>16&255,B[3]=x>>>24&255,n.check=s(n.check,B,4,0)),w=x=0,n.mode=4;case 4:for(;w<16;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}n.head&&(n.head.xflags=255&x,n.head.os=x>>8),512&n.flags&&(B[0]=255&x,B[1]=x>>>8&255,n.check=s(n.check,B,2,0)),w=x=0,n.mode=5;case 5:if(1024&n.flags){for(;w<16;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}n.length=x,n.head&&(n.head.extra_len=x),512&n.flags&&(B[0]=255&x,B[1]=x>>>8&255,n.check=s(n.check,B,2,0)),w=x=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(N=n.length)&&(N=y),N&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,h,v,N,D)),512&n.flags&&(n.check=s(n.check,h,N,v)),y-=N,v+=N,n.length-=N),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;for(N=0;D=h[v+N++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D)),D&&N<y;);if(512&n.flags&&(n.check=s(n.check,h,N,v)),y-=N,v+=N,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;for(N=0;D=h[v+N++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D)),D&&N<y;);if(512&n.flags&&(n.check=s(n.check,h,N,v)),y-=N,v+=N,D)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;w<16;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(x!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}w=x=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;w<32;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}e.adler=n.check=m(x),w=x=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=g,e.avail_out=b,e.next_in=v,e.avail_in=y,n.hold=x,n.bits=w,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){x>>>=7&w,w-=7&w,n.mode=27;break}for(;w<3;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}switch(n.last=1&x,w-=1,3&(x>>>=1)){case 0:n.mode=14;break;case 1:if(E(n),n.mode=20,6!==t)break;x>>>=2,w-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}x>>>=2,w-=2;break;case 14:for(x>>>=7&w,w-=7&w;w<32;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if((65535&x)!=(x>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&x,w=x=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(N=n.length){if(y<N&&(N=y),b<N&&(N=b),0===N)break e;r.arraySet(f,h,v,N,g),y-=N,v+=N,b-=N,g+=N,n.length-=N;break}n.mode=12;break;case 17:for(;w<14;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(n.nlen=257+(31&x),x>>>=5,w-=5,n.ndist=1+(31&x),x>>>=5,w-=5,n.ncode=4+(15&x),x>>>=4,w-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;w<3;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}n.lens[U[n.have++]]=7&x,x>>>=3,w-=3}for(;n.have<19;)n.lens[U[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,L={bits:n.lenbits},M=a(0,n.lens,0,19,n.lencode,0,n.work,L),n.lenbits=L.bits,M){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;k=(F=n.lencode[x&(1<<n.lenbits)-1])>>>16&255,j=65535&F,!((I=F>>>24)<=w);){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(j<16)x>>>=I,w-=I,n.lens[n.have++]=j;else{if(16===j){for(z=I+2;w<z;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(x>>>=I,w-=I,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}D=n.lens[n.have-1],N=3+(3&x),x>>>=2,w-=2}else if(17===j){for(z=I+3;w<z;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}w-=I,D=0,N=3+(7&(x>>>=I)),x>>>=3,w-=3}else{for(z=I+7;w<z;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}w-=I,D=0,N=11+(127&(x>>>=I)),x>>>=7,w-=7}if(n.have+N>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;N--;)n.lens[n.have++]=D}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,L={bits:n.lenbits},M=a(l,n.lens,0,n.nlen,n.lencode,0,n.work,L),n.lenbits=L.bits,M){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,L={bits:n.distbits},M=a(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,L),n.distbits=L.bits,M){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=y&&258<=b){e.next_out=g,e.avail_out=b,e.next_in=v,e.avail_in=y,n.hold=x,n.bits=w,o(e,C),g=e.next_out,f=e.output,b=e.avail_out,v=e.next_in,h=e.input,y=e.avail_in,x=n.hold,w=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;k=(F=n.lencode[x&(1<<n.lenbits)-1])>>>16&255,j=65535&F,!((I=F>>>24)<=w);){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(k&&!(240&k)){for(_=I,A=k,O=j;k=(F=n.lencode[O+((x&(1<<_+A)-1)>>_)])>>>16&255,j=65535&F,!(_+(I=F>>>24)<=w);){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}x>>>=_,w-=_,n.back+=_}if(x>>>=I,w-=I,n.back+=I,n.length=j,0===k){n.mode=26;break}if(32&k){n.back=-1,n.mode=12;break}if(64&k){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&k,n.mode=22;case 22:if(n.extra){for(z=n.extra;w<z;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}n.length+=x&(1<<n.extra)-1,x>>>=n.extra,w-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;k=(F=n.distcode[x&(1<<n.distbits)-1])>>>16&255,j=65535&F,!((I=F>>>24)<=w);){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(!(240&k)){for(_=I,A=k,O=j;k=(F=n.distcode[O+((x&(1<<_+A)-1)>>_)])>>>16&255,j=65535&F,!(_+(I=F>>>24)<=w);){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}x>>>=_,w-=_,n.back+=_}if(x>>>=I,w-=I,n.back+=I,64&k){e.msg="invalid distance code",n.mode=30;break}n.offset=j,n.extra=15&k,n.mode=24;case 24:if(n.extra){for(z=n.extra;w<z;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}n.offset+=x&(1<<n.extra)-1,x>>>=n.extra,w-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===b)break e;if(N=C-b,n.offset>N){if((N=n.offset-N)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}P=N>n.wnext?(N-=n.wnext,n.wsize-N):n.wnext-N,N>n.length&&(N=n.length),R=n.window}else R=f,P=g-n.offset,N=n.length;for(b<N&&(N=b),b-=N,n.length-=N;f[g++]=R[P++],--N;);0===n.length&&(n.mode=21);break;case 26:if(0===b)break e;f[g++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;w<32;){if(0===y)break e;y--,x|=h[v++]<<w,w+=8}if(C-=b,e.total_out+=C,n.total+=C,C&&(e.adler=n.check=n.flags?s(n.check,f,C,g-C):i(n.check,f,C,g-C)),C=b,(n.flags?x:m(x))!==n.check){e.msg="incorrect data check",n.mode=30;break}w=x=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;w<32;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(x!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}w=x=0}n.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;default:return d}return e.next_out=g,e.avail_out=b,e.next_in=v,e.avail_in=y,n.hold=x,n.bits=w,(n.wsize||C!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&T(e,e.output,e.next_out,C-e.avail_out)?(n.mode=31,-4):(S-=e.avail_in,C-=e.avail_out,e.total_in+=S,e.total_out+=C,n.total+=C,n.wrap&&C&&(e.adler=n.check=n.flags?s(n.check,f,C,e.next_out-C):i(n.check,f,C,e.next_out-C)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==S&&0===C||4===t)&&M===u&&(M=-5),M)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,u},n.inflateGetHeader=function(e,t){var n;return e&&e.state&&2&(n=e.state).wrap?((n.head=t).done=!1,u):d},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&i(1,t,r,0)!==n.check?-3:T(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,u):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,d,p){var h,f,m,v,g,y,b,x,w,S=p.bits,C=0,E=0,T=0,N=0,P=0,R=0,I=0,k=0,j=0,_=0,A=null,O=0,D=new r.Buf16(16),M=new r.Buf16(16),L=null,z=0;for(C=0;C<=15;C++)D[C]=0;for(E=0;E<l;E++)D[t[n+E]]++;for(P=S,N=15;1<=N&&0===D[N];N--);if(N<P&&(P=N),0===N)return c[u++]=20971520,c[u++]=20971520,p.bits=1,0;for(T=1;T<N&&0===D[T];T++);for(P<T&&(P=T),C=k=1;C<=15;C++)if(k<<=1,(k-=D[C])<0)return-1;if(0<k&&(0===e||1!==N))return-1;for(M[1]=0,C=1;C<15;C++)M[C+1]=M[C]+D[C];for(E=0;E<l;E++)0!==t[n+E]&&(d[M[t[n+E]]++]=E);if(y=0===e?(A=L=d,19):1===e?(A=i,O-=257,L=s,z-=257,256):(A=o,L=a,-1),C=T,g=u,I=E=_=0,m=-1,v=(j=1<<(R=P))-1,1===e&&852<j||2===e&&592<j)return 1;for(;;){for(b=C-I,w=d[E]<y?(x=0,d[E]):d[E]>y?(x=L[z+d[E]],A[O+d[E]]):(x=96,0),h=1<<C-I,T=f=1<<R;c[g+(_>>I)+(f-=h)]=b<<24|x<<16|w,0!==f;);for(h=1<<C-1;_&h;)h>>=1;if(0!==h?(_&=h-1,_+=h):_=0,E++,0==--D[C]){if(C===N)break;C=t[n+d[E]]}if(P<C&&(_&v)!==m){for(0===I&&(I=P),g+=T,k=1<<(R=C-I);R+I<N&&!((k-=D[R+I])<=0);)R++,k<<=1;if(j+=1<<R,1===e&&852<j||2===e&&592<j)return 1;c[m=_&v]=P<<24|R<<16|g-u}}return 0!==_&&(c[g+_]=C-I<<24|64<<16),p.bits=P,0}},{"../utils/common":41}],51:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){var r=e("../utils/common"),i=0,s=1;function o(e){for(var t=e.length;0<=--t;)e[t]=0}var a=0,l=29,c=256,u=c+1+l,d=30,p=19,h=2*u+1,f=15,m=16,v=7,g=256,y=16,b=17,x=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(u+2));o(T);var N=new Array(2*d);o(N);var P=new Array(512);o(P);var R=new Array(256);o(R);var I=new Array(l);o(I);var k,j,_,A=new Array(d);function O(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function D(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function M(e){return e<256?P[e]:P[256+(e>>>7)]}function L(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function z(e,t,n){e.bi_valid>m-n?(e.bi_buf|=t<<e.bi_valid&65535,L(e,e.bi_buf),e.bi_buf=t>>m-e.bi_valid,e.bi_valid+=n-m):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function F(e,t,n){z(e,n[2*t],n[2*t+1])}function B(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function U(e,t,n){var r,i,s=new Array(f+1),o=0;for(r=1;r<=f;r++)s[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=B(s[a]++,a))}}function W(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<p;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*g]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function $(e){8<e.bi_valid?L(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,n,r){var i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]}function V(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&H(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!H(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function q(e,t,n){var r,i,s,o,a=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===r?F(e,i,t):(F(e,(s=R[i])+c+1,t),0!==(o=w[s])&&z(e,i-=I[s],o),F(e,s=M(--r),n),0!==(o=S[s])&&z(e,r-=A[s],o)),a<e.last_lit;);F(e,g,t)}function G(e,t){var n,r,i,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=h,n=0;n<l;n++)0!==s[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=o[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)V(e,s,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],V(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,s[2*i]=s[2*n]+s[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,s[2*n+1]=s[2*r+1]=i,e.heap[1]=i++,V(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,s,o,a,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,v=t.stat_desc.max_length,g=0;for(s=0;s<=f;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<h;n++)v<(s=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(s=v,g++),l[2*r+1]=s,c<r||(e.bl_count[s]++,o=0,m<=r&&(o=p[r-m]),a=l[2*r],e.opt_len+=a*(s+o),d&&(e.static_len+=a*(u[2*r+1]+o)));if(0!==g){do{for(s=v-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[v]--,g-=2}while(0<g);for(s=v;0!==s;s--)for(r=e.bl_count[s];0!==r;)c<(i=e.heap[--n])||(l[2*i+1]!==s&&(e.opt_len+=(s-l[2*i+1])*l[2*i],l[2*i+1]=s),r--)}}(e,t),U(s,c,e.bl_count)}function K(e,t,n){var r,i,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++a<l&&i===o||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*y]++):a<=10?e.bl_tree[2*b]++:e.bl_tree[2*x]++,s=i,c=(a=0)===o?(l=138,3):i===o?(l=6,3):(l=7,4))}function J(e,t,n){var r,i,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++a<l&&i===o)){if(a<c)for(;F(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==s&&(F(e,i,e.bl_tree),a--),F(e,y,e.bl_tree),z(e,a-3,2)):a<=10?(F(e,b,e.bl_tree),z(e,a-3,3)):(F(e,x,e.bl_tree),z(e,a-11,7));s=i,c=(a=0)===o?(l=138,3):i===o?(l=6,3):(l=7,4)}}o(A);var Y=!1;function Z(e,t,n,i){var s,o,l;z(e,(a<<1)+(i?1:0),3),o=t,l=n,$(s=e),L(s,l),L(s,~l),r.arraySet(s.pending_buf,s.window,o,l,s.pending),s.pending+=l}n._tr_init=function(e){Y||(function(){var e,t,n,r,i,s=new Array(f+1);for(r=n=0;r<l-1;r++)for(I[r]=n,e=0;e<1<<w[r];e++)R[n++]=r;for(R[n-1]=r,r=i=0;r<16;r++)for(A[r]=i,e=0;e<1<<S[r];e++)P[i++]=r;for(i>>=7;r<d;r++)for(A[r]=i<<7,e=0;e<1<<S[r]-7;e++)P[256+i++]=r;for(t=0;t<=f;t++)s[t]=0;for(e=0;e<=143;)T[2*e+1]=8,e++,s[8]++;for(;e<=255;)T[2*e+1]=9,e++,s[9]++;for(;e<=279;)T[2*e+1]=7,e++,s[7]++;for(;e<=287;)T[2*e+1]=8,e++,s[8]++;for(U(T,u+1,s),e=0;e<d;e++)N[2*e+1]=5,N[2*e]=B(e,5);k=new O(T,w,c+1,u,f),j=new O(N,S,0,d,f),_=new O(new Array(0),C,0,p,v)}(),Y=!0),e.l_desc=new D(e.dyn_ltree,k),e.d_desc=new D(e.dyn_dtree,j),e.bl_desc=new D(e.bl_tree,_),e.bi_buf=0,e.bi_valid=0,W(e)},n._tr_stored_block=Z,n._tr_flush_block=function(e,t,n,r){var o,a,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return s;return i}(e)),G(e,e.l_desc),G(e,e.d_desc),l=function(e){var t;for(K(e,e.dyn_ltree,e.l_desc.max_code),K(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=p-1;3<=t&&0===e.bl_tree[2*E[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=o&&(o=a)):o=a=n+5,n+4<=o&&-1!==t?Z(e,t,n,r):4===e.strategy||a===o?(z(e,2+(r?1:0),3),q(e,T,N)):(z(e,4+(r?1:0),3),function(e,t,n,r){var i;for(z(e,t-257,5),z(e,n-1,5),z(e,r-4,4),i=0;i<r;i++)z(e,e.bl_tree[2*E[i]+1],3);J(e,e.dyn_ltree,t-1),J(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),q(e,e.dyn_ltree,e.dyn_dtree)),W(e),r&&$(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(R[n]+c+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){var t;z(e,2,3),F(e,g,T),16===(t=e).bi_valid?(L(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e,t){if(!e.setImmediate){var n,r,i,s,o=1,a={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick(function(){p(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",h,!1):e.attachEvent("onmessage",h),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(p,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return a[o]=i,n(o),o++},u.clearImmediate=d}function d(e){delete a[e]}function p(e){if(l)setTimeout(p,0,e);else{var n=a[e];if(n){l=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{d(e),l=!1}}}}function h(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==Be?Be:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10);const jV=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("div",{className:"relative w-full overflow-auto",children:Lt.jsx("table",f({ref:t,className:Ng("w-full caption-bottom text-sm",r)},i))})});jV.displayName="Table";const _V=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("thead",f({ref:t,className:Ng("[&_tr]:border-b",r)},i))});_V.displayName="TableHeader";const AV=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("tbody",f({ref:t,className:Ng("[&_tr:last-child]:border-0",r)},i))});AV.displayName="TableBody",Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("tfoot",f({ref:t,className:Ng("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r)},i))}).displayName="TableFooter";const OV=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("tr",f({ref:t,className:Ng("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r)},i))});OV.displayName="TableRow";const DV=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("th",f({ref:t,className:Ng("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r)},i))});DV.displayName="TableHead";const MV=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("td",f({ref:t,className:Ng("p-4 align-middle [&:has([role=checkbox])]:pr-0",r)},i))});MV.displayName="TableCell",Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx("caption",f({ref:t,className:Ng("mt-4 text-sm text-muted-foreground",r)},i))}).displayName="TableCaption";const LV=!window.location.hostname.includes("localhost"),zV=window.location.hostname.includes("localhost"),FV=window.location.hostname.includes("azurewebsites.net")||window.location.hostname.includes("azurestaticapps.net")||window.location.hostname.includes("azure.com"),BV=""!=="/api".trim()?"/api":LV?"":"/api";console.log(" API:",{isAzureEnvironment:FV,isProduction:LV,isDevelopment:zV,currentHostname:window.location.hostname,currentProtocol:window.location.protocol,finalApiBaseUrl:BV,envVars:{VITE_API_BASE_URL:"/api",NODE_ENV:void 0,MODE:"production"}});const UV=e=>{const t=e.startsWith("/api")?e:`/api${e.startsWith("/")?e:"/"+e}`,n=`${BV}${t}`;return console.log(` API URL: ${e} -> ${n}`),n};console.log(" :",{VITE_API_BASE_URL:"/api",VITE_API_BASE_URL_TYPE:"string",VITE_API_BASE_URL_LENGTH:4,isProduction:LV,isDevelopment:zV,NODE_ENV:void 0,MODE:"production",BASE_URL:"/",finalApiBaseUrl:BV,location:window.location.href,origin:window.location.origin,hostname:window.location.hostname}),console.log(" API:",{isProduction:LV,isDevelopment:zV,API_BASE_URL:BV,sampleAuthUrl:UV("/api/login"),location:window.location.href,origin:window.location.origin,hostname:window.location.hostname,protocol:window.location.protocol,actualAuthUrl:UV("/api/login"),actualMeUrl:UV("/api/auth/me"),envVars:{VITE_API_BASE_URL:"/api",NODE_ENV:void 0,MODE:"production"}});const WV="/chatgpt",$V="/healthz",HV=()=>{const[t,n]=Pt.useState(null),[r,i]=Pt.useState(!1),[s,o]=Pt.useState([]),[a,l]=Pt.useState(!1),{toast:c}=nv(),u=Pt.useRef(null),[d,p]=Pt.useState({keepOriginalFile:!1,extractKnowledgeBase:!0,extractImageSearch:!0,createQA:!0});Pt.useEffect(()=>{h()},[]);const h=()=>T(e,null,function*(){l(!0);try{const e=yield fetch(UV("/api/knowledge"));if(!e.ok)throw new Error("");const t=yield e.json();let n=[];t.success&&t.data?n=t.data:Array.isArray(t)?n=t:(console.warn("Unexpected API response structure:",t),n=[]);const r=n.map((e,t)=>({id:e.id||`doc-${t}`,title:e.title||e.name||"",type:e.type||e.category||"",addedAt:e.addedAt||e.createdAt||(new Date).toISOString()}));o(r)}catch(e){console.error("Fetch documents error:",e),c({title:"",description:"",variant:"destructive"})}finally{l(!1)}}),v=e=>{try{const t=new Date(e);return new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)}catch(gie){return e||""}};return Lt.jsxs("div",{className:"space-y-6",children:[Lt.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-blue-100",children:[Lt.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:""}),Lt.jsx("div",{className:"mb-4",children:Lt.jsx("p",{className:"text-base font-semibold text-gray-700",children:"PPTX, PDF, DOCXPDFAI"})}),Lt.jsxs("div",{className:"border-2 border-dashed border-blue-300 rounded-lg p-8 mb-4 text-center cursor-pointer bg-blue-50 hover:bg-blue-100 transition-colors "+(t?"border-blue-600 bg-blue-100":""),onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&e.dataTransfer.files.length>0){const t=e.dataTransfer.files[0];n(t)}},onClick:()=>{u.current&&u.current.click()},children:[Lt.jsx("input",{ref:u,type:"file",className:"hidden",accept:".pdf,.docx,.doc,.txt,.xlsx,.xls,.pptx,.ppt",onChange:e=>{e.target.files&&e.target.files.length>0&&(n(e.target.files[0]),e.target.value="")}}),Lt.jsxs("div",{className:"flex flex-col items-center justify-center",children:[Lt.jsx(ry,{className:"w-12 h-12 text-blue-700 mb-2"}),t?Lt.jsxs("div",{children:[Lt.jsx("p",{className:"text-lg font-medium text-blue-700",children:t.name}),Lt.jsxs("p",{className:"text-sm text-blue-600",children:["(",(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(t.size),")"]})]}):Lt.jsxs("div",{children:[Lt.jsx("p",{className:"text-lg font-medium text-blue-700",children:"&"}),Lt.jsxs("p",{className:"text-sm text-gray-500",children:["",Lt.jsx("span",{className:"text-blue-600 font-medium",children:""})]})]})]})]}),Lt.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Lt.jsx(RV,{id:"keepOriginalFile",checked:d.keepOriginalFile,onCheckedChange:()=>{return e="keepOriginalFile",void p(t=>m(f({},t),{[e]:!t[e]}));var e}}),Lt.jsx(PL,{htmlFor:"keepOriginalFile",className:"cursor-pointer",children:""})]}),Lt.jsx("div",{className:"flex justify-center mb-6",children:Lt.jsx(Rg,{onClick:()=>T(e,null,function*(){if(!t)return void c({title:"",description:"",variant:"destructive"});const e=t.name.substring(t.name.lastIndexOf(".")).toLowerCase();if([".pdf",".docx",".txt",".xlsx",".pptx",".ppt",".doc"].includes(e)){i(!0);try{const e=new FormData;e.append("file",t),e.append("keepOriginalFile",d.keepOriginalFile.toString()),e.append("extractKnowledgeBase",d.extractKnowledgeBase.toString()),e.append("extractImageSearch",d.extractImageSearch.toString()),e.append("createQA",d.createQA.toString());const r=yield fetch("/api/api/data-processor/process",{method:"POST",body:e});if(!r.ok){const e=yield r.text();throw new Error(e||"")}const i=yield r.json();c({title:"",description:`${t.name} ${i.message||""}`}),window.dispatchEvent(new CustomEvent("image-search-data-updated")),h(),n(null)}catch(r){console.error("Processing error:",r),c({title:"",description:r instanceof Error?r.message:"",variant:"destructive"})}finally{i(!1)}}else c({title:"",description:"PDF, Word, Excel, PowerPoint, ",variant:"destructive"})}),disabled:!t||r,className:"w-full max-w-md bg-blue-600 hover:bg-blue-700 text-white py-2 rounded",children:r?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(hy,{className:"mr-2 h-5 w-5 animate-spin"}),"..."]}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Xg,{className:"mr-2 h-5 w-5"}),""]})})}),Lt.jsx(kV,{})]}),Lt.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-blue-100",children:[Lt.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Lt.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:""}),Lt.jsx(Rg,{onClick:h,variant:"outline",className:"text-blue-600 border-blue-600",disabled:a,children:a?Lt.jsx(hy,{className:"h-4 w-4 animate-spin"}):Lt.jsx(Cy,{className:"h-4 w-4"})})]}),a?Lt.jsxs("div",{className:"flex items-center justify-center py-8",children:[Lt.jsx(hy,{className:"h-8 w-8 animate-spin text-blue-600"}),Lt.jsx("span",{className:"ml-2 text-blue-600",children:"..."})]}):s.length>0?Lt.jsx("div",{className:"overflow-x-auto",children:Lt.jsxs(jV,{children:[Lt.jsx(_V,{children:Lt.jsxs(OV,{children:[Lt.jsx(DV,{children:""}),Lt.jsx(DV,{children:""}),Lt.jsx(DV,{children:""}),Lt.jsx(DV,{className:"text-right",children:""})]})}),Lt.jsx(AV,{children:s.map(t=>Lt.jsxs(OV,{children:[Lt.jsx(MV,{className:"font-medium",children:t.title||""}),Lt.jsx(MV,{children:t.type||""}),Lt.jsx(MV,{children:v(t.addedAt)}),Lt.jsx(MV,{className:"text-right",children:Lt.jsx(Rg,{variant:"ghost",size:"sm",onClick:()=>{return n=t.id,r=t.title,T(e,null,function*(){try{const e=yield fetch(`/api/api/knowledge/${n}`,{method:"DELETE"});if(!e.ok){const t=yield e.text();throw new Error(t||"")}c({title:"",description:`${r} `}),h(),window.dispatchEvent(new CustomEvent("image-search-data-updated"))}catch(e){console.error("Delete error:",e),c({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}});var n,r},className:"text-red-600 hover:text-red-800 hover:bg-red-100",children:Lt.jsx(My,{className:"h-4 w-4"})})})]},t.id))})]})}):Lt.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Lt.jsx(Xg,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),Lt.jsx("p",{children:""})]})]})]})},VV={embedDim:1536,chunkSize:800,chunkOverlap:80,retrieveK:8,rerankTop:3,rerankMin:.25};function qV(){const[e,t]=Pt.useState(VV),[n,r]=Pt.useState("");Pt.useEffect(()=>{(()=>{T(this,null,function*(){const e=yield fetch("/api/config/rag",{credentials:"include"});e.ok&&t(yield e.json())})})()},[]);const i=n=>r=>t(m(f({},e),{[n]:Number(r.target.value)}));return Lt.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm",children:[Lt.jsx("div",{className:"font-semibold text-lg mb-3 text-gray-800",children:"RAG"}),Lt.jsx("p",{className:"text-sm text-gray-600 mb-4 font-semibold",children:"RAGRetrieval-Augmented GenerationAI"}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" (500800)",Lt.jsx("input",{type:"number",min:"500",max:"800",value:e.chunkSize,onChange:i("chunkSize"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Lt.jsx("p",{className:"text-xs text-gray-500",children:"1"})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" (50100)",Lt.jsx("input",{type:"number",min:"50",max:"100",value:e.chunkOverlap,onChange:i("chunkOverlap"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Lt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["k (116)",Lt.jsx("input",{type:"number",min:"1",max:"16",value:e.retrieveK,onChange:i("retrieveK"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Lt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" (15)",Lt.jsx("input",{type:"number",min:"1",max:"5",value:e.rerankTop,onChange:i("rerankTop"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Lt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" (01)",Lt.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:e.rerankMin,onChange:i("rerankMin"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Lt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["",Lt.jsx("input",{type:"number",value:e.embedDim,onChange:i("embedDim"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Lt.jsx("p",{className:"text-xs text-gray-500",children:""})]})]}),Lt.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:function(){return T(this,null,function*(){const t=(n=e).chunkSize<500||n.chunkSize>800?"500800":n.chunkOverlap<50||n.chunkOverlap>100?"50100":n.chunkOverlap>=n.chunkSize?"":n.retrieveK<1||n.retrieveK>16?"k116":n.rerankTop<1||n.rerankTop>5?"15":n.rerankTop>n.retrieveK?"k":n.rerankMin<0||n.rerankMin>1?"01":null;var n;if(t)return r(": "+t);const i=yield fetch("/api/config/rag",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});r(i.ok?"":"")})},children:""}),Lt.jsx("div",{className:"text-sm mt-3 p-2 bg-gray-50 rounded border min-h-[2rem] text-center",children:n||""})]})}const GV=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:t,isLoading:n}=Km(),{toast:r}=nv();Wf();const[i,s]=Pt.useState("processor"),[o,a]=Pt.useState([]),[l,c]=Pt.useState([]),[u,d]=Pt.useState([]),[p,h]=Pt.useState(!0);return console.log("  - "),Pt.useEffect(()=>{(()=>{T(this,null,function*(){try{h(!0),console.log(" ");const[t,n,r]=yield Promise.all([T(e,null,function*(){return yield Lm("/base-data")}),oV({limit:10}),T(e,null,function*(){return yield Lm("/files/processed")})]);console.log(" :",t),console.log(" :",n),console.log(" :",r),t.success&&t.data?(console.log(" :",t.data.length+""),a(t.data)):Array.isArray(t)?(console.log(" :",t.length+""),a(t)):(console.log(" :",t),a([])),n.items?(console.log(" :",n.items.length+""),c(n.items)):(console.log(" "),c([])),r.success&&r.data?(console.log(" :",r.data.length+""),d(r.data)):(console.log(" "),d([]))}catch(t){console.error(" :",t),r({title:"",description:t instanceof Error?t.message:"",variant:"destructive"}),a([]),c([])}finally{h(!1)}})})()},[r]),Lt.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8 bg-gray-50",children:Lt.jsxs("div",{className:"max-w-7xl mx-auto",children:[Lt.jsx("div",{className:"flex items-center justify-between mb-6",children:Lt.jsxs("div",{className:"flex items-center gap-3",children:[Lt.jsx("div",{className:"bg-blue-600 p-3 rounded-full",children:Lt.jsx(Lg,{className:"h-8 w-8 text-white"})}),Lt.jsxs("div",{children:[Lt.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:""}),Lt.jsx("p",{className:"text-gray-500",children:"GPT"})]})]})}),Lt.jsxs("div",{className:"flex space-x-1 mb-6 bg-white rounded-lg p-1 shadow-sm",children:[Lt.jsxs("button",{onClick:()=>s("processor"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("processor"===i?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"),children:[Lt.jsx(Lg,{className:"h-4 w-4 inline mr-2"}),""]}),Lt.jsxs("button",{onClick:()=>s("knowledge"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("knowledge"===i?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"),children:[Lt.jsx(Gy,{className:"h-4 w-4 inline mr-2"}),"AI"]})]}),"processor"===i&&Lt.jsx(HV,{}),"knowledge"===i&&Lt.jsx("div",{className:"space-y-6",children:Lt.jsx(qV,{})})]})})}},Symbol.toStringTag,{value:"Module"}));let KV=null;const JV=(KV||(KV=new qh({defaultOptions:{queries:{queryFn:(({on401:t})=>t=>T(e,[t],function*({queryKey:e}){if(e[0].includes("/api/chats")&&e[0].includes("/messages")){const e=localStorage.getItem("chat_cleared_timestamp");if(e){const t=parseInt(e);if(Date.now()-t<1e4)return console.log(""),[]}}let t=e[0];const n=Date.now();t=t.includes("?")?`${t}&_t=${n}`:`${t}?_t=${n}`,console.log(" :",{url:t,timestamp:n});const r=yield fetch(t,{credentials:"include",cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});return console.log(" :",{url:t,status:r.status,statusText:r.statusText,contentType:r.headers.get("content-type")}),"true"===r.headers.get("X-Chat-Cleared")?(console.log(": "),[]):(yield function(e){return T(this,null,function*(){if(!e.ok){let t=e.statusText;try{const n=e.clone();t=(yield n.text())||e.statusText}catch(gie){console.warn("Error reading response body:",gie)}throw new Error(`${e.status}: ${t}`)}})}(r),yield r.json())}))({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:6e4,retry:!1,refetchOnMount:!0},mutations:{retry:!1}}})),KV),YV="/api",ZV=!0,QV=!1;function XV(e){return T(this,arguments,function*(e,t={}){var n,r,i,s,o,a,l;try{console.log(" :",{id:e.id,title:e.title,stepsCount:(null==(n=e.steps)?void 0:n.length)||0});const c=function(e,t={}){var n,r;const{validateImages:i=!0,logDetails:s=!0}=t;s&&console.log(" :",{id:e.id,title:e.title,stepsCount:(null==(n=e.steps)?void 0:n.length)||0,stepsWithImages:(null==(r=e.steps)?void 0:r.filter(e=>e.images&&e.images.length>0).length)||0});const o=e.steps.map(e=>{var t;s&&console.log(" :",{stepId:e.id,stepTitle:e.title,originalImages:e.images,hasImages:!!e.images,imagesLength:(null==(t=e.images)?void 0:t.length)||0});let n=[];e.images&&Array.isArray(e.images)&&(n=e.images.map(e=>(s&&console.log(" :",{originalImg:e,url:e.url,fileName:e.fileName,urlValid:e.url&&""!==e.url.trim(),fileNameValid:e.fileName&&""!==e.fileName.trim()}),e.url&&""!==e.url.trim()?{url:e.url,fileName:e.fileName&&""!==e.fileName.trim()?e.fileName:e.url.split("/").pop()||""}:null)).filter(e=>null!==e)),s&&(n.length>0?console.log(" :",{stepId:e.id,stepTitle:e.title,imagesCount:n.length,images:n}):console.log(" :",{stepId:e.id,stepTitle:e.title,originalImages:e.images,processedImages:n}));const r=e,{imageUrl:i,imageFileName:o}=r,a=v(r,["imageUrl","imageFileName"]);return m(f({},a),{images:n})}),a=m(f({},e),{steps:o,updatedAt:(new Date).toISOString()});return s&&console.log(" :",{id:a.id,title:a.title,stepsCount:a.steps.length,stepsWithImages:a.steps.filter(e=>e.images&&e.images.length>0).length,allStepsImages:a.steps.map(e=>{var t,n;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(n=e.images)?void 0:n.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}})}),a}(e,t),u=c.id?Dm(`/emergency-flow/${c.id}`):Dm("/emergency-flow"),d=c.id?"PUT":"POST";console.log(" :",{url:u,method:d,flowId:c.id,stepsCount:c.steps.length,stepsWithImages:c.steps.filter(e=>e.images&&e.images.length>0).length,allStepsImages:c.steps.map(e=>{var t,n;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(n=e.images)?void 0:n.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}})});const p=yield fetch(u,{method:d,headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!p.ok){const e=yield p.json().catch(()=>({}));throw new Error(e.error||` (${p.status}: ${p.statusText})`)}const h=yield p.json();return console.log(" :",{id:(null==(r=h.data)?void 0:r.id)||c.id,title:(null==(i=h.data)?void 0:i.title)||c.title,stepsCount:(null==(o=null==(s=h.data)?void 0:s.steps)?void 0:o.length)||c.steps.length,stepsWithImages:(null==(l=null==(a=h.data)?void 0:a.steps)?void 0:l.filter(e=>e.images&&e.images.length>0).length)||0}),{success:!0,data:h.data||c}}catch(c){return console.error(" :",c),{success:!1,error:c instanceof Error?c.message:""}}})}function eq(e,t){return(eq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tq(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,eq(e,t)}function nq(){return nq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nq.apply(null,arguments)}function rq(e){return(rq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iq(e){var t=function(e,t){if("object"!=rq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=rq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rq(t)?t:t+""}function sq(e,t,n){return(t=iq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oq(Object(n),!0).forEach(function(t){sq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lq(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}console.log(" :",{VITE_API_BASE_URL:YV,VITE_API_BASE_URL_TYPE:"string",VITE_API_BASE_URL_LENGTH:4,isProduction:ZV,isDevelopment:QV,NODE_ENV:void 0,MODE:"production",BASE_URL:"/",finalApiBaseUrl:YV}),console.log(" API:",{isProduction:ZV,isDevelopment:QV,API_BASE_URL:YV,sampleAuthUrl:`${YV}/api/login`,location:window.location.href,origin:window.location.origin,hostname:window.location.hostname,protocol:window.location.protocol,actualAuthUrl:`${YV}/api/login`,actualMeUrl:`${YV}/api/auth/me`,envVars:{VITE_API_BASE_URL:YV,NODE_ENV:void 0,MODE:"production"}}),window.location.hostname.includes("localhost")?console.log(" : "):""===YV.trim()||console.log(" API_BASE_URL:",YV);var cq="function"==typeof Symbol&&Symbol.observable||"@@observable",uq=function(){return Math.random().toString(36).substring(7).split("").join(".")},dq={INIT:"@@redux/INIT"+uq(),REPLACE:"@@redux/REPLACE"+uq()};function pq(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(lq(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(lq(1));return n(pq)(e,t)}if("function"!=typeof e)throw new Error(lq(2));var i=e,s=t,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(lq(3));return s}function d(e){if("function"!=typeof e)throw new Error(lq(4));if(l)throw new Error(lq(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(lq(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),o=null}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(lq(7));if(void 0===e.type)throw new Error(lq(8));if(l)throw new Error(lq(9));try{l=!0,s=i(s,e)}finally{l=!1}for(var t=o=a,n=0;n<t.length;n++)(0,t[n])();return e}return p({type:dq.INIT}),(r={dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(lq(10));i=e,p({type:dq.REPLACE})}})[cq]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(lq(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[cq]=function(){return this},e},r}function hq(e,t){return function(){return t(e.apply(this,arguments))}}function fq(e,t){if("function"==typeof e)return hq(e,t);if("object"!=typeof e||null===e)throw new Error(lq(16));var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=hq(i,t))}return n}function mq(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var vq={exports:{}};function gq(){}function yq(){}yq.resetWarningCache=gq,vq.exports=function(){function e(e,t,n,r,i,s){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:yq,resetWarningCache:gq};return n.PropTypes=n,n}();const bq=Ue(vq.exports);var xq=Rt.createContext(null),wq=function(e){e()};function Sq(){var e=wq,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Cq={notify:function(){},get:function(){return[]}};function Eq(e,t){var n,r=Cq;function i(){o.onStateChange&&o.onStateChange()}function s(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=Sq())}var o={addNestedSub:function(e){return s(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=Cq)},getListeners:function(){return r}};return o}var Tq="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Pt.useLayoutEffect:Pt.useEffect;function Nq(e){var t=e.store,n=e.context,r=e.children,i=Pt.useMemo(function(){var e=Eq(t);return{store:t,subscription:e}},[t]),s=Pt.useMemo(function(){return t.getState()},[t]);Tq(function(){var e=i.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[i,s]);var o=n||xq;return Rt.createElement(o.Provider,{value:i},r)}function Pq(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}var Rq={exports:{}},Iq={},kq="function"==typeof Symbol&&Symbol.for,jq=kq?Symbol.for("react.element"):60103,_q=kq?Symbol.for("react.portal"):60106,Aq=kq?Symbol.for("react.fragment"):60107,Oq=kq?Symbol.for("react.strict_mode"):60108,Dq=kq?Symbol.for("react.profiler"):60114,Mq=kq?Symbol.for("react.provider"):60109,Lq=kq?Symbol.for("react.context"):60110,zq=kq?Symbol.for("react.async_mode"):60111,Fq=kq?Symbol.for("react.concurrent_mode"):60111,Bq=kq?Symbol.for("react.forward_ref"):60112,Uq=kq?Symbol.for("react.suspense"):60113,Wq=kq?Symbol.for("react.suspense_list"):60120,$q=kq?Symbol.for("react.memo"):60115,Hq=kq?Symbol.for("react.lazy"):60116,Vq=kq?Symbol.for("react.block"):60121,qq=kq?Symbol.for("react.fundamental"):60117,Gq=kq?Symbol.for("react.responder"):60118,Kq=kq?Symbol.for("react.scope"):60119;function Jq(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case jq:switch(e=e.type){case zq:case Fq:case Aq:case Dq:case Oq:case Uq:return e;default:switch(e=e&&e.$$typeof){case Lq:case Bq:case Hq:case $q:case Mq:return e;default:return t}}case _q:return t}}}function Yq(e){return Jq(e)===Fq}Iq.AsyncMode=zq,Iq.ConcurrentMode=Fq,Iq.ContextConsumer=Lq,Iq.ContextProvider=Mq,Iq.Element=jq,Iq.ForwardRef=Bq,Iq.Fragment=Aq,Iq.Lazy=Hq,Iq.Memo=$q,Iq.Portal=_q,Iq.Profiler=Dq,Iq.StrictMode=Oq,Iq.Suspense=Uq,Iq.isAsyncMode=function(e){return Yq(e)||Jq(e)===zq},Iq.isConcurrentMode=Yq,Iq.isContextConsumer=function(e){return Jq(e)===Lq},Iq.isContextProvider=function(e){return Jq(e)===Mq},Iq.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===jq},Iq.isForwardRef=function(e){return Jq(e)===Bq},Iq.isFragment=function(e){return Jq(e)===Aq},Iq.isLazy=function(e){return Jq(e)===Hq},Iq.isMemo=function(e){return Jq(e)===$q},Iq.isPortal=function(e){return Jq(e)===_q},Iq.isProfiler=function(e){return Jq(e)===Dq},Iq.isStrictMode=function(e){return Jq(e)===Oq},Iq.isSuspense=function(e){return Jq(e)===Uq},Iq.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Aq||e===Fq||e===Dq||e===Oq||e===Uq||e===Wq||"object"==typeof e&&null!==e&&(e.$$typeof===Hq||e.$$typeof===$q||e.$$typeof===Mq||e.$$typeof===Lq||e.$$typeof===Bq||e.$$typeof===qq||e.$$typeof===Gq||e.$$typeof===Kq||e.$$typeof===Vq)},Iq.typeOf=Jq,Rq.exports=Iq;var Zq=Rq.exports,Qq={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Xq={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},eG={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},tG={};function nG(e){return Zq.isMemo(e)?eG:tG[e.$$typeof]||Qq}tG[Zq.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tG[Zq.Memo]=eG;var rG=Object.defineProperty,iG=Object.getOwnPropertyNames,sG=Object.getOwnPropertySymbols,oG=Object.getOwnPropertyDescriptor,aG=Object.getPrototypeOf,lG=Object.prototype,cG=function e(t,n,r){if("string"!=typeof n){if(lG){var i=aG(n);i&&i!==lG&&e(t,i,r)}var s=iG(n);sG&&(s=s.concat(sG(n)));for(var o=nG(t),a=nG(n),l=0;l<s.length;++l){var c=s[l];if(!(Xq[c]||r&&r[c]||a&&a[c]||o&&o[c])){var u=oG(n,c);try{rG(t,c,u)}catch(gie){}}}}return t};const uG=Ue(cG);var dG={exports:{}},pG={},hG=60103,fG=60106,mG=60107,vG=60108,gG=60114,yG=60109,bG=60110,xG=60112,wG=60113,SG=60120,CG=60115,EG=60116,TG=60121,NG=60122,PG=60117,RG=60129,IG=60131;if("function"==typeof Symbol&&Symbol.for){var kG=Symbol.for;hG=kG("react.element"),fG=kG("react.portal"),mG=kG("react.fragment"),vG=kG("react.strict_mode"),gG=kG("react.profiler"),yG=kG("react.provider"),bG=kG("react.context"),xG=kG("react.forward_ref"),wG=kG("react.suspense"),SG=kG("react.suspense_list"),CG=kG("react.memo"),EG=kG("react.lazy"),TG=kG("react.block"),NG=kG("react.server.block"),PG=kG("react.fundamental"),RG=kG("react.debug_trace_mode"),IG=kG("react.legacy_hidden")}function jG(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case hG:switch(e=e.type){case mG:case gG:case vG:case wG:case SG:return e;default:switch(e=e&&e.$$typeof){case bG:case xG:case EG:case CG:case yG:return e;default:return t}}case fG:return t}}}var _G=yG,AG=hG,OG=xG,DG=mG,MG=EG,LG=CG,zG=fG,FG=gG,BG=vG,UG=wG;pG.ContextConsumer=bG,pG.ContextProvider=_G,pG.Element=AG,pG.ForwardRef=OG,pG.Fragment=DG,pG.Lazy=MG,pG.Memo=LG,pG.Portal=zG,pG.Profiler=FG,pG.StrictMode=BG,pG.Suspense=UG,pG.isAsyncMode=function(){return!1},pG.isConcurrentMode=function(){return!1},pG.isContextConsumer=function(e){return jG(e)===bG},pG.isContextProvider=function(e){return jG(e)===yG},pG.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===hG},pG.isForwardRef=function(e){return jG(e)===xG},pG.isFragment=function(e){return jG(e)===mG},pG.isLazy=function(e){return jG(e)===EG},pG.isMemo=function(e){return jG(e)===CG},pG.isPortal=function(e){return jG(e)===fG},pG.isProfiler=function(e){return jG(e)===gG},pG.isStrictMode=function(e){return jG(e)===vG},pG.isSuspense=function(e){return jG(e)===wG},pG.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===mG||e===gG||e===RG||e===vG||e===wG||e===SG||e===IG||"object"==typeof e&&null!==e&&(e.$$typeof===EG||e.$$typeof===CG||e.$$typeof===yG||e.$$typeof===bG||e.$$typeof===xG||e.$$typeof===PG||e.$$typeof===TG||e[0]===NG)},pG.typeOf=jG,dG.exports=pG;var WG=dG.exports,$G=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],HG=["reactReduxForwardedRef"],VG=[],qG=[null,null];function GG(e,t){var n=e[1];return[t.payload,n+1]}function KG(e,t,n){Tq(function(){return e.apply(void 0,t)},n)}function JG(e,t,n,r,i,s,o){e.current=r,t.current=i,n.current=!1,s.current&&(s.current=null,o())}function YG(e,t,n,r,i,s,o,a,l,c){if(e){var u=!1,d=null,p=function(){if(!u){var e,n,p=t.getState();try{e=r(p,i.current)}catch(gie){n=gie,d=gie}n||(d=null),e===s.current?o.current||l():(s.current=e,a.current=e,o.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=p,n.trySubscribe(),p(),function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var ZG=function(){return[null,0]};function QG(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,i=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,s=n.methodName,o=void 0===s?"connectAdvanced":s,a=n.renderCountProp,l=void 0===a?void 0:a,c=n.shouldHandleStateChanges,u=void 0===c||c,d=n.storeKey,p=void 0===d?"store":d;n.withRef;var h=n.forwardRef,f=void 0!==h&&h,m=n.context,v=void 0===m?xq:m,g=Pq(n,$G),y=v;return function(t){var n=t.displayName||t.name||"Component",r=i(n),s=nq({},g,{getDisplayName:i,methodName:o,renderCountProp:l,shouldHandleStateChanges:u,storeKey:p,displayName:r,wrappedComponentName:n,WrappedComponent:t}),a=g.pure,c=a?Pt.useMemo:function(e){return e()};function d(n){var r=Pt.useMemo(function(){var e=n.reactReduxForwardedRef,t=Pq(n,HG);return[n.context,e,t]},[n]),i=r[0],o=r[1],a=r[2],l=Pt.useMemo(function(){return i&&i.Consumer&&WG.isContextConsumer(Rt.createElement(i.Consumer,null))?i:y},[i,y]),d=Pt.useContext(l),p=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(d)&&Boolean(d.store);var h=p?n.store:d.store,f=Pt.useMemo(function(){return function(t){return e(t.dispatch,s)}(h)},[h]),m=Pt.useMemo(function(){if(!u)return qG;var e=Eq(h,p?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[h,p,d]),v=m[0],g=m[1],b=Pt.useMemo(function(){return p?d:nq({},d,{subscription:v})},[p,d,v]),x=Pt.useReducer(GG,VG,ZG),w=x[0][0],S=x[1];if(w&&w.error)throw w.error;var C=Pt.useRef(),E=Pt.useRef(a),T=Pt.useRef(),N=Pt.useRef(!1),P=c(function(){return T.current&&a===E.current?T.current:f(h.getState(),a)},[h,w,a]);KG(JG,[E,C,N,a,P,T,g]),KG(YG,[u,h,v,f,E,C,N,T,g,S],[h,v,f]);var R=Pt.useMemo(function(){return Rt.createElement(t,nq({},P,{ref:o}))},[o,t,P]);return Pt.useMemo(function(){return u?Rt.createElement(l.Provider,{value:b},R):R},[l,R,b])}var h=a?Rt.memo(d):d;if(h.WrappedComponent=t,h.displayName=d.displayName=r,f){var m=Rt.forwardRef(function(e,t){return Rt.createElement(h,nq({},e,{reactReduxForwardedRef:t}))});return m.displayName=r,m.WrappedComponent=t,uG(m,t)}return uG(h,t)}}function XG(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function eK(e,t){if(XG(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!XG(e[n[i]],t[n[i]]))return!1;return!0}function tK(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function nK(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function rK(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=nK(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=nK(i),i=r(t,n)),i},r}}const iK=[function(e){return"function"==typeof e?rK(e):void 0},function(e){return e?void 0:tK(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?tK(function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"==typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)}):void 0}],sK=[function(e){return"function"==typeof e?rK(e):void 0},function(e){return e?void 0:tK(function(){return{}})}];function oK(e,t,n){return nq({},n,e,t)}const aK=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,s=n.areMergedPropsEqual,o=!1;return function(t,n,a){var l=e(t,n,a);return o?i&&s(l,r)||(r=l):(o=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return oK}}];var lK=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function cK(e,t,n,r){return function(i,s){return n(e(i,s),t(r,s),s)}}function uK(e,t,n,r,i){var s,o,a,l,c,u=i.areStatesEqual,d=i.areOwnPropsEqual,p=i.areStatePropsEqual,h=!1;function f(i,h){var f,m,v=!d(h,o),g=!u(i,s,h,o);return s=i,o=h,v&&g?(a=e(s,o),t.dependsOnOwnProps&&(l=t(r,o)),c=n(a,l,o)):v?(e.dependsOnOwnProps&&(a=e(s,o)),t.dependsOnOwnProps&&(l=t(r,o)),c=n(a,l,o)):g?(f=e(s,o),m=!p(f,a),a=f,m&&(c=n(a,l,o)),c):c}return function(i,u){return h?f(i,u):(a=e(s=i,o=u),l=t(r,o),c=n(a,l,o),h=!0,c)}}function dK(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,s=Pq(t,lK),o=n(e,s),a=r(e,s),l=i(e,s);return(s.pure?uK:cK)(o,a,l,e,s)}var pK=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function hK(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function fK(e,t){return e===t}function mK(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?QG:n,i=t.mapStateToPropsFactories,s=void 0===i?sK:i,o=t.mapDispatchToPropsFactories,a=void 0===o?iK:o,l=t.mergePropsFactories,c=void 0===l?aK:l,u=t.selectorFactory,d=void 0===u?dK:u;return function(e,t,n,i){void 0===i&&(i={});var o=i,l=o.pure,u=void 0===l||l,p=o.areStatesEqual,h=void 0===p?fK:p,f=o.areOwnPropsEqual,m=void 0===f?eK:f,v=o.areStatePropsEqual,g=void 0===v?eK:v,y=o.areMergedPropsEqual,b=void 0===y?eK:y,x=Pq(o,pK),w=hK(e,s,"mapStateToProps"),S=hK(t,a,"mapDispatchToProps"),C=hK(n,c,"mergeProps");return r(d,nq({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:S,initMergeProps:C,pure:u,areStatesEqual:h,areOwnPropsEqual:m,areStatePropsEqual:g,areMergedPropsEqual:b},x))}}const vK=mK();var gK;function yK(e,t){var n=Pt.useState(function(){return{inputs:t,result:e()}})[0],r=Pt.useRef(!0),i=Pt.useRef(n),s=r.current||Boolean(t&&i.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,i.current.inputs))?i.current:{inputs:t,result:e()};return Pt.useEffect(function(){r.current=!1,i.current=s},[s]),s.result}gK=$p.unstable_batchedUpdates,wq=gK;var bK=yK,xK=function(e,t){return yK(function(){return e},t)},wK=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{top:t,right:n,bottom:r,left:i,width:n-i,height:r-t,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},SK=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},CK=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},EK={top:0,right:0,bottom:0,left:0},TK=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?EK:n,i=e.border,s=void 0===i?EK:i,o=e.padding,a=void 0===o?EK:o,l=wK(SK(t,r)),c=wK(CK(t,s)),u=wK(CK(c,a));return{marginBox:l,borderBox:wK(t),paddingBox:c,contentBox:u,margin:r,border:s,padding:a}},NK=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(){throw new Error("Invariant failed")}(),n},PK=function(e,t){var n,r,i=e.borderBox,s=e.border,o=e.margin,a=e.padding,l=(r=t,{top:(n=i).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return TK({borderBox:l,border:s,margin:o,padding:a})},RK=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),PK(e,t)},IK=function(e,t){var n={top:NK(t.marginTop),right:NK(t.marginRight),bottom:NK(t.marginBottom),left:NK(t.marginLeft)},r={top:NK(t.paddingTop),right:NK(t.paddingRight),bottom:NK(t.paddingBottom),left:NK(t.paddingLeft)},i={top:NK(t.borderTopWidth),right:NK(t.borderRightWidth),bottom:NK(t.borderBottomWidth),left:NK(t.borderLeftWidth)};return TK({borderBox:e,margin:n,padding:r,border:i})},kK=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return IK(t,n)},jK=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function _K(e,t){return e===t||!(!jK(e)||!jK(t))}function AK(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!_K(e[n],t[n]))return!1;return!0}function OK(e,t){var n;void 0===t&&(t=AK);var r,i=[],s=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return s&&n===this&&t(o,i)||(r=e.apply(this,o),s=!0,n=this,i=o),r}}var DK=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];t=i,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function MK(e,t){}function LK(){}function zK(e,t,n){var r=t.map(function(t){var r,i,s=(r=n,i=t.options,nq({},r,{},i));return e.addEventListener(t.eventName,t.fn,s),function(){e.removeEventListener(t.eventName,t.fn,s)}});return function(){r.forEach(function(e){e()})}}function FK(e){this.message=e}function BK(e,t){throw new FK("Invariant failed")}MK.bind(null,"warn"),MK.bind(null,"error"),FK.prototype.toString=function(){return this.message};var UK=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=LK,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof FK&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}tq(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=zK(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof FK))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(Rt.Component),WK=function(e){return e+1},$K=function(e,t){var n=e.droppableId===t.droppableId,r=WK(e.index),i=WK(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},HK=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},VK=function(e){return"\n  The item has returned to its starting position\n  of "+WK(e.index)+"\n"},qK="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",GK=function(e){return"\n  You have lifted an item in position "+WK(e.source.index)+"\n"},KK=function(e){var t=e.destination;if(t)return $K(e.source,t);var n=e.combine;return n?HK(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},JK=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+VK(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+$K(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+HK(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+VK(e.source)+"\n  "},YK={x:0,y:0},ZK=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},QK=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},XK=function(e,t){return e.x===t.x&&e.y===t.y},eJ=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},tJ=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},nJ=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},rJ=function(e,t){return Math.min.apply(Math,t.map(function(t){return nJ(e,t)}))},iJ=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},sJ=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},oJ=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},aJ=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=wK({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):wK(e)},lJ=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,s=function(e,t){return t?sJ(e,t.scroll.diff.displacement):e}(t.marginBox,i),o=function(e,t,n){var r;return n&&n.increasedBy?nq({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(s,r,n);return{page:t,withPlaceholder:n,active:aJ(o,i)}},cJ=function(e,t){e.frame||BK();var n=e.frame,r=QK(t,n.scroll.initial),i=eJ(r),s=nq({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}});return nq({},e,{frame:s,subject:lJ({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s})})};function uJ(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function dJ(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function pJ(e,t){if(e.find)return e.find(t);var n=dJ(e,t);return-1!==n?e[n]:void 0}function hJ(e){return Array.prototype.slice.call(e)}var fJ=OK(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),mJ=OK(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),vJ=OK(function(e){return uJ(e)}),gJ=OK(function(e){return uJ(e)}),yJ=OK(function(e,t){var n=gJ(t).filter(function(t){return e===t.descriptor.droppableId}).sort(function(e,t){return e.descriptor.index-t.descriptor.index});return n});function bJ(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function xJ(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var wJ=OK(function(e,t){return t.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),SJ=function(e,t){return e.descriptor.droppableId===t.descriptor.id},CJ={point:YK,value:0},EJ={invisible:{},visible:{},all:[]},TJ={displaced:EJ,displacedBy:CJ,at:null},NJ=function(e,t){return function(n){return e<=n&&n<=t}},PJ=function(e){var t=NJ(e.top,e.bottom),n=NJ(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var i=t(r.top)||t(r.bottom),s=n(r.left)||n(r.right);if(i&&s)return!0;var o=r.top<e.top&&r.bottom>e.bottom,a=r.left<e.left&&r.right>e.right;return!(!o||!a)||o&&s||a&&i}},RJ=function(e){var t=NJ(e.top,e.bottom),n=NJ(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},IJ={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},kJ={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},jJ=function(e){var t=e.target,n=e.destination,r=e.viewport,i=e.withDroppableDisplacement,s=e.isVisibleThroughFrameFn,o=i?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:YK;return sJ(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(o,n,s)&&function(e,t,n){return n(t)(e)}(o,r,s)},_J=function(e){return jJ(nq({},e,{isVisibleThroughFrameFn:RJ}))};function AJ(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,s=e.forceShouldAnimate,o=e.last;return t.reduce(function(e,t){var a=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return wK(SK(n,r))}(t,r),l=t.descriptor.id;if(e.all.push(l),!jJ(nq({},{target:a,destination:n,viewport:i,withDroppableDisplacement:!0},{isVisibleThroughFrameFn:PJ})))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,n){if("boolean"==typeof n)return n;if(!t)return!0;var r=t.invisible,i=t.visible;if(r[e])return!1;var s=i[e];return!s||s.shouldAnimate}(l,o,s),u={draggableId:l,shouldAnimate:c};return e.visible[l]=u,e},{all:[],visible:{},invisible:{}})}function OJ(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,s=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:EJ,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:s}}}}function DJ(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,s=e.displacedBy,o=e.last,a=e.index,l=e.forceShouldAnimate,c=SJ(t,r);if(null==a)return OJ({insideDestination:n,inHomeList:c,displacedBy:s,destination:r});var u=pJ(n,function(e){return e.descriptor.index===a});if(!u)return OJ({insideDestination:n,inHomeList:c,displacedBy:s,destination:r});var d=wJ(t,n),p=n.indexOf(u);return{displaced:AJ({afterDragging:d.slice(p),destination:r,displacedBy:s,last:o,viewport:i.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:a}}}}function MJ(e,t){return Boolean(t.effected[e])}var LJ=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,s=e.destination,o=e.insideDestination,a=e.previousImpact,l=e.viewport,c=e.afterCritical,u=a.at;if(u||BK(),"REORDER"===u.type){var d=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var s=i.index,o=t?s+1:s-1,a=r[0].descriptor.index,l=r[r.length-1].descriptor.index;return o<a||o>(n?l:l+1)?null:o}({isMovingForward:t,isInHomeList:n,location:u.destination,insideDestination:o});return null==d?null:DJ({draggable:r,insideDestination:o,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})}var p=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,s=e.afterCritical;if(!n.isCombineEnabled)return null;var o=i.draggableId,a=r[o].descriptor.index;return MJ(o,s)?t?a:a-1:t?a+1:a}({isMovingForward:t,destination:s,displaced:a.displaced,draggables:i,combine:u.combine,afterCritical:c});return null==p?null:DJ({draggable:r,insideDestination:o,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:p})},zJ=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=xJ(n);i||BK();var s=i.draggableId,o=r[s].page.borderBox.center,a=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,s=Boolean(t.visible[r]||t.invisible[r]);return MJ(r,n)?s?YK:eJ(i.point):s?i.point:YK}({displaced:n.displaced,afterCritical:t,combineWith:s,displacedBy:n.displacedBy});return ZK(o,a)},FJ=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},BJ=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},UJ=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return tJ(t.line,n.marginBox[t.end]+FJ(t,r),BJ(t,n.marginBox,r))},WJ=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return tJ(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),BJ(t,n.marginBox,r))},$J=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,s=e.afterCritical,o=yJ(i.descriptor.id,r),a=n.page,l=i.axis;if(!o.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return tJ(t.line,n.contentBox[t.start]+FJ(t,r),BJ(t,n.contentBox,r))}({axis:l,moveInto:i.page,isMoving:a});var c=t.displaced,u=t.displacedBy,d=c.all[0];if(d){var p=r[d];if(MJ(d,s))return WJ({axis:l,moveRelativeTo:p.page,isMoving:a});var h=PK(p.page,u.point);return WJ({axis:l,moveRelativeTo:h,isMoving:a})}var f=o[o.length-1];if(f.descriptor.id===n.descriptor.id)return a.borderBox.center;if(MJ(f.descriptor.id,s)){var m=PK(f.page,eJ(s.displacedBy.point));return UJ({axis:l,moveRelativeTo:m,isMoving:a})}return UJ({axis:l,moveRelativeTo:f.page,isMoving:a})},HJ=function(e,t){var n=e.frame;return n?ZK(t,n.scroll.diff.displacement):t},VJ=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,s=e.afterCritical,o=n.page.borderBox.center,a=t.at;return r&&a?"REORDER"===a.type?$J({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:s}):zJ({impact:t,draggables:i,afterCritical:s}):o}(e),n=e.droppable;return n?HJ(n,t):t},qJ=function(e,t){var n=QK(t,e.scroll.initial),r=eJ(n);return{frame:wK({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function GJ(e,t){return e.map(function(e){return t[e]})}var KJ=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return ZK(e.scroll.diff.displacement,t)}(e.viewport,t),i=QK(r,n.page.borderBox.center);return ZK(n.client.borderBox.center,i)},JJ=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,s=e.withDroppableDisplacement,o=e.onlyOnMainAxis,a=void 0!==o&&o,l=QK(r,t.page.borderBox.center),c={target:sJ(t.page.borderBox,l),destination:n,withDroppableDisplacement:s,viewport:i};return a?function(e){return jJ(nq({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=NJ(e.top,e.bottom),r=NJ(e.left,e.right);return function(e){return t===IJ?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):_J(c)},YJ=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,s=e.previousImpact,o=e.viewport,a=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var u=yJ(r.descriptor.id,i),d=SJ(n,r),p=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,s=e.previousImpact;if(!r.isCombineEnabled)return null;if(!bJ(s))return null;function o(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return nq({},s,{at:t})}var a=s.displaced.all,l=a.length?a[0]:null;if(t)return l?o(l):null;var c=wJ(n,i);if(!l)return c.length?o(c[c.length-1].descriptor.id):null;var u=dJ(c,function(e){return e.descriptor.id===l});-1===u&&BK();var d=u-1;return d<0?null:o(c[d].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:u,previousImpact:s})||LJ({isMovingForward:t,isInHomeList:d,draggable:n,draggables:i,destination:r,insideDestination:u,previousImpact:s,viewport:o,afterCritical:c});if(!p)return null;var h=VJ({impact:p,draggable:n,droppable:r,draggables:i,afterCritical:c});if(JJ({draggable:n,destination:r,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:KJ({pageBorderBoxCenter:h,draggable:n,viewport:o}),impact:p,scrollJumpRequest:null};var f=QK(h,a),m=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,s=e.maxScrollChange,o=qJ(n,ZK(n.scroll.current,s)),a=r.frame?cJ(r,ZK(r.frame.scroll.current,s)):r,l=t.displaced,c=AJ({afterDragging:GJ(l.all,i),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),u=AJ({afterDragging:GJ(l.all,i),destination:a,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),d={},p={},h=[l,c,u];return l.all.forEach(function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,h);t?p[e]=t:d[e]=!0}),nq({},t,{displaced:{all:l.all,invisible:d,visible:p}})}({impact:p,viewport:o,destination:r,draggables:i,maxScrollChange:f});return{clientSelection:l,impact:m,scrollJumpRequest:f}},ZJ=function(e){var t=e.subject.active;return t||BK(),t},QJ=function(e,t){var n=e.page.borderBox.center;return MJ(e.descriptor.id,t)?QK(n,t.displacedBy.point):n},XJ=function(e,t){var n=e.page.borderBox;return MJ(e.descriptor.id,t)?sJ(n,eJ(t.displacedBy.point)):n},eY=OK(function(e,t){var n=t[e.line];return{value:n,point:tJ(e.line,n)}}),tY=function(e,t){return nq({},e,{scroll:nq({},e.scroll,{max:t})})},nY=function(e,t,n){var r=e.frame;SJ(t,e)&&BK(),e.subject.withPlaceholder&&BK();var i=eY(e.axis,t.displaceBy).point,s=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return tJ(r.line,t[r.line]);var i=e.subject.page.contentBox[r.size],s=yJ(e.descriptor.id,n).reduce(function(e,t){return e+t.client.marginBox[r.size]},0)+t[r.line]-i;return s<=0?null:tJ(r.line,s)}(e,i,n),o={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return nq({},e,{subject:lJ({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame})});var a=s?ZK(r.scroll.max,s):r.scroll.max,l=tY(r,a);return nq({},e,{subject:lJ({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:l}),frame:l})},rY=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,s=e.draggables,o=e.droppables,a=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,s=e.viewport,o=r.subject.active;if(!o)return null;var a=r.axis,l=NJ(o[a.start],o[a.end]),c=vJ(i).filter(function(e){return e!==r}).filter(function(e){return e.isEnabled}).filter(function(e){return Boolean(e.subject.active)}).filter(function(e){return PJ(s.frame)(ZJ(e))}).filter(function(e){var n=ZJ(e);return t?o[a.crossAxisEnd]<n[a.crossAxisEnd]:n[a.crossAxisStart]<o[a.crossAxisStart]}).filter(function(e){var t=ZJ(e),n=NJ(t[a.start],t[a.end]);return l(t[a.start])||l(t[a.end])||n(o[a.start])||n(o[a.end])}).sort(function(e,n){var r=ZJ(e)[a.crossAxisStart],i=ZJ(n)[a.crossAxisStart];return t?r-i:i-r}).filter(function(e,t,n){return ZJ(e)[a.crossAxisStart]===ZJ(n[0])[a.crossAxisStart]});if(!c.length)return null;if(1===c.length)return c[0];var u=c.filter(function(e){return NJ(ZJ(e)[a.start],ZJ(e)[a.end])(n[a.line])});return 1===u.length?u[0]:u.length>1?u.sort(function(e,t){return ZJ(e)[a.start]-ZJ(t)[a.start]})[0]:c.sort(function(e,t){var r=rJ(n,oJ(ZJ(e))),i=rJ(n,oJ(ZJ(t)));return r!==i?r-i:ZJ(e)[a.start]-ZJ(t)[a.start]})[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:o,viewport:a});if(!c)return null;var u=yJ(c.descriptor.id,s),d=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,s=e.afterCritical,o=i.filter(function(e){return _J({target:XJ(e,s),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(e,n){var i=nJ(t,HJ(r,QJ(e,s))),o=nJ(t,HJ(r,QJ(n,s)));return i<o?-1:o<i?1:e.descriptor.index-n.descriptor.index});return o[0]||null}({pageBorderBoxCenter:n,viewport:a,destination:c,insideDestination:u,afterCritical:l}),p=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,s=e.draggables,o=e.destination,a=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:EJ,displacedBy:CJ,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},u=VJ({impact:c,draggable:i,droppable:o,draggables:s,afterCritical:l}),d=SJ(i,o)?o:nY(o,i,s);return JJ({draggable:i,destination:d,newPageBorderBoxCenter:u,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var p,h=Boolean(t[o.axis.line]<=n.page.borderBox.center[o.axis.line]),f=(p=n.descriptor.index,n.descriptor.id===i.descriptor.id||h?p:p+1),m=eY(o.axis,i.displaceBy);return DJ({draggable:i,insideDestination:r,destination:o,viewport:a,displacedBy:m,last:EJ,index:f})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:s,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:l});if(!p)return null;var h=VJ({impact:p,draggable:r,droppable:c,draggables:s,afterCritical:l});return{clientSelection:KJ({pageBorderBoxCenter:h,draggable:r,viewport:a}),impact:p,scrollJumpRequest:null}},iY=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},sY=function(e){var t=e.state,n=e.type,r=function(e,t){var n=iY(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),i=Boolean(r),s=t.dimensions.droppables[t.critical.droppable.id],o=r||s,a=o.axis.direction,l="vertical"===a&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===a&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!i)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,p=t.dimensions,h=p.draggables,f=p.droppables;return l?YJ({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:o,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):rY({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:o,draggables:h,droppables:f,viewport:t.viewport,afterCritical:t.afterCritical})};function oY(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function aY(e){var t=NJ(e.top,e.bottom),n=NJ(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function lY(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=vJ(r).filter(function(e){if(!e.isEnabled)return!1;var n,r,i=e.subject.active;if(!i)return!1;if(r=i,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(aY(i)(t.center))return!0;var s=e.axis,o=i.center[s.crossAxisLine],a=t[s.crossAxisStart],l=t[s.crossAxisEnd],c=NJ(i[s.crossAxisStart],i[s.crossAxisEnd]),u=c(a),d=c(l);return!u&&!d||(u?a<o:l>o)});return i.length?1===i.length?i[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,s=r.map(function(e){var n=e.axis,r=tJ(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:nJ(i,r)}}).sort(function(e,t){return t.distance-e.distance});return s[0]?s[0].id:null}({pageBorderBox:t,draggable:n,candidates:i}):null}var cY=function(e,t){return wK(sJ(e,t))};function uY(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var dY=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,s=e.previousImpact,o=e.viewport,a=e.afterCritical,l=cY(n.page.borderBox,t),c=lY({pageBorderBox:l,draggable:n,droppables:i});if(!c)return TJ;var u,d,p=i[c],h=yJ(p.descriptor.id,r),f=(u=l,(d=p.frame)?cY(u,d.scroll.diff.value):u);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,s=e.insideDestination,o=e.afterCritical;if(!i.isCombineEnabled)return null;var a=i.axis,l=eY(i.axis,t.displaceBy),c=l.value,u=n[a.start],d=n[a.end],p=pJ(wJ(t,s),function(e){var t=e.descriptor.id,n=e.page.borderBox,i=n[a.size]/4,s=MJ(t,o),l=uY({displaced:r.displaced,id:t});return s?l?d>n[a.start]+i&&d<n[a.end]-i:u>n[a.start]-c+i&&u<n[a.end]-c-i:l?d>n[a.start]+c+i&&d<n[a.end]+c-i:u>n[a.start]+i&&u<n[a.end]-i});return p?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:f,draggable:n,previousImpact:s,destination:p,insideDestination:h,afterCritical:a})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,s=e.last,o=e.viewport,a=e.afterCritical,l=r.axis,c=eY(r.axis,n.displaceBy),u=c.value,d=t[l.start],p=t[l.end],h=function(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:pJ(wJ(n,i),function(e){var t=e.descriptor.id,n=e.page.borderBox.center[l.line],r=MJ(t,a),i=uY({displaced:s,id:t});return r?i?p<=n:d<n-u:i?p<=n+u:d<n}),inHomeList:SJ(n,r)});return DJ({draggable:n,insideDestination:i,destination:r,viewport:o,last:s,displacedBy:c,index:h})}({pageBorderBoxWithDroppableScroll:f,draggable:n,destination:p,insideDestination:h,last:s.displaced,viewport:o,afterCritical:a})},pY=function(e,t){var n;return nq({},e,((n={})[t.descriptor.id]=t,n))},hY=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,i=iY(t),s=iY(n);if(!i)return r;if(i===s)return r;var o=r[i];if(!o.subject.withPlaceholder)return r;var a=function(e){var t=e.subject.withPlaceholder;t||BK();var n=e.frame;if(!n)return nq({},e,{subject:lJ({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||BK();var i=tY(n,r);return nq({},e,{subject:lJ({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null}),frame:i})}(o);return pY(r,a)},fY=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,s=e.impact,o=e.scrollJumpRequest,a=i||t.viewport,l=r||t.dimensions,c=n||t.current.client.selection,u=QK(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:ZK(t.initial.client.borderBoxCenter,u)},p={selection:ZK(d.selection,a.scroll.current),borderBoxCenter:ZK(d.borderBoxCenter,a.scroll.current),offset:ZK(d.offset,a.scroll.diff.value)},h={client:d,page:p};if("COLLECTING"===t.phase)return nq({phase:"COLLECTING"},t,{dimensions:l,viewport:a,current:h});var f=l.draggables[t.critical.draggable.id],m=s||dY({pageOffset:p.offset,draggable:f,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:a,afterCritical:t.afterCritical}),v=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,s=e.impact,o=hY({previousImpact:i,impact:s,droppables:r}),a=iY(s);if(!a)return o;var l=r[a];if(SJ(t,l))return o;if(l.subject.withPlaceholder)return o;var c=nY(l,t,n);return pY(o,c)}({draggable:f,impact:m,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return nq({},t,{current:h,dimensions:{draggables:l.draggables,droppables:v},impact:m,viewport:a,scrollJumpRequest:o||null,forceShouldAnimate:!o&&null})},mY=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,s=e.forceShouldAnimate,o=t.displaced,a=function(e,t){return e.map(function(e){return t[e]})}(o.all,r);return nq({},t,{displaced:AJ({afterDragging:a,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:s,last:o})})},vY=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,s=e.viewport,o=e.afterCritical,a=VJ({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:o});return KJ({pageBorderBoxCenter:a,draggable:n,viewport:s})},gY=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&BK();var i=t.impact,s=r||t.viewport,o=n||t.dimensions,a=o.draggables,l=o.droppables,c=a[t.critical.draggable.id],u=iY(i);u||BK();var d=l[u],p=mY({impact:i,viewport:s,destination:d,draggables:a}),h=vY({impact:p,draggable:c,droppable:d,draggables:a,viewport:s,afterCritical:t.afterCritical});return fY({impact:p,clientSelection:h,state:t,dimensions:o,viewport:s})},yY=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,s=eY(n.axis,t.displaceBy),o=yJ(n.descriptor.id,r),a=o.indexOf(t);-1===a&&BK();var l,c=o.slice(a+1),u=c.reduce(function(e,t){return e[t.descriptor.id]=!0,e},{}),d={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:s,effected:u};return{impact:{displaced:AJ({afterDragging:c,destination:n,displacedBy:s,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:d}},bY=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map(function(e){var t=e.descriptor.droppableId,s=function(e){var t=e.frame;return t||BK(),t}(n[t]).scroll.diff.value,o=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=PK(t.client,n),s=RK(i,r);return nq({},t,{placeholder:nq({},t.placeholder,{client:i}),client:i,page:s})}({draggable:e,offset:ZK(i,s),initialWindowScroll:r.scroll.initial});return o})},xY=function(e){return"SNAP"===e.movementMode},wY=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:pY(e.droppables,t)}}(e.dimensions,t);return!xY(e)||n?fY({state:e,dimensions:r}):gY({state:e,dimensions:r})};function SY(e){return e.isDragging&&"SNAP"===e.movementMode?nq({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var CY={phase:"IDLE",completed:null,shouldFlush:!1},EY=function(e,t){if(void 0===e&&(e=CY),"FLUSH"===t.type)return nq({},CY,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&BK();var n=t.payload,r=n.critical,i=n.clientSelection,s=n.viewport,o=n.dimensions,a=n.movementMode,l=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],u={selection:i,borderBoxCenter:l.client.borderBox.center,offset:YK},d={client:u,page:{selection:ZK(u.selection,s.scroll.initial),borderBoxCenter:ZK(u.selection,s.scroll.initial),offset:ZK(u.selection,s.scroll.diff.value)}},p=vJ(o.droppables).every(function(e){return!e.isFixedOnPage}),h=yY({draggable:l,home:c,draggables:o.draggables,viewport:s}),f=h.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:a,dimensions:o,initial:d,current:d,isWindowScrollAllowed:p,impact:f,afterCritical:h.afterCritical,onLiftImpact:f,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&BK(),nq({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&BK(),function(e){var t=e.state,n=e.published,r=n.modified.map(function(e){var n=t.dimensions.droppables[e.droppableId];return cJ(n,e.scroll)}),i=nq({},t.dimensions.droppables,{},fJ(r)),s=mJ(bY({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),o=nq({},t.dimensions.draggables,{},s);n.removals.forEach(function(e){delete o[e]});var a={droppables:i,draggables:o},l=iY(t.impact),c=l?a.droppables[l]:null,u=a.draggables[t.critical.draggable.id],d=a.droppables[t.critical.droppable.id],p=yY({draggable:u,home:d,draggables:o,viewport:t.viewport}),h=p.impact,f=p.afterCritical,m=c&&c.isCombineEnabled?t.impact:h,v=dY({pageOffset:t.current.page.offset,draggable:a.draggables[t.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:t.viewport,afterCritical:f}),g=nq({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:h,dimensions:a,afterCritical:f,forceShouldAnimate:!1});return"COLLECTING"===t.phase?g:nq({phase:"DROP_PENDING"},g,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;oY(e)||BK();var m=t.payload.client;return XK(m,e.current.client.selection)?e:fY({state:e,clientSelection:m,impact:xY(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return SY(e);if("COLLECTING"===e.phase)return SY(e);oY(e)||BK();var v=t.payload,g=v.id,y=v.newScroll,b=e.dimensions.droppables[g];if(!b)return e;var x=cJ(b,y);return wY(e,x,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;oY(e)||BK();var w=t.payload,S=w.id,C=w.isEnabled,E=e.dimensions.droppables[S];E||BK(),E.isEnabled===C&&BK();var T=nq({},E,{isEnabled:C});return wY(e,T,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;oY(e)||BK();var N=t.payload,P=N.id,R=N.isCombineEnabled,I=e.dimensions.droppables[P];I||BK(),I.isCombineEnabled===R&&BK();var k=nq({},I,{isCombineEnabled:R});return wY(e,k,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;oY(e)||BK(),e.isWindowScrollAllowed||BK();var j=t.payload.newScroll;if(XK(e.viewport.scroll.current,j))return SY(e);var _=qJ(e.viewport,j);return xY(e)?gY({state:e,viewport:_}):fY({state:e,viewport:_})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!oY(e))return e;var A=t.payload.maxScroll;if(XK(A,e.viewport.scroll.max))return e;var O=nq({},e.viewport,{scroll:nq({},e.viewport.scroll,{max:A})});return nq({phase:"DRAGGING"},e,{viewport:O})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&BK();var D=sY({state:e,type:t.type});return D?fY({state:e,impact:D.impact,clientSelection:D.clientSelection,scrollJumpRequest:D.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var M=t.payload.reason;return"COLLECTING"!==e.phase&&BK(),nq({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:M})}if("DROP_ANIMATE"===t.type){var L=t.payload,z=L.completed,F=L.dropDuration,B=L.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&BK(),{phase:"DROP_ANIMATING",completed:z,dropDuration:F,newHomeClientOffset:B,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},TY=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},NY=function(){return{type:"COLLECTION_STARTING",payload:null}},PY=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},RY=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},IY=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},kY=function(e){return{type:"MOVE",payload:e}},jY=function(){return{type:"MOVE_UP",payload:null}},_Y=function(){return{type:"MOVE_DOWN",payload:null}},AY=function(){return{type:"MOVE_RIGHT",payload:null}},OY=function(){return{type:"MOVE_LEFT",payload:null}},DY=function(e){return{type:"DROP_COMPLETE",payload:e}},MY=function(e){return{type:"DROP",payload:e}},LY=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},zY="cubic-bezier(.2,1,.1,1)",FY={drop:0,combining:.7},BY={drop:.75},UY="0.2s cubic-bezier(0.2, 0, 0, 1)",WY={fluid:"opacity "+UY,snap:"transform "+UY+", opacity "+UY,drop:function(e){var t=e+"s "+zY;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+UY,placeholder:"height "+UY+", width "+UY+", margin "+UY},$Y=function(e){return XK(e,YK)?null:"translate("+e.x+"px, "+e.y+"px)"},HY=$Y,VY=function(e,t){var n=$Y(e);return n?t?n+" scale("+BY.drop+")":n:null},qY=.33,GY=.55,KY=.22000000000000003,JY=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var i=t(),s=r.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&BK(),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&BK();var o=i.critical,a=i.dimensions,l=a.draggables[i.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,s=e.viewport,o=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:nq({},r,{displaced:EJ}),didDropInsideDroppable:!0}:{impact:mY({draggables:t,impact:o,destination:i,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=c.impact,d=c.didDropInsideDroppable,p=d?bJ(u):null,h=d?xJ(u):null,f={index:o.draggable.index,droppableId:o.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:f,reason:s,mode:i.movementMode,destination:p,combine:h},v=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,s=e.afterCritical,o=r.draggables,a=r.droppables,l=iY(t),c=l?a[l]:null,u=a[n.descriptor.droppableId],d=vY({impact:t,draggable:n,draggables:o,afterCritical:s,droppable:c||u,viewport:i});return QK(d,n.client.borderBox.center)}({impact:u,draggable:l,dimensions:a,viewport:i.viewport,afterCritical:i.afterCritical}),g={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:u};if(!XK(i.current.client.offset,v)||Boolean(m.combine)){var y=function(e){var t=e.current,n=e.destination,r=e.reason,i=nJ(t,n);if(i<=0)return qY;if(i>=1500)return GY;var s=qY+KY*(i/1500);return Number(("CANCEL"===r?.6*s:s).toFixed(2))}({current:i.current.client.offset,destination:v,reason:s});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:v,dropDuration:y,completed:g}))}else n(DY({completed:g}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:s}))}else e(r)}}},YY=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function ZY(e){var t,n=e.onWindowScroll,r=DK(function(){n(YY())}),i=(t=r,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||t()}}),s=LK;function o(){return s!==LK}return{start:function(){o()&&BK(),s=zK(window,[i])},stop:function(){o()||BK(),r.cancel(),s(),s=LK},isActive:o}}var QY=function(e){var t=ZY({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},XY=function(){var e=[];return{add:function(t){var n=setTimeout(function(){return function(t){var n=dJ(e,function(e){return e.timerId===t});-1===n&&BK(),e.splice(n,1)[0].callback()}(n)}),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach(function(e){clearTimeout(e.timerId),e.callback()})}}}},eZ=function(e,t){t()},tZ=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},nZ=function(e,t,n,r){if(e){var i=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),i=function(i){t||n||(t=!0,e(i),clearTimeout(r))};return i.wasCalled=function(){return t},i}(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}else n(r(t))},rZ=function(e,t){var n=function(e,t){var n=XY(),r=null,i=function(n){r||BK(),r=null,eZ(0,function(){return nZ(e().onDragEnd,n,t,JK)})};return{beforeCapture:function(t,n){r&&BK(),eZ(0,function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})})},beforeStart:function(t,n){r&&BK(),eZ(0,function(){var r=e().onBeforeDragStart;r&&r(tZ(t,n))})},start:function(i,s){r&&BK();var o=tZ(i,s);r={mode:s,lastCritical:i,lastLocation:o.source,lastCombine:null},n.add(function(){eZ(0,function(){return nZ(e().onDragStart,o,t,GK)})})},update:function(i,s){var o=bJ(s),a=xJ(s);r||BK();var l=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(i,r.lastCritical);l&&(r.lastCritical=i);var c,u,d=(u=o,!(null==(c=r.lastLocation)&&null==u||null!=c&&null!=u&&c.droppableId===u.droppableId&&c.index===u.index));d&&(r.lastLocation=o);var p=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,a);if(p&&(r.lastCombine=a),l||d||p){var h=nq({},tZ(i,r.mode),{combine:a,destination:o});n.add(function(){eZ(0,function(){return nZ(e().onDragUpdate,h,t,KK)})})}},flush:function(){r||BK(),n.flush()},drop:i,abort:function(){if(r){var e=nq({},tZ(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var i=r.payload.critical;return n.beforeStart(i,r.payload.movementMode),t(r),void n.start(i,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var s=r.payload.completed.result;return n.flush(),t(r),void n.drop(s)}if(t(r),"FLUSH"!==r.type){var o=e.getState();"DRAGGING"===o.phase&&n.update(o.critical,o.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},iZ=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&BK(),e.dispatch(DY({completed:r.completed}))}else t(n)}}},sZ=function(e){var t=null,n=null;return function(r){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(i),"DROP_ANIMATE"===i.type){var s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame(function(){n=null,t=zK(window,[s])})}}}},oZ=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(MY({reason:r.reason})))}}}},aZ=mq,lZ=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,i=e.styleMarshal,s=e.getResponders,o=e.announce,a=e.autoScroller;return pq(EY,aZ(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(lq(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map(function(e){return e(i)});return r=mq.apply(void 0,s)(n.dispatch),aq(aq({},n),{},{dispatch:r})}}}((t=i,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var s=i.payload,o=s.id,a=s.clientSelection,l=s.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r(DY({completed:c.completed})),"IDLE"!==n().phase&&BK(),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:o,movementMode:l}});var u={draggableId:o,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},d=e.startPublishing(u),p=d.critical,h=d.dimensions,f=d.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:p,dimensions:h,clientSelection:a,movementMode:l,viewport:f}})}else t(i)}}}}(n),JY,iZ,sZ,oZ,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var i=t.getState();return"DRAGGING"!==i.phase&&BK(),void e.start(i)}n(r),e.scroll(t.getState())}}}}(a),QY,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),rZ(s,o))))},cZ=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,s=QK({x:n,y:t},{x:i,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},uZ=function(){var e=document.documentElement;return e||BK(),e},dZ=function(){var e=uZ();return cZ({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},pZ=function(e){var t,n,r,i,s,o,a,l=e.critical,c=e.scrollOptions,u=e.registry,d=(t=YY(),n=dZ(),r=t.y,i=t.x,s=uZ(),o=s.clientWidth,a=s.clientHeight,{frame:wK({top:r,left:i,right:i+o,bottom:r+a}),scroll:{initial:t,current:t,max:n,diff:{value:YK,displacement:YK}}}),p=d.scroll.current,h=l.droppable,f=u.droppable.getAllByType(h.type).map(function(e){return e.callbacks.getDimensionAndWatchScroll(p,c)}),m=u.draggable.getAllByType(l.draggable.type).map(function(e){return e.getDimension(p)});return{dimensions:{draggables:mJ(m),droppables:fJ(f)},critical:l,viewport:d}};function hZ(e,t,n){return n.descriptor.id!==t.id&&n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode}var fZ,mZ=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},i=null,s=function(){i||(n.collectionStarting(),i=requestAnimationFrame(function(){i=null;var e=r,s=e.additions,o=e.removals,a=e.modified,l=Object.keys(s).map(function(e){return t.draggable.getById(e).getDimension(YK)}).sort(function(e,t){return e.descriptor.index-t.descriptor.index}),c=Object.keys(a).map(function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}}),u={additions:l,removals:Object.keys(o),modified:c};r={additions:{},removals:{},modified:{}},n.publish(u)}))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],s()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],s()},stop:function(){i&&(cancelAnimationFrame(i),i=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){n||BK();var i=n.critical.draggable;"ADDITION"===t.type&&hZ(e,i,t.value)&&r.add(t.value),"REMOVAL"===t.type&&hZ(e,i,t.value)&&r.remove(t.value)};return{updateDroppableIsEnabled:function(r,i){e.droppable.exists(r)||BK(),n&&t.updateDroppableIsEnabled({id:r,isEnabled:i})},updateDroppableIsCombineEnabled:function(r,i){n&&(e.droppable.exists(r)||BK(),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,i){n&&(e.droppable.exists(r)||BK(),t.updateDroppableScroll({id:r,newScroll:i}))},startPublishing:function(t){n&&BK();var r=e.draggable.getById(t.draggableId),s=e.droppable.getById(r.descriptor.droppableId),o={draggable:r.descriptor,droppable:s.descriptor},a=e.subscribe(i);return n={critical:o,unsubscribe:a},pZ({critical:o,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach(function(e){return e.callbacks.dragStopped()}),n.unsubscribe(),n=null}}}},vZ=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason},gZ=function(e){window.scrollBy(e.x,e.y)},yZ=OK(function(e){return vJ(e).filter(function(e){return!!e.isEnabled&&!!e.frame})}),bZ=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var s=function(e,t){return pJ(yZ(t),function(t){return t.frame||BK(),aY(t.frame.pageMarginBox)(e)})}(t,r);return s},xZ=.25,wZ=.05,SZ=28,CZ=function(e){return Math.pow(e,2)},EZ={stopDampeningAt:1200,accelerateAt:360},TZ=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;return 0===i?0:(r-t)/i},NZ=EZ.accelerateAt,PZ=EZ.stopDampeningAt,RZ=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,s=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return SZ;if(e===t.startScrollingFrom)return 1;var n=TZ({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=SZ*CZ(1-n);return Math.ceil(r)}(t,n);return 0===s?0:i?Math.max(function(e,t){var n=t,r=PZ,i=Date.now()-n;if(i>=PZ)return e;if(i<NZ)return 1;var s=TZ({startOfRange:NZ,endOfRange:r,current:i}),o=e*CZ(s);return Math.ceil(o)}(s,r),1):s},IZ=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,s=e.shouldUseTimeDampening,o=function(e,t){return{startScrollingFrom:e[t.size]*xZ,maxScrollValueAt:e[t.size]*wZ}}(t,i);return n[i.end]<n[i.start]?RZ({distanceToEdge:n[i.end],thresholds:o,dragStartTime:r,shouldUseTimeDampening:s}):-1*RZ({distanceToEdge:n[i.start],thresholds:o,dragStartTime:r,shouldUseTimeDampening:s})},kZ=iJ(function(e){return 0===e?0:e}),jZ=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,s=e.shouldUseTimeDampening,o={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},a=IZ({container:n,distanceToEdges:o,dragStartTime:t,axis:IJ,shouldUseTimeDampening:s}),l=IZ({container:n,distanceToEdges:o,dragStartTime:t,axis:kJ,shouldUseTimeDampening:s}),c=kZ({x:l,y:a});if(XK(c,YK))return null;var u=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,s=n.width>t.width;return s||i?s&&i?null:{x:s?0:r.x,y:i?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return u?XK(u,YK)?null:u:null},_Z=iJ(function(e){return 0===e?0:e>0?1:-1}),AZ=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var n=t.current,r=t.max,i=t.change,s=ZK(n,i),o={x:e(s.x,r.x),y:e(s.y,r.y)};return XK(o,YK)?null:o}}(),OZ=function(e){var t=e.max,n=e.current,r=e.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},s=_Z(r),o=AZ({max:i,current:n,change:s});return!o||0!==s.x&&0===o.x||0!==s.y&&0===o.y},DZ=function(e,t){return OZ({current:e.scroll.current,max:e.scroll.max,change:t})},MZ=function(e,t){var n=e.frame;return!!n&&OZ({current:n.scroll.current,max:n.scroll.max,change:t})},LZ=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,s=e.scrollDroppable,o=t.current.page.borderBoxCenter,a=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,o=jZ({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:s});return o&&DZ(t,o)?o:null}({dragStartTime:n,viewport:t.viewport,subject:a,center:o,shouldUseTimeDampening:r});if(l)return void i(l)}var c=bZ({center:o,destination:iY(t.impact),droppables:t.dimensions.droppables});if(c){var u=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var a=jZ({dragStartTime:i,container:o.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:s});return a&&MZ(t,a)?a:null}({dragStartTime:n,droppable:c,subject:a,center:o,shouldUseTimeDampening:r});u&&s(c.descriptor.id,u)}},zZ=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(e,t){if(!MZ(e,t))return t;var r=function(e,t){var n=e.frame;return n&&MZ(e,t)?AZ({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var i=QK(t,r);return n(e.descriptor.id,i),QK(t,i)},s=function(e,t,n){if(!e)return n;if(!DZ(t,n))return n;var i=function(e,t){if(!DZ(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return AZ({current:r,max:n,change:t})}(t,n);if(!i)return r(n),null;var s=QK(n,i);return r(s),QK(n,s)};return function(e){var n=e.scrollJumpRequest;if(n){var r=iY(e.impact);r||BK();var o=i(e.dimensions.droppables[r],n);if(o){var a=e.viewport,l=s(e.isWindowScrollAllowed,a,o);l&&function(e,n){var r=ZK(e.current.client.selection,n);t({client:r})}(e,l)}}}},FZ=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=DK(t),i=DK(n),s=null,o=function(e){s||BK();var t=s,n=t.shouldUseTimeDampening,o=t.dragStartTime;LZ({state:e,scrollWindow:r,scrollDroppable:i,dragStartTime:o,shouldUseTimeDampening:n})};return{start:function(e){s&&BK();var t=Date.now(),n=!1,r=function(){n=!0};LZ({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),s={dragStartTime:t,shouldUseTimeDampening:n},n&&o(e)},stop:function(){s&&(r.cancel(),i.cancel(),s=null)},scroll:o}}({scrollWindow:n,scrollDroppable:t}),s=zZ({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&s(e):i.scroll(e))},start:i.start,stop:i.stop}},BZ="data-rbd",UZ={base:fZ=BZ+"-drag-handle",draggableId:fZ+"-draggable-id",contextId:fZ+"-context-id"},WZ=function(){var e=BZ+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),$Z=function(){var e=BZ+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),HZ={contextId:BZ+"-scroll-container-context-id"},VZ=function(e,t){return e.map(function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""}).join(" ")},qZ="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Pt.useLayoutEffect:Pt.useEffect,GZ=function(){var e=document.querySelector("head");return e||BK(),e},KZ=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function JZ(e,t){var n=bK(function(){return function(e){var t,n,r,i=(t=e,function(e){return"["+e+'="'+t+'"]'}),s=(n="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:i(UZ.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:n,dragging:"pointer-events: none;",dropAnimating:n}}),o=[(r="\n      transition: "+WY.outOfTheWay+";\n    ",{selector:i(WZ.contextId),styles:{dragging:r,dropAnimating:r,userCancel:r}}),s,{selector:i($Z.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:VZ(o,"always"),resting:VZ(o,"resting"),dragging:VZ(o,"dragging"),dropAnimating:VZ(o,"dropAnimating"),userCancel:VZ(o,"userCancel")}}(e)},[e]),r=Pt.useRef(null),i=Pt.useRef(null),s=xK(OK(function(e){var t=i.current;t||BK(),t.textContent=e}),[]),o=xK(function(e){var t=r.current;t||BK(),t.textContent=e},[]);qZ(function(){(r.current||i.current)&&BK();var a=KZ(t),l=KZ(t);return r.current=a,i.current=l,a.setAttribute(BZ+"-always",e),l.setAttribute(BZ+"-dynamic",e),GZ().appendChild(a),GZ().appendChild(l),o(n.always),s(n.resting),function(){var e=function(e){var t=e.current;t||BK(),GZ().removeChild(t),e.current=null};e(r),e(i)}},[t,o,s,n.always,n.resting,e]);var a=xK(function(){return s(n.dragging)},[s,n.dragging]),l=xK(function(e){s("DROP"!==e?n.userCancel:n.dropAnimating)},[s,n.dropAnimating,n.userCancel]),c=xK(function(){i.current&&s(n.resting)},[s,n.resting]);return bK(function(){return{dragging:a,dropping:l,resting:c}},[a,l,c])}var YZ=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function ZZ(e){return e instanceof YZ(e).HTMLElement}function QZ(e){var t=Pt.useRef({}),n=Pt.useRef(null),r=Pt.useRef(null),i=Pt.useRef(!1),s=xK(function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}},[]),o=xK(function(t){var n=function(e,t){var n="["+UZ.contextId+'="'+e+'"]',r=hJ(document.querySelectorAll(n));if(!r.length)return null;var i=pJ(r,function(e){return e.getAttribute(UZ.draggableId)===t});return i&&ZZ(i)?i:null}(e,t);n&&n!==document.activeElement&&n.focus()},[e]),a=xK(function(e,t){n.current===e&&(n.current=t)},[]),l=xK(function(){r.current||i.current&&(r.current=requestAnimationFrame(function(){r.current=null;var e=n.current;e&&o(e)}))},[o]),c=xK(function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(UZ.draggableId)===e&&(n.current=e)},[]);return qZ(function(){return i.current=!0,function(){i.current=!1;var e=r.current;e&&cancelAnimationFrame(e)}},[]),bK(function(){return{register:s,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}},[s,c,l,a])}function XZ(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach(function(t){return t(e)})}function r(t){return e.draggables[t]||null}function i(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var i=t.descriptor.id,s=r(i);s&&t.uniqueId===s.uniqueId&&(delete e.draggables[i],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||BK(),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return uJ(e.draggables).filter(function(e){return e.descriptor.type===t})}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=i(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=i(e);return t||BK(),t},findById:i,exists:function(e){return Boolean(i(e))},getAllByType:function(t){return uJ(e.droppables).filter(function(e){return e.descriptor.type===t})}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var eQ=Rt.createContext(null),tQ=function(){var e=document.body;return e||BK(),e},nQ={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},rQ=0,iQ={separator:"::"};function sQ(e,t){return void 0===t&&(t=iQ),bK(function(){return""+e+t.separator+rQ++},[t.separator,e])}var oQ=Rt.createContext(null);function aQ(e){var t=Pt.useRef(e);return Pt.useEffect(function(){t.current=e}),t}var lQ,cQ,uQ=((lQ={})[13]=!0,lQ[9]=!0,lQ),dQ=function(e){uQ[e.keyCode]&&e.preventDefault()},pQ=function(){var e="visibilitychange";return"undefined"==typeof document?e:pJ([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],function(e){return"on"+e in document})||e}(),hQ={type:"IDLE"};function fQ(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,s=e.clientY;if(0===t){var o={x:n,y:s},a=r();if("DRAGGING"===a.type)return e.preventDefault(),void a.actions.move(o);"PENDING"!==a.type&&BK();var l=a.point;if(c=l,u=o,Math.abs(u.x-c.x)>=5||Math.abs(u.y-c.y)>=5){var c,u;e.preventDefault();var d=a.actions.fluidLift(o);i({type:"DRAGGING",actions:d})}}}},{eventName:"mouseup",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void dQ(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&BK(),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:pQ,fn:t}]}function mQ(){}var vQ=((cQ={})[34]=!0,cQ[33]=!0,cQ[36]=!0,cQ[35]=!0,cQ);function gQ(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(vQ[r.keyCode]?r.preventDefault():dQ(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:pQ,fn:n}]}var yQ={type:"IDLE"},bQ={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function xQ(e,t){if(null==t)return!1;if(Boolean(bQ[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&xQ(e,t.parentElement)}function wQ(e,t){var n=t.target;return!!ZZ(n)&&xQ(e,n)}var SQ=function(e){return wK(e.getBoundingClientRect()).center},CQ=function(){var e="matches";return"undefined"==typeof document?e:pJ([e,"msMatchesSelector","webkitMatchesSelector"],function(e){return e in Element.prototype})||e}();function EQ(e,t){return null==e?null:e[CQ](t)?e:EQ(e.parentElement,t)}function TQ(e,t){return e.closest?e.closest(t):EQ(e,t)}function NQ(e,t){var n,r=t.target;if(!((n=r)instanceof YZ(n).Element))return null;var i=function(e){return"["+UZ.contextId+'="'+e+'"]'}(e),s=TQ(r,i);return s&&ZZ(s)?s:null}function PQ(e){e.preventDefault()}function RQ(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!!r()&&t===n}function IQ(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var s=r.draggable.findById(i);return!!s&&!!s.options.isEnabled&&!!vZ(n.getState(),i)}function kQ(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,s=e.draggableId,o=e.forceSensorStop,a=e.sourceEvent;if(!IQ({lockAPI:t,store:r,registry:i,draggableId:s}))return null;var l=i.draggable.getById(s),c=function(e,t){var n="["+WZ.contextId+'="'+e+'"]',r=pJ(hJ(document.querySelectorAll(n)),function(e){return e.getAttribute(WZ.id)===t});return r&&ZZ(r)?r:null}(n,l.descriptor.id);if(!c)return null;if(a&&!l.options.canDragInteractiveElements&&wQ(c,a))return null;var u=t.claim(o||LK),d="PRE_DRAG";function p(){return l.options.shouldRespectForcePress}function h(){return t.isActive(u)}var f=function(e,t){RQ({expected:e,phase:d,isLockActive:h,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function m(e){function n(){t.release(),d="COMPLETED"}function i(t,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),e.cleanup(),i.shouldBlockNextClick){var s=zK(window,[{eventName:"click",fn:PQ,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(s)}n(),r.dispatch(MY({reason:t}))}return"PRE_DRAG"!==d&&(n(),"PRE_DRAG"!==d&&BK()),r.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),d="DRAGGING",nq({isActive:function(){return RQ({expected:"DRAGGING",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}return{isActive:function(){return RQ({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var t=DK(function(e){f(function(){return kY({client:e})})});return nq({},m({liftActionArgs:{id:s,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return f(jY)},moveRight:function(){return f(AY)},moveDown:function(){return f(_Y)},moveLeft:function(){return f(OY)}};return m({liftActionArgs:{id:s,clientSelection:SQ(c),movementMode:"SNAP"},cleanup:LK,actions:e})},abort:function(){RQ({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!0})&&t.release()}}}var jQ=[function(e){var t=Pt.useRef(hQ),n=Pt.useRef(LK),r=bK(function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,o,{sourceEvent:t});if(i){t.preventDefault();var s={x:t.clientX,y:t.clientY};n.current(),c(i,s)}}}}}},[e]),i=bK(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}},[e]),s=xK(function(){n.current=zK(window,[i,r],{passive:!1,capture:!0})},[i,r]),o=xK(function(){"IDLE"!==t.current.type&&(t.current=hQ,n.current(),s())},[s]),a=xK(function(){var e=t.current;o(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[o]),l=xK(function(){var e=fQ({cancel:a,completed:o,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=zK(window,e,{capture:!0,passive:!1})},[a,o]),c=xK(function(e,n){"IDLE"!==t.current.type&&BK(),t.current={type:"PENDING",point:n,actions:e},l()},[l]);qZ(function(){return s(),function(){n.current()}},[s])},function(e){var t=Pt.useRef(mQ),n=bK(function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var i=e.findClosestDraggableId(n);if(i){var s=e.tryGetLock(i,l,{sourceEvent:n});if(s){n.preventDefault();var o=!0,a=s.snapLift();t.current(),t.current=zK(window,gQ(a,l),{capture:!0,passive:!1})}}}function l(){o||BK(),o=!1,t.current(),r()}}}},[e]),r=xK(function(){t.current=zK(window,[n],{passive:!1,capture:!0})},[n]);qZ(function(){return r(),function(){t.current()}},[r])},function(e){var t=Pt.useRef(yQ),n=Pt.useRef(LK),r=xK(function(){return t.current},[]),i=xK(function(e){t.current=e},[]),s=bK(function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,a,{sourceEvent:t});if(i){var s=t.touches[0],o={x:s.clientX,y:s.clientY};n.current(),d(i,o)}}}}}},[e]),o=xK(function(){n.current=zK(window,[s],{capture:!0,passive:!1})},[s]),a=xK(function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),i(yQ),n.current(),o())},[o,i]),l=xK(function(){var e=t.current;a(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[a]),c=xK(function(){var e={capture:!0,passive:!1},t={cancel:l,completed:a,getPhase:r},i=zK(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var i=e.touches[0],s={x:i.clientX,y:i.clientY};e.preventDefault(),n.actions.move(s)}else t()}},{eventName:"touchend",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&BK();var i=e.touches[0];if(i&&i.force>=.15){var s=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return s?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();s&&t()}}},{eventName:pQ,fn:t}]}(t),e),s=zK(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:pQ,fn:t}]}(t),e);n.current=function(){i(),s()}},[l,r,a]),u=xK(function(){var e=r();"PENDING"!==e.type&&BK();var t=e.actions.fluidLift(e.point);i({type:"DRAGGING",actions:t,hasMoved:!1})},[r,i]),d=xK(function(e,t){"IDLE"!==r().type&&BK();var n=setTimeout(u,120);i({type:"PENDING",point:t,actions:e,longPressTimerId:n}),c()},[c,r,i,u]);qZ(function(){return o(),function(){n.current();var e=r();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),i(yQ))}},[r,o,i]),qZ(function(){return zK(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])},[])}];function _Q(e){var t=e.contextId,n=e.store,r=e.registry,i=e.customSensors,s=e.enableDefaultSensors,o=[].concat(s?jQ:[],i||[]),a=Pt.useState(function(){return function(){var e=null;function t(){e||BK(),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&BK();var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()})[0],l=xK(function(e,t){e.isDragging&&!t.isDragging&&a.tryAbandon()},[a]);qZ(function(){var e=n.getState();return n.subscribe(function(){var t=n.getState();l(e,t),e=t})},[a,n,l]),qZ(function(){return a.tryAbandon},[a.tryAbandon]);for(var c=xK(function(e){return IQ({lockAPI:a,registry:r,store:n,draggableId:e})},[a,r,n]),u=xK(function(e,i,s){return kQ({lockAPI:a,registry:r,contextId:t,store:n,draggableId:e,forceSensorStop:i,sourceEvent:s&&s.sourceEvent?s.sourceEvent:null})},[t,a,r,n]),d=xK(function(e){return function(e,t){var n=NQ(e,t);return n?n.getAttribute(UZ.draggableId):null}(t,e)},[t]),p=xK(function(e){var t=r.draggable.findById(e);return t?t.options:null},[r.draggable]),h=xK(function(){a.isClaimed()&&(a.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))},[a,n]),f=xK(a.isClaimed,[a]),m=bK(function(){return{canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:p,tryReleaseLock:h,isLockClaimed:f}},[c,u,d,p,h,f]),v=0;v<o.length;v++)o[v](m)}function AQ(e){return e.current||BK(),e.current}function OQ(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,i=e.nonce,s=e.dragHandleUsageInstructions,o=Pt.useRef(null),a=aQ(e),l=xK(function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(a.current)},[a]),c=function(e){var t=bK(function(){return function(e){return"rbd-announcement-"+e}(e)},[e]),n=Pt.useRef(null);return Pt.useEffect(function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),nq(e.style,nQ),tQ().appendChild(e),function(){setTimeout(function(){var t=tQ();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)})}},[t]),xK(function(e){var t=n.current;t&&(t.textContent=e)},[])}(t),u=function(e){var t=e.contextId,n=e.text,r=sQ("hidden-text",{separator:"-"}),i=bK(function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:r}).contextId+"-"+e.uniqueId;var e},[r,t]);return Pt.useEffect(function(){var e=document.createElement("div");return e.id=i,e.textContent=n,e.style.display="none",tQ().appendChild(e),function(){var t=tQ();t.contains(e)&&t.removeChild(e)}},[i,n]),i}({contextId:t,text:s}),d=JZ(t,i),p=xK(function(e){AQ(o).dispatch(e)},[]),h=bK(function(){return fq({publishWhileDragging:TY,updateDroppableScroll:PY,updateDroppableIsEnabled:RY,updateDroppableIsCombineEnabled:IY,collectionStarting:NY},p)},[p]),f=function(){var e=bK(XZ,[]);return Pt.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}(),m=bK(function(){return mZ(f,h)},[f,h]),v=bK(function(){return FZ(nq({scrollWindow:gZ,scrollDroppable:m.scrollDroppable},fq({move:kY},p)))},[m.scrollDroppable,p]),g=QZ(t),y=bK(function(){return lZ({announce:c,autoScroller:v,dimensionMarshal:m,focusMarshal:g,getResponders:l,styleMarshal:d})},[c,v,m,g,l,d]);o.current=y;var b=xK(function(){var e=AQ(o);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})},[]),x=xK(function(){var e=AQ(o).getState();return e.isDragging||"DROP_ANIMATING"===e.phase},[]);n(bK(function(){return{isDragging:x,tryAbort:b}},[x,b]));var w=xK(function(e){return vZ(AQ(o).getState(),e)},[]),S=xK(function(){return oY(AQ(o).getState())},[]),C=bK(function(){return{marshal:m,focus:g,contextId:t,canLift:w,isMovementAllowed:S,dragHandleUsageInstructionsId:u,registry:f}},[t,m,u,g,w,S,f]);return _Q({contextId:t,store:y,registry:f,customSensors:r,enableDefaultSensors:!1!==e.enableDefaultSensors}),Pt.useEffect(function(){return b},[b]),Rt.createElement(oQ.Provider,{value:C},Rt.createElement(Nq,{context:eQ,store:y},e.children))}var DQ=0;function MQ(e){var t=bK(function(){return""+DQ++},[]),n=e.dragHandleUsageInstructions||qK;return Rt.createElement(UK,null,function(r){return Rt.createElement(OQ,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var LQ=function(e){return function(t){return e===t}},zQ=LQ("scroll"),FQ=LQ("auto"),BQ=function(e,t){return t(e.overflowX)||t(e.overflowY)},UQ=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return BQ(n,zQ)||BQ(n,FQ)}(t)?t:e(t.parentElement)},WQ=function(e){return{x:e.scrollLeft,y:e.scrollTop}},$Q=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},HQ=function(e){return{closestScrollable:UQ(e),isFixedOnPage:$Q(e)}},VQ=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,s=e.direction,o=e.isDropDisabled,a=e.isCombineEnabled,l=e.shouldClipSubject,c=r.closestScrollable,u=function(e,t){var n=kK(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,s=r+t.scrollHeight,o=i+t.scrollWidth,a=SK({top:r,right:o,bottom:s,left:i},n.border);return TK({borderBox:a,margin:n.margin,border:n.border,padding:n.padding})}(t,c),d=RK(u,i),p=function(){if(!c)return null;var e=kK(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:RK(e,i),scroll:WQ(c),scrollSize:t,shouldClipSubject:l}}(),h=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,s=e.direction,o=e.client,a=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,n=cZ({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:n,diff:{value:YK,displacement:YK}}}}(),u="vertical"===s?IJ:kJ;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:u,isEnabled:n,client:o,page:a,frame:c,subject:lJ({page:a,withPlaceholder:null,axis:u,frame:c})}}({descriptor:n,isEnabled:!o,isCombineEnabled:a,isFixedOnPage:r.isFixedOnPage,direction:s,client:u,page:d,closest:p});return h},qQ={passive:!1},GQ={passive:!0},KQ=function(e){return e.shouldPublishImmediately?qQ:GQ};function JQ(e){var t=Pt.useContext(e);return t||BK(),t}var YQ=function(e){return e&&e.env.closestScrollable||null};function ZQ(){}var QQ={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},XQ=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,i=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?QQ:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?WY.placeholder:null}},eX=Rt.memo(function(e){var t=Pt.useRef(null),n=xK(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),r=e.animate,i=e.onTransitionEnd,s=e.onClose,o=e.contextId,a=Pt.useState("open"===e.animate),l=a[0],c=a[1];Pt.useEffect(function(){return l?"open"!==r?(n(),c(!1),ZQ):t.current?ZQ:(t.current=setTimeout(function(){t.current=null,c(!1)}),n):ZQ},[r,l,n]);var u=xK(function(e){"height"===e.propertyName&&(i(),"close"===r&&s())},[r,s,i]),d=XQ({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return Rt.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})}),tX=Rt.createContext(null),nX=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return tq(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(Rt.PureComponent),rX=5e3,iX=4500,sX=function(e,t){return t?WY.drop(t.duration):e?WY.snap:WY.fluid},oX=function(e,t){return e?t?FY.drop:FY.combining:null};function aX(e){return"DRAGGING"===e.type?(r=(n=e).dimension.client,i=n.offset,s=n.combineWith,o=n.dropping,a=Boolean(s),l=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(n),c=Boolean(o),u=c?VY(i,a):HY(i),{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:sX(l,o),transform:u,opacity:oX(a,c),zIndex:c?iX:rX,pointerEvents:"none"}):{transform:HY((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t,n,r,i,s,o,a,l,c,u}function lX(e){var t=sQ("draggable"),n=e.descriptor,r=e.registry,i=e.getDraggableRef,s=e.canDragInteractiveElements,o=e.shouldRespectForcePress,a=e.isEnabled,l=bK(function(){return{canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:a}},[s,a,o]),c=xK(function(e){var t=i();return t||BK(),function(e,t,n){void 0===n&&(n=YK);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),s=IK(i,r),o=RK(s,n);return{descriptor:e,placeholder:{client:s,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:s.marginBox.width,y:s.marginBox.height},client:s,page:o}}(n,t,e)},[n,i]),u=bK(function(){return{uniqueId:t,descriptor:n,options:l,getDimension:c}},[n,c,l,t]),d=Pt.useRef(u),p=Pt.useRef(!0);qZ(function(){return r.draggable.register(d.current),function(){return r.draggable.unregister(d.current)}},[r.draggable]),qZ(function(){if(p.current)p.current=!1;else{var e=d.current;d.current=u,r.draggable.update(u,e)}},[u,r.draggable])}function cX(e){e.preventDefault()}var uX=function(e,t){return e===t},dX=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function pX(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var hX={mapped:{type:"SECONDARY",offset:YK,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:pX(null)}},fX=vK(function(){var e,t,n,r=(e=OK(function(e,t){return{x:e,y:t}}),t=OK(function(e,t,n,r,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}}),n=OK(function(e,n,r,i,s,o,a){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:o,mode:n,offset:e,dimension:r,forceShouldAnimate:a,snapshot:t(n,i,s,o,null)}}}),function(r,i){if(r.isDragging){if(r.critical.draggable.id!==i.draggableId)return null;var s=r.current.client.offset,o=r.dimensions.draggables[i.draggableId],a=iY(r.impact),l=(u=r.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(s.x,s.y),r.movementMode,o,i.isClone,a,l,c)}var u;if("DROP_ANIMATING"===r.phase){var d=r.completed;if(d.result.draggableId!==i.draggableId)return null;var p=i.isClone,h=r.dimensions.draggables[i.draggableId],f=d.result,m=f.mode,v=dX(f),g=function(e){return e.combine?e.combine.draggableId:null}(f),y={duration:r.dropDuration,curve:zY,moveTo:r.newHomeClientOffset,opacity:g?FY.drop:null,scale:g?BY.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:h,dropping:y,draggingOver:v,combineWith:g,mode:m,forceShouldAnimate:null,snapshot:t(m,p,v,g,y)}}}return null}),i=function(){var e=OK(function(e,t){return{x:e,y:t}}),t=OK(pX),n=OK(function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}}),r=function(e){return e?n(YK,e,!0):null},i=function(t,i,s,o){var a=s.displaced.visible[t],l=Boolean(o.inVirtualList&&o.effected[t]),c=xJ(s),u=c&&c.draggableId===t?i:null;if(!a){if(!l)return r(u);if(s.displaced.invisible[t])return null;var d=eJ(o.displacedBy.point),p=e(d.x,d.y);return n(p,u,!0)}if(l)return r(u);var h=s.displacedBy.point,f=e(h.x,h.y);return n(f,u,a.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(e,t){return r(e,t)||i(e,t)||hX}},{dropAnimationFinished:LY},null,{context:eQ,pure:!0,areStatePropsEqual:uX})(function(e){var t=Pt.useRef(null),n=xK(function(e){t.current=e},[]),r=xK(function(){return t.current},[]),i=JQ(oQ),s=i.contextId,o=i.dragHandleUsageInstructionsId,a=i.registry,l=JQ(tX),c=l.type,u=l.droppableId,d=bK(function(){return{id:e.draggableId,index:e.index,type:c,droppableId:u}},[e.draggableId,e.index,c,u]),p=e.children,h=e.draggableId,f=e.isEnabled,m=e.shouldRespectForcePress,v=e.canDragInteractiveElements,g=e.isClone,y=e.mapped,b=e.dropAnimationFinished;g||lX(bK(function(){return{descriptor:d,registry:a,getDraggableRef:r,canDragInteractiveElements:v,shouldRespectForcePress:m,isEnabled:f}},[d,a,r,v,m,f]));var x=bK(function(){return f?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":s,draggable:!1,onDragStart:cX}:null},[s,o,h,f]),w=xK(function(e){"DRAGGING"===y.type&&y.dropping&&"transform"===e.propertyName&&b()},[b,y]),S=bK(function(){var e=aX(y),t="DRAGGING"===y.type&&y.dropping?w:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":s,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:x}},[s,x,h,y,w,n]),C=bK(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return p(S,y.snapshot,C)});function mX(e){return JQ(tX).isUsingCloneFor!==e.draggableId||e.isClone?Rt.createElement(fX,e):null}function vX(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),r=Boolean(e.shouldRespectForcePress);return Rt.createElement(mX,nq({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}var gX=function(e,t){return e===t.droppable.type},yX=function(e,t){return t.draggables[e.draggable.id]},bX={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||BK(),document.body}},xX=vK(function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=nq({},e,{shouldAnimatePlaceholder:!1}),n=OK(function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}}),r=OK(function(r,i,s,o,a,l){var c=a.descriptor.id;if(a.descriptor.droppableId===r){var u=l?{render:l,dragging:n(a.descriptor)}:null,d={isDraggingOver:s,draggingOverWith:s?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:a.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!i)return t;if(!o)return e;var p={isDraggingOver:s,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:a.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return function(n,i){var s=i.droppableId,o=i.type,a=!i.isDropDisabled,l=i.renderClone;if(n.isDragging){var c=n.critical;if(!gX(o,c))return t;var u=yX(c,n.dimensions),d=iY(n.impact)===s;return r(s,a,d,d,u,l)}if("DROP_ANIMATING"===n.phase){var p=n.completed;if(!gX(o,p.critical))return t;var h=yX(p.critical,n.dimensions);return r(s,a,dX(p.result)===s,iY(p.impact)===s,h,l)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var f=n.completed;if(!gX(o,f.critical))return t;var m=iY(f.impact)===s,v=Boolean(f.impact.at&&"COMBINE"===f.impact.at.type),g=f.critical.droppable.id===s;return m?v?e:t:g?e:t}return t}},{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:eQ,pure:!0,areStatePropsEqual:uX})(function(e){var t=Pt.useContext(oQ);t||BK();var n=t.contextId,r=t.isMovementAllowed,i=Pt.useRef(null),s=Pt.useRef(null),o=e.children,a=e.droppableId,l=e.type,c=e.mode,u=e.direction,d=e.ignoreContainerClipping,p=e.isDropDisabled,h=e.isCombineEnabled,f=e.snapshot,m=e.useClone,v=e.updateViewportMaxScroll,g=e.getContainerForClone,y=xK(function(){return i.current},[]),b=xK(function(e){i.current=e},[]);xK(function(){return s.current},[]);var x=xK(function(e){s.current=e},[]),w=xK(function(){r()&&v({maxScroll:dZ()})},[r,v]);!function(e){var t=Pt.useRef(null),n=JQ(oQ),r=sQ("droppable"),i=n.registry,s=n.marshal,o=aQ(e),a=bK(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),l=Pt.useRef(a),c=bK(function(){return OK(function(e,n){t.current||BK();var r={x:e,y:n};s.updateDroppableScroll(a.id,r)})},[a.id,s]),u=xK(function(){var e=t.current;return e&&e.env.closestScrollable?WQ(e.env.closestScrollable):YK},[]),d=xK(function(){var e=u();c(e.x,e.y)},[u,c]),p=bK(function(){return DK(d)},[d]),h=xK(function(){var e=t.current,n=YQ(e);e&&n||BK(),e.scrollOptions.shouldPublishImmediately?d():p()},[p,d]),f=xK(function(e,r){t.current&&BK();var i=o.current,s=i.getDroppableRef();s||BK();var l=HQ(s),c={ref:s,descriptor:a,env:l,scrollOptions:r};t.current=c;var u=VQ({ref:s,descriptor:a,env:l,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=l.closestScrollable;return d&&(d.setAttribute(HZ.contextId,n.contextId),d.addEventListener("scroll",h,KQ(c.scrollOptions))),u},[n.contextId,a,h,o]),m=xK(function(){var e=t.current,n=YQ(e);return e&&n||BK(),WQ(n)},[]),v=xK(function(){var e=t.current;e||BK();var n=YQ(e);t.current=null,n&&(p.cancel(),n.removeAttribute(HZ.contextId),n.removeEventListener("scroll",h,KQ(e.scrollOptions)))},[h,p]),g=xK(function(e){var n=t.current;n||BK();var r=YQ(n);r||BK(),r.scrollTop+=e.y,r.scrollLeft+=e.x},[]),y=bK(function(){return{getDimensionAndWatchScroll:f,getScrollWhileDragging:m,dragStopped:v,scroll:g}},[v,f,m,g]),b=bK(function(){return{uniqueId:r,descriptor:a,callbacks:y}},[y,a,r]);qZ(function(){return l.current=b.descriptor,i.droppable.register(b),function(){t.current&&v(),i.droppable.unregister(b)}},[y,a,v,b,s,i.droppable]),qZ(function(){t.current&&s.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),qZ(function(){t.current&&s.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:p,isCombineEnabled:h,ignoreContainerClipping:d,getDroppableRef:y});var S=Rt.createElement(nX,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(e){var t=e.onClose,r=e.data,i=e.animate;return Rt.createElement(eX,{placeholder:r,onClose:t,innerRef:x,animate:i,contextId:n,onTransitionEnd:w})}),C=bK(function(){return{innerRef:b,placeholder:S,droppableProps:{"data-rbd-droppable-id":a,"data-rbd-droppable-context-id":n}}},[n,a,S,b]),E=m?m.dragging.draggableId:null,T=bK(function(){return{droppableId:a,type:l,isUsingCloneFor:E}},[a,E,l]);return Rt.createElement(tX.Provider,{value:T},o(C,f),function(){if(!m)return null;var e=m.dragging,t=m.render,n=Rt.createElement(mX,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(n,r){return t(n,r,e)});return Hp.createPortal(n,g())}())});xX.defaultProps=bX;const wX=({steps:t,onStepUpdate:n,onStepsReorder:r,onStepDelete:i,onConditionAdd:s,onConditionDelete:o,onConditionEdit:a,onSave:l,onCancel:c,flowId:u,onAddStepBetween:d})=>{console.log(" StepEditor :",{stepsLength:t.length,flowId:u,steps:t.map(e=>({id:e.id,title:e.title,type:e.type}))});const[p,h]=Pt.useState({}),v=Pt.useRef({}),[g,y]=Pt.useState({}),[b,x]=Pt.useState({}),[w,S]=Pt.useState({});Pt.useEffect(()=>{const e=t.reduce((e,t)=>(e[t.id]=!0,e),{});x(e)},[t]),Pt.useEffect(()=>{const e=document.createElement("style");return e.textContent="\n  .step-editor-scrollbar::-webkit-scrollbar {\n    width: 20px !important;\n    height: 20px !important;\n  }\n  \n  .step-editor-scrollbar::-webkit-scrollbar-track {\n    background: #f1f1f1 !important;\n    border-radius: 10px !important;\n    margin: 2px !important;\n  }\n  \n  .step-editor-scrollbar::-webkit-scrollbar-thumb {\n    background: #c1c1c1 !important;\n    border-radius: 10px !important;\n    border: 2px solid #f1f1f1 !important;\n  }\n  \n  .step-editor-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: #a8a8a8 !important;\n  }\n  \n  .step-editor-scrollbar::-webkit-scrollbar-corner {\n    background: #f1f1f1 !important;\n  }\n  \n  .step-editor-scrollbar {\n    scrollbar-width: auto !important;\n    scrollbar-color: #c1c1c1 #f1f1f1 !important;\n  }\n  \n  /*  */\n  div.step-editor-scrollbar::-webkit-scrollbar {\n    width: 20px !important;\n    height: 20px !important;\n  }\n  \n  div.step-editor-scrollbar::-webkit-scrollbar-track {\n    background: #f1f1f1 !important;\n    border-radius: 10px !important;\n    margin: 2px !important;\n  }\n  \n  div.step-editor-scrollbar::-webkit-scrollbar-thumb {\n    background: #c1c1c1 !important;\n    border-radius: 10px !important;\n    border: 2px solid #f1f1f1 !important;\n  }\n",e.id="step-editor-scrollbar-styles",document.head.appendChild(e),()=>{const e=document.getElementById("step-editor-scrollbar-styles");e&&document.head.removeChild(e)}},[]);const C=(e,t,r)=>{n(e,{[t]:r})},E=e=>{x(t=>m(f({},t),{[e]:!t[e]}))},N=(r,i)=>T(e,null,function*(){var s,o;if(i)if(i.size>10485760)alert(` "${i.name}" 10MB`);else{h(e=>m(f({},e),{[r]:!0}));try{console.log(" :",{stepId:r,fileName:i.name,fileSize:i.size});const a=t.find(e=>e.id===r);if(a&&a.images){const e=(null!=(s=a.images)?s:[]).find(e=>e.fileName===i.name||e.fileName===i.name.replace(/\.[^/.]+$/,""));if(e){if(!window.confirm(` "${i.name}" \n`))return void h(e=>m(f({},e),{[r]:!1}));const t=a.images.filter(t=>t.fileName!==e.fileName);n(r,{images:t})}}const c=new FormData;c.append("image",i),c.append("stepId",r),u&&c.append("flowId",u);const{buildApiUrl:d}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),p=d("/emergency-flow/upload-image");console.log(" URL:",p);const v=yield fetch(p,{method:"POST",body:c});if(!v.ok){const e=yield v.json().catch(()=>({}));throw new Error(e.error||"")}const g=yield v.json();if(!g.success||!g.imageUrl)throw new Error("URL");const y={url:g.imageUrl,fileName:g.imageFileName||g.fileName};g.isDuplicate&&console.log(" :",g.fileName);const b=t.find(e=>e.id===r);if(b){const e=null!=(o=b.images)?o:[];if(!(e.length<3))throw new Error("3");{const t=[...e,y];console.log(" UI:",{stepId:r,currentImagesCount:e.length,newImagesCount:t.length,newImage:y}),n(r,{images:t}),l&&setTimeout(()=>{l()},100);const i=g.isDuplicate?` "${g.fileName}" `:"";console.log(" :",i)}}}catch(a){console.error(" :",a),alert(`: ${a instanceof Error?a.message:"Unknown error"}`)}finally{h(e=>m(f({},e),{[r]:!1}))}}}),P=e=>{e.preventDefault(),e.stopPropagation()},R=r=>{var i,l,c,u,d,h;return b[r.id]?Lt.jsxs("div",{className:"space-y-4",style:{minHeight:"0px"},children:[Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsx("div",{className:"flex items-center space-x-2",children:Lt.jsx("span",{className:"font-medium text-sm text-gray-600",children:""})}),Lt.jsx("div",{className:"flex items-center space-x-2",children:Lt.jsx(Rg,{variant:"ghost",size:"sm",onClick:()=>E(r.id),children:Lt.jsx(Vg,{className:"h-4 w-4"})})})]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:`title-${r.id}`,className:"text-base-2x",children:""}),Lt.jsx(ML,{id:`title-${r.id}`,value:r.title,onChange:e=>C(r.id,"title",e.target.value),placeholder:"",className:"text-base-2x h-12"})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:`description-${r.id}`,className:"text-base-2x",children:""}),Lt.jsx(ML,{id:`description-${r.id}`,value:r.description,onChange:e=>C(r.id,"description",e.target.value),placeholder:"",className:"text-base-2x h-12"})]})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:`message-${r.id}`,className:"text-base-2x",children:""}),Lt.jsx(Fz,{id:`message-${r.id}`,value:r.message,onChange:e=>C(r.id,"message",e.target.value),placeholder:"",rows:3,className:"text-base-2x min-h-24"})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{className:"text-base-2x",children:"3"}),Lt.jsx("p",{className:"text-base-2x text-muted-foreground mt-2",children:": JPG, PNG, GIF"}),Lt.jsxs("div",{className:"mt-2 p-4 border-2 border-dashed rounded-lg",onDragOver:P,onDrop:e=>((e,t)=>{t.preventDefault(),t.stopPropagation();const n=Array.from(t.dataTransfer.files).find(e=>e.type.startsWith("image/"));n?(console.log(" &:",{stepId:e,fileName:n.name}),N(e,n)):console.warn(" ")})(r.id,e),children:[Lt.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[(null!=(i=r.images)?i:[]).filter(e=>e&&e.url&&""!==e.url.trim()).map((i,s)=>{var o;return Lt.jsxs("div",{className:"relative group aspect-video",children:[(()=>{var e;const t=Cg(i.url);return console.log(" StepEditor:",{stepId:r.id,imageIndex:s,originalUrl:i.url,convertedUrl:t,fileName:i.fileName}),Lt.jsx("img",{src:t,alt:i.fileName,className:"w-full h-full object-cover rounded-lg border shadow-sm",crossOrigin:(null==(e=i.url)?void 0:e.startsWith("data:"))?void 0:"anonymous",onError:e=>{console.error(" StepEditor:",{originalUrl:i.url,convertedUrl:t,fileName:i.fileName,stepId:r.id,imageIndex:s,timestamp:(new Date).toISOString()}),e.currentTarget.style.display="none"},onLoad:()=>{console.log(" StepEditor:",{originalUrl:i.url,convertedUrl:t,fileName:i.fileName,stepId:r.id,imageIndex:s,timestamp:(new Date).toISOString()}),y(e=>m(f({},e),{[i.url]:!1}))}},`${r.id}-${s}-${i.fileName}`)})(),g[i.url]&&Lt.jsx("div",{className:"absolute inset-0 bg-red-500 bg-opacity-50 flex items-center justify-center rounded-lg",children:Lt.jsxs("div",{className:"text-center text-white p-2",children:[Lt.jsx(Ky,{className:"h-8 w-8 mx-auto"}),Lt.jsx("p",{className:"text-xs font-bold mt-1",children:""}),Lt.jsx("p",{className:"text-xs mt-1",children:i.fileName})]})}),Lt.jsx("div",{className:"absolute top-1 right-1 flex gap-1",children:Lt.jsx(Rg,{type:"button",variant:"destructive",size:"sm",onClick:()=>{return i=r.id,o=s,T(e,null,function*(){console.log(" :",{stepId:i,imageIndex:o});const r=t.find(e=>e.id===i);if(r){const t=[...r.images||[]];if(o>=0&&o<t.length){const r=t[o];if(window.confirm(` "${r.fileName}" \n`))try{const{buildApiUrl:s}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),a=s(`/emergency-flow/image/${r.fileName}`);console.log(" URL:",a);const l=yield fetch(a,{method:"DELETE"});if(!l.ok){const e=yield l.json().catch(()=>({}));throw new Error(e.error||"")}t.splice(o,1),n(i,{images:t}),console.log(" :",r.fileName),alert(` "${r.fileName}" `)}catch(s){console.error(" :",s),alert(`: ${s instanceof Error?s.message:""}`)}}}});var i,o},className:"h-7 w-7 p-0 rounded-full opacity-80 group-hover:opacity-100 transition-opacity",title:"",children:Lt.jsx(Ky,{className:"h-4 w-4"})})}),Lt.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate rounded-b-lg",children:i.fileName}),(null!=(o=r.images)?o:[]).filter(e=>e.fileName===i.fileName).length>1&&Lt.jsx("div",{className:"absolute top-1 left-1",children:Lt.jsx("div",{className:"bg-yellow-500 text-white text-xs px-1 py-0.5 rounded",children:""})})]},s)}),(!r.images||(null!=(l=r.images)?l:[]).filter(e=>e&&e.url&&""!==e.url.trim()).length<3)&&Lt.jsxs("div",{className:"flex items-center justify-center aspect-video border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{var e;return null==(e=v.current[r.id])?void 0:e.click()},children:[Lt.jsxs("div",{className:"text-center",children:[p[r.id]?Lt.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 mx-auto"}):Lt.jsx(Fy,{className:"mx-auto h-8 w-8 text-gray-400"}),Lt.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-600",children:p[r.id]?"...":""}),Lt.jsxs("p",{className:"text-xs text-gray-500",children:[(null!=(c=r.images)?c:[]).filter(e=>e&&e.url&&""!==e.url.trim()).length," / 3"]}),Lt.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"&"})]}),Lt.jsx("input",{ref:e=>v.current[r.id]=e,type:"file",accept:"image/*",onChange:e=>((e,t)=>{var n;const r=null==(n=t.target.files)?void 0:n[0];r&&N(e,r)})(r.id,e),className:"hidden"})]})]}),r.images&&r.images.length>0&&Lt.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded text-base-2x text-blue-700",children:[Lt.jsx("p",{className:"font-medium",children:":"}),Lt.jsxs("ul",{className:"mt-2 space-y-2",children:[Lt.jsx("li",{children:" "}),Lt.jsx("li",{children:" "}),Lt.jsx("li",{children:" 3"}),Lt.jsx("li",{children:" "})]})]})]})]}),"decision"===r.type&&Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsx(PL,{children:""}),Lt.jsxs("div",{className:"text-sm text-gray-500",children:[": ",(null==(u=r.conditions)?void 0:u.length)||0,"/4"]})]}),Lt.jsxs("div",{className:"space-y-2",children:[null==(d=r.conditions)?void 0:d.map((e,n)=>Lt.jsxs("div",{className:"flex items-center space-x-2 p-2 border rounded",children:[Lt.jsxs("div",{className:"flex-1",children:[Lt.jsx(ML,{value:e.label,onChange:e=>a(r.id,n,"label",e.target.value),placeholder:"",className:"mb-2"}),Lt.jsxs(XH,{value:e.nextId,onValueChange:e=>a(r.id,n,"nextId",e),children:[Lt.jsx(tV,{children:Lt.jsx(eV,{placeholder:""})}),Lt.jsx(iV,{children:t.filter(e=>e.id!==r.id).map(e=>Lt.jsx(sV,{value:e.id,children:e.title||` ${e.id}`},e.id))})]})]}),Lt.jsx(Rg,{type:"button",variant:"outline",size:"sm",onClick:()=>o(r.id,n),children:Lt.jsx(My,{className:"h-4 w-4"})})]},n)),(!r.conditions||(null!=(h=r.conditions)?h:[]).length<4)&&Lt.jsxs(Rg,{type:"button",variant:"outline",size:"sm",onClick:()=>s(r.id),className:"w-full",children:[Lt.jsx(wy,{className:"h-4 w-4 mr-2"}),""]})]})]})]}):Lt.jsxs("div",{className:"flex items-center justify-between p-2",children:[Lt.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[Lt.jsxs("div",{className:"flex items-center space-x-2",children:[Lt.jsx("span",{className:"font-medium",children:r.title||` ${r.id}`}),Lt.jsxs("span",{className:"text-xs text-gray-500",children:["(",r.type,")"]})]}),r.description&&Lt.jsx("span",{className:"text-xs text-gray-600 truncate max-w-32",children:r.description}),r.images&&r.images.length>0&&Lt.jsxs("div",{className:"flex items-center space-x-1",children:[Lt.jsx(uy,{className:"w-3 h-3 text-blue-500"}),Lt.jsxs("span",{className:"text-xs text-blue-600",children:[r.images.length,""]})]}),"decision"===r.type&&r.conditions&&r.conditions.length>0&&Lt.jsx("div",{className:"flex items-center space-x-1",children:Lt.jsxs("span",{className:"text-xs text-orange-600 bg-orange-100 px-1 rounded",children:[r.conditions.length,""]})})]}),Lt.jsx(Rg,{variant:"ghost",size:"sm",onClick:()=>E(r.id),children:Lt.jsx(Wg,{className:"h-4 w-4"})})]})},I=e=>d?Lt.jsx("div",{className:"flex justify-center my-2",children:Lt.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 rounded-lg p-2 border",children:[Lt.jsxs(Rg,{size:"sm",variant:"outline",onClick:()=>d(e,"step"),className:"h-6 px-2 text-xs",children:[Lt.jsx(wy,{className:"w-3 h-3 mr-1"}),""]}),Lt.jsxs(Rg,{size:"sm",variant:"outline",onClick:()=>d(e,"decision"),className:"h-6 px-2 text-xs",children:[Lt.jsx(wy,{className:"w-3 h-3 mr-1"}),""]})]})}):null;return Lt.jsxs("div",{className:"h-full flex flex-col",children:[Lt.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded mb-4 flex-shrink-0",children:[Lt.jsx("p",{className:"text-yellow-800 font-medium",children:"StepEditor :"}),Lt.jsxs("p",{className:"text-yellow-700 text-sm",children:["steps.length: ",t.length]}),Lt.jsxs("p",{className:"text-yellow-700 text-sm",children:["steps: ",t.map(e=>`${e.id}:${e.title}`).join(", ")]}),Lt.jsxs("p",{className:"text-yellow-700 text-sm",children:["expandedSteps: ",Object.keys(b).length,""]})]}),Lt.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border mb-4 flex-shrink-0",children:[Lt.jsxs("div",{className:"flex items-center space-x-2",children:[Lt.jsx("span",{className:"text-sm font-medium text-blue-700",children:""}),Lt.jsxs("span",{className:"text-xs text-blue-600",children:["(",t.length,")"]})]}),Lt.jsxs("div",{className:"flex items-center space-x-2",children:[Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:()=>{const e=t.reduce((e,t)=>(e[t.id]=!0,e),{});x(e)},className:"h-7 px-2 text-xs",children:""}),Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:()=>x({}),className:"h-7 px-2 text-xs",children:""})]})]}),Lt.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 flex-shrink-0",children:[Lt.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),Lt.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((e,t)=>Lt.jsxs("div",{className:"px-3 py-1 rounded-full text-xs cursor-pointer transition-colors "+(b[e.id]?"bg-blue-500 text-white":"bg-white text-gray-600 border border-gray-300 hover:bg-gray-100"),onClick:()=>E(e.id),children:[t+1,". ",e.title||` ${t+1}`]},e.id))})]}),Lt.jsx("div",{className:"flex-1 overflow-y-auto step-editor-scrollbar",style:{minHeight:"0px",flex:"1 1 auto",display:"flex",flexDirection:"column"},"data-updated":"2024-01-XX",children:Lt.jsx(MQ,{onDragEnd:e=>{if(!e.destination)return;const n=Array.from(t),[i]=n.splice(e.source.index,1);n.splice(e.destination.index,0,i),r(n)},children:Lt.jsx(xX,{droppableId:"steps",children:e=>Lt.jsxs("div",m(f({},e.droppableProps),{ref:e.innerRef,className:"space-y-4 pb-4",style:{flex:"1 1 auto"},children:[0===t.length?Lt.jsxs("div",{className:"p-8 text-center bg-red-50 border border-red-200 rounded",children:[Lt.jsx("p",{className:"text-red-800 font-medium",children:" "}),Lt.jsx("p",{className:"text-red-700 text-sm",children:"steps"})]}):t.map((e,n)=>Lt.jsxs("div",{style:{minHeight:"0px"},children:[Lt.jsx(vX,{draggableId:e.id,index:n,children:(t,n)=>Lt.jsx("div",m(f({ref:t.innerRef},t.draggableProps),{className:"relative",style:{minHeight:"0px"},children:Lt.jsxs(gL,{className:"transition-shadow duration-200 border-4 border-blue-500 "+(n.isDragging?"shadow-lg":""),style:{minHeight:"0px"},children:[Lt.jsx("div",m(f({},t.dragHandleProps),{className:"absolute top-1/2 -left-8 -translate-y-1/2 p-2 cursor-grab text-gray-400 hover:text-gray-600",children:Lt.jsx(ay,{})})),Lt.jsx(wL,{className:"p-4 md:p-6",style:{minHeight:"0px"},children:R(e)}),Lt.jsx("div",{className:"absolute top-2 right-2 flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:Lt.jsxs(Rg,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>i(e.id),children:[Lt.jsx(My,{className:"h-4 w-4 mr-2"}),""]})})]})}))},e.id),n<t.length-1&&I(n)]},e.id)),e.placeholder]}))})})}),l&&c&&Lt.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t bg-white mt-4 flex-shrink-0",children:[Lt.jsx(Rg,{variant:"outline",onClick:c,children:""}),Lt.jsx(Rg,{onClick:l,children:""})]})]})},SX=({flowData:t,currentTab:n,onSave:r,onTabChange:i,selectedFilePath:s})=>{var o;const[a,l]=Pt.useState((null==t?void 0:t.title)||""),[c,u]=Pt.useState((null==t?void 0:t.description)||""),[d,p]=Pt.useState([]),[h,g]=Pt.useState((null==t?void 0:t.title)||""),[y,b]=Pt.useState((null==t?void 0:t.description)||""),[x,w]=Pt.useState([]),[S,C]=Pt.useState(!1),[E,N]=Pt.useState(!1),P=Pt.useRef(null),R=Pt.useRef(d);Pt.useEffect(()=>{R.current=d},[d]);const I=Pt.useRef(t);Pt.useEffect(()=>{I.current=t},[t]),Pt.useEffect(()=>{var e,r,i;console.log(" EmergencyFlowEditor useEffect :",{flowDataId:(null==t?void 0:t.id)||"null",flowDataTitle:(null==t?void 0:t.title)||"null",isInitialized:E,currentTab:n,selectedFilePath:s});const o=!P.current||P.current.id!==(null==t?void 0:t.id)||JSON.stringify(P.current)!==JSON.stringify(t);if(console.log(" flowData:",{hasPreviousData:!!P.current,previousId:null==(e=P.current)?void 0:e.id,currentId:null==t?void 0:t.id,idsMatch:(null==(r=P.current)?void 0:r.id)===(null==t?void 0:t.id),dataChanged:JSON.stringify(P.current)!==JSON.stringify(t),flowDataChanged:o}),!o&&E)return void console.log(" flowData");if(!t)return console.log(" flowDatanull - "),l(""),u(""),p([]),w([]),g(""),b(""),N(!0),void(P.current=t);if(console.log(" /:",t.id||"ID"),console.log(" flowData:",{id:t.id,title:t.title,description:t.description,hasSteps:!!t.steps,stepsType:typeof t.steps,stepsLength:(null==(i=t.steps)?void 0:i.length)||0,stepsIsArray:Array.isArray(t.steps),stepsContent:t.steps}),l(t.title||""),u(t.description||""),g(t.title||""),b(t.description||""),!t.steps||!Array.isArray(t.steps)||0===t.steps.length)return console.warn(" flowData.steps:",t.steps),console.log(" flowData:",JSON.stringify(t,null,2)),console.log(" flowData:",Object.keys(t)),p([]),w([]),N(!0),void(P.current=t);console.log(" :",{totalSteps:t.steps.length,stepDetails:t.steps.map((e,t)=>({index:t,id:e.id,title:e.title,type:e.type}))});const a=t.steps.map((e,n)=>{var r;try{console.log(`[${n+1}/${t.steps.length}] [${e.id}]:`,{step:e,hasImages:!!e.images,imagesLength:(null==(r=e.images)?void 0:r.length)||0,hasImageUrl:!!e.imageUrl,hasImageFileName:!!e.imageFileName,stepKeys:Object.keys(e)});let i=[];if(e.images&&Array.isArray(e.images)&&e.images.length>0)console.log(` [${e.id}] 'images' :`,e.images),i=e.images.map(t=>{var n,r,i,s,o;if(!t.url||""===t.url.trim())return console.log(" URL:",t),null;const a=(null==(n=t.url)?void 0:n.startsWith("http://"))||(null==(r=t.url)?void 0:r.startsWith("https://"))||(null==(i=t.url)?void 0:i.startsWith("data:"))?t.url:Sg(t.url);return console.log(" EmergencyFlowEditor URL:",{stepId:e.id,originalUrl:t.url,convertedUrl:a,fileName:t.fileName,isAlreadyConverted:(null==(s=t.url)?void 0:s.startsWith("http://"))||(null==(o=t.url)?void 0:o.startsWith("https://"))}),{url:a,fileName:t.fileName}}).filter(e=>null!==e);else if(e.imageUrl&&e.imageFileName){console.log(` [${e.id}]:`,{imageUrl:e.imageUrl,imageFileName:e.imageFileName});const t=Sg(e.imageUrl);console.log(" EmergencyFlowEditor URL:",{stepId:e.id,originalUrl:e.imageUrl,convertedUrl:t,fileName:e.imageFileName}),i=[{url:t,fileName:e.imageFileName}]}else if(e.imageUrl){console.log(` [${e.id}]imageUrl:`,{imageUrl:e.imageUrl});const t=e.imageUrl.split("/").pop()||"unknown.jpg",n=Sg(e.imageUrl);console.log(" EmergencyFlowEditor imageUrlURL:",{stepId:e.id,originalUrl:e.imageUrl,convertedUrl:n,fileName:t}),i=[{url:n,fileName:t}]}else console.log(` [${e.id}]`),i=[];i&&0!==i.length||(i=[]),console.log(` [${e.id}]:`,{processedImages:i,processedCount:i.length});const s=e,{imageUrl:o,imageFileName:a,options:l}=s,c=v(s,["imageUrl","imageFileName","options"]),u=m(f({},c),{images:i});return console.log(` [${e.id}]:`,u),u}catch(i){return console.error(` [${e.id}]:`,i),{id:e.id||`step_${n}`,title:e.title||` ${n+1}`,description:e.description||"",message:e.message||"",type:e.type||"step",images:[],options:e.options||[],conditions:e.conditions||[]}}});console.log(" :",{totalSteps:a.length,stepsWithImages:a.filter(e=>e.images&&e.images.length>0).length,totalImages:a.reduce((e,t)=>{var n;return e+((null==(n=t.images)?void 0:n.length)||0)},0),stepDetails:a.map(e=>({id:e.id,title:e.title,type:e.type}))}),console.log(" setSteps:",{initialStepsLength:a.length}),p(a),g(t.title||""),b(t.description||""),w(JSON.parse(JSON.stringify(a))),N(!0),P.current=t,console.log(" "),setTimeout(()=>{console.log(" :",{stepsLength:d.length,initialStepsLength:a.length,isInitialized:E})},100)},[t,s,E]),Pt.useEffect(()=>{if(!E)return void console.log(" ");const e=a!==h,t=c!==y,n=JSON.stringify(d)!==JSON.stringify(x),r=e||t||n;r&&console.log(" :",{titleChanged:e,descriptionChanged:t,stepsChanged:n}),C(r)},[a,c,d,h,y,x,E]);const k=Pt.useCallback((e,t)=>{const n=R.current,r={id:`step_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"step"===e?"":"",description:"",message:"",type:e,images:[],options:[],conditions:[]};let i;i=void 0!==t?[...n.slice(0,t),r,...n.slice(t)]:[...n,r],console.log(" :",{type:e,index:t,newStepId:r.id,totalSteps:i.length}),p(i)},[]),j=Pt.useCallback((e,t)=>{const n=R.current.findIndex(t=>t.id===e);-1!==n?k(t,n+1):console.error(" :",e)},[k]),_=Pt.useCallback((e,t)=>{var n,r;const i=R.current,s=i.findIndex(t=>t.id===e);if(-1===s)return void console.error(" :",e);const o=[...i];o[s]=f(f({},o[s]),t),console.log(" :",{stepId:e,updatedStep:t,stepIndex:s,isImageUpdate:"images"in t,imageCount:(null==(n=t.images)?void 0:n.length)||0,previousImageCount:(null==(r=i[s].images)?void 0:r.length)||0}),p(o),"images"in t&&console.log("  - UI:",{stepId:e,newImages:t.images,stepTitle:o[s].title})},[]),A=Pt.useCallback(e=>{console.log(" :",{oldLength:R.current.length,newLength:e.length,newOrder:e.map(e=>({id:e.id,title:e.title}))}),p(e)},[]),O=Pt.useCallback(e=>{const t=R.current,n=t.filter(t=>t.id!==e);console.log(" :",{stepId:e,oldLength:t.length,newLength:n.length}),p(n)},[]),D=Pt.useCallback(e=>{const t=R.current,n=t.findIndex(t=>t.id===e);if(-1===n)return void console.error(" :",e);const r=t[n],i={label:"",nextId:""},s=m(f({},r),{conditions:[...r.conditions||[],i]}),o=[...t];o[n]=s,console.log(" :",{stepId:e,newCondition:i}),p(o)},[]),M=Pt.useCallback((e,t)=>{const n=R.current,r=n.findIndex(t=>t.id===e);if(-1===r)return void console.error(" :",e);const i=n[r],s=(i.conditions||[]).filter((e,n)=>n!==t),o=m(f({},i),{conditions:s}),a=[...n];a[r]=o,console.log(" :",{stepId:e,conditionIndex:t}),p(a)},[]),L=Pt.useCallback((e,t,n)=>{const r=R.current,i=r.findIndex(t=>t.id===e);if(-1===i)return void console.error(" :",e);const s=r[i],o=[...s.conditions||[]];o[t]=f(f({},o[t]),n);const a=m(f({},s),{conditions:o}),l=[...r];l[i]=a,console.log(" :",{stepId:e,conditionIndex:t,updatedCondition:n}),p(l)},[]);Pt.useEffect(()=>{if(S&&E){console.log(" `steps`");const e=setTimeout(()=>{z()},3e3);return()=>{console.log(" "),clearTimeout(e)}}},[d,S,E]);const z=Pt.useCallback(()=>T(e,null,function*(){var e,n,r,i,s,o,l,u;const d=R.current;if(!S||!t)return void console.log("  ( or )");console.log(" ...");const p=d.map(e=>{var t,n,r;console.log(" EmergencyFlowEditor :",{stepId:e.id,stepTitle:e.title,originalImages:e.images,hasImages:!!e.images,imagesLength:(null==(t=e.images)?void 0:t.length)||0});const i=(null==(n=e.images)?void 0:n.map(e=>(console.log(" EmergencyFlowEditor :",{originalImg:e,url:e.url,fileName:e.fileName,urlValid:e.url&&""!==e.url.trim(),fileNameValid:e.fileName&&""!==e.fileName.trim()}),e.url&&""!==e.url.trim()?{url:e.url,fileName:e.fileName&&""!==e.fileName.trim()?e.fileName:e.url.split("/").pop()||""}:null)).filter(e=>null!==e))||[];i&&i.length>0?console.log(" EmergencyFlowEditor :",{stepId:e.id,stepTitle:e.title,imagesCount:i.length,images:i}):console.log(" EmergencyFlowEditor :",{stepId:e.id,stepTitle:e.title,originalImages:e.images,processedImages:i});const s=e,{imageUrl:o,imageFileName:a,options:l}=s,c=v(s,["imageUrl","imageFileName","options"]),u=m(f({},c),{images:i&&i.length>0?i:[]});return console.log(" EmergencyFlowEditor :",{stepId:u.id,stepTitle:u.title,finalImages:u.images,hasFinalImages:!!u.images,finalImagesLength:(null==(r=u.images)?void 0:r.length)||0}),u}),h=t,{slides:g}=h,y=v(h,["slides"]),b=m(f({},y),{title:a,description:c,steps:p,updatedAt:(new Date).toISOString()}),x=f({filePath:`knowledge-base/troubleshooting/${t.id}.json`},b);console.log(" [AutoSave] :",{id:x.id,title:x.title,stepsCount:(null==(e=x.steps)?void 0:e.length)||0,stepsWithImages:(null==(n=x.steps)?void 0:n.filter(e=>e.images&&e.images.length>0).length)||0,allStepsImages:(null==(r=x.steps)?void 0:r.map(e=>{var t,n;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(n=e.images)?void 0:n.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}}))||[]});try{const e=yield XV(b,{validateImages:!0,logDetails:!0});e.success?(console.log(" EmergencyFlowEditor :",{flowId:(null==(i=e.data)?void 0:i.id)||b.id,title:(null==(s=e.data)?void 0:s.title)||b.title,stepsCount:(null==(l=null==(o=e.data)?void 0:o.steps)?void 0:l.length)||b.steps.length}),console.log("EmergencyFlowEditor "),C(!1),w((null==(u=e.data)?void 0:u.steps)||b.steps)):(console.error(" EmergencyFlowEditor :",e.error),alert(`: ${e.error}`))}catch(E){console.error(" EmergencyFlowEditor :",E)}}),[t,a,c,S]);Pt.useCallback(e=>{l(e),C(!0)},[]),Pt.useCallback(e=>{u(e),C(!0)},[]);const F=(...n)=>T(e,[...n],function*(e=d){try{console.log(" :",{flowId:null==t?void 0:t.id,title:a,description:c,stepsCount:e.length,hasChanges:S});const n={id:null==t?void 0:t.id,title:a,description:c,triggerKeywords:(null==t?void 0:t.triggerKeywords)||[],steps:e,updatedAt:(new Date).toISOString()};console.log(" :",{id:n.id,title:n.title,stepsCount:n.steps.length,stepsWithImages:n.steps.filter(e=>e.images&&e.images.length>0).length,allStepsImages:n.steps.map(e=>{var t,n;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(n=e.images)?void 0:n.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}})}),r(n)}catch(n){console.error(" :",n)}}),B=()=>{console.log(" "),l(h),u(y),p(x),C(!1),console.log(" ")};return console.log(" EmergencyFlowEditor :",{flowDataId:null==t?void 0:t.id,flowDataTitle:null==t?void 0:t.title,hasFlowData:!!t,stepsLength:d.length,isInitialized:E,currentTab:n,hasChanges:S,title:a,description:c,selectedFilePath:s}),"slides"===n?Lt.jsxs("div",{className:"h-full flex flex-col",children:[Lt.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded mb-4",children:[Lt.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),Lt.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[Lt.jsxs("p",{children:["flowData.id: ",(null==t?void 0:t.id)||""]}),Lt.jsxs("p",{children:["flowData.title: ",(null==t?void 0:t.title)||""]}),Lt.jsxs("p",{children:["flowData.steps: ",(null==(o=null==t?void 0:t.steps)?void 0:o.length)||0]}),Lt.jsxs("p",{children:["steps:"," ",JSON.stringify(d.map(e=>({id:e.id,title:e.title,type:e.type})))]}),Lt.jsxs("p",{children:["isInitialized: ",E.toString()]}),Lt.jsxs("p",{children:["currentTab: ",n]}),Lt.jsxs("p",{children:["hasChanges: ",S.toString()]}),Lt.jsxs("p",{children:["selectedFilePath: ",s||""]})]})]}),Lt.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Lt.jsx("h2",{className:"text-2xl font-bold",children:""}),Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsxs(Rg,{onClick:B,variant:"outline",size:"sm",children:[Lt.jsx(Ky,{className:"w-4 h-4 mr-2"}),""]}),Lt.jsx(Rg,{onClick:()=>F(),disabled:!S,size:"sm",children:""})]})]}),Lt.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:0===d.length?Lt.jsxs("div",{className:"text-center py-8",children:[Lt.jsx("p",{className:"text-gray-500 mb-4",children:""}),Lt.jsxs("div",{className:"flex justify-center gap-4",children:[Lt.jsxs(Rg,{size:"sm",variant:"outline",onClick:()=>k("step"),className:"h-10 px-4",children:[Lt.jsx(wy,{className:"w-4 h-4 mr-2"}),""]}),Lt.jsxs(Rg,{size:"sm",variant:"outline",onClick:()=>k("decision"),className:"h-10 px-4",children:[Lt.jsx(wy,{className:"w-4 h-4 mr-2"}),""]})]})]}):Lt.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[Lt.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded mb-4",children:[Lt.jsx("p",{className:"text-blue-800 font-medium",children:"StepEditor :"}),Lt.jsxs("p",{className:"text-blue-700 text-sm",children:["steps.length: ",d.length]}),Lt.jsxs("p",{className:"text-blue-700 text-sm",children:["flowId: ",null==t?void 0:t.id]}),Lt.jsxs("p",{className:"text-blue-700 text-sm",children:["steps: ",d.map(e=>e.title).join(", ")]})]}),Lt.jsx("div",{className:"flex-1 min-h-0",children:Lt.jsx(wX,{steps:d,onStepUpdate:_,onStepsReorder:A,onStepDelete:O,onConditionAdd:D,onConditionDelete:M,onConditionEdit:L,flowId:null==t?void 0:t.id,onAddStepBetween:j})})]})}),Lt.jsxs("div",{className:"flex justify-center gap-4 mt-4 p-6 bg-gray-50 rounded-lg border",children:[Lt.jsxs(Rg,{size:"sm",variant:"outline",onClick:()=>k("step"),className:"h-12 px-6 text-base-2x",children:[Lt.jsx(wy,{className:"w-6 h-6 mr-2"}),""]}),Lt.jsxs(Rg,{size:"sm",variant:"outline",onClick:()=>k("decision"),className:"h-12 px-6 text-base-2x",children:[Lt.jsx(wy,{className:"w-6 h-6 mr-2"}),""]})]}),S&&Lt.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg mt-4",children:Lt.jsx("p",{className:"text-base-2x text-yellow-800",children:" "})})]}):Lt.jsxs("div",{className:"space-y-6",children:[Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"title",className:"text-base-2x",children:""}),Lt.jsx(ML,{id:"title",value:a,onChange:e=>l(e.target.value),placeholder:"",className:"text-base-2x h-12"})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"description",className:"text-base-2x",children:""}),Lt.jsx(Fz,{id:"description",value:c,onChange:e=>u(e.target.value),placeholder:"",rows:3,className:"text-base-2x min-h-24"})]}),S&&Lt.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:Lt.jsx("p",{className:"text-base-2x text-yellow-800",children:" "})}),Lt.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[Lt.jsx(Rg,{variant:"outline",onClick:B,disabled:!S,className:"text-base-2x h-12 px-6",children:""}),Lt.jsx(Rg,{onClick:()=>F(),disabled:!S,className:"text-base-2x h-12 px-6",children:""})]})]})},CX=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function EX(e,t,n){const r=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const n=t.split(".").pop().toLowerCase(),r=CX.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:i}=e,s="string"==typeof t?t:"string"==typeof i&&i.length>0?i:`./${e.name}`;return"string"!=typeof r.path&&TX(r,"path",s),TX(r,"relativePath",s),r}function TX(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const NX=[".DS_Store","Thumbs.db"];function PX(e){return"object"==typeof e&&null!==e}function RX(e){return e.filter(e=>-1===NX.indexOf(e.name))}function IX(e){if(null===e)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function kX(e){if("function"!=typeof e.webkitGetAsEntry)return _X(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?OX(t):_X(e,t)}function jX(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?jX(t):[t]],[])}function _X(e,t){return Ub(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error(`${e} is not a File`);if(void 0!==t){const e=yield t.getFile();return e.handle=t,EX(e)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return EX(r,null!==(n=null==t?void 0:t.fullPath)&&void 0!==n?n:void 0)})}function AX(e){return Ub(this,void 0,void 0,function*(){return e.isDirectory?OX(e):function(e){return Ub(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(n=>{const r=EX(n,e.fullPath);t(r)},e=>{n(e)})})})}(e)})}function OX(e){const t=e.createReader();return new Promise((e,n)=>{const r=[];!function i(){t.readEntries(t=>Ub(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(AX));r.push(e),i()}else try{const t=yield Promise.all(r);e(t)}catch(yie){n(yie)}}),e=>{n(e)})}()})}var DX=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(0===n.length)return!0;var r=e.name||"",i=(e.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?s===t.replace(/\/.*$/,""):i===t})}return!0};function MX(e){return function(e){if(Array.isArray(e))return WX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||UX(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LX(Object(n),!0).forEach(function(t){FX(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function FX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(yie){a=!0,i=yie}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||UX(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UX(e,t){if(e){if("string"==typeof e)return WX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WX(e,t):void 0}}function WX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $X=DX,HX=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:"file-invalid-type",message:"File type must be ".concat(t)}},VX=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},qX=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},GX={code:"too-many-files",message:"Too many files"};function KX(e,t){var n="application/x-moz-file"===e.type||$X(e,t);return[n,n?null:HX(t)]}function JX(e,t,n){if(YX(e.size))if(YX(t)&&YX(n)){if(e.size>n)return[!1,VX(n)];if(e.size<t)return[!1,qX(t)]}else{if(YX(t)&&e.size<t)return[!1,qX(t)];if(YX(n)&&e.size>n)return[!1,VX(n)]}return[!0,null]}function YX(e){return null!=e}function ZX(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function QX(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function XX(e){e.preventDefault()}function e0(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some(function(t){return!ZX(e)&&t&&t.apply(void 0,[e].concat(r)),ZX(e)})}}function t0(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function n0(e){return/^.*\.[\w]+$/.test(e)}var r0=["children"],i0=["open"],s0=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],o0=["refKey","onChange","onClick"];function a0(e){return function(e){if(Array.isArray(e))return u0(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c0(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(yie){a=!0,i=yie}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||c0(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c0(e,t){if(e){if("string"==typeof e)return u0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u0(e,t):void 0}}function u0(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d0(Object(n),!0).forEach(function(t){h0(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f0(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var m0=Pt.forwardRef(function(e,t){var n=e.children,r=y0(f0(e,r0)),i=r.open,s=f0(r,i0);return Pt.useImperativeHandle(t,function(){return{open:i}},[i]),Rt.createElement(Pt.Fragment,null,n(p0(p0({},s),{},{open:i})))});m0.displayName="Dropzone";var v0={disabled:!1,getFilesFromEvent:function(e){return Ub(this,void 0,void 0,function*(){return PX(e)&&PX(e.dataTransfer)?function(e,t){return Ub(this,void 0,void 0,function*(){if(e.items){const n=IX(e.items).filter(e=>"file"===e.kind);return"drop"!==t?n:RX(jX(yield Promise.all(n.map(kX))))}return RX(IX(e.files).map(e=>EX(e)))})}(e.dataTransfer,e.type):function(e){return PX(e)&&PX(e.target)}(e)?function(e){return IX(e.target.files).map(e=>EX(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return Ub(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>EX(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};m0.defaultProps=v0,m0.propTypes={children:bq.func,accept:bq.objectOf(bq.arrayOf(bq.string)),multiple:bq.bool,preventDropOnDocument:bq.bool,noClick:bq.bool,noKeyboard:bq.bool,noDrag:bq.bool,noDragEventsBubbling:bq.bool,minSize:bq.number,maxSize:bq.number,maxFiles:bq.number,disabled:bq.bool,getFilesFromEvent:bq.func,onFileDialogCancel:bq.func,onFileDialogOpen:bq.func,useFsAccessApi:bq.bool,autoFocus:bq.bool,onDragEnter:bq.func,onDragLeave:bq.func,onDragOver:bq.func,onDrop:bq.func,onDropAccepted:bq.func,onDropRejected:bq.func,onError:bq.func,validator:bq.func};var g0={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function y0(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p0(p0({},v0),e),n=t.accept,r=t.disabled,i=t.getFilesFromEvent,s=t.maxSize,o=t.minSize,a=t.multiple,l=t.maxFiles,c=t.onDragEnter,u=t.onDragLeave,d=t.onDragOver,p=t.onDrop,h=t.onDropAccepted,f=t.onDropRejected,m=t.onFileDialogCancel,v=t.onFileDialogOpen,g=t.useFsAccessApi,y=t.autoFocus,b=t.preventDropOnDocument,x=t.noClick,w=t.noKeyboard,S=t.noDrag,C=t.noDragEventsBubbling,E=t.onError,T=t.validator,N=Pt.useMemo(function(){return function(e){if(YX(e))return Object.entries(e).reduce(function(e,t){var n=BX(t,2),r=n[0],i=n[1];return[].concat(MX(e),[r],MX(i))},[]).filter(function(e){return t0(e)||n0(e)}).join(",")}(n)},[n]),P=Pt.useMemo(function(){return function(e){return YX(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=BX(e,2),n=t[0],r=t[1],i=!0;return t0(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),Array.isArray(r)&&r.every(n0)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(e,t){var n=BX(t,2),r=n[0],i=n[1];return zX(zX({},e),{},FX({},r,i))},{})}]:e}(n)},[n]),R=Pt.useMemo(function(){return"function"==typeof v?v:x0},[v]),I=Pt.useMemo(function(){return"function"==typeof m?m:x0},[m]),k=Pt.useRef(null),j=Pt.useRef(null),_=l0(Pt.useReducer(b0,g0),2),A=_[0],O=_[1],D=A.isFocused,M=A.isFileDialogActive,L=Pt.useRef("undefined"!=typeof window&&window.isSecureContext&&g&&"showOpenFilePicker"in window),z=function(){!L.current&&M&&setTimeout(function(){j.current&&(j.current.files.length||(O({type:"closeDialog"}),I()))},300)};Pt.useEffect(function(){return window.addEventListener("focus",z,!1),function(){window.removeEventListener("focus",z,!1)}},[j,M,I,L]);var F=Pt.useRef([]),B=function(e){k.current&&k.current.contains(e.target)||(e.preventDefault(),F.current=[])};Pt.useEffect(function(){return b&&(document.addEventListener("dragover",XX,!1),document.addEventListener("drop",B,!1)),function(){b&&(document.removeEventListener("dragover",XX),document.removeEventListener("drop",B))}},[k,b]),Pt.useEffect(function(){return!r&&y&&k.current&&k.current.focus(),function(){}},[k,y,r]);var U=Pt.useCallback(function(e){E?E(e):console.error(e)},[E]),W=Pt.useCallback(function(e){e.preventDefault(),e.persist(),te(e),F.current=[].concat(a0(F.current),[e.target]),QX(e)&&Promise.resolve(i(e)).then(function(t){if(!ZX(e)||C){var n=t.length,r=n>0&&function(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,s=e.multiple,o=e.maxFiles,a=e.validator;return!(!s&&t.length>1||s&&o>=1&&t.length>o)&&t.every(function(e){var t=BX(KX(e,n),1)[0],s=BX(JX(e,r,i),1)[0],o=a?a(e):null;return t&&s&&!o})}({files:t,accept:N,minSize:o,maxSize:s,multiple:a,maxFiles:l,validator:T});O({isDragAccept:r,isDragReject:n>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e)}}).catch(function(e){return U(e)})},[i,c,U,C,N,o,s,a,l,T]),$=Pt.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=QX(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&d&&d(e),!1},[d,C]),H=Pt.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=F.current.filter(function(e){return k.current&&k.current.contains(e)}),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),F.current=t,t.length>0||(O({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),QX(e)&&u&&u(e))},[k,u,C]),V=Pt.useCallback(function(e,t){var n=[],r=[];e.forEach(function(e){var t=l0(KX(e,N),2),i=t[0],a=t[1],l=l0(JX(e,o,s),2),c=l[0],u=l[1],d=T?T(e):null;if(i&&c&&!d)n.push(e);else{var p=[a,u];d&&(p=p.concat(d)),r.push({file:e,errors:p.filter(function(e){return e})})}}),(!a&&n.length>1||a&&l>=1&&n.length>l)&&(n.forEach(function(e){r.push({file:e,errors:[GX]})}),n.splice(0)),O({acceptedFiles:n,fileRejections:r,isDragReject:r.length>0,type:"setFiles"}),p&&p(n,r,t),r.length>0&&f&&f(r,t),n.length>0&&h&&h(n,t)},[O,a,N,o,s,l,p,h,f,T]),q=Pt.useCallback(function(e){e.preventDefault(),e.persist(),te(e),F.current=[],QX(e)&&Promise.resolve(i(e)).then(function(t){ZX(e)&&!C||V(t,e)}).catch(function(e){return U(e)}),O({type:"reset"})},[i,V,U,C]),G=Pt.useCallback(function(){if(L.current){O({type:"openDialog"}),R();var e={multiple:a,types:P};window.showOpenFilePicker(e).then(function(e){return i(e)}).then(function(e){V(e,null),O({type:"closeDialog"})}).catch(function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(I(e),O({type:"closeDialog"})):function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?(L.current=!1,j.current?(j.current.value=null,j.current.click()):U(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):U(e)})}else j.current&&(O({type:"openDialog"}),R(),j.current.value=null,j.current.click())},[O,R,I,g,V,U,P,a]),K=Pt.useCallback(function(e){k.current&&k.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),G()))},[k,G]),J=Pt.useCallback(function(){O({type:"focus"})},[]),Y=Pt.useCallback(function(){O({type:"blur"})},[]),Z=Pt.useCallback(function(){x||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?setTimeout(G,0):G())},[x,G]),Q=function(e){return r?null:e},X=function(e){return w?null:Q(e)},ee=function(e){return S?null:Q(e)},te=function(e){C&&e.stopPropagation()},ne=Pt.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.role,s=e.onKeyDown,o=e.onFocus,a=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,d=e.onDragLeave,p=e.onDrop,h=f0(e,s0);return p0(p0(h0({onKeyDown:X(e0(s,K)),onFocus:X(e0(o,J)),onBlur:X(e0(a,Y)),onClick:Q(e0(l,Z)),onDragEnter:ee(e0(c,W)),onDragOver:ee(e0(u,$)),onDragLeave:ee(e0(d,H)),onDrop:ee(e0(p,q)),role:"string"==typeof i&&""!==i?i:"presentation"},n,k),r||w?{}:{tabIndex:0}),h)}},[k,K,J,Y,Z,W,$,H,q,w,S,r]),re=Pt.useCallback(function(e){e.stopPropagation()},[]),ie=Pt.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,i=e.onClick,s=f0(e,o0);return p0(p0({},h0({accept:N,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Q(e0(r,q)),onClick:Q(e0(i,re)),tabIndex:-1},n,j)),s)}},[j,n,a,q,r]);return p0(p0({},A),{},{isFocused:D&&!r,getRootProps:ne,getInputProps:ie,rootRef:k,inputRef:j,open:Q(G)})}function b0(e,t){switch(t.type){case"focus":return p0(p0({},e),{},{isFocused:!0});case"blur":return p0(p0({},e),{},{isFocused:!1});case"openDialog":return p0(p0({},g0),{},{isFileDialogActive:!0});case"closeDialog":return p0(p0({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return p0(p0({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return p0(p0({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return p0({},g0);default:return e}}function x0(){}function w0({onFlowGenerated:e}){const[t,n]=Pt.useState(null),[r,i]=Pt.useState(""),[s,o]=Pt.useState(!1),{toast:a}=nv(),l=Pt.useCallback(e=>{e.length>0&&n(e[0])},[]),{getRootProps:c,getInputProps:u,isDragActive:d}=y0({onDrop:l,accept:{"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"application/pdf":[".pdf"],"text/plain":[".txt"]},maxFiles:1}),p=()=>T(this,null,function*(){if(t||r){o(!0);try{let n;if(t){const e=new FormData;e.append("file",t);const{buildApiUrl:r}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),i=r("/flow-generator/file"),s=yield fetch(i,{method:"POST",body:e,credentials:"include"});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);n=yield s.json(),a({title:"",description:""})}else{const{buildApiUrl:e}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),t=e("/emergency-flow/generate"),i=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:r}),credentials:"include"});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);n=yield i.json(),n.success&&n.flowData?n=n.flowData:n.success&&n.response&&(n={id:`flow_${Date.now()}`,title:r,description:`${r}`,triggerKeywords:[r],steps:[{id:"step1",title:"",description:`${r}`,message:`${r}`,type:"step",options:[]},{id:"step2",title:"",description:n.response,message:n.response,type:"step",options:[]}],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}),a({title:"",description:""})}e(n)}catch(n){console.error(":",n),a({title:"",description:n.message||"",variant:"destructive"})}finally{o(!1)}}else a({title:"",description:"",variant:"destructive"})});return Lt.jsxs(gL,{children:[Lt.jsxs(yL,{children:[Lt.jsxs(bL,{className:"flex items-center gap-2",children:[Lt.jsx(Qg,{className:"w-6 h-6 text-blue-600"}),"AI"]}),Lt.jsx(xL,{children:""})]}),Lt.jsxs(wL,{className:"space-y-6",children:[Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{htmlFor:"keywords",className:"text-lg font-semibold",children:""}),Lt.jsx("p",{className:"text-sm text-gray-500",children:""}),Lt.jsx("textarea",{id:"keywords",placeholder:": , , ",value:r,onChange:e=>i(e.target.value),disabled:!!t,rows:3,className:"w-full px-3 py-2 border-2 border-blue-800 rounded-md text-base resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-800",style:{fontSize:"120%"}}),Lt.jsx("div",{className:"flex justify-center mt-3",children:Lt.jsx(Rg,{onClick:p,disabled:s||!r.trim()||!!t,size:"lg",className:"px-6 py-3 text-base font-medium",children:s?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(hy,{className:"mr-2 h-4 w-4 animate-spin"}),"..."]}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Ny,{className:"mr-2 h-4 w-4"}),""]})})})]}),Lt.jsxs("div",{className:"relative flex items-center justify-center",children:[Lt.jsx("div",{className:"flex-grow border-t border-gray-300"}),Lt.jsx("span",{className:"flex-shrink mx-4 text-gray-500 font-semibold",children:""}),Lt.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),Lt.jsxs("div",m(f({},c()),{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors "+(d?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[Lt.jsx("input",f({},u())),Lt.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-gray-500",children:[Lt.jsx(sy,{className:"w-10 h-10"}),d?Lt.jsx("p",{children:""}):Lt.jsx("p",{children:""}),Lt.jsx("p",{className:"text-xs",children:"(.pptx, .pdf, .txt )"})]})]})),t&&Lt.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-gray-50",children:[Lt.jsx(ry,{className:"w-5 h-5 text-gray-600"}),Lt.jsx("span",{className:"font-medium",children:t.name}),Lt.jsx(Rg,{variant:"ghost",size:"sm",onClick:()=>n(null),className:"ml-auto",children:"X"})]}),Lt.jsx("div",{className:"flex justify-center",children:Lt.jsx(Rg,{onClick:p,disabled:s||!!r.trim(),size:"sm",className:"px-4 py-2 text-sm font-medium",style:{fontSize:"80%"},children:s?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(hy,{className:"mr-2 h-3 w-3 animate-spin"}),"..."]}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Ny,{className:"mr-2 h-3 w-3"}),""]})})})]})]})}var S0=Symbol("radix.slottable");function C0(e){const t=({children:e})=>Lt.jsx(Lt.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=S0,t}var E0="AlertDialog",[T0]=Zy(E0,[Bx]),N0=Bx(),P0=e=>{const t=e,{__scopeAlertDialog:n}=t,r=v(t,["__scopeAlertDialog"]),i=N0(n);return Lt.jsx(gw,m(f(f({},i),r),{modal:!0}))};P0.displayName=E0,Pt.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,i=v(n,["__scopeAlertDialog"]),s=N0(r);return Lt.jsx(yw,m(f(f({},s),i),{ref:t}))}).displayName="AlertDialogTrigger";var R0=e=>{const t=e,{__scopeAlertDialog:n}=t,r=v(t,["__scopeAlertDialog"]),i=N0(n);return Lt.jsx(bw,f(f({},i),r))};R0.displayName="AlertDialogPortal";var I0=Pt.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,i=v(n,["__scopeAlertDialog"]),s=N0(r);return Lt.jsx(xw,m(f(f({},s),i),{ref:t}))});I0.displayName="AlertDialogOverlay";var k0="AlertDialogContent",[j0,_0]=T0(k0),A0=C0("AlertDialogContent"),O0=Pt.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r,children:i}=n,s=v(n,["__scopeAlertDialog","children"]),o=N0(r),a=Pt.useRef(null),l=mv(t,a),c=Pt.useRef(null);return Lt.jsx(hw,{contentName:k0,titleName:D0,docsSlug:"alert-dialog",children:Lt.jsx(j0,{scope:r,cancelRef:c,children:Lt.jsxs(ww,m(f(f({role:"alertdialog"},o),s),{ref:l,onOpenAutoFocus:Yy(s.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=c.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[Lt.jsx(A0,{children:i}),Lt.jsx(W0,{contentRef:a})]}))})})});O0.displayName=k0;var D0="AlertDialogTitle",M0=Pt.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,i=v(n,["__scopeAlertDialog"]),s=N0(r);return Lt.jsx(Sw,m(f(f({},s),i),{ref:t}))});M0.displayName=D0;var L0="AlertDialogDescription",z0=Pt.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,i=v(n,["__scopeAlertDialog"]),s=N0(r);return Lt.jsx(Cw,m(f(f({},s),i),{ref:t}))});z0.displayName=L0;var F0=Pt.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,i=v(n,["__scopeAlertDialog"]),s=N0(r);return Lt.jsx(Ew,m(f(f({},s),i),{ref:t}))});F0.displayName="AlertDialogAction";var B0="AlertDialogCancel",U0=Pt.forwardRef((e,t)=>{const n=e,{__scopeAlertDialog:r}=n,i=v(n,["__scopeAlertDialog"]),{cancelRef:s}=_0(B0,r),o=N0(r),a=mv(t,s);return Lt.jsx(Ew,m(f(f({},o),i),{ref:a}))});U0.displayName=B0;var W0=({contentRef:e})=>{const t=`\`${k0}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${k0}\` by passing a \`${L0}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${k0}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return Pt.useEffect(()=>{var n;document.getElementById(null==(n=e.current)?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},$0=I0,H0=O0,V0=F0,q0=U0,G0=M0,K0=z0;const J0=P0,Y0=R0,Z0=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx($0,m(f({className:Ng("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},i),{ref:t}))});Z0.displayName=$0.displayName;const Q0=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsxs(Y0,{children:[Lt.jsx(Z0,{}),Lt.jsx(H0,f({ref:t,className:Ng("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r)},i))]})});Q0.displayName=H0.displayName;const X0=e=>{var t=e,{className:n}=t,r=v(t,["className"]);return Lt.jsx("div",f({className:Ng("flex flex-col space-y-2 text-center sm:text-left",n)},r))};X0.displayName="AlertDialogHeader";const e1=e=>{var t=e,{className:n}=t,r=v(t,["className"]);return Lt.jsx("div",f({className:Ng("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n)},r))};e1.displayName="AlertDialogFooter";const t1=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(G0,f({ref:t,className:Ng("text-lg font-semibold",r)},i))});t1.displayName=G0.displayName;const n1=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(K0,f({ref:t,className:Ng("text-sm text-muted-foreground",r)},i))});n1.displayName=K0.displayName;const r1=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(V0,f({ref:t,className:Ng(Pg(),r)},i))});r1.displayName=V0.displayName;const i1=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(q0,f({ref:t,className:Ng(Pg({variant:"outline"}),"mt-2 sm:mt-0",r)},i))});i1.displayName=q0.displayName;const s1=({onEdit:t,onPreview:n})=>{const{toast:r}=nv(),{user:i}=Km(),[s,o]=Pt.useState([]),[a,l]=Pt.useState(!1),[c,u]=Pt.useState(!1),[d,p]=Pt.useState(null);Pt.useEffect(()=>{console.log(" FlowListManager "),console.log(" :",{user:!!i,userId:null==i?void 0:i.id}),h();const e=()=>{console.log(" "),h()},t=()=>{console.log(" "),h()};return window.addEventListener("flowGenerated",e),window.addEventListener("flowDeleted",t),()=>{window.removeEventListener("flowGenerated",e),window.removeEventListener("flowDeleted",t)}},[i]);const h=()=>T(e,null,function*(){if(console.log(" fetchFlowList"),!i)return console.log(" "),void r({title:"",description:"",variant:"destructive"});try{l(!0),console.log(" ...");const e=UV("/emergency-flow/list");console.log(" API URL:",e);const t=Date.now(),n=`${e}?t=${t}`;console.log(" URL:",n);const r=yield fetch(n,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(console.log(" :",r.status,r.statusText),!r.ok){const e=yield r.text();throw console.error(" API:",e),new Error(`API: ${r.status} ${r.statusText} - ${e}`)}const i=yield r.json();console.log(" :",i);let s=[];if(i.success&&i.data)console.log(" data"),s=i.data.map(e=>{var t,n,r,i,s;return{id:(null==(t=e.content)?void 0:t.id)||e.id,title:(null==(n=e.content)?void 0:n.title)||e.title||e.name||"",description:(null==(r=e.content)?void 0:r.description)||e.description,fileName:e.filename||e.fileName,createdAt:(null==(i=e.content)?void 0:i.createdAt)||e.createdAt||(new Date).toISOString(),updatedAt:(null==(s=e.content)?void 0:s.updatedAt)||e.updatedAt,steps:e.steps}});else if(i.success&&i.flows)console.log(" flows"),s=i.flows.map(e=>{var t,n,r,i,s;return{id:(null==(t=e.content)?void 0:t.id)||e.id,title:(null==(n=e.content)?void 0:n.title)||e.title||e.name||"",description:(null==(r=e.content)?void 0:r.description)||e.description,fileName:e.filename||e.fileName,createdAt:(null==(i=e.content)?void 0:i.createdAt)||e.createdAt||(new Date).toISOString(),updatedAt:(null==(s=e.content)?void 0:s.updatedAt)||e.updatedAt,steps:e.steps}});else{if(!Array.isArray(i))throw console.error(" :",i),new Error("");console.log(" "),s=i}console.log(" flows:",s),console.log(" flows:",{length:s.length,isArray:Array.isArray(s),firstItem:s[0]}),s=s.map(e=>m(f({},e),{createdAt:e.createdAt||e.updatedAt||e.savedAt||(new Date).toISOString()})),console.log(" :",s.length+""),o(s)}catch(e){console.error(" fetchFlowList:",e),r({title:"",description:e instanceof Error?e.message:"",variant:"destructive"}),o([])}finally{l(!1),console.log(" fetchFlowList")}}),v=e=>{try{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleString("ja-JP")}catch(t){return""}};return Lt.jsxs("div",{className:"space-y-6",children:[Lt.jsxs(gL,{children:[Lt.jsxs(yL,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Lt.jsx("div",{children:Lt.jsx(bL,{className:"text-xl",children:""})}),Lt.jsx("div",{className:"flex items-center gap-2",children:Lt.jsx(Rg,{variant:"outline",onClick:()=>{console.log(" "),h()},disabled:a,children:a?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(hy,{className:"mr-2 h-4 w-4 animate-spin"}),"..."]}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Cy,{className:"mr-2 h-4 w-4"}),""]})})})]}),Lt.jsx(wL,{children:a?Lt.jsx("div",{className:"flex items-center justify-center h-64",children:Lt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):Lt.jsx("div",{className:"overflow-auto",children:Lt.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-sm",children:[Lt.jsx("thead",{children:Lt.jsxs("tr",{className:"bg-gray-100",children:[Lt.jsx("th",{className:"border border-gray-300 p-2 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 p-2 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 p-2 text-left text-sm font-medium",children:""})]})}),Lt.jsx("tbody",{children:0===s.length?Lt.jsx("tr",{children:Lt.jsx("td",{colSpan:3,className:"border border-gray-300 p-4 text-center text-gray-500",children:""})}):s.map(e=>{var r;return Lt.jsxs("tr",{className:"hover:bg-gray-50",children:[Lt.jsx("td",{className:"border border-gray-300 p-2",children:Lt.jsx("div",{className:"break-words leading-tight text-sm",children:e.title||(null==(r=e.description)?void 0:r.substring(0,30))+"..."||e.fileName||e.id||""})}),Lt.jsx("td",{className:"border border-gray-300 p-2 text-xs text-gray-500",children:v(e.createdAt)}),Lt.jsx("td",{className:"border border-gray-300 p-2",children:Lt.jsxs("div",{className:"flex gap-1",children:[Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:()=>n(e.id),title:"",className:"h-7 px-2 text-xs",children:Lt.jsx(ty,{className:"h-3 w-3"})}),Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:()=>t(e.id),title:"",className:"h-7 px-2 text-xs",children:Lt.jsx(_y,{className:"h-3 w-3"})}),Lt.jsx(Rg,{variant:"destructive",size:"sm",onClick:()=>{return t=e.id,p(t),void u(!0);var t},title:"",className:"h-7 px-2 text-xs",children:Lt.jsx(My,{className:"h-3 w-3"})})]})})]},e.id)})})]})})})]}),Lt.jsx(J0,{open:c,onOpenChange:u,children:Lt.jsxs(Q0,{children:[Lt.jsxs(X0,{children:[Lt.jsx(t1,{children:""}),Lt.jsx(n1,{children:""})]}),Lt.jsxs(e1,{children:[Lt.jsx(i1,{children:""}),Lt.jsx(r1,{onClick:()=>T(e,null,function*(){if(d)try{console.log(" :",d);const t=yield fetch(`/api/emergency-flow/${d}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(console.log(" :",{status:t.status,statusText:t.statusText,ok:t.ok}),!t.ok){let n=`: ${t.status} - ${t.statusText}`;try{const e=yield t.json();console.log(" :",e),n=e.error||e.details||n}catch(e){console.warn(" :",e)}throw new Error(n)}const n=yield t.json();console.log(" :",n),r({title:"",description:""}),o(e=>{const t=e.filter(e=>e.id!==d);return console.log(" : "+d+" (: "+t.length+")"),t}),console.log(" ..."),yield h()}catch(t){console.error(" :",t);const e=t instanceof Error?t.message:"";r({title:"",description:e,variant:"destructive"})}finally{u(!1),p(null)}}),className:"bg-red-600 hover:bg-red-700",children:""})]})]})})]})};var o1="ScrollArea",[a1]=Zy(o1),[l1,c1]=a1(o1),u1=Pt.forwardRef((e,t)=>{const n=e,{__scopeScrollArea:r,type:i="hover",dir:s,scrollHideDelay:o=600}=n,a=v(n,["__scopeScrollArea","type","dir","scrollHideDelay"]),[l,c]=Pt.useState(null),[u,d]=Pt.useState(null),[p,h]=Pt.useState(null),[g,y]=Pt.useState(null),[b,x]=Pt.useState(null),[w,S]=Pt.useState(0),[C,E]=Pt.useState(0),[T,N]=Pt.useState(!1),[P,R]=Pt.useState(!1),I=mv(t,e=>c(e)),k=pF(s);return Lt.jsx(l1,{scope:r,type:i,dir:k,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:d,content:p,onContentChange:h,scrollbarX:g,onScrollbarXChange:y,scrollbarXEnabled:T,onScrollbarXEnabledChange:N,scrollbarY:b,onScrollbarYChange:x,scrollbarYEnabled:P,onScrollbarYEnabledChange:R,onCornerWidthChange:S,onCornerHeightChange:E,children:Lt.jsx(cb.div,m(f({dir:k},a),{ref:I,style:f({position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":C+"px"},e.style)}))})});u1.displayName=o1;var d1="ScrollAreaViewport",p1=Pt.forwardRef((e,t)=>{const n=e,{__scopeScrollArea:r,children:i,nonce:s}=n,o=v(n,["__scopeScrollArea","children","nonce"]),a=c1(d1,r),l=mv(t,Pt.useRef(null),a.onViewportChange);return Lt.jsxs(Lt.Fragment,{children:[Lt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),Lt.jsx(cb.div,m(f({"data-radix-scroll-area-viewport":""},o),{ref:l,style:f({overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden"},e.style),children:Lt.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:i})}))]})});p1.displayName=d1;var h1="ScrollAreaScrollbar",f1=Pt.forwardRef((e,t)=>{const n=e,{forceMount:r}=n,i=v(n,["forceMount"]),s=c1(h1,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,l="horizontal"===e.orientation;return Pt.useEffect(()=>(l?o(!0):a(!0),()=>{l?o(!1):a(!1)}),[l,o,a]),"hover"===s.type?Lt.jsx(m1,m(f({},i),{ref:t,forceMount:r})):"scroll"===s.type?Lt.jsx(v1,m(f({},i),{ref:t,forceMount:r})):"auto"===s.type?Lt.jsx(g1,m(f({},i),{ref:t,forceMount:r})):"always"===s.type?Lt.jsx(y1,m(f({},i),{ref:t})):null});f1.displayName=h1;var m1=Pt.forwardRef((e,t)=>{const n=e,{forceMount:r}=n,i=v(n,["forceMount"]),s=c1(h1,e.__scopeScrollArea),[o,a]=Pt.useState(!1);return Pt.useEffect(()=>{const e=s.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),a(!0)},r=()=>{t=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}},[s.scrollArea,s.scrollHideDelay]),Lt.jsx(Ob,{present:r||o,children:Lt.jsx(g1,m(f({"data-state":o?"visible":"hidden"},i),{ref:t}))})}),v1=Pt.forwardRef((e,t)=>{const n=e,{forceMount:r}=n,i=v(n,["forceMount"]),s=c1(h1,e.__scopeScrollArea),o="horizontal"===e.orientation,a=L1(()=>c("SCROLL_END"),100),[l,c]=(u="hidden",d={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},Pt.useReducer((e,t)=>{const n=d[e][t];return null!=n?n:e},u));var u,d;return Pt.useEffect(()=>{if("idle"===l){const e=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(e)}},[l,s.scrollHideDelay,c]),Pt.useEffect(()=>{const e=s.viewport,t=o?"scrollLeft":"scrollTop";if(e){let n=e[t];const r=()=>{const r=e[t];n!==r&&(c("SCROLL"),a()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[s.viewport,o,c,a]),Lt.jsx(Ob,{present:r||"hidden"!==l,children:Lt.jsx(y1,m(f({"data-state":"hidden"===l?"hidden":"visible"},i),{ref:t,onPointerEnter:Yy(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Yy(e.onPointerLeave,()=>c("POINTER_LEAVE"))}))})}),g1=Pt.forwardRef((e,t)=>{const n=c1(h1,e.__scopeScrollArea),r=e,{forceMount:i}=r,s=v(r,["forceMount"]),[o,a]=Pt.useState(!1),l="horizontal"===e.orientation,c=L1(()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?e:t)}},10);return z1(n.viewport,c),z1(n.content,c),Lt.jsx(Ob,{present:i||o,children:Lt.jsx(y1,m(f({"data-state":o?"visible":"hidden"},s),{ref:t}))})}),y1=Pt.forwardRef((e,t)=>{const n=e,{orientation:r="vertical"}=n,i=v(n,["orientation"]),s=c1(h1,e.__scopeScrollArea),o=Pt.useRef(null),a=Pt.useRef(0),[l,c]=Pt.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=j1(l.viewport,l.content),d=m(f({},i),{sizes:l,onSizesChange:c,hasThumb:Boolean(u>0&&u<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:e=>a.current=e});function p(e,t){return function(e,t,n,r="ltr"){const i=_1(n),s=i/2,o=t||s,a=i-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d="ltr"===r?[0,u]:[-1*u,0];return O1([l,c],d)(e)}(e,a.current,l,t)}return"horizontal"===r?Lt.jsx(b1,m(f({},d),{ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const e=A1(s.viewport.scrollLeft,l,s.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollLeft=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollLeft=p(e,s.dir))}})):"vertical"===r?Lt.jsx(x1,m(f({},d),{ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const e=A1(s.viewport.scrollTop,l);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollTop=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollTop=p(e))}})):null}),b1=Pt.forwardRef((e,t)=>{const n=e,{sizes:r,onSizesChange:i}=n,s=v(n,["sizes","onSizesChange"]),o=c1(h1,e.__scopeScrollArea),[a,l]=Pt.useState(),c=Pt.useRef(null),u=mv(t,c,o.onScrollbarXChange);return Pt.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),Lt.jsx(C1,m(f({"data-orientation":"horizontal"},s),{ref:u,sizes:r,style:f({bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":_1(r)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(o.viewport){const r=o.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),D1(r,n)&&t.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&i({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:k1(a.paddingLeft),paddingEnd:k1(a.paddingRight)}})}}))}),x1=Pt.forwardRef((e,t)=>{const n=e,{sizes:r,onSizesChange:i}=n,s=v(n,["sizes","onSizesChange"]),o=c1(h1,e.__scopeScrollArea),[a,l]=Pt.useState(),c=Pt.useRef(null),u=mv(t,c,o.onScrollbarYChange);return Pt.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),Lt.jsx(C1,m(f({"data-orientation":"vertical"},s),{ref:u,sizes:r,style:f({top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":_1(r)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(o.viewport){const r=o.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),D1(r,n)&&t.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&i({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:k1(a.paddingTop),paddingEnd:k1(a.paddingBottom)}})}}))}),[w1,S1]=a1(h1),C1=Pt.forwardRef((e,t)=>{const n=e,{__scopeScrollArea:r,sizes:i,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:p}=n,h=v(n,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),g=c1(h1,r),[y,b]=Pt.useState(null),x=mv(t,e=>b(e)),w=Pt.useRef(null),S=Pt.useRef(""),C=g.viewport,E=i.content-i.viewport,T=db(d),N=db(c),P=L1(p,10);function R(e){if(w.current){const t=e.clientX-w.current.left,n=e.clientY-w.current.top;u({x:t,y:n})}}return Pt.useEffect(()=>{const e=e=>{const t=e.target;(null==y?void 0:y.contains(t))&&T(e,E)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[C,y,E,T]),Pt.useEffect(N,[i,N]),z1(y,P),z1(g.content,P),Lt.jsx(w1,{scope:r,scrollbar:y,hasThumb:s,onThumbChange:db(o),onThumbPointerUp:db(a),onThumbPositionChange:N,onThumbPointerDown:db(l),children:Lt.jsx(cb.div,m(f({},h),{ref:x,style:f({position:"absolute"},h.style),onPointerDown:Yy(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),w.current=y.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),R(e))}),onPointerMove:Yy(e.onPointerMove,R),onPointerUp:Yy(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),w.current=null})}))})}),E1="ScrollAreaThumb",T1=Pt.forwardRef((e,t)=>{const n=e,{forceMount:r}=n,i=v(n,["forceMount"]),s=S1(E1,e.__scopeScrollArea);return Lt.jsx(Ob,{present:r||s.hasThumb,children:Lt.jsx(N1,f({ref:t},i))})}),N1=Pt.forwardRef((e,t)=>{const n=e,{__scopeScrollArea:r,style:i}=n,s=v(n,["__scopeScrollArea","style"]),o=c1(E1,r),a=S1(E1,r),{onThumbPositionChange:l}=a,c=mv(t,e=>a.onThumbChange(e)),u=Pt.useRef(void 0),d=L1(()=>{u.current&&(u.current(),u.current=void 0)},100);return Pt.useEffect(()=>{const e=o.viewport;if(e){const t=()=>{if(d(),!u.current){const t=M1(e,l);u.current=t,l()}};return l(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[o.viewport,d,l]),Lt.jsx(cb.div,m(f({"data-state":a.hasThumb?"visible":"hidden"},s),{ref:c,style:f({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},i),onPointerDownCapture:Yy(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;a.onThumbPointerDown({x:n,y:r})}),onPointerUp:Yy(e.onPointerUp,a.onThumbPointerUp)}))});T1.displayName=E1;var P1="ScrollAreaCorner",R1=Pt.forwardRef((e,t)=>{const n=c1(P1,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?Lt.jsx(I1,m(f({},e),{ref:t})):null});R1.displayName=P1;var I1=Pt.forwardRef((e,t)=>{const n=e,{__scopeScrollArea:r}=n,i=v(n,["__scopeScrollArea"]),s=c1(P1,r),[o,a]=Pt.useState(0),[l,c]=Pt.useState(0),u=Boolean(o&&l);return z1(s.scrollbarX,()=>{var e;const t=(null==(e=s.scrollbarX)?void 0:e.offsetHeight)||0;s.onCornerHeightChange(t),c(t)}),z1(s.scrollbarY,()=>{var e;const t=(null==(e=s.scrollbarY)?void 0:e.offsetWidth)||0;s.onCornerWidthChange(t),a(t)}),u?Lt.jsx(cb.div,m(f({},i),{ref:t,style:f({width:o,height:l,position:"absolute",right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:0},e.style)})):null});function k1(e){return e?parseInt(e,10):0}function j1(e,t){const n=e/t;return isNaN(n)?0:n}function _1(e){const t=j1(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function A1(e,t,n="ltr"){const r=_1(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,l=KW(e,"ltr"===n?[0,o]:[-1*o,0]);return O1([0,o],[0,a])(l)}function O1(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function D1(e,t){return e>0&&e<t}var M1=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function L1(e,t){const n=db(e),r=Pt.useRef(0);return Pt.useEffect(()=>()=>window.clearTimeout(r.current),[]),Pt.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function z1(e,t){const n=db(t);Xy(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,n])}var F1=u1,B1=p1,U1=R1;const W1=Pt.forwardRef((e,t)=>{var n=e,{className:r,children:i}=n,s=v(n,["className","children"]);return Lt.jsxs(F1,m(f({ref:t,className:Ng("relative overflow-hidden",r)},s),{children:[Lt.jsx(B1,{className:"h-full w-full rounded-[inherit]",children:i}),Lt.jsx($1,{}),Lt.jsx(U1,{})]}))});W1.displayName=F1.displayName;const $1=Pt.forwardRef((e,t)=>{var n=e,{className:r,orientation:i="vertical"}=n,s=v(n,["className","orientation"]);return Lt.jsx(f1,m(f({ref:t,orientation:i,className:Ng("flex touch-none select-none transition-colors","vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r)},s),{children:Lt.jsx(T1,{className:"relative flex-1 rounded-full bg-border"})}))});$1.displayName=f1.displayName;const H1=[];for(let p=0;p<256;++p)H1.push((p+256).toString(16).slice(1));let V1;const q1=new Uint8Array(16),G1={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function K1(e,t,n){var r,i,s;if(G1.randomUUID&&!e)return G1.randomUUID();const o=null!=(s=null!=(i=(e=e||{}).random)?i:null==(r=e.rng)?void 0:r.call(e))?s:function(){if(!V1){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");V1=crypto.getRandomValues.bind(crypto)}return V1(q1)}();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=15&o[6]|64,o[8]=63&o[8]|128,function(e,t=0){return(H1[e[t+0]]+H1[e[t+1]]+H1[e[t+2]]+H1[e[t+3]]+"-"+H1[e[t+4]]+H1[e[t+5]]+"-"+H1[e[t+6]]+H1[e[t+7]]+"-"+H1[e[t+8]]+H1[e[t+9]]+"-"+H1[e[t+10]]+H1[e[t+11]]+H1[e[t+12]]+H1[e[t+13]]+H1[e[t+14]]+H1[e[t+15]]).toLowerCase()}(o)}function J1(e){const t=Y1(e),n=Pt.forwardRef((e,n)=>{const r=e,{children:i}=r,s=v(r,["children"]),o=Pt.Children.toArray(i),a=o.find(Q1);if(a){const e=a.props.children,r=o.map(t=>t===a?Pt.Children.count(e)>1?Pt.Children.only(null):Pt.isValidElement(e)?e.props.children:null:t);return Lt.jsx(t,m(f({},s),{ref:n,children:Pt.isValidElement(e)?Pt.cloneElement(e,void 0,r):null}))}return Lt.jsx(t,m(f({},s),{ref:n,children:i}))});return n.displayName=`${e}.Slot`,n}function Y1(e){const t=Pt.forwardRef((e,t)=>{const n=e,{children:r}=n,i=v(n,["children"]);if(Pt.isValidElement(r)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(r),n=function(e,t){const n=f({},t);for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]=f(f({},i),s):"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return f(f({},e),n)}(i,r.props);return r.type!==Pt.Fragment&&(n.ref=t?fv(t,e):e),Pt.cloneElement(r,n)}return Pt.Children.count(r)>1?Pt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Z1=Symbol("radix.slottable");function Q1(e){return Pt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Z1}var X1=["Enter"," "],e2=["ArrowUp","PageDown","End"],t2=["ArrowDown","PageUp","Home",...e2],n2={ltr:[...X1,"ArrowRight"],rtl:[...X1,"ArrowLeft"]},r2={ltr:["ArrowLeft"],rtl:["ArrowRight"]},i2="Menu",[s2,o2,a2]=Lw(i2),[l2,c2]=Zy(i2,[a2,GU,xF]),u2=GU(),d2=xF(),[p2,h2]=l2(i2),[f2,m2]=l2(i2),v2=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=e,a=u2(t),[l,c]=Pt.useState(null),u=Pt.useRef(!1),d=db(s),p=pF(i);return Pt.useEffect(()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),Lt.jsx(cW,m(f({},a),{children:Lt.jsx(p2,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:c,children:Lt.jsx(f2,{scope:t,onClose:Pt.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:p,modal:o,children:r})})}))};v2.displayName=i2;var g2=Pt.forwardRef((e,t)=>{const n=e,{__scopeMenu:r}=n,i=v(n,["__scopeMenu"]),s=u2(r);return Lt.jsx(uW,m(f(f({},s),i),{ref:t}))});g2.displayName="MenuAnchor";var y2="MenuPortal",[b2,x2]=l2(y2,{forceMount:void 0}),w2=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,s=h2(y2,t);return Lt.jsx(b2,{scope:t,forceMount:n,children:Lt.jsx(Ob,{present:n||s.open,children:Lt.jsx(Ab,{asChild:!0,container:i,children:r})})})};w2.displayName=y2;var S2="MenuContent",[C2,E2]=l2(S2),T2=Pt.forwardRef((e,t)=>{const n=x2(S2,e.__scopeMenu),r=e,{forceMount:i=n.forceMount}=r,s=v(r,["forceMount"]),o=h2(S2,e.__scopeMenu),a=m2(S2,e.__scopeMenu);return Lt.jsx(s2.Provider,{scope:e.__scopeMenu,children:Lt.jsx(Ob,{present:i||o.open,children:Lt.jsx(s2.Slot,{scope:e.__scopeMenu,children:a.modal?Lt.jsx(N2,m(f({},s),{ref:t})):Lt.jsx(P2,m(f({},s),{ref:t}))})})})}),N2=Pt.forwardRef((e,t)=>{const n=h2(S2,e.__scopeMenu),r=Pt.useRef(null),i=mv(t,r);return Pt.useEffect(()=>{const e=r.current;if(e)return Ax(e)},[]),Lt.jsx(I2,m(f({},e),{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Yy(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),P2=Pt.forwardRef((e,t)=>{const n=h2(S2,e.__scopeMenu);return Lt.jsx(I2,m(f({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),R2=J1("MenuContent.ScrollLock"),I2=Pt.forwardRef((e,t)=>{const n=e,{__scopeMenu:r,loop:i=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:h,onDismiss:g,disableOutsideScroll:y}=n,b=v(n,["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"]),x=h2(S2,r),w=m2(S2,r),S=u2(r),C=d2(r),E=o2(r),[T,N]=Pt.useState(null),P=Pt.useRef(null),R=mv(t,P,x.onContentChange),I=Pt.useRef(0),k=Pt.useRef(""),j=Pt.useRef(0),_=Pt.useRef(null),A=Pt.useRef("right"),O=Pt.useRef(0),D=y?Nx:Pt.Fragment,M=y?{as:R2,allowPinchZoom:!0}:void 0,L=e=>{var t,n;const r=k.current+e,i=E().filter(e=>!e.disabled),s=document.activeElement,o=null==(t=i.find(e=>e.ref.current===s))?void 0:t.textValue,a=function(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),i=r?t[0]:t,s=n?e.indexOf(n):-1;let o=(a=e,l=Math.max(s,0),a.map((e,t)=>a[(l+t)%a.length]));var a,l;1===i.length&&(o=o.filter(e=>e!==n));const c=o.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}(i.map(e=>e.textValue),r,o),l=null==(n=i.find(e=>e.textValue===a))?void 0:n.ref.current;!function e(t){k.current=t,window.clearTimeout(I.current),""!==t&&(I.current=window.setTimeout(()=>e(""),1e3))}(r),l&&setTimeout(()=>l.focus())};Pt.useEffect(()=>()=>window.clearTimeout(I.current),[]),Lb();const z=Pt.useCallback(e=>{var t,n;return A.current===(null==(t=_.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const e=t[s],a=t[o],l=e.x,c=e.y,u=a.x,d=a.y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(i=!i)}return i}(n,t)}(e,null==(n=_.current)?void 0:n.area)},[]);return Lt.jsx(C2,{scope:r,searchRef:k,onItemEnter:Pt.useCallback(e=>{z(e)&&e.preventDefault()},[z]),onItemLeave:Pt.useCallback(e=>{var t;z(e)||(null==(t=P.current)||t.focus(),N(null))},[z]),onTriggerLeave:Pt.useCallback(e=>{z(e)&&e.preventDefault()},[z]),pointerGraceTimerRef:j,onPointerGraceIntentChange:Pt.useCallback(e=>{_.current=e},[]),children:Lt.jsx(D,m(f({},M),{children:Lt.jsx(Nb,{asChild:!0,trapped:s,onMountAutoFocus:Yy(o,e=>{var t;e.preventDefault(),null==(t=P.current)||t.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:Lt.jsx(gb,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:h,onDismiss:g,children:Lt.jsx(IF,m(f({asChild:!0},C),{dir:w.dir,orientation:"vertical",loop:i,currentTabStopId:T,onCurrentTabStopIdChange:N,onEntryFocus:Yy(c,e=>{w.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:Lt.jsx(dW,m(f(f({role:"menu","aria-orientation":"vertical","data-state":t4(x.open),"data-radix-menu-content":"",dir:w.dir},S),b),{ref:R,style:f({outline:"none"},b.style),onKeyDown:Yy(b.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&L(e.key));const i=P.current;if(e.target!==i)return;if(!t2.includes(e.key))return;e.preventDefault();const s=E().filter(e=>!e.disabled).map(e=>e.ref.current);e2.includes(e.key)&&s.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(s)}),onBlur:Yy(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(I.current),k.current="")}),onPointerMove:Yy(e.onPointerMove,i4(e=>{const t=e.target,n=O.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>O.current?"right":"left";A.current=t,O.current=e.clientX}}))}))}))})})}))})});T2.displayName=S2;var k2=Pt.forwardRef((e,t)=>{const n=e,{__scopeMenu:r}=n,i=v(n,["__scopeMenu"]);return Lt.jsx(cb.div,m(f({role:"group"},i),{ref:t}))});k2.displayName="MenuGroup";var j2=Pt.forwardRef((e,t)=>{const n=e,{__scopeMenu:r}=n,i=v(n,["__scopeMenu"]);return Lt.jsx(cb.div,m(f({},i),{ref:t}))});j2.displayName="MenuLabel";var _2="MenuItem",A2="menu.itemSelect",O2=Pt.forwardRef((e,t)=>{const n=e,{disabled:r=!1,onSelect:i}=n,s=v(n,["disabled","onSelect"]),o=Pt.useRef(null),a=m2(_2,e.__scopeMenu),l=E2(_2,e.__scopeMenu),c=mv(t,o),u=Pt.useRef(!1);return Lt.jsx(D2,m(f({},s),{ref:c,disabled:r,onClick:Yy(e.onClick,()=>{const e=o.current;if(!r&&e){const t=new CustomEvent(A2,{bubbles:!0,cancelable:!0});e.addEventListener(A2,e=>null==i?void 0:i(e),{once:!0}),ub(e,t),t.defaultPrevented?u.current=!1:a.onClose()}}),onPointerDown:t=>{var n;null==(n=e.onPointerDown)||n.call(e,t),u.current=!0},onPointerUp:Yy(e.onPointerUp,e=>{var t;u.current||null==(t=e.currentTarget)||t.click()}),onKeyDown:Yy(e.onKeyDown,e=>{const t=""!==l.searchRef.current;r||t&&" "===e.key||X1.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})}))});O2.displayName=_2;var D2=Pt.forwardRef((e,t)=>{const n=e,{__scopeMenu:r,disabled:i=!1,textValue:s}=n,o=v(n,["__scopeMenu","disabled","textValue"]),a=E2(_2,r),l=d2(r),c=Pt.useRef(null),u=mv(t,c),[d,p]=Pt.useState(!1),[h,g]=Pt.useState("");return Pt.useEffect(()=>{var e;const t=c.current;t&&g((null!=(e=t.textContent)?e:"").trim())},[o.children]),Lt.jsx(s2.ItemSlot,{scope:r,disabled:i,textValue:null!=s?s:h,children:Lt.jsx(kF,m(f({asChild:!0},l),{focusable:!i,children:Lt.jsx(cb.div,m(f({role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0},o),{ref:u,onPointerMove:Yy(e.onPointerMove,i4(e=>{i?a.onItemLeave(e):(a.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Yy(e.onPointerLeave,i4(e=>a.onItemLeave(e))),onFocus:Yy(e.onFocus,()=>p(!0)),onBlur:Yy(e.onBlur,()=>p(!1))}))}))})}),M2=Pt.forwardRef((e,t)=>{const n=e,{checked:r=!1,onCheckedChange:i}=n,s=v(n,["checked","onCheckedChange"]);return Lt.jsx(H2,{scope:e.__scopeMenu,checked:r,children:Lt.jsx(O2,m(f({role:"menuitemcheckbox","aria-checked":n4(r)?"mixed":r},s),{ref:t,"data-state":r4(r),onSelect:Yy(s.onSelect,()=>null==i?void 0:i(!!n4(r)||!r),{checkForDefaultPrevented:!1})}))})});M2.displayName="MenuCheckboxItem";var L2="MenuRadioGroup",[z2,F2]=l2(L2,{value:void 0,onValueChange:()=>{}}),B2=Pt.forwardRef((e,t)=>{const n=e,{value:r,onValueChange:i}=n,s=v(n,["value","onValueChange"]),o=db(i);return Lt.jsx(z2,{scope:e.__scopeMenu,value:r,onValueChange:o,children:Lt.jsx(k2,m(f({},s),{ref:t}))})});B2.displayName=L2;var U2="MenuRadioItem",W2=Pt.forwardRef((e,t)=>{const n=e,{value:r}=n,i=v(n,["value"]),s=F2(U2,e.__scopeMenu),o=r===s.value;return Lt.jsx(H2,{scope:e.__scopeMenu,checked:o,children:Lt.jsx(O2,m(f({role:"menuitemradio","aria-checked":o},i),{ref:t,"data-state":r4(o),onSelect:Yy(i.onSelect,()=>{var e;return null==(e=s.onValueChange)?void 0:e.call(s,r)},{checkForDefaultPrevented:!1})}))})});W2.displayName=U2;var $2="MenuItemIndicator",[H2,V2]=l2($2,{checked:!1}),q2=Pt.forwardRef((e,t)=>{const n=e,{__scopeMenu:r,forceMount:i}=n,s=v(n,["__scopeMenu","forceMount"]),o=V2($2,r);return Lt.jsx(Ob,{present:i||n4(o.checked)||!0===o.checked,children:Lt.jsx(cb.span,m(f({},s),{ref:t,"data-state":r4(o.checked)}))})});q2.displayName=$2;var G2=Pt.forwardRef((e,t)=>{const n=e,{__scopeMenu:r}=n,i=v(n,["__scopeMenu"]);return Lt.jsx(cb.div,m(f({role:"separator","aria-orientation":"horizontal"},i),{ref:t}))});G2.displayName="MenuSeparator";var K2=Pt.forwardRef((e,t)=>{const n=e,{__scopeMenu:r}=n,i=v(n,["__scopeMenu"]),s=u2(r);return Lt.jsx(pW,m(f(f({},s),i),{ref:t}))});K2.displayName="MenuArrow";var[J2,Y2]=l2("MenuSub"),Z2="MenuSubTrigger",Q2=Pt.forwardRef((e,t)=>{const n=h2(Z2,e.__scopeMenu),r=m2(Z2,e.__scopeMenu),i=Y2(Z2,e.__scopeMenu),s=E2(Z2,e.__scopeMenu),o=Pt.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},u=Pt.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return Pt.useEffect(()=>u,[u]),Pt.useEffect(()=>{const e=a.current;return()=>{window.clearTimeout(e),l(null)}},[a,l]),Lt.jsx(g2,m(f({asChild:!0},c),{children:Lt.jsx(D2,m(f({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":t4(n.open)},e),{ref:fv(t,i.onTriggerChange),onClick:t=>{var r;null==(r=e.onClick)||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Yy(e.onPointerMove,i4(t=>{s.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||o.current||(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Yy(e.onPointerLeave,i4(e=>{var t,r;u();const i=null==(t=n.content)?void 0:t.getBoundingClientRect();if(i){const t=null==(r=n.content)?void 0:r.dataset.side,o="right"===t,l=o?-5:5,c=i[o?"left":"right"],u=i[o?"right":"left"];s.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:i.top},{x:u,y:i.top},{x:u,y:i.bottom},{x:c,y:i.bottom}],side:t}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(e),e.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Yy(e.onKeyDown,t=>{var i;const o=""!==s.searchRef.current;e.disabled||o&&" "===t.key||n2[r.dir].includes(t.key)&&(n.onOpenChange(!0),null==(i=n.content)||i.focus(),t.preventDefault())})}))}))});Q2.displayName=Z2;var X2="MenuSubContent",e4=Pt.forwardRef((e,t)=>{const n=x2(S2,e.__scopeMenu),r=e,{forceMount:i=n.forceMount}=r,s=v(r,["forceMount"]),o=h2(S2,e.__scopeMenu),a=m2(S2,e.__scopeMenu),l=Y2(X2,e.__scopeMenu),c=Pt.useRef(null),u=mv(t,c);return Lt.jsx(s2.Provider,{scope:e.__scopeMenu,children:Lt.jsx(Ob,{present:i||o.open,children:Lt.jsx(s2.Slot,{scope:e.__scopeMenu,children:Lt.jsx(I2,m(f({id:l.contentId,"aria-labelledby":l.triggerId},s),{ref:u,align:"start",side:"rtl"===a.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;a.isUsingKeyboardRef.current&&(null==(t=c.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Yy(e.onFocusOutside,e=>{e.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Yy(e.onEscapeKeyDown,e=>{a.onClose(),e.preventDefault()}),onKeyDown:Yy(e.onKeyDown,e=>{var t;const n=e.currentTarget.contains(e.target),r=r2[a.dir].includes(e.key);n&&r&&(o.onOpenChange(!1),null==(t=l.trigger)||t.focus(),e.preventDefault())})}))})})})});function t4(e){return e?"open":"closed"}function n4(e){return"indeterminate"===e}function r4(e){return n4(e)?"indeterminate":e?"checked":"unchecked"}function i4(e){return t=>"mouse"===t.pointerType?e(t):void 0}e4.displayName=X2;var s4=v2,o4=g2,a4=w2,l4=T2,c4=k2,u4=j2,d4=O2,p4=M2,h4=B2,f4=W2,m4=q2,v4=G2,g4=K2,y4=Q2,b4=e4,x4="ContextMenu",[w4]=Zy(x4,[c2]),S4=c2(),[C4,E4]=w4(x4),T4=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:i,modal:s=!0}=e,[o,a]=Pt.useState(!1),l=S4(t),c=db(r),u=Pt.useCallback(e=>{a(e),c(e)},[c]);return Lt.jsx(C4,{scope:t,open:o,onOpenChange:u,modal:s,children:Lt.jsx(s4,m(f({},l),{dir:i,open:o,onOpenChange:u,modal:s,children:n}))})};T4.displayName=x4;var N4="ContextMenuTrigger",P4=Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r,disabled:i=!1}=n,s=v(n,["__scopeContextMenu","disabled"]),o=E4(N4,r),a=S4(r),l=Pt.useRef({x:0,y:0}),c=Pt.useRef({getBoundingClientRect:()=>DOMRect.fromRect(f({width:0,height:0},l.current))}),u=Pt.useRef(0),d=Pt.useCallback(()=>window.clearTimeout(u.current),[]),p=e=>{l.current={x:e.clientX,y:e.clientY},o.onOpenChange(!0)};return Pt.useEffect(()=>d,[d]),Pt.useEffect(()=>{i&&d()},[i,d]),Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(o4,m(f({},a),{virtualRef:c})),Lt.jsx(cb.span,m(f({"data-state":o.open?"open":"closed","data-disabled":i?"":void 0},s),{ref:t,style:f({WebkitTouchCallout:"none"},e.style),onContextMenu:i?e.onContextMenu:Yy(e.onContextMenu,e=>{d(),p(e),e.preventDefault()}),onPointerDown:i?e.onPointerDown:Yy(e.onPointerDown,F4(e=>{d(),u.current=window.setTimeout(()=>p(e),700)})),onPointerMove:i?e.onPointerMove:Yy(e.onPointerMove,F4(d)),onPointerCancel:i?e.onPointerCancel:Yy(e.onPointerCancel,F4(d)),onPointerUp:i?e.onPointerUp:Yy(e.onPointerUp,F4(d))}))]})});P4.displayName=N4;var R4=e=>{const t=e,{__scopeContextMenu:n}=t,r=v(t,["__scopeContextMenu"]),i=S4(n);return Lt.jsx(a4,f(f({},i),r))};R4.displayName="ContextMenuPortal";var I4="ContextMenuContent",k4=Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=E4(I4,r),o=S4(r),a=Pt.useRef(!1);return Lt.jsx(l4,m(f(f({},o),i),{ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{var n;null==(n=e.onCloseAutoFocus)||n.call(e,t),!t.defaultPrevented&&a.current&&t.preventDefault(),a.current=!1},onInteractOutside:t=>{var n;null==(n=e.onInteractOutside)||n.call(e,t),t.defaultPrevented||s.modal||(a.current=!0)},style:f(f({},e.style),{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});k4.displayName=I4,Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(c4,m(f(f({},s),i),{ref:t}))}).displayName="ContextMenuGroup";var j4=Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(u4,m(f(f({},s),i),{ref:t}))});j4.displayName="ContextMenuLabel";var _4=Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(d4,m(f(f({},s),i),{ref:t}))});_4.displayName="ContextMenuItem";var A4=Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(p4,m(f(f({},s),i),{ref:t}))});A4.displayName="ContextMenuCheckboxItem",Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(h4,m(f(f({},s),i),{ref:t}))}).displayName="ContextMenuRadioGroup";var O4=Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(f4,m(f(f({},s),i),{ref:t}))});O4.displayName="ContextMenuRadioItem";var D4=Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(m4,m(f(f({},s),i),{ref:t}))});D4.displayName="ContextMenuItemIndicator";var M4=Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(v4,m(f(f({},s),i),{ref:t}))});M4.displayName="ContextMenuSeparator",Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(g4,m(f(f({},s),i),{ref:t}))}).displayName="ContextMenuArrow";var L4=Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(y4,m(f(f({},s),i),{ref:t}))});L4.displayName="ContextMenuSubTrigger";var z4=Pt.forwardRef((e,t)=>{const n=e,{__scopeContextMenu:r}=n,i=v(n,["__scopeContextMenu"]),s=S4(r);return Lt.jsx(b4,m(f(f({},s),i),{ref:t,style:f(f({},e.style),{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});function F4(e){return t=>"mouse"!==t.pointerType?e(t):void 0}z4.displayName="ContextMenuSubContent";var B4=R4,U4=k4,W4=j4,$4=_4,H4=A4,V4=O4,q4=D4,G4=M4,K4=L4,J4=z4;const Y4=T4,Z4=P4;Pt.forwardRef((e,t)=>{var n=e,{className:r,inset:i,children:s}=n,o=v(n,["className","inset","children"]);return Lt.jsxs(K4,m(f({ref:t,className:Ng("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",i&&"pl-8",r)},o),{children:[s,Lt.jsx(Hg,{className:"ml-auto h-4 w-4"})]}))}).displayName=K4.displayName,Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(J4,f({ref:t,className:Ng("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},i))}).displayName=J4.displayName;const Q4=Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(B4,{children:Lt.jsx(U4,f({ref:t,className:Ng("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},i))})});Q4.displayName=U4.displayName;const X4=Pt.forwardRef((e,t)=>{var n=e,{className:r,inset:i}=n,s=v(n,["className","inset"]);return Lt.jsx($4,f({ref:t,className:Ng("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i&&"pl-8",r)},s))});X4.displayName=$4.displayName,Pt.forwardRef((e,t)=>{var n=e,{className:r,children:i,checked:s}=n,o=v(n,["className","children","checked"]);return Lt.jsxs(H4,m(f({ref:t,className:Ng("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:s},o),{children:[Lt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Lt.jsx(q4,{children:Lt.jsx(Ug,{className:"h-4 w-4"})})}),i]}))}).displayName=H4.displayName,Pt.forwardRef((e,t)=>{var n=e,{className:r,children:i}=n,s=v(n,["className","children"]);return Lt.jsxs(V4,m(f({ref:t,className:Ng("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},s),{children:[Lt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Lt.jsx(q4,{children:Lt.jsx(Jg,{className:"h-2 w-2 fill-current"})})}),i]}))}).displayName=V4.displayName,Pt.forwardRef((e,t)=>{var n=e,{className:r,inset:i}=n,s=v(n,["className","inset"]);return Lt.jsx(W4,f({ref:t,className:Ng("px-2 py-1.5 text-sm font-semibold text-foreground",i&&"pl-8",r)},s))}).displayName=W4.displayName,Pt.forwardRef((e,t)=>{var n=e,{className:r}=n,i=v(n,["className"]);return Lt.jsx(G4,f({ref:t,className:Ng("-mx-1 my-1 h-px bg-border",r)},i))}).displayName=G4.displayName;const e3=({flowId:t,onSave:n,onCancel:r})=>{const{toast:i}=nv(),[s,o]=Pt.useState({id:t||K1(),title:t?"":"",description:"",triggerKeywords:[],steps:[]}),[a,l]=Pt.useState(!1),[c,u]=Pt.useState(null);Pt.useEffect(()=>{t&&d()},[t]);const d=()=>T(e,null,function*(){var n;try{l(!0),console.log(" :",t);const{buildApiUrl:r}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),i=r(`/emergency-flow/detail/${t}`);console.log(" API URL:",i);const s=yield fetch(i,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate, max-age=0",Pragma:"no-cache",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","X-Requested-With":"XMLHttpRequest"}});if(!s.ok){const e=yield s.text();throw console.error(" emergency-flow API :",{status:s.status,statusText:s.statusText,body:e}),new Error(`: ${s.status} - ${e}`)}const a=yield s.json();console.log(" emergency-flow API:",a);const c=a.success&&a.data?a.data:a;if(!c||!c.id)throw new Error("");console.log(" :",{hasId:!!c.id,hasTitle:!!c.title,hasDescription:!!c.description,hasSteps:!!c.steps,stepsType:Array.isArray(c.steps)?"array":typeof c.steps,stepsLength:null==(n=c.steps)?void 0:n.length,dataKeys:Object.keys(c)}),c.steps&&Array.isArray(c.steps)?c.steps=c.steps.map(e=>m(f({},e),{images:e.images||[],conditions:e.conditions||[]})):(console.warn(" steps"),c.steps=[]),console.log(" :",{id:c.id,title:c.title,stepsCount:c.steps.length,stepsWithImages:c.steps.filter(e=>e.images&&e.images.length>0).length}),c.steps.forEach((e,t)=>{e.images&&e.images.length>0&&console.log(` [${t}]:`,{stepId:e.id,stepTitle:e.title,imagesCount:e.images.length,images:e.images.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}})})}),o(c)}catch(r){console.error(" :",r),i({title:"",description:"",variant:"destructive"})}finally{l(!1)}}),p=(e,t)=>{const n=f({id:K1(),type:e,title:""+("step"===e?"":""),description:"",message:"",images:[]},"decision"===e&&{conditions:[{label:"",nextId:""}]});o(e=>{const r=[...e.steps];return void 0!==t?r.splice(t,0,n):r.push(n),m(f({},e),{steps:r})})},h=e=>{o(t=>m(f({},t),{steps:t.steps.filter(t=>t.id!==e)}))},v=(e,t)=>{var n;console.log(" updateStep :",{stepId:e,updates:t,isImageUpdate:"images"in t,imageCount:(null==(n=t.images)?void 0:n.length)||0,currentFlowData:{id:s.id,stepsCount:s.steps.length,stepsWithImages:s.steps.filter(e=>e.images&&e.images.length>0).length}}),o(n=>{var r,i;const s=m(f({},n),{steps:n.steps.map(n=>{var r,i,s,o;if(n.id===e){const a=f(f({},n),t);return console.log(" :",{stepId:e,beforeUpdate:{id:n.id,title:n.title,hasImages:!!n.images,imagesCount:(null==(r=n.images)?void 0:r.length)||0,images:(null==(i=n.images)?void 0:i.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}}))||[]},afterUpdate:{id:a.id,title:a.title,hasImages:!!a.images,imagesCount:(null==(s=a.images)?void 0:s.length)||0,images:(null==(o=a.images)?void 0:o.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}}))||[]}}),a}return n})}),o=s.steps.find(t=>t.id===e);return console.log(" updateStep :",{stepId:e,updatedStep:o?{id:o.id,title:o.title,hasImages:!!o.images,imagesCount:(null==(r=o.images)?void 0:r.length)||0,images:(null==(i=o.images)?void 0:i.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}}))||[]}:null,allStepsImages:s.steps.map(e=>{var t,n;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(n=e.images)?void 0:n.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}}))||[]}})}),s}),console.log(" updateStep :",{stepId:e,updatedFlowData:{id:s.id,stepsCount:s.steps.length,stepsWithImages:s.steps.filter(e=>e.images&&e.images.length>0).length,allStepsImages:s.steps.map(e=>{var t,n;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(n=e.images)?void 0:n.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}}))||[]}})}})},g=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},y=(e,t,n,r)=>{o(i=>m(f({},i),{steps:i.steps.map(i=>{if(i.id===e&&i.conditions){const e=[...i.conditions];return e[t]=m(f({},e[t]),{[n]:r}),m(f({},i),{conditions:e})}return i})}))},b=()=>T(e,null,function*(){var e;console.log(" handleSave ");try{l(!0),console.log(" isLoading  true "),console.log(" :",{id:s.id,title:s.title,stepsCount:s.steps.length});const t=m(f({},s),{triggerKeywords:s.triggerKeywords||[s.title]}),r=yield XV(t,{validateImages:!0,logDetails:!0});if(!r.success)throw new Error(r.error||"");console.log(" :",null==(e=r.data)?void 0:e.title),n(r.data||s),i({title:"",description:""})}catch(t){console.error(" :",t),i({title:"",description:`: ${t instanceof Error?t.message:"Unknown error"}`,variant:"destructive"})}finally{l(!1)}});return a&&t?Lt.jsx("div",{className:"flex items-center justify-center h-64",children:Lt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):Lt.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[Lt.jsxs(gL,{className:"flex-shrink-0",children:[Lt.jsx(yL,{children:Lt.jsxs(bL,{className:"flex items-center justify-between",children:[Lt.jsx("span",{children:t?"":""}),Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsxs(Rg,{variant:"outline",onClick:r,children:[Lt.jsx(Ky,{className:"h-4 w-4 mr-1"}),""]}),Lt.jsxs(Rg,{onClick:()=>{console.log(" "),b()},disabled:a,children:[Lt.jsx(Ey,{className:"h-4 w-4 mr-1"}),""]})]})]})}),Lt.jsx(wL,{className:"space-y-6",children:Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"title",children:""}),Lt.jsx(ML,{id:"title",value:s.title,onChange:e=>o(t=>m(f({},t),{title:e.target.value})),placeholder:""})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"description",children:""}),Lt.jsx(ML,{id:"description",value:s.description,onChange:e=>o(t=>m(f({},t),{description:e.target.value})),placeholder:""})]})]})})]}),Lt.jsxs(gL,{className:"flex-1 flex flex-col min-h-0",children:[Lt.jsx(yL,{children:Lt.jsxs(bL,{className:"flex items-center justify-between",children:[Lt.jsx("span",{children:""}),Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:()=>p("step"),children:[Lt.jsx(wy,{className:"h-4 w-4 mr-1"}),""]}),Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:()=>p("decision"),children:[Lt.jsx(wy,{className:"h-4 w-4 mr-1"}),""]})]})]})}),Lt.jsx(wL,{className:"flex-1 overflow-hidden",children:Lt.jsx(W1,{className:"h-full",children:Lt.jsx("div",{className:"space-y-4 pr-4",children:s.steps&&s.steps.map((t,n)=>Lt.jsxs(Rt.Fragment,{children:[Lt.jsxs(Y4,{children:[Lt.jsx(Z4,{children:Lt.jsx(gL,{className:"cursor-move transition-all border-4 border-blue-500 "+(c===t.id?"opacity-50":""),draggable:!0,onDragStart:e=>((e,t)=>{u(t),e.dataTransfer.effectAllowed="move"})(e,t.id),onDragOver:g,onDrop:e=>((e,t)=>{e.preventDefault(),c&&c!==t&&(o(e=>{const n=[...e.steps],r=n.findIndex(e=>e.id===c),i=n.findIndex(e=>e.id===t);if(-1===r||-1===i)return e;const[s]=n.splice(r,1);return n.splice(i,0,s),m(f({},e),{steps:n})}),u(null))})(e,t.id),children:Lt.jsx(wL,{className:"p-4",children:Lt.jsxs("div",{className:"flex items-start gap-3",children:[Lt.jsx(ay,{className:"h-5 w-5 text-gray-400 mt-1 flex-shrink-0"}),Lt.jsxs("div",{className:"flex-1 space-y-4",children:[Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx("span",{className:"text-sm font-medium text-gray-500",children:n+1}),Lt.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-800",children:"step"===t.type?"":""})]}),Lt.jsx(Rg,{variant:"ghost",size:"sm",onClick:()=>h(t.id),className:"text-red-600 hover:text-red-700",children:Lt.jsx(My,{className:"h-4 w-4"})})]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Lt.jsxs("div",{children:[Lt.jsx(PL,{children:""}),Lt.jsx(ML,{value:t.title,onChange:e=>v(t.id,{title:e.target.value}),placeholder:""})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{children:""}),Lt.jsx(ML,{value:t.description,onChange:e=>v(t.id,{description:e.target.value}),placeholder:""})]})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{children:""}),Lt.jsx(Fz,{value:t.message,onChange:e=>v(t.id,{message:e.target.value}),placeholder:"",rows:3})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{children:""}),Lt.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(t.images||[]).filter(e=>e&&e.url&&""!==e.url.trim()).map((n,r)=>{const i=Cg(n.url);return Lt.jsxs("div",{className:"relative",children:[Lt.jsx("img",{src:i,alt:n.fileName||"",className:"w-20 h-20 object-cover rounded border",crossOrigin:"anonymous",onError:e=>{console.error("  (flow-editor-advanced):",{originalUrl:n.url,convertedUrl:i,fileName:n.fileName,stepId:t.id,imageIndex:r}),Tg(e,n.url)},onLoad:()=>{console.log("  (flow-editor-advanced):",{fileName:n.fileName,convertedUrl:i})}}),Lt.jsx(Rg,{variant:"ghost",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0 bg-red-500 text-white hover:bg-red-600",onClick:()=>((t,n)=>T(e,null,function*(){const r=s.steps.find(e=>e.id===t);if(!r||!r.images||n>=r.images.length)return;const i=r.images[n];if(window.confirm(` "${i.fileName}" \n`))try{if(i.fileName&&!i.fileName.startsWith("blob:")){const{buildApiUrl:t}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),n=t(`/emergency-flow/image/${i.fileName}`);console.log(" flow-editor-advanced URL:",n),(yield fetch(n,{method:"DELETE"})).ok?console.log(" :",i.fileName):console.warn("")}o(e=>m(f({},e),{steps:e.steps.map(e=>{if(e.id===t){const t=[...e.images];return t.splice(n,1),m(f({},e),{images:t})}return e})})),console.log(" :",i.fileName)}catch(a){console.error(" :",a),alert(`: ${a instanceof Error?a.message:"Unknown error"}`)}}))(t.id,r),children:Lt.jsx(Ky,{className:"h-3 w-3"})})]},`${t.id}-${r}`)}),(t.images||[]).filter(e=>e&&e.url&&""!==e.url.trim()).length<3&&Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:()=>{const n=document.createElement("input");n.type="file",n.multiple=!0,n.accept="image/*",n.onchange=n=>{const r=n.target.files;r&&((t,n)=>{T(e,null,function*(){const r=s.steps.find(e=>e.id===t),i=(null==r?void 0:r.images)||[];if(i.length+n.length>3)return void alert("3");const a=[];for(const t of Array.from(n))try{const n=new FormData;n.append("image",t);const{buildApiUrl:r}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),i=r("/emergency-flow/upload-image"),s=yield fetch(i,{method:"POST",body:n});if(!s.ok)throw new Error(`: ${s.status}`);const o=yield s.json();o.success&&o.imageUrl&&a.push({url:o.imageUrl,fileName:o.fileName||o.imageFileName})}catch(c){console.error(":",c),alert(` ${t.name} `)}if(0===a.length)return;const l=m(f({},s),{steps:s.steps.map(e=>e.id===t?m(f({},e),{images:[...i,...a]}):e)});o(l),setTimeout(()=>T(e,null,function*(){try{(yield XV(l)).success&&console.log("")}catch(c){console.error(":",c)}}),100)})})(t.id,r)},n.click()},className:"w-20 h-20 flex flex-col items-center justify-center",children:[Lt.jsx(Fy,{className:"h-4 w-4"}),Lt.jsx("span",{className:"text-xs",children:""})]})]})]}),"decision"===t.type&&Lt.jsxs("div",{children:[Lt.jsx(PL,{children:""}),Lt.jsxs("div",{className:"space-y-2",children:[(t.conditions||[]).map((e,n)=>Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsx(ML,{value:e.label,onChange:e=>y(t.id,n,"label",e.target.value),placeholder:"",className:"flex-1"}),Lt.jsx(ML,{value:e.nextId,onChange:e=>y(t.id,n,"nextId",e.target.value),placeholder:"ID",className:"flex-1"}),Lt.jsx(Rg,{variant:"ghost",size:"sm",onClick:()=>((e,t)=>{o(n=>m(f({},n),{steps:n.steps.map(n=>n.id===e&&n.conditions?m(f({},n),{conditions:n.conditions.filter((e,n)=>n!==t)}):n)}))})(t.id,n),className:"text-red-600 hover:text-red-700",children:Lt.jsx(My,{className:"h-4 w-4"})})]},n)),Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:()=>{return e=t.id,void o(t=>m(f({},t),{steps:t.steps.map(t=>t.id===e&&"decision"===t.type?m(f({},t),{conditions:[...t.conditions||[],{label:"",nextId:""}]}):t)}));var e},children:[Lt.jsx(wy,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]})})})}),Lt.jsxs(Q4,{children:[Lt.jsx(X4,{onClick:()=>p("step",n+1),children:""}),Lt.jsx(X4,{onClick:()=>p("decision",n+1),children:""}),Lt.jsx(X4,{onClick:()=>h(t.id),className:"text-red-600",children:""})]})]}),Lt.jsxs("div",{className:"flex items-center justify-center gap-4 my-2",children:[Lt.jsxs(Rg,{variant:"outline",size:"sm",className:"w-1/2",onClick:()=>p("step",n+1),children:[Lt.jsx(wy,{className:"h-4 w-4 mr-1"}),""]}),Lt.jsxs(Rg,{variant:"outline",size:"sm",className:"w-1/2",onClick:()=>p("decision",n+1),children:[Lt.jsx(wy,{className:"h-4 w-4 mr-1"}),""]})]})]},t.id))})})})]}),Lt.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4 border-t",children:[Lt.jsx(Rg,{variant:"outline",onClick:r,className:"h-12 px-6",children:""}),Lt.jsxs(Rg,{onClick:()=>{console.log(" "),b()},className:"h-12 px-6",children:[Lt.jsx(Ey,{className:"w-4 h-4 mr-2"}),""]})]})]})},t3=({flowId:t,onClose:n})=>{const[r,i]=Pt.useState(null),[s,o]=Pt.useState(0),[a,l]=Pt.useState(!0),[c,u]=Pt.useState("");if(Pt.useEffect(()=>{t&&T(e,null,function*(){try{l(!0);const{buildApiUrl:n}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),r=n(`/emergency-flow/detail/${t}`);console.log(" API URL:",r);const s=yield fetch(r,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!s.ok){const e=yield s.text();throw console.error(" API :",{status:s.status,statusText:s.statusText,body:e}),new Error(`Failed to fetch flow data: ${s.status} - ${e}`)}const o=yield s.json();console.log(" API:",o);const a=o.success&&o.data?o.data:o;console.log(" :",a);const c={id:a.id.toString(),title:a.title||a.name,description:a.description||"",steps:a.steps||[]};console.log(" :",c),i(c)}catch(yie){console.error("Flow data fetch error:",yie),u("")}finally{l(!1)}})},[t]),a)return Lt.jsx(gL,{className:"w-full max-w-4xl mx-auto",children:Lt.jsx(wL,{className:"flex items-center justify-center h-64",children:Lt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})});if(c||!r)return Lt.jsxs(gL,{className:"w-full max-w-4xl mx-auto",children:[Lt.jsx(yL,{children:Lt.jsx(bL,{className:"text-red-600",children:""})}),Lt.jsxs(wL,{children:[Lt.jsx("p",{className:"mb-4",children:c||""}),Lt.jsx(Rg,{onClick:n,children:""})]})]});const d=r&&r.steps[s]?r.steps[s]:null,p=s===r.steps.length-1,h=0===s;return d?Lt.jsxs(gL,{className:"w-full max-w-4xl mx-auto",children:[Lt.jsx(yL,{children:Lt.jsxs("div",{className:"flex items-start justify-between",children:[Lt.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[Lt.jsxs(Rg,{variant:"ghost",size:"sm",onClick:n,className:"flex-shrink-0",children:[Lt.jsx(Og,{className:"h-4 w-4"}),""]}),Lt.jsxs(bL,{className:"text-xl break-words leading-tight",children:[r.title," ()"]})]}),Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsxs("div",{className:"text-sm text-gray-500 flex-shrink-0 ml-4",children:[" ",s+1," / ",r.steps.length]}),Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:n,className:"h-8 px-3 border-gray-300 hover:bg-gray-100",children:""})]})]})}),Lt.jsx(wL,{children:Lt.jsxs("div",{className:"space-y-6",children:[Lt.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[Lt.jsx("h3",{className:"font-semibold text-blue-900 mb-2 text-lg",children:d.title}),d.description&&Lt.jsx("p",{className:"text-blue-800 text-sm mb-3",children:d.description}),Lt.jsx("div",{className:"text-blue-800 whitespace-pre-line",children:d.message})]}),"decision"===d.type&&d.conditions&&d.conditions.length>0&&Lt.jsxs("div",{className:"space-y-3",children:[Lt.jsx("h4",{className:"font-medium text-gray-900",children:":"}),Lt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:d.conditions.map((e,t)=>Lt.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg bg-gray-50",children:[Lt.jsx("div",{className:"font-medium text-sm",children:e.label}),Lt.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[":"," ",(()=>{const t=r.steps.find(t=>t.id===e.nextId),n=r.steps.findIndex(t=>t.id===e.nextId);return t?`${t.title||` ${n+1}`}`:""})()]})]},t))})]}),d.images&&d.images.length>0&&Lt.jsxs("div",{className:"space-y-3",children:[Lt.jsx("h4",{className:"font-medium text-gray-900",children:":"}),Lt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.images.map((e,t)=>{const n=Cg("object"==typeof e&&null!==e?e.url:e),r="object"==typeof e&&null!==e?e.fileName:String(e);return console.log(" [FlowPreview] :",{index:t,fileName:r,convertedUrl:n,originalImg:e,imgType:typeof e,hasUrl:"object"==typeof e&&null!==e&&!!e.url,urlValue:"object"==typeof e&&null!==e?e.url:e}),Lt.jsx("div",{className:"relative",children:Lt.jsx("img",{src:n,alt:r,className:"w-full h-48 object-cover rounded-lg border",crossOrigin:"anonymous",onLoad:()=>{console.log(" :",{fileName:r,imageUrl:(null==n?void 0:n.substring(0,100))+"..."})},onError:t=>{const i="object"==typeof e&&null!==e?e.url:String(e);console.error("  (flow-preview):",{fileName:r,convertedUrl:(null==n?void 0:n.substring(0,100))+"...",originalImg:e,originalUrl:i,error:t}),Tg(t,i)}})},t)})})]}),Lt.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[Lt.jsxs(Rg,{variant:"outline",onClick:()=>{s>0&&o(s-1)},disabled:h,children:[Lt.jsx(Og,{className:"h-4 w-4 mr-1"}),""]}),Lt.jsxs("div",{className:"text-sm text-gray-500",children:[s+1," / ",r.steps.length]}),Lt.jsxs(Rg,{variant:"outline",onClick:()=>{r&&s<r.steps.length-1&&o(s+1)},disabled:p,children:["",Lt.jsx(Dg,{className:"h-4 w-4 ml-1"})]})]})]})})]}):Lt.jsx(gL,{className:"w-full max-w-4xl mx-auto",children:Lt.jsxs(wL,{children:[Lt.jsx("p",{className:"text-center py-8",children:""}),Lt.jsx(Rg,{onClick:n,className:"w-full",children:""})]})})},n3=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=Pt.useState("generator"),[n,r]=Pt.useState({view:"list"}),[i,s]=Pt.useState(!1),[o,a]=Pt.useState(!1),[l,c]=Pt.useState(!1),[u,d]=Pt.useState(null),[p,h]=Pt.useState(null),[f,m]=Pt.useState(null),{toast:v}=nv(),{data:g,isLoading:y}=Xh({queryKey:["/api/emergency-flow/list"],queryFn:()=>T(this,null,function*(){const{buildApiUrl:e}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),t=yield fetch(e("/emergency-flow/list")),n=yield t.json();if(console.log(" :",n),n.success){const e=n.flows||n.data||[];console.log(" :",e);const t=e.map(e=>({id:e.id.toString(),title:e.name||e.title,description:e.description||"",category:e.category||"",keywords:e.triggerKeywords||[],steps:e.steps||[],createdAt:e.createdAt||(new Date).toISOString(),updatedAt:e.updatedAt||(new Date).toISOString()}));return console.log(" :",t),t}return[]})},Ah),b=ef({mutationFn:e=>T(this,null,function*(){var t,n,r,i,s,o,a,l;console.log(" saveMutation :",{flowDataId:e.id,stepsCount:(null==(t=e.steps)?void 0:t.length)||0,stepsWithImages:(null==(n=e.steps)?void 0:n.filter(e=>e.images&&e.images.length>0).length)||0,allStepsImages:(null==(r=e.steps)?void 0:r.map(e=>{var t,n;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(n=e.images)?void 0:n.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}}))||[]});const c=yield XV(e,{validateImages:!0,logDetails:!0});if(c.success)return console.log(" saveMutation :",{flowId:(null==(i=c.data)?void 0:i.id)||e.id,title:(null==(s=c.data)?void 0:s.title)||e.title,stepsCount:(null==(a=null==(o=c.data)?void 0:o.steps)?void 0:a.length)||(null==(l=e.steps)?void 0:l.length)||0}),c.data||e;throw new Error(c.error||"")}),onSuccess:()=>{JV.invalidateQueries({queryKey:["/api/emergency-flow/list"]}),v({title:"",description:""}),s(!1),d(null),r({view:"list"})},onError:e=>v({title:"",description:`: ${e.message}`,variant:"destructive"})}),x=ef({mutationFn:e=>T(this,null,function*(){console.log(" :",e);const t=yield fetch(`/api/api/emergency-flow/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(console.log(" :",{status:t.status,statusText:t.statusText,ok:t.ok}),!t.ok){let e=`: ${t.status} - ${t.statusText}`;try{const n=yield t.json();console.log(" :",n),e=n.error||n.details||e}catch(r){console.warn(" :",r)}throw new Error(e)}const n=yield t.json();return console.log(" :",n),n}),onSuccess:()=>{JV.invalidateQueries({queryKey:["/api/emergency-flow/list"]}),window.dispatchEvent(new CustomEvent("flowDeleted")),v({title:"",description:""}),h(null),c(!1)},onError:e=>{console.error(" :",e),v({title:"",description:`: ${e.message}`,variant:"destructive"})}}),w=()=>{m(null)};return f?Lt.jsx("div",{className:"container mx-auto p-4 sm:p-6 bg-gray-50 min-h-screen",children:Lt.jsx(t3,{flowId:f,onClose:w})}):Lt.jsxs("div",{className:"container mx-auto p-4 sm:p-6 bg-gray-50 min-h-screen max-w-7xl",children:[Lt.jsx("div",{className:"flex justify-between items-start mb-6",children:Lt.jsxs("div",{children:[Lt.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 flex items-center gap-3",children:[Lt.jsx(qy,{className:"w-8 h-8 text-blue-600"}),""]}),Lt.jsx("p",{className:"text-gray-500 mt-1",children:""})]})}),Lt.jsxs(KF,{value:e,onValueChange:t,className:"w-full",children:[Lt.jsxs(JF,{className:"grid w-full grid-cols-2 bg-gray-200 p-1 rounded-lg",children:[Lt.jsxs(YF,{value:"generator",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:shadow-md",children:[Lt.jsx(Lg,{className:"h-5 w-5"}),""]}),Lt.jsxs(YF,{value:"editor",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:shadow-md",children:[Lt.jsx(py,{className:"h-5 w-5"}),""]})]}),Lt.jsx(ZF,{value:"generator",className:"mt-4",children:Lt.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:Lt.jsx(w0,{onFlowGenerated:e=>{t("editor"),r({view:"list"}),JV.invalidateQueries({queryKey:["/api/emergency-flow/list"]}),window.dispatchEvent(new CustomEvent("flowGenerated",{detail:{generatedFlow:e}})),console.log("Generated Flow, showing in list:",e),v({title:"",description:`${e.title||""}`})}})})}),Lt.jsxs(ZF,{value:"editor",className:"mt-4",children:["list"===n.view&&Lt.jsx(s1,{onEdit:e=>{r({view:"edit",flowId:e})},onPreview:e=>{m(e)},onNew:()=>{r({view:"edit",flowId:null})}}),"edit"===n.view&&Lt.jsx(e3,{flowId:n.flowId||void 0,onSave:e=>{var t,n,r;console.log(" handleSaveFlow :",{flowId:e.id,title:e.title,stepsCount:(null==(t=e.steps)?void 0:t.length)||0,stepsWithImages:(null==(n=e.steps)?void 0:n.filter(e=>e.images&&e.images.length>0).length)||0,allStepsImages:(null==(r=e.steps)?void 0:r.map(e=>{var t,n;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(n=e.images)?void 0:n.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}}))||[]}),b.mutate(e)},onCancel:()=>{r({view:"list"})}})]})]}),Lt.jsx(Uz,{open:i,onOpenChange:s,children:Lt.jsx(Vz,{className:"max-w-full w-full h-full flex flex-col p-0",children:u&&Lt.jsx(SX,{flowData:u,onSave:e=>b.mutate(e),onClose:()=>s(!1)},u.id)})}),Lt.jsx(Uz,{open:o,onOpenChange:a,children:Lt.jsxs(Vz,{className:"max-w-4xl w-full",children:[Lt.jsxs(qz,{children:[Lt.jsx(Kz,{children:null==u?void 0:u.title}),Lt.jsx(Jz,{children:null==u?void 0:u.description})]}),Lt.jsx("div",{className:"max-h-[80vh] overflow-y-auto p-4",children:u&&Lt.jsx(eB,{flowId:u.id})})]})}),Lt.jsx(N$,{isOpen:l,onOpenChange:c,onConfirm:()=>{p&&x.mutate(p)},title:"",description:""})]})}},Symbol.toStringTag,{value:"Module"}));function r3(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>{const i=n(e)[`__scope${r}`];return f(f({},t),i)},{});return Pt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}var i3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=bv(`Primitive.${t}`),r=Pt.forwardRef((e,r)=>{const i=e,{asChild:s}=i,o=v(i,["asChild"]),a=s?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Lt.jsx(a,m(f({},o),{ref:r}))});return r.displayName=`Primitive.${t}`,m(f({},e),{[t]:r})},{}),s3="Progress",o3=100,[a3]=function(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>Pt.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return Pt.useMemo(()=>({[`__scope${e}`]:m(f({},n),{[e]:r})}),[n,r])}};return r.scopeName=e,[function(t,r){const i=Pt.createContext(r);i.displayName=t+"Context";const s=n.length;n=[...n,r];const o=t=>{var n;const r=t,{scope:o,children:a}=r,l=v(r,["scope","children"]),c=(null==(n=null==o?void 0:o[e])?void 0:n[s])||i,u=Pt.useMemo(()=>l,Object.values(l));return Lt.jsx(c.Provider,{value:u,children:a})};return o.displayName=t+"Provider",[o,function(n,o){var a;const l=(null==(a=null==o?void 0:o[e])?void 0:a[s])||i,c=Pt.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},r3(r,...t)]}(s3),[l3,c3]=a3(s3),u3=Pt.forwardRef((e,t)=>{const n=e,{__scopeProgress:r,value:i=null,max:s,getValueLabel:o=h3}=n,a=v(n,["__scopeProgress","value","max","getValueLabel"]);!s&&0!==s||v3(s)||console.error(`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const l=v3(s)?s:o3;null===i||g3(i,l)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${i}`,"Progress"));const c=g3(i,l)?i:null,u=m3(c)?o(c,l):void 0;return Lt.jsx(l3,{scope:r,value:c,max:l,children:Lt.jsx(i3.div,m(f({"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":m3(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":f3(c,l),"data-value":null!=c?c:void 0,"data-max":l},a),{ref:t}))})});u3.displayName=s3;var d3="ProgressIndicator",p3=Pt.forwardRef((e,t)=>{var n;const r=e,{__scopeProgress:i}=r,s=v(r,["__scopeProgress"]),o=c3(d3,i);return Lt.jsx(i3.div,m(f({"data-state":f3(o.value,o.max),"data-value":null!=(n=o.value)?n:void 0,"data-max":o.max},s),{ref:t}))});function h3(e,t){return`${Math.round(e/t*100)}%`}function f3(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function m3(e){return"number"==typeof e}function v3(e){return m3(e)&&!isNaN(e)&&e>0}function g3(e,t){return m3(e)&&!isNaN(e)&&e<=t&&e>=0}p3.displayName=d3;var y3=u3,b3=p3;const x3=Pt.forwardRef((e,t)=>{var n=e,{className:r,value:i}=n,s=v(n,["className","value"]);return Lt.jsx(y3,m(f({ref:t,className:Ng("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r)},s),{children:Lt.jsx(b3,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(i||0)}%)`}})}))});x3.displayName=y3.displayName;const w3=({onUploadSuccess:t})=>{const{toast:n}=nv(),r=Pt.useRef(null),[i,s]=Pt.useState(null),[o,a]=Pt.useState(!1),[l,c]=Pt.useState(0),[u,d]=Pt.useState(!1),[p,h]=Pt.useState(!1),[f,m]=Pt.useState(""),[v,g]=Pt.useState(!1);return Lt.jsxs(gL,{className:"w-full",children:[Lt.jsxs(yL,{children:[Lt.jsx(bL,{children:""}),Lt.jsx(xL,{children:""})]}),Lt.jsx(wL,{children:Lt.jsxs(KF,{defaultValue:"keywords",className:"w-full",children:[Lt.jsxs(JF,{className:"grid w-full grid-cols-2 mb-6",children:[Lt.jsx(YF,{value:"keywords",children:""}),Lt.jsx(YF,{value:"file",children:""})]}),Lt.jsx(ZF,{value:"keywords",className:"space-y-4",children:Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{children:[Lt.jsx("h3",{className:"text-lg font-medium mb-2",children:""}),Lt.jsx(Fz,{placeholder:"",value:f,onChange:e=>m(e.target.value),className:"min-h-[100px]"}),Lt.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:Lt.jsxs("span",{children:[f.length,"/100"]})})]}),Lt.jsx(Rg,{className:"w-full",variant:"default",onClick:()=>T(e,null,function*(){if(f.trim())try{let i;g(!0),n({title:"",description:`${f}...`});try{i=yield fetch("/api/api/chatgpt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`${f}`,type:"flow-generation"})})}catch(e){console.log(""),i=yield fetch("/api/api/flow-generator/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:f})})}const s=yield i.json();if(console.log("API:",s),!i.ok){const e=s.error||"",o=s.details||"";if(e.includes("OpenAI API")||e.includes("API")){n({title:"OpenAI API",description:"",variant:"destructive"});try{const e=yield fetch("/api/api/chatgpt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`${f}`,type:"troubleshooting"})}),r=yield e.json();if(r.success&&r.flowData)return n({title:"",description:`${r.flowData.title||""}`}),t&&t(r.flowData.id),void m("")}catch(r){console.error(":",r)}}return n({title:"",description:e,variant:"destructive"}),void console.error(":",{error:e,details:o,status:i.status})}if(!s.success||!s.flowData)throw new Error("");n({title:"",description:`${s.flowData.title||""}`}),t&&t(s.flowData.id),m("")}catch(e){console.error(":",e),n({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}finally{g(!1)}else n({title:"",description:"",variant:"destructive"})}),disabled:v||!f.trim(),children:v?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(hy,{className:"mr-2 h-4 w-4 animate-spin"}),"..."]}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Vy,{className:"mr-2 h-4 w-4"}),"GPT"]})}),Lt.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 rounded-md border border-blue-200",children:[Lt.jsx(jy,{className:"h-5 w-5 text-blue-500 flex-shrink-0"}),Lt.jsxs("div",{className:"text-sm text-gray-700",children:[Lt.jsx("p",{className:"font-medium mb-1",children:":"}),Lt.jsxs("ol",{className:"list-decimal list-inside space-y-1 pl-1",children:[Lt.jsx("li",{children:"GPT"}),Lt.jsx("li",{children:""}),Lt.jsx("li",{children:""}),Lt.jsxs("ul",{className:"list-disc list-inside pl-6 space-y-1",children:[Lt.jsx("li",{children:""}),Lt.jsx("li",{children:""})]})]})]})]})]})}),Lt.jsx(ZF,{value:"file",className:"space-y-4",children:Lt.jsxs("div",{children:[Lt.jsx("input",{type:"file",ref:r,onChange:e=>{if(e.target.files&&e.target.files.length>0){const t=e.target.files[0],r=t.name.toLowerCase().split(".").pop()||"";if(!["pptx","ppt","xlsx","xls","pdf","json"].includes(r))return void n({title:"",description:"PowerPoint(.pptx, .ppt)Excel(.xlsx, .xls)PDF(.pdf)JSON(.json)",variant:"destructive"});s(t)}},accept:".pptx,.ppt,.xlsx,.xls,.pdf,.json",className:"hidden"}),Lt.jsxs("div",{className:"mb-4",children:[Lt.jsx("h3",{className:"text-lg font-medium mb-2",children:""}),Lt.jsx(Rg,{variant:"outline",className:"w-full h-24 border-dashed",onClick:()=>{r.current&&r.current.click()},children:Lt.jsxs("div",{className:"flex flex-col items-center",children:[Lt.jsx(ry,{className:"h-8 w-8 text-gray-400 mb-2"}),Lt.jsx("p",{className:"text-gray-700 font-medium",children:""}),Lt.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PowerPointExcelPDFJSON"})]})})]}),i&&Lt.jsx("div",{className:"mb-4 p-3 bg-indigo-50 rounded-md border border-indigo-200",children:Lt.jsxs("div",{className:"flex items-center",children:[Lt.jsx(ry,{className:"h-5 w-5 text-indigo-600 mr-2"}),Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-indigo-700",children:i.name}),Lt.jsxs("p",{className:"text-xs text-gray-500",children:[(i.size/1024/1024).toFixed(2)," MB"]})]})]})}),(o||u)&&Lt.jsxs("div",{className:"mb-4",children:[Lt.jsxs("div",{className:"flex justify-between items-center mb-1",children:[Lt.jsx("span",{className:"text-sm font-medium text-gray-700",children:u?"":"..."}),Lt.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[l,"%"]})]}),Lt.jsx(x3,{value:l,className:"h-2"})]}),Lt.jsx("div",{className:"flex mb-4",children:Lt.jsxs("div",{className:"flex items-center space-x-2",children:[Lt.jsx(RV,{id:"saveOriginalFile",checked:p,onCheckedChange:e=>h(!0===e)}),Lt.jsx(PL,{htmlFor:"saveOriginalFile",className:"text-sm text-gray-700",children:""})]})}),Lt.jsxs("div",{className:"flex items-center space-x-2 mb-4 bg-amber-50 p-2 rounded-md border border-amber-200",children:[Lt.jsx(jy,{className:"h-4 w-4 text-amber-500 flex-shrink-0"}),Lt.jsx("p",{className:"text-sm text-gray-700",children:""})]}),Lt.jsx(Rg,{className:"w-full",onClick:()=>T(e,null,function*(){if(i){a(!0),c(0);try{const e=new FormData;e.append("file",i),e.append("saveOriginalFile",p.toString()),e.append("autoGenerateFlow",(!0).toString());const r=setInterval(()=>{c(e=>e>=90?(clearInterval(r),90):e+10)},500),o=yield fetch("/api/api/emergency-guide/process",{method:"POST",body:e});if(clearInterval(r),!o.ok)throw new Error("");const a=yield o.json();if(!a.success)throw new Error(a.error||"");c(100),d(!0),n({title:"",description:""}),t&&t(a.guideId),setTimeout(()=>{s(null),d(!1),c(0)},3e3)}catch(e){console.error("Upload error:",e),n({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}finally{a(!1)}}else n({title:"",description:"",variant:"destructive"})}),disabled:!i||o||u,children:o?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(hy,{className:"mr-2 h-4 w-4 animate-spin"}),"..."]}):u?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Gg,{className:"mr-2 h-4 w-4"}),""]}):""})]})})]})})]})};function S3(e){try{const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(t){return""}}const C3=({flows:e,onSelectFlow:t,onDeleteFlow:n,onPreviewFlow:r,isLoading:i})=>(console.log(" FlowList :",{flowsLength:e.length,isLoading:i,flows:e}),i?Lt.jsxs("div",{className:"flex justify-center items-center p-8",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),Lt.jsx("p",{className:"ml-3 text-gray-600",children:"..."})]}):0===e.length?Lt.jsx("div",{className:"text-center p-8",children:Lt.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[Lt.jsx(ry,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Lt.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),Lt.jsx("p",{className:"text-gray-600 mb-4",children:""}),Lt.jsxs("div",{className:"flex justify-center space-x-2",children:[Lt.jsx(Rg,{variant:"outline",onClick:()=>window.dispatchEvent(new CustomEvent("switchToGenerator")),children:""}),Lt.jsx(Rg,{variant:"outline",onClick:()=>window.location.reload(),children:""})]})]})}):Lt.jsx("div",{className:"space-y-4",children:Lt.jsx("div",{className:"overflow-auto",children:Lt.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-sm",children:[Lt.jsx("thead",{children:Lt.jsxs("tr",{className:"bg-gray-100",children:[Lt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 p-3 text-center text-sm font-medium",children:""}),Lt.jsx("th",{className:"border border-gray-300 p-3 text-center text-sm font-medium",children:""})]})}),Lt.jsx("tbody",{children:e.map(e=>{var i;return Lt.jsxs("tr",{className:"hover:bg-gray-50",children:[Lt.jsx("td",{className:"border border-gray-300 p-3",children:Lt.jsx("div",{className:"break-words leading-tight text-sm font-semibold cursor-pointer hover:text-blue-600",onClick:()=>t(e),children:e.title})}),Lt.jsx("td",{className:"border border-gray-300 p-3",children:Lt.jsx("div",{className:"break-words leading-tight text-sm text-gray-600",children:e.description||""})}),Lt.jsx("td",{className:"border border-gray-300 p-3 text-center",children:Lt.jsx("span",{className:"text-sm",children:(null==(i=e.steps)?void 0:i.length)||0})}),Lt.jsx("td",{className:"border border-gray-300 p-3",children:Lt.jsx("span",{className:"text-xs text-gray-500",children:S3(e.updatedAt)})}),Lt.jsx("td",{className:"border border-gray-300 p-3",children:Lt.jsx("div",{className:"flex justify-center",children:e.steps&&e.steps.length>0&&e.steps.some(e=>e.imageUrl||e.images&&e.images.length>0)?Lt.jsxs("div",{className:"flex gap-1",children:[e.steps.slice(0,3).map((e,t)=>{if(e.images&&e.images.length>0)return e.images.slice(0,1).map((n,r)=>{const i=Sg(n);return console.log(" :",{stepId:e.id,imageIndex:r,originalImage:n,convertedUrl:i}),Lt.jsx("img",{src:i,alt:`${e.title} - `,className:"w-8 h-8 object-cover rounded border",onError:t=>{console.error(":",{imageUrl:i,originalImage:n,stepId:e.id}),t.currentTarget.style.display="none"},onLoad:()=>{console.log(":",i)}},`${t}-${r}`)});if(e.imageUrl){const n=Sg(e.imageUrl);return console.log(" :",{stepId:e.id,originalImageUrl:e.imageUrl,convertedUrl:n}),Lt.jsx("img",{src:n,alt:`${e.title} - `,className:"w-8 h-8 object-cover rounded border",onError:t=>{console.error(":",{imageUrl:n,originalImageUrl:e.imageUrl,stepId:e.id}),t.currentTarget.style.display="none"},onLoad:()=>{console.log(":",n)}},t)}return null}),e.steps.filter(e=>e.imageUrl||e.images&&e.images.length>0).length>3&&Lt.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.steps.filter(e=>e.imageUrl||e.images&&e.images.length>0).length-3]})]}):Lt.jsx("span",{className:"text-xs text-gray-400",children:""})})}),Lt.jsx("td",{className:"border border-gray-300 p-3",children:Lt.jsxs("div",{className:"flex justify-center gap-1",children:[Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:()=>t(e),title:"",className:"h-7 px-2 text-xs",children:Lt.jsx(_y,{className:"h-3 w-3"})}),Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:()=>r(e),title:"",className:"h-7 px-2 text-xs",children:Lt.jsx(ty,{className:"h-3 w-3"})}),Lt.jsx(Rg,{variant:"destructive",size:"sm",onClick:()=>n(e.id,e.filePath),title:"",className:"h-7 px-2 text-xs",children:Lt.jsx(My,{className:"h-3 w-3"})})]})})]},e.id)})})]})})})),E3=()=>{const{toast:t}=nv(),[n,r]=Pt.useState([]),[i,s]=Pt.useState(null),[o,a]=Pt.useState(null),[l,c]=Pt.useState(!0),[u,d]=Pt.useState(null),[p,h]=Pt.useState("list"),[v,g]=Pt.useState(null),y=Pt.useCallback((n=!1)=>T(e,null,function*(){try{c(!0),console.log(" ");const t=Date.now(),n=`?ts=${t}&r=${Math.random().toString(36).substring(2)}`,{buildApiUrl:i}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),s=i(`/emergency-flow/list${n}`);console.log(" API URL:",s);const o=yield fetch(s,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate, max-age=0",Pragma:"no-cache",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","X-Requested-With":"XMLHttpRequest"}});if(console.log(" :",o.status,o.statusText),!o.ok){const e=yield o.text();throw console.error(" API :",e),new Error(`HTTP ${o.status}:  - ${e}`)}const a=yield o.json();console.log(" :",a);const l=a.success&&a.flows?a.flows:a.success&&a.data?a.data:Array.isArray(a)?a:[];console.log(" :",l.length);const u=l.map(e=>{var t,n;return{id:e.id||(null==(t=e.fileName)?void 0:t.replace(".json",""))||"",title:e.title||(null==(n=e.fileName)?void 0:n.replace(".json",""))||"",description:e.description||"",triggerKeywords:e.triggerKeywords||e.trigger||[],steps:e.steps||[],updatedAt:e.createdAt||e.updatedAt||e.savedAt||(new Date).toISOString(),filePath:e.filePath||`knowledge-base/troubleshooting/${e.fileName||e.id+".json"}`,fileName:e.fileName||e.id+".json"}});console.log(" :",u.length+""),console.log(" :",u),r(u)}catch(n){console.error(" :",n),t({title:"",description:n instanceof Error?n.message:"",variant:"destructive"}),r([])}finally{c(!1)}}),[t]);Pt.useEffect(()=>{y();const e=e=>{console.log(" :",e.detail),y(!0)},t=()=>y(!0);return window.addEventListener("forceRefreshFlowList",e),window.addEventListener("fileSystemUpdated",t),()=>{window.removeEventListener("forceRefreshFlowList",e),window.removeEventListener("fileSystemUpdated",t)}},[y]);const b=n=>T(e,null,function*(){try{console.log(" :",{id:n.id,title:n.title,stepsCount:n.steps.length,filePath:n.filePath});const{buildApiUrl:r}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),i=yield fetch(r(`/emergency-flow/${n.id}`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok){const e=yield i.json();throw new Error(e.error||"")}const o=yield i.json();console.log(" :",o),t({title:"",description:""}),yield y(!0),s(e=>n)}catch(r){console.error(" :",r),t({title:"",description:`: ${r instanceof Error?r.message:""}`,variant:"destructive"})}}),x=()=>{s(null),g(null)};return l?Lt.jsx("div",{className:"flex justify-center items-center h-64",children:Lt.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):Lt.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:i?Lt.jsxs(gL,{className:"h-full flex flex-col",children:[Lt.jsx(yL,{children:Lt.jsxs("div",{className:"flex justify-between items-center",children:[Lt.jsx(bL,{children:i.title}),Lt.jsxs(Rg,{variant:"ghost",onClick:x,children:[Lt.jsx(Ky,{className:"h-4 w-4 mr-2"}),""]})]})}),Lt.jsx(wL,{className:"flex-1 flex flex-col min-h-0",children:Lt.jsxs(KF,{value:u||"metadata",onValueChange:e=>{console.log(" :",{from:u,to:e}),d(e)},className:"w-full h-full flex flex-col",children:[Lt.jsxs(JF,{className:"w-full grid grid-cols-2 mb-4",children:[Lt.jsx(YF,{value:"metadata",children:""}),Lt.jsx(YF,{value:"slides",children:""})]}),Lt.jsx(ZF,{value:"metadata",className:"flex-1 flex flex-col min-h-0",children:Lt.jsx(SX,{flowData:i,onSave:b,onTabChange:d,currentTab:"metadata",selectedFilePath:null==i?void 0:i.filePath})}),Lt.jsx(ZF,{value:"slides",className:"flex-1 flex flex-col min-h-0",children:Lt.jsx(SX,{flowData:i,onSave:b,onTabChange:d,currentTab:"slides",selectedFilePath:null==i?void 0:i.filePath})})]})})]}):v?Lt.jsx(eB,{guideId:v.id,onExit:x,isPreview:!0,onSendToChat:()=>{}}):Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex justify-between items-center",children:[Lt.jsx("h2",{className:"text-lg font-semibold",children:""}),Lt.jsx(Rg,{variant:"outline",onClick:()=>T(e,null,function*(){try{if(console.log(" "),"caches"in window){const e=yield caches.keys();yield Promise.all(e.map(e=>caches.delete(e))),console.log(" ")}yield y(!0),t({title:"",description:""})}catch(e){console.error(" :",e),t({title:"",description:"",variant:"destructive"})}}),className:"text-sm",children:" "})]}),Lt.jsx(C3,{flows:n,onSelectFlow:n=>T(e,null,function*(){var r,i,o;console.log(" :",{flowId:n.id,flowTitle:n.title,flowKeys:Object.keys(n),hasSteps:!!n.steps,stepsLength:(null==(r=n.steps)?void 0:r.length)||0});try{s(n),d("metadata"),g(null),console.log(" :",n.id),console.log(" :",n);const t=Date.now(),{buildApiUrl:r}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),a=r(`/emergency-flow/detail/${n.id}?_t=${t}`);console.log(" API:",a);const l=yield fetch(a,{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API:",l.status,l.statusText),!l.ok){const e=yield l.text();throw console.error(" API :",e),new Error(`: ${l.status} - ${e}`)}const c=yield l.json();console.log(" API:",c),console.log(" :",c),console.log(" API:",{hasSuccess:"success"in c,hasData:"data"in c,hasSteps:"steps"in c,stepsType:typeof c.steps,stepsIsArray:Array.isArray(c.steps),stepsLength:(null==(i=c.steps)?void 0:i.length)||0,allKeys:Object.keys(c)});const u=c.success&&c.data?c.data:c;console.log(" :",u);const p=m(f(f({},n),u),{steps:u.steps||n.steps||[]});console.log(" :",p),console.log(" :",{flowId:p.id,stepsLength:(null==(o=p.steps)?void 0:o.length)||0,title:p.title,hasSteps:!!p.steps,stepsType:typeof p.steps,stepsIsArray:Array.isArray(p.steps),stepsContent:p.steps}),s(p),d("metadata"),g(null),console.log(" :",{selectedFlow:p,editorTab:"metadata",previewFlow:null})}catch(a){console.error(" :",a),t({title:"",description:`: ${a instanceof Error?a.message:""}`,variant:"destructive"}),console.log(" "),s(n),d("metadata"),g(null)}}),onDeleteFlow:(n,r)=>T(e,null,function*(){try{console.log(" :",{id:n,filePath:r});const{buildApiUrl:i}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),o=yield fetch(i(`/emergency-flow/${n}`),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!o.ok){const e=yield o.json();throw new Error(e.error||"")}const a=yield o.json();console.log(" :",a),t({title:"",description:""}),yield y(!0),s(null)}catch(i){console.error(" :",i),t({title:"",description:`: ${i instanceof Error?i.message:""}`,variant:"destructive"})}}),onPreviewFlow:n=>T(e,null,function*(){try{console.log(" :",n.id);const t=Date.now(),{buildApiUrl:r}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),i=r(`/emergency-flow/detail/${n.id}?_t=${t}`);console.log(" API URL:",i);const o=yield fetch(i,{credentials:"include",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache","X-Force-Fresh":"true","Content-Type":"application/json"}});if(!o.ok)throw new Error(`: ${o.status}`);const a=yield o.json();console.log(" :",a);const l=m(f(f({},n),a),{steps:a.steps||n.steps||[]});g(l),s(null)}catch(r){console.error(" :",r),t({title:"",description:`: ${r instanceof Error?r.message:""}`,variant:"destructive"}),g(n),s(null)}}),isLoading:l}),Lt.jsxs("div",{className:"mt-4 p-4 bg-gray-100 rounded text-xs",children:[Lt.jsx("h4",{children:":"}),Lt.jsxs("p",{children:["flowList.length: ",n.length]}),Lt.jsxs("p",{children:["isLoading: ",l.toString()]}),Lt.jsxs("p",{children:["selectedFlow: ",i?i.id:"null"]}),Lt.jsxs("p",{children:["previewFlow: ",v?v.id:"null"]})]})]})})};var T3,N3=Pt,P3=(T3=N3)&&"object"==typeof T3&&"default"in T3?T3.default:T3;function R3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I3=!("undefined"==typeof window||!window.document||!window.document.createElement),k3=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var i,s=[];function o(){i=e(s.map(function(e){return e.props})),a.canUseDOM?t(i):n&&(i=n(i))}var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.peek=function(){return i},a.rewind=function(){if(a.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=i;return i=void 0,s=[],e};var l=a.prototype;return l.UNSAFE_componentWillMount=function(){s.push(this),o()},l.componentDidUpdate=function(){o()},l.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),o()},l.render=function(){return P3.createElement(r,this.props)},a}(N3.PureComponent);return R3(a,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),R3(a,"canUseDOM",I3),a}};const j3=Ue(k3);var _3="undefined"!=typeof Element,A3="function"==typeof Map,O3="function"==typeof Set,D3="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function M3(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,r,i,s;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!M3(e[r],t[r]))return!1;return!0}if(A3&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;for(s=e.entries();!(r=s.next()).done;)if(!M3(r.value[1],t.get(r.value[0])))return!1;return!0}if(O3&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(D3&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(_3&&e instanceof Element)return!1;for(r=n;0!==r--;)if(("_owner"!==i[r]&&"__v"!==i[r]&&"__o"!==i[r]||!e.$$typeof)&&!M3(e[i[r]],t[i[r]]))return!1;return!0}return e!=e&&t!=t}var L3=function(e,t){try{return M3(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const z3=Ue(L3);
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */var F3=Object.getOwnPropertySymbols,B3=Object.prototype.hasOwnProperty,U3=Object.prototype.propertyIsEnumerable,W3=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(yie){return!1}}()?Object.assign:function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var o in n=Object(arguments[s]))B3.call(n,o)&&(i[o]=n[o]);if(F3){r=F3(n);for(var a=0;a<r.length;a++)U3.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i};const $3=Ue(W3);var H3="bodyAttributes",V3="htmlAttributes",q3="titleAttributes",G3={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(G3).map(function(e){return G3[e]});var K3,J3,Y3,Z3,Q3="charset",X3="cssText",e5="href",t5="http-equiv",n5="innerHTML",r5="itemprop",i5="name",s5="property",o5="rel",a5="src",l5="target",c5={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},u5="defaultTitle",d5="defer",p5="encodeSpecialCharacters",h5="onChangeClientState",f5="titleTemplate",m5=Object.keys(c5).reduce(function(e,t){return e[c5[t]]=t,e},{}),v5=[G3.NOSCRIPT,G3.SCRIPT,G3.STYLE],g5="data-react-helmet",y5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b5=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w5=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},S5=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},C5=function(e){var t=R5(e,G3.TITLE),n=R5(e,f5);if(n&&t)return n.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var r=R5(e,u5);return t||r||void 0},E5=function(e){return R5(e,h5)||function(){}},T5=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return x5({},e,t)},{})},N5=function(e,t){return t.filter(function(e){return void 0!==e[G3.BASE]}).map(function(e){return e[G3.BASE]}).reverse().reduce(function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var s=r[i].toLowerCase();if(-1!==e.indexOf(s)&&n[s])return t.concat(n)}return t},[])},P5=function(e,t,n){var r={};return n.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&A5("Helmet: "+e+' should be of type "Array". Instead found type "'+y5(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,n){var i={};n.filter(function(e){for(var n=void 0,s=Object.keys(e),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();-1===t.indexOf(l)||n===o5&&"canonical"===e[n].toLowerCase()||l===o5&&"stylesheet"===e[l].toLowerCase()||(n=l),-1===t.indexOf(a)||a!==n5&&a!==X3&&a!==r5||(n=a)}if(!n||!e[n])return!1;var c=e[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][c]&&(i[n][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=$3({},r[a],i[a]);r[a]=l}return e},[]).reverse()},R5=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},I5=(K3=Date.now(),function(e){var t=Date.now();t-K3>16?(K3=t,e(t)):setTimeout(function(){I5(e)},0)}),k5=function(e){return clearTimeout(e)},j5="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||I5:global.requestAnimationFrame||I5,_5="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||k5:global.cancelAnimationFrame||k5,A5=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},O5=null,D5=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,s=e.linkTags,o=e.metaTags,a=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,d=e.title,p=e.titleAttributes;z5(G3.BODY,r),z5(G3.HTML,i),L5(d,p);var h={baseTag:F5(G3.BASE,n),linkTags:F5(G3.LINK,s),metaTags:F5(G3.META,o),noscriptTags:F5(G3.NOSCRIPT,a),scriptTags:F5(G3.SCRIPT,c),styleTags:F5(G3.STYLE,u)},f={},m={};Object.keys(h).forEach(function(e){var t=h[e],n=t.newTags,r=t.oldTags;n.length&&(f[e]=n),r.length&&(m[e]=h[e].oldTags)}),t&&t(),l(e,f,m)},M5=function(e){return Array.isArray(e)?e.join(""):e},L5=function(e,t){void 0!==e&&document.title!==e&&(document.title=M5(e)),z5(G3.TITLE,t)},z5=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(g5),i=r?r.split(","):[],s=[].concat(i),o=Object.keys(t),a=0;a<o.length;a++){var l=o[a],c=t[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=s.indexOf(l);-1!==u&&s.splice(u,1)}for(var d=s.length-1;d>=0;d--)n.removeAttribute(s[d]);i.length===s.length?n.removeAttribute(g5):n.getAttribute(g5)!==o.join(",")&&n.setAttribute(g5,o.join(","))}},F5=function(e,t){var n=document.head||document.querySelector(G3.HEAD),r=n.querySelectorAll(e+"["+g5+"]"),i=Array.prototype.slice.call(r),s=[],o=void 0;return t&&t.length&&t.forEach(function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===n5)n.innerHTML=t.innerHTML;else if(r===X3)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var a=void 0===t[r]?"":t[r];n.setAttribute(r,a)}n.setAttribute(g5,"true"),i.some(function(e,t){return o=t,n.isEqualNode(e)})?i.splice(o,1):s.push(n)}),i.forEach(function(e){return e.parentNode.removeChild(e)}),s.forEach(function(e){return n.appendChild(e)}),{oldTags:i,newTags:s}},B5=function(e){return Object.keys(e).reduce(function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r},"")},U5=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[c5[n]||n]=e[n],t},t)},W5=function(e,t,n){switch(e){case G3.TITLE:return{toComponent:function(){return e=t.title,n=t.titleAttributes,(r={key:e})[g5]=!0,i=U5(n,r),[Rt.createElement(G3.TITLE,i,e)];var e,n,r,i},toString:function(){return function(e,t,n,r){var i=B5(n),s=M5(t);return i?"<"+e+" "+g5+'="true" '+i+">"+S5(s,r)+"</"+e+">":"<"+e+" "+g5+'="true">'+S5(s,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case H3:case V3:return{toComponent:function(){return U5(t)},toString:function(){return B5(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,n){var r,i=((r={key:n})[g5]=!0,r);return Object.keys(t).forEach(function(e){var n=c5[e]||e;if(n===n5||n===X3){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=t[e]}),Rt.createElement(e,i)})}(e,t)},toString:function(){return function(e,t,n){return t.reduce(function(t,r){var i=Object.keys(r).filter(function(e){return!(e===n5||e===X3)}).reduce(function(e,t){var i=void 0===r[t]?t:t+'="'+S5(r[t],n)+'"';return e?e+" "+i:i},""),s=r.innerHTML||r.cssText||"",o=-1===v5.indexOf(e);return t+"<"+e+" "+g5+'="true" '+i+(o?"/>":">"+s+"</"+e+">")},"")}(e,t,n)}}}},$5=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,s=e.linkTags,o=e.metaTags,a=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,d=void 0===u?"":u,p=e.titleAttributes;return{base:W5(G3.BASE,t,r),bodyAttributes:W5(H3,n,r),htmlAttributes:W5(V3,i,r),link:W5(G3.LINK,s,r),meta:W5(G3.META,o,r),noscript:W5(G3.NOSCRIPT,a,r),script:W5(G3.SCRIPT,l,r),style:W5(G3.STYLE,c,r),title:W5(G3.TITLE,{title:d,titleAttributes:p},r)}},H5=j3(function(e){return{baseTag:N5([e5,l5],e),bodyAttributes:T5(H3,e),defer:R5(e,d5),encode:R5(e,p5),htmlAttributes:T5(V3,e),linkTags:P5(G3.LINK,[o5,e5],e),metaTags:P5(G3.META,[i5,Q3,t5,s5,r5],e),noscriptTags:P5(G3.NOSCRIPT,[n5],e),onChangeClientState:E5(e),scriptTags:P5(G3.SCRIPT,[a5,n5],e),styleTags:P5(G3.STYLE,[X3],e),title:C5(e),titleAttributes:T5(q3,e)}},function(e){O5&&_5(O5),e.defer?O5=j5(function(){D5(e,function(){O5=null})}):(D5(e),O5=null)},$5)(function(){return null}),V5=(J3=H5,Z3=Y3=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!z3(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case G3.SCRIPT:case G3.NOSCRIPT:return{innerHTML:t};case G3.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,r=e.arrayTypeChildren,i=e.newChildProps,s=e.nestedChildren;return x5({},r,((t={})[n.type]=[].concat(r[n.type]||[],[x5({},i,this.mapNestedChildrenToProps(n,s))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,n,r=e.child,i=e.newProps,s=e.newChildProps,o=e.nestedChildren;switch(r.type){case G3.TITLE:return x5({},i,((t={})[r.type]=o,t.titleAttributes=x5({},s),t));case G3.BODY:return x5({},i,{bodyAttributes:x5({},s)});case G3.HTML:return x5({},i,{htmlAttributes:x5({},s)})}return x5({},i,((n={})[r.type]=x5({},s),n))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=x5({},t);return Object.keys(e).forEach(function(t){var r;n=x5({},n,((r={})[t]=e[t],r))}),n},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return Rt.Children.forEach(e,function(e){if(e&&e.props){var i=e.props,s=i.children,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[m5[n]||n]=e[n],t},t)}(w5(i,["children"]));switch(n.warnOnInvalidChildren(e,s),e.type){case G3.LINK:case G3.META:case G3.NOSCRIPT:case G3.SCRIPT:case G3.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:o,nestedChildren:s});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:o,nestedChildren:s})}}}),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,n=w5(e,["children"]),r=x5({},n);return t&&(r=this.mapChildrenToProps(t,r)),Rt.createElement(J3,r)},b5(t,null,[{key:"canUseDOM",set:function(e){J3.canUseDOM=e}}]),t}(Rt.Component),Y3.propTypes={base:bq.object,bodyAttributes:bq.object,children:bq.oneOfType([bq.arrayOf(bq.node),bq.node]),defaultTitle:bq.string,defer:bq.bool,encodeSpecialCharacters:bq.bool,htmlAttributes:bq.object,link:bq.arrayOf(bq.object),meta:bq.arrayOf(bq.object),noscript:bq.arrayOf(bq.object),onChangeClientState:bq.func,script:bq.arrayOf(bq.object),style:bq.arrayOf(bq.object),title:bq.string,titleAttributes:bq.object,titleTemplate:bq.string},Y3.defaultProps={defer:!0,encodeSpecialCharacters:!0},Y3.peek=J3.peek,Y3.rewind=function(){var e=J3.rewind();return e||(e=$5({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},Z3);V5.renderStatic=V5.rewind;const q5=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[t,n]=Pt.useState([]),[r,i]=Pt.useState(!1);Pt.useEffect(()=>{T(e,null,function*(){i(!0);try{const e="/api",t=yield fetch(`${e}/api/blob/list?container=knowledge`),r=yield t.json();r.success&&n(r.data)}catch(gie){n([])}finally{i(!1)}})},[]);const s=e=>new URLSearchParams(window.location.search).get(e),o=s("tab")||"edit",[a,l]=Pt.useState(o),[c,u]=Pt.useState(s("guideId")),[d,p]=Pt.useState(s("display")),[h,f]=Pt.useState(null),[m,v]=Pt.useState("");Pt.useEffect(()=>{const e=e=>{const t=e;t.detail&&t.detail.guideId&&(u(t.detail.guideId),l("flow"))},t=e=>{const t=e;t.detail&&t.detail.guideId&&(p(t.detail.guideId),l("display"))};return window.addEventListener("switch-to-flow-tab",e),window.addEventListener("display-emergency-guide",t),()=>{window.removeEventListener("switch-to-flow-tab",e),window.removeEventListener("display-emergency-guide",t)}},[]),Pt.useEffect(()=>{const t=()=>T(e,null,function*(){try{const{buildApiUrl:t}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),n=yield fetch(t(`/troubleshooting/list?ts=${Date.now()}`),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("");const r=yield n.json(),i=r.success&&r.data?r.data:Array.isArray(r)?r:[];"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("forceRefreshFlowList",{detail:{flowList:i}}))}catch(yie){console.error("",yie)}});return window.addEventListener("flowDataUpdated",t),window.addEventListener("troubleshootingDataUpdated",t),window.addEventListener("emergencyFlowSaved",t),()=>{window.removeEventListener("flowDataUpdated",t),window.removeEventListener("troubleshootingDataUpdated",t),window.removeEventListener("emergencyFlowSaved",t)}},[]),Pt.useEffect(()=>{const e=e=>{console.log(" :",e.detail),S(!0)},t=["flowDataUpdated","troubleshootingDataUpdated","emergencyFlowSaved","fileSystemUpdated"];return t.forEach(t=>{window.addEventListener(t,e)}),()=>{t.forEach(t=>{window.removeEventListener(t,e)})}},[]);const[g,y]=Pt.useState(!1),[b,x]=Pt.useState([]),{toast:w}=nv(),S=(t=!1)=>T(e,null,function*(){try{y(!0),console.log(`  (forceRefresh: ${t})`),t&&"undefined"!=typeof window&&(localStorage.clear(),sessionStorage.clear(),console.log(" "));const n=Date.now(),r=`?_t=${n}&_r=${Math.random().toString(36).substring(2)}&no_cache=true&source=troubleshooting`,{buildApiUrl:i}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),s=i(`/emergency-flow/list${r}`),o=yield fetch(s,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`: ${o.status}`);const a=yield o.json(),l=a.success&&a.data?a.data:Array.isArray(a)?a:[];console.log(` : ${l.length}`),x(l),"undefined"!=typeof window&&localStorage.setItem("emergencyFlowList",JSON.stringify({data:l,timestamp:n,version:"3.0",source:"knowledge-base/troubleshooting"}))}catch(n){console.error(" :",n),w({title:"",description:"",variant:"destructive"}),x([])}finally{y(!1)}}),C=()=>{p(null),l("edit")};return d&&"display"===a?Lt.jsx("div",{className:"container mx-auto px-4 py-8",children:Lt.jsx(eB,{guideId:d,onExit:C})}):Lt.jsxs("div",{className:"h-screen flex flex-col",children:[r&&Lt.jsx("div",{children:"..."}),t.length>0&&Lt.jsxs("div",{style:{marginBottom:16},children:[Lt.jsx("h3",{children:" BLOB"}),Lt.jsx("ul",{children:t.map((e,t)=>Lt.jsx("li",{children:e},t))})]}),Lt.jsxs(V5,{children:[Lt.jsx("title",{children:" - Emergency Assistance"}),Lt.jsx("meta",{name:"description",content:""})]}),Lt.jsxs(KF,{value:a,onValueChange:l,className:"flex-1 flex flex-col min-h-0",children:[Lt.jsx("div",{className:"px-4 pt-8",children:Lt.jsxs(JF,{className:"grid w-full grid-cols-2",children:[Lt.jsx(YF,{value:"upload",children:""}),Lt.jsx(YF,{value:"edit",children:""})]})}),Lt.jsx(ZF,{value:"upload",className:"flex-1 flex flex-col min-h-0 px-4 pb-8",children:Lt.jsx(w3,{onUploadSuccess:e=>{f(e),l("edit")}})}),Lt.jsx(ZF,{value:"edit",className:"flex-1 flex flex-col min-h-0 px-4 pb-8",children:Lt.jsx(E3,{})})]})]})}},Symbol.toStringTag,{value:"Module"}));
/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */
var G5={version:"0.18.5"},K5=1252,J5=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Y5=function(e){-1!=J5.indexOf(e)&&(K5=e)},Z5=function(e){Y5(e)};function Q5(){Z5(1200),Y5(1252)}var X5,e6=function(e){return String.fromCharCode(e)},t6=function(e){return String.fromCharCode(e)},n6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r6(e){for(var t="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0;c<e.length;)s=(n=e.charCodeAt(c++))>>2,o=(3&n)<<4|(r=e.charCodeAt(c++))>>4,a=(15&r)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(r)?a=l=64:isNaN(i)&&(l=64),t+=n6.charAt(s)+n6.charAt(o)+n6.charAt(a)+n6.charAt(l);return t}function i6(e){var t="",n=0,r=0,i=0,s=0,o=0,a=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=n6.indexOf(e.charAt(l++))<<2|(s=n6.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&s)<<4|(o=n6.indexOf(e.charAt(l++)))>>2,64!==o&&(t+=String.fromCharCode(r)),i=(3&o)<<6|(a=n6.indexOf(e.charAt(l++))),64!==a&&(t+=String.fromCharCode(i));return t}var s6=function(){return"undefined"!=typeof Buffer&&"undefined"!=typeof process&&void 0!==process.versions&&!!process.versions.node}(),o6=function(){if("undefined"!=typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(gie){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function a6(e){return s6?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function l6(e){return s6?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var c6=function(e){return s6?o6(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function u6(e){if("undefined"==typeof ArrayBuffer)return c6(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function d6(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}var p6=s6?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:o6(e)}))}:function(e){if("undefined"!=typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),i=0;for(t=0,n=0;t<e.length;n+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))},h6=/\u0000/g,f6=/[\u0001-\u0006]/g;function m6(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function v6(e,t){var n=""+e;return n.length>=t?n:P8("0",t-n.length)+n}function g6(e,t){var n=""+e;return n.length>=t?n:P8(" ",t-n.length)+n}function y6(e,t){var n=""+e;return n.length>=t?n:n+P8(" ",t-n.length)}var b6=Math.pow(2,32);function x6(e,t){return e>b6||e<-b6?function(e,t){var n=""+Math.round(e);return n.length>=t?n:P8("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:P8("0",t-n.length)+n}(Math.round(e),t)}function w6(e,t){return t=t||0,e.length>=7+t&&103==(32|e.charCodeAt(t))&&101==(32|e.charCodeAt(t+1))&&110==(32|e.charCodeAt(t+2))&&101==(32|e.charCodeAt(t+3))&&114==(32|e.charCodeAt(t+4))&&97==(32|e.charCodeAt(t+5))&&108==(32|e.charCodeAt(t+6))}var S6=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],C6=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]],E6={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},T6={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},N6={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function P6(e,t,n){for(var r=e<0?-1:1,i=e*r,s=0,o=1,a=0,l=1,c=0,u=0,d=Math.floor(i);c<t&&(a=(d=Math.floor(i))*o+s,u=d*c+l,!(i-d<5e-8));)i=1/(i-d),s=o,o=a,l=c,c=u;if(u>t&&(c>t?(u=l,a=s):(u=c,a=o)),!n)return[0,r*a,u];var p=Math.floor(r*a/u);return[p,r*a-p*u,u]}function R6(e,t,n){if(e>2958465||e<0)return null;var r=0|e,i=Math.floor(86400*(e-r)),s=0,o=[],a={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),t&&t.date1904&&(r+=1462),a.u>.9999&&(a.u=0,86400==++i&&(a.T=i=0,++r,++a.D)),60===r)o=n?[1317,10,29]:[1900,2,29],s=3;else if(0===r)o=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=function(e,t){t[0]-=581;var n=e.getDay();return e<60&&(n=(n+6)%7),n}(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}var I6=new Date(1899,11,31,0,0,0),k6=I6.getTime(),j6=new Date(1900,2,1,0,0,0);function _6(e,t){var n=e.getTime();return t?n-=1262304e5:e>=j6&&(n+=864e5),(n-(k6+6e4*(e.getTimezoneOffset()-I6.getTimezoneOffset())))/864e5}function A6(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function O6(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=A6(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=A6(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),A6(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function D6(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):O6(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return n8(14,_6(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function M6(e,t,n,r){var i,s="",o=0,a=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:i=l%100,c=2;break;default:i=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:i=n.m,c=t.length;break;case 3:return C6[n.m-1][1];case 5:return C6[n.m-1][0];default:return C6[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:i=n.d,c=t.length;break;case 3:return S6[n.q][0];default:return S6[n.q][1]}break;case 104:switch(t.length){case 1:case 2:i=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:i=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:i=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(a=r>=2?3===r?1e3:100:1===r?10:1,(o=Math.round(a*(n.S+n.u)))>=60*a&&(o=0),"s"===t?0===o?"0":""+o/a:(s=v6(o,2+r),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):v6(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":i=24*n.D+n.H;break;case"[m]":case"[mm]":i=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":i=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:i=l,c=1}return c>0?v6(i,c):""}function L6(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var z6=/%/g;function F6(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+F6(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),-1===(n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).indexOf("e")){var o=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+s)%i)+"."+r.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var B6=/# (\?+)( ?)\/( ?)(\d+)/,U6=/^#*0*\.([0#]+)/,W6=/\).*[0#]/,$6=/\(###\) ###\\?-####/;function H6(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function V6(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function q6(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function G6(e,t,n){if(40===e.charCodeAt(0)&&!t.match(W6)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?G6("n",r,n):"("+G6("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return Y6(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(z6,""),i=t.length-r.length;return Y6(e,r,n*Math.pow(10,2*i))+P8("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return F6(t,n);if(36===t.charCodeAt(0))return"$"+G6(e,t.substr(" "==t.charAt(1)?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+x6(l,t.length);if(t.match(/^[#?]+$/))return"0"===(i=x6(n,0))&&(i=""),i.length>t.length?i:H6(t.substr(0,t.length-i.length))+i;if(s=t.match(B6))return function(e,t,n){var r=parseInt(e[4],10),i=Math.round(t*r),s=Math.floor(i/r),o=i-s*r,a=r;return n+(0===s?"":""+s)+" "+(0===o?P8(" ",e[1].length+1+e[4].length):g6(o,e[1].length)+e[2]+"/"+e[3]+v6(a,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+x6(l,t.length-t.indexOf("0"));if(s=t.match(U6))return i=V6(n,s[1].length).replace(/^([^\.]+)$/,"$1."+H6(s[1])).replace(/\.$/,"."+H6(s[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+P8("0",H6(s[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+V6(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+L6(x6(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+G6(e,t,-n):L6(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,s[1].length)))+"."+v6(q6(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return G6(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=m6(G6(e,t.replace(/[\\-]/g,""),n)),o=0,m6(m6(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return o<i.length?i.charAt(o++):"0"===e?"0":""}));if(t.match($6))return"("+(i=G6(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=P6(l,Math.pow(10,o)-1,!1),i=""+c," "==(u=Y6("n",s[1],a[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=y6(a[2],o)).length<s[4].length&&(u=H6(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),c+((a=P6(l,Math.pow(10,o)-1,!0))[0]||(a[1]?"":"0"))+" "+(a[1]?g6(a[1],o)+s[2]+"/"+s[3]+y6(a[2],o):P8(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=x6(n,0),t.length<=i.length?i:H6(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=t.indexOf(".")-o,p=t.length-i.length-d;return H6(t.substr(0,d)+i+t.substr(t.length-p))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=q6(n,s[1].length),n<0?"-"+G6(e,t,-n):L6(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?v6(0,3-e.length):"")+e})+"."+v6(o,s[1].length);switch(t){case"###,##0.00":return G6(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var h=L6(x6(l,0));return"0"!==h?c+h:"";case"###,###.00":return G6(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return G6(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function K6(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+K6(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),!(n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+s)%i)+"."+r.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function J6(e,t,n){if(40===e.charCodeAt(0)&&!t.match(W6)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?J6("n",r,n):"("+J6("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return Y6(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(z6,""),i=t.length-r.length;return Y6(e,r,n*Math.pow(10,2*i))+P8("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return K6(t,n);if(36===t.charCodeAt(0))return"$"+J6(e,t.substr(" "==t.charAt(1)?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+v6(l,t.length);if(t.match(/^[#?]+$/))return i=""+n,0===n&&(i=""),i.length>t.length?i:H6(t.substr(0,t.length-i.length))+i;if(s=t.match(B6))return function(e,t,n){return n+(0===t?"":""+t)+P8(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+v6(l,t.length-t.indexOf("0"));if(s=t.match(U6))return i=(i=(""+n).replace(/^([^\.]+)$/,"$1."+H6(s[1])).replace(/\.$/,"."+H6(s[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+P8("0",H6(s[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+L6(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+J6(e,t,-n):L6(""+n)+"."+P8("0",s[1].length);if(s=t.match(/^#,#*,#0/))return J6(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=m6(J6(e,t.replace(/[\\-]/g,""),n)),o=0,m6(m6(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return o<i.length?i.charAt(o++):"0"===e?"0":""}));if(t.match($6))return"("+(i=J6(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=P6(l,Math.pow(10,o)-1,!1),i=""+c," "==(u=Y6("n",s[1],a[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=y6(a[2],o)).length<s[4].length&&(u=H6(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),c+((a=P6(l,Math.pow(10,o)-1,!0))[0]||(a[1]?"":"0"))+" "+(a[1]?g6(a[1],o)+s[2]+"/"+s[3]+y6(a[2],o):P8(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=""+n,t.length<=i.length?i:H6(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=t.indexOf(".")-o,p=t.length-i.length-d;return H6(t.substr(0,d)+i+t.substr(t.length-p))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+J6(e,t,-n):L6(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?v6(0,3-e.length):"")+e})+"."+v6(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=L6(""+l);return"0"!==h?c+h:"";default:if(t.match(/\.[0#?]*$/))return J6(e,t.slice(0,t.lastIndexOf(".")),n)+H6(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Y6(e,t,n){return(0|n)===n?J6(e,t,n):G6(e,t,n)}var Z6=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Q6(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":w6(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("/"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(Z6))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var X6=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function e8(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function t8(e,t){var n=function(e){for(var t=[],n=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(i,r-i),i=r+1}if(t[t.length]=e.substr(i),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!=typeof t)return[4,4===n.length||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var s=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,s];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var o=n[0].match(X6),a=n[1].match(X6);return e8(t,o)?[r,n[0]]:e8(t,a)?[r,n[1]]:[r,n[null!=o&&null!=a?2:1]]}return[r,s]}function n8(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:E6)[e])&&(r=n.table&&n.table[T6[e]]||E6[T6[e]]),null==r&&(r=N6[e]||"General")}if(w6(r,0))return D6(t,n);t instanceof Date&&(t=_6(t,n.date1904));var i=t8(r,t);if(w6(i[1]))return D6(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var i,s,o,a=[],l="",c=0,u="",d="t",p="H";c<e.length;)switch(u=e.charAt(c)){case"G":if(!w6(e,c))throw new Error("unrecognized character "+u+" in "+e);a[a.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(o=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(o);a[a.length]={t:"t",v:l},++c;break;case"\\":var h=e.charAt(++c),f="("===h||")"===h?h:"t";a[a.length]={t:f,v:h},++c;break;case"_":a[a.length]={t:"t",v:" "},c+=2;break;case"@":a[a.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==i&&null==(i=R6(t,n,"2"===e.charAt(c+1))))return"";a[a.length]={t:"X",v:e.substr(c,2)},d=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==i&&null==(i=R6(t,n)))return"";for(l=u;++c<e.length&&e.charAt(c).toLowerCase()===u;)l+=u;"m"===u&&"h"===d.toLowerCase()&&(u="M"),"h"===u&&(u=p),a[a.length]={t:u,v:l},d=u;break;case"A":case"a":case"":var m={t:u,v:u};if(null==i&&(i=R6(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=i&&(m.v=i.H>=12?"P":"A"),m.t="T",p="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"PM":"AM"),m.t="T",c+=5,p="h"):"/"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"":""),m.t="T",c+=5,p="h"):(m.t="t",++c),null==i&&"T"===m.t)return"";a[a.length]=m,d=u;break;case"[":for(l=u;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(Z6)){if(null==i&&null==(i=R6(t,n)))return"";a[a.length]={t:"Z",v:l.toLowerCase()},d=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",Q6(e)||(a[a.length]={t:"t",v:l}));break;case".":if(null!=i){for(l=u;++c<e.length&&"0"===(u=e.charAt(c));)l+=u;a[a.length]={t:"s",v:l};break}case"0":case"#":for(l=u;++c<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(c))>-1;)l+=u;a[a.length]={t:"n",v:l};break;case"?":for(l=u;e.charAt(++c)===u;)l+=u;a[a.length]={t:u,v:l},d=u;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":a[a.length]={t:1===r?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=u;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);a[a.length]={t:"D",v:l};break;case" ":a[a.length]={t:u,v:u},++c;break;case"$":a[a.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);a[a.length]={t:"t",v:u},++c}var v,g=0,y=0;for(c=a.length-1,d="t";c>=0;--c)switch(a[c].t){case"h":case"H":a[c].t=p,d="h",g<1&&(g=1);break;case"s":(v=a[c].v.match(/\.0+$/))&&(y=Math.max(y,v[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":d=a[c].t;break;case"m":"s"===d&&(a[c].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[c].v.match(/[Hh]/)&&(g=1),g<2&&a[c].v.match(/[Mm]/)&&(g=2),g<3&&a[c].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M)}var b,x="";for(c=0;c<a.length;++c)switch(a[c].t){case"t":case"T":case" ":case"D":break;case"X":a[c].v="",a[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[c].v=M6(a[c].t.charCodeAt(0),a[c].v,i,y),a[c].t="t";break;case"n":case"?":for(b=c+1;null!=a[b]&&("?"===(u=a[b].t)||"D"===u||(" "===u||"t"===u)&&null!=a[b+1]&&("?"===a[b+1].t||"t"===a[b+1].t&&"/"===a[b+1].v)||"("===a[c].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===a[b].v||" "===a[b].v&&null!=a[b+1]&&"?"==a[b+1].t));)a[c].v+=a[b].v,a[b]={v:"",t:";"},++b;x+=a[c].v,c=b-1;break;case"G":a[c].t="t",a[c].v=D6(t,n)}var w,S,C="";if(x.length>0){40==x.charCodeAt(0)?(w=t<0&&45===x.charCodeAt(0)?-t:t,S=Y6("n",x,w)):(S=Y6("n",x,w=t<0&&r>1?-t:t),w<0&&a[0]&&"t"==a[0].t&&(S=S.substr(1),a[0].v="-"+a[0].v)),b=S.length-1;var E=a.length;for(c=0;c<a.length;++c)if(null!=a[c]&&"t"!=a[c].t&&a[c].v.indexOf(".")>-1){E=c;break}var T=a.length;if(E===a.length&&-1===S.indexOf("E")){for(c=a.length-1;c>=0;--c)null!=a[c]&&-1!=="n?".indexOf(a[c].t)&&(b>=a[c].v.length-1?(b-=a[c].v.length,a[c].v=S.substr(b+1,a[c].v.length)):b<0?a[c].v="":(a[c].v=S.substr(0,b+1),b=-1),a[c].t="t",T=c);b>=0&&T<a.length&&(a[T].v=S.substr(0,b+1)+a[T].v)}else if(E!==a.length&&-1===S.indexOf("E")){for(b=S.indexOf(".")-1,c=E;c>=0;--c)if(null!=a[c]&&-1!=="n?".indexOf(a[c].t)){for(s=a[c].v.indexOf(".")>-1&&c===E?a[c].v.indexOf(".")-1:a[c].v.length-1,C=a[c].v.substr(s+1);s>=0;--s)b>=0&&("0"===a[c].v.charAt(s)||"#"===a[c].v.charAt(s))&&(C=S.charAt(b--)+C);a[c].v=C,a[c].t="t",T=c}for(b>=0&&T<a.length&&(a[T].v=S.substr(0,b+1)+a[T].v),b=S.indexOf(".")+1,c=E;c<a.length;++c)if(null!=a[c]&&(-1!=="n?(".indexOf(a[c].t)||c===E)){for(s=a[c].v.indexOf(".")>-1&&c===E?a[c].v.indexOf(".")+1:0,C=a[c].v.substr(0,s);s<a[c].v.length;++s)b<S.length&&(C+=S.charAt(b++));a[c].v=C,a[c].t="t",T=c}}}for(c=0;c<a.length;++c)null!=a[c]&&"n?".indexOf(a[c].t)>-1&&(w=r>1&&t<0&&c>0&&"-"===a[c-1].v?-t:t,a[c].v=Y6(a[c].t,a[c].v,w),a[c].t="t");var N="";for(c=0;c!==a.length;++c)null!=a[c]&&(N+=a[c].v);return N}(i[1],t,n,i[0])}function r8(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(null!=E6[n]){if(E6[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return E6[t]=e,t}function i8(e){for(var t=0;392!=t;++t)void 0!==e[t]&&r8(e[t],t)}function s8(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',E6=e}var o8=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g,a8=function(){var e={version:"1.2.0"},t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}(),n=function(e){var t=0,n=0,r=0,i="undefined"!=typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)i[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=i[t]=n>>>8^e[255&n];var s=[];for(r=1;16!=r;++r)s[r-1]="undefined"!=typeof Int32Array?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return s}(t),r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=n[7],d=n[8],p=n[9],h=n[10],f=n[11],m=n[12],v=n[13],g=n[14];return e.table=t,e.bstr=function(e,n){for(var r=-1^n,i=0,s=e.length;i<s;)r=r>>>8^t[255&(r^e.charCodeAt(i++))];return~r},e.buf=function(e,n){for(var y=-1^n,b=e.length-15,x=0;x<b;)y=g[e[x++]^255&y]^v[e[x++]^y>>8&255]^m[e[x++]^y>>16&255]^f[e[x++]^y>>>24]^h[e[x++]]^p[e[x++]]^d[e[x++]]^u[e[x++]]^c[e[x++]]^l[e[x++]]^a[e[x++]]^o[e[x++]]^s[e[x++]]^i[e[x++]]^r[e[x++]]^t[e[x++]];for(b+=15;x<b;)y=y>>>8^t[255&(y^e[x++])];return~y},e.str=function(e,n){for(var r=-1^n,i=0,s=e.length,o=0,a=0;i<s;)(o=e.charCodeAt(i++))<128?r=r>>>8^t[255&(r^o)]:o<2048?r=(r=r>>>8^t[255&(r^(192|o>>6&31))])>>>8^t[255&(r^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),a=1023&e.charCodeAt(i++),r=(r=(r=(r=r>>>8^t[255&(r^(240|o>>8&7))])>>>8^t[255&(r^(128|o>>2&63))])>>>8^t[255&(r^(128|a>>6&15|(3&o)<<4))])>>>8^t[255&(r^(128|63&a))]):r=(r=(r=r>>>8^t[255&(r^(224|o>>12&15))])>>>8^t[255&(r^(128|o>>6&63))])>>>8^t[255&(r^(128|63&o))];return~r},e}(),l8=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function i(e,t){"string"==typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function s(e){Z7(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),i=e.read_shift(2),s=e.l+i,o={};21589===r&&(1&(n=e.read_shift(1))&&(o.mtime=e.read_shift(4)),i>5&&(2&n&&(o.atime=e.read_shift(4)),4&n&&(o.ctime=e.read_shift(4))),o.mtime&&(o.mt=new Date(1e3*o.mtime))),e.l=s,t[r]=o}return t}function o(){return e||(e={})}function a(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=S(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(s6&&Buffer.isBuffer(e)?e.toString("binary"):S(e)).split("\r\n"),i=0,s="";for(i=0;i<r.length;++i)if(s=r[i],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),n||(n=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),s.slice(0,n.length)!=n););var o=(r[1]||"").match(/boundary="(.*?)"/);if(!o)throw new Error("MAD cannot find boundary");var a="--"+(o[1]||""),l=[],c=[],u={FileIndex:l,FullPaths:c};p(u);var d,h=0;for(i=0;i<r.length;++i){var f=r[i];f!==a&&f!==a+"--"||(h++&&ce(u,r.slice(d,i),n),d=i)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,i,s,o,a,h=512,f=[],m=e.slice(0,512);Z7(m,0);var v=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(y,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(n=v[0]){case 3:h=512;break;case 4:h=4096;break;case 0:if(0==v[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==h&&Z7(m=e.slice(0,h),28);var b=e.slice(0,h);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,n);var x=m.read_shift(4,"i");if(3===n&&0!==x)throw new Error("# Directory Sectors: Expected 0 saw "+x);m.l+=4,s=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),o=m.read_shift(4,"i"),r=m.read_shift(4,"i"),a=m.read_shift(4,"i"),i=m.read_shift(4,"i");for(var w=-1,C=0;C<109&&!((w=m.read_shift(4,"i"))<0);++C)f[C]=w;var E=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],i=1;i<n;++i)r[i-1]=e.slice(i*t,(i+1)*t);return r[n-1]=e.slice(n*t),r}(e,h);c(a,i,E,h,f);var T=function(e,t,n,r){var i=e.length,s=[],o=[],a=[],l=[],c=r-1,u=0,d=0,p=0,h=0;for(u=0;u<i;++u)if(a=[],(p=u+t)>=i&&(p-=i),!o[p]){l=[];var f=[];for(d=p;d>=0;){f[d]=!0,o[d]=!0,a[a.length]=d,l.push(e[d]);var m=n[Math.floor(4*d/r)];if(r<4+(h=4*d&c))throw new Error("FAT boundary crossed: "+d+" 4 "+r);if(!e[m])break;if(f[d=V7(e[m],h)])break}s[p]={nodes:a,data:w7([l])}}return s}(E,s,f,h);T[s].name="!Directory",r>0&&o!==g&&(T[o].name="!MiniFAT"),T[f[0]].name="!FAT",T.fat_addrs=f,T.ssz=h;var N=[],P=[],R=[];!function(e,t,n,r,i,s,o,a){for(var c,p=0,h=r.length?2:0,f=t[e].data,m=0,v=0;m<f.length;m+=128){var y=f.slice(m,m+128);Z7(y,64),v=y.read_shift(2),c=C7(y,0,v-h),r.push(c);var b={name:c,type:y.read_shift(1),color:y.read_shift(1),L:y.read_shift(4,"i"),R:y.read_shift(4,"i"),C:y.read_shift(4,"i"),clsid:y.read_shift(16),state:y.read_shift(4,"i"),start:0,size:0};0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(b.ct=d(y,y.l-8)),0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(b.mt=d(y,y.l-8)),b.start=y.read_shift(4,"i"),b.size=y.read_shift(4,"i"),b.size<0&&b.start<0&&(b.size=b.type=0,b.start=g,b.name=""),5===b.type?(p=b.start,i>0&&p!==g&&(t[p].name="!StreamData")):b.size>=4096?(b.storage="fat",void 0===t[b.start]&&(t[b.start]=u(n,b.start,t.fat_addrs,t.ssz)),t[b.start].name=b.name,b.content=t[b.start].data.slice(0,b.size)):(b.storage="minifat",b.size<0?b.size=0:p!==g&&b.start!==g&&t[p]&&(b.content=l(b,t[p].data,(t[a]||{}).data))),b.content&&Z7(b.content,0),s[c]=b,o.push(b)}}(s,T,E,N,r,{},P,o),function(e,t,n){for(var r=0,i=0,s=0,o=0,a=0,l=n.length,c=[],u=[];r<l;++r)c[r]=u[r]=r,t[r]=n[r];for(;a<u.length;++a)i=e[r=u[a]].L,s=e[r].R,o=e[r].C,c[r]===r&&(-1!==i&&c[i]!==i&&(c[r]=c[i]),-1!==s&&c[s]!==s&&(c[r]=c[s])),-1!==o&&(c[o]=r),-1!==i&&r!=c[r]&&(c[i]=c[r],u.lastIndexOf(i)<a&&u.push(i)),-1!==s&&r!=c[r]&&(c[s]=c[r],u.lastIndexOf(s)<a&&u.push(s));for(r=1;r<l;++r)c[r]===r&&(-1!==s&&c[s]!==s?c[r]=c[s]:-1!==i&&c[i]!==i&&(c[r]=c[i]));for(r=1;r<l;++r)if(0!==e[r].type){if((a=r)!=c[a])do{a=c[a],t[r]=t[a]+"/"+t[r]}while(0!==a&&-1!==c[a]&&a!=c[a]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(P,R,N),N.shift();var I={FileIndex:P,FullPaths:R};return t&&t.raw&&(I.raw={header:b,sectors:E}),I}function l(e,t,n){for(var r=e.start,i=e.size,s=[],o=r;n&&i>0&&o>=0;)s.push(t.slice(o*v,o*v+v)),i-=v,o=V7(n,4*o);return 0===s.length?X7(0):p6(s).slice(0,e.size)}function c(e,t,n,r,i){var s=g;if(e===g){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var o=n[e],a=(r>>>2)-1;if(!o)return;for(var l=0;l<a&&(s=V7(o,4*l))!==g;++l)i.push(s);c(V7(o,r-4),t-1,n,r,i)}}function u(e,t,n,r,i){var s=[],o=[];i||(i=[]);var a=r-1,l=0,c=0;for(l=t;l>=0;){i[l]=!0,s[s.length]=l,o.push(e[l]);var u=n[Math.floor(4*l/r)];if(r<4+(c=4*l&a))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[u])break;l=V7(e[u],c)}return{nodes:s,data:w7([o])}}function d(e,t){return new Date(1e3*(H7(e,t+4)/1e7*Math.pow(2,32)+H7(e,t)/1e7-11644473600))}function p(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="Sh33tJ5";if(!l8.find(e,"/"+t)){var n=X7(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),h(e)}}(e)}function h(e,t){p(e);for(var i=!1,s=!1,o=e.FullPaths.length-1;o>=0;--o){var a=e.FileIndex[o];switch(a.type){case 0:s?i=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(a.R*a.L*a.C)&&(i=!0),a.R>-1&&a.L>-1&&a.R==a.L&&(i=!0);break;default:i=!0}}if(i||t){var l=new Date(1987,1,19),c=0,u=Object.create?Object.create(null):{},d=[];for(o=0;o<e.FullPaths.length;++o)u[e.FullPaths[o]]=!0,0!==e.FileIndex[o].type&&d.push([e.FullPaths[o],e.FileIndex[o]]);for(o=0;o<d.length;++o){var h=n(d[o][0]);(s=u[h])||(d.push([h,{name:r(h).replace("/",""),type:1,clsid:x,ct:l,mt:l,content:null}]),u[h]=!0)}for(d.sort(function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0,s=0,o=Math.min(n.length,r.length);i<o;++i){if(s=n[i].length-r[i].length)return s;if(n[i]!=r[i])return n[i]<r[i]?-1:1}return n.length-r.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],o=0;o<d.length;++o)e.FullPaths[o]=d[o][0],e.FileIndex[o]=d[o][1];for(o=0;o<d.length;++o){var f=e.FileIndex[o],m=e.FullPaths[o];if(f.name=r(m).replace("/",""),f.L=f.R=f.C=-(f.color=1),f.size=f.content?f.content.length:0,f.start=0,f.clsid=f.clsid||x,0===o)f.C=d.length>1?1:-1,f.size=0,f.type=5;else if("/"==m.slice(-1)){for(c=o+1;c<d.length&&n(e.FullPaths[c])!=m;++c);for(f.C=c>=d.length?-1:c,c=o+1;c<d.length&&n(e.FullPaths[c])!=n(m);++c);f.R=c>=d.length?-1:c,f.type=1}else n(e.FullPaths[o+1]||"")==n(m)&&(f.R=o+1),f.type=2}}}function f(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",i=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],s=e.FullPaths[0],o=s,a=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(o=e.FullPaths[l].slice(s.length),(a=e.FileIndex[l]).size&&a.content&&"Sh33tJ5"!=o){o=o.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=a.content,u=s6&&Buffer.isBuffer(c)?c.toString("binary"):S(c),d=0,p=Math.min(1024,u.length),h=0,f=0;f<=p;++f)(h=u.charCodeAt(f))>=32&&h<128&&++d;var m=d>=4*p/5;i.push(r),i.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+o),i.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),i.push("Content-Type: "+oe(a,o)),i.push(""),i.push(m?le(u):ae(u))}return i.push(r+"--\r\n"),i.join("\r\n")}(e,n);if(h(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],s=[],o=X7(1),a=n.compression?8:0,l=0,c=0,u=0,d=0,p=0,h=e.FullPaths[0],f=h,m=e.FileIndex[0],v=[],g=0;for(c=1;c<e.FullPaths.length;++c)if(f=e.FullPaths[c].slice(h.length),(m=e.FileIndex[c]).size&&m.content&&"Sh33tJ5"!=f){var y=d,b=X7(f.length);for(u=0;u<f.length;++u)b.write_shift(1,127&f.charCodeAt(u));b=b.slice(0,b.l),v[p]=a8.buf(m.content,0);var x=m.content;8==a&&(x=C(x)),(o=X7(30)).write_shift(4,67324752),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,a),m.mt?i(o,m.mt):o.write_shift(4,0),o.write_shift(-4,v[p]),o.write_shift(4,x.length),o.write_shift(4,m.content.length),o.write_shift(2,b.length),o.write_shift(2,0),d+=o.length,r.push(o),d+=b.length,r.push(b),d+=x.length,r.push(x),(o=X7(46)).write_shift(4,33639248),o.write_shift(2,0),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,a),o.write_shift(4,0),o.write_shift(-4,v[p]),o.write_shift(4,x.length),o.write_shift(4,m.content.length),o.write_shift(2,b.length),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(4,0),o.write_shift(4,y),g+=o.l,s.push(o),g+=b.length,s.push(b),++p}return(o=X7(22)).write_shift(4,101010256),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,p),o.write_shift(2,p),o.write_shift(4,g),o.write_shift(4,d),o.write_shift(2,0),p6([p6(r),p6(s),o])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var i=e.FileIndex[r];if(i.content){var s=i.content.length;s>0&&(s<4096?t+=s+63>>6:n+=s+511>>9)}}for(var o=e.FullPaths.length+3>>2,a=t+127>>7,l=(t+7>>3)+n+o+a,c=l+127>>7,u=c<=109?0:Math.ceil((c-109)/127);l+c+u+127>>7>c;)u=++c<=109?0:Math.ceil((c-109)/127);var d=[1,u,c,a,o,n,t,0];return e.FileIndex[0].size=t<<6,d[7]=(e.FileIndex[0].start=d[0]+d[1]+d[2]+d[3]+d[4]+d[5])+(d[6]+7>>3),d}(e),s=X7(r[7]<<9),o=0,a=0;for(o=0;o<8;++o)s.write_shift(1,b[o]);for(o=0;o<8;++o)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),o=0;o<3;++o)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,r[2]),s.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:g),s.write_shift(4,r[3]),s.write_shift(-4,r[1]?r[0]-1:g),s.write_shift(4,r[1]),o=0;o<109;++o)s.write_shift(-4,o<r[2]?r[1]+o:-1);if(r[1])for(a=0;a<r[1];++a){for(;o<236+127*a;++o)s.write_shift(-4,o<r[2]?r[1]+o:-1);s.write_shift(-4,a===r[1]-1?g:a+1)}var l=function(e){for(a+=e;o<a-1;++o)s.write_shift(-4,o+1);e&&(++o,s.write_shift(-4,g))};for(a=o=0,a+=r[1];o<a;++o)s.write_shift(-4,w.DIFSECT);for(a+=r[2];o<a;++o)s.write_shift(-4,w.FATSECT);l(r[3]),l(r[4]);for(var c=0,u=0,d=e.FileIndex[0];c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&((u=d.content.length)<4096||(d.start=a,l(u+511>>9)));for(l(r[6]+7>>3);511&s.l;)s.write_shift(-4,w.ENDOFCHAIN);for(a=o=0,c=0;c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&(!(u=d.content.length)||u>=4096||(d.start=a,l(u+63>>6)));for(;511&s.l;)s.write_shift(-4,w.ENDOFCHAIN);for(o=0;o<r[4]<<2;++o){var p=e.FullPaths[o];if(p&&0!==p.length){d=e.FileIndex[o],0===o&&(d.start=d.size?d.start-1:g);var f=0===o&&n.root||d.name;if(u=2*(f.length+1),s.write_shift(64,f,"utf16le"),s.write_shift(2,u),s.write_shift(1,d.type),s.write_shift(1,d.color),s.write_shift(-4,d.L),s.write_shift(-4,d.R),s.write_shift(-4,d.C),d.clsid)s.write_shift(16,d.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,d.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,d.start),s.write_shift(4,d.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(o=1;o<e.FileIndex.length;++o)if((d=e.FileIndex[o]).size>=4096)if(s.l=d.start+1<<9,s6&&Buffer.isBuffer(d.content))d.content.copy(s,s.l,0,d.size),s.l+=d.size+511&-512;else{for(c=0;c<d.size;++c)s.write_shift(1,d.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(o=1;o<e.FileIndex.length;++o)if((d=e.FileIndex[o]).size>0&&d.size<4096)if(s6&&Buffer.isBuffer(d.content))d.content.copy(s,s.l,0,d.size),s.l+=d.size+63&-64;else{for(c=0;c<d.size;++c)s.write_shift(1,d.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(s6)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var m,v=64,g=-2,y="d0cf11e0a1b11ae1",b=[208,207,17,224,161,177,26,225],x="00000000000000000000000000000000",w={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:g,FREESECT:-1,HEADER_SIGNATURE:y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:x,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function S(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function C(e){return m?m.deflateRawSync(e):K(e)}var E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function P(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var R="undefined"!=typeof Uint8Array,I=R?new Uint8Array(256):[],k=0;k<256;++k)I[k]=P(k);function j(e,t){var n=I[255&e];return t<=8?n>>>8-t:(n=n<<8|I[e>>8&255],t<=16?n>>>16-t:(n=n<<8|I[e>>16&255])>>>24-t)}function _(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function A(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function O(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function D(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function M(e,t,n){var r=7&t,i=t>>>3,s=(1<<n)-1,o=e[i]>>>r;return n<8-r?o&s:(o|=e[i+1]<<8-r,n<16-r?o&s:(o|=e[i+2]<<16-r,n<24-r?o&s:(o|=e[i+3]<<24-r)&s))}function L(e,t,n){var r=7&t,i=t>>>3;return r<=5?e[i]|=(7&n)<<r:(e[i]|=n<<r&255,e[i+1]=(7&n)>>8-r),t+3}function z(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function F(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function B(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function U(e,t){var n=e.length,r=2*n>t?2*n:t+5,i=0;if(n>=t)return e;if(s6){var s=l6(r);if(e.copy)e.copy(s);else for(;i<e.length;++i)s[i]=e[i];return s}if(R){var o=new Uint8Array(r);if(o.set)o.set(e);else for(;i<n;++i)o[i]=e[i];return o}return e.length=r,e}function W(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function $(e,t,n){var r=1,i=0,s=0,o=0,a=0,l=e.length,c=R?new Uint16Array(32):W(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<n;++s)e[s]=0;l=e.length;var u=R?new Uint16Array(l):W(l);for(s=0;s<l;++s)c[i=e[s]]++,r<i&&(r=i),u[s]=0;for(c[0]=0,s=1;s<=r;++s)c[s+16]=a=a+c[s-1]<<1;for(s=0;s<l;++s)0!=(a=e[s])&&(u[s]=c[a+16]++);var d=0;for(s=0;s<l;++s)if(0!=(d=e[s]))for(a=j(u[s],r)>>r-d,o=(1<<r+4-d)-1;o>=0;--o)t[a|o<<d]=15&d|s<<4;return r}var H=R?new Uint16Array(512):W(512),V=R?new Uint16Array(32):W(32);if(!R){for(var q=0;q<512;++q)H[q]=0;for(q=0;q<32;++q)V[q]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);$(e,V,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);$(n,H,288)}();var G=function(){for(var e=R?new Uint8Array(32768):[],t=0,n=0;t<N.length-1;++t)for(;n<N[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=R?new Uint8Array(259):[];for(t=0,n=0;t<T.length-1;++t)for(;n<T[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),i=n+r==e.length;for(t.write_shift(1,+i),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var i=0,s=0,o=R?new Uint16Array(32768):[];s<t.length;){var a=Math.min(65535,t.length-s);if(a<10){for(7&(i=L(n,i,+!(s+a!=t.length)))&&(i+=8-(7&i)),n.l=i/8|0,n.write_shift(2,a),n.write_shift(2,65535&~a);a-- >0;)n[n.l++]=t[s++];i=8*n.l}else{i=L(n,i,+!(s+a!=t.length)+2);for(var l=0;a-- >0;){var c=t[s],u=-1,d=0;if((u=o[l=32767&(l<<5^c)])&&((u|=-32768&s)>s&&(u-=32768),u<s))for(;t[u+d]==t[s+d]&&d<250;)++d;if(d>2){(c=r[d])<=22?i=F(n,i,I[c+1]>>1)-1:(F(n,i,3),F(n,i+=5,I[c-23]>>5),i+=3);var p=c<8?0:c-4>>2;p>0&&(B(n,i,d-T[c]),i+=p),c=e[s-u],i=F(n,i,I[c]>>3),i-=3;var h=c<4?0:c-2>>1;h>0&&(B(n,i,s-u-N[c]),i+=h);for(var f=0;f<d;++f)o[l]=32767&s,l=32767&(l<<5^t[s]),++s;a-=d-1}else c<=143?c+=48:i=z(n,i,1),i=F(n,i,I[c]),o[l]=32767&s,++s}i=F(n,i,0)-1}}return n.l=(i+7)/8|0,n.l}(t,n)}}();function K(e){var t=X7(50+Math.floor(1.1*e.length)),n=G(e,t);return t.slice(0,n)}var J=R?new Uint16Array(32768):W(32768),Y=R?new Uint16Array(32768):W(32768),Z=R?new Uint16Array(128):W(128),Q=1,X=1;function ee(e,t){var n=O(e,t)+257,r=O(e,t+=5)+1,i=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var s=0,o=R?new Uint8Array(19):W(19),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=R?new Uint8Array(8):W(8),u=R?new Uint8Array(8):W(8),d=o.length,p=0;p<i;++p)o[E[p]]=s=A(e,t),l<s&&(l=s),c[s]++,t+=3;var h=0;for(c[0]=0,p=1;p<=l;++p)u[p]=h=h+c[p-1]<<1;for(p=0;p<d;++p)0!=(h=o[p])&&(a[p]=u[h]++);var f=0;for(p=0;p<d;++p)if(0!=(f=o[p])){h=I[a[p]]>>8-f;for(var m=(1<<7-f)-1;m>=0;--m)Z[h|m<<f]=7&f|p<<3}var v=[];for(l=1;v.length<n+r;)switch(t+=7&(h=Z[D(e,t)]),h>>>=3){case 16:for(s=3+_(e,t),t+=2,h=v[v.length-1];s-- >0;)v.push(h);break;case 17:for(s=3+A(e,t),t+=3;s-- >0;)v.push(0);break;case 18:for(s=11+D(e,t),t+=7;s-- >0;)v.push(0);break;default:v.push(h),l<h&&(l=h)}var g=v.slice(0,n),y=v.slice(n);for(p=n;p<286;++p)g[p]=0;for(p=r;p<30;++p)y[p]=0;return Q=$(g,J,286),X=$(y,Y,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[a6(t),2];for(var n=0,r=0,i=l6(t||1<<18),s=0,o=i.length>>>0,a=0,l=0;!(1&r);)if(r=A(e,n),n+=3,r>>>1!=0)for(r>>1==1?(a=9,l=5):(n=ee(e,n),a=Q,l=X);;){!t&&o<s+32767&&(o=(i=U(i,s+32767)).length);var c=M(e,n,a),u=r>>>1==1?H[c]:J[c];if(n+=15&u,(u>>>=4)>>>8&255){if(256==u)break;var d=(u-=257)<8?0:u-4>>2;d>5&&(d=0);var p=s+T[u];d>0&&(p+=M(e,n,d),n+=d),c=M(e,n,l),n+=15&(u=r>>>1==1?V[c]:Y[c]);var h=(u>>>=4)<4?0:u-2>>1,f=N[u];for(h>0&&(f+=M(e,n,h),n+=h),!t&&o<p&&(o=(i=U(i,p+100)).length);s<p;)i[s]=i[s-f],++s}else i[s++]=u}else{7&n&&(n+=8-(7&n));var m=e[n>>>3]|e[(n>>>3)+1]<<8;if(n+=32,m>0)for(!t&&o<s+m&&(o=(i=U(i,s+m)).length);m-- >0;)i[s++]=e[n>>>3],n+=8}return t?[i,n+7>>>3]:[i.slice(0,s),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!=typeof console&&console.error(t)}function re(e,t){var n=e;Z7(n,0);var r={FileIndex:[],FullPaths:[]};p(r,{root:t.root});for(var i=n.length-4;(80!=n[i]||75!=n[i+1]||5!=n[i+2]||6!=n[i+3])&&i>=0;)--i;n.l=i+4,n.l+=4;var o=n.read_shift(2);n.l+=6;var a=n.read_shift(4);for(n.l=a,i=0;i<o;++i){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),u=n.read_shift(2),d=n.read_shift(2),h=n.read_shift(2);n.l+=8;var f=n.read_shift(4),m=s(n.slice(n.l+u,n.l+u+d));n.l+=u+d+h;var v=n.l;n.l=f+4,ie(n,l,c,r,m),n.l=v}return r}function ie(e,t,n,r,i){e.l+=2;var o=e.read_shift(2),a=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,i=31&n,s=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(s-1),r.setDate(i);var o=31&t,a=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(a),r.setSeconds(o<<1),r}(e);if(8257&o)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),u=e.read_shift(4),d=e.read_shift(2),p=e.read_shift(2),h="",f=0;f<d;++f)h+=String.fromCharCode(e[e.l++]);if(p){var v=s(e.slice(e.l,e.l+p));(v[21589]||{}).mt&&(l=v[21589].mt),((i||{})[21589]||{}).mt&&(l=i[21589].mt)}e.l+=p;var g=e.slice(e.l,e.l+c);switch(a){case 8:g=function(e,t){if(!m)return te(e,t);var n=new(0,m.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+a)}var y=!1;8&o&&(134695760==e.read_shift(4)&&(e.read_shift(4),y=!0),c=e.read_shift(4),u=e.read_shift(4)),c!=t&&ne(y,"Bad compressed size: "+t+" != "+c),u!=n&&ne(y,"Bad uncompressed size: "+n+" != "+u),ue(r,h,g,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function oe(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&se[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&se[r[1]]?se[r[1]]:"application/octet-stream"}function ae(e){for(var t=r6(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),i=0;i<r.length;++i){var s=r[i];if(0!=s.length)for(var o=0;o<s.length;){var a=76,l=s.slice(o,o+a);"="==l.charAt(a-1)?a--:"="==l.charAt(a-2)?a-=2:"="==l.charAt(a-3)&&(a-=3),l=s.slice(o,o+a),(o+=a)<s.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var r,i="",s="",o="",a=0;a<10;++a){var l=t[a];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":i=c[2].trim();break;case"content-type":o=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++a,s.toLowerCase()){case"base64":r=c6(i6(t.slice(a).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var i=0;i<t.length;++i)t[i]=t[i].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return c6(t.join("\r\n"))}(t.slice(a));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var u=ue(e,i.slice(n.length),r,{unsafe:!0});o&&(u.ctype=o)}function ue(e,t,n,i){var s=i&&i.unsafe;s||p(e);var o=!s&&l8.find(e,t);if(!o){var a=e.FullPaths[0];t.slice(0,a.length)==a?a=t:("/"!=a.slice(-1)&&(a+="/"),a=(a+t).replace("//","/")),o={name:r(t),type:2},e.FileIndex.push(o),e.FullPaths.push(a),s||l8.utils.cfb_gc(e)}return o.content=n,o.size=n?n.length:0,i&&(i.CLSID&&(o.clsid=i.CLSID),i.mt&&(o.mt=i.mt),i.ct&&(o.ct=i.ct)),o}return t.find=function(e,t){var n=e.FullPaths.map(function(e){return e.toUpperCase()}),r=n.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),i=!1;47===t.charCodeAt(0)?(i=!0,t=n[0].slice(0,-1)+t):i=-1!==t.indexOf("/");var s=t.toUpperCase(),o=!0===i?n.indexOf(s):r.indexOf(s);if(-1!==o)return e.FileIndex[o];var a=!s.match(f6);for(s=s.replace(h6,""),a&&(s=s.replace(f6,"!")),o=0;o<n.length;++o){if((a?n[o].replace(f6,"!"):n[o]).replace(h6,"")==s)return e.FileIndex[o];if((a?r[o].replace(f6,"!"):r[o]).replace(h6,"")==s)return e.FileIndex[o]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||s6&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return o(),a(e.readFileSync(t),n)}(t,n);case"base64":return a(c6(i6(t)),n);case"binary":return a(c6(t),n)}return a(t,n)},t.parse=a,t.write=function(t,n){var r=f(t,n);switch(n&&n.type||"buffer"){case"file":return o(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:S(r);case"base64":return r6("string"==typeof r?r:S(r));case"buffer":if(s6)return Buffer.isBuffer(r)?r:o6(r);case"array":return"string"==typeof r?c6(r):r}return r},t.writeFile=function(t,n,r){o();var i=f(t,r);e.writeFileSync(n,i)},t.utils={cfb_new:function(e){var t={};return p(t,e),t},cfb_add:ue,cfb_del:function(e,t){p(e);var n=l8.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){p(e);var i=l8.find(e,t);if(i)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==i)return e.FileIndex[s].name=r(n),e.FullPaths[s]=n,!0;return!1},cfb_gc:function(e){h(e,!0)},ReadShift:G7,CheckField:Y7,prep_blob:Z7,bconcat:p6,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(gie){console.error("cannot use native zlib: "+(gie.message||gie))}},_deflateRaw:K,_inflateRaw:te,consts:w},t}();function c8(e){return"string"==typeof e?u6(e):Array.isArray(e)?function(e){if("undefined"==typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function u8(e,t,n){if("undefined"!=typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=u6(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?q8(t):t;if("undefined"!=typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!=typeof Blob){var i=new Blob([c8(r)],{type:"application/octet-stream"});if("undefined"!=typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if("undefined"!=typeof saveAs)return saveAs(i,e);if("undefined"!=typeof URL&&"undefined"!=typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if("object"==typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!=typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(null!=o.download)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&"undefined"!=typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if("undefined"!=typeof $&&"undefined"!=typeof File&&"undefined"!=typeof Folder)try{var a=File(e);return a.open("w"),a.encoding="binary",Array.isArray(t)&&(t=d6(t)),a.write(t),a.close(),t}catch(gie){if(!gie.message||!gie.message.match(/onstruct/))throw gie}throw new Error("cannot save file "+e)}function d8(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function p8(e,t){for(var n=[],r=d8(e),i=0;i!==r.length;++i)null==n[e[r[i]][t]]&&(n[e[r[i]][t]]=r[i]);return n}function h8(e){for(var t=[],n=d8(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function f8(e){for(var t=[],n=d8(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var m8=new Date(1899,11,30,0,0,0);function v8(e,t){return(e.getTime()-(m8.getTime()+6e4*(e.getTimezoneOffset()-m8.getTimezoneOffset())))/864e5}var g8=new Date,y8=m8.getTime()+6e4*(g8.getTimezoneOffset()-m8.getTimezoneOffset()),b8=g8.getTimezoneOffset();function x8(e){var t=new Date;return t.setTime(24*e*60*60*1e3+y8),t.getTimezoneOffset()!==b8&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-b8)),t}var w8=new Date("2017-02-19T19:06:09.000Z"),S8=isNaN(w8.getFullYear())?new Date("2/19/17"):w8,C8=2017==S8.getFullYear();function E8(e,t){var n=new Date(e);if(C8)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==S8.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function T8(e,t){if(s6&&Buffer.isBuffer(e))return e.toString("binary");if("undefined"!=typeof TextDecoder)try{var n={"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(e){return n[e]||e})}catch(gie){}for(var r=[],i=0;i!=e.length;++i)r.push(String.fromCharCode(e[i]));return r.join("")}function N8(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=N8(e[n]));return t}function P8(e,t){for(var n="";n.length<t;)n+=e;return n}function R8(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,function(e,t){return n=-n,t}),isNaN(t=Number(r))?t:t/n):t/n}var I8=["january","february","march","april","may","june","july","august","september","october","november","december"];function k8(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),i=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==I8.indexOf(o))return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}function j8(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=s6?o6(n):function(e){for(var t=[],n=0,r=e.length+250,i=a6(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|63&o;else if(o>=55296&&o<57344){o=64+(1023&o);var a=1023&e.charCodeAt(++s);i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|a>>6&15|(3&o)<<4,i[n++]=128|63&a}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|63&o;n>r&&(t.push(i.slice(0,n)),n=0,i=a6(65535),r=65530)}return t.push(i.slice(0,n)),p6(t)}(n),l8.utils.cfb_add(e,t,r);l8.utils.cfb_add(e,t,n)}else e.file(t,n)}function _8(){return l8.utils.cfb_new()}var A8='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',O8=h8({"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"}),D8=/[&<>'"]/g,M8=/[\u0000-\u0008\u000b-\u001f]/g;function L8(e){return(e+"").replace(D8,function(e){return O8[e]}).replace(M8,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function z8(e){return L8(e).replace(/ /g,"_x0020_")}var F8=/[\u0000-\u001f]/g;function B8(e){return(e+"").replace(D8,function(e){return O8[e]}).replace(/\n/g,"<br/>").replace(F8,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function U8(e){for(var t="",n=0,r=0,i=0,s=0,o=0,a=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(i=e.charCodeAt(n++),r>191&&r<224?(o=(31&r)<<6,o|=63&i,t+=String.fromCharCode(o)):(s=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s):(a=((7&r)<<18|(63&i)<<12|(63&s)<<6|63&(o=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(a>>>10&1023)),t+=String.fromCharCode(56320+(1023&a)))));return t}function W8(e){var t,n,r,i=a6(2*e.length),s=1,o=0,a=0;for(n=0;n<e.length;n+=s)s=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),s=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),s=3):(s=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),a=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==a&&(i[o++]=255&a,i[o++]=a>>>8,a=0),i[o++]=t%256,i[o++]=t>>>8;return i.slice(0,o).toString("ucs2")}function $8(e){return o6(e,"binary").toString("utf8")}var H8="foo bar baz",V8=s6&&($8(H8)==U8(H8)&&$8||W8(H8)==U8(H8)&&W8)||U8,q8=s6?function(e){return o6(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,i=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,i=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(63&i)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},G8=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}(),K8=/(^\s|\s$|\n)/;function J8(e,t){return"<"+e+(t.match(K8)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Y8(e){return d8(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Z8(e,t,n){return"<"+e+(null!=n?Y8(n):"")+(null!=t?(t.match(K8)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Q8(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(gie){if(t)throw gie}return""}var X8="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",e7="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",t7="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",n7="http://schemas.openxmlformats.org/package/2006/content-types",r7="http://schemas.openxmlformats.org/package/2006/relationships",i7="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",s7="http://purl.org/dc/elements/1.1/",o7="http://purl.org/dc/terms/",a7="http://purl.org/dc/dcmitype/",l7="http://schemas.openxmlformats.org/officeDocument/2006/relationships",c7="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",u7="http://www.w3.org/2001/XMLSchema-instance",d7="http://www.w3.org/2001/XMLSchema",p7=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],h7="urn:schemas-microsoft-com:office:office",f7="urn:schemas-microsoft-com:office:excel",m7="urn:schemas-microsoft-com:office:spreadsheet",v7="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",g7="http://macVmlSchemaUri",y7="urn:schemas-microsoft-com:vml",b7="http://www.w3.org/TR/REC-html40",x7=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,i=e[0][n].length;r<i;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},w7=s6?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:o6(e)})):x7(e)}:x7,S7=function(e,t,n){for(var r=[],i=t;i<n;i+=2)r.push(String.fromCharCode(W7(e,i)));return r.join("").replace(h6,"")},C7=s6?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(h6,""):S7(e,t,n)}:S7,E7=function(e,t,n){for(var r=[],i=t;i<t+n;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},T7=s6?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):E7(e,t,n)}:E7,N7=function(e,t,n){for(var r=[],i=t;i<n;i++)r.push(String.fromCharCode(U7(e,i)));return r.join("")},P7=s6?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):N7(e,t,n)}:N7,R7=function(e,t){var n=H7(e,t);return n>0?P7(e,t+4,t+4+n-1):""},I7=R7,k7=function(e,t){var n=H7(e,t);return n>0?P7(e,t+4,t+4+n-1):""},j7=k7,_7=function(e,t){var n=2*H7(e,t);return n>0?P7(e,t+4,t+4+n-1):""},A7=_7,O7=function(e,t){var n=H7(e,t);return n>0?C7(e,t+4,t+4+n):""},D7=O7,M7=function(e,t){var n=H7(e,t);return n>0?P7(e,t+4,t+4+n):""},L7=M7,z7=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),i=15&e[t+6],s=5;s>=0;--s)i=256*i+e[t+s];return 2047==r?0==i?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}(e,t)},F7=z7,B7=function(e){return Array.isArray(e)||"undefined"!=typeof Uint8Array&&e instanceof Uint8Array};s6&&(I7=function(e,t){if(!Buffer.isBuffer(e))return R7(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},j7=function(e,t){if(!Buffer.isBuffer(e))return k7(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},A7=function(e,t){if(!Buffer.isBuffer(e))return _7(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},D7=function(e,t){if(!Buffer.isBuffer(e))return O7(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},L7=function(e,t){if(!Buffer.isBuffer(e))return M7(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},F7=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):z7(e,t)},B7=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!=typeof Uint8Array&&e instanceof Uint8Array});var U7=function(e,t){return e[t]},W7=function(e,t){return 256*e[t+1]+e[t]},$7=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},H7=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},V7=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},q7=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function G7(e,t){var n,r,i,s,o,a,l="",c=[];switch(t){case"dbcs":if(a=this.l,s6&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(o=0;o<e;++o)l+=String.fromCharCode(W7(this,a)),a+=2;e*=2;break;case"utf8":l=P7(this,this.l,this.l+e);break;case"utf16le":e*=2,l=C7(this,this.l,this.l+e);break;case"wstr":return G7.call(this,e,"dbcs");case"lpstr-ansi":l=I7(this,this.l),e=4+H7(this,this.l);break;case"lpstr-cp":l=j7(this,this.l),e=4+H7(this,this.l);break;case"lpwstr":l=A7(this,this.l),e=4+2*H7(this,this.l);break;case"lpp4":e=4+H7(this,this.l),l=D7(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+H7(this,this.l),l=L7(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(i=U7(this,this.l+e++));)c.push(e6(i));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(i=W7(this,this.l+e));)c.push(e6(i)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",a=this.l,o=0;o<e;++o){if(this.lens&&-1!==this.lens.indexOf(a))return i=U7(this,a),this.l=a+1,s=G7.call(this,e-o,i?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(e6(W7(this,a))),a+=2}l=c.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(l="",a=this.l,o=0;o!=e;++o){if(this.lens&&-1!==this.lens.indexOf(a))return i=U7(this,a),this.l=a+1,s=G7.call(this,e-o,i?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(e6(U7(this,a))),a+=1}l=c.join("");break;default:switch(e){case 1:return n=U7(this,this.l),this.l++,n;case 2:return n=("i"===t?$7:W7)(this,this.l),this.l+=2,n;case 4:case-4:return"i"!==t&&128&this[this.l+3]?(r=H7(this,this.l),this.l+=4,r):(n=(e>0?V7:q7)(this,this.l),this.l+=4,n);case 8:case-8:if("f"===t)return r=8==e?F7(this,this.l):F7([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=T7(this,this.l,e)}}return this.l+=e,l}var K7=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function J7(e,t,n){var r=0,i=0;if("dbcs"===n){for(i=0;i!=t.length;++i)K7(this,t.charCodeAt(i),this.l+2*i);r=2*t.length}else if("sbcs"===n){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=255&t.charCodeAt(i);r=t.length}else{if("hex"===n){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===n){var s=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var o=t.charCodeAt(i);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255}(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,i=0,s=0,o=r?-t:t;isFinite(o)?0==o?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(t)?26985:0);for(var a=0;a<=5;++a,s/=256)e[n+a]=255&s;e[n+6]=(15&i)<<4|15&s,e[n+7]=i>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255}(this,t,this.l)}}return this.l+=r,this}function Y7(e,t){var n=T7(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function Z7(e,t){e.l=t,e.read_shift=G7,e.chk=Y7,e.write_shift=J7}function Q7(e,t){e.l+=t}function X7(e){var t=a6(e);return Z7(t,0),t}function e9(){var e=[],t=s6?256:2048,n=function(e){var t=X7(e);return Z7(t,0),t},r=n(t),i=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},s=function(e){return r&&e<r.length-r.l?r:(i(),r=n(Math.max(e+1,t)))};return{next:s,push:function(e){i(),null==(r=e).l&&(r.l=r.length),s(t)},end:function(){return i(),p6(e)},_bufs:e}}function t9(e,t,n,r){var i,s=+t;if(!isNaN(s)){r||(r=sre[s].p||(n||[]).length||0),i=1+(s>=128?1:0)+1,r>=128&&++i,r>=16384&&++i,r>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,128+(127&s)),o.write_shift(1,s>>7));for(var a=0;4!=a;++a){if(!(r>=128)){o.write_shift(1,r);break}o.write_shift(1,128+(127&r)),r>>=7}r>0&&B7(n)&&e.push(n)}}function n9(e,t,n){var r=N8(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function r9(e,t,n){var r=N8(e);return r.s=n9(r.s,t.s,n),r.e=n9(r.e,t.s,n),r}function i9(e,t){if(e.cRel&&e.c<0)for(e=N8(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=N8(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=d9(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function s9(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?i9(e.s,t.biff)+":"+i9(e.e,t.biff):(e.s.rRel?"":"$")+a9(e.s.r)+":"+(e.e.rRel?"":"$")+a9(e.e.r):(e.s.cRel?"":"$")+c9(e.s.c)+":"+(e.e.cRel?"":"$")+c9(e.e.c)}function o9(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function a9(e){return""+(e+1)}function l9(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function c9(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function u9(e){for(var t=0,n=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:t-1}}function d9(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function p9(e){var t=e.indexOf(":");return-1==t?{s:u9(e),e:u9(e)}:{s:u9(e.slice(0,t)),e:u9(e.slice(t+1))}}function h9(e,t){return void 0===t||"number"==typeof t?h9(e.s,e.e):("string"!=typeof e&&(e=d9(e)),"string"!=typeof t&&(t=d9(t)),e==t?e:e+":"+t)}function f9(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=e.length;for(n=0;r<s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.s.c=--n,n=0;r<s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(t.s.r=--n,r===s||10!=i)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.e.c=--n,n=0;r!=s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return t.e.r=--n,t}function m9(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=n8(e.z,n?v8(t):t)}catch(gie){}try{return e.w=n8((e.XF||{}).numFmtId||(n?14:0),n?v8(t):t)}catch(gie){return""+t}}function v9(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?Z9[e.v]||e.v:m9(e,null==t?e.v:t))}function g9(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function y9(e,t,n){var r=n||{},i=e?Array.isArray(e):r.dense,s=e||(i?[]:{}),o=0,a=0;if(s&&null!=r.origin){if("number"==typeof r.origin)o=r.origin;else{var l="string"==typeof r.origin?u9(r.origin):r.origin;o=l.r,a=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=f9(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),-1==o&&(c.e.r=o=u.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[d].length;++p)if(void 0!==t[d][p]){var h={v:t[d][p]},f=o+d,m=a+p;if(c.s.r>f&&(c.s.r=f),c.s.c>m&&(c.s.c=m),c.e.r<f&&(c.e.r=f),c.e.c<m&&(c.e.c=m),!t[d][p]||"object"!=typeof t[d][p]||Array.isArray(t[d][p])||t[d][p]instanceof Date)if(Array.isArray(h.v)&&(h.f=t[d][p][1],h.v=h.v[0]),null===h.v)if(h.f)h.t="n";else if(r.nullError)h.t="e",h.v=0;else{if(!r.sheetStubs)continue;h.t="z"}else"number"==typeof h.v?h.t="n":"boolean"==typeof h.v?h.t="b":h.v instanceof Date?(h.z=r.dateNF||E6[14],r.cellDates?(h.t="d",h.w=n8(h.z,v8(h.v))):(h.t="n",h.v=v8(h.v),h.w=n8(h.z,h.v))):h.t="s";else h=t[d][p];if(i)s[f]||(s[f]=[]),s[f][m]&&s[f][m].z&&(h.z=s[f][m].z),s[f][m]=h;else{var v=d9({c:m,r:f});s[v]&&s[v].z&&(h.z=s[v].z),s[v]=h}}}return c.s.c<1e7&&(s["!ref"]=h9(c)),s}function b9(e,t){return y9(null,e,t)}function x9(e,t){return t||(t=X7(4)),t.write_shift(4,e),t}function w9(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function S9(e,t){var n=!1;return null==t&&(n=!0,t=X7(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function C9(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function E9(e,t){var n=e.l,r=e.read_shift(1),i=w9(e),s=[],o={t:i,h:i};if(1&r){for(var a=e.read_shift(4),l=0;l!=a;++l)s.push(C9(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=n+t,o}var T9=E9;function N9(e,t){var n=!1;return null==t&&(n=!0,t=X7(23+4*e.t.length)),t.write_shift(1,1),S9(e.t,t),t.write_shift(4,1),function(e,t){t||(t=X7(4)),t.write_shift(2,0),t.write_shift(2,0)}(0,t),n?t.slice(0,t.l):t}function P9(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function R9(e,t){return null==t&&(t=X7(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function I9(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function k9(e,t){return null==t&&(t=X7(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var j9=w9,_9=S9;function A9(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function O9(e,t){var n=!1;return null==t&&(n=!0,t=X7(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var D9=w9,M9=A9,L9=O9;function z9(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var i=0===r?F7([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):V7(t,0)>>2;return n?i/100:i}function F9(e,t){null==t&&(t=X7(4));var n=0,r=0,i=100*e;if(e==(0|e)&&e>=-536870912&&e<1<<29?r=1:i==(0|i)&&i>=-536870912&&i<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?i:e)<<2)+(n+2))}function B9(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var U9=B9,W9=function(e,t){return t||(t=X7(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function $9(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function H9(e,t){return(t||X7(8)).write_shift(8,e,"f")}function V9(e,t){if(t||(t=X7(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var q9=80,G9={1:{n:"CodePage",t:2},2:{n:"Category",t:q9},3:{n:"PresentationFormat",t:q9},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:q9},15:{n:"Company",t:q9},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:q9},27:{n:"ContentStatus",t:q9},28:{n:"Language",t:q9},29:{n:"Version",t:q9},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},K9={1:{n:"CodePage",t:2},2:{n:"Title",t:q9},3:{n:"Subject",t:q9},4:{n:"Author",t:q9},5:{n:"Keywords",t:q9},6:{n:"Comments",t:q9},7:{n:"Template",t:q9},8:{n:"LastAuthor",t:q9},9:{n:"RevNumber",t:q9},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:q9},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function J9(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var Y9=N8(J9([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Z9={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Q9={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},X9={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function eee(e,t){var n,r=function(e){for(var t=[],n=d8(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(Q9),i=[];i[i.length]=A8,i[i.length]=Z8("Types",null,{xmlns:n7,"xmlns:xsd":d7,"xmlns:xsi":u7}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return Z8("Default",null,{Extension:e[0],ContentType:e[1]})}));var s=function(r){e[r]&&e[r].length>0&&(n=e[r][0],i[i.length]=Z8("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:X9[r][t.bookType]||X9[r].xlsx}))},o=function(n){(e[n]||[]).forEach(function(e){i[i.length]=Z8("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:X9[n][t.bookType]||X9[n].xlsx})})},a=function(t){(e[t]||[]).forEach(function(e){i[i.length]=Z8("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})})};return s("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var tee={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function nee(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ree(e){var t=[A8,Z8("Relationships",null,{xmlns:r7})];return d8(e["!id"]).forEach(function(n){t[t.length]=Z8("Relationship",null,e["!id"][n])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function iee(e,t,n,r,i,s){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=r,i.Target=n,[tee.HLINK,tee.XPATH,tee.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function see(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function oee(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function aee(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+G5.version+"</meta:generator></office:meta></office:document-meta>"}var lee=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function cee(e,t,n,r,i){null==i[e]&&null!=t&&""!==t&&(i[e]=t,t=L8(t),r[r.length]=n?Z8(e,t,n):J8(e,t))}function uee(e,t){var n=t||{},r=[A8,Z8("cp:coreProperties",null,{"xmlns:cp":X8,"xmlns:dc":s7,"xmlns:dcterms":o7,"xmlns:dcmitype":a7,"xmlns:xsi":u7})],i={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&cee("dcterms:created","string"==typeof e.CreatedDate?e.CreatedDate:Q8(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),null!=e.ModifiedDate&&cee("dcterms:modified","string"==typeof e.ModifiedDate?e.ModifiedDate:Q8(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=lee.length;++s){var o=lee[s],a=n.Props&&null!=n.Props[o[1]]?n.Props[o[1]]:e?e[o[1]]:null;!0===a?a="1":!1===a?a="0":"number"==typeof a&&(a=String(a)),null!=a&&cee(o[0],a,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var dee=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],pee=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function hee(e){var t=[],n=Z8;return e||(e={}),e.Application="SheetJS",t[t.length]=A8,t[t.length]=Z8("Properties",null,{xmlns:t7,"xmlns:vt":c7}),dee.forEach(function(r){if(void 0!==e[r[1]]){var i;switch(r[2]){case"string":i=L8(String(e[r[1]]));break;case"bool":i=e[r[1]]?"true":"false"}void 0!==i&&(t[t.length]=n(r[0],i))}}),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+L8(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function fee(e){var t=[A8,Z8("Properties",null,{xmlns:e7,"xmlns:vt":c7})];if(!e)return t.join("");var n=1;return d8(e).forEach(function(r){++n,t[t.length]=Z8("property",function(e){switch(typeof e){case"string":var t=Z8("vt:lpwstr",L8(e));return t.replace(/&quot;/g,"_x0022_");case"number":return Z8((0|e)==e?"vt:i4":"vt:r8",L8(String(e)));case"boolean":return Z8("vt:bool",e?"true":"false")}if(e instanceof Date)return Z8("vt:filetime",Q8(e));throw new Error("Unable to serialize "+e)}(e[r]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:L8(r)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var mee={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function vee(e,t){var n=X7(4),r=X7(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=X7(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var i=(n*=1e7)/Math.pow(2,32)|0;i>0&&(n%=Math.pow(2,32),r+=i);var s=X7(8);return s.write_shift(4,n),s.write_shift(4,r),s}(t);break;case 31:case 80:for((r=X7(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return p6([n,r])}var gee=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function yee(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function bee(e,t,n){var r=X7(8),i=[],s=[],o=8,a=0,l=X7(8),c=X7(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),o+=8+l.length,!t){(c=X7(8)).write_shift(4,0),i.unshift(c);var u=[X7(4)];for(u[0].write_shift(4,e.length),a=0;a<e.length;++a){var d=e[a][0];for((l=X7(8+2*(d.length+1)+(d.length%2?0:2))).write_shift(4,a+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=p6(u),s.unshift(l),o+=8+l.length}for(a=0;a<e.length;++a)if((!t||t[e[a][0]])&&!(gee.indexOf(e[a][0])>-1||pee.indexOf(e[a][0])>-1)&&null!=e[a][1]){var p=e[a][1],h=0;if(t){var f=n[h=+t[e[a][0]]];if("version"==f.p&&"string"==typeof p){var m=p.split(".");p=(+m[0]<<16)+(+m[1]||0)}l=vee(f.t,p)}else{var v=yee(p);-1==v&&(v=31,p=String(p)),l=vee(v,p)}s.push(l),(c=X7(8)).write_shift(4,t?h:2+a),i.push(c),o+=8+l.length}var g=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,g),g+=s[a].length;return r.write_shift(4,o),r.write_shift(4,s.length),p6([r].concat(i).concat(s))}function xee(e,t,n,r,i,s){var o=X7(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,l8.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,i?68:48);var l=bee(e,n,r);if(a.push(l),i){var c=bee(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),a.push(c)}return p6(a)}function wee(e,t){return t||(t=X7(2)),t.write_shift(2,+!!e),t}function See(e){return e.read_shift(2,"u")}function Cee(e,t){return t||(t=X7(2)),t.write_shift(2,e),t}function Eee(e,t,n){return n||(n=X7(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function Tee(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont";return n&&n.biff,n&&8!=n.biff?12==n.biff&&(i="wstr"):e.read_shift(1)&&(i="dbcs-cont"),n.biff>=2&&n.biff<=5&&(i="cpstr"),r?e.read_shift(r,i):""}function Nee(e){var t=e.t||"",n=X7(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=X7(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),p6([n,r])}function Pee(e,t,n){return n||(n=X7(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function Ree(e,t){t||(t=X7(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function Iee(e){var t=X7(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)t.write_shift(4,o[n]);if(28==s)Ree(r=r.slice(1),t);else if(2&s){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)t.write_shift(1,parseInt(o[n],16));var a=i>-1?r.slice(0,i):r;for(t.write_shift(4,2*(a.length+1)),n=0;n<a.length;++n)t.write_shift(2,a.charCodeAt(n));t.write_shift(2,0),8&s&&Ree(i>-1?r.slice(i+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)t.write_shift(1,parseInt(o[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function kee(e,t,n,r){return r||(r=X7(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function jee(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function _ee(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function Aee(e,t){return t||(t=X7(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Oee(e,t,n){var r=1536,i=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;default:throw new Error("unsupported BIFF version")}var s=X7(i);return s.write_shift(2,r),s.write_shift(2,t),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Dee(e,t){var n=!t||t.biff>=8?2:1,r=X7(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function Mee(e,t,n,r){var i=n&&5==n.biff;r||(r=X7(i?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(i?1:2,t.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return null==s.l&&(s.l=s.length),s}function Lee(e,t,n,r){var i=n&&5==n.biff;r||(r=X7(i?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function zee(e){var t=X7(24),n=u9(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(r[i],16));return p6([t,Iee(e[1])])}function Fee(e){var t=e[1].Tooltip,n=X7(10+2*(t.length+1));n.write_shift(2,2048);var r=u9(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<t.length;++i)n.write_shift(2,t.charCodeAt(i));return n.write_shift(2,0),n}var Bee=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=h8({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var i=b9(function(t,n){var r=[],i=a6(1);switch(n.type){case"base64":i=c6(i6(t));break;case"binary":i=c6(t);break;case"buffer":case"array":i=t}Z7(i,0);var s=i.read_shift(1),o=!!(136&s),a=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:a=!0,o=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,u=521;2==s&&(c=i.read_shift(2)),i.l+=3,2!=s&&(c=i.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(u=i.read_shift(2));var d=i.read_shift(2),p=n.codepage||1252;2!=s&&(i.l+=16,i.read_shift(1),0!==i[i.l]&&(p=e[i[i.l]]),i.l+=1,i.l+=2),l&&(i.l+=36);for(var h=[],f={},m=Math.min(i.length,2==s?521:u-10-(a?264:0)),v=l?32:11;i.l<m&&13!=i[i.l];)switch((f={}).name=X5.utils.decode(p,i.slice(i.l,i.l+v)).replace(/[\u0000\r\n].*$/g,""),i.l+=v,f.type=String.fromCharCode(i.read_shift(1)),2==s||l||(f.offset=i.read_shift(4)),f.len=i.read_shift(1),2==s&&(f.offset=i.read_shift(2)),f.dec=i.read_shift(1),f.name.length&&h.push(f),2!=s&&(i.l+=l?13:14),f.type){case"B":a&&8==f.len||!n.WTF||console.log("Skipping "+f.name+":"+f.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+f.name+":"+f.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+f.type)}if(13!==i[i.l]&&(i.l=u-1),13!==i.read_shift(1))throw new Error("DBF Terminator not found "+i.l+" "+i[i.l]);i.l=u;var g=0,y=0;for(r[0]=[],y=0;y!=h.length;++y)r[0][y]=h[y].name;for(;c-- >0;)if(42!==i[i.l])for(++i.l,r[++g]=[],y=0,y=0;y!=h.length;++y){var b=i.slice(i.l,i.l+h[y].len);i.l+=h[y].len,Z7(b,0);var x=X5.utils.decode(p,b);switch(h[y].type){case"C":x.trim().length&&(r[g][y]=x.replace(/\s+$/,""));break;case"D":8===x.length?r[g][y]=new Date(+x.slice(0,4),+x.slice(4,6)-1,+x.slice(6,8)):r[g][y]=x;break;case"F":r[g][y]=parseFloat(x.trim());break;case"+":case"I":r[g][y]=l?2147483648^b.read_shift(-4,"i"):b.read_shift(4,"i");break;case"L":switch(x.trim().toUpperCase()){case"Y":case"T":r[g][y]=!0;break;case"N":case"F":r[g][y]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+x+"|")}break;case"M":if(!o)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));r[g][y]="##MEMO##"+(l?parseInt(x.trim(),10):b.read_shift(4));break;case"N":(x=x.replace(/\u0000/g,"").trim())&&"."!=x&&(r[g][y]=+x||0);break;case"@":r[g][y]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":r[g][y]=new Date(864e5*(b.read_shift(4)-2440588)+b.read_shift(4));break;case"Y":r[g][y]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[g][y]=-b.read_shift(-8,"f");break;case"B":if(a&&8==h[y].len){r[g][y]=b.read_shift(8,"f");break}case"G":case"P":b.l+=h[y].len;break;case"0":if("_NullFlags"===h[y].name)break;default:throw new Error("DBF Unsupported data type "+h[y].type)}}else i.l+=d;if(2!=s&&i.l<i.length&&26!=i[i.l++])throw new Error("DBF EOF Marker missing "+(i.l-1)+" of "+i.length+" "+i[i.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=h,r}(t,r),r);return i["!cols"]=r.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete r.DBF,i}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return g9(n(e,t),t)}catch(gie){if(t&&t.WTF)throw gie}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var i=n||{};if(+i.codepage>=0&&Z5(+i.codepage),"string"==i.type)throw new Error("Cannot write DBF to JS string");var s=e9(),o=Jre(e,{header:1,raw:!0,cellDates:!0}),a=o[0],l=o.slice(1),c=e["!cols"]||[],u=0,d=0,p=0,h=1;for(u=0;u<a.length;++u)if(((c[u]||{}).DBF||{}).name)a[u]=c[u].DBF.name,++p;else if(null!=a[u]){if(++p,"number"==typeof a[u]&&(a[u]=a[u].toString(10)),"string"!=typeof a[u])throw new Error("DBF Invalid column name "+a[u]+" |"+typeof a[u]+"|");if(a.indexOf(a[u])!==u)for(d=0;d<1024;++d)if(-1==a.indexOf(a[u]+"_"+d)){a[u]+="_"+d;break}}var f=f9(e["!ref"]),m=[],v=[],g=[];for(u=0;u<=f.e.c-f.s.c;++u){var y="",b="",x=0,w=[];for(d=0;d<l.length;++d)null!=l[d][u]&&w.push(l[d][u]);if(0!=w.length&&null!=a[u]){for(d=0;d<w.length;++d){switch(typeof w[d]){case"number":b="B";break;case"string":default:b="C";break;case"boolean":b="L";break;case"object":b=w[d]instanceof Date?"D":"C"}x=Math.max(x,String(w[d]).length),y=y&&y!=b?"C":b}x>250&&(x=250),"C"==(b=((c[u]||{}).DBF||{}).type)&&c[u].DBF.len>x&&(x=c[u].DBF.len),"B"==y&&"N"==b&&(y="N",g[u]=c[u].DBF.dec,x=c[u].DBF.len),v[u]="C"==y||"N"==b?x:r[y]||0,h+=v[u],m[u]=y}else m[u]="?"}var S=s.next(32);for(S.write_shift(4,318902576),S.write_shift(4,l.length),S.write_shift(2,296+32*p),S.write_shift(2,h),u=0;u<4;++u)S.write_shift(4,0);for(S.write_shift(4,(+t[K5]||3)<<8),u=0,d=0;u<a.length;++u)if(null!=a[u]){var C=s.next(32),E=(a[u].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);C.write_shift(1,E,"sbcs"),C.write_shift(1,"?"==m[u]?"C":m[u],"sbcs"),C.write_shift(4,d),C.write_shift(1,v[u]||r[m[u]]||0),C.write_shift(1,g[u]||0),C.write_shift(1,2),C.write_shift(4,0),C.write_shift(1,0),C.write_shift(4,0),C.write_shift(4,0),d+=v[u]||r[m[u]]||0}var T=s.next(264);for(T.write_shift(4,13),u=0;u<65;++u)T.write_shift(4,0);for(u=0;u<l.length;++u){var N=s.next(h);for(N.write_shift(1,0),d=0;d<a.length;++d)if(null!=a[d])switch(m[d]){case"L":N.write_shift(1,null==l[u][d]?63:l[u][d]?84:70);break;case"B":N.write_shift(8,l[u][d]||0,"f");break;case"N":var P="0";for("number"==typeof l[u][d]&&(P=l[u][d].toFixed(g[d]||0)),p=0;p<v[d]-P.length;++p)N.write_shift(1,32);N.write_shift(1,P,"sbcs");break;case"D":l[u][d]?(N.write_shift(4,("0000"+l[u][d].getFullYear()).slice(-4),"sbcs"),N.write_shift(2,("00"+(l[u][d].getMonth()+1)).slice(-2),"sbcs"),N.write_shift(2,("00"+l[u][d].getDate()).slice(-2),"sbcs")):N.write_shift(8,"00000000","sbcs");break;case"C":var R=String(null!=l[u][d]?l[u][d]:"").slice(0,v[d]);for(N.write_shift(1,R,"sbcs"),p=0;p<v[d]-R.length;++p)N.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),Uee=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("N("+d8(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?t6(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:t6(r)};function i(e,i){var s,o=e.split(/[\n\r]+/),a=-1,l=-1,c=0,u=0,d=[],p=[],h=null,f={},m=[],v=[],g=[],y=0;for(+i.codepage>=0&&Z5(+i.codepage);c!==o.length;++c){y=0;var b,x=o[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),w=x.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),S=w[0];if(x.length>0)switch(S){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==w[1].charAt(0)&&p.push(x.slice(3).replace(/;;/g,";"));break;case"C":var C=!1,E=!1,T=!1,N=!1,P=-1,R=-1;for(u=1;u<w.length;++u)switch(w[u].charAt(0)){case"A":case"G":break;case"X":l=parseInt(w[u].slice(1))-1,E=!0;break;case"Y":for(a=parseInt(w[u].slice(1))-1,E||(l=0),s=d.length;s<=a;++s)d[s]=[];break;case"K":'"'===(b=w[u].slice(1)).charAt(0)?b=b.slice(1,b.length-1):"TRUE"===b?b=!0:"FALSE"===b?b=!1:isNaN(R8(b))?isNaN(k8(b).getDate())||(b=E8(b)):(b=R8(b),null!==h&&Q6(h)&&(b=x8(b))),C=!0;break;case"E":N=!0;var I=kte(w[u].slice(1),{r:a,c:l});d[a][l]=[d[a][l],I];break;case"S":T=!0,d[a][l]=[d[a][l],"S5S"];break;case"R":P=parseInt(w[u].slice(1))-1;break;case"C":R=parseInt(w[u].slice(1))-1;break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}if(C&&(d[a][l]&&2==d[a][l].length?d[a][l][0]=b:d[a][l]=b,h=null),T){if(N)throw new Error("SYLK shared formula cannot have own formula");var k=P>-1&&d[P][R];if(!k||!k[1])throw new Error("SYLK shared formula cannot find base");d[a][l][1]=Ate(k[1],{r:a-P,c:l-R})}break;case"F":var j=0;for(u=1;u<w.length;++u)switch(w[u].charAt(0)){case"X":l=parseInt(w[u].slice(1))-1,++j;break;case"Y":for(a=parseInt(w[u].slice(1))-1,s=d.length;s<=a;++s)d[s]=[];break;case"M":y=parseInt(w[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":h=p[parseInt(w[u].slice(1))];break;case"W":for(g=w[u].slice(1).split(" "),s=parseInt(g[0],10);s<=parseInt(g[1],10);++s)y=parseInt(g[2],10),v[s-1]=0===y?{hidden:!0}:{wch:y},rte(v[s-1]);break;case"C":v[l=parseInt(w[u].slice(1))-1]||(v[l]={});break;case"R":m[a=parseInt(w[u].slice(1))-1]||(m[a]={}),y>0?(m[a].hpt=y,m[a].hpx=ste(y)):0===y&&(m[a].hidden=!0);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}j<1&&(h=null);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}}return m.length>0&&(f["!rows"]=m),v.length>0&&(f["!cols"]=v),i&&i.sheetRows&&(d=d.slice(0,i.sheetRows)),[d,f]}function s(e,t){var n=function(e,t){switch(t.type){case"base64":return i(i6(e),t);case"binary":return i(e,t);case"buffer":return i(s6&&Buffer.isBuffer(e)?e.toString("binary"):d6(e),t);case"array":return i(T8(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],s=n[1],o=b9(r,t);return d8(s).forEach(function(e){o[e]=s[e]}),o}function o(e,t,n,r){var i="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":i+=e.v||0,e.f&&!e.F&&(i+=";E"+_te(e.f,{r:n,c:r}));break;case"b":i+=e.v?"TRUE":"FALSE";break;case"e":i+=e.w||e.v;break;case"d":i+='"'+(e.w||e.v)+'"';break;case"s":i+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return i}return e["|"]=254,{to_workbook:function(e,t){return g9(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var n,r,i=["ID;PWXL;N;E"],s=[],a=f9(e["!ref"]),l=Array.isArray(e),c="\r\n";i.push("P;PGeneral"),i.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=i,e["!cols"].forEach(function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=ete(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=tte(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)})),e["!rows"]&&function(e,t){t.forEach(function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*ite(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))})}(i,e["!rows"]),i.push("B;Y"+(a.e.r-a.s.r+1)+";X"+(a.e.c-a.s.c+1)+";D"+[a.s.c,a.s.r,a.e.c,a.e.r].join(" "));for(var u=a.s.r;u<=a.e.r;++u)for(var d=a.s.c;d<=a.e.c;++d){var p=d9({r:u,c:d});(n=l?(e[u]||[])[d]:e[p])&&(null!=n.v||n.f&&!n.F)&&s.push(o(n,0,u,d))}return i.join(c)+c+s.join(c)+c+"E"+c}}}(),Wee=function(){function e(e,t){for(var n=e.split("\n"),r=-1,i=-1,s=0,o=[];s!==n.length;++s)if("BOT"!==n[s].trim()){if(!(r<0)){for(var a=n[s].trim().split(","),l=a[0],c=a[1],u=n[++s]||"";1&(u.match(/["]/g)||[]).length&&s<n.length-1;)u+="\n"+n[++s];switch(u=u.trim(),+l){case-1:if("BOT"===u){o[++r]=[],i=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?o[r][i]=!0:"FALSE"===u?o[r][i]=!1:isNaN(R8(c))?isNaN(k8(c).getDate())?o[r][i]=c:o[r][i]=E8(c):o[r][i]=R8(c),++i;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),o[r][i++]=""!==u?u:null}if("EOD"===u)break}}else o[++r]=[],i=0;return t&&t.sheetRows&&(o=o.slice(0,t.sheetRows)),o}function t(t,n){return b9(function(t,n){switch(n.type){case"base64":return e(i6(t),n);case"binary":return e(t,n);case"buffer":return e(s6&&Buffer.isBuffer(t)?t.toString("binary"):d6(t),n);case"array":return e(T8(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}return{to_workbook:function(e,n){return g9(t(e,n),n)},to_sheet:t,from_sheet:function(){var e=function(e,t,n,r,i){e.push(t),e.push(n+","+r),e.push('"'+i.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,i=[],s=f9(n["!ref"]),o=Array.isArray(n);e(i,"TABLE",0,1,"sheetjs"),e(i,"VECTORS",0,s.e.r-s.s.r+1,""),e(i,"TUPLES",0,s.e.c-s.s.c+1,""),e(i,"DATA",0,0,"");for(var a=s.s.r;a<=s.e.r;++a){t(i,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=d9({r:a,c:l});if(r=o?(n[a]||[])[l]:n[c])switch(r.t){case"n":var u=r.w;u||null==r.v||(u=r.v),null==u?r.f&&!r.F?t(i,1,0,"="+r.f):t(i,1,0,""):t(i,0,u,"V");break;case"b":t(i,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(i,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=n8(r.z||E6[14],v8(E8(r.v)))),t(i,0,r.w,"V");break;default:t(i,1,0,"")}else t(i,1,0,"")}}return t(i,-1,0,"EOD"),i.join("\r\n")}}()}}(),$ee=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(t,n){return b9(function(t,n){for(var r=t.split("\n"),i=-1,s=-1,o=0,a=[];o!==r.length;++o){var l=r[o].trim().split(":");if("cell"===l[0]){var c=u9(l[1]);if(a.length<=c.r)for(i=a.length;i<=c.r;++i)a[i]||(a[i]=[]);switch(i=c.r,s=c.c,l[2]){case"t":a[i][s]=e(l[3]);break;case"v":a[i][s]=+l[3];break;case"vtf":var u=l[l.length-1];case"vtc":"nl"===l[3]?a[i][s]=!!+l[4]:a[i][s]=+l[4],"vtf"==l[2]&&(a[i][s]=[a[i][s],u])}}}return n&&n.sheetRows&&(a=a.slice(0,n.sheetRows)),a}(t,n),n)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),o="--SocialCalcSpreadsheetControlSave--";function a(e){if(!e||!e["!ref"])return"";for(var n,r=[],i=[],s="",o=p9(e["!ref"]),a=Array.isArray(e),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c)if(s=d9({r:l,c:c}),(n=a?(e[l]||[])[c]:e[s])&&null!=n.v&&"z"!==n.t){switch(i=["cell",s,"t"],n.t){case"s":case"str":i.push(t(n.v));break;case"n":n.f?(i[2]="vtf",i[3]="n",i[4]=n.v,i[5]=t(n.f)):(i[2]="v",i[3]=n.v);break;case"b":i[2]="vt"+(n.f?"f":"c"),i[3]="nl",i[4]=n.v?"1":"0",i[5]=t(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var u=v8(E8(n.v));i[2]="vtc",i[3]="nd",i[4]=""+u,i[5]=n.w||n8(n.z||E6[14],u);break;case"e":continue}r.push(i.join(":"))}return r.push("sheet:c:"+(o.e.c-o.s.c+1)+":r:"+(o.e.r-o.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,t){return g9(n(e,t),t)},to_sheet:n,from_sheet:function(e){return[r,i,s,i,a(e),o].join("\n")}}}(),Hee=function(){function e(e,t,n,r,i){i.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(R8(e))?isNaN(k8(e).getDate())?t[n][r]=e:t[n][r]=E8(e):t[n][r]=R8(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},i=!1,s=0,o=0;s<e.length;++s)34==(o=e.charCodeAt(s))?i=!i:!i&&o in t&&(r[o]=(r[o]||0)+1);for(s in o=[],r)Object.prototype.hasOwnProperty.call(r,s)&&o.push([r[s],s]);if(!o.length)for(s in r=n)Object.prototype.hasOwnProperty.call(r,s)&&o.push([r[s],s]);return o.sort(function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]}),t[o.pop()[1]]||44}function i(e,t){var n=t||{},i="",s=n.dense?[]:{},o={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(i=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(i=e.charAt(4),e=e.slice(6)):i=r(e.slice(0,1024)):i=n&&n.FS?n.FS:r(e.slice(0,1024));var a=0,l=0,c=0,u=0,d=0,p=i.charCodeAt(0),h=!1,f=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var v,g,y=null!=n.dateNF?(v=n.dateNF,g=(g="number"==typeof v?E6[v]:v).replace(o8,"(\\d+)"),new RegExp("^"+g+"$")):null;function b(){var t=e.slice(u,d),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(r.t="n",r.f=t.slice(1)):(r.t="s",r.v=t);else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=R8(t)))if(!isNaN(k8(t).getDate())||y&&t.match(y)){r.z=n.dateNF||E6[14];var i=0;y&&t.match(y)&&(t=function(e,t,n){var r=-1,i=-1,s=-1,o=-1,a=-1,l=-1;(t.match(o8)||[]).forEach(function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":s=c;break;case"h":o=c;break;case"s":l=c;break;case"m":o>=0?a=c:i=c}}),l>=0&&-1==a&&i>=0&&(a=i,i=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==o&&-1==a&&-1==l?c:-1==r&&-1==i&&-1==s?u:c+"T"+u}(0,n.dateNF,t.match(y)||[]),i=1),n.cellDates?(r.t="d",r.v=E8(t,i)):(r.t="n",r.v=v8(E8(t,i))),!1!==n.cellText&&(r.w=n8(r.z,r.v instanceof Date?v8(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(s[a]||(s[a]=[]),s[a][l]=r):s[d9({c:l,r:a})]=r),u=d+1,m=e.charCodeAt(u),o.e.c<l&&(o.e.c=l),o.e.r<a&&(o.e.r=a),f==p)++l;else if(l=0,++a,n.sheetRows&&n.sheetRows<=a)return!0}e:for(;d<e.length;++d)switch(f=e.charCodeAt(d)){case 34:34===m&&(h=!h);break;case p:case 10:case 13:if(!h&&b())break e}return d-u>0&&b(),s["!ref"]=h9(o),s}function s(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?i(t,n):b9(function(t,n){var r=n||{},i=[];if(!t||0===t.length)return i;for(var s=t.split(/[\r\n]/),o=s.length-1;o>=0&&0===s[o].length;)--o;for(var a=10,l=0,c=0;c<=o;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,a=Math.max(a,l);for(c=0;c<=o;++c){i[c]=[];var u=0;for(e(s[c].slice(0,a).trim(),i,c,u,r),u=1;u<=(s[c].length-a)/10+1;++u)e(s[c].slice(a+10*(u-1),a+10*u).trim(),i,c,u,r)}return r.sheetRows&&(i=i.slice(0,r.sheetRows)),i}(t,n),n):i(t,n)}function o(e,t){var n="",r="string"==t.type?[0,0,0,0]:function(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=i6(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}(e,t);switch(t.type){case"base64":n=i6(e);break;case"binary":case"string":n=e;break;case"buffer":65001==t.codepage?n=e.toString("utf8"):(t.codepage,n=s6&&Buffer.isBuffer(e)?e.toString("binary"):d6(e));break;case"array":n=T8(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=V8(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=V8(n):t.type,"socialcalc:version:"==n.slice(0,19)?$ee.to_sheet("string"==t.type?n:V8(n),t):s(n,t)}return{to_workbook:function(e,t){return g9(o(e,t),t)},to_sheet:o,from_sheet:function(e){for(var t,n=[],r=f9(e["!ref"]),i=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){for(var o=[],a=r.s.c;a<=r.e.c;++a){var l=d9({r:s,c:a});if((t=i?(e[s]||[])[a]:e[l])&&null!=t.v){for(var c=(t.w||(v9(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";o.push(c+(0===a?" ":""))}else o.push("          ")}n.push(o.join(""))}return n.join("\n")}}}(),Vee=function(){function e(e,t,n){if(e){Z7(e,e.l||0);for(var r=n.Enum||g;e.l<e.length;){var i=e.read_shift(2),s=r[i]||r[65535],o=e.read_shift(2),a=e.l+o,l=s.f&&s.f(e,o,n);if(e.l=a,t(l,s,i))return}}}function t(t,n){if(!t)return t;var r=n||{},i=r.dense?[]:{},s="Sheet1",o="",a=0,l={},c=[],u=[],d={s:{r:0,c:0},e:{r:0,c:0}},p=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=g,e(t,function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:d=e;break;case 204:e&&(o=e);break;case 222:o=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&!(112&~e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||E6[14],r.cellDates&&(e[1].t="d",e[1].v=x8(e[1].v))),r.qpro&&e[3]>a&&(i["!ref"]=h9(d),l[s]=i,c.push(s),i=r.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},a=e[3],s=o||"Sheet"+(a+1),o="");var u=r.dense?(i[e[0].r]||[])[e[0].c]:i[d9(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[d9(e[0])]=e[1]}},r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=y,14==t[2]&&(r.qpro=!0,t.l=0),e(t,function(e,t,n){switch(n){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>a&&(i["!ref"]=h9(d),l[s]=i,c.push(s),i=r.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},a=e[3],s="Sheet"+(a+1)),p>0&&e[0].r>=p)break;r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[d9(e[0])]=e[1],d.e.c<e[0].c&&(d.e.c=e[0].c),d.e.r<e[0].r&&(d.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==a&&(s=e[1])}},r)}if(i["!ref"]=h9(d),l[o||s]=i,c.push(o||s),!u.length)return{SheetNames:c,Sheets:l};for(var h={},f=[],m=0;m<u.length;++m)l[c[m]]?(f.push(u[m]||c[m]),h[u[m]]=l[u[m]]||l[c[m]]):(f.push(u[m]),h[u[m]]={"!ref":"A1"});return{SheetNames:f,Sheets:h}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var i=e.l+t,s=n(e,0,r);if(s[1].t="s",20768==r.vers){e.l++;var o=e.read_shift(1);return s[1].v=e.read_shift(o,"utf8"),s}return r.qpro&&e.l++,s[1].v=e.read_shift(i-e.l,"cstr"),s}function i(e,t,n){var r=X7(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var i=0;i<r.length;++i){var s=n.charCodeAt(i);r.write_shift(1,s>=128?95:s)}return r.write_shift(1,0),r}function s(e,t,n){var r=X7(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function o(e,t,n){var r=X7(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function a(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?c9(t):a9(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function d(e,t,n,r){var i=X7(6+r.length);i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),i.write_shift(1,39);for(var s=0;s<r.length;++s){var o=r.charCodeAt(s);i.write_shift(1,o>=128?95:o)}return i.write_shift(1,0),i}function p(e,t){var n=u(e),r=e.read_shift(4),i=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===r&&3221225472===i?(n[1].t="e",n[1].v=15):0===r&&3489660928===i?(n[1].t="e",n[1].v=42):n[1].v=0,n;var o=32768&s;return s=(32767&s)-16446,n[1].v=(1-2*o)*(i*Math.pow(2,s+32)+r*Math.pow(2,s)),n}function h(e,t,n,r){var i=X7(14);if(i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),0==r)return i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,65535),i;var s,o=0,a=0,l=0;return r<0&&(o=1,r=-r),a=0|Math.log2(r),2147483648&(l=(r/=Math.pow(2,a-31))>>>0)||(++a,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,s=(r*=Math.pow(2,32))>>>0,i.write_shift(4,s),i.write_shift(4,l),a+=16383+(o?32768:0),i.write_shift(2,a),i}function f(e,t){var n=u(e),r=e.read_shift(8,"f");return n[1].v=r,n}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function v(e,t){var n=X7(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var i=e.charCodeAt(r);n[n.l++]=i>127?95:i}return n[n.l++]=0,n}var g={0:{n:"BOF",f:See},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(2,"i"),i}},14:{n:"NUMBER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(8,"f"),i}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var i=e.l+t,s=n(e,0,r);if(s[1].v=e.read_shift(8,"f"),r.qpro)e.l=i;else{var o=e.read_shift(2);!function(e,t){Z7(e,0);for(var n=[],r=0,i="",s="",o="",u="";e.l<e.length;){var d=e[e.l++];switch(d){case 0:n.push(e.read_shift(8,"f"));break;case 1:s=a(t[0].c,e.read_shift(2),!0),i=a(t[0].r,e.read_shift(2),!1),n.push(s+i);break;case 2:var p=a(t[0].c,e.read_shift(2),!0),h=a(t[0].r,e.read_shift(2),!1);s=a(t[0].c,e.read_shift(2),!0),i=a(t[0].r,e.read_shift(2),!1),n.push(p+h+":"+s+i);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var f="";d=e[e.l++];)f+=String.fromCharCode(d);n.push('"'+f.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:u=n.pop(),o=n.pop(),n.push(["AND","OR"][d-20]+"("+o+","+u+")");break;default:if(d<32&&c[d])u=n.pop(),o=n.pop(),n.push(o+c[d]+u);else{if(!l[d])return d<=7?console.error("WK1 invalid opcode "+d.toString(16)):d<=24?console.error("WK1 unsupported op "+d.toString(16)):d<=30?console.error("WK1 invalid opcode "+d.toString(16)):d<=115?console.error("WK1 unsupported function opcode "+d.toString(16)):console.error("WK1 unrecognized opcode "+d.toString(16));if(69==(r=l[d][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+d.toString(16)+":|"+n.join("|")+"|");var m=n.slice(-r);n.length-=r,n.push(l[d][0]+"("+m.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+o),s),e.l+=o}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=u(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:p},24:{n:"NUMBER18",f:function(e,t){var n=u(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=p(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var i=e.read_shift(2);if(14e3==i){for(n[i]=[0,""],n[i][0]=e.read_shift(2);e[e.l];)n[i][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=u(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:f},40:{n:"FORMULA28",f:function(e,t){var n=f(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&Z5(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r,a,l=e9(),c=f9(e["!ref"]),u=Array.isArray(e),d=[];ore(l,0,(r=1030,(a=X7(2)).write_shift(2,r),a)),ore(l,6,function(e){var t=X7(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(c));for(var p=Math.min(c.e.r,8191),h=c.s.r;h<=p;++h)for(var f=a9(h),m=c.s.c;m<=c.e.c;++m){h===c.s.r&&(d[m]=c9(m));var v=d[m]+f,g=u?(e[h]||[])[m]:e[v];g&&"z"!=g.t&&("n"==g.t?(0|g.v)==g.v&&g.v>=-32768&&g.v<=32767?ore(l,13,s(h,m,g.v)):ore(l,14,o(h,m,g.v)):ore(l,15,i(h,m,v9(g).slice(0,239))))}return ore(l,1),l.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&Z5(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=e9();ore(r,0,function(e){var t=X7(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,i=0,s=0;s<e.SheetNames.length;++s){var o=e.SheetNames[s],a=e.Sheets[o];if(a&&a["!ref"]){++i;var l=p9(a["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}return n>8191&&(n=8191),t.write_shift(2,n),t.write_shift(1,i),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var i=0,s=0;i<e.SheetNames.length;++i)(e.Sheets[e.SheetNames[i]]||{})["!ref"]&&ore(r,27,v(e.SheetNames[i],s++));var o=0;for(i=0;i<e.SheetNames.length;++i){var a=e.Sheets[e.SheetNames[i]];if(a&&a["!ref"]){for(var l=f9(a["!ref"]),c=Array.isArray(a),u=[],p=Math.min(l.e.r,8191),f=l.s.r;f<=p;++f)for(var m=a9(f),g=l.s.c;g<=l.e.c;++g){f===l.s.r&&(u[g]=c9(g));var y=u[g]+m,b=c?(a[f]||[])[g]:a[y];b&&"z"!=b.t&&("n"==b.t?ore(r,23,h(f,g,o,b.v)):ore(r,22,d(f,g,o,v9(b).slice(0,239))))}++o}}return ore(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(c6(i6(e)),n);case"binary":return t(c6(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}(),qee=/^\s|\s$|[\t\n\r]/;function Gee(e,t){if(!t.bookSST)return"";var n=[A8];n[n.length]=Z8("sst",null,{xmlns:p7[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var i=e[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(qee)&&(s+=' xml:space="preserve"'),s+=">"+L8(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var Kee=function(e,t){var n=!1;return null==t&&(n=!0,t=X7(15+4*e.t.length)),t.write_shift(1,0),S9(e.t,t),n?t.slice(0,t.l):t};function Jee(e){var t=e9();t9(t,159,function(e,t){return t||(t=X7(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)t9(t,19,Kee(e[n]));return t9(t,160),t.end()}function Yee(e){var t,n,r=0,i=function(e){for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}(e),s=i.length+1;for((t=a6(s))[0]=i.length,n=1;n!=s;++n)t[n]=i[n-1];for(n=s-1;n>=0;--n)r=((16384&r?1:0)|r<<1&32767)^t[n];return 52811^r}var Zee=function(){function e(e,n){switch(n.type){case"base64":return t(i6(e),n);case"binary":return t(e,n);case"buffer":return t(s6&&Buffer.isBuffer(e)?e.toString("binary"):d6(e),n);case"array":return t(T8(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var i={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach(function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,s=/\\\w+\b/g,o=0,a=-1;r=s.exec(e);){if("\\cell"===r[0]){var l=e.slice(o,s.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++a,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][a]=c:n[d9({r:t,c:a})]=c}}o=s.lastIndex}a>i.e.c&&(i.e.c=a)}),n["!ref"]=h9(i),n}return{to_workbook:function(t,n){return g9(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=f9(e["!ref"]),i=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){n.push("\\trowd\\trautofit1");for(var o=r.s.c;o<=r.e.c;++o)n.push("\\cellx"+(o+1));for(n.push("\\pard\\intbl"),o=r.s.c;o<=r.e.c;++o){var a=d9({r:s,c:o});(t=i?(e[s]||[])[o]:e[a])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(v9(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function Qee(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var Xee=6;function ete(e){return Math.floor((e+Math.round(128/Xee)/256)*Xee)}function tte(e){return Math.floor((e-5)/Xee*100+.5)/100}function nte(e){return Math.round((e*Xee+5)/Xee*256)/256}function rte(e){e.width?(e.wpx=ete(e.width),e.wch=tte(e.wpx),e.MDW=Xee):e.wpx?(e.wch=tte(e.wpx),e.width=nte(e.wch),e.MDW=Xee):"number"==typeof e.wch&&(e.width=nte(e.wch),e.wpx=ete(e.width),e.MDW=Xee),e.customWidth&&delete e.customWidth}function ite(e){return 96*e/96}function ste(e){return 96*e/96}function ote(e,t){var n,r=[A8,Z8("styleSheet",null,{xmlns:p7[0],"xmlns:vt":c7})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=Z8("numFmt",null,{numFmtId:r,formatCode:L8(e[r])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=Z8("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=Z8("cellXfs",null),e.forEach(function(e){t[t.length]=Z8("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=Z8("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function ate(e,t,n){n||(n=X7(6+4*t.length)),n.write_shift(2,e),S9(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function lte(e,t){t||(t=X7(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=X7(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;return"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),V9(e.color,t),t.write_shift(1,2),S9(e.name,t),t.length>t.l?t.slice(0,t.l):t}var cte,ute=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],dte=Q7;function pte(e,t){t||(t=X7(84)),cte||(cte=h8(ute));var n=cte[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(V9({auto:1},t),V9({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function hte(e,t,n){return n||(n=X7(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function fte(e,t){return t||(t=X7(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var mte=Q7;function vte(e){var t;t9(e,613,x9(1)),t9(e,46,(t||(t=X7(51)),t.write_shift(1,0),fte(0,t),fte(0,t),fte(0,t),fte(0,t),fte(0,t),t.length>t.l?t.slice(0,t.l):t)),t9(e,614)}function gte(e){var t,n;t9(e,619,x9(1)),t9(e,48,(t={xfId:0,name:"Normal"},n||(n=X7(52)),n.write_shift(4,t.xfId),n.write_shift(2,1),n.write_shift(1,0),n.write_shift(1,0),O9(t.name||"",n),n.length>n.l?n.slice(0,n.l):n)),t9(e,620)}function yte(e){t9(e,508,function(e,t,n){var r=X7(2052);return r.write_shift(4,e),O9(t,r),O9(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),t9(e,509)}function bte(e,t){var n=e9();return t9(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n}),0!=n&&(t9(e,615,x9(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&t9(e,44,ate(r,t[r]))}),t9(e,616))}}(n,e.SSF),function(e){t9(e,611,x9(1)),t9(e,43,lte({sz:12,color:{theme:1},name:"Calibri",family:2})),t9(e,612)}(n),function(e){t9(e,603,x9(2)),t9(e,45,pte({patternType:"none"})),t9(e,45,pte({patternType:"gray125"})),t9(e,604)}(n),vte(n),function(e){t9(e,626,x9(1)),t9(e,47,hte({numFmtId:0},65535)),t9(e,627)}(n),function(e,t){t9(e,617,x9(t.length)),t.forEach(function(t){t9(e,47,hte(t,0))}),t9(e,618)}(n,t.cellXfs),gte(n),function(e){t9(e,505,x9(0)),t9(e,506)}(n),yte(n),t9(n,279),n.end()}function xte(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[A8];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function wte(){var e,t,n=e9();return t9(n,332),t9(n,334,x9(1)),t9(n,335,((t=X7(12+2*(e={name:"XLDAPR",version:12e4,flags:3496657072}).name.length)).write_shift(4,e.flags),t.write_shift(4,e.version),S9(e.name,t),t.slice(0,t.l))),t9(n,336),t9(n,339,function(e,t){var n=X7(8+2*t.length);return n.write_shift(4,e),S9(t,n),n.slice(0,n.l)}(1,"XLDAPR")),t9(n,52),t9(n,35,x9(514)),t9(n,4096,x9(0)),t9(n,4097,Cee(1)),t9(n,36),t9(n,53),t9(n,340),t9(n,337,function(e){var t=X7(8);return t.write_shift(4,e),t.write_shift(4,1),t}(1)),t9(n,51,function(e){var t=X7(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),t9(n,338),t9(n,333),n.end()}function Ste(){var e=[A8];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var Cte=1024;function Ete(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[Z8("xml",null,{"xmlns:v":y7,"xmlns:o":h7,"xmlns:x":f7,"xmlns:mv":g7}).replace(/\/>/,">"),Z8("o:shapelayout",Z8("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Z8("v:shapetype",[Z8("v:stroke",null,{joinstyle:"miter"}),Z8("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Cte<1e3*e;)Cte+=1e3;return t.forEach(function(e){var t=u9(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?Z8("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=Z8("v:fill",r,n);++Cte,i=i.concat(["<v:shape"+Y8({id:"_x0000_s"+Cte,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,Z8("v:shadow",null,{on:"t",obscured:"t"}),Z8("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",J8("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),J8("x:AutoFill","False"),J8("x:Row",String(t.r)),J8("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function Tte(e){var t=[A8,Z8("comments",null,{xmlns:p7[0]})],n=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var r=L8(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var r=0,i=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(r=n.indexOf(L8(e.a))),i.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),i.length<=1)t.push(J8("t",L8(i[0]||"")));else{for(var s="Comment:\n    "+i[0]+"\n",o=1;o<i.length;++o)s+="Reply:\n    "+i[o]+"\n";t.push(J8("t",L8(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Nte(e,t,n){var r=[A8,Z8("ThreadedComments",null,{xmlns:i7}).replace(/[\/]>/,">")];return e.forEach(function(e){var i="";(e[1]||[]).forEach(function(s,o){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var a={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==o?i=a.id:a.parentId=i,s.ID=a.id,s.a&&(a.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),r.push(Z8("threadedComment",J8("text",s.t||""),a))}else delete s.ID})}),r.push("</ThreadedComments>"),r.join("")}var Pte=w9;function Rte(e){var t=e9(),n=[];return t9(t,628),t9(t,630),e.forEach(function(e){e[1].forEach(function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),t9(t,632,function(e){return S9(e.slice(0,54))}(e.a)))})}),t9(t,631),t9(t,633),e.forEach(function(e){e[1].forEach(function(r){r.iauthor=n.indexOf(r.a);var i={s:u9(e[0]),e:u9(e[0])};t9(t,635,function(e,t){return null==t&&(t=X7(36)),t.write_shift(4,e[1].iauthor),W9(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([i,r])),r.t&&r.t.length>0&&t9(t,637,N9(r)),t9(t,636),delete r.iauthor})}),t9(t,634),t9(t,629),t.end()}var Ite=["xlsb","xlsm","xlam","biff8","xla"],kte=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,i){var s=!1,o=!1;0==r.length?o=!0:"["==r.charAt(0)&&(o=!0,r=r.slice(1,-1)),0==i.length?s=!0:"["==i.charAt(0)&&(s=!0,i=i.slice(1,-1));var a=r.length>0?0|parseInt(r,10):0,l=i.length>0?0|parseInt(i,10):0;return s?l+=t.c:--l,o?a+=t.r:--a,n+(s?"":"$")+c9(l)+(o?"":"$")+a9(a)}return function(r,i){return t=i,r.replace(e,n)}}(),jte=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,_te=function(){return function(e,t){return e.replace(jte,function(e,n,r,i,s,o){var a=l9(i)-(r?0:t.c),l=o9(o)-(s?0:t.r);return n+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==a?"":r?a+1:"["+a+"]")})}}();function Ate(e,t){return e.replace(jte,function(e,n,r,i,s,o){return n+("$"==r?r+i:c9(l9(i)+t.c))+("$"==s?s+o:a9(o9(o)+t.r))})}function Ote(e){e.l+=1}function Dte(e,t){var n=e.read_shift(2);return[16383&n,n>>14&1,n>>15&1]}function Mte(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return Lte(e);12==n.biff&&(r=4)}var i=e.read_shift(r),s=e.read_shift(r),o=Dte(e),a=Dte(e);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function Lte(e){var t=Dte(e),n=Dte(e),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function zte(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=Dte(e),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),i=Dte(e);return{r:r,c:i[0],cRel:i[1],rRel:i[2]}}function Fte(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function Bte(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function Ute(e){return[e.read_shift(1),e.read_shift(1)]}function Wte(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=function(e,t){return 1===e.read_shift(t)}(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=Z9[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=$9(e);break;case 2:n[1]=function(e,t,n){if(n.biff>5)return function(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):function(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}(e,r,n)}(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function $te(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),i=[],s=0;s!=r;++s)i.push((12==n.biff?U9:_ee)(e));return i}function Hte(e,t,n){var r=0,i=0;12==n.biff?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--i&&(i=256));for(var s=0,o=[];s!=r&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=Wte(e,n.biff);return o}function Vte(e,t,n){return e.l+=2,[Fte(e)]}function qte(e){return e.l+=6,[]}function Gte(e){return e.l+=2,[See(e),1&e.read_shift(2)]}var Kte=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"],Jte={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:Q7},3:{n:"PtgAdd",f:Ote},4:{n:"PtgSub",f:Ote},5:{n:"PtgMul",f:Ote},6:{n:"PtgDiv",f:Ote},7:{n:"PtgPower",f:Ote},8:{n:"PtgConcat",f:Ote},9:{n:"PtgLt",f:Ote},10:{n:"PtgLe",f:Ote},11:{n:"PtgEq",f:Ote},12:{n:"PtgGe",f:Ote},13:{n:"PtgGt",f:Ote},14:{n:"PtgNe",f:Ote},15:{n:"PtgIsect",f:Ote},16:{n:"PtgUnion",f:Ote},17:{n:"PtgRange",f:Ote},18:{n:"PtgUplus",f:Ote},19:{n:"PtgUminus",f:Ote},20:{n:"PtgPercent",f:Ote},21:{n:"PtgParen",f:Ote},22:{n:"PtgMissArg",f:Ote},23:{n:"PtgStr",f:function(e,t,n){return e.l++,Tee(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,Z9[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,$9(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(n&&n.biff<=3?1:2);return[pne[i],dne[i],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],i=e.read_shift(1),s=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[i,(0===s[0]?dne:une)[s[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=e.read_shift(i);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,s]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,zte(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,Mte(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:Q7},40:{n:"PtgMemNoMem",f:Q7},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,i=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==i&&n>=128&&(n-=256),{r:t,c:n,cRel:i,rRel:r}}(e);var i=e.read_shift(r>=12?4:2),s=e.read_shift(2),o=(16384&s)>>14,a=(32768&s)>>15;if(s&=16383,1==a)for(;i>524287;)i-=1048576;if(1==o)for(;s>8191;)s-=16384;return{r:i,c:s,cRel:o,rRel:a}}(e,0,n);return[r,i]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=function(e,t,n){if(n.biff<8)return Lte(e);var r=e.read_shift(12==n.biff?4:2),i=e.read_shift(12==n.biff?4:2),s=Dte(e),o=Dte(e);return{s:{r:r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}(e,0,n);return[r,i]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,i,zte(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2,"i");if(n&&5===n.biff)e.l+=12;return[r,i,Mte(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[r,i]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[r,i]}},255:{}},Yte={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Zte={1:{n:"PtgElfLel",f:Gte},2:{n:"PtgElfRw",f:Vte},3:{n:"PtgElfCol",f:Vte},6:{n:"PtgElfRwV",f:Vte},7:{n:"PtgElfColV",f:Vte},10:{n:"PtgElfRadical",f:Vte},11:{n:"PtgElfRadicalS",f:qte},13:{n:"PtgElfColS",f:qte},15:{n:"PtgElfColSV",f:qte},16:{n:"PtgElfRadicalLel",f:Gte},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&n,rt:Kte[n>>2&31],idx:r,c:i,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},Qte={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),i=[],s=0;s<=r;++s)i.push(e.read_shift(n&&2==n.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:Bte},33:{n:"PtgAttrBaxcel",f:Bte},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),Ute(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),Ute(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function Xte(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],i=[],s=0;s<r.length;++s){var o=r[s];o?2===o[0]?i.push('"'+o[1].replace(/"/g,'""')+'"'):i.push(o[1]):i.push("")}t.push(i.join(","))}return t.join(";")}var ene={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function tne(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(e[r[0]][0]){case 357:return i=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[r[0]][0][3]?(i=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function nne(e,t,n){var r=tne(e,t,n);return"#REF"==r?r:function(e,t){if(!(e||t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function rne(e,t,n,r,i){var s,o,a,l,c=i&&i.biff||8,u={s:{c:0,r:0}},d=[],p=0,h=0,f="";if(!e[0]||!e[0][0])return"";for(var m=-1,v="",g=0,y=e[0].length;g<y;++g){var b=e[0][g];switch(b[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=d.pop(),o=d.pop(),m>=0){switch(e[0][m][1][0]){case 0:v=P8(" ",e[0][m][1][1]);break;case 1:v=P8("\r",e[0][m][1][1]);break;default:if(v="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}o+=v,m=-1}d.push(o+ene[b[0]]+s);break;case"PtgIsect":s=d.pop(),o=d.pop(),d.push(o+" "+s);break;case"PtgUnion":s=d.pop(),o=d.pop(),d.push(o+","+s);break;case"PtgRange":s=d.pop(),o=d.pop(),d.push(o+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":a=n9(b[1][1],u,i),d.push(i9(a,c));break;case"PtgRefN":a=n?n9(b[1][1],n,i):b[1][1],d.push(i9(a,c));break;case"PtgRef3d":p=b[1][1],a=n9(b[1][2],u,i),f=nne(r,p,i),d.push(f+"!"+i9(a,c));break;case"PtgFunc":case"PtgFuncVar":var x=b[1][0],w=b[1][1];x||(x=0);var S=0==(x&=127)?[]:d.slice(-x);d.length-=x,"User"===w&&(w=S.shift()),d.push(w+"("+S.join(",")+")");break;case"PtgBool":d.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":d.push(b[1]);break;case"PtgNum":d.push(String(b[1]));break;case"PtgStr":d.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=r9(b[1][1],n?{s:n}:u,i),d.push(s9(l,i));break;case"PtgArea":l=r9(b[1][1],u,i),d.push(s9(l,i));break;case"PtgArea3d":p=b[1][1],l=b[1][2],f=nne(r,p,i),d.push(f+"!"+s9(l,i));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgName":h=b[1][2];var C=(r.names||[])[h-1]||(r[0]||[])[h],E=C?C.Name:"SH33TJSNAME"+String(h);E&&"_xlfn."==E.slice(0,6)&&!i.xlfn&&(E=E.slice(6)),d.push(E);break;case"PtgNameX":var T,N=b[1][1];if(h=b[1][2],!(i.biff<=5)){var P="";if(14849==((r[N]||[])[0]||[])[0]||(1025==((r[N]||[])[0]||[])[0]?r[N][h]&&r[N][h].itab>0&&(P=r.SheetNames[r[N][h].itab-1]+"!"):P=r.SheetNames[h-1]+"!"),r[N]&&r[N][h])P+=r[N][h].Name;else if(r[0]&&r[0][h])P+=r[0][h].Name;else{var R=(tne(r,N,i)||"").split(";;");R[h-1]?P=R[h-1]:P+="SH33TJSERRX"}d.push(P);break}N<0&&(N=-N),r[N]&&(T=r[N][h]),T||(T={Name:"SH33TJSERRY"}),d.push(T.Name);break;case"PtgParen":var I="(",k=")";if(m>=0){switch(v="",e[0][m][1][0]){case 2:I=P8(" ",e[0][m][1][1])+I;break;case 3:I=P8("\r",e[0][m][1][1])+I;break;case 4:k=P8(" ",e[0][m][1][1])+k;break;case 5:k=P8("\r",e[0][m][1][1])+k;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}d.push(I+d.pop()+k);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":d.push("#REF!");break;case"PtgExp":a={c:b[1][1],r:b[1][0]};var j={c:n.c,r:n.r};if(r.sharedf[d9(a)]){var _=r.sharedf[d9(a)];d.push(rne(_,0,j,r,i))}else{var A=!1;for(s=0;s!=r.arrayf.length;++s)if(o=r.arrayf[s],!(a.c<o[0].s.c||a.c>o[0].e.c||a.r<o[0].s.r||a.r>o[0].e.r)){d.push(rne(o[1],0,j,r,i)),A=!0;break}A||d.push(b[1])}break;case"PtgArray":d.push("{"+Xte(b[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=g;break;case"PtgMissArg":d.push("");break;case"PtgList":d.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(b))}if(3!=i.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][g][0])){var O=!0;switch((b=e[0][m])[1][0]){case 4:O=!1;case 0:v=P8(" ",b[1][1]);break;case 5:O=!1;case 1:v=P8("\r",b[1][1]);break;default:if(v="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}d.push((O?v:"")+d.pop()+(O?"":v)),m=-1}}if(d.length>1&&i.WTF)throw new Error("bad formula stack");return d[0]}function ine(e,t,n,r,i){var s=kee(t,n,i),o=function(e){if(null==e){var t=X7(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return H9("number"==typeof e?e:0)}(e.v),a=X7(6);a.write_shift(2,33),a.write_shift(4,0);for(var l=X7(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return p6([s,o,a,l])}function sne(e,t,n){var r=e.read_shift(4),i=function(e,t,n){for(var r,i,s=e.l+t,o=[];s!=e.l;)t=s-e.l,i=e[e.l],r=Jte[i]||Jte[Yte[i]],24!==i&&25!==i||(r=(24===i?Zte:Qte)[e[e.l+1]]),r&&r.f?o.push([r.n,r.f(e,t,n)]):Q7(e,t);return o}(e,r,n),s=e.read_shift(4),o=s>0?function(e,t,n,r){if(r.biff<8)return Q7(e,t);for(var i=e.l+t,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=Hte(e,0,r),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=$te(e,n[o][1],r),s.push(n[o][2]);break;case"PtgExp":r&&12==r.biff&&(n[o][1][1]=e.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return 0!==(t=i-e.l)&&s.push(Q7(e,t)),s}(e,s,i,n):null;return[i,o]}var one=sne,ane=sne,lne=sne,cne=sne,une={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},dne={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},pne={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function hne(e){return("of:="+e.replace(jte,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function fne(e){return e.replace(/\./,"!")}var mne="undefined"!=typeof Map;function vne(e,t,n){var r=0,i=e.length;if(n){if(mne?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var s=mne?n.get(t):n[t];r<s.length;++r)if(e[s[r]].t===t)return e.Count++,s[r]}else for(;r<i;++r)if(e[r].t===t)return e.Count++,r;return e[i]={t:t},e.Count++,e.Unique++,n&&(mne?(n.has(t)||n.set(t,[]),n.get(t).push(i)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(i))),i}function gne(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(Xee=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=tte(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=nte(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function yne(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function bne(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],i=60,s=e.length;if(null==r&&n.ssf)for(;i<392;++i)if(null==n.ssf[i]){r8(t.z,i),n.ssf[i]=t.z,n.revssf[t.z]=r=i;break}for(i=0;i!=s;++i)if(e[i].numFmtId===r)return i;return e[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function xne(e,t,n){if(e&&e["!ref"]){var r=f9(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var wne=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Sne=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Cne(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!=typeof e.f||"z"===e.t&&!e.f)return"";var i="",s=e.t,o=e.v;if("z"!==e.t)switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=Z9[e.v];break;case"d":r&&r.cellDates?i=E8(e.v,-1).toISOString():((e=N8(e)).t="n",i=""+(e.v=v8(E8(e.v)))),void 0===e.z&&(e.z=E6[14]);break;default:i=e.v}var a=J8("v",L8(i)),l={r:t},c=bne(r.cellXfs,e,r);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){a=J8("v",""+vne(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=o),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;a=Z8("f",L8(e.f),u)+(null!=e.v?a:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),Z8("c",a,l)}function Ene(e,t,n,r){var i,s=[A8,Z8("worksheet",null,{xmlns:p7[0],"xmlns:r":l7})],o=n.SheetNames[e],a="",l=n.Sheets[o];null==l&&(l={});var c=l["!ref"]||"A1",u=f9(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=h9(u)}r||(r={}),l["!comments"]=[];var d=[];!function(e,t,n,r,i){var s=!1,o={},a=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(gie){}s=!0,o.codeName=q8(L8(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),a=(a||"")+Z8("outlinePr",null,c)}(s||a)&&(i[i.length]=Z8("sheetPr",a,o))}(l,n,e,t,s),s[s.length]=Z8("dimension",null,{ref:c}),s[s.length]=function(e,t,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Z8("sheetViews",Z8("sheetView",null,i),{})}(0,0,0,n),t.sheetFormat&&(s[s.length]=Z8("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var n,r=["<cols>"],i=0;i!=t.length;++i)(n=t[i])&&(r[r.length]=Z8("col",null,gne(i,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(a=function(e,t){var n,r,i=[],s=[],o=f9(e["!ref"]),a="",l="",c=[],u=0,d=0,p=e["!rows"],h=Array.isArray(e),f={r:l},m=-1;for(d=o.s.c;d<=o.e.c;++d)c[d]=c9(d);for(u=o.s.r;u<=o.e.r;++u){for(s=[],l=a9(u),d=o.s.c;d<=o.e.c;++d){n=c[d]+l;var v=h?(e[u]||[])[d]:e[n];void 0!==v&&null!=(a=Cne(v,n,e,t))&&s.push(a)}(s.length>0||p&&p[u])&&(f={r:l},p&&p[u]&&((r=p[u]).hidden&&(f.hidden=1),m=-1,r.hpx?m=ite(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(f.ht=m,f.customHeight=1),r.level&&(f.outlineLevel=r.level)),i[i.length]=Z8("row",s.join(""),f))}if(p)for(;u<p.length;++u)p&&p[u]&&(f={r:u+1},(r=p[u]).hidden&&(f.hidden=1),m=-1,r.hpx?m=ite(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(f.ht=m,f.customHeight=1),r.level&&(f.outlineLevel=r.level),i[i.length]=Z8("row","",f));return i.join("")}(l,t),a.length>0&&(s[s.length]=a)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return wne.forEach(function(n){null!=e[n]&&e[n]&&(t[n]="1")}),Sne.forEach(function(n){null==e[n]||e[n]||(t[n]="0")}),e.password&&(t.password=Yee(e.password).toString(16).toUpperCase()),Z8("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,n,r){var i="string"==typeof e.ref?e.ref:h9(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,o=p9(i);o.s.r==o.e.r&&(o.e.r=p9(t["!ref"]).e.r,i=h9(o));for(var a=0;a<s.length;++a){var l=s[a];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),Z8("autoFilter",null,{ref:i})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+h9(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var p,h,f=-1,m=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(p={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=iee(r,-1,L8(e[1].Target).replace(/#.*$/,""),tee.HLINK),p["r:id"]="rId"+m),(f=e[1].Target.indexOf("#"))>-1&&(p.location=L8(e[1].Target.slice(f+1))),e[1].Tooltip&&(p.tooltip=L8(e[1].Tooltip)),s[s.length]=Z8("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(yne(h=l["!margins"]),Z8("pageMargins",null,h))),t&&!t.ignoreEC&&null!=t.ignoreEC||(s[s.length]=J8("ignoredErrors",Z8("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(m=iee(r,-1,"../drawings/drawing"+(e+1)+".xml",tee.DRAW),s[s.length]=Z8("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=d),l["!comments"].length>0&&(m=iee(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",tee.VML),s[s.length]=Z8("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Tne(e,t,n,r){var i=function(e,t,n){var r=X7(145),i=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var s=320;i.hpx?s=20*ite(i.hpx):i.hpt&&(s=20*i.hpt),r.write_shift(2,s),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var a=0,l=r.l;r.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var d=-1,p=-1,h=u<<10;h<u+1<<10;++h)c.c=h,(Array.isArray(n)?(n[c.r]||[])[c.c]:n[d9(c)])&&(d<0&&(d=h),p=h);d<0||(++a,r.write_shift(4,d),r.write_shift(4,p))}var f=r.l;return r.l=l,r.write_shift(4,a),r.l=f,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(i.length>17||(t["!rows"]||[])[r])&&t9(e,0,i)}var Nne=U9,Pne=W9,Rne=U9,Ine=W9,kne=["left","right","top","bottom","header","footer"];function jne(e,t,n,r,i,s,o){if(void 0===t.v)return!1;var a="";switch(t.t){case"b":a=t.v?"1":"0";break;case"d":(t=N8(t)).z=t.z||E6[14],t.v=v8(E8(t.v)),t.t="n";break;case"n":case"e":a=""+t.v;break;default:a=t.v}var l={r:n,c:r};switch(l.s=bne(i.cellXfs,t,i),t.l&&s["!links"].push([d9(l),t.l]),t.c&&s["!comments"].push([d9(l),t.c]),t.t){case"s":case"str":return i.bookSST?(a=vne(i.Strings,t.v,i.revStrings),l.t="s",l.v=a,o?t9(e,18,function(e,t,n){return null==n&&(n=X7(8)),k9(t,n),n.write_shift(4,t.v),n}(0,l)):t9(e,7,function(e,t,n){return null==n&&(n=X7(12)),R9(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",o?t9(e,17,function(e,t,n){return null==n&&(n=X7(8+4*e.v.length)),k9(t,n),S9(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):t9(e,6,function(e,t,n){return null==n&&(n=X7(12+4*e.v.length)),R9(t,n),S9(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?o?t9(e,13,function(e,t,n){return null==n&&(n=X7(8)),k9(t,n),F9(e.v,n),n}(t,l)):t9(e,2,function(e,t,n){return null==n&&(n=X7(12)),R9(t,n),F9(e.v,n),n}(t,l)):o?t9(e,16,function(e,t,n){return null==n&&(n=X7(12)),k9(t,n),H9(e.v,n),n}(t,l)):t9(e,5,function(e,t,n){return null==n&&(n=X7(16)),R9(t,n),H9(e.v,n),n}(t,l)),!0;case"b":return l.t="b",o?t9(e,15,function(e,t,n){return null==n&&(n=X7(5)),k9(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):t9(e,4,function(e,t,n){return null==n&&(n=X7(9)),R9(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",o?t9(e,14,function(e,t,n){return null==n&&(n=X7(8)),k9(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):t9(e,3,function(e,t,n){return null==n&&(n=X7(9)),R9(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return o?t9(e,12,function(e,t,n){return null==n&&(n=X7(4)),k9(t,n)}(0,l)):t9(e,1,function(e,t,n){return null==n&&(n=X7(8)),R9(t,n)}(0,l)),!0}function _ne(e,t){var n,r;t&&t["!merges"]&&(t9(e,177,(n=t["!merges"].length,null==r&&(r=X7(4)),r.write_shift(4,n),r)),t["!merges"].forEach(function(t){t9(e,176,Ine(t))}),t9(e,178))}function Ane(e,t){t&&t["!cols"]&&(t9(e,390),t["!cols"].forEach(function(t,n){t&&t9(e,60,function(e,t,n){null==n&&(n=X7(18));var r=gne(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var i=0;return t.hidden&&(i|=1),"number"==typeof r.width&&(i|=2),t.level&&(i|=t.level<<8),n.write_shift(2,i),n}(n,t))}),t9(e,391))}function One(e,t){var n,r;t&&t["!ref"]&&(t9(e,648),t9(e,649,(n=f9(t["!ref"]),(r=X7(24)).write_shift(4,4),r.write_shift(4,1),W9(n,r),r)),t9(e,650))}function Dne(e,t,n){t["!links"].forEach(function(t){if(t[1].Target){var r=iee(n,-1,t[1].Target.replace(/#.*$/,""),tee.HLINK);t9(e,494,function(e,t){var n=X7(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));W9({s:u9(e[0]),e:u9(e[0])},n),L9("rId"+t,n);var r=e[1].Target.indexOf("#");return S9((-1==r?"":e[1].Target.slice(r+1))||"",n),S9(e[1].Tooltip||"",n),S9("",n),n.slice(0,n.l)}(t,r))}}),delete t["!links"]}function Mne(e,t,n){t9(e,133),t9(e,137,function(e,t,n){null==n&&(n=X7(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),t9(e,138),t9(e,134)}function Lne(e,t){var n,r;t["!protect"]&&t9(e,535,(n=t["!protect"],null==r&&(r=X7(66)),r.write_shift(2,n.password?Yee(n.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){e[1]?r.write_shift(4,null==n[e[0]]||n[e[0]]?0:1):r.write_shift(4,null!=n[e[0]]&&n[e[0]]?0:1)}),r))}function zne(e,t,n,r){var i=e9(),s=n.SheetNames[e],o=n.Sheets[s]||{},a=s;try{n&&n.Workbook&&(a=n.Workbook.Sheets[e].CodeName||a)}catch(gie){}var l,c,u=f9(o["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],t9(i,129),(n.vbaraw||o["!outline"])&&t9(i,147,function(e,t,n){null==n&&(n=X7(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return V9({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),_9(e,n),n.slice(0,n.l)}(a,o["!outline"])),t9(i,148,Pne(u)),Mne(i,0,n.Workbook),Ane(i,o),function(e,t,n,r){var i,s=f9(t["!ref"]||"A1"),o="",a=[];t9(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=c;++u){o=a9(u),Tne(e,t,s,u);var d=!1;if(u<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){u===s.s.r&&(a[p]=c9(p)),i=a[p]+o;var h=l?(t[u]||[])[p]:t[i];d=!!h&&jne(e,h,u,p,r,t,d)}}t9(e,146)}(i,o,0,t),Lne(i,o),function(e,t,n,r){if(t["!autofilter"]){var i=t["!autofilter"],s="string"==typeof i.ref?i.ref:h9(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,a=p9(s);a.s.r==a.e.r&&(a.e.r=p9(t["!ref"]).e.r,s=h9(a));for(var l=0;l<o.length;++l){var c=o[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),t9(e,161,W9(f9(s))),t9(e,162)}}(i,o,n,e),_ne(i,o),Dne(i,o,r),o["!margins"]&&t9(i,476,(l=o["!margins"],null==c&&(c=X7(48)),yne(l),kne.forEach(function(e){H9(l[e],c)}),c)),t&&!t.ignoreEC&&null!=t.ignoreEC||One(i,o),function(e,t,n,r){if(t["!comments"].length>0){var i=iee(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",tee.VML);t9(e,551,L9("rId"+i)),t["!legacy"]=i}}(i,o,e,r),t9(i,130),i.end()}var Fne=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Bne="][*?/\\".split("");function Une(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");return Bne.forEach(function(t){if(-1!=e.indexOf(t))throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),!0}function Wne(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t,n,r,i=e.Workbook&&e.Workbook.Sheets||[];t=e.SheetNames,n=i,r=!!e.vbaraw,t.forEach(function(e,i){Une(e);for(var s=0;s<i;++s)if(e==t[s])throw new Error("Duplicate Sheet Name: "+e);if(r){var o=n&&n[i]&&n[i].CodeName||e;if(95==o.charCodeAt(0)&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}});for(var s=0;s<e.SheetNames.length;++s)xne(e.Sheets[e.SheetNames[s]],e.SheetNames[s],s)}function $ne(e){var t=[A8];t[t.length]=Z8("workbook",null,{xmlns:p7[0],"xmlns:r":l7});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Fne.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=Z8("workbookPr",null,r);var i=e.Workbook&&e.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&i[s]&&i[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:L8(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden"}t[t.length]=Z8("sheet",null,o)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=Z8("definedName",L8(e.Ref),n))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Hne(e,t){return t||(t=X7(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),L9(e.strRelID,t),S9(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Vne(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n,r,i=t.Workbook.Sheets,s=0,o=-1,a=-1;s<i.length;++s)!i[s]||!i[s].Hidden&&-1==o?o=s:1==i[s].Hidden&&-1==a&&(a=s);a>o||(t9(e,135),t9(e,158,(n=o,r||(r=X7(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,n),r.write_shift(4,n),r.write_shift(1,120),r.length>r.l?r.slice(0,r.l):r)),t9(e,136))}}function qne(e,t){var n=e9();return t9(n,131),t9(n,128,function(e,t){t||(t=X7(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return S9("SheetJS",t),S9(G5.version,t),S9(G5.version,t),S9("7262",t),t.length>t.l?t.slice(0,t.l):t}()),t9(n,153,function(e,t){t||(t=X7(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),_9(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),Vne(n,e),function(e,t){t9(e,143);for(var n=0;n!=t.SheetNames.length;++n)t9(e,156,Hne({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]}));t9(e,144)}(n,e),t9(n,132),n.end()}function Gne(e,t,n,r,i){return(".bin"===t.slice(-4)?zne:Ene)(e,n,r,i)}function Kne(e,t,n){return(".bin"===t.slice(-4)?Rte:Tte)(e)}function Jne(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return d8(mee).map(function(e){for(var t=0;t<lee.length;++t)if(lee[t][1]==e)return lee[t];for(t=0;t<dee.length;++t)if(dee[t][1]==e)return dee[t];throw e}).forEach(function(r){if(null!=e[r[1]]){var i=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof i?i=String(i):!0===i||!1===i?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(J8(mee[r[1]]||r[1],i))}}),Z8("DocumentProperties",n.join(""),{xmlns:h7})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return e&&d8(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<lee.length;++r)if(t==lee[r][1])return;for(r=0;r<dee.length;++r)if(t==dee[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var s=e[t],o="string";"number"==typeof s?(o="float",s=String(s)):!0===s||!1===s?(o="boolean",s=s?"1":"0"):s=String(s),i.push(Z8(z8(t),s,{"dt:dt":o}))}}),t&&d8(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],s="string";"number"==typeof r?(s="float",r=String(r)):!0===r||!1===r?(s="boolean",r=r?"1":"0"):r instanceof Date?(s="dateTime.tz",r=r.toISOString()):r=String(r),i.push(Z8(z8(n),r,{"dt:dt":s}))}}),"<"+r+' xmlns="'+h7+'">'+i.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function Yne(e){return Z8("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+_te(e.Ref,{r:0,c:0})})}function Zne(e,t,n,r,i,s,o){if(!e||null==e.v&&null==e.f)return"";var a={};if(e.f&&(a["ss:Formula"]="="+L8(_te(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var l=u9(e.F.slice(t.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(e.l&&e.l.Target&&(a["ss:HRef"]=L8(e.l.Target),e.l.Tooltip&&(a["x:HRefScreenTip"]=L8(e.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c==o.c&&c[u].s.r==o.r&&(c[u].e.c>c[u].s.c&&(a["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(a["ss:MergeDown"]=c[u].e.r-c[u].s.r));var d="",p="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",p=String(e.v);break;case"b":d="Boolean",p=e.v?"1":"0";break;case"e":d="Error",p=Z9[e.v];break;case"d":d="DateTime",p=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||E6[14]);break;case"s":d="String",p=((e.v||"")+"").replace(D8,function(e){return O8[e]}).replace(F8,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var h=bne(r.cellXfs,e,r);a["ss:StyleID"]="s"+(21+h),a["ss:Index"]=o.c+1;var f=null!=e.v?p:"",m="z"==e.t?"":'<Data ss:Type="'+d+'">'+f+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map(function(e){var t=Z8("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return Z8("Comment",t,{"ss:Author":e.a})}).join("")),Z8("Cell",m,a)}function Qne(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=ste(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function Xne(e,t,n){var r=[],i=n.SheetNames[e],s=n.Sheets[i],o=s?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==n&&(a.Name.match(/^_xlfn\./)||s.push(Yne(a)))}return s.join("")}(s,0,e,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=s?function(e,t){if(!e["!ref"])return"";var n=f9(e["!ref"]),r=e["!merges"]||[],i=0,s=[];e["!cols"]&&e["!cols"].forEach(function(e,t){rte(e);var n=!!e.width,r=gne(t,e),i={"ss:Index":t+1};n&&(i["ss:Width"]=ete(r.width)),e.hidden&&(i["ss:Hidden"]="1"),s.push(Z8("Column",null,i))});for(var o=Array.isArray(e),a=n.s.r;a<=n.e.r;++a){for(var l=[Qne(a,(e["!rows"]||[])[a])],c=n.s.c;c<=n.e.c;++c){var u=!1;for(i=0;i!=r.length;++i)if(!(r[i].s.c>c||r[i].s.r>a||r[i].e.c<c||r[i].e.r<a)){r[i].s.c==c&&r[i].s.r==a||(u=!0);break}if(!u){var d={r:a,c:c},p=d9(d),h=o?(e[a]||[])[c]:e[p];l.push(Zne(h,p,e,t,0,0,d))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(Z8("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(Z8("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(Z8("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(Z8("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&(!r.Workbook.Sheets[s]||r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(J8("ProtectContents","True")),e["!protect"].objects&&i.push(J8("ProtectObjects","True")),e["!protect"].scenarios&&i.push(J8("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||i.push(J8("EnableSelection","UnlockedCells")):i.push(J8("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&i.push("<"+t[1]+"/>")})),0==i.length?"":Z8("WorksheetOptions",i.join(""),{xmlns:f7})}(s,0,e,n)),r.join("")}function ere(e,t){t||(t={}),e.SSF||(e.SSF=N8(E6)),e.SSF&&(s8(),i8(e.SSF),t.revssf=f8(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],bne(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(Jne(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(Z8("Worksheet",Xne(r,t,e),{"ss:Name":L8(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var r=[];r.push(Z8("NumberFormat",null,{"ss:Format":L8(E6[e.numFmtId])}));var i={"ss:ID":"s"+(21+t)};n.push(Z8("Style",r.join(""),i))}),Z8("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var i=t[r];null==i.Sheet&&(i.Name.match(/^_xlfn\./)||n.push(Yne(i)))}return Z8("Names",n.join(""))}(e),A8+Z8("Workbook",n.join(""),{xmlns:m7,"xmlns:o":h7,"xmlns:x":f7,"xmlns:ss":m7,"xmlns:dt":v7,"xmlns:html":b7})}var tre="e0859ff2f94f6810ab9108002b27b3d9",nre="02d5cdd59c2e1b10939708002b2cf9ae",rre="05d5cdd59c2e1b10939708002b2cf9ae";function ire(e,t){var n=t||{},r=l8.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return l8.utils.cfb_add(r,i,mre(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],i=[],s=[],o=0,a=p8(G9,"n"),l=p8(K9,"n");if(e.Props)for(n=d8(e.Props),o=0;o<n.length;++o)(Object.prototype.hasOwnProperty.call(a,n[o])?r:Object.prototype.hasOwnProperty.call(l,n[o])?i:s).push([n[o],e.Props[n[o]]]);if(e.Custprops)for(n=d8(e.Custprops),o=0;o<n.length;++o)Object.prototype.hasOwnProperty.call(e.Props||{},n[o])||(Object.prototype.hasOwnProperty.call(a,n[o])?r:Object.prototype.hasOwnProperty.call(l,n[o])?i:s).push([n[o],e.Custprops[n[o]]]);var c=[];for(o=0;o<s.length;++o)gee.indexOf(s[o][0])>-1||pee.indexOf(s[o][0])>-1||null!=s[o][1]&&c.push(s[o]);i.length&&l8.utils.cfb_add(t,"/SummaryInformation",xee(i,tre,l,K9)),(r.length||c.length)&&l8.utils.cfb_add(t,"/DocumentSummaryInformation",xee(r,nre,a,G9,c.length?c:null,rre))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(n,r){if(0!=r){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==i.slice(-1)&&l8.utils.cfb_add(e,i,t.FileIndex[r].content)}})}(r,l8.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var sre={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=r,7&s&&(n.level=7&s),16&s&&(n.hidden=!0),32&s&&(n.hpt=i/20),n}},1:{f:function(e){return[P9(e)]}},2:{f:function(e){return[P9(e),z9(e),"n"]}},3:{f:function(e){return[P9(e),e.read_shift(1),"e"]}},4:{f:function(e){return[P9(e),e.read_shift(1),"b"]}},5:{f:function(e){return[P9(e),$9(e),"n"]}},6:{f:function(e){return[P9(e),w9(e),"str"]}},7:{f:function(e){return[P9(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,i=P9(e);i.r=n["!row"];var s=[i,w9(e),"str"];if(n.cellFormula){e.l+=2;var o=ane(e,r-e.l,n);s[3]=rne(o,0,i,n.supbooks,n)}else e.l=r;return s}},9:{f:function(e,t,n){var r=e.l+t,i=P9(e);i.r=n["!row"];var s=[i,$9(e),"n"];if(n.cellFormula){e.l+=2;var o=ane(e,r-e.l,n);s[3]=rne(o,0,i,n.supbooks,n)}else e.l=r;return s}},10:{f:function(e,t,n){var r=e.l+t,i=P9(e);i.r=n["!row"];var s=[i,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var o=ane(e,r-e.l,n);s[3]=rne(o,0,i,n.supbooks,n)}else e.l=r;return s}},11:{f:function(e,t,n){var r=e.l+t,i=P9(e);i.r=n["!row"];var s=[i,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var o=ane(e,r-e.l,n);s[3]=rne(o,0,i,n.supbooks,n)}else e.l=r;return s}},12:{f:function(e){return[I9(e)]}},13:{f:function(e){return[I9(e),z9(e),"n"]}},14:{f:function(e){return[I9(e),e.read_shift(1),"e"]}},15:{f:function(e){return[I9(e),e.read_shift(1),"b"]}},16:{f:function(e){return[I9(e),$9(e),"n"]}},17:{f:function(e){return[I9(e),w9(e),"str"]}},18:{f:function(e){return[I9(e),e.read_shift(4),"s"]}},19:{f:E9},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),s=D9(e),o=lne(e,0,n),a=A9(e);e.l=r;var l={Name:s,Ptg:o};return i<268435455&&(l.Sheet=i),a&&(l.Comment=a),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var i=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(r.underline=s);var o=e.read_shift(1);o>0&&(r.family=o);var a=e.read_shift(1);switch(a>0&&(r.charset=a),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),a=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=Y9[r];l&&(t.rgb=Qee(l));break;case 2:t.rgb=Qee([s,o,a]);break;case 3:t.theme=r}return 0!=i&&(t.tint=i>0?i/32767:i/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=w9(e),r}},44:{f:function(e,t){return[e.read_shift(2),w9(e)]}},45:{f:dte},46:{f:mte},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),i=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:i}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:function(e,t,n){if(!n.cellStyles)return Q7(e,t);var r=n&&n.biff>=12?4:2,i=e.read_shift(r),s=e.read_shift(r),o=e.read_shift(r),a=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:i,e:s,w:o,ixfe:a,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}},62:{f:function(e){return[P9(e),E9(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=d9(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Q7,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=j9(e),n}},148:{f:Nne,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var i=t>8?w9(e):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=M9(e),n.name=w9(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:U9},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Rne},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:w9(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:M9},357:{},358:{},359:{},360:{T:1},361:{},362:{f:function(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=Tee(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],i=e.l+t,s=e.read_shift(n.biff>8?4:2);0!==s--;)r.push(jee(e,n.biff,n));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,i=B9(e),s=e.read_shift(1),o=[i];if(o[2]=s,n.cellFormula){var a=one(e,r-e.l,n);o[1]=a}else e.l=r;return o}},427:{f:function(e,t,n){var r=e.l+t,i=[U9(e)];if(n.cellFormula){var s=cne(e,r-e.l,n);i[1]=s,e.l=r}else e.l=r;return i}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return kne.forEach(function(n){t[n]=$9(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=U9(e),i=A9(e),s=w9(e),o=w9(e),a=w9(e);e.l=n;var l={rfx:r,relId:i,loc:s,display:a};return o&&(l.Tooltip=o),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:M9},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Pte},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=U9(e);return t.rfx=n.s,t.ref=d9(n.s),e.l+=16,t}},636:{T:-1},637:{f:T9},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:w9(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ore(e,t,n,r){var i=t;if(!isNaN(i)){var s=r||(n||[]).length||0,o=e.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&B7(n)&&e.push(n)}}function are(e,t,n){return e||(e=X7(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function lre(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var i="d"==t.t?v8(E8(t.v)):t.v;return void(i==(0|i)&&i>=0&&i<65536?ore(e,2,(s=n,o=r,a=i,l=X7(9),are(l,s,o),l.write_shift(2,a),l)):ore(e,3,function(e,t,n){var r=X7(15);return are(r,e,t),r.write_shift(8,n,"f"),r}(n,r,i)));case"b":case"e":return void ore(e,5,function(e,t,n,r){var i=X7(9);return are(i,e,t),Eee(n,r||"b",i),i}(n,r,t.v,t.t));case"s":case"str":return void ore(e,4,function(e,t,n){var r=X7(8+2*n.length);return are(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}var s,o,a,l;ore(e,1,are(null,n,r))}function cre(e,t){for(var n=t||{},r=e9(),i=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==n.sheet&&(i=s);if(0==i&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return ore(r,4==n.biff?1033:3==n.biff?521:9,Oee(0,16,n)),function(e,t,n,r){var i,s=Array.isArray(t),o=f9(t["!ref"]||"A1"),a="",l=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),i=h9(o)}for(var c=o.s.r;c<=o.e.r;++c){a=a9(c);for(var u=o.s.c;u<=o.e.c;++u){c===o.s.r&&(l[u]=c9(u)),i=l[u]+a;var d=s?(t[c]||[])[u]:t[i];d&&lre(e,d,c,u)}}}(r,e.Sheets[e.SheetNames[i]],0,n),ore(r,10),r.end()}function ure(e,t,n){ore(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,i=X7(r?15+n.length:16+2*n.length);return i.write_shift(2,20*e.sz),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,n.length),r||i.write_shift(1,1),i.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),i}({sz:12,name:"Arial"},n))}function dre(e,t){if(t){var n=0;t.forEach(function(t,r){++n<=256&&t&&ore(e,125,function(e,t){var n=X7(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(gne(r,t),r))})}}function pre(e,t,n,r,i){var s=16+bne(i.cellXfs,t,i);if(null!=t.v||t.bf)if(t.bf)ore(e,6,ine(t,n,r,0,s));else switch(t.t){case"d":case"n":ore(e,515,function(e,t,n,r){var i=X7(14);return kee(e,t,r,i),H9(n,i),i}(n,r,"d"==t.t?v8(E8(t.v)):t.v,s));break;case"b":case"e":ore(e,517,function(e,t,n,r,i,s){var o=X7(8);return kee(e,t,r,o),Eee(n,s,o),o}(n,r,t.v,s,0,t.t));break;case"s":case"str":i.bookSST?ore(e,253,function(e,t,n,r){var i=X7(10);return kee(e,t,r,i),i.write_shift(4,n),i}(n,r,vne(i.Strings,t.v,i.revStrings),s)):ore(e,516,function(e,t,n,r,i){var s=!i||8==i.biff,o=X7(+s+8+(1+s)*n.length);return kee(e,t,r,o),o.write_shift(2,n.length),s&&o.write_shift(1,1),o.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),o}(n,r,(t.v||"").slice(0,255),s,i));break;default:ore(e,513,kee(n,r,s))}else ore(e,513,kee(n,r,s))}function hre(e,t,n){var r,i,s=e9(),o=n.SheetNames[e],a=n.Sheets[o]||{},l=(n||{}).Workbook||{},c=(l.Sheets||[])[e]||{},u=Array.isArray(a),d=8==t.biff,p="",h=[],f=f9(a["!ref"]||"A1"),m=d?65536:16384;if(f.e.c>255||f.e.r>=m){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,m-1)}ore(s,2057,Oee(0,16,t)),ore(s,13,Cee(1)),ore(s,12,Cee(100)),ore(s,15,wee(!0)),ore(s,17,wee(!1)),ore(s,16,H9(.001)),ore(s,95,wee(!0)),ore(s,42,wee(!1)),ore(s,43,wee(!1)),ore(s,130,Cee(1)),ore(s,128,((i=X7(8)).write_shift(4,0),i.write_shift(2,0),i.write_shift(2,0),i)),ore(s,131,wee(!1)),ore(s,132,wee(!1)),d&&dre(s,a["!cols"]),ore(s,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=X7(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(f,t)),d&&(a["!links"]=[]);for(var v=f.s.r;v<=f.e.r;++v){p=a9(v);for(var g=f.s.c;g<=f.e.c;++g){v===f.s.r&&(h[g]=c9(g)),r=h[g]+p;var y=u?(a[v]||[])[g]:a[r];y&&(pre(s,y,v,g,t),d&&y.l&&a["!links"].push([r,y.l]))}}var b=c.CodeName||c.name||o;return d&&ore(s,574,function(e){var t=X7(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((l.Views||[])[0])),d&&(a["!merges"]||[]).length&&ore(s,229,function(e){var t=X7(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)Aee(e[n],t);return t}(a["!merges"])),d&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];ore(e,440,zee(r)),r[1].Tooltip&&ore(e,2048,Fee(r))}delete t["!links"]}(s,a),ore(s,442,Pee(b)),d&&function(e,t){var n=X7(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),ore(e,2151,n),(n=X7(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),Aee(f9(t["!ref"]||"A1"),n),n.write_shift(4,4),ore(e,2152,n)}(s,a),ore(s,10),s.end()}function fre(e,t,n){var r,i=e9(),s=(e||{}).Workbook||{},o=s.Sheets||[],a=s.WBProps||{},l=8==n.biff,c=5==n.biff;ore(i,2057,Oee(0,5,n)),"xla"==n.bookType&&ore(i,135),ore(i,225,l?Cee(1200):null),ore(i,193,function(e,t){t||(t=X7(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),c&&ore(i,191),c&&ore(i,192),ore(i,226),ore(i,92,function(e,t){var n=!t||8==t.biff,r=X7(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),ore(i,66,Cee(l?1200:1252)),l&&ore(i,353,Cee(0)),l&&ore(i,448),ore(i,317,function(e){for(var t=X7(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),l&&e.vbaraw&&ore(i,211),l&&e.vbaraw&&ore(i,442,Pee(a.CodeName||"ThisWorkbook")),ore(i,156,Cee(17)),ore(i,25,wee(!1)),ore(i,18,wee(!1)),ore(i,19,Cee(0)),l&&ore(i,431,wee(!1)),l&&ore(i,444,Cee(0)),ore(i,61,((r=X7(18)).write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r)),ore(i,64,wee(!1)),ore(i,141,Cee(0)),ore(i,34,wee("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&function(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}(e.Workbook.WBProps.date1904)?"true":"false"}(e))),ore(i,14,wee(!0)),l&&ore(i,439,wee(!1)),ore(i,218,Cee(0)),ure(i,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)null!=t[i]&&ore(e,1054,Mee(i,t[i],n))})}(i,e.SSF,n),function(e,t){for(var n=0;n<16;++n)ore(e,224,Lee({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){ore(e,224,Lee(n,0,t))})}(i,n),l&&ore(i,352,wee(!1));var u=i.end(),d=e9();l&&ore(d,140,function(e){return e||(e=X7(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),l&&n.Strings&&function(e,t,n){var r=(n||[]).length||0;if(r<=8224)return ore(e,t,n,r);var i=t;if(!isNaN(i)){for(var s=n.parts||[],o=0,a=0,l=0;l+(s[o]||8224)<=8224;)l+=s[o]||8224,o++;var c=e.next(4);for(c.write_shift(2,i),c.write_shift(2,l),e.push(n.slice(a,a+l)),a+=l;a<r;){for((c=e.next(4)).write_shift(2,60),l=0;l+(s[o]||8224)<=8224;)l+=s[o]||8224,o++;c.write_shift(2,l),e.push(n.slice(a,a+l)),a+=l}}}(d,252,function(e){var t=X7(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=Nee(e[r]);var i=p6([t].concat(n));return i.parts=[t.length].concat(n.map(function(e){return e.length})),i}(n.Strings)),ore(d,10);var p=d.end(),h=e9(),f=0,m=0;for(m=0;m<e.SheetNames.length;++m)f+=(l?12:11)+(l?2:1)*e.SheetNames[m].length;var v=u.length+f+p.length;for(m=0;m<e.SheetNames.length;++m)ore(h,133,Dee({pos:v,hs:(o[m]||{}).Hidden||0,dt:0,name:e.SheetNames[m]},n)),v+=t[m].length;var g=h.end();if(f!=g.length)throw new Error("BS8 "+f+" != "+g.length);var y=[];return u.length&&y.push(u),g.length&&y.push(g),p.length&&y.push(p),p6(y)}function mre(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];r&&r["!ref"]&&p9(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var i=t||{};switch(i.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=N8(E6)),e&&e.SSF&&(s8(),i8(e.SSF),n.revssf=f8(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,Ure(n),n.cellXfs=[],bne(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)r[r.length]=hre(i,n,e);return r.unshift(fre(e,r,n)),p6(r)}(e,t);case 4:case 3:case 2:return cre(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function vre(e,t,n,r){for(var i=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var a=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>o||i[c].e.r<n||i[c].e.c<o)){if(i[c].s.r<n||i[c].s.c<o){a=-1;break}a=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(a<0)){var u=d9({r:n,c:o}),d=r.dense?(e[n]||[])[o]:e[u],p=d&&null!=d.v&&(d.h||B8(d.w||(v9(d),d.w)||""))||"",h={};a>1&&(h.rowspan=a),l>1&&(h.colspan=l),r.editable?p='<span contenteditable="true">'+p+"</span>":d&&(h["data-t"]=d&&d.t||"z",null!=d.v&&(h["data-v"]=d.v),null!=d.z&&(h["data-z"]=d.z),d.l&&"#"!=(d.l.Target||"#").charAt(0)&&(p='<a href="'+d.l.Target+'">'+p+"</a>")),h.id=(r.id||"sjs")+"-"+u,s.push(Z8("td",p,h))}}return"<tr>"+s.join("")+"</tr>"}function gre(e,t){var n=t||{},r=null!=n.header?n.header:'<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',i=null!=n.footer?n.footer:"</body></html>",s=[r],o=p9(e["!ref"]);n.dense=Array.isArray(e),s.push(function(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}(0,0,n));for(var a=o.s.r;a<=o.e.r;++a)s.push(vre(e,o,a,n));return s.push("</table>"+i),s.join("")}function yre(e,t,n){var r=n||{},i=0,s=0;if(null!=r.origin)if("number"==typeof r.origin)i=r.origin;else{var o="string"==typeof r.origin?u9(r.origin):r.origin;i=o.r,s=o.c}var a=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(e["!ref"]){var u=p9(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),-1==i&&(c.e.r=i=u.e.r+1)}var d=[],p=0,h=e["!rows"]||(e["!rows"]=[]),f=0,m=0,v=0,g=0,y=0,b=0;for(e["!cols"]||(e["!cols"]=[]);f<a.length&&m<l;++f){var x=a[f];if(xre(x)){if(r.display)continue;h[m]={hidden:!0}}var w=x.children;for(v=g=0;v<w.length;++v){var S=w[v];if(!r.display||!xre(S)){var C=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):G8(S.innerHTML),E=S.getAttribute("data-z")||S.getAttribute("z");for(p=0;p<d.length;++p){var T=d[p];T.s.c==g+s&&T.s.r<m+i&&m+i<=T.e.r&&(g=T.e.c+1-s,p=-1)}b=+S.getAttribute("colspan")||1,((y=+S.getAttribute("rowspan")||1)>1||b>1)&&d.push({s:{r:m+i,c:g+s},e:{r:m+i+(y||1)-1,c:g+s+(b||1)-1}});var N={t:"s",v:C},P=S.getAttribute("data-t")||S.getAttribute("t")||"";null!=C&&(0==C.length?N.t=P||"z":r.raw||0==C.trim().length||"s"==P||("TRUE"===C?N={t:"b",v:!0}:"FALSE"===C?N={t:"b",v:!1}:isNaN(R8(C))?isNaN(k8(C).getDate())||(N={t:"d",v:E8(C)},r.cellDates||(N={t:"n",v:v8(N.v)}),N.z=r.dateNF||E6[14]):N={t:"n",v:R8(C)})),void 0===N.z&&null!=E&&(N.z=E);var R="",I=S.getElementsByTagName("A");if(I&&I.length)for(var k=0;k<I.length&&(!I[k].hasAttribute("href")||"#"==(R=I[k].getAttribute("href")).charAt(0));++k);R&&"#"!=R.charAt(0)&&(N.l={Target:R}),r.dense?(e[m+i]||(e[m+i]=[]),e[m+i][g+s]=N):e[d9({c:g+s,r:m+i})]=N,c.e.c<g+s&&(c.e.c=g+s),g+=b}}++m}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,m-1+i),e["!ref"]=h9(c),m>=l&&(e["!fullref"]=h9((c.e.r=a.length-f+m-1+i,c))),e}function bre(e,t){return yre((t||{}).dense?[]:{},e,t)}function xre(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"==typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"==typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var wre=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Y8({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return A8+t}}(),Sre=function(){var e=function(e){return L8(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",n=function(n,r,i){var s=[];s.push('      <table:table table:name="'+L8(r.SheetNames[i])+'" table:style-name="ta1">\n');var o=0,a=0,l=p9(n["!ref"]||"A1"),c=n["!merges"]||[],u=0,d=Array.isArray(n);if(n["!cols"])for(a=0;a<=l.e.c;++a)s.push("        <table:table-column"+(n["!cols"][a]?' table:style-name="co'+n["!cols"][a].ods+'"':"")+"></table:table-column>\n");var p="",h=n["!rows"]||[];for(o=0;o<l.s.r;++o)p=h[o]?' table:style-name="ro'+h[o].ods+'"':"",s.push("        <table:table-row"+p+"></table:table-row>\n");for(;o<=l.e.r;++o){for(p=h[o]?' table:style-name="ro'+h[o].ods+'"':"",s.push("        <table:table-row"+p+">\n"),a=0;a<l.s.c;++a)s.push(t);for(;a<=l.e.c;++a){var f=!1,m={},v="";for(u=0;u!=c.length;++u)if(!(c[u].s.c>a||c[u].s.r>o||c[u].e.c<a||c[u].e.r<o)){c[u].s.c==a&&c[u].s.r==o||(f=!0),m["table:number-columns-spanned"]=c[u].e.c-c[u].s.c+1,m["table:number-rows-spanned"]=c[u].e.r-c[u].s.r+1;break}if(f)s.push("          <table:covered-table-cell/>\n");else{var g=d9({r:o,c:a}),y=d?(n[o]||[])[a]:n[g];if(y&&y.f&&(m["table:formula"]=L8(hne(y.f)),y.F&&y.F.slice(0,g.length)==g)){var b=p9(y.F);m["table:number-matrix-columns-spanned"]=b.e.c-b.s.c+1,m["table:number-matrix-rows-spanned"]=b.e.r-b.s.r+1}if(y){switch(y.t){case"b":v=y.v?"TRUE":"FALSE",m["office:value-type"]="boolean",m["office:boolean-value"]=y.v?"true":"false";break;case"n":v=y.w||String(y.v||0),m["office:value-type"]="float",m["office:value"]=y.v||0;break;case"s":case"str":v=null==y.v?"":y.v,m["office:value-type"]="string";break;case"d":v=y.w||E8(y.v).toISOString(),m["office:value-type"]="date",m["office:date-value"]=E8(y.v).toISOString(),m["table:style-name"]="ce1";break;default:s.push(t);continue}var x=e(v);if(y.l&&y.l.Target){var w=y.l.Target;"#"==(w="#"==w.charAt(0)?"#"+fne(w.slice(1)):w).charAt(0)||w.match(/^\w+:/)||(w="../"+w),x=Z8("text:a",x,{"xlink:href":w.replace(/&/g,"&amp;")})}s.push("          "+Z8("table:table-cell",Z8("text:p",x,{}),m)+"\n")}else s.push(t)}}s.push("        </table:table-row>\n")}return s.push("      </table:table>\n"),s.join("")};return function(e,t){var r=[A8],i=Y8({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=Y8({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(r.push("<office:document"+i+s+">\n"),r.push(aee().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+i+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var i=t["!cols"][r];if(null==i.width&&null==i.wpx&&null==i.wch)continue;rte(i),i.ods=n;var s=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++n}});var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var i=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+i+'"/>\n'),e.push("  </style:style>\n"),++r}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var o=0;o!=e.SheetNames.length;++o)r.push(n(e.Sheets[e.SheetNames[o]],e,o));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==t.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function Cre(e,t){if("fods"==t.bookType)return Sre(e,t);var n=_8(),r="",i=[],s=[];return j8(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),j8(n,r="content.xml",Sre(e,t)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),j8(n,r="styles.xml",wre(e,t)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),j8(n,r="meta.xml",A8+aee()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),j8(n,r="manifest.rdf",function(e){var t=[A8];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var n=0;n!=e.length;++n)t.push(see(e[n][0],e[n][1])),t.push(oee("",e[n][0]));return t.push(see("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(s)),i.push([r,"application/rdf+xml"]),j8(n,r="META-INF/manifest.xml",function(e){var t=[A8];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(i)),n}
/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ere(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Tre(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):c6(q8(e))}function Nre(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(e,r),r+=e.length}),n}function Pre(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function Rre(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function Ire(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function kre(e){for(var t=[],n=[0];n[0]<e.length;){var r,i=n[0],s=Pre(e,n),o=7&s,a=0;if(0==(s=Math.floor(s/8)))break;switch(o){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:a=4,r=e.slice(n[0],n[0]+a),n[0]+=a;break;case 1:a=8,r=e.slice(n[0],n[0]+a),n[0]+=a;break;case 2:a=Pre(e,n),r=e.slice(n[0],n[0]+a),n[0]+=a;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(s," at offset ").concat(i))}var c={data:r,type:o};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function jre(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e){e.data&&(t.push(Rre(8*n+e.type)),2==e.type&&t.push(Rre(e.data.length)),t.push(e.data))})}),Nre(t)}function _re(e){for(var t,n=[],r=[0];r[0]<e.length;){var i=Pre(e,r),s=kre(e.slice(r[0],r[0]+i));r[0]+=i;var o={id:Ire(s[1][0].data),messages:[]};s[2].forEach(function(t){var n=kre(t.data),i=Ire(n[3][0].data);o.messages.push({meta:n,data:e.slice(r[0],r[0]+i)}),r[0]+=i}),(null==(t=s[3])?void 0:t[0])&&(o.merge=Ire(s[3][0].data)>>>0>0),n.push(o)}return n}function Are(e){var t=[];return e.forEach(function(e){var n=[];n[1]=[{data:Rre(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:Rre(+!!e.merge),type:0}]);var r=[];e.messages.forEach(function(e){r.push(e.data),e.meta[3]=[{type:0,data:Rre(e.data.length)}],n[2].push({data:jre(e.meta),type:2})});var i=jre(n);t.push(Rre(i.length)),t.push(i),r.forEach(function(e){return t.push(e)})}),Nre(t)}function Ore(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=Pre(t,n),i=[];n[0]<t.length;){var s=3&t[n[0]];if(0!=s){var o=0,a=0;if(1==s?(a=4+(t[n[0]]>>2&7),o=(224&t[n[0]++])<<3,o|=t[n[0]++]):(a=1+(t[n[0]++]>>2),2==s?(o=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(o=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),i=[Nre(i)],0==o)throw new Error("Invalid offset 0");if(o>i[0].length)throw new Error("Invalid offset beyond length");if(a>=o)for(i.push(i[0].slice(-o)),a-=o;a>=i[i.length-1].length;)i.push(i[i.length-1]),a-=i[i.length-1].length;i.push(i[0].slice(-o,-o+a))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}i.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var u=Nre(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function Dre(e){for(var t=[],n=0;n<e.length;){var r=e[n++],i=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(Ore(r,e.slice(n,n+i))),n+=i}if(n!==e.length)throw new Error("data is not a valid framed stream!");return Nre(t)}function Mre(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),i=new Uint8Array(4);t.push(i);var s=Rre(r),o=s.length;t.push(s),r<=60?(o++,t.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),o+=r,i[0]=0,i[1]=255&o,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return Nre(t)}function Lre(e,t){var n=new Uint8Array(32),r=Ere(n),i=12,s=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var s=0;i>=1;++s,i/=256)e[t+s]=255&i;e[t+15]|=n>=0?0:128}(n,i,e.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,e.v?1:0,!0),s|=2,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(i,t.indexOf(e.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,s,!0),n.slice(0,i)}function zre(e,t){var n=new Uint8Array(32),r=Ere(n),i=12,s=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(i,e.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,e.v?1:0,!0),s|=32,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(i,t.indexOf(e.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,s,!0),n.slice(0,i)}function Fre(e){return Pre(kre(e)[1][0].data)}function Bre(e,t,n){var r,i,s,o;if(!(null==(r=e[6])?void 0:r[0])||!(null==(i=e[7])?void 0:i[0]))throw"Mutation only works on post-BNC storages!";if((null==(o=null==(s=e[8])?void 0:s[0])?void 0:o.data)&&Ire(e[8][0].data)>0)throw"Math only works with normal offsets";for(var a=0,l=Ere(e[7][0].data),c=0,u=[],d=Ere(e[4][0].data),p=0,h=[],f=0;f<t.length;++f)if(null!=t[f]){var m,v;switch(l.setUint16(2*f,c,!0),d.setUint16(2*f,p,!0),typeof t[f]){case"string":m=Lre({t:"s",v:t[f]},n),v=zre({t:"s",v:t[f]},n);break;case"number":m=Lre({t:"n",v:t[f]},n),v=zre({t:"n",v:t[f]},n);break;case"boolean":m=Lre({t:"b",v:t[f]},n),v=zre({t:"b",v:t[f]},n);break;default:throw new Error("Unsupported value "+t[f])}u.push(m),c+=m.length,h.push(v),p+=v.length,++a}else l.setUint16(2*f,65535,!0),d.setUint16(2*f,65535);for(e[2][0].data=Rre(a);f<e[7][0].data.length/2;++f)l.setUint16(2*f,65535,!0),d.setUint16(2*f,65535,!0);return e[6][0].data=Nre(u),e[3][0].data=Nre(h),a}function Ure(e){var t;(t=[["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]],function(e){for(var n=0;n!=t.length;++n){var r=t[n];void 0===e[r[0]]&&(e[r[0]]=r[1]),"n"===r[2]&&(e[r[0]]=Number(e[r[0]]))}})(e)}function Wre(e,t){return"ods"==t.bookType?Cre(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=p9(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(h9(r)));var s=Jre(n,{range:r,header:1}),o=["~Sh33tJ5~"];s.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&o.push(e)})});var a={},l=[],c=l8.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&_re(Dre(t.content)).forEach(function(e){l.push(e.id),a[e.id]={deps:[],location:n,type:Ire(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var u=l.filter(function(e){return e>1}).map(function(e){return[e,Rre(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&_re(Dre(t.content)).forEach(function(e){e.messages.forEach(function(t){u.forEach(function(t){e.messages.some(function(e){return 11006!=Ire(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])})&&a[t[0]].deps.push(e.id)})})})});for(var d,p=l8.find(c,a[1].location),h=_re(Dre(p.content)),f=0;f<h.length;++f){var m=h[f];1==m.id&&(d=m)}var v=Fre(kre(d.messages[0].data)[1][0].data);for(h=_re(Dre((p=l8.find(c,a[v].location)).content)),f=0;f<h.length;++f)(m=h[f]).id==v&&(d=m);for(v=Fre(kre(d.messages[0].data)[2][0].data),h=_re(Dre((p=l8.find(c,a[v].location)).content)),f=0;f<h.length;++f)(m=h[f]).id==v&&(d=m);for(v=Fre(kre(d.messages[0].data)[2][0].data),h=_re(Dre((p=l8.find(c,a[v].location)).content)),f=0;f<h.length;++f)(m=h[f]).id==v&&(d=m);var g=kre(d.messages[0].data);g[6][0].data=Rre(r.e.r+1),g[7][0].data=Rre(r.e.c+1);for(var y=Fre(g[46][0].data),b=l8.find(c,a[y].location),x=_re(Dre(b.content)),w=0;w<x.length&&x[w].id!=y;++w);if(x[w].id!=y)throw"Bad ColumnRowUIDMapArchive";var S=kre(x[w].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var C=0;C<=r.e.c;++C){var E=[];E[1]=E[2]=[{type:0,data:Rre(C+420690)}],S[1].push({type:2,data:jre(E)}),S[2].push({type:0,data:Rre(C)}),S[3].push({type:0,data:Rre(C)})}S[4]=[],S[5]=[],S[6]=[];for(var T=0;T<=r.e.r;++T)(E=[])[1]=E[2]=[{type:0,data:Rre(T+726270)}],S[4].push({type:2,data:jre(E)}),S[5].push({type:0,data:Rre(T)}),S[6].push({type:0,data:Rre(T)});x[w].messages[0].data=jre(S),b.content=Mre(Are(x)),b.size=b.content.length,delete g[46];var N=kre(g[4][0].data);N[7][0].data=Rre(r.e.r+1);var P=Fre(kre(N[1][0].data)[2][0].data);if((x=_re(Dre((b=l8.find(c,a[P].location)).content)))[0].id!=P)throw"Bad HeaderStorageBucket";var R=kre(x[0].messages[0].data);for(T=0;T<s.length;++T){var I=kre(R[2][0].data);I[1][0].data=Rre(T),I[4][0].data=Rre(s[T].length),R[2][T]={type:R[2][0].type,data:jre(I)}}x[0].messages[0].data=jre(R),b.content=Mre(Are(x)),b.size=b.content.length;var k=Fre(N[2][0].data);if((x=_re(Dre((b=l8.find(c,a[k].location)).content)))[0].id!=k)throw"Bad HeaderStorageBucket";for(R=kre(x[0].messages[0].data),C=0;C<=r.e.c;++C)(I=kre(R[2][0].data))[1][0].data=Rre(C),I[4][0].data=Rre(r.e.r+1),R[2][C]={type:R[2][0].type,data:jre(I)};x[0].messages[0].data=jre(R),b.content=Mre(Are(x)),b.size=b.content.length;var j=Fre(N[4][0].data);!function(){for(var e,t=l8.find(c,a[j].location),n=_re(Dre(t.content)),r=0;r<n.length;++r){var i=n[r];i.id==j&&(e=i)}var s=kre(e.messages[0].data);s[3]=[];var l=[];o.forEach(function(e,t){l[1]=[{type:0,data:Rre(t)}],l[2]=[{type:0,data:Rre(1)}],l[3]=[{type:2,data:Tre(e)}],s[3].push({type:2,data:jre(l)})}),e.messages[0].data=jre(s);var u=Mre(Are(n));t.content=u,t.size=t.content.length}();var _=kre(N[3][0].data),A=_[1][0];delete _[2];var O=kre(A.data),D=Fre(O[2][0].data);!function(){for(var e,t=l8.find(c,a[D].location),n=_re(Dre(t.content)),i=0;i<n.length;++i){var l=n[i];l.id==D&&(e=l)}var u=kre(e.messages[0].data);delete u[6],delete _[7];var d=new Uint8Array(u[5][0].data);u[5]=[];for(var p=0,h=0;h<=r.e.r;++h){var f=kre(d);p+=Bre(f,s[h],o),f[1][0].data=Rre(h),u[5].push({data:jre(f),type:2})}u[1]=[{type:0,data:Rre(r.e.c+1)}],u[2]=[{type:0,data:Rre(r.e.r+1)}],u[3]=[{type:0,data:Rre(p)}],u[4]=[{type:0,data:Rre(r.e.r+1)}],e.messages[0].data=jre(u);var m=Mre(Are(n));t.content=m,t.size=t.content.length}(),A.data=jre(O),N[3][0].data=jre(_),g[4][0].data=jre(N),d.messages[0].data=jre(g);var M=Mre(Are(h));return p.content=M,p.size=p.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){Cte=1024,e&&!e.SSF&&(e.SSF=N8(E6)),e&&e.SSF&&(s8(),i8(e.SSF),t.revssf=f8(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,mne?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=Ite.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};Ure(t=t||{});var s=_8(),o="",a=0;if(t.cellXfs=[],bne(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),j8(s,o="docProps/core.xml",uee(e.Props,t)),i.coreprops.push(o),iee(t.rels,2,o,tee.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;for(e.Props.Worksheets=e.Props.SheetNames.length,j8(s,o,hee(e.Props)),i.extprops.push(o),iee(t.rels,3,o,tee.EXT_PROPS),e.Custprops!==e.Props&&d8(e.Custprops||{}).length>0&&(j8(s,o="docProps/custom.xml",fee(e.Custprops)),i.custprops.push(o),iee(t.rels,4,o,tee.CUST_PROPS)),a=1;a<=e.SheetNames.length;++a){var u={"!id":{}},d=e.Sheets[e.SheetNames[a-1]];if((d||{})["!type"],j8(s,o="xl/worksheets/sheet"+a+"."+n,Gne(a-1,o,t,e,u)),i.sheets.push(o),iee(t.wbrels,-1,"worksheets/sheet"+a+"."+n,tee.WS[0]),d){var p=d["!comments"],h=!1,f="";p&&p.length>0&&(j8(s,f="xl/comments"+a+"."+n,Kne(p,f)),i.comments.push(f),iee(u,-1,"../comments"+a+"."+n,tee.CMNT),h=!0),d["!legacy"]&&h&&j8(s,"xl/drawings/vmlDrawing"+a+".vml",Ete(a,d["!comments"])),delete d["!comments"],delete d["!legacy"]}u["!id"].rId1&&j8(s,nee(o),ree(u))}return null!=t.Strings&&t.Strings.length>0&&(j8(s,o="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?Jee:Gee)(e,n)}(t.Strings,o,t)),i.strs.push(o),iee(t.wbrels,-1,"sharedStrings."+n,tee.SST)),j8(s,o="xl/workbook."+n,function(e,t){return(".bin"===t.slice(-4)?qne:$ne)(e)}(e,o)),i.workbooks.push(o),iee(t.rels,1,o,tee.WB),j8(s,o="xl/theme/theme1.xml",xte(e.Themes,t)),i.themes.push(o),iee(t.wbrels,-1,"theme/theme1.xml",tee.THEME),j8(s,o="xl/styles."+n,function(e,t,n){return(".bin"===t.slice(-4)?bte:ote)(e,n)}(e,o,t)),i.styles.push(o),iee(t.wbrels,-1,"styles."+n,tee.STY),e.vbaraw&&r&&(j8(s,o="xl/vbaProject.bin",e.vbaraw),i.vba.push(o),iee(t.wbrels,-1,"vbaProject.bin",tee.VBA)),j8(s,o="xl/metadata."+n,(".bin"===o.slice(-4)?wte:Ste)()),i.metadata.push(o),iee(t.wbrels,-1,"metadata."+n,tee.XLMETA),j8(s,"[Content_Types].xml",eee(i,t)),j8(s,"_rels/.rels",ree(t.rels)),j8(s,"xl/_rels/workbook."+n+".rels",ree(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):function(e,t){Cte=1024,e&&!e.SSF&&(e.SSF=N8(E6)),e&&e.SSF&&(s8(),i8(e.SSF),t.revssf=f8(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,mne?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=Ite.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};Ure(t=t||{});var s=_8(),o="",a=0;if(t.cellXfs=[],bne(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),j8(s,o="docProps/core.xml",uee(e.Props,t)),i.coreprops.push(o),iee(t.rels,2,o,tee.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,j8(s,o,hee(e.Props)),i.extprops.push(o),iee(t.rels,3,o,tee.EXT_PROPS),e.Custprops!==e.Props&&d8(e.Custprops||{}).length>0&&(j8(s,o="docProps/custom.xml",fee(e.Custprops)),i.custprops.push(o),iee(t.rels,4,o,tee.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,a=1;a<=e.SheetNames.length;++a){var d={"!id":{}},p=e.Sheets[e.SheetNames[a-1]];if((p||{})["!type"],j8(s,o="xl/worksheets/sheet"+a+"."+n,Ene(a-1,t,e,d)),i.sheets.push(o),iee(t.wbrels,-1,"worksheets/sheet"+a+"."+n,tee.WS[0]),p){var h=p["!comments"],f=!1,m="";if(h&&h.length>0){var v=!1;h.forEach(function(e){e[1].forEach(function(e){1==e.T&&(v=!0)})}),v&&(j8(s,m="xl/threadedComments/threadedComment"+a+"."+n,Nte(h,u,t)),i.threadedcomments.push(m),iee(d,-1,"../threadedComments/threadedComment"+a+"."+n,tee.TCMNT)),j8(s,m="xl/comments"+a+"."+n,Tte(h)),i.comments.push(m),iee(d,-1,"../comments"+a+"."+n,tee.CMNT),f=!0}p["!legacy"]&&f&&j8(s,"xl/drawings/vmlDrawing"+a+".vml",Ete(a,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&j8(s,nee(o),ree(d))}return null!=t.Strings&&t.Strings.length>0&&(j8(s,o="xl/sharedStrings."+n,Gee(t.Strings,t)),i.strs.push(o),iee(t.wbrels,-1,"sharedStrings."+n,tee.SST)),j8(s,o="xl/workbook."+n,$ne(e)),i.workbooks.push(o),iee(t.rels,1,o,tee.WB),j8(s,o="xl/theme/theme1.xml",xte(e.Themes,t)),i.themes.push(o),iee(t.wbrels,-1,"theme/theme1.xml",tee.THEME),j8(s,o="xl/styles."+n,ote(e,t)),i.styles.push(o),iee(t.wbrels,-1,"styles."+n,tee.STY),e.vbaraw&&r&&(j8(s,o="xl/vbaProject.bin",e.vbaraw),i.vba.push(o),iee(t.wbrels,-1,"vbaProject.bin",tee.VBA)),j8(s,o="xl/metadata."+n,Ste()),i.metadata.push(o),iee(t.wbrels,-1,"metadata."+n,tee.XLMETA),u.length>1&&(j8(s,o="xl/persons/person.xml",function(e){var t=[A8,Z8("personList",null,{xmlns:i7,"xmlns:x":p7[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,n){t.push(Z8("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(u)),i.people.push(o),iee(t.wbrels,-1,"persons/person.xml",tee.PEOPLE)),j8(s,"[Content_Types].xml",eee(i,t)),j8(s,"_rels/.rels",ree(t.rels)),j8(s,"xl/_rels/workbook."+n+".rels",ree(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t)}function $re(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return u8(t.file,l8.write(e,{type:s6?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return l8.write(e,t)}function Hre(e,t){var n=N8(t||{});return function(e,t){var n={},r=s6?"nodebuffer":"undefined"!=typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?l8.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!=typeof Deno&&"string"==typeof i){if("binary"==t.type||"base64"==t.type)return i;i=new Uint8Array(u6(i))}return t.password&&"undefined"!=typeof encrypt_agile?$re(encrypt_agile(i,t.password),t):"file"===t.type?u8(t.file,i):"string"==t.type?V8(i):i}(Wre(e,n),n)}function Vre(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return r6(q8(r));case"binary":return q8(r);case"string":return e;case"file":return u8(t.file,r,"utf8");case"buffer":return s6?o6(r,"utf8"):"undefined"!=typeof TextEncoder?(new TextEncoder).encode(r):Vre(r,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function qre(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?r6(n):"string"==t.type?V8(n):n;case"file":return u8(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Gre(e,t){Q5(),Wne(e);var n=N8(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=Gre(e,n);return n.type="array",u6(r)}var i=0;if(n.sheet&&(i="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return Vre(ere(e,n),n);case"slk":case"sylk":return Vre(Uee.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"htm":case"html":return Vre(gre(e.Sheets[e.SheetNames[i]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return r6(e);case"binary":case"string":return e;case"file":return u8(t.file,e,"binary");case"buffer":return s6?o6(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(Xre(e.Sheets[e.SheetNames[i]],n),n);case"csv":return Vre(Qre(e.Sheets[e.SheetNames[i]],n),n,"\ufeff");case"dif":return Vre(Wee.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"dbf":return qre(Bee.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"prn":return Vre(Hee.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"rtf":return Vre(Zee.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"eth":return Vre($ee.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"fods":return Vre(Cre(e,n),n);case"wk1":return qre(Vee.sheet_to_wk1(e.Sheets[e.SheetNames[i]],n),n);case"wk3":return qre(Vee.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),qre(mre(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return $re(ire(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Hre(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function Kre(e,t,n,r,i,s,o,a){var l=a9(n),c=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),d=!0,p=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:n,enumerable:!1})}catch(gie){p.__rowNum__=n}else p.__rowNum__=n;if(!o||e[n])for(var h=t.s.c;h<=t.e.c;++h){var f=o?e[n][h]:e[r[h]+l];if(void 0!==f&&void 0!==f.t){var m=f.v;switch(f.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+f.t)}if(null!=s[h]){if(null==m)if("e"==f.t&&null===m)p[s[h]]=null;else if(void 0!==c)p[s[h]]=c;else{if(!u||null!==m)continue;p[s[h]]=null}else p[s[h]]=u&&("n"!==f.t||"n"===f.t&&!1!==a.rawNumbers)?m:v9(f,m,a);null!=m&&(d=!1)}}else{if(void 0===c)continue;null!=s[h]&&(p[s[h]]=c)}}return{row:p,isempty:d}}function Jre(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,i=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof u){case"string":l=f9(u);break;case"number":(l=f9(e["!ref"])).s.r=u;break;default:l=u}r>0&&(i=0);var d=a9(l.s.r),p=[],h=[],f=0,m=0,v=Array.isArray(e),g=l.s.r,y=0,b={};v&&!e[g]&&(e[g]=[]);var x=c.skipHidden&&e["!cols"]||[],w=c.skipHidden&&e["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(x[y]||{}).hidden)switch(p[y]=c9(y),n=v?e[g][y]:e[p[y]+d],r){case 1:s[y]=y-l.s.c;break;case 2:s[y]=p[y];break;case 3:s[y]=c.header[y-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),a=o=v9(n,null,c),m=b[o]||0){do{a=o+"_"+m++}while(b[a]);b[o]=m,b[a]=1}else b[o]=1;s[y]=a}for(g=l.s.r+i;g<=l.e.r;++g)if(!(w[g]||{}).hidden){var S=Kre(e,l,g,p,r,s,v,c);(!1===S.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(h[f++]=S.row)}return h.length=f,h}var Yre=/"/g;function Zre(e,t,n,r,i,s,o,a){for(var l=!0,c=[],u="",d=a9(n),p=t.s.c;p<=t.e.c;++p)if(r[p]){var h=a.dense?(e[n]||[])[p]:e[r[p]+d];if(null==h)u="";else if(null!=h.v){l=!1,u=""+(a.rawNumbers&&"n"==h.t?h.v:v9(h,null,a));for(var f=0,m=0;f!==u.length;++f)if((m=u.charCodeAt(f))===i||m===s||34===m||a.forceQuotes){u='"'+u.replace(Yre,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==h.f||h.F?u="":(l=!1,(u="="+h.f).indexOf(",")>=0&&(u='"'+u.replace(Yre,'""')+'"'));c.push(u)}return!1===a.blankrows&&l?null:c.join(o)}function Qre(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var i=f9(e["!ref"]),s=void 0!==r.FS?r.FS:",",o=s.charCodeAt(0),a=void 0!==r.RS?r.RS:"\n",l=a.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),u="",d=[];r.dense=Array.isArray(e);for(var p=r.skipHidden&&e["!cols"]||[],h=r.skipHidden&&e["!rows"]||[],f=i.s.c;f<=i.e.c;++f)(p[f]||{}).hidden||(d[f]=c9(f));for(var m=0,v=i.s.r;v<=i.e.r;++v)(h[v]||{}).hidden||null!=(u=Zre(e,i,v,d,o,l,s,r))&&(r.strip&&(u=u.replace(c,"")),(u||!1!==r.blankrows)&&n.push((m++?a:"")+u));return delete r.dense,n.join("")}function Xre(e,t){return t||(t={}),t.FS="\t",t.RS="\n",Qre(e,t)}function eie(e,t,n){var r,i=n||{},s=+!i.skipHeader,o=e||{},a=0,l=0;if(o&&null!=i.origin)if("number"==typeof i.origin)a=i.origin;else{var c="string"==typeof i.origin?u9(i.origin):i.origin;a=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:a+t.length-1+s}};if(o["!ref"]){var d=f9(o["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),-1==a&&(a=d.e.r+1,u.e.r=a+t.length-1+s)}else-1==a&&(a=0,u.e.r=t.length-1+s);var p=i.header||[],h=0;t.forEach(function(e,t){d8(e).forEach(function(n){-1==(h=p.indexOf(n))&&(p[h=p.length]=n);var c=e[n],u="z",d="",f=d9({c:l+h,r:a+t+s});r=tie(o,f),!c||"object"!=typeof c||c instanceof Date?("number"==typeof c?u="n":"boolean"==typeof c?u="b":"string"==typeof c?u="s":c instanceof Date?(u="d",i.cellDates||(u="n",c=v8(c)),d=i.dateNF||E6[14]):null===c&&i.nullError&&(u="e",c=0),r?(r.t=u,r.v=c,delete r.w,delete r.R,d&&(r.z=d)):o[f]=r={t:u,v:c},d&&(r.z=d)):o[f]=c})}),u.e.c=Math.max(u.e.c,l+p.length-1);var f=a9(a);if(s)for(h=0;h<p.length;++h)o[c9(h+l)+f]={t:"s",v:p[h]};return o["!ref"]=h9(u),o}function tie(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=u9(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return tie(e,d9("number"!=typeof t?t:{r:t,c:n||0}))}function nie(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var rie={encode_col:c9,encode_row:a9,encode_cell:d9,encode_range:h9,decode_col:l9,decode_row:o9,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:u9,decode_range:p9,format_cell:v9,sheet_add_aoa:y9,sheet_add_json:eie,sheet_add_dom:yre,aoa_to_sheet:b9,json_to_sheet:function(e,t){return eie(null,e,t)},table_to_sheet:bre,table_to_book:function(e,t){return g9(bre(e,t),t)},sheet_to_csv:Qre,sheet_to_txt:Xre,sheet_to_json:Jre,sheet_to_html:gre,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var i,s=f9(e["!ref"]),o="",a=[],l=[],c=Array.isArray(e);for(i=s.s.c;i<=s.e.c;++i)a[i]=c9(i);for(var u=s.s.r;u<=s.e.r;++u)for(o=a9(u),i=s.s.c;i<=s.e.c;++i)if(n=a[i]+o,r="",void 0!==(t=c?(e[u]||[])[i]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:Jre,sheet_get_cell:tie,book_new:function(){return{SheetNames:[],Sheets:{}}},book_append_sheet:function(e,t,n,r){var i=1;if(!n)for(;i<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+i);++i,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||n;for(++i;i<=65535&&-1!=e.SheetNames.indexOf(n=o+i);++i);}if(Une(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n},book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:nie,cell_set_internal_link:function(e,t,n){return nie(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var i="string"!=typeof t?t:f9(t),s="string"==typeof t?t:h9(t),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var l=tie(e,o,a);l.t="n",l.F=s,delete l.v,o==i.s.r&&a==i.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const iie=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,isLoading:t}=Km(),{toast:n}=nv();Ff();const r=Wf(),[i,s]=Pt.useState(null),[o,a]=Pt.useState([]),[l,c]=Pt.useState([]),[u,d]=Pt.useState(!0),[p,h]=Pt.useState(null),[v,g]=Pt.useState(""),[y,b]=Pt.useState(!1),[x,w]=Pt.useState(!1),[S,C]=Pt.useState(!1),[E,N]=Pt.useState(!1),[P,R]=Pt.useState(null),[I,k]=Pt.useState(null),[j,_]=Pt.useState(null),[A,O]=Pt.useState(!1),[D,M]=Pt.useState({username:"",password:"",display_name:"",role:"employee",department:"",description:""}),[L,z]=Pt.useState({id:"",username:"",display_name:"",role:"employee",department:"",description:""});Pt.useEffect(()=>{t||e||r("/chat")},[e,t,r]);const F=()=>T(this,null,function*(){try{d(!0),h(null);const e=yield Fm.get("/users");if(!e.success||!e.data)throw console.error(" :",e),new Error("");a(e.data),c(e.data)}catch(e){console.error(" :",e),h(e instanceof Error?e:new Error("Unknown error"))}finally{d(!1)}});if(Pt.useEffect(()=>{F()},[e]),Pt.useEffect(()=>{if(!v.trim())return void c(o);const e=o.filter(e=>{const t=v.toLowerCase();if(t.includes("*")){const n=t.replace(/\*/g,".*"),r=new RegExp(n,"i");return r.test(e.username)||r.test(e.display_name)||r.test(e.role)||e.department&&r.test(e.department)||e.description&&r.test(e.description)}return e.username.toLowerCase().includes(t)||e.display_name.toLowerCase().includes(t)||e.role.toLowerCase().includes(t)||e.department&&e.department.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)});c(e)},[v,o]),Pt.useEffect(()=>{if(p){console.error(":",p);let e="";p instanceof Error&&(e=p.message),n({title:"",description:e,variant:"destructive"})}},[p,n]),p instanceof Error)return Lt.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-5xl mx-auto w-full",children:[Lt.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Lt.jsxs("div",{children:[Lt.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[Lt.jsx(Iy,{className:"mr-2 h-6 w-6"}),""]}),Lt.jsx("p",{className:"text-neutral-300",children:""})]}),Lt.jsx(Nm,{to:"/settings",children:Lt.jsxs(Rg,{variant:"outline",size:"sm",children:[Lt.jsx(Og,{className:"mr-2 h-4 w-4"}),""]})})]}),Lt.jsx(gL,{children:Lt.jsx(wL,{className:"p-6",children:Lt.jsxs("div",{className:"text-center",children:[Lt.jsx(qg,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),Lt.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),Lt.jsx("p",{className:"text-gray-600 mb-4",children:p.message}),Lt.jsxs("div",{className:"space-x-2",children:[Lt.jsxs(Rg,{onClick:()=>window.location.reload(),children:[Lt.jsx(Cy,{className:"mr-2 h-4 w-4"}),""]}),Lt.jsx(Nm,{to:"/chat",children:Lt.jsx(Rg,{variant:"outline",children:""})})]})]})})})]});const B=()=>T(this,null,function*(){try{if(!D.username||!D.password||!D.display_name)return void n({title:"",description:"",variant:"destructive"});const e=yield Fm.post("/users",D);console.log(" :",e),n({title:"",description:""}),b(!1),M({username:"",password:"",display_name:"",role:"employee",department:"",description:""}),window.location.reload()}catch(e){console.error(" :",e),n({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}}),U=e=>{const{name:t,value:n}=e.target;M(e=>m(f({},e),{[t]:n}))},W=e=>{const{name:t,value:n}=e.target;z(e=>m(f({},e),{[t]:n}))},$=()=>T(this,null,function*(){try{if(!P)return;const e=yield Fm.delete(`/users/${P}`);console.log(" :",e),n({title:"",description:""}),C(!1),R(null),yield F()}catch(e){console.error(" :",e),n({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}}),H=()=>T(this,null,function*(){try{if(!L.id||!L.username||!L.display_name)return void n({title:"",description:"",variant:"destructive"});const e=yield Fm.put(`/users/${L.id}`,L);console.log(" :",e),n({title:"",description:""}),w(!1),z({id:"",username:"",display_name:"",role:"employee",department:"",password:"",description:""}),yield F()}catch(e){if(console.error(" :",e),e instanceof Error&&"AUTHENTICATION_ERROR"===e.message)return n({title:"",description:"",variant:"destructive"}),void r("/login");n({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}});return!e||e&&"admin"!==e.role?Lt.jsx("div",{children:"Loading..."}):Lt.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-5xl mx-auto w-full",children:[Lt.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Lt.jsxs("div",{children:[Lt.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[Lt.jsx(Iy,{className:"mr-2 h-6 w-6"}),""]}),Lt.jsx("p",{className:"text-neutral-300",children:""})]}),Lt.jsxs("div",{className:"flex space-x-2",children:[Lt.jsx(Nm,{to:"/settings",children:Lt.jsxs(Rg,{variant:"outline",size:"sm",children:[Lt.jsx(Og,{className:"mr-2 h-4 w-4"}),""]})}),Lt.jsx(Uz,{open:E,onOpenChange:N,children:Lt.jsx(Wz,{asChild:!0,children:Lt.jsxs(Rg,{variant:"outline",children:[Lt.jsx(Fy,{className:"mr-2 h-4 w-4"}),""]})})}),Lt.jsxs(Uz,{open:y,onOpenChange:b,children:[Lt.jsx(Wz,{asChild:!0,children:Lt.jsxs(Rg,{children:[Lt.jsx(By,{className:"mr-2 h-4 w-4"}),""]})}),Lt.jsxs(Vz,{children:[Lt.jsxs(qz,{children:[Lt.jsx(Kz,{children:""}),Lt.jsx(Jz,{children:""})]}),Lt.jsxs("form",{onSubmit:B,children:[Lt.jsxs("div",{className:"grid gap-4 py-4",children:[Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"username",children:""}),Lt.jsx(ML,{id:"username",name:"username",value:D.username,onChange:U,required:!0})]}),Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"password",children:""}),Lt.jsx(ML,{id:"password",name:"password",type:"password",value:D.password,onChange:U,required:!0}),Lt.jsx("p",{className:"text-sm text-gray-500",children:"81"})]}),Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"display_name",children:""}),Lt.jsx(ML,{id:"display_name",name:"display_name",value:D.display_name,onChange:U,required:!0})]}),Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"department",children:""}),Lt.jsx(ML,{id:"department",name:"department",value:D.department||"",onChange:U})]}),Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"description",children:""}),Lt.jsx(ML,{id:"description",name:"description",value:D.description||"",onChange:U,placeholder:""})]}),Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"role",children:""}),Lt.jsxs(XH,{value:D.role,onValueChange:e=>((e,t)=>{M(n=>m(f({},n),{[e]:t}))})("role",e),children:[Lt.jsx(tV,{children:Lt.jsx(eV,{placeholder:""})}),Lt.jsxs(iV,{children:[Lt.jsx(sV,{value:"employee",children:""}),Lt.jsx(sV,{value:"admin",children:""})]})]})]})]}),Lt.jsxs(Gz,{children:[Lt.jsx(Rg,{type:"button",variant:"outline",onClick:()=>b(!1),children:""}),Lt.jsx(Rg,{type:"submit",children:""})]})]})]})]})]})]}),Lt.jsxs(gL,{children:[Lt.jsx(yL,{className:"pb-2",children:Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsxs(bL,{className:"text-lg flex items-center",children:[Lt.jsx(Uy,{className:"mr-2 h-5 w-5"}),""]}),Lt.jsxs("div",{className:"flex items-center space-x-2",children:[Lt.jsxs("div",{className:"relative",children:[Lt.jsx(Ty,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),Lt.jsx(ML,{type:"text",placeholder:"*",value:v,onChange:e=>g(e.target.value),className:"pl-10 w-64"})]}),v&&Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:()=>g(""),children:""})]})]})}),Lt.jsx(wL,{children:u?Lt.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[Lt.jsx(Cy,{className:"h-8 w-8 animate-spin text-blue-500 mb-4"}),Lt.jsx("p",{className:"text-gray-600",children:"..."})]}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsxs(jV,{children:[Lt.jsx(_V,{children:Lt.jsxs(OV,{children:[Lt.jsx(DV,{children:""}),Lt.jsx(DV,{children:""}),Lt.jsx(DV,{children:""}),Lt.jsx(DV,{children:""}),Lt.jsx(DV,{children:""}),Lt.jsx(DV,{className:"text-right",children:""})]})}),Lt.jsx(AV,{children:l&&l.length>0?l.map(e=>Lt.jsxs(OV,{children:[Lt.jsx(MV,{children:e.username}),Lt.jsx(MV,{children:e.display_name}),Lt.jsx(MV,{children:Lt.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("admin"===e.role?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"),children:"admin"===e.role?"":""})}),Lt.jsx(MV,{children:e.department||"-"}),Lt.jsx(MV,{children:e.description||"-"}),Lt.jsx(MV,{className:"text-right",children:Lt.jsxs("div",{className:"flex justify-end gap-2",children:[Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:()=>(e=>{z({id:e.id,username:e.username,display_name:e.display_name,role:e.role,department:e.department||"",description:e.description||""}),w(!0)})(e),children:Lt.jsx(_y,{className:"h-4 w-4"})}),Lt.jsx(Rg,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,R(t),void C(!0);var t},className:"text-red-500 hover:text-red-700",children:Lt.jsx(My,{className:"h-4 w-4"})})]})})]},e.id)):Lt.jsx(OV,{children:Lt.jsx(MV,{colSpan:6,className:"text-center",children:v?"":""})})})]}),v&&Lt.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[": ",l.length," / ",o.length,""]})]})})]}),Lt.jsx(Uz,{open:x,onOpenChange:w,children:Lt.jsxs(Vz,{children:[Lt.jsxs(qz,{children:[Lt.jsx(Kz,{children:""}),Lt.jsx(Jz,{children:""})]}),Lt.jsxs("form",{onSubmit:H,children:[Lt.jsxs("div",{className:"grid gap-4 py-4",children:[Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"edit-username",children:""}),Lt.jsx(ML,{id:"edit-username",name:"username",value:L.username,onChange:W,required:!0})]}),Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"edit-display_name",children:""}),Lt.jsx(ML,{id:"edit-display_name",name:"display_name",value:L.display_name,onChange:W,required:!0})]}),Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"edit-password",children:""}),Lt.jsx(ML,{id:"edit-password",name:"password",type:"password",value:L.password||"",onChange:W,placeholder:""}),Lt.jsx("p",{className:"text-sm text-gray-500 mt-1",children:""})]}),Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"edit-department",children:""}),Lt.jsx(ML,{id:"edit-department",name:"department",value:L.department||"",onChange:W})]}),Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"edit-description",children:""}),Lt.jsx(ML,{id:"edit-description",name:"description",value:L.description||"",onChange:W,placeholder:""})]}),Lt.jsxs("div",{className:"grid gap-2",children:[Lt.jsx(PL,{htmlFor:"edit-role",children:""}),Lt.jsxs(XH,{value:L.role,onValueChange:e=>((e,t)=>{z(n=>m(f({},n),{[e]:t}))})("role",e),children:[Lt.jsx(tV,{children:Lt.jsx(eV,{placeholder:""})}),Lt.jsxs(iV,{children:[Lt.jsx(sV,{value:"employee",children:""}),Lt.jsx(sV,{value:"admin",children:""})]})]})]})]}),Lt.jsxs(Gz,{children:[Lt.jsx(Rg,{type:"button",variant:"outline",onClick:()=>w(!1),children:""}),Lt.jsx(Rg,{type:"submit",children:""})]})]})]})}),Lt.jsx(Uz,{open:S,onOpenChange:C,children:Lt.jsxs(Vz,{children:[Lt.jsxs(qz,{children:[Lt.jsxs(Kz,{className:"flex items-center",children:[Lt.jsx(qg,{className:"h-5 w-5 mr-2 text-red-500"}),""]}),Lt.jsx(Jz,{children:""})]}),Lt.jsxs("div",{className:"py-4 space-y-2",children:[Lt.jsx("p",{className:"text-center font-medium",children:""}),Lt.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 text-sm text-amber-800",children:Lt.jsxs("p",{className:"flex items-start",children:[Lt.jsx(qg,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),Lt.jsxs("span",{children:[Lt.jsx("strong",{children:":"})," "," "]})]})})]}),Lt.jsxs(Gz,{children:[Lt.jsx(Rg,{type:"button",variant:"outline",onClick:()=>C(!1),children:""}),Lt.jsx(Rg,{type:"button",variant:"destructive",onClick:$,children:""})]})]})}),Lt.jsx(Uz,{open:E,onOpenChange:N,children:Lt.jsxs(Vz,{className:"max-w-2xl",children:[Lt.jsxs(qz,{children:[Lt.jsxs(Kz,{className:"flex items-center",children:[Lt.jsx(Fy,{className:"mr-2 h-5 w-5"}),""]}),Lt.jsx(Jz,{children:""})]}),Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[Lt.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:""}),Lt.jsx("p",{className:"text-sm text-blue-700 mb-3",children:""}),Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:()=>{const e=rie.aoa_to_sheet([["username","password","display_name","role","department","description"],["user1","Password123!","1","employee","",""],["admin1","Admin123!","1","admin","",""]]),t=rie.book_new();rie.book_append_sheet(t,e,"Users"),function(e,t){var n={type:"file"};n.file=t,function(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}(n),Gre(e,n)}(t,"user_import_template.xlsx")},className:"text-blue-700 border-blue-300 hover:bg-blue-100",children:[Lt.jsx(ey,{className:"mr-2 h-4 w-4"}),""]})]}),Lt.jsx("form",{onSubmit:e=>T(this,null,function*(){if(e.preventDefault(),I){O(!0),_(null);try{const e=new FormData;e.append("file",I);const t=yield zm.get("/users/import-excel",{method:"POST",body:e});if(!t.success)throw new Error(t.error||"");_(t.results),n({title:"",description:`: ${t.results.success}, : ${t.results.failed}`}),(()=>{T(this,null,function*(){try{const e=yield Fm.get("/users");e.success&&e.data&&(a(e.data),c(e.data))}catch(e){console.error(":",e)}})})()}catch(t){console.error(":",t),n({title:"",description:t instanceof Error?t.message:"",variant:"destructive"})}finally{O(!1)}}else n({title:"",description:"",variant:"destructive"})}),children:Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"excel-file",children:""}),Lt.jsx(ML,{id:"excel-file",type:"file",accept:".xlsx,.xls",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(r){const e=[".xlsx",".xls"];if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(r.type)&&!e.some(e=>r.name.toLowerCase().endsWith(e)))return void n({title:"",description:".xlsx, .xls",variant:"destructive"});k(r)}},className:"mt-1"}),Lt.jsx("p",{className:"text-sm text-gray-500 mt-1",children:": .xlsx, .xls5MB"})]}),I&&Lt.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:Lt.jsxs("p",{className:"text-sm text-green-700",children:[": ",I.name," (",(I.size/1024/1024).toFixed(2),"MB)"]})}),j&&Lt.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4",children:[Lt.jsx("h4",{className:"font-medium mb-2",children:""}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("p",{className:"text-sm",children:[Lt.jsxs("span",{className:"text-green-600 font-medium",children:[": ",j.success,""]}),j.failed>0&&Lt.jsxs("span",{className:"text-red-600 font-medium ml-4",children:[": ",j.failed,""]})]}),j.errors&&j.errors.length>0&&Lt.jsxs("div",{children:[Lt.jsx("p",{className:"text-sm font-medium text-red-600 mb-2",children:":"}),Lt.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:j.errors.map((e,t)=>Lt.jsx("p",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:e},t))})]})]})]}),Lt.jsxs(Gz,{children:[Lt.jsx(Rg,{type:"button",variant:"outline",onClick:()=>{N(!1),k(null),_(null)},children:""}),Lt.jsx(Rg,{type:"submit",disabled:!I||A,children:A?"...":""})]})]})})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));function sie(){const[e,t]=Pt.useState(null),[n,r]=Pt.useState([]),[i,s]=Pt.useState(!1);Pt.useEffect(()=>{o()},[]);const o=()=>T(this,null,function*(){try{const e=yield fetch("/api/config/rag");if(e.ok){const n=yield e.json();t(n.config)}}catch(e){console.error("RAG:",e)}}),a=(e,t)=>{if(!e||0===e.length)return 0;const n=t.toLowerCase().split(" ");let r=0;return e.forEach(e=>{var t;const i=(null==(t=e.content)?void 0:t.toLowerCase().split(" "))||[],s=n.filter(e=>i.some(t=>t.includes(e))).length;r+=s/n.length}),Math.min(r/e.length,1)},l=(e,t)=>{if(!e||0===e.length)return 0;const n=e.reduce((e,t)=>e+(t.score||0),0)/e.length;return Math.min(n,1)},c=0===n.length?null:{responseTime:n.reduce((e,t)=>e+t.responseTime,0)/n.length,accuracy:n.reduce((e,t)=>e+t.accuracy,0)/n.length,relevanceScore:n.reduce((e,t)=>e+t.relevanceScore,0)/n.length,userSatisfaction:n.reduce((e,t)=>e+t.userSatisfaction,0)/n.length};return Lt.jsxs("div",{className:"space-y-6",children:[Lt.jsxs(gL,{children:[Lt.jsx(yL,{children:Lt.jsxs(bL,{className:"flex items-center gap-2",children:[Lt.jsx(Ry,{className:"h-5 w-5"}),"RAG"]})}),Lt.jsx(wL,{children:e?Lt.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx("label",{className:"text-sm font-medium",children:""}),Lt.jsxs(VW,{variant:"outline",children:[e.chunkSize,""]})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx("label",{className:"text-sm font-medium",children:""}),Lt.jsxs(VW,{variant:"outline",children:[e.chunkOverlap,""]})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx("label",{className:"text-sm font-medium",children:""}),Lt.jsx(VW,{variant:"outline",children:e.similarityThreshold})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx("label",{className:"text-sm font-medium",children:""}),Lt.jsxs(VW,{variant:"outline",children:[e.maxResults,""]})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx("label",{className:"text-sm font-medium",children:""}),Lt.jsx(VW,{variant:e.enableSemantic?"default":"secondary",children:e.enableSemantic?"":""})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx("label",{className:"text-sm font-medium",children:""}),Lt.jsx(VW,{variant:e.enableKeyword?"default":"secondary",children:e.enableKeyword?"":""})]})]}):Lt.jsx("p",{className:"text-gray-500",children:"..."})})]}),Lt.jsxs(gL,{children:[Lt.jsx(yL,{children:Lt.jsxs(bL,{className:"flex items-center gap-2",children:[Lt.jsx(zg,{className:"h-5 w-5"}),"RAG"]})}),Lt.jsxs(wL,{className:"space-y-4",children:[Lt.jsx(Rg,{onClick:()=>T(this,null,function*(){s(!0);try{const t=["","","","",""],n=[];for(const r of t){const t=Date.now(),i=yield fetch("/api/knowledge-base/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:r,limit:(null==e?void 0:e.maxResults)||5})}),s=Date.now()-t;if(i.ok){const e=yield i.json(),t=a(e.results,r),o=l(e.results,r);n.push({responseTime:s,accuracy:t,relevanceScore:o,userSatisfaction:.3*Math.random()+.7,timestamp:(new Date).toISOString()})}}r(n)}catch(t){console.error(":",t)}finally{s(!1)}}),disabled:i,className:"w-full",children:i?"...":""}),c&&Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsx("h4",{className:"font-medium",children:""}),Lt.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Lt.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Lt.jsx("div",{className:"flex items-center justify-center mb-2",children:Lt.jsx(Ly,{className:"h-4 w-4 text-green-500"})}),Lt.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[c.responseTime.toFixed(0),"ms"]}),Lt.jsx("div",{className:"text-sm text-gray-600",children:""})]}),Lt.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Lt.jsx("div",{className:"flex items-center justify-center mb-2",children:Lt.jsx(Gg,{className:"h-4 w-4 text-blue-500"})}),Lt.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(100*c.accuracy).toFixed(1),"%"]}),Lt.jsx("div",{className:"text-sm text-gray-600",children:""})]}),Lt.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Lt.jsx("div",{className:"flex items-center justify-center mb-2",children:Lt.jsx(Ly,{className:"h-4 w-4 text-purple-500"})}),Lt.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[(100*c.relevanceScore).toFixed(1),"%"]}),Lt.jsx("div",{className:"text-sm text-gray-600",children:""})]}),Lt.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Lt.jsx("div",{className:"flex items-center justify-center mb-2",children:Lt.jsx(Gg,{className:"h-4 w-4 text-orange-500"})}),Lt.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[(100*c.userSatisfaction).toFixed(1),"%"]}),Lt.jsx("div",{className:"text-sm text-gray-600",children:""})]})]})]}),n.length>0&&Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx("h4",{className:"font-medium",children:""}),Lt.jsx("div",{className:"space-y-2",children:n.map((e,t)=>Lt.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsxs(VW,{variant:"outline",children:[" ",t+1]}),Lt.jsx("span",{className:"text-sm text-gray-600",children:new Date(e.timestamp).toLocaleTimeString()})]}),Lt.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[Lt.jsxs("span",{children:[e.responseTime,"ms"]}),Lt.jsxs("span",{children:[(100*e.accuracy).toFixed(1),"%"]}),Lt.jsxs("span",{children:[(100*e.relevanceScore).toFixed(1),"%"]})]})]},t))})]})]})]}),Lt.jsxs(gL,{children:[Lt.jsx(yL,{children:Lt.jsxs(bL,{className:"flex items-center gap-2",children:[Lt.jsx(qg,{className:"h-5 w-5"}),""]})}),Lt.jsx(wL,{children:Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[Lt.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:""}),Lt.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[Lt.jsx("p",{children:" : 600"}),Lt.jsx("p",{children:" : 0.3"}),Lt.jsx("p",{children:" : 10"}),Lt.jsx("p",{children:" : "})]})]}),Lt.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[Lt.jsx("h4",{className:"font-medium text-green-800 mb-2",children:""}),Lt.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[Lt.jsx("p",{children:" : 800"}),Lt.jsx("p",{children:" : 0.5"}),Lt.jsx("p",{children:" : 5"}),Lt.jsx("p",{children:" : "})]})]})]})})]})]})}const oie=["","","","","","","",""];function aie({faultClassifications:e,onAdd:t,onRemove:n,onUpdate:r}){return Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),Lt.jsxs(Rg,{onClick:t,type:"button",variant:"outline",size:"sm",className:"flex items-center gap-2",children:[Lt.jsx(wy,{className:"h-4 w-4"}),""]})]}),Lt.jsx("div",{className:"space-y-3",children:e.map((t,i)=>Lt.jsxs("div",{className:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg border",children:[Lt.jsxs("div",{className:"flex-1",children:[Lt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Lt.jsxs("select",{value:t.type,onChange:e=>r(i,"type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Lt.jsx("option",{value:"",children:""}),oie.map(e=>Lt.jsx("option",{value:e,children:e},e))]})]}),Lt.jsxs("div",{className:"flex-1",children:[Lt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Lt.jsx("input",{type:"text",value:t.custom,onChange:e=>r(i,"custom",e.target.value),placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.length>1&&Lt.jsx(Rg,{onClick:()=>n(i),type:"button",variant:"destructive",size:"sm",className:"mt-7",children:Lt.jsx(Ky,{className:"h-4 w-4"})})]},i))})]})}const lie=["","","","","","",""];function cie({faultFactors:e,onAdd:t,onRemove:n,onUpdate:r}){return Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),Lt.jsxs(Rg,{onClick:t,type:"button",variant:"outline",size:"sm",className:"flex items-center gap-2",children:[Lt.jsx(wy,{className:"h-4 w-4"}),""]})]}),Lt.jsx("div",{className:"space-y-3",children:e.map((t,i)=>Lt.jsxs("div",{className:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg border",children:[Lt.jsxs("div",{className:"flex-1",children:[Lt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Lt.jsxs("select",{value:t.type,onChange:e=>r(i,"type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Lt.jsx("option",{value:"",children:""}),lie.map(e=>Lt.jsx("option",{value:e,children:e},e))]})]}),Lt.jsxs("div",{className:"flex-2",children:[Lt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Lt.jsx("input",{type:"text",value:t.content,onChange:e=>r(i,"content",e.target.value),placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.length>1&&Lt.jsx(Rg,{onClick:()=>n(i),type:"button",variant:"destructive",size:"sm",className:"mt-7",children:Lt.jsx(Ky,{className:"h-4 w-4"})})]},i))})]})}function uie(){const[e,t]=Pt.useState({occurrenceEvent:"",vehicleNumber:"",equipmentCategory:"",phenomenonMemo:"",inspectionProcedure:"",emergencyMeasures:"",permanentCountermeasures:"",remarks:"",recorder:"",faultClassifications:[{type:"",custom:""}],faultFactors:[{type:"",content:""}]}),[n,r]=Pt.useState({}),[i,s]=Pt.useState(""),o=(e,i)=>{t(t=>m(f({},t),{[e]:i})),n[e]&&r(t=>m(f({},t),{[e]:""}))},a=e=>T(this,null,function*(){try{const t=yield fetch("/api/maintenance/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("");const n=yield t.json();console.log(":",n)}catch(t){throw console.error(":",t),t}}),l=e=>{var n,r,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y,b,x,w,S;t({occurrenceEvent:(null==(n=e.occurrence)?void 0:n.event)||"",vehicleNumber:(null==(i=null==(r=e.occurrence)?void 0:r.vehicle)?void 0:i.type)||"",equipmentCategory:(null==(a=null==(o=null==(s=e.occurrence)?void 0:s.vehicle)?void 0:o.equipment)?void 0:a.category)||"",phenomenonMemo:(null==(l=e.fault)?void 0:l.phenomenon)||"",inspectionProcedure:(null==(d=null==(u=null==(c=e.response)?void 0:c.inspection)?void 0:u.procedure)?void 0:d.join("\n"))||"",emergencyMeasures:(null==(f=null==(h=null==(p=e.response)?void 0:p.measures)?void 0:h.emergency)?void 0:f.join("\n"))||"",permanentCountermeasures:(null==(v=null==(m=e.response)?void 0:m.measures)?void 0:v.permanent)||"",remarks:(null==(g=e.notes)?void 0:g.remarks)||"",recorder:(null==(y=e.notes)?void 0:y.recorder)||"",faultClassifications:(null==(x=null==(b=e.fault)?void 0:b.classifications)?void 0:x.length)>0?e.fault.classifications:[{type:"",custom:""}],faultFactors:(null==(S=null==(w=e.fault)?void 0:w.factors)?void 0:S.length)>0?e.fault.factors:[{type:"",content:""}]})},c=()=>{t({occurrenceEvent:"",vehicleNumber:"",equipmentCategory:"",phenomenonMemo:"",inspectionProcedure:"",emergencyMeasures:"",permanentCountermeasures:"",remarks:"",recorder:"",faultClassifications:[{type:"",custom:""}],faultFactors:[{type:"",content:""}]}),r({})};return Lt.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:Lt.jsxs(gL,{children:[Lt.jsx(yL,{children:Lt.jsx(bL,{className:"text-2xl font-bold text-center text-gray-900",children:""})}),Lt.jsxs(wL,{children:[i&&Lt.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[Lt.jsx(Gg,{className:"h-5 w-5 text-green-600"}),Lt.jsx("span",{className:"text-green-800",children:i})]}),Lt.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[Lt.jsx(PL,{htmlFor:"loadFile",className:"text-sm font-medium text-gray-700",children:""}),Lt.jsxs("div",{className:"mt-2 flex gap-3 items-center",children:[Lt.jsx("input",{type:"file",id:"loadFile",accept:".json",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(!n)return;if(!n.name.endsWith(".json"))return void alert("JSON");const r=new FileReader;r.onload=e=>{var t;try{const n=JSON.parse(null==(t=e.target)?void 0:t.result);l(n),s(""),setTimeout(()=>s(""),3e3)}catch(n){console.error("JSON:",n),alert("JSON")}},r.readAsText(n)},className:"flex-1 text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Lt.jsxs(Rg,{type:"button",variant:"outline",size:"sm",children:[Lt.jsx(Fy,{className:"h-4 w-4 mr-2"}),""]})]}),Lt.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"JSON"})]}),Lt.jsxs("form",{onSubmit:t=>T(this,null,function*(){if(t.preventDefault(),(()=>{const t={};return e.occurrenceEvent.trim()||(t.occurrenceEvent=""),e.vehicleNumber.trim()||(t.vehicleNumber=""),e.equipmentCategory.trim()||(t.equipmentCategory=""),e.phenomenonMemo.trim()||(t.phenomenonMemo=""),e.recorder.trim()||(t.recorder=""),r(t),0===Object.keys(t).length})())try{const t=e.faultClassifications.filter(e=>e.type||e.custom),n=e.faultFactors.filter(e=>e.type||e.content),r={metadata:{recordId:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:(new Date).toISOString(),version:"1.0"},occurrence:{event:e.occurrenceEvent,recordedAt:(new Date).toISOString(),vehicle:{type:e.vehicleNumber,equipment:{category:e.equipmentCategory}}},fault:{classifications:t,phenomenon:e.phenomenonMemo,factors:n},response:{inspection:{procedure:e.inspectionProcedure?e.inspectionProcedure.split("\n").filter(e=>e.trim()):[]},measures:{emergency:e.emergencyMeasures?e.emergencyMeasures.split("\n").filter(e=>e.trim()):[],permanent:e.permanentCountermeasures}},notes:{remarks:e.remarks,recorder:e.recorder}};yield a(r),s(""),setTimeout(()=>{s("")},3e3),setTimeout(()=>{confirm("")&&c()},1e3)}catch(n){console.error(":",n),alert("")}}),className:"space-y-6",children:[Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Lt.jsxs("div",{children:[Lt.jsxs(PL,{htmlFor:"occurrenceEvent",children:[" ",Lt.jsx("span",{className:"text-red-500",children:"*"})]}),Lt.jsx(ML,{id:"occurrenceEvent",value:e.occurrenceEvent,onChange:e=>o("occurrenceEvent",e.target.value),placeholder:": ",className:n.occurrenceEvent?"border-red-500":""}),n.occurrenceEvent&&Lt.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.occurrenceEvent})]}),Lt.jsxs("div",{children:[Lt.jsxs(PL,{htmlFor:"vehicleNumber",children:[" ",Lt.jsx("span",{className:"text-red-500",children:"*"})]}),Lt.jsx(ML,{id:"vehicleNumber",value:e.vehicleNumber,onChange:e=>o("vehicleNumber",e.target.value),placeholder:": ",className:n.vehicleNumber?"border-red-500":""}),n.vehicleNumber&&Lt.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.vehicleNumber})]})]}),Lt.jsxs("div",{children:[Lt.jsxs(PL,{htmlFor:"equipmentCategory",children:[" ",Lt.jsx("span",{className:"text-red-500",children:"*"})]}),Lt.jsx(ML,{id:"equipmentCategory",value:e.equipmentCategory,onChange:e=>o("equipmentCategory",e.target.value),placeholder:": ",className:n.equipmentCategory?"border-red-500":""}),n.equipmentCategory&&Lt.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.equipmentCategory})]}),Lt.jsx(aie,{faultClassifications:e.faultClassifications,onAdd:()=>{t(e=>m(f({},e),{faultClassifications:[...e.faultClassifications,{type:"",custom:""}]}))},onRemove:n=>{e.faultClassifications.length>1&&t(e=>m(f({},e),{faultClassifications:e.faultClassifications.filter((e,t)=>t!==n)}))},onUpdate:(e,n,r)=>{t(t=>m(f({},t),{faultClassifications:t.faultClassifications.map((t,i)=>i===e?m(f({},t),{[n]:r}):t)}))}}),Lt.jsxs("div",{children:[Lt.jsxs(PL,{htmlFor:"phenomenonMemo",children:[" ",Lt.jsx("span",{className:"text-red-500",children:"*"})]}),Lt.jsx(Fz,{id:"phenomenonMemo",value:e.phenomenonMemo,onChange:e=>o("phenomenonMemo",e.target.value),placeholder:"",rows:4,className:n.phenomenonMemo?"border-red-500":""}),n.phenomenonMemo&&Lt.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.phenomenonMemo})]}),Lt.jsx(cie,{faultFactors:e.faultFactors,onAdd:()=>{t(e=>m(f({},e),{faultFactors:[...e.faultFactors,{type:"",content:""}]}))},onRemove:n=>{e.faultFactors.length>1&&t(e=>m(f({},e),{faultFactors:e.faultFactors.filter((e,t)=>t!==n)}))},onUpdate:(e,n,r)=>{t(t=>m(f({},t),{faultFactors:t.faultFactors.map((t,i)=>i===e?m(f({},t),{[n]:r}):t)}))}}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"inspectionProcedure",children:""}),Lt.jsx(Fz,{id:"inspectionProcedure",value:e.inspectionProcedure,onChange:e=>o("inspectionProcedure",e.target.value),placeholder:"",rows:4})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"emergencyMeasures",children:""}),Lt.jsx(Fz,{id:"emergencyMeasures",value:e.emergencyMeasures,onChange:e=>o("emergencyMeasures",e.target.value),placeholder:"",rows:4})]})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"permanentCountermeasures",children:""}),Lt.jsx(Fz,{id:"permanentCountermeasures",value:e.permanentCountermeasures,onChange:e=>o("permanentCountermeasures",e.target.value),placeholder:"",rows:3})]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"remarks",children:""}),Lt.jsx(Fz,{id:"remarks",value:e.remarks,onChange:e=>o("remarks",e.target.value),placeholder:"",rows:3})]}),Lt.jsxs("div",{children:[Lt.jsxs(PL,{htmlFor:"recorder",children:[" ",Lt.jsx("span",{className:"text-red-500",children:"*"})]}),Lt.jsx(ML,{id:"recorder",value:e.recorder,onChange:e=>o("recorder",e.target.value),placeholder:"",className:n.recorder?"border-red-500":""}),n.recorder&&Lt.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.recorder})]})]}),Lt.jsx("div",{className:"flex justify-center pt-6 border-t",children:Lt.jsxs(Rg,{type:"submit",size:"lg",className:"flex items-center gap-2",children:[Lt.jsx(Ey,{className:"h-5 w-5"}),""]})})]})]})]})})}const die=({files:e,value:t,onChange:n,label:r})=>{const[i,s]=Pt.useState(!1),o=Pt.useRef(null),a=e=>{if(!e)return"";try{const t=new Date(e),n=t.getFullYear(),r=(t.getMonth()+1).toString().padStart(2,"0");return`${n}/${r}/${t.getDate().toString().padStart(2,"0")}`}catch(gie){return""}},l=e.find(e=>e.fileName===t),c=l?`${l.fileName}${l.exportTimestamp?` (${a(l.exportTimestamp)})`:""}`:"...";return Pt.useEffect(()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&s(!1)};return i&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i]),Lt.jsxs("div",{className:"w-full",children:[r&&Lt.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:r}),Lt.jsxs("div",{className:"relative",ref:o,children:[Lt.jsxs("button",{type:"button",onClick:()=>s(!i),className:"w-full flex items-center justify-between px-3 py-2 text-left bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[Lt.jsx("span",{className:"truncate "+(t?"text-gray-900":"text-gray-500"),children:c}),Lt.jsx(Wg,{className:"h-4 w-4 text-gray-400 transition-transform "+(i?"transform rotate-180":"")})]}),i&&Lt.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:e&&e.length>0?Lt.jsx("ul",{className:"py-1",children:e.map(e=>{const r=a(e.exportTimestamp),i=e.fileName===t;return Lt.jsx("li",{children:Lt.jsxs("button",{type:"button",onClick:()=>{return t=e.fileName,n(t),void s(!1);var t},className:"w-full text-left px-3 py-2 flex items-center gap-2 hover:bg-red-50 hover:text-red-700 "+(i?"bg-red-100 text-red-700":"text-gray-900"),children:[Lt.jsx(ry,{className:"h-4 w-4 flex-shrink-0"}),Lt.jsxs("div",{className:"flex-1 min-w-0",children:[Lt.jsx("div",{className:"text-sm font-medium truncate",children:e.fileName}),r&&Lt.jsx("div",{className:"text-xs text-gray-500",children:r})]})]})},e.fileName)})}):Lt.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:""})})]})]})};function pie(){const[e,t]=Pt.useState({totalFiles:0,totalSize:0,duplicates:0,lastMaintenance:null,exportFiles:0,documentFiles:0,archivedFiles:0}),[n,r]=Pt.useState(!1),i=()=>T(this,null,function*(){var e,n;try{const r=yield fetch("/api/knowledge-base/stats");if(r.ok){const i=yield r.json();if(i.success&&i.data){const r=i.data;return void t({totalFiles:r.total||0,totalSize:r.totalSize||0,duplicates:0,lastMaintenance:r.lastMaintenance,exportFiles:(null==(e=r.typeStats)?void 0:e.json)||0,documentFiles:(null==(n=r.typeStats)?void 0:n.document)||0,archivedFiles:r.oldData||0})}}const i=yield fetch("/api/admin/dashboard");if(i.ok){const e=yield i.json();t(e.storageStats||{totalFiles:0,totalSize:0,duplicates:0,lastMaintenance:null,exportFiles:0,documentFiles:0,archivedFiles:0})}}catch(r){t({totalFiles:0,totalSize:0,duplicates:0,lastMaintenance:null,exportFiles:0,documentFiles:0,archivedFiles:0})}});return Pt.useEffect(()=>{i()},[]),Lt.jsxs("div",{className:"space-y-6",children:[Lt.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Lt.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg border border-blue-200",children:[Lt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Lt.jsx(ry,{className:"h-5 w-5 text-blue-600"}),Lt.jsx("span",{className:"text-sm font-medium text-blue-800",children:""})]}),Lt.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.totalFiles}),Lt.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[": ",e.exportFiles||0," | : ",e.documentFiles||0]})]}),Lt.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-lg border border-green-200",children:[Lt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Lt.jsx(Xg,{className:"h-5 w-5 text-green-600"}),Lt.jsx("span",{className:"text-sm font-medium text-green-800",children:""})]}),Lt.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[(e.totalSize/1024/1024).toFixed(1),"MB"]}),Lt.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[": ",e.archivedFiles||0," "]})]}),Lt.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-lg border border-yellow-200",children:[Lt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Lt.jsx(zy,{className:"h-5 w-5 text-yellow-600"}),Lt.jsx("span",{className:"text-sm font-medium text-yellow-800",children:""})]}),Lt.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:e.duplicates}),Lt.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:e.duplicates>0?"":""})]}),Lt.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg border border-purple-200",children:[Lt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Lt.jsx(Gg,{className:"h-5 w-5 text-purple-600"}),Lt.jsx("span",{className:"text-sm font-medium text-purple-800",children:""})]}),Lt.jsx("p",{className:"text-lg font-bold text-purple-600",children:e.lastMaintenance?new Date(e.lastMaintenance).toLocaleDateString("ja-JP"):""}),Lt.jsx("p",{className:"text-xs text-purple-600 mt-1",children:": 2026/1/1"})]})]}),Lt.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:[Lt.jsxs("h4",{className:"font-medium text-blue-800 mb-3 flex items-center gap-2",children:[Lt.jsx(Ry,{className:"h-4 w-4"}),""]}),Lt.jsx("div",{className:"grid grid-cols-1 gap-4",children:Lt.jsxs("div",{className:"space-y-3",children:[Lt.jsx(PL,{className:"text-base font-semibold text-gray-900 mb-2",children:""}),Lt.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Lt.jsxs(Rg,{variant:"default",size:"default",onClick:()=>T(this,null,function*(){r(!0);try{(yield fetch("/api/knowledge/maintenance/run",{method:"POST"})).ok&&(yield i())}catch(e){}finally{r(!1)}}),disabled:n,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium shadow-md hover:shadow-lg transition-all",children:[Lt.jsx(Cy,{className:"h-4 w-4 "+(n?"animate-spin":"")}),""]}),Lt.jsxs(Rg,{variant:"default",size:"default",onClick:()=>T(this,null,function*(){r(!0);try{(yield fetch("/api/knowledge/deduplication/resolve",{method:"POST"})).ok&&(yield i())}catch(e){}finally{r(!1)}}),disabled:n,className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white font-medium shadow-md hover:shadow-lg transition-all",children:[Lt.jsx(Dy,{className:"h-4 w-4"}),""]}),Lt.jsxs(Rg,{variant:"default",size:"default",onClick:i,disabled:n,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white font-medium shadow-md hover:shadow-lg transition-all",children:[Lt.jsx(Ag,{className:"h-4 w-4"}),""]}),Lt.jsxs(Rg,{variant:"default",size:"default",onClick:()=>T(this,null,function*(){if(confirm("\nknowledge-base/archives ZIP")){r(!0);try{const e=yield fetch("/api/knowledge-base/archive",{method:"POST"}),t=document.getElementById("cleanup-results");if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}{const n=yield e.json();t&&(t.innerHTML=`\n            <div class="text-green-600">\n              <strong> :</strong><br>\n               ${n.data.name}<br>\n               : ${(n.data.size/1024/1024).toFixed(2)}MB<br>\n               : knowledge-base/archives/<br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `),yield i()}}catch(e){const t=document.getElementById("cleanup-results");t&&(t.innerHTML=`\n          <div class="text-red-600">\n            <strong> :</strong> ${e.message}<br>\n            <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{r(!1)}}}),disabled:n,className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 text-white font-medium shadow-md hover:shadow-lg transition-all",children:[Lt.jsx(Xg,{className:"h-4 w-4 "+(n?"animate-pulse":"")}),""]})]}),Lt.jsxs("div",{className:"mt-2 text-sm text-gray-600 leading-relaxed",children:[Lt.jsxs("div",{className:"space-y-1",children:[Lt.jsxs("p",{className:"whitespace-nowrap",children:[" ",Lt.jsx("strong",{children:""}),": 3"]}),Lt.jsxs("p",{className:"whitespace-nowrap",children:[" ",Lt.jsx("strong",{children:""}),": "]}),Lt.jsxs("p",{className:"whitespace-nowrap",children:[" ",Lt.jsx("strong",{children:""}),": "]}),Lt.jsxs("p",{className:"whitespace-nowrap",children:[" ",Lt.jsx("strong",{children:""}),": knowledge-base/archivesZIP"]})]}),Lt.jsxs("div",{className:"mt-2 text-blue-600 whitespace-nowrap",children:[Lt.jsx("strong",{children:" :"})," 12"]})]})]})})]}),Lt.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-lg",children:[Lt.jsxs("h4",{className:"font-medium text-amber-800 mb-3 flex items-center gap-2",children:[Lt.jsx(zy,{className:"h-4 w-4"}),""]}),Lt.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Lt.jsxs("div",{className:"space-y-3",children:[Lt.jsx(PL,{className:"text-base font-semibold text-gray-900 mb-2",children:""}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs(Rg,{variant:"outline",size:"default",onClick:()=>T(this,null,function*(){r(!0);try{const t=yield fetch("/api/knowledge-base/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"all",destination:"local"})});if(!t.ok){const e=yield t.json();throw new Error(e.error||"")}const n=yield t.blob(),r=document.getElementById("cleanup-results");if("showSaveFilePicker"in window)try{const e=`knowledge-export-${(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5)}.zip`,t=yield window.showSaveFilePicker({suggestedName:e,types:[{description:"ZIP files",accept:{"application/zip":[".zip"]}}]}),i=yield t.createWritable();yield i.write(n),yield i.close(),r&&(r.innerHTML=`\n              <div class="text-green-600">\n                <strong> :</strong> ${e}<br>\n                <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n              </div>\n            `)}catch(e){if("AbortError"!==e.name)throw e;r&&(r.innerHTML=`\n              <div class="text-gray-600">\n                <strong></strong><br>\n                <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n              </div>\n            `)}else{const e=window.URL.createObjectURL(n),t=document.createElement("a");t.href=e,t.download=`knowledge-export-${(new Date).toISOString().replace(/[:.]/g,"-")}.zip`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(e),r&&(r.innerHTML=`\n            <div class="text-green-600">\n              <strong> :</strong> <br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `)}}catch(t){const e=document.getElementById("cleanup-results");e&&(e.innerHTML=`\n          <div class="text-red-600">\n            <strong> :</strong> ${t.message}<br>\n            <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{r(!1)}}),disabled:n,className:"w-full flex items-center gap-2 text-sm text-green-700 border-green-300 hover:bg-green-50",children:[Lt.jsx(Cy,{className:"h-4 w-4 "+(n?"animate-spin":"")}),""]}),Lt.jsxs(Rg,{variant:"outline",size:"default",onClick:()=>T(this,null,function*(){r(!0);try{const e=yield fetch("/api/knowledge-base/archives"),t=yield e.json(),n=document.getElementById("cleanup-results");if(n)if(t.success&&t.data.length>0){const e=t.data.map(e=>` ${e.name} (${(e.size/1024/1024).toFixed(2)}MB) - ${new Date(e.createdAt).toLocaleString("ja-JP")}`).join("<br>");n.innerHTML=`\n            <div class="text-blue-600">\n              <strong>  (${t.total}):</strong><br>\n              ${e}<br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `}else n.innerHTML=`\n            <div class="text-gray-600">\n              <strong> :</strong> <br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `}catch(e){const t=document.getElementById("cleanup-results");t&&(t.innerHTML=`\n          <div class="text-red-600">\n            <strong> :</strong> ${e.message}<br>\n            <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{r(!1)}}),disabled:n,className:"w-full flex items-center gap-2 text-sm text-blue-700 border-blue-300 hover:bg-blue-50",children:[Lt.jsx(Xg,{className:"h-4 w-4"}),""]})]})]}),Lt.jsxs("div",{className:"space-y-3",children:[Lt.jsx(PL,{className:"text-base font-semibold text-gray-900 mb-2",children:""}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs(Rg,{variant:"outline",size:"default",onClick:()=>T(this,null,function*(){if(confirm("1\nknowledge-base/archivesZIP")){r(!0);try{const e=yield fetch("/api/knowledge-base/cleanup/auto",{method:"POST"});if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}{yield e.json();const t=document.getElementById("cleanup-results");t&&(t.innerHTML=`\n            <div class="text-green-600">\n              <strong> :</strong> 1<br>\n               : knowledge-base/archives/<br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `),yield i()}}catch(e){const t=document.getElementById("cleanup-results");t&&(t.innerHTML=`\n          <div class="text-red-600">\n            <strong> :</strong> ${e.message}<br>\n            <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{r(!1)}}}),disabled:n,className:"w-full flex items-center gap-2 text-sm text-orange-700 border-orange-300 hover:bg-orange-50",children:[Lt.jsx(Cy,{className:"h-4 w-4 "+(n?"animate-spin":"")}),"1"]}),Lt.jsxs(Rg,{variant:"outline",size:"default",onClick:()=>T(this,null,function*(){if("DELETE ALL"===prompt("\nDELETE ALL:")){r(!0);try{const e=yield fetch("/api/knowledge-base/cleanup/manual",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deleteAll:!0})});if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}{const t=yield e.json(),n=document.getElementById("cleanup-results");n&&(n.innerHTML=`\n            <div class="text-green-600">\n              <strong>:</strong> ${t.deletedCount}<br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `),yield i()}}catch(e){const t=document.getElementById("cleanup-results");t&&(t.innerHTML=`\n          <div class="text-red-600">\n            <strong>:</strong> ${e.message}<br>\n            <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{r(!1)}}}),disabled:n,className:"w-full flex items-center gap-2 text-sm text-gray-700 border-gray-300 hover:bg-gray-50",children:[Lt.jsx(Xg,{className:"h-4 w-4"}),""]})]})]})]}),Lt.jsxs("div",{className:"mt-4",children:[Lt.jsx(PL,{className:"text-base font-semibold text-gray-900 mb-2 block",children:""}),Lt.jsx("div",{className:"p-4 bg-white rounded border border-gray-300 text-sm",children:Lt.jsx("div",{id:"cleanup-results",className:"text-gray-600",children:""})})]})]})]}),Lt.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-lg",children:[Lt.jsxs("h5",{className:"font-medium text-amber-800 mb-2 flex items-center gap-2",children:[Lt.jsx(zy,{className:"h-4 w-4"}),""]}),Lt.jsxs("div",{className:"text-sm text-amber-700 space-y-1",children:[Lt.jsxs("p",{children:[" ",Lt.jsx("strong",{children:":"})," 21"]}),Lt.jsxs("p",{children:[" ",Lt.jsx("strong",{children:":"})," "]}),Lt.jsxs("p",{children:[" ",Lt.jsx("strong",{children:":"})," "]}),Lt.jsxs("p",{children:[" ",Lt.jsx("strong",{children:":"})," "]})]})]}),Lt.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:[Lt.jsxs("h5",{className:"font-medium text-blue-800 mb-2 flex items-center gap-2",children:[Lt.jsx(Gg,{className:"h-4 w-4"}),""]}),Lt.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[Lt.jsxs("p",{children:[" ",Lt.jsx("strong",{children:":"})," 21"]}),Lt.jsxs("p",{children:[" ",Lt.jsx("strong",{children:":"})," "]}),Lt.jsxs("p",{children:[" ",Lt.jsx("strong",{children:":"})," "]}),Lt.jsxs("p",{children:[" ",Lt.jsx("strong",{children:":"})," GPT"]}),Lt.jsxs("p",{children:[" ",Lt.jsx("strong",{children:":"})," 30"]})]})]})]})}const hie=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=Pt.useState(null),[n,r]=Pt.useState([]),[i,s]=Pt.useState(!1),[o,a]=Pt.useState(!1),[l,c]=Pt.useState([]),[u,d]=Pt.useState(null),[p,h]=Pt.useState(!1),[v,g]=Pt.useState({status:"idle"}),[y,b]=Pt.useState({chunkSize:1e3,chunkOverlap:200,similarityThreshold:.7,maxResults:5,enableSemantic:!0,enableKeyword:!0,customPrompt:"",preprocessing:{removeStopWords:!0,normalizeCasing:!0,removeSpecialChars:!1}}),[x,w]=Pt.useState({initialPrompt:"",conversationStyle:"frank",questionFlow:{step1:"",step2:"",step3:"",step4:"",step5:""},branchingConditions:{timeCheck:!0,detailsCheck:!0,toolsCheck:!0,safetyCheck:!0},responsePattern:"step_by_step",escalationTime:20,customInstructions:"",enableEmergencyContact:!0}),S=Wf(),C=e=>{switch(e){case"pending":return Lt.jsx(VW,{variant:"secondary",children:""});case"processing":return Lt.jsx(VW,{variant:"default",children:""});case"success":return Lt.jsx(VW,{variant:"default",className:"bg-green-500",children:""});case"error":return Lt.jsx(VW,{variant:"destructive",children:""});default:return Lt.jsx(VW,{variant:"secondary",children:""})}},E=()=>T(this,null,function*(){try{const e=yield fetch("/api/settings/rag",{credentials:"include"});if(e.ok){const t=yield e.json(),n=t.success?t.data:t;b(e=>m(f(f({},e),n),{preprocessing:f({removeStopWords:!0,normalizeCasing:!0,removeSpecialChars:!1},n.preprocessing)}))}}catch(e){}}),N=()=>T(this,null,function*(){try{const e=yield fetch("/api/ai-assist/settings",{credentials:"include"});if(e.ok){const t=yield e.json(),n=t.success?t.data:t;n&&(w(e=>m(f(f({},e),n),{questionFlow:f(f({},e.questionFlow),n.questionFlow),branchingConditions:f(f({},e.branchingConditions),n.branchingConditions)})),localStorage.setItem("aiAssistSettings",JSON.stringify(n)))}else{const e=localStorage.getItem("aiAssistSettings");e&&w(JSON.parse(e))}}catch(e){console.warn("AI:",e);try{const e=localStorage.getItem("aiAssistSettings");e&&w(JSON.parse(e))}catch(t){}}}),P=()=>T(this,null,function*(){try{console.log(" ");const e=yield fetch("/api/history/export-files",{credentials:"include"});if(console.log(" API:",{ok:e.ok,status:e.status,statusText:e.statusText,contentType:e.headers.get("content-type")}),!e.ok){const t=yield e.text();return console.error(" :",{status:e.status,statusText:e.statusText,body:t,url:"/api/history/export-files"}),404===e.status&&console.warn(" API"),void c([])}const t=yield e.json();if(console.log(" API:",t),console.log(" :",Array.isArray(t)?t.length:"not array",""),!Array.isArray(t))return console.error(" :",typeof t,t),void c([]);const n=t.map(e=>(console.log(" :",e),{fileName:e.fileName,title:e.title||"",createdAt:e.createdAt||e.exportTimestamp||(new Date).toISOString(),exportTimestamp:e.exportTimestamp||e.createdAt||null}));console.log(" :",n),console.log(" :",n.map(e=>e.fileName)),c(n)}catch(e){console.error(" :",e),e instanceof Error&&console.error(":",e.message,e.stack),c([])}});return Pt.useEffect(()=>{E(),N(),P()},[]),Lt.jsxs("div",{className:"container mx-auto p-6",children:[Lt.jsxs("div",{className:"mb-8",children:[Lt.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[Lt.jsx(Xg,{className:"inline mr-2"}),""]}),Lt.jsx("p",{className:"text-gray-600",children:"AI"})]}),Lt.jsxs(KF,{defaultValue:"import",className:"w-full",children:[Lt.jsxs(JF,{className:"grid w-full grid-cols-3",children:[Lt.jsxs(YF,{value:"import",className:"flex items-center gap-2",children:[Lt.jsx(Fy,{className:"h-4 w-4"}),""]}),Lt.jsxs(YF,{value:"manual",className:"flex items-center gap-2",children:[Lt.jsx(_y,{className:"h-4 w-4"}),""]}),Lt.jsxs(YF,{value:"settings",className:"flex items-center gap-2",children:[Lt.jsx(Ry,{className:"h-4 w-4"}),"AI"]})]}),Lt.jsx(ZF,{value:"import",className:"space-y-6",children:Lt.jsxs("div",{className:"p-6 bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl shadow-sm",children:[Lt.jsxs(gL,{className:"border-indigo-300 shadow-md",children:[Lt.jsx(yL,{className:"bg-gradient-to-r from-indigo-100 to-purple-100 border-b border-indigo-200",children:Lt.jsxs(bL,{className:"flex items-center gap-2 text-indigo-800",children:[Lt.jsx(oy,{className:"h-5 w-5 text-indigo-600"}),""]})}),Lt.jsxs(wL,{className:"space-y-4",children:[Lt.jsxs("div",{children:[Lt.jsx("div",{className:"mt-2",children:0===l.length?Lt.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[Lt.jsx("p",{className:"text-sm text-yellow-800",children:"knowledge-base/exportsJSON"}),Lt.jsxs(Rg,{variant:"outline",size:"sm",onClick:P,className:"mt-2",children:[Lt.jsx(Cy,{className:"h-3 w-3 mr-1"}),""]})]}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(die,{files:l.map(e=>({fileName:e.fileName,exportTimestamp:e.exportTimestamp||e.createdAt||null})),value:u,onChange:d}),Lt.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.length,""]})]})}),Lt.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JSONJSON"})]}),"idle"!==v.status&&Lt.jsx("div",{className:"p-3 rounded "+("success"===v.status?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:Lt.jsxs("div",{className:"flex items-center gap-2",children:["success"===v.status?Lt.jsx(Gg,{className:"h-4 w-4"}):Lt.jsx(zy,{className:"h-4 w-4"}),Lt.jsx("span",{className:"text-sm",children:v.message})]})}),Lt.jsx(Rg,{onClick:()=>T(this,null,function*(){if(u){h(!0),g({status:"idle"});try{const e=yield fetch("/api/history/import-export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:u}),credentials:"include"}),t=yield e.json();e.ok&&t.success?(g({status:"success",message:`: ${t.message} (: ${t.imageCount})`}),yield P()):g({status:"error",message:t.error||""})}catch(e){g({status:"error",message:""})}finally{h(!1)}}else alert("")}),disabled:!u||p,className:"w-full",children:p?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Cy,{className:"mr-2 h-4 w-4 animate-spin"}),"..."]}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Fy,{className:"mr-2 h-4 w-4"}),""]})}),Lt.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[Lt.jsx("p",{children:" JSON knowledge-base/documents "}),Lt.jsx("p",{children:" "}),Lt.jsx("p",{children:"  documents/images "})]})]})]}),Lt.jsxs(gL,{className:"border-indigo-300 shadow-md",children:[Lt.jsx(yL,{className:"bg-gradient-to-r from-indigo-100 to-purple-100 border-b border-indigo-200",children:Lt.jsxs(bL,{className:"flex items-center gap-2 text-indigo-800",children:[Lt.jsx(ry,{className:"h-5 w-5 text-indigo-600"}),""]})}),Lt.jsxs(wL,{className:"space-y-4",children:[Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"file-upload",children:" (TXT, PDF, XLSX, PPTX)"}),Lt.jsx(ML,{id:"file-upload",type:"file",multiple:!0,accept:".txt,.pdf,.xlsx,.pptx",onChange:e=>{const n=e.target.files;if(t(n),n){const e=Array.from(n).map(e=>({fileName:e.name,status:"pending"}));r(e)}},className:"mt-1"})]}),e&&Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx("h4",{className:"font-medium",children:":"}),Lt.jsx("div",{className:"space-y-2",children:n.map((e,t)=>Lt.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx(ry,{className:"h-4 w-4"}),Lt.jsx("span",{className:"text-sm",children:e.fileName})]}),Lt.jsxs("div",{className:"flex items-center gap-2",children:[C(e.status),e.message&&Lt.jsx("span",{className:"text-xs text-gray-500",children:e.message})]})]},t))})]}),Lt.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded border",children:[Lt.jsx(RV,{id:"save-original-file",checked:o,onCheckedChange:e=>a(!0===e)}),Lt.jsxs(PL,{htmlFor:"save-original-file",className:"text-sm font-normal cursor-pointer flex-1",children:["",Lt.jsx("span",{className:"text-xs text-gray-500 block mt-1",children:""})]})]}),Lt.jsx(Rg,{onClick:()=>T(this,null,function*(){if(e&&0!==e.length){s(!0);try{for(let n=0;n<e.length;n++){const i=e[n];r(e=>e.map((e,t)=>t===n?m(f({},e),{status:"processing"}):e));const s=new FormData;s.append("file",i),s.append("saveOriginalFile",o?"true":"false");try{const e=yield fetch("/api/files/import",{method:"POST",body:s,credentials:"include"});if(e.ok){const t=yield e.json();r(e=>e.map((e,r)=>r===n?m(f({},e),{status:"success",message:t.message||""}):e))}else{const t=yield e.json();r(e=>e.map((e,r)=>r===n?m(f({},e),{status:"error",message:t.message||""}):e))}}catch(t){r(e=>e.map((e,t)=>t===n?m(f({},e),{status:"error",message:""}):e))}}}finally{s(!1)}}else alert("")}),disabled:!e||i,className:"w-full",children:i?Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(zy,{className:"mr-2 h-4 w-4"}),"..."]}):Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(Fy,{className:"mr-2 h-4 w-4"}),""]})})]})]}),Lt.jsxs(gL,{children:[Lt.jsx(yL,{children:Lt.jsxs(bL,{className:"flex items-center gap-2",children:[Lt.jsx(zg,{className:"h-5 w-5 text-purple-600"}),""]})}),Lt.jsx(wL,{children:Lt.jsx(pie,{})})]})]})}),Lt.jsx(ZF,{value:"manual",className:"space-y-6",children:Lt.jsx("div",{className:"p-6 bg-gradient-to-br from-teal-50 to-cyan-50 border border-teal-200 rounded-xl shadow-sm",children:Lt.jsxs(gL,{className:"border-teal-300 shadow-md",children:[Lt.jsx(yL,{className:"bg-gradient-to-r from-teal-100 to-cyan-100 border-b border-teal-200",children:Lt.jsxs(bL,{className:"flex items-center gap-2 text-teal-800",children:[Lt.jsx(Gy,{className:"h-5 w-5 text-teal-600"}),""]})}),Lt.jsx(wL,{children:Lt.jsx(uie,{})})]})})}),Lt.jsx(ZF,{value:"settings",className:"space-y-6",children:Lt.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-xl shadow-sm space-y-6",children:[Lt.jsxs(gL,{className:"border-purple-300 shadow-md",children:[Lt.jsx(yL,{className:"bg-gradient-to-r from-purple-100 to-pink-100 border-b border-purple-200",children:Lt.jsxs(bL,{className:"flex items-center gap-2 text-purple-800",children:[Lt.jsx(Ry,{className:"h-5 w-5 text-purple-600"}),""]})}),Lt.jsx(wL,{className:"space-y-4",children:Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{children:""}),Lt.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded",children:[Lt.jsx(oy,{className:"h-4 w-4 text-gray-500"}),Lt.jsx("span",{className:"text-sm text-gray-700",children:"/knowledge-base/vehicle-maintenance"})]})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{children:""}),Lt.jsxs("div",{className:"flex gap-2",children:[Lt.jsx(VW,{variant:"outline",children:"TXT"}),Lt.jsx(VW,{variant:"outline",children:"PDF"}),Lt.jsx(VW,{variant:"outline",children:"XLSX"}),Lt.jsx(VW,{variant:"outline",children:"PPTX"})]})]})]})})]}),Lt.jsxs(gL,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-purple-100",children:[Lt.jsxs(yL,{className:"bg-gradient-to-r from-purple-100 to-purple-200 border-b border-purple-300",children:[Lt.jsxs(bL,{className:"flex items-center gap-2 text-purple-800",children:[Lt.jsx(gy,{className:"h-5 w-5 text-purple-700"}),"AI"]}),Lt.jsx("p",{className:"text-sm text-purple-700",children:"UIAI"})]}),Lt.jsxs(wL,{className:"space-y-6 bg-white",children:[Lt.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[Lt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-blue-800",children:[Lt.jsx(Mg,{className:"h-4 w-4 text-blue-600"}),""]}),Lt.jsx("div",{className:"space-y-3",children:Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{htmlFor:"initialPrompt",children:""}),Lt.jsx(Fz,{id:"initialPrompt",value:x.initialPrompt,onChange:e=>w(t=>m(f({},t),{initialPrompt:e.target.value})),placeholder:"AI...",rows:2}),Lt.jsx("p",{className:"text-xs text-gray-500",children:"AI"})]})})]}),Lt.jsxs("div",{className:"space-y-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[Lt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-green-800",children:[Lt.jsx(Wy,{className:"h-4 w-4 text-green-600"}),""]}),Lt.jsx("div",{className:"space-y-3",children:Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{children:""}),Lt.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[Lt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Lt.jsx("input",{type:"radio",name:"conversationStyle",value:"frank",checked:"frank"===x.conversationStyle,onChange:e=>w(t=>m(f({},t),{conversationStyle:e.target.value})),className:"rounded"}),Lt.jsxs("div",{className:"text-sm",children:[Lt.jsx("div",{className:"font-medium",children:""}),Lt.jsx("div",{className:"text-gray-500",children:""})]})]}),Lt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Lt.jsx("input",{type:"radio",name:"conversationStyle",value:"business",checked:"business"===x.conversationStyle,onChange:e=>w(t=>m(f({},t),{conversationStyle:e.target.value})),className:"rounded"}),Lt.jsxs("div",{className:"text-sm",children:[Lt.jsx("div",{className:"font-medium",children:""}),Lt.jsx("div",{className:"text-gray-500",children:""})]})]}),Lt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Lt.jsx("input",{type:"radio",name:"conversationStyle",value:"technical",checked:"technical"===x.conversationStyle,onChange:e=>w(t=>m(f({},t),{conversationStyle:e.target.value})),className:"rounded"}),Lt.jsxs("div",{className:"text-sm",children:[Lt.jsx("div",{className:"font-medium",children:""}),Lt.jsx("div",{className:"text-gray-500",children:""})]})]})]})]})})]}),Lt.jsxs("div",{className:"space-y-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Lt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-yellow-800",children:[Lt.jsx(dy,{className:"h-4 w-4 text-yellow-600"}),""]}),Lt.jsxs("div",{className:"space-y-3",children:[Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{htmlFor:"step1",children:"1"}),Lt.jsx(ML,{id:"step1",value:x.questionFlow.step1,onChange:e=>w(t=>m(f({},t),{questionFlow:m(f({},t.questionFlow),{step1:e.target.value})})),placeholder:"..."})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{htmlFor:"step2",children:"2"}),Lt.jsx(ML,{id:"step2",value:x.questionFlow.step2,onChange:e=>w(t=>m(f({},t),{questionFlow:m(f({},t.questionFlow),{step2:e.target.value})})),placeholder:"..."})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{htmlFor:"step3",children:"3"}),Lt.jsx(ML,{id:"step3",value:x.questionFlow.step3,onChange:e=>w(t=>m(f({},t),{questionFlow:m(f({},t.questionFlow),{step3:e.target.value})})),placeholder:"..."})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{htmlFor:"step4",children:"4"}),Lt.jsx(ML,{id:"step4",value:x.questionFlow.step4,onChange:e=>w(t=>m(f({},t),{questionFlow:m(f({},t.questionFlow),{step4:e.target.value})})),placeholder:"..."})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{htmlFor:"step5",children:"5"}),Lt.jsx(ML,{id:"step5",value:x.questionFlow.step5,onChange:e=>w(t=>m(f({},t),{questionFlow:m(f({},t.questionFlow),{step5:e.target.value})})),placeholder:"..."})]})]})]}),Lt.jsxs("div",{className:"space-y-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[Lt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-orange-800",children:[Lt.jsx(Dy,{className:"h-4 w-4 text-orange-600"}),""]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("label",{className:"flex items-center space-x-2",children:[Lt.jsx("input",{type:"checkbox",checked:x.branchingConditions.timeCheck,onChange:e=>w(t=>m(f({},t),{branchingConditions:m(f({},t.branchingConditions),{timeCheck:e.target.checked})})),className:"rounded"}),Lt.jsx("span",{className:"text-sm",children:""})]}),Lt.jsxs("label",{className:"flex items-center space-x-2",children:[Lt.jsx("input",{type:"checkbox",checked:x.branchingConditions.detailsCheck,onChange:e=>w(t=>m(f({},t),{branchingConditions:m(f({},t.branchingConditions),{detailsCheck:e.target.checked})})),className:"rounded"}),Lt.jsx("span",{className:"text-sm",children:""})]}),Lt.jsxs("label",{className:"flex items-center space-x-2",children:[Lt.jsx("input",{type:"checkbox",checked:x.branchingConditions.toolsCheck,onChange:e=>w(t=>m(f({},t),{branchingConditions:m(f({},t.branchingConditions),{toolsCheck:e.target.checked})})),className:"rounded"}),Lt.jsx("span",{className:"text-sm",children:""})]}),Lt.jsxs("label",{className:"flex items-center space-x-2",children:[Lt.jsx("input",{type:"checkbox",checked:x.branchingConditions.safetyCheck,onChange:e=>w(t=>m(f({},t),{branchingConditions:m(f({},t.branchingConditions),{safetyCheck:e.target.checked})})),className:"rounded"}),Lt.jsx("span",{className:"text-sm",children:""})]})]})]}),Lt.jsxs("div",{className:"space-y-4 p-4 bg-cyan-50 border border-cyan-200 rounded-lg",children:[Lt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-cyan-800",children:[Lt.jsx(Ag,{className:"h-4 w-4 text-cyan-600"}),""]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{children:""}),Lt.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[Lt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Lt.jsx("input",{type:"radio",name:"responsePattern",value:"step_by_step",checked:"step_by_step"===x.responsePattern,onChange:e=>w(t=>m(f({},t),{responsePattern:e.target.value})),className:"rounded"}),Lt.jsxs("div",{className:"text-sm",children:[Lt.jsx("div",{className:"font-medium",children:""}),Lt.jsx("div",{className:"text-gray-500",children:"11"})]})]}),Lt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Lt.jsx("input",{type:"radio",name:"responsePattern",value:"comprehensive",checked:"comprehensive"===x.responsePattern,onChange:e=>w(t=>m(f({},t),{responsePattern:e.target.value})),className:"rounded"}),Lt.jsxs("div",{className:"text-sm",children:[Lt.jsx("div",{className:"font-medium",children:""}),Lt.jsx("div",{className:"text-gray-500",children:""})]})]}),Lt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Lt.jsx("input",{type:"radio",name:"responsePattern",value:"minimal",checked:"minimal"===x.responsePattern,onChange:e=>w(t=>m(f({},t),{responsePattern:e.target.value})),className:"rounded"}),Lt.jsxs("div",{className:"text-sm",children:[Lt.jsx("div",{className:"font-medium",children:""}),Lt.jsx("div",{className:"text-gray-500",children:""})]})]})]})]})]}),Lt.jsxs("div",{className:"space-y-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[Lt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-red-800",children:[Lt.jsx(zy,{className:"h-4 w-4 text-red-600"}),""]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs(PL,{htmlFor:"escalationTime",children:[": ",x.escalationTime,""]}),Lt.jsx(T$,{id:"escalationTime",min:10,max:60,step:5,value:[x.escalationTime],onValueChange:e=>w(t=>m(f({},t),{escalationTime:e[0]})),className:"w-full"}),Lt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("label",{className:"flex items-center space-x-2",children:[Lt.jsx("input",{type:"checkbox",checked:x.enableEmergencyContact,onChange:e=>w(t=>m(f({},t),{enableEmergencyContact:e.target.checked})),className:"rounded"}),Lt.jsx("span",{className:"text-sm",children:""})]}),Lt.jsx("p",{className:"text-xs text-gray-500",children:""})]})]})]}),Lt.jsxs("div",{className:"space-y-2 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[Lt.jsx(PL,{htmlFor:"customInstructions",className:"text-gray-800 font-medium",children:""}),Lt.jsx(Fz,{id:"customInstructions",value:x.customInstructions,onChange:e=>w(t=>m(f({},t),{customInstructions:e.target.value})),placeholder:"GPT...",rows:3}),Lt.jsx("p",{className:"text-xs text-gray-500",children:"AI"})]}),Lt.jsxs("div",{className:"flex gap-2 pt-4 border-t border-purple-200 bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg",children:[Lt.jsxs(Rg,{onClick:()=>T(this,null,function*(){try{const e=yield fetch("/api/ai-assist/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x),credentials:"include"});if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}yield e.json(),localStorage.setItem("aiAssistSettings",JSON.stringify(x)),window.dispatchEvent(new Event("aiAssistSettingsChanged")),alert("AI")}catch(e){console.error("AI:",e),alert("AI: "+(e instanceof Error?e.message:"Unknown error"))}}),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white",children:[Lt.jsx(Ey,{className:"h-4 w-4"}),"AI"]}),Lt.jsxs(Rg,{variant:"outline",onClick:()=>S("/chat"),className:"flex items-center gap-2 border-purple-300 text-purple-700 hover:bg-purple-100",children:[Lt.jsx(gy,{className:"h-4 w-4"}),"AI"]})]})]})]}),Lt.jsxs(gL,{children:[Lt.jsxs(yL,{children:[Lt.jsxs(bL,{className:"flex items-center gap-2",children:[Lt.jsx(zg,{className:"h-5 w-5"}),"RAG (Retrieval-Augmented Generation) "]}),Lt.jsx("p",{className:"text-sm text-gray-600",children:"GPT"})]}),Lt.jsxs(wL,{className:"space-y-6",children:[Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[Lt.jsx(ny,{className:"h-4 w-4"}),""]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs(PL,{htmlFor:"chunkSize",children:[": ",y.chunkSize,""]}),Lt.jsx(T$,{id:"chunkSize",min:200,max:2e3,step:100,value:[y.chunkSize],onValueChange:e=>b(t=>m(f({},t),{chunkSize:e[0]})),className:"w-full"}),Lt.jsx("p",{className:"text-xs text-gray-500",children:"1"})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs(PL,{htmlFor:"chunkOverlap",children:[": ",y.chunkOverlap,""]}),Lt.jsx(T$,{id:"chunkOverlap",min:0,max:500,step:50,value:[y.chunkOverlap],onValueChange:e=>b(t=>m(f({},t),{chunkOverlap:e[0]})),className:"w-full"}),Lt.jsx("p",{className:"text-xs text-gray-500",children:""})]})]})]}),Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[Lt.jsx(ky,{className:"h-4 w-4"}),""]}),Lt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs(PL,{htmlFor:"similarityThreshold",children:[": ",y.similarityThreshold]}),Lt.jsx(T$,{id:"similarityThreshold",min:.1,max:1,step:.1,value:[y.similarityThreshold],onValueChange:e=>b(t=>m(f({},t),{similarityThreshold:e[0]})),className:"w-full"}),Lt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs(PL,{htmlFor:"maxResults",children:[": ",y.maxResults,""]}),Lt.jsx(T$,{id:"maxResults",min:1,max:20,step:1,value:[y.maxResults],onValueChange:e=>b(t=>m(f({},t),{maxResults:e[0]})),className:"w-full"}),Lt.jsx("p",{className:"text-xs text-gray-500",children:"1"})]})]})]}),Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[Lt.jsx(Jy,{className:"h-4 w-4"}),""]}),Lt.jsxs("div",{className:"flex gap-4",children:[Lt.jsxs("label",{className:"flex items-center space-x-2",children:[Lt.jsx("input",{type:"checkbox",checked:y.enableSemantic,onChange:e=>b(t=>m(f({},t),{enableSemantic:e.target.checked})),className:"rounded"}),Lt.jsx("span",{className:"text-sm",children:""})]}),Lt.jsxs("label",{className:"flex items-center space-x-2",children:[Lt.jsx("input",{type:"checkbox",checked:y.enableKeyword,onChange:e=>b(t=>m(f({},t),{enableKeyword:e.target.checked})),className:"rounded"}),Lt.jsx("span",{className:"text-sm",children:""})]})]})]}),Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsx("h4",{className:"font-medium",children:""}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsxs("label",{className:"flex items-center space-x-2",children:[Lt.jsx("input",{type:"checkbox",checked:y.preprocessing.removeStopWords,onChange:e=>b(t=>m(f({},t),{preprocessing:m(f({},t.preprocessing),{removeStopWords:e.target.checked})})),className:"rounded"}),Lt.jsx("span",{className:"text-sm",children:""})]}),Lt.jsxs("label",{className:"flex items-center space-x-2",children:[Lt.jsx("input",{type:"checkbox",checked:y.preprocessing.normalizeCasing,onChange:e=>b(t=>m(f({},t),{preprocessing:m(f({},t.preprocessing),{normalizeCasing:e.target.checked})})),className:"rounded"}),Lt.jsx("span",{className:"text-sm",children:""})]}),Lt.jsxs("label",{className:"flex items-center space-x-2",children:[Lt.jsx("input",{type:"checkbox",checked:y.preprocessing.removeSpecialChars,onChange:e=>b(t=>m(f({},t),{preprocessing:m(f({},t.preprocessing),{removeSpecialChars:e.target.checked})})),className:"rounded"}),Lt.jsx("span",{className:"text-sm",children:""})]})]})]}),Lt.jsxs("div",{className:"space-y-2",children:[Lt.jsx(PL,{htmlFor:"customPrompt",children:""}),Lt.jsx(Fz,{id:"customPrompt",value:y.customPrompt,onChange:e=>b(t=>m(f({},t),{customPrompt:e.target.value})),placeholder:"RAG...",rows:3}),Lt.jsx("p",{className:"text-xs text-gray-500",children:"GPT"})]}),Lt.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[Lt.jsxs(Rg,{onClick:()=>T(this,null,function*(){try{if(!(yield fetch("/api/settings/rag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y),credentials:"include"})).ok)throw new Error("");alert("RAG")}catch(e){alert("")}}),className:"flex items-center gap-2",children:[Lt.jsx(Ry,{className:"h-4 w-4"}),"RAG"]}),Lt.jsxs(Rg,{variant:"outline",onClick:()=>S("/chat"),className:"flex items-center gap-2",children:[Lt.jsx(Gg,{className:"h-4 w-4"}),""]})]})]})]}),Lt.jsx(sie,{})]})})]})]})}},Symbol.toStringTag,{value:"Module"})),fie=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,isLoading:t}=Km(),{toast:n}=nv(),r=Wf(),[i,s]=Pt.useState(!0),[o,a]=Pt.useState(null),[l,c]=Pt.useState([]),[u,d]=Pt.useState([]),[p,h]=Pt.useState([]),[m,v]=Pt.useState(""),[g,y]=Pt.useState("all"),[b,x]=Pt.useState(!1),[w,S]=Pt.useState(!1),[C,E]=Pt.useState(null),[N,P]=Pt.useState(null),[R,I]=Pt.useState(""),[k,j]=Pt.useState(""),[_,A]=Pt.useState("");Pt.useEffect(()=>{t||e||r("/chat")},[e,t,r]),Pt.useEffect(()=>{O()},[]),Pt.useEffect(()=>{let e=u;m.trim()&&(e=e.filter(e=>e.machine_number.toLowerCase().includes(m.toLowerCase())||e.machine_type_name&&e.machine_type_name.toLowerCase().includes(m.toLowerCase()))),"all"!==g&&(e=e.filter(e=>e.machine_type_id===g)),h(e)},[u,m,g]);const O=()=>T(this,null,function*(){try{s(!0),a(null);const{buildApiUrl:e}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),t=yield fetch(e("/machines/machine-types")),n=t.headers.get("content-type")||"";if(!t.ok||!n.includes("application/json")){const e=yield t.text();throw console.error("APIJSON:",t.status,n,e.slice(0,200)),new Error("APIJSON: "+t.status+" "+n)}const r=yield t.json();if(console.log("API:",r),r.success){const e=r.machineTypes||r.data||[];console.log(":",e);const t=e.map(e=>({id:e.id,machine_type_name:e.name||e.machine_type_name||e.category}));c(t)}const i=yield fetch(e("/machines")),o=i.headers.get("content-type")||"";if(!i.ok||!o.includes("application/json")){const e=yield i.text();throw console.error("APIJSON:",i.status,o,e.slice(0,200)),new Error("APIJSON: "+i.status+" "+o)}const l=yield i.json();if(console.log("API:",l),l.success){const e=l.machines||l.data||[];console.log(":",e);const t=e.map(e=>({id:e.id,machine_number:e.machine_number,machine_type_id:e.machine_type_id,machine_type_name:e.type||e.machine_type_name}));d(t)}}catch(e){console.error(":",e),a(e instanceof Error?e:new Error("Unknown error")),n({title:"",description:"",variant:"destructive"})}finally{s(!1)}}),D=(e,t)=>T(this,null,function*(){if(confirm(`${t}\n`))try{const r=localStorage.getItem("authToken"),i=f({},r&&{Authorization:`Bearer ${r}`}),{buildApiUrl:s}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0);if(!(yield fetch(s(`/machines/machine-types/${e}`),{method:"DELETE",headers:i})).ok)throw new Error("");n({title:"",description:`${t} `}),O()}catch(r){console.error(":",r),n({title:"",description:"",variant:"destructive"})}}),M=(e,t)=>T(this,null,function*(){if(confirm(`${t}`))try{const r=localStorage.getItem("authToken"),i=f({},r&&{Authorization:`Bearer ${r}`}),{buildApiUrl:s}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0);if(!(yield fetch(s(`/machines/${e}`),{method:"DELETE",headers:i})).ok)throw new Error("");n({title:"",description:`${t} `}),O()}catch(r){console.error(":",r),n({title:"",description:"",variant:"destructive"})}}),L=()=>{E(null),I(""),x(!1)},z=()=>{P(null),j(""),A(""),S(!1)};return t||i?Lt.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-7xl mx-auto w-full bg-gradient-to-br from-blue-50 to-indigo-50",children:Lt.jsx("div",{className:"flex justify-center items-center h-64",children:Lt.jsxs("div",{className:"text-center",children:[Lt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),Lt.jsx("p",{className:"text-blue-600",children:"..."})]})})}):Lt.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-7xl mx-auto w-full bg-gradient-to-br from-blue-50 to-indigo-50",children:[Lt.jsx("div",{className:"mb-6",children:Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsxs("div",{children:[Lt.jsxs("h1",{className:"text-2xl font-bold flex items-center bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:[Lt.jsx(Gy,{className:"mr-2 h-6 w-6 text-indigo-500"}),""]}),Lt.jsx("p",{className:"text-blue-400",children:""})]}),Lt.jsx(Nm,{to:"/settings",children:Lt.jsxs(Rg,{variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[Lt.jsx(Og,{className:"mr-2 h-4 w-4"}),""]})})]})}),o&&Lt.jsx(gL,{className:"mb-6 border-red-200 bg-red-50",children:Lt.jsx(wL,{className:"pt-6",children:Lt.jsxs("div",{className:"text-red-600",children:[Lt.jsx("p",{className:"font-medium",children:""}),Lt.jsx("p",{className:"text-sm",children:o.message})]})})}),Lt.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Lt.jsxs(gL,{className:"lg:col-span-1",children:[Lt.jsx(yL,{className:"pb-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:Lt.jsxs(bL,{className:"text-lg flex items-center justify-between",children:[Lt.jsxs("span",{className:"flex items-center",children:[Lt.jsx(Ry,{className:"mr-2 h-5 w-5"}),""]}),Lt.jsxs(Uz,{open:b,onOpenChange:x,children:[Lt.jsx(Wz,{asChild:!0,children:Lt.jsxs(Rg,{size:"sm",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",onClick:L,children:[Lt.jsx(wy,{className:"mr-1 h-3 w-3"}),""]})}),Lt.jsxs(Vz,{children:[Lt.jsxs(qz,{children:[Lt.jsx(Kz,{children:C?"":""}),Lt.jsx(Jz,{children:C?"":""})]}),Lt.jsx("div",{className:"space-y-4",children:Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"type-name",children:""}),Lt.jsx(ML,{id:"type-name",value:R,onChange:e=>I(e.target.value),placeholder:""})]})}),Lt.jsxs(Gz,{children:[Lt.jsx(Rg,{variant:"outline",onClick:L,children:""}),Lt.jsx(Rg,{onClick:()=>T(this,null,function*(){if(R.trim())try{const{buildApiUrl:e}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),t=e(C?`/machines/machine-types/${C.id}`:"/machines/machine-types"),r=C?"PUT":"POST",i=localStorage.getItem("authToken"),s=f({"Content-Type":"application/json"},i&&{Authorization:`Bearer ${i}`}),o=yield fetch(t,{method:r,headers:s,body:JSON.stringify({machine_type_name:R.trim()})});if(!o.ok){const e=yield o.text();throw console.error(":",o.status,e),new Error("")}{const e=yield o.json();console.log(":",e),n({title:C?"":"",description:`${R} `}),I(""),E(null),x(!1),console.log("..."),yield O(),console.log("")}}catch(e){console.error(":",e),n({title:"",description:"",variant:"destructive"})}}),children:C?"":""})]})]})]})]})}),Lt.jsx(wL,{className:"p-0",children:Lt.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===l.length?Lt.jsx("div",{className:"p-4 text-center text-gray-500",children:""}):Lt.jsx("div",{className:"divide-y",children:l.map(e=>Lt.jsx("div",{className:"p-4 hover:bg-gray-50",children:Lt.jsxs("div",{className:"flex items-center justify-between",children:[Lt.jsxs("div",{children:[Lt.jsx("p",{className:"font-medium text-gray-900",children:e.machine_type_name}),Lt.jsxs("p",{className:"text-sm text-gray-500",children:[u.filter(t=>t.machine_type_id===e.id).length,""]})]}),Lt.jsxs("div",{className:"flex gap-1",children:[Lt.jsx(Rg,{variant:"ghost",size:"sm",onClick:()=>(e=>{E(e),I(e.machine_type_name),x(!0)})(e),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:Lt.jsx(_y,{className:"h-3 w-3"})}),Lt.jsx(Rg,{variant:"ghost",size:"sm",onClick:()=>D(e.id,e.machine_type_name),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:Lt.jsx(My,{className:"h-3 w-3"})})]})]})},e.id))})})})]}),Lt.jsxs(gL,{className:"lg:col-span-2",children:[Lt.jsx(yL,{className:"pb-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white",children:Lt.jsxs(bL,{className:"text-lg flex items-center justify-between",children:[Lt.jsxs("span",{className:"flex items-center",children:[Lt.jsx(ly,{className:"mr-2 h-5 w-5"}),""]}),Lt.jsxs(Uz,{open:w,onOpenChange:S,children:[Lt.jsx(Wz,{asChild:!0,children:Lt.jsxs(Rg,{size:"sm",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",onClick:z,children:[Lt.jsx(wy,{className:"mr-1 h-3 w-3"}),""]})}),Lt.jsxs(Vz,{children:[Lt.jsxs(qz,{children:[Lt.jsx(Kz,{children:N?"":""}),Lt.jsx(Jz,{children:N?"":""})]}),Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"machine-type",children:""}),Lt.jsxs(XH,{value:_,onValueChange:A,children:[Lt.jsx(tV,{children:Lt.jsx(eV,{placeholder:""})}),Lt.jsx(iV,{children:l.map(e=>Lt.jsx(sV,{value:e.id,children:e.machine_type_name},e.id))})]})]}),Lt.jsxs("div",{children:[Lt.jsx(PL,{htmlFor:"machine-number",children:""}),Lt.jsx(ML,{id:"machine-number",value:k,onChange:e=>j(e.target.value),placeholder:""})]})]}),Lt.jsxs(Gz,{children:[Lt.jsx(Rg,{variant:"outline",onClick:z,children:""}),Lt.jsx(Rg,{onClick:()=>T(this,null,function*(){if(k.trim()&&_)try{const{buildApiUrl:e}=yield nf(()=>T(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),t=e(N?`/machines/${N.id}`:"/machines"),r=N?"PUT":"POST",i=localStorage.getItem("authToken"),s=f({"Content-Type":"application/json"},i&&{Authorization:`Bearer ${i}`});if(!(yield fetch(t,{method:r,headers:s,body:JSON.stringify({machine_number:k.trim(),machine_type_id:_})})).ok)throw new Error("");n({title:N?"":"",description:`${k} `}),j(""),A(""),P(null),S(!1),O()}catch(e){console.error(":",e),n({title:"",description:"",variant:"destructive"})}}),children:N?"":""})]})]})]})]})}),Lt.jsxs(wL,{children:[Lt.jsx("div",{className:"mb-4 space-y-4",children:Lt.jsxs("div",{className:"flex gap-4",children:[Lt.jsx("div",{className:"flex-1",children:Lt.jsxs("div",{className:"relative",children:[Lt.jsx(Ty,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),Lt.jsx(ML,{placeholder:"...",value:m,onChange:e=>v(e.target.value),className:"pl-10"})]})}),Lt.jsx("div",{className:"w-48",children:Lt.jsxs(XH,{value:g,onValueChange:y,children:[Lt.jsx(tV,{children:Lt.jsx(eV,{placeholder:""})}),Lt.jsxs(iV,{children:[Lt.jsx(sV,{value:"all",children:""}),l.map(e=>Lt.jsx(sV,{value:e.id,children:e.machine_type_name},e.id))]})]})})]})}),Lt.jsx("div",{className:"border rounded-lg",children:Lt.jsxs(jV,{children:[Lt.jsx(_V,{children:Lt.jsxs(OV,{children:[Lt.jsx(DV,{children:""}),Lt.jsx(DV,{children:""}),Lt.jsx(DV,{className:"text-right",children:""})]})}),Lt.jsx(AV,{children:0===p.length?Lt.jsx(OV,{children:Lt.jsx(MV,{colSpan:3,className:"text-center py-8 text-gray-500",children:m||"all"!==g?"":""})}):p.map(e=>Lt.jsxs(OV,{children:[Lt.jsx(MV,{className:"font-medium",children:e.machine_number}),Lt.jsx(MV,{children:e.machine_type_name}),Lt.jsx(MV,{className:"text-right",children:Lt.jsxs("div",{className:"flex justify-end gap-1",children:[Lt.jsx(Rg,{variant:"ghost",size:"sm",onClick:()=>(e=>{P(e),j(e.machine_number),A(e.machine_type_id),S(!0)})(e),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:Lt.jsx(_y,{className:"h-3 w-3"})}),Lt.jsx(Rg,{variant:"ghost",size:"sm",onClick:()=>M(e.id,e.machine_number),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:Lt.jsx(My,{className:"h-3 w-3"})})]})})]},e.id))})]})})]})]})]})]})}},Symbol.toStringTag,{value:"Module"})),mie=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=Pt.useState(null),[n,r]=Pt.useState(!1),[i,s]=Pt.useState("idle");return Lt.jsxs("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-gray-50 p-4",children:[Lt.jsx(gL,{className:"w-full max-w-md mb-4",children:Lt.jsxs(wL,{className:"pt-6",children:[Lt.jsxs("div",{className:"flex mb-4 gap-2",children:[Lt.jsx(qg,{className:"h-8 w-8 text-red-500"}),Lt.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),Lt.jsx("p",{className:"text-sm text-gray-600",children:"The page you're looking for doesn't exist or has been moved."}),Lt.jsx("div",{className:"mt-4",children:Lt.jsx(Nm,{to:"/",className:"text-blue-600 hover:underline text-sm",children:"Return to Home"})})]})}),Lt.jsx(gL,{className:"w-full max-w-md",children:Lt.jsxs(wL,{className:"pt-6",children:[Lt.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"API Connection Test"}),Lt.jsxs("div",{className:"flex gap-3 mb-4",children:[Lt.jsxs(Rg,{onClick:()=>T(this,null,function*(){r(!0),s("idle");try{const e=yield fetch($V),n=yield e.json();t(JSON.stringify(n,null,2)),s("success")}catch(e){console.error("API test failed:",e),t(String(e)),s("error")}finally{r(!1)}}),disabled:n,className:"flex items-center gap-2",children:[Lt.jsx(Py,{className:"h-4 w-4"}),"Test Health API"]}),Lt.jsxs(Rg,{onClick:()=>T(this,null,function*(){r(!0),s("idle");try{const e=yield fetch(WV,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:"Hello, this is a test of the OpenAI API connection."})});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const n=yield e.json();t(n.response),s("success")}catch(e){console.error("OpenAI API test failed:",e),t(String(e)),s("error")}finally{r(!1)}}),disabled:n,variant:"secondary",className:"flex items-center gap-2",children:[Lt.jsx(zg,{className:"h-4 w-4"}),"Test OpenAI API"]})]}),n&&Lt.jsx("div",{className:"py-4 text-center text-gray-600",children:"Loading..."}),!n&&e&&Lt.jsxs("div",{className:"mt-2",children:[Lt.jsx("div",{className:"text-sm font-medium mb-1 "+("success"===i?"text-green-600":"text-red-600"),children:"success"===i?"Success!":"Error:"}),Lt.jsx("pre",{className:"bg-gray-100 p-3 rounded-md text-xs overflow-x-auto max-h-64 overflow-y-auto",children:e})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),vie=Object.freeze(Object.defineProperty({__proto__:null,loadHistoryFromDB:()=>T(e,null,function*(){try{const{buildApiUrl:t}=yield nf(()=>T(e,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Um);return{buildApiUrl:e}}),void 0),n=yield fetch(t("/history?limit=100&source=files&includeImages=true"));if(!n.ok)throw new Error(`: ${n.status}`);const r=yield n.json();return r.success&&r.data?(console.log(` : ${r.data.length}, : ${r.version}`),r.data.map(e=>{var t,n,r,i,s,o,a,l,c,u,d,p,h;const v=e.machineType&&"Unknown"!==e.machineType?e.machineType:(null==(t=e.jsonData)?void 0:t.machineType)||(null==(i=null==(r=null==(n=e.jsonData)?void 0:n.chatData)?void 0:r.machineInfo)?void 0:i.machineTypeName)||(null==(o=null==(s=e.jsonData)?void 0:s.machineInfo)?void 0:o.machineTypeName)||"Unknown",g=e.machineNumber&&"Unknown"!==e.machineNumber?e.machineNumber:(null==(a=e.jsonData)?void 0:a.machineNumber)||(null==(u=null==(c=null==(l=e.jsonData)?void 0:l.chatData)?void 0:c.machineInfo)?void 0:u.machineNumber)||(null==(p=null==(d=e.jsonData)?void 0:d.machineInfo)?void 0:p.machineNumber)||"Unknown";return{id:e.id,chatId:e.id,machineType:v,machineNumber:g,incidentTitle:e.title||"",problemDescription:e.description||"",createdAt:e.createdAt||(new Date).toISOString(),fileName:e.fileName||`${e.id}.json`,hasImage:e.hasImages||e.imageCount>0,jsonData:m(f({images:e.images||[],imageCount:e.imageCount||0,savedImages:e.images?e.images.map(e=>({messageId:e.messageId,fileName:e.fileName,url:e.url||`/api/images/chat-exports/${e.fileName}`,path:e.fileName})):[]},e.jsonData||{}),{chatData:(null==(h=e.jsonData)?void 0:h.chatData)||e.jsonData||{}}),source:"files"}})):(console.warn(" "),[])}catch(t){return console.error(" :",t),[]}})},Symbol.toStringTag,{value:"Module"}))}},function(){return t||(0,e[s(e)[0]])((t={exports:{}}).exports,t),t.exports});export default N();
