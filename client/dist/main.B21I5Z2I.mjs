var e,t,r,n,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y,b,x,w,S,C,E,T,N,P,R,I,k,_,A,j,O,D,M,L,z,F,B,U,W,H,V,q,G,K,J,Y,Z,Q,X,ee,te,re,ne,ie,se,oe,ae,le,ce,ue,de,pe,he,fe,me,ve,ge,ye,be,xe,we,Se,Ce,Ee,Te,Ne=Object.defineProperty,Pe=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,ke=Object.getPrototypeOf,_e=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,je=Reflect.get,Oe=e=>{throw TypeError(e)},De=Math.pow,Me=(e,t,r)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Le=(e,t)=>{for(var r in t||(t={}))_e.call(t,r)&&Me(e,r,t[r]);if(Ie)for(var r of Ie(t))Ae.call(t,r)&&Me(e,r,t[r]);return e},ze=(e,t)=>Pe(e,Re(t)),Fe=(e,t)=>{var r={};for(var n in e)_e.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ie)for(var n of Ie(e))t.indexOf(n)<0&&Ae.call(e,n)&&(r[n]=e[n]);return r},Be=(e,t,r)=>Me(e,"symbol"!=typeof t?t+"":t,r),Ue=(e,t,r)=>t.has(e)||Oe("Cannot "+r),We=(e,t,r)=>(Ue(e,t,"read from private field"),r?r.call(e):t.get(e)),He=(e,t,r)=>t.has(e)?Oe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),$e=(e,t,r,n)=>(Ue(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ve=(e,t,r)=>(Ue(e,t,"access private method"),r),qe=(e,t,r,n)=>({set _(n){$e(e,t,n,r)},get _(){return We(e,t,n)}}),Ge=(e,t,r)=>je(ke(e),r,t),Ke=(e,t,r)=>new Promise((n,i)=>{var s=e=>{try{a(r.next(e))}catch(t){i(t)}},o=e=>{try{a(r.throw(e))}catch(t){i(t)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);a((r=r.apply(e,t)).next())});function Je(e,t){for(var r=0;r<t.length;r++){const n=t[r];if("string"!=typeof n&&!Array.isArray(n))for(const t in n)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ye="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ze(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Qe(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}var Xe={exports:{}},et={},tt={exports:{}},rt={},nt=Symbol.for("react.element"),it=Symbol.for("react.portal"),st=Symbol.for("react.fragment"),ot=Symbol.for("react.strict_mode"),at=Symbol.for("react.profiler"),lt=Symbol.for("react.provider"),ct=Symbol.for("react.context"),ut=Symbol.for("react.forward_ref"),dt=Symbol.for("react.suspense"),pt=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),ft=Symbol.iterator;var mt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vt=Object.assign,gt={};function yt(e,t,r){this.props=e,this.context=t,this.refs=gt,this.updater=r||mt}function bt(){}function xt(e,t,r){this.props=e,this.context=t,this.refs=gt,this.updater=r||mt}yt.prototype.isReactComponent={},yt.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},yt.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},bt.prototype=yt.prototype;var wt=xt.prototype=new bt;wt.constructor=xt,vt(wt,yt.prototype),wt.isPureReactComponent=!0;var St=Array.isArray,Ct=Object.prototype.hasOwnProperty,Et={current:null},Tt={key:!0,ref:!0,__self:!0,__source:!0};function Nt(e,t,r){var n,i={},s=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)Ct.call(t,n)&&!Tt.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(1===a)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps)void 0===i[n]&&(i[n]=a[n]);return{$$typeof:nt,type:e,key:s,ref:o,props:i,_owner:Et.current}}function Pt(e){return"object"==typeof e&&null!==e&&e.$$typeof===nt}var Rt=/\/+/g;function It(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function kt(e,t,r,n,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var o=!1;if(null===e)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case nt:case it:o=!0}}if(o)return i=i(o=e),e=""===n?"."+It(o,0):n,St(i)?(r="",null!=e&&(r=e.replace(Rt,"$&/")+"/"),kt(i,t,r,"",function(e){return e})):null!=i&&(Pt(i)&&(i=function(e,t){return{$$typeof:nt,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Rt,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=""===n?".":n+":",St(e))for(var a=0;a<e.length;a++){var l=n+It(s=e[a],a);o+=kt(s,t,r,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ft&&e[ft]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),a=0;!(s=e.next()).done;)o+=kt(s=s.value,t,r,l=n+It(s,a++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function _t(e,t,r){if(null==e)return e;var n=[],i=0;return kt(e,n,"","",function(e){return t.call(r,e,i++)}),n}function At(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var jt={current:null},Ot={transition:null},Dt={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:Ot,ReactCurrentOwner:Et};function Mt(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:_t,forEach:function(e,t,r){_t(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return _t(e,function(){t++}),t},toArray:function(e){return _t(e,function(e){return e})||[]},only:function(e){if(!Pt(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},rt.Component=yt,rt.Fragment=st,rt.Profiler=at,rt.PureComponent=xt,rt.StrictMode=ot,rt.Suspense=dt,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dt,rt.act=Mt,rt.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=vt({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=Et.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Ct.call(t,l)&&!Tt.hasOwnProperty(l)&&(n[l]=void 0===t[l]&&void 0!==a?a[l]:t[l])}var l=arguments.length-2;if(1===l)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:nt,type:e.type,key:i,ref:s,props:n,_owner:o}},rt.createContext=function(e){return(e={$$typeof:ct,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:lt,_context:e},e.Consumer=e},rt.createElement=Nt,rt.createFactory=function(e){var t=Nt.bind(null,e);return t.type=e,t},rt.createRef=function(){return{current:null}},rt.forwardRef=function(e){return{$$typeof:ut,render:e}},rt.isValidElement=Pt,rt.lazy=function(e){return{$$typeof:ht,_payload:{_status:-1,_result:e},_init:At}},rt.memo=function(e,t){return{$$typeof:pt,type:e,compare:void 0===t?null:t}},rt.startTransition=function(e){var t=Ot.transition;Ot.transition={};try{e()}finally{Ot.transition=t}},rt.unstable_act=Mt,rt.useCallback=function(e,t){return jt.current.useCallback(e,t)},rt.useContext=function(e){return jt.current.useContext(e)},rt.useDebugValue=function(){},rt.useDeferredValue=function(e){return jt.current.useDeferredValue(e)},rt.useEffect=function(e,t){return jt.current.useEffect(e,t)},rt.useId=function(){return jt.current.useId()},rt.useImperativeHandle=function(e,t,r){return jt.current.useImperativeHandle(e,t,r)},rt.useInsertionEffect=function(e,t){return jt.current.useInsertionEffect(e,t)},rt.useLayoutEffect=function(e,t){return jt.current.useLayoutEffect(e,t)},rt.useMemo=function(e,t){return jt.current.useMemo(e,t)},rt.useReducer=function(e,t,r){return jt.current.useReducer(e,t,r)},rt.useRef=function(e){return jt.current.useRef(e)},rt.useState=function(e){return jt.current.useState(e)},rt.useSyncExternalStore=function(e,t,r){return jt.current.useSyncExternalStore(e,t,r)},rt.useTransition=function(){return jt.current.useTransition()},rt.version="18.3.1",tt.exports=rt;var Lt=tt.exports;const zt=Ze(Lt),Ft=Je({__proto__:null,default:zt},[Lt]);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Bt=Lt,Ut=Symbol.for("react.element"),Wt=Symbol.for("react.fragment"),Ht=Object.prototype.hasOwnProperty,$t=Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vt={key:!0,ref:!0,__self:!0,__source:!0};function qt(e,t,r){var n,i={},s=null,o=null;for(n in void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(o=t.ref),t)Ht.call(t,n)&&!Vt.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:Ut,type:e,key:s,ref:o,props:i,_owner:$t.current}}et.Fragment=Wt,et.jsx=qt,et.jsxs=qt,Xe.exports=et;var Gt=Xe.exports,Kt={exports:{}},Jt={},Yt={exports:{}},Zt={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<i(s,t)))break e;e[n]=t,e[r]=s,r=n}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,o=s>>>1;n<o;){var a=2*(n+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,r))c<s&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[a]=r,n=a);else{if(!(c<s&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,h=!1,f=!1,m=!1,v="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var i=r(c);null!==i;){if(null===i.callback)n(c);else{if(!(i.startTime<=e))break;n(c),i.sortIndex=i.expirationTime,t(l,i)}i=r(c)}}function x(e){if(m=!1,b(e),!f)if(null!==r(l))f=!0,A(w);else{var t=r(c);null!==t&&j(x,t.startTime-e)}}function w(t,i){f=!1,m&&(m=!1,g(T),T=-1),h=!0;var s=p;try{for(b(i),d=r(l);null!==d&&(!(d.expirationTime>i)||t&&!R());){var o=d.callback;if("function"==typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?d.callback=a:d===r(l)&&n(l),b(i)}else n(l);d=r(l)}if(null!==d)var u=!0;else{var v=r(c);null!==v&&j(x,v.startTime-i),u=!1}return u}finally{d=null,p=s,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,E=null,T=-1,N=5,P=-1;function R(){return!(e.unstable_now()-P<N)}function I(){if(null!==E){var t=e.unstable_now();P=t;var r=!0;try{r=E(!0,t)}finally{r?S():(C=!1,E=null)}}else C=!1}if("function"==typeof y)S=function(){y(I)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,_=k.port2;k.port1.onmessage=I,S=function(){_.postMessage(null)}}else S=function(){v(I,0)};function A(e){E=e,C||(C=!0,S())}function j(t,r){T=v(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||h||(f=!0,A(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},e.unstable_scheduleCallback=function(n,i,s){var o=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?o+s:o:s=o,n){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return n={id:u++,callback:i,priorityLevel:n,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(n.sortIndex=s,t(c,n),null===r(l)&&n===r(c)&&(m?(g(T),T=-1):m=!0,j(x,s-o))):(n.sortIndex=a,t(l,n),f||h||(f=!0,A(w))),n},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}}(Zt),Yt.exports=Zt;var Qt=Yt.exports,Xt=Lt,er=Qt;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function tr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rr=new Set,nr={};function ir(e,t){sr(e,t),sr(e+"Capture",t)}function sr(e,t){for(nr[e]=t,e=0;e<t.length;e++)rr.add(t[e])}var or=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ar=Object.prototype.hasOwnProperty,lr=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cr={},ur={};function dr(e,t,r,n,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pr[e]=new dr(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pr[t]=new dr(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){pr[e]=new dr(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pr[e]=new dr(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pr[e]=new dr(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){pr[e]=new dr(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){pr[e]=new dr(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){pr[e]=new dr(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){pr[e]=new dr(e,5,!1,e.toLowerCase(),null,!1,!1)});var hr=/[\-:]([a-z])/g;function fr(e){return e[1].toUpperCase()}function mr(e,t,r,n){var i=pr.hasOwnProperty(t)?pr[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!ar.call(ur,e)||!ar.call(cr,e)&&(lr.test(e)?ur[e]=!0:(cr[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hr,fr);pr[t]=new dr(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hr,fr);pr[t]=new dr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hr,fr);pr[t]=new dr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){pr[e]=new dr(e,1,!1,e.toLowerCase(),null,!1,!1)}),pr.xlinkHref=new dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){pr[e]=new dr(e,1,!1,e.toLowerCase(),null,!0,!0)});var vr=Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gr=Symbol.for("react.element"),yr=Symbol.for("react.portal"),br=Symbol.for("react.fragment"),xr=Symbol.for("react.strict_mode"),wr=Symbol.for("react.profiler"),Sr=Symbol.for("react.provider"),Cr=Symbol.for("react.context"),Er=Symbol.for("react.forward_ref"),Tr=Symbol.for("react.suspense"),Nr=Symbol.for("react.suspense_list"),Pr=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),Ir=Symbol.for("react.offscreen"),kr=Symbol.iterator;function _r(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=kr&&e[kr]||e["@@iterator"])?e:null}var Ar,jr=Object.assign;function Or(e){if(void 0===Ar)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ar=t&&t[1]||""}return"\n"+Ar+e}var Dr=!1;function Mr(e,t){if(!e||Dr)return"";Dr=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),s=n.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{Dr=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Or(e):""}function Lr(e){switch(e.tag){case 5:return Or(e.type);case 16:return Or("Lazy");case 13:return Or("Suspense");case 19:return Or("SuspenseList");case 0:case 2:case 15:return e=Mr(e.type,!1);case 11:return e=Mr(e.type.render,!1);case 1:return e=Mr(e.type,!0);default:return""}}function zr(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case br:return"Fragment";case yr:return"Portal";case wr:return"Profiler";case xr:return"StrictMode";case Tr:return"Suspense";case Nr:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Cr:return(e.displayName||"Context")+".Consumer";case Sr:return(e._context.displayName||"Context")+".Provider";case Er:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Pr:return null!==(t=e.displayName||null)?t:zr(e.type)||"Memo";case Rr:t=e._payload,e=e._init;try{return zr(e(t))}catch(r){}}return null}function Fr(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zr(t);case 8:return t===xr?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Br(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Ur(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Wr(e){e._valueTracker||(e._valueTracker=function(e){var t=Ur(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Hr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ur(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function $r(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Vr(e,t){var r=t.checked;return jr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function qr(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=Br(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Gr(e,t){null!=(t=t.checked)&&mr(e,"checked",t,!1)}function Kr(e,t){Gr(e,t);var r=Br(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Yr(e,t.type,r):t.hasOwnProperty("defaultValue")&&Yr(e,t.type,Br(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Jr(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function Yr(e,t,r){"number"===t&&$r(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Zr=Array.isArray;function Qr(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Br(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Xr(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(tr(91));return jr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function en(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(tr(92));if(Zr(r)){if(1<r.length)throw Error(tr(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:Br(r)}}function tn(e,t){var r=Br(t.value),n=Br(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function rn(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function nn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sn(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?nn(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var on,an,ln=(an=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((on=on||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=on.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return an(e,t)})}:an);function cn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dn=["Webkit","ms","Moz","O"];function pn(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||un.hasOwnProperty(e)&&un[e]?(""+t).trim():t+"px"}function hn(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=pn(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(un).forEach(function(e){dn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),un[t]=un[e]})});var fn=jr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mn(e,t){if(t){if(fn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(tr(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(tr(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(tr(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(tr(62))}}function vn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gn=null;function yn(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var bn=null,xn=null,wn=null;function Sn(e){if(e=va(e)){if("function"!=typeof bn)throw Error(tr(280));var t=e.stateNode;t&&(t=ya(t),bn(e.stateNode,e.type,t))}}function Cn(e){xn?wn?wn.push(e):wn=[e]:xn=e}function En(){if(xn){var e=xn,t=wn;if(wn=xn=null,Sn(e),t)for(e=0;e<t.length;e++)Sn(t[e])}}function Tn(e,t){return e(t)}function Nn(){}var Pn=!1;function Rn(e,t,r){if(Pn)return e(t,r);Pn=!0;try{return Tn(e,t,r)}finally{Pn=!1,(null!==xn||null!==wn)&&(Nn(),En())}}function In(e,t){var r=e.stateNode;if(null===r)return null;var n=ya(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(tr(231,t,typeof r));return r}var kn=!1;if(or)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){kn=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch(an){kn=!1}function An(e,t,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var jn=!1,On=null,Dn=!1,Mn=null,Ln={onError:function(e){jn=!0,On=e}};function zn(e,t,r,n,i,s,o,a,l){jn=!1,On=null,An.apply(Ln,arguments)}function Fn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Bn(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Un(e){if(Fn(e)!==e)throw Error(tr(188))}function Wn(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Fn(e)))throw Error(tr(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(n=i.return)){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Un(i),e;if(s===n)return Un(i),t;s=s.sibling}throw Error(tr(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(tr(189))}}if(r.alternate!==n)throw Error(tr(190))}if(3!==r.tag)throw Error(tr(188));return r.stateNode.current===r?e:t}(e))?Hn(e):null}function Hn(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Hn(e);if(null!==t)return t;e=e.sibling}return null}var $n=er.unstable_scheduleCallback,Vn=er.unstable_cancelCallback,qn=er.unstable_shouldYield,Gn=er.unstable_requestPaint,Kn=er.unstable_now,Jn=er.unstable_getCurrentPriorityLevel,Yn=er.unstable_ImmediatePriority,Zn=er.unstable_UserBlockingPriority,Qn=er.unstable_NormalPriority,Xn=er.unstable_LowPriority,ei=er.unstable_IdlePriority,ti=null,ri=null;var ni=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ii(e)/si|0)|0},ii=Math.log,si=Math.LN2;var oi=64,ai=4194304;function li(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ci(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&r;if(0!==o){var a=o&~i;0!==a?n=li(a):0!==(s&=o)&&(n=li(s))}else 0!==(o=r&~i)?n=li(o):0!==s&&(n=li(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&n&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-ni(t)),n|=e[r],t&=~i;return n}function ui(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function di(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pi(){var e=oi;return!(4194240&(oi<<=1))&&(oi=64),e}function hi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fi(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ni(t)]=r}function mi(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ni(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var vi=0;function gi(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var yi,bi,xi,wi,Si,Ci=!1,Ei=[],Ti=null,Ni=null,Pi=null,Ri=new Map,Ii=new Map,ki=[],_i="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ai(e,t){switch(e){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Ri.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(t.pointerId)}}function ji(e,t,r,n,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=va(t))&&bi(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Oi(e){var t=ma(e.target);if(null!==t){var r=Fn(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Bn(r)))return e.blockedOn=t,void Si(e.priority,function(){xi(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Di(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=qi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=va(r))&&bi(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);gn=n,r.target.dispatchEvent(n),gn=null,t.shift()}return!0}function Mi(e,t,r){Di(e)&&r.delete(t)}function Li(){Ci=!1,null!==Ti&&Di(Ti)&&(Ti=null),null!==Ni&&Di(Ni)&&(Ni=null),null!==Pi&&Di(Pi)&&(Pi=null),Ri.forEach(Mi),Ii.forEach(Mi)}function zi(e,t){e.blockedOn===t&&(e.blockedOn=null,Ci||(Ci=!0,er.unstable_scheduleCallback(er.unstable_NormalPriority,Li)))}function Fi(e){function t(t){return zi(t,e)}if(0<Ei.length){zi(Ei[0],e);for(var r=1;r<Ei.length;r++){var n=Ei[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Ti&&zi(Ti,e),null!==Ni&&zi(Ni,e),null!==Pi&&zi(Pi,e),Ri.forEach(t),Ii.forEach(t),r=0;r<ki.length;r++)(n=ki[r]).blockedOn===e&&(n.blockedOn=null);for(;0<ki.length&&null===(r=ki[0]).blockedOn;)Oi(r),null===r.blockedOn&&ki.shift()}var Bi=vr.ReactCurrentBatchConfig,Ui=!0;function Wi(e,t,r,n){var i=vi,s=Bi.transition;Bi.transition=null;try{vi=1,$i(e,t,r,n)}finally{vi=i,Bi.transition=s}}function Hi(e,t,r,n){var i=vi,s=Bi.transition;Bi.transition=null;try{vi=4,$i(e,t,r,n)}finally{vi=i,Bi.transition=s}}function $i(e,t,r,n){if(Ui){var i=qi(e,t,r,n);if(null===i)Uo(e,t,n,Vi,r),Ai(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Ti=ji(Ti,e,t,r,n,i),!0;case"dragenter":return Ni=ji(Ni,e,t,r,n,i),!0;case"mouseover":return Pi=ji(Pi,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Ri.set(s,ji(Ri.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Ii.set(s,ji(Ii.get(s)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Ai(e,n),4&t&&-1<_i.indexOf(e)){for(;null!==i;){var s=va(i);if(null!==s&&yi(s),null===(s=qi(e,t,r,n))&&Uo(e,t,n,Vi,r),s===i)break;i=s}null!==i&&n.stopPropagation()}else Uo(e,t,n,null,r)}}var Vi=null;function qi(e,t,r,n){if(Vi=null,null!==(e=ma(e=yn(n))))if(null===(t=Fn(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Bn(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vi=e,null}function Gi(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jn()){case Yn:return 1;case Zn:return 4;case Qn:case Xn:return 16;case ei:return 536870912;default:return 16}default:return 16}}var Ki=null,Ji=null,Yi=null;function Zi(){if(Yi)return Yi;var e,t,r=Ji,n=r.length,i="value"in Ki?Ki.value:Ki.textContent,s=i.length;for(e=0;e<n&&r[e]===i[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===i[s-t];t++);return Yi=i.slice(e,1<t?1-t:void 0)}function Qi(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xi(){return!0}function es(){return!1}function ts(e){function t(t,r,n,i,s){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Xi:es,this.isPropagationStopped=es,this}return jr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),t}var rs,ns,is,ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},os=ts(ss),as=jr({},ss,{view:0,detail:0}),ls=ts(as),cs=jr({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ws,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==is&&(is&&"mousemove"===e.type?(rs=e.screenX-is.screenX,ns=e.screenY-is.screenY):ns=rs=0,is=e),rs)},movementY:function(e){return"movementY"in e?e.movementY:ns}}),us=ts(cs),ds=ts(jr({},cs,{dataTransfer:0})),ps=ts(jr({},as,{relatedTarget:0})),hs=ts(jr({},ss,{animationName:0,elapsedTime:0,pseudoElement:0})),fs=jr({},ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ms=ts(fs),vs=ts(jr({},ss,{data:0})),gs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ys={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xs(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bs[e])&&!!t[e]}function ws(){return xs}var Ss=jr({},as,{key:function(e){if(e.key){var t=gs[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qi(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ys[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ws,charCode:function(e){return"keypress"===e.type?Qi(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qi(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cs=ts(Ss),Es=ts(jr({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ts=ts(jr({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ws})),Ns=ts(jr({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ps=jr({},cs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rs=ts(Ps),Is=[9,13,27,32],ks=or&&"CompositionEvent"in window,_s=null;or&&"documentMode"in document&&(_s=document.documentMode);var As=or&&"TextEvent"in window&&!_s,js=or&&(!ks||_s&&8<_s&&11>=_s),Os=String.fromCharCode(32),Ds=!1;function Ms(e,t){switch(e){case"keyup":return-1!==Is.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ls(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zs=!1;var Fs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fs[e.type]:"textarea"===t}function Us(e,t,r,n){Cn(n),0<(t=Ho(t,"onChange")).length&&(r=new os("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ws=null,Hs=null;function $s(e){Do(e,0)}function Vs(e){if(Hr(ga(e)))return e}function qs(e,t){if("change"===e)return t}var Gs=!1;if(or){var Ks;if(or){var Js="oninput"in document;if(!Js){var Ys=document.createElement("div");Ys.setAttribute("oninput","return;"),Js="function"==typeof Ys.oninput}Ks=Js}else Ks=!1;Gs=Ks&&(!document.documentMode||9<document.documentMode)}function Zs(){Ws&&(Ws.detachEvent("onpropertychange",Qs),Hs=Ws=null)}function Qs(e){if("value"===e.propertyName&&Vs(Hs)){var t=[];Us(t,Hs,e,yn(e)),Rn($s,t)}}function Xs(e,t,r){"focusin"===e?(Zs(),Hs=r,(Ws=t).attachEvent("onpropertychange",Qs)):"focusout"===e&&Zs()}function eo(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vs(Hs)}function to(e,t){if("click"===e)return Vs(t)}function ro(e,t){if("input"===e||"change"===e)return Vs(t)}var no="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function io(e,t){if(no(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!ar.call(t,i)||!no(e[i],t[i]))return!1}return!0}function so(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oo(e,t){var r,n=so(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=so(n)}}function ao(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ao(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lo(){for(var e=window,t=$r();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=$r((e=t.contentWindow).document)}return t}function co(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function uo(e){var t=lo(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ao(r.ownerDocument.documentElement,r)){if(null!==n&&co(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=void 0===n.end?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=oo(r,s);var o=oo(r,n);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var po=or&&"documentMode"in document&&11>=document.documentMode,ho=null,fo=null,mo=null,vo=!1;function go(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vo||null==ho||ho!==$r(n)||("selectionStart"in(n=ho)&&co(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},mo&&io(mo,n)||(mo=n,0<(n=Ho(fo,"onSelect")).length&&(t=new os("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ho)))}function yo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var bo={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionend:yo("Transition","TransitionEnd")},xo={},wo={};function So(e){if(xo[e])return xo[e];if(!bo[e])return e;var t,r=bo[e];for(t in r)if(r.hasOwnProperty(t)&&t in wo)return xo[e]=r[t];return e}or&&(wo=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);var Co=So("animationend"),Eo=So("animationiteration"),To=So("animationstart"),No=So("transitionend"),Po=new Map,Ro="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(e,t){Po.set(e,t),ir(t,[e])}for(var ko=0;ko<Ro.length;ko++){var _o=Ro[ko];Io(_o.toLowerCase(),"on"+(_o[0].toUpperCase()+_o.slice(1)))}Io(Co,"onAnimationEnd"),Io(Eo,"onAnimationIteration"),Io(To,"onAnimationStart"),Io("dblclick","onDoubleClick"),Io("focusin","onFocus"),Io("focusout","onBlur"),Io(No,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jo=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function Oo(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,s,o,a,l){if(zn.apply(this,arguments),jn){if(!jn)throw Error(tr(198));var c=On;jn=!1,On=null,Dn||(Dn=!0,Mn=c)}}(n,t,void 0,e),e.currentTarget=null}function Do(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Oo(i,a,c),s=l}else for(o=0;o<n.length;o++){if(l=(a=n[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Oo(i,a,c),s=l}}}if(Dn)throw e=Mn,Dn=!1,Mn=null,e}function Mo(e,t){var r=t[pa];void 0===r&&(r=t[pa]=new Set);var n=e+"__bubble";r.has(n)||(Bo(t,e,2,!1),r.add(n))}function Lo(e,t,r){var n=0;t&&(n|=4),Bo(r,e,n,t)}var zo="_reactListening"+Math.random().toString(36).slice(2);function Fo(e){if(!e[zo]){e[zo]=!0,rr.forEach(function(t){"selectionchange"!==t&&(jo.has(t)||Lo(t,!1,e),Lo(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zo]||(t[zo]=!0,Lo("selectionchange",!1,t))}}function Bo(e,t,r,n){switch(Gi(t)){case 1:var i=Wi;break;case 4:i=Hi;break;default:i=$i}r=i.bind(null,t,r,e),i=void 0,!kn||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Uo(e,t,r,n,i){var s=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ma(a)))return;if(5===(l=o.tag)||6===l){n=s=o;continue e}a=a.parentNode}}n=n.return}Rn(function(){var n=s,i=yn(r),o=[];e:{var a=Po.get(e);if(void 0!==a){var l=os,c=e;switch(e){case"keypress":if(0===Qi(r))break e;case"keydown":case"keyup":l=Cs;break;case"focusin":c="focus",l=ps;break;case"focusout":c="blur",l=ps;break;case"beforeblur":case"afterblur":l=ps;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=us;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ds;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ts;break;case Co:case Eo:case To:l=hs;break;case No:l=Ns;break;case"scroll":l=ls;break;case"wheel":l=Rs;break;case"copy":case"cut":case"paste":l=ms;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Es}var u=!!(4&t),d=!u&&"scroll"===e,p=u?null!==a?a+"Capture":null:a;u=[];for(var h,f=n;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==p&&(null!=(m=In(f,p))&&u.push(Wo(f,m,h)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,r,i),o.push({event:a,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===gn||!(c=r.relatedTarget||r.fromElement)||!ma(c)&&!c[da])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?ma(c):null)&&(c!==(d=Fn(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=us,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Es,m="onPointerLeave",p="onPointerEnter",f="pointer"),d=null==l?a:ga(l),h=null==c?a:ga(c),(a=new u(m,f+"leave",l,r,i)).target=d,a.relatedTarget=h,m=null,ma(i)===n&&((u=new u(p,f+"enter",c,r,i)).target=h,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(p=c,f=0,h=u=l;h;h=$o(h))f++;for(h=0,m=p;m;m=$o(m))h++;for(;0<f-h;)u=$o(u),f--;for(;0<h-f;)p=$o(p),h--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=$o(u),p=$o(p)}u=null}else u=null;null!==l&&Vo(o,a,l,u,!1),null!==c&&null!==d&&Vo(o,d,c,u,!0)}if("select"===(l=(a=n?ga(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var v=qs;else if(Bs(a))if(Gs)v=ro;else{v=eo;var g=Xs}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(v=to);switch(v&&(v=v(e,n))?Us(o,v,r,i):(g&&g(e,a,n),"focusout"===e&&(g=a._wrapperState)&&g.controlled&&"number"===a.type&&Yr(a,"number",a.value)),g=n?ga(n):window,e){case"focusin":(Bs(g)||"true"===g.contentEditable)&&(ho=g,fo=n,mo=null);break;case"focusout":mo=fo=ho=null;break;case"mousedown":vo=!0;break;case"contextmenu":case"mouseup":case"dragend":vo=!1,go(o,r,i);break;case"selectionchange":if(po)break;case"keydown":case"keyup":go(o,r,i)}var y;if(ks)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zs?Ms(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(js&&"ko"!==r.locale&&(zs||"onCompositionStart"!==b?"onCompositionEnd"===b&&zs&&(y=Zi()):(Ji="value"in(Ki=i)?Ki.value:Ki.textContent,zs=!0)),0<(g=Ho(n,b)).length&&(b=new vs(b,e,null,r,i),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Ls(r))&&(b.data=y))),(y=As?function(e,t){switch(e){case"compositionend":return Ls(t);case"keypress":return 32!==t.which?null:(Ds=!0,Os);case"textInput":return(e=t.data)===Os&&Ds?null:e;default:return null}}(e,r):function(e,t){if(zs)return"compositionend"===e||!ks&&Ms(e,t)?(e=Zi(),Yi=Ji=Ki=null,zs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return js&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Ho(n,"onBeforeInput")).length&&(i=new vs("onBeforeInput","beforeinput",null,r,i),o.push({event:i,listeners:n}),i.data=y))}Do(o,t)})}function Wo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ho(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=In(e,r))&&n.unshift(Wo(e,s,i)),null!=(s=In(e,t))&&n.push(Wo(e,s,i))),e=e.return}return n}function $o(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vo(e,t,r,n,i){for(var s=t._reactName,o=[];null!==r&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=In(r,s))&&o.unshift(Wo(r,l,a)):i||null!=(l=In(r,s))&&o.push(Wo(r,l,a))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var qo=/\r\n?/g,Go=/\u0000|\uFFFD/g;function Ko(e){return("string"==typeof e?e:""+e).replace(qo,"\n").replace(Go,"")}function Jo(e,t,r){if(t=Ko(t),Ko(e)!==t&&r)throw Error(tr(425))}function Yo(){}var Zo=null,Qo=null;function Xo(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ea="function"==typeof setTimeout?setTimeout:void 0,ta="function"==typeof clearTimeout?clearTimeout:void 0,ra="function"==typeof Promise?Promise:void 0,na="function"==typeof queueMicrotask?queueMicrotask:void 0!==ra?function(e){return ra.resolve(null).then(e).catch(ia)}:ea;function ia(e){setTimeout(function(){throw e})}function sa(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Fi(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Fi(t)}function oa(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function aa(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var la=Math.random().toString(36).slice(2),ca="__reactFiber$"+la,ua="__reactProps$"+la,da="__reactContainer$"+la,pa="__reactEvents$"+la,ha="__reactListeners$"+la,fa="__reactHandles$"+la;function ma(e){var t=e[ca];if(t)return t;for(var r=e.parentNode;r;){if(t=r[da]||r[ca]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=aa(e);null!==e;){if(r=e[ca])return r;e=aa(e)}return t}r=(e=r).parentNode}return null}function va(e){return!(e=e[ca]||e[da])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ga(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(tr(33))}function ya(e){return e[ua]||null}var ba=[],xa=-1;function wa(e){return{current:e}}function Sa(e){0>xa||(e.current=ba[xa],ba[xa]=null,xa--)}function Ca(e,t){xa++,ba[xa]=e.current,e.current=t}var Ea={},Ta=wa(Ea),Na=wa(!1),Pa=Ea;function Ra(e,t){var r=e.type.contextTypes;if(!r)return Ea;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in r)s[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ia(e){return null!=(e=e.childContextTypes)}function ka(){Sa(Na),Sa(Ta)}function _a(e,t,r){if(Ta.current!==Ea)throw Error(tr(168));Ca(Ta,t),Ca(Na,r)}function Aa(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(tr(108,Fr(e)||"Unknown",i));return jr({},r,n)}function ja(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Pa=Ta.current,Ca(Ta,e),Ca(Na,Na.current),!0}function Oa(e,t,r){var n=e.stateNode;if(!n)throw Error(tr(169));r?(e=Aa(e,t,Pa),n.__reactInternalMemoizedMergedChildContext=e,Sa(Na),Sa(Ta),Ca(Ta,e)):Sa(Na),Ca(Na,r)}var Da=null,Ma=!1,La=!1;function za(e){null===Da?Da=[e]:Da.push(e)}function Fa(){if(!La&&null!==Da){La=!0;var e=0,t=vi;try{var r=Da;for(vi=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Da=null,Ma=!1}catch(i){throw null!==Da&&(Da=Da.slice(e+1)),$n(Yn,Fa),i}finally{vi=t,La=!1}}return null}var Ba=[],Ua=0,Wa=null,Ha=0,$a=[],Va=0,qa=null,Ga=1,Ka="";function Ja(e,t){Ba[Ua++]=Ha,Ba[Ua++]=Wa,Wa=e,Ha=t}function Ya(e,t,r){$a[Va++]=Ga,$a[Va++]=Ka,$a[Va++]=qa,qa=e;var n=Ga;e=Ka;var i=32-ni(n)-1;n&=~(1<<i),r+=1;var s=32-ni(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ga=1<<32-ni(t)+i|r<<i|n,Ka=s+e}else Ga=1<<s|r<<i|n,Ka=e}function Za(e){null!==e.return&&(Ja(e,1),Ya(e,1,0))}function Qa(e){for(;e===Wa;)Wa=Ba[--Ua],Ba[Ua]=null,Ha=Ba[--Ua],Ba[Ua]=null;for(;e===qa;)qa=$a[--Va],$a[Va]=null,Ka=$a[--Va],$a[Va]=null,Ga=$a[--Va],$a[Va]=null}var Xa=null,el=null,tl=!1,rl=null;function nl(e,t){var r=Pp(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function il(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Xa=e,el=oa(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Xa=e,el=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==qa?{id:Ga,overflow:Ka}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Pp(18,null,null,0)).stateNode=t,r.return=e,e.child=r,Xa=e,el=null,!0);default:return!1}}function sl(e){return!(!(1&e.mode)||128&e.flags)}function ol(e){if(tl){var t=el;if(t){var r=t;if(!il(e,t)){if(sl(e))throw Error(tr(418));t=oa(r.nextSibling);var n=Xa;t&&il(e,t)?nl(n,r):(e.flags=-4097&e.flags|2,tl=!1,Xa=e)}}else{if(sl(e))throw Error(tr(418));e.flags=-4097&e.flags|2,tl=!1,Xa=e}}}function al(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Xa=e}function ll(e){if(e!==Xa)return!1;if(!tl)return al(e),tl=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Xo(e.type,e.memoizedProps)),t&&(t=el)){if(sl(e))throw cl(),Error(tr(418));for(;t;)nl(e,t),t=oa(t.nextSibling)}if(al(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(tr(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){el=oa(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}el=null}}else el=Xa?oa(e.stateNode.nextSibling):null;return!0}function cl(){for(var e=el;e;)e=oa(e.nextSibling)}function ul(){el=Xa=null,tl=!1}function dl(e){null===rl?rl=[e]:rl.push(e)}var pl=vr.ReactCurrentBatchConfig;function hl(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(tr(309));var n=r.stateNode}if(!n)throw Error(tr(147,e));var i=n,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(tr(284));if(!r._owner)throw Error(tr(290,e))}return e}function fl(e,t){throw e=Object.prototype.toString.call(t),Error(tr(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ml(e){return(0,e._init)(e._payload)}function vl(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ip(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function a(e,t,r,n){return null===t||6!==t.tag?((t=jp(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function l(e,t,r,n){var s=r.type;return s===br?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===Rr&&ml(s)===t.type)?((n=i(t,r.props)).ref=hl(e,t,r),n.return=e,n):((n=kp(r.type,r.key,r.props,null,e.mode,n)).ref=hl(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Op(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=_p(r,e.mode,n,s)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=jp(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case gr:return(r=kp(t.type,t.key,t.props,null,e.mode,r)).ref=hl(e,null,t),r.return=e,r;case yr:return(t=Op(t,e.mode,r)).return=e,t;case Rr:return d(e,(0,t._init)(t._payload),r)}if(Zr(t)||_r(t))return(t=_p(t,e.mode,r,null)).return=e,t;fl(e,t)}return null}function p(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==i?null:a(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case gr:return r.key===i?l(e,t,r,n):null;case yr:return r.key===i?c(e,t,r,n):null;case Rr:return p(e,t,(i=r._init)(r._payload),n)}if(Zr(r)||_r(r))return null!==i?null:u(e,t,r,n,null);fl(e,r)}return null}function h(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return a(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case gr:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i);case yr:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case Rr:return h(e,t,r,(0,n._init)(n._payload),i)}if(Zr(n)||_r(n))return u(t,e=e.get(r)||null,n,i,null);fl(t,n)}return null}return function a(l,c,u,f){if("object"==typeof u&&null!==u&&u.type===br&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case gr:e:{for(var m=u.key,v=c;null!==v;){if(v.key===m){if((m=u.type)===br){if(7===v.tag){r(l,v.sibling),(c=i(v,u.props.children)).return=l,l=c;break e}}else if(v.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Rr&&ml(m)===v.type){r(l,v.sibling),(c=i(v,u.props)).ref=hl(l,v,u),c.return=l,l=c;break e}r(l,v);break}t(l,v),v=v.sibling}u.type===br?((c=_p(u.props.children,l.mode,f,u.key)).return=l,l=c):((f=kp(u.type,u.key,u.props,null,l.mode,f)).ref=hl(l,c,u),f.return=l,l=f)}return o(l);case yr:e:{for(v=u.key;null!==c;){if(c.key===v){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){r(l,c.sibling),(c=i(c,u.children||[])).return=l,l=c;break e}r(l,c);break}t(l,c),c=c.sibling}(c=Op(u,l.mode,f)).return=l,l=c}return o(l);case Rr:return a(l,c,(v=u._init)(u._payload),f)}if(Zr(u))return function(i,o,a,l){for(var c=null,u=null,f=o,m=o=0,v=null;null!==f&&m<a.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var g=p(i,f,a[m],l);if(null===g){null===f&&(f=v);break}e&&f&&null===g.alternate&&t(i,f),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g,f=v}if(m===a.length)return r(i,f),tl&&Ja(i,m),c;if(null===f){for(;m<a.length;m++)null!==(f=d(i,a[m],l))&&(o=s(f,o,m),null===u?c=f:u.sibling=f,u=f);return tl&&Ja(i,m),c}for(f=n(i,f);m<a.length;m++)null!==(v=h(f,i,m,a[m],l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(i,e)}),tl&&Ja(i,m),c}(l,c,u,f);if(_r(u))return function(i,o,a,l){var c=_r(a);if("function"!=typeof c)throw Error(tr(150));if(null==(a=c.call(a)))throw Error(tr(151));for(var u=c=null,f=o,m=o=0,v=null,g=a.next();null!==f&&!g.done;m++,g=a.next()){f.index>m?(v=f,f=null):v=f.sibling;var y=p(i,f,g.value,l);if(null===y){null===f&&(f=v);break}e&&f&&null===y.alternate&&t(i,f),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,f=v}if(g.done)return r(i,f),tl&&Ja(i,m),c;if(null===f){for(;!g.done;m++,g=a.next())null!==(g=d(i,g.value,l))&&(o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return tl&&Ja(i,m),c}for(f=n(i,f);!g.done;m++,g=a.next())null!==(g=h(f,i,m,g.value,l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach(function(e){return t(i,e)}),tl&&Ja(i,m),c}(l,c,u,f);fl(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(r(l,c.sibling),(c=i(c,u)).return=l,l=c):(r(l,c),(c=jp(u,l.mode,f)).return=l,l=c),o(l)):r(l,c)}}var gl=vl(!0),yl=vl(!1),bl=wa(null),xl=null,wl=null,Sl=null;function Cl(){Sl=wl=xl=null}function El(e){var t=bl.current;Sa(bl),e._currentValue=t}function Tl(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Nl(e,t){xl=e,Sl=wl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(mu=!0),e.firstContext=null)}function Pl(e){var t=e._currentValue;if(Sl!==e)if(e={context:e,memoizedValue:t,next:null},null===wl){if(null===xl)throw Error(tr(308));wl=e,xl.dependencies={lanes:0,firstContext:e}}else wl=wl.next=e;return t}var Rl=null;function Il(e){null===Rl?Rl=[e]:Rl.push(e)}function kl(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Il(t)):(r.next=i.next,i.next=r),t.interleaved=r,_l(e,n)}function _l(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Al=!1;function jl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ol(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ml(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&Ed){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,_l(e,r)}return null===(i=n.interleaved)?(t.next=t,Il(n)):(t.next=i.next,i.next=t),n.interleaved=t,_l(e,r)}function Ll(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,mi(e,r)}}function zl(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?i=s=o:s=s.next=o,r=r.next}while(null!==r);null===s?i=s=t:s=s.next=t}else i=s=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Fl(e,t,r,n){var i=e.updateQueue;Al=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var p=a.lane,h=a.eventTime;if((n&p)===p){null!==u&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(p=t,h=r,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(h,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(p="function"==typeof(f=m.payload)?f.call(h,d,p):f))break e;d=jr({},d,p);break e;case 2:Al=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[a]:p.push(a))}else h={eventTime:h,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,o|=p;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ad|=o,e.lanes=o,e.memoizedState=d}}function Bl(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!=typeof i)throw Error(tr(191,i));i.call(n)}}}var Ul={},Wl=wa(Ul),Hl=wa(Ul),$l=wa(Ul);function Vl(e){if(e===Ul)throw Error(tr(174));return e}function ql(e,t){switch(Ca($l,t),Ca(Hl,e),Ca(Wl,Ul),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sn(null,"");break;default:t=sn(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa(Wl),Ca(Wl,t)}function Gl(){Sa(Wl),Sa(Hl),Sa($l)}function Kl(e){Vl($l.current);var t=Vl(Wl.current),r=sn(t,e.type);t!==r&&(Ca(Hl,e),Ca(Wl,r))}function Jl(e){Hl.current===e&&(Sa(Wl),Sa(Hl))}var Yl=wa(0);function Zl(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ql=[];function Xl(){for(var e=0;e<Ql.length;e++)Ql[e]._workInProgressVersionPrimary=null;Ql.length=0}var ec=vr.ReactCurrentDispatcher,tc=vr.ReactCurrentBatchConfig,rc=0,nc=null,ic=null,sc=null,oc=!1,ac=!1,lc=0,cc=0;function uc(){throw Error(tr(321))}function dc(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!no(e[r],t[r]))return!1;return!0}function pc(e,t,r,n,i,s){if(rc=s,nc=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ec.current=null===e||null===e.memoizedState?Jc:Yc,e=r(n,i),ac){s=0;do{if(ac=!1,lc=0,25<=s)throw Error(tr(301));s+=1,sc=ic=null,t.updateQueue=null,ec.current=Zc,e=r(n,i)}while(ac)}if(ec.current=Kc,t=null!==ic&&null!==ic.next,rc=0,sc=ic=nc=null,oc=!1,t)throw Error(tr(300));return e}function hc(){var e=0!==lc;return lc=0,e}function fc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===sc?nc.memoizedState=sc=e:sc=sc.next=e,sc}function mc(){if(null===ic){var e=nc.alternate;e=null!==e?e.memoizedState:null}else e=ic.next;var t=null===sc?nc.memoizedState:sc.next;if(null!==t)sc=t,ic=e;else{if(null===e)throw Error(tr(310));e={memoizedState:(ic=e).memoizedState,baseState:ic.baseState,baseQueue:ic.baseQueue,queue:ic.queue,next:null},null===sc?nc.memoizedState=sc=e:sc=sc.next=e}return sc}function vc(e,t){return"function"==typeof t?t(e):t}function gc(e){var t=mc(),r=t.queue;if(null===r)throw Error(tr(311));r.lastRenderedReducer=e;var n=ic,i=n.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(null!==i){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((rc&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(a=l=d,o=n):l=l.next=d,nc.lanes|=u,Ad|=u}c=c.next}while(null!==c&&c!==s);null===l?o=n:l.next=a,no(n,t.memoizedState)||(mu=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{s=i.lane,nc.lanes|=s,Ad|=s,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function yc(e){var t=mc(),r=t.queue;if(null===r)throw Error(tr(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(null!==i){r.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);no(s,t.memoizedState)||(mu=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function bc(){}function xc(e,t){var r=nc,n=mc(),i=t(),s=!no(n.memoizedState,i);if(s&&(n.memoizedState=i,mu=!0),n=n.queue,Ac(Cc.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==sc&&1&sc.memoizedState.tag){if(r.flags|=2048,Pc(9,Sc.bind(null,r,n,i,t),void 0,null),null===Td)throw Error(tr(349));30&rc||wc(r,t,i)}return i}function wc(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=nc.updateQueue)?(t={lastEffect:null,stores:null},nc.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Sc(e,t,r,n){t.value=r,t.getSnapshot=n,Ec(t)&&Tc(e)}function Cc(e,t,r){return r(function(){Ec(t)&&Tc(e)})}function Ec(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!no(e,r)}catch(n){return!0}}function Tc(e){var t=_l(e,1);null!==t&&Qd(t,e,1,-1)}function Nc(e){var t=fc();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:e},t.queue=e,e=e.dispatch=$c.bind(null,nc,e),[t.memoizedState,e]}function Pc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=nc.updateQueue)?(t={lastEffect:null,stores:null},nc.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Rc(){return mc().memoizedState}function Ic(e,t,r,n){var i=fc();nc.flags|=e,i.memoizedState=Pc(1|t,r,void 0,void 0===n?null:n)}function kc(e,t,r,n){var i=mc();n=void 0===n?null:n;var s=void 0;if(null!==ic){var o=ic.memoizedState;if(s=o.destroy,null!==n&&dc(n,o.deps))return void(i.memoizedState=Pc(t,r,s,n))}nc.flags|=e,i.memoizedState=Pc(1|t,r,s,n)}function _c(e,t){return Ic(8390656,8,e,t)}function Ac(e,t){return kc(2048,8,e,t)}function jc(e,t){return kc(4,2,e,t)}function Oc(e,t){return kc(4,4,e,t)}function Dc(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Mc(e,t,r){return r=null!=r?r.concat([e]):null,kc(4,4,Dc.bind(null,t,e),r)}function Lc(){}function zc(e,t){var r=mc();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&dc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Fc(e,t){var r=mc();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&dc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Bc(e,t,r){return 21&rc?(no(r,t)||(r=pi(),nc.lanes|=r,Ad|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mu=!0),e.memoizedState=r)}function Uc(e,t){var r=vi;vi=0!==r&&4>r?r:4,e(!0);var n=tc.transition;tc.transition={};try{e(!1),t()}finally{vi=r,tc.transition=n}}function Wc(){return mc().memoizedState}function Hc(e,t,r){var n=Zd(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Vc(e))qc(t,r);else if(null!==(r=kl(e,t,r,n))){Qd(r,e,n,Yd()),Gc(r,t,n)}}function $c(e,t,r){var n=Zd(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vc(e))qc(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,no(a,o)){var l=t.interleaved;return null===l?(i.next=i,Il(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(r=kl(e,t,i,n))&&(Qd(r,e,n,i=Yd()),Gc(r,t,n))}}function Vc(e){var t=e.alternate;return e===nc||null!==t&&t===nc}function qc(e,t){ac=oc=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Gc(e,t,r){if(4194240&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,mi(e,r)}}var Kc={readContext:Pl,useCallback:uc,useContext:uc,useEffect:uc,useImperativeHandle:uc,useInsertionEffect:uc,useLayoutEffect:uc,useMemo:uc,useReducer:uc,useRef:uc,useState:uc,useDebugValue:uc,useDeferredValue:uc,useTransition:uc,useMutableSource:uc,useSyncExternalStore:uc,useId:uc,unstable_isNewReconciler:!1},Jc={readContext:Pl,useCallback:function(e,t){return fc().memoizedState=[e,void 0===t?null:t],e},useContext:Pl,useEffect:_c,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Ic(4194308,4,Dc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ic(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ic(4,2,e,t)},useMemo:function(e,t){var r=fc();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=fc();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Hc.bind(null,nc,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},fc().memoizedState=e},useState:Nc,useDebugValue:Lc,useDeferredValue:function(e){return fc().memoizedState=e},useTransition:function(){var e=Nc(!1),t=e[0];return e=Uc.bind(null,e[1]),fc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=nc,i=fc();if(tl){if(void 0===r)throw Error(tr(407));r=r()}else{if(r=t(),null===Td)throw Error(tr(349));30&rc||wc(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,_c(Cc.bind(null,n,s,e),[e]),n.flags|=2048,Pc(9,Sc.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=fc(),t=Td.identifierPrefix;if(tl){var r=Ka;t=":"+t+"R"+(r=(Ga&~(1<<32-ni(Ga)-1)).toString(32)+r),0<(r=lc++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=cc++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Yc={readContext:Pl,useCallback:zc,useContext:Pl,useEffect:Ac,useImperativeHandle:Mc,useInsertionEffect:jc,useLayoutEffect:Oc,useMemo:Fc,useReducer:gc,useRef:Rc,useState:function(){return gc(vc)},useDebugValue:Lc,useDeferredValue:function(e){return Bc(mc(),ic.memoizedState,e)},useTransition:function(){return[gc(vc)[0],mc().memoizedState]},useMutableSource:bc,useSyncExternalStore:xc,useId:Wc,unstable_isNewReconciler:!1},Zc={readContext:Pl,useCallback:zc,useContext:Pl,useEffect:Ac,useImperativeHandle:Mc,useInsertionEffect:jc,useLayoutEffect:Oc,useMemo:Fc,useReducer:yc,useRef:Rc,useState:function(){return yc(vc)},useDebugValue:Lc,useDeferredValue:function(e){var t=mc();return null===ic?t.memoizedState=e:Bc(t,ic.memoizedState,e)},useTransition:function(){return[yc(vc)[0],mc().memoizedState]},useMutableSource:bc,useSyncExternalStore:xc,useId:Wc,unstable_isNewReconciler:!1};function Qc(e,t){if(e&&e.defaultProps){for(var r in t=jr({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function Xc(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:jr({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var eu={isMounted:function(e){return!!(e=e._reactInternals)&&Fn(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Yd(),i=Zd(e),s=Dl(n,i);s.payload=t,null!=r&&(s.callback=r),null!==(t=Ml(e,s,i))&&(Qd(t,e,i,n),Ll(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Yd(),i=Zd(e),s=Dl(n,i);s.tag=1,s.payload=t,null!=r&&(s.callback=r),null!==(t=Ml(e,s,i))&&(Qd(t,e,i,n),Ll(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Yd(),n=Zd(e),i=Dl(r,n);i.tag=2,null!=t&&(i.callback=t),null!==(t=Ml(e,i,n))&&(Qd(t,e,n,r),Ll(t,e,n))}};function tu(e,t,r,n,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!io(r,n)||!io(i,s))}function ru(e,t,r){var n=!1,i=Ea,s=t.contextType;return"object"==typeof s&&null!==s?s=Pl(s):(i=Ia(t)?Pa:Ta.current,s=(n=null!=(n=t.contextTypes))?Ra(e,i):Ea),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=eu,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function nu(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&eu.enqueueReplaceState(t,t.state,null)}function iu(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},jl(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Pl(s):(s=Ia(t)?Pa:Ta.current,i.context=Ra(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(Xc(e,t,s,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&eu.enqueueReplaceState(i,i.state,null),Fl(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function su(e,t){try{var r="",n=t;do{r+=Lr(n),n=n.return}while(n);var i=r}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ou(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function au(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var lu="function"==typeof WeakMap?WeakMap:Map;function cu(e,t,r){(r=Dl(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Bd||(Bd=!0,Ud=n),au(0,t)},r}function uu(e,t,r){(r=Dl(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){au(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(r.callback=function(){au(0,t),"function"!=typeof n&&(null===Wd?Wd=new Set([this]):Wd.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function du(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new lu;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=wp.bind(null,e,t,r),t.then(e,e))}function pu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hu(e,t,r,n,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Dl(-1,1)).tag=2,Ml(r,t,1))),r.lanes|=1),e)}var fu=vr.ReactCurrentOwner,mu=!1;function vu(e,t,r,n){t.child=null===e?yl(t,null,r,n):gl(t,e.child,r,n)}function gu(e,t,r,n,i){r=r.render;var s=t.ref;return Nl(t,i),n=pc(e,t,r,n,s,i),r=hc(),null===e||mu?(tl&&r&&Za(t),t.flags|=1,vu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bu(e,t,i))}function yu(e,t,r,n,i){if(null===e){var s=r.type;return"function"!=typeof s||Rp(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=kp(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,bu(e,t,s,n,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((r=null!==(r=r.compare)?r:io)(o,n)&&e.ref===t.ref)return Bu(e,t,i)}return t.flags|=1,(e=Ip(s,n)).ref=t.ref,e.return=t,t.child=e}function bu(e,t,r,n,i){if(null!==e){var s=e.memoizedProps;if(io(s,n)&&e.ref===t.ref){if(mu=!1,t.pendingProps=n=s,0===(e.lanes&i))return t.lanes=e.lanes,Bu(e,t,i);131072&e.flags&&(mu=!0)}}return Su(e,t,r,n,i)}function xu(e,t,r){var n=t.pendingProps,i=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(1&t.mode){if(!(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ca(Id,Rd),Rd|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Ca(Id,Rd),Rd|=n}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(Id,Rd),Rd|=r;else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Ca(Id,Rd),Rd|=n;return vu(e,t,i,r),t.child}function wu(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,r,n,i){var s=Ia(r)?Pa:Ta.current;return s=Ra(t,s),Nl(t,i),r=pc(e,t,r,n,s,i),n=hc(),null===e||mu?(tl&&n&&Za(t),t.flags|=1,vu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bu(e,t,i))}function Cu(e,t,r,n,i){if(Ia(r)){var s=!0;ja(t)}else s=!1;if(Nl(t,i),null===t.stateNode)Fu(e,t),ru(t,r,n),iu(t,r,n,i),n=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;"object"==typeof c&&null!==c?c=Pl(c):c=Ra(t,c=Ia(r)?Pa:Ta.current);var u=r.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==n||l!==c)&&nu(t,o,n,c),Al=!1;var p=t.memoizedState;o.state=p,Fl(t,n,o,i),l=t.memoizedState,a!==n||p!==l||Na.current||Al?("function"==typeof u&&(Xc(t,r,u,n),l=t.memoizedState),(a=Al||tu(t,r,a,n,p,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Ol(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Qc(t.type,a),o.props=c,d=t.pendingProps,p=o.context,"object"==typeof(l=r.contextType)&&null!==l?l=Pl(l):l=Ra(t,l=Ia(r)?Pa:Ta.current);var h=r.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||p!==l)&&nu(t,o,n,l),Al=!1,p=t.memoizedState,o.state=p,Fl(t,n,o,i);var f=t.memoizedState;a!==d||p!==f||Na.current||Al?("function"==typeof h&&(Xc(t,r,h,n),f=t.memoizedState),(c=Al||tu(t,r,c,n,p,f,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),o.props=n,o.state=f,o.context=l,n=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Eu(e,t,r,n,s,i)}function Eu(e,t,r,n,i,s){wu(e,t);var o=!!(128&t.flags);if(!n&&!o)return i&&Oa(t,r,!1),Bu(e,t,s);n=t.stateNode,fu.current=t;var a=o&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=gl(t,e.child,null,s),t.child=gl(t,null,a,s)):vu(e,t,a,s),t.memoizedState=n.state,i&&Oa(t,r,!0),t.child}function Tu(e){var t=e.stateNode;t.pendingContext?_a(0,t.pendingContext,t.pendingContext!==t.context):t.context&&_a(0,t.context,!1),ql(e,t.containerInfo)}function Nu(e,t,r,n,i){return ul(),dl(i),t.flags|=256,vu(e,t,r,n),t.child}var Pu,Ru,Iu,ku,_u={dehydrated:null,treeContext:null,retryLane:0};function Au(e){return{baseLanes:e,cachePool:null,transitions:null}}function ju(e,t,r){var n,i=t.pendingProps,s=Yl.current,o=!1,a=!!(128&t.flags);if((n=a)||(n=(null===e||null!==e.memoizedState)&&!!(2&s)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ca(Yl,1&s),null===e)return ol(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},1&i||null===o?o=Ap(a,i,0,null):(o.childLanes=0,o.pendingProps=a),e=_p(e,i,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Au(r),t.memoizedState=_u,e):Ou(t,a));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,i,s,o){if(r)return 256&t.flags?(t.flags&=-257,Du(e,t,o,n=ou(Error(tr(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=Ap({mode:"visible",children:n.children},i,0,null),(s=_p(s,i,o,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,1&t.mode&&gl(t,e.child,null,o),t.child.memoizedState=Au(o),t.memoizedState=_u,s);if(!(1&t.mode))return Du(e,t,o,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var a=n.dgst;return n=a,Du(e,t,o,n=ou(s=Error(tr(419)),n,void 0))}if(a=0!==(o&e.childLanes),mu||a){if(null!==(n=Td)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,_l(e,i),Qd(n,e,i,-1))}return dp(),Du(e,t,o,n=ou(Error(tr(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cp.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,el=oa(i.nextSibling),Xa=t,tl=!0,rl=null,null!==e&&($a[Va++]=Ga,$a[Va++]=Ka,$a[Va++]=qa,Ga=e.id,Ka=e.overflow,qa=t),t=Ou(t,n.children),t.flags|=4096,t)}(e,t,a,i,n,s,r);if(o){o=i.fallback,a=t.mode,n=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&a||t.child===s?(i=Ip(s,l)).subtreeFlags=14680064&s.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==n?o=Ip(n,o):(o=_p(o,a,r,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,a=null===(a=e.child.memoizedState)?Au(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=_u,i}return e=(o=e.child).sibling,i=Ip(o,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Ou(e,t){return(t=Ap({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Du(e,t,r,n){return null!==n&&dl(n),gl(t,e.child,null,r),(e=Ou(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Tl(e.return,t,r)}function Lu(e,t,r,n,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function zu(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(vu(e,t,n.children,r),2&(n=Yl.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,r,t);else if(19===e.tag)Mu(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ca(Yl,n),1&t.mode)switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===Zl(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Lu(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Zl(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Lu(t,!0,r,null,s);break;case"together":Lu(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Fu(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bu(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ad|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(tr(153));if(null!==t.child){for(r=Ip(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ip(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Uu(e,t){if(!tl)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Hu(e,t,r){var n=t.pendingProps;switch(Qa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Ia(t.type)&&ka(),Wu(t),null;case 3:return n=t.stateNode,Gl(),Sa(Na),Sa(Ta),Xl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ll(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==rl&&(rp(rl),rl=null))),Ru(e,t),Wu(t),null;case 5:Jl(t);var i=Vl($l.current);if(r=t.type,null!==e&&null!=t.stateNode)Iu(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(tr(166));return Wu(t),null}if(e=Vl(Wl.current),ll(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[ca]=t,n[ua]=s,e=!!(1&t.mode),r){case"dialog":Mo("cancel",n),Mo("close",n);break;case"iframe":case"object":case"embed":Mo("load",n);break;case"video":case"audio":for(i=0;i<Ao.length;i++)Mo(Ao[i],n);break;case"source":Mo("error",n);break;case"img":case"image":case"link":Mo("error",n),Mo("load",n);break;case"details":Mo("toggle",n);break;case"input":qr(n,s),Mo("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Mo("invalid",n);break;case"textarea":en(n,s),Mo("invalid",n)}for(var o in mn(r,s),i=null,s)if(s.hasOwnProperty(o)){var a=s[o];"children"===o?"string"==typeof a?n.textContent!==a&&(!0!==s.suppressHydrationWarning&&Jo(n.textContent,a,e),i=["children",a]):"number"==typeof a&&n.textContent!==""+a&&(!0!==s.suppressHydrationWarning&&Jo(n.textContent,a,e),i=["children",""+a]):nr.hasOwnProperty(o)&&null!=a&&"onScroll"===o&&Mo("scroll",n)}switch(r){case"input":Wr(n),Jr(n,s,!0);break;case"textarea":Wr(n),rn(n);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(n.onclick=Yo)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{o=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=nn(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),"select"===r&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ca]=t,e[ua]=n,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(o=vn(r,n),r){case"dialog":Mo("cancel",e),Mo("close",e),i=n;break;case"iframe":case"object":case"embed":Mo("load",e),i=n;break;case"video":case"audio":for(i=0;i<Ao.length;i++)Mo(Ao[i],e);i=n;break;case"source":Mo("error",e),i=n;break;case"img":case"image":case"link":Mo("error",e),Mo("load",e),i=n;break;case"details":Mo("toggle",e),i=n;break;case"input":qr(e,n),i=Vr(e,n),Mo("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=jr({},n,{value:void 0}),Mo("invalid",e);break;case"textarea":en(e,n),i=Xr(e,n),Mo("invalid",e)}for(s in mn(r,i),a=i)if(a.hasOwnProperty(s)){var l=a[s];"style"===s?hn(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&ln(e,l):"children"===s?"string"==typeof l?("textarea"!==r||""!==l)&&cn(e,l):"number"==typeof l&&cn(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(nr.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Mo("scroll",e):null!=l&&mr(e,s,l,o))}switch(r){case"input":Wr(e),Jr(e,n,!1);break;case"textarea":Wr(e),rn(e);break;case"option":null!=n.value&&e.setAttribute("value",""+Br(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?Qr(e,!!n.multiple,s,!1):null!=n.defaultValue&&Qr(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Yo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)ku(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(tr(166));if(r=Vl($l.current),Vl(Wl.current),ll(t)){if(n=t.stateNode,r=t.memoizedProps,n[ca]=t,(s=n.nodeValue!==r)&&null!==(e=Xa))switch(e.tag){case 3:Jo(n.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jo(n.nodeValue,r,!!(1&e.mode))}s&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ca]=t,t.stateNode=n}return Wu(t),null;case 13:if(Sa(Yl),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(tl&&null!==el&&1&t.mode&&!(128&t.flags))cl(),ul(),t.flags|=98560,s=!1;else if(s=ll(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(tr(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(tr(317));s[ca]=t}else ul(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),s=!1}else null!==rl&&(rp(rl),rl=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Yl.current?0===kd&&(kd=3):dp())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return Gl(),Ru(e,t),null===e&&Fo(t.stateNode.containerInfo),Wu(t),null;case 10:return El(t.type._context),Wu(t),null;case 19:if(Sa(Yl),null===(s=t.memoizedState))return Wu(t),null;if(n=!!(128&t.flags),null===(o=s.rendering))if(n)Uu(s,!1);else{if(0!==kd||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=Zl(e))){for(t.flags|=128,Uu(s,!1),null!==(n=o.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=14680066,null===(o=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ca(Yl,1&Yl.current|2),t.child}e=e.sibling}null!==s.tail&&Kn()>zd&&(t.flags|=128,n=!0,Uu(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Zl(o))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Uu(s,!0),null===s.tail&&"hidden"===s.tailMode&&!o.alternate&&!tl)return Wu(t),null}else 2*Kn()-s.renderingStartTime>zd&&1073741824!==r&&(t.flags|=128,n=!0,Uu(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(null!==(r=s.last)?r.sibling=o:t.child=o,s.last=o)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Kn(),t.sibling=null,r=Yl.current,Ca(Yl,n?1&r|2:1&r),t):(Wu(t),null);case 22:case 23:return ap(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&1&t.mode?!!(1073741824&Rd)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(tr(156,t.tag))}function $u(e,t){switch(Qa(t),t.tag){case 1:return Ia(t.type)&&ka(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gl(),Sa(Na),Sa(Ta),Xl(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jl(t),null;case 13:if(Sa(Yl),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(tr(340));ul()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(Yl),null;case 4:return Gl(),null;case 10:return El(t.type._context),null;case 22:case 23:return ap(),null;default:return null}}Pu=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ru=function(){},Iu=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Vl(Wl.current);var s,o=null;switch(r){case"input":i=Vr(e,i),n=Vr(e,n),o=[];break;case"select":i=jr({},i,{value:void 0}),n=jr({},n,{value:void 0}),o=[];break;case"textarea":i=Xr(e,i),n=Xr(e,n),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=Yo)}for(c in mn(r,n),r=null,i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(nr.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var l=n[c];if(a=null!=i?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(null!=l||null!=a))if("style"===c)if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(c,r)),r=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(nr.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Mo("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},ku=function(e,t,r,n){r!==n&&(t.flags|=4)};var Vu=!1,qu=!1,Gu="function"==typeof WeakSet?WeakSet:Set,Ku=null;function Ju(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(n){xp(e,t,n)}else r.current=null}function Yu(e,t,r){try{r()}catch(n){xp(e,t,n)}}var Zu=!1;function Qu(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Yu(t,r,s)}i=i.next}while(i!==n)}}function Xu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ed(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function td(e){var t=e.alternate;null!==t&&(e.alternate=null,td(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ca],delete t[ua],delete t[pa],delete t[ha],delete t[fa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rd(e){return 5===e.tag||3===e.tag||4===e.tag}function nd(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function id(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Yo));else if(4!==n&&null!==(e=e.child))for(id(e,t,r),e=e.sibling;null!==e;)id(e,t,r),e=e.sibling}function sd(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(sd(e,t,r),e=e.sibling;null!==e;)sd(e,t,r),e=e.sibling}var od=null,ad=!1;function ld(e,t,r){for(r=r.child;null!==r;)cd(e,t,r),r=r.sibling}function cd(e,t,r){if(ri&&"function"==typeof ri.onCommitFiberUnmount)try{ri.onCommitFiberUnmount(ti,r)}catch(a){}switch(r.tag){case 5:qu||Ju(r,t);case 6:var n=od,i=ad;od=null,ld(e,t,r),ad=i,null!==(od=n)&&(ad?(e=od,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):od.removeChild(r.stateNode));break;case 18:null!==od&&(ad?(e=od,r=r.stateNode,8===e.nodeType?sa(e.parentNode,r):1===e.nodeType&&sa(e,r),Fi(e)):sa(od,r.stateNode));break;case 4:n=od,i=ad,od=r.stateNode.containerInfo,ad=!0,ld(e,t,r),od=n,ad=i;break;case 0:case 11:case 14:case 15:if(!qu&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(2&s||4&s)&&Yu(r,t,o),i=i.next}while(i!==n)}ld(e,t,r);break;case 1:if(!qu&&(Ju(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){xp(r,t,a)}ld(e,t,r);break;case 21:ld(e,t,r);break;case 22:1&r.mode?(qu=(n=qu)||null!==r.memoizedState,ld(e,t,r),qu=n):ld(e,t,r);break;default:ld(e,t,r)}}function ud(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Gu),t.forEach(function(t){var n=Ep.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function dd(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;null!==a;){switch(a.tag){case 5:od=a.stateNode,ad=!1;break e;case 3:case 4:od=a.stateNode.containerInfo,ad=!0;break e}a=a.return}if(null===od)throw Error(tr(160));cd(s,o,i),od=null,ad=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){xp(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pd(t,e),t=t.sibling}function pd(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dd(t,e),hd(e),4&n){try{Qu(3,e,e.return),Xu(3,e)}catch(m){xp(e,e.return,m)}try{Qu(5,e,e.return)}catch(m){xp(e,e.return,m)}}break;case 1:dd(t,e),hd(e),512&n&&null!==r&&Ju(r,r.return);break;case 5:if(dd(t,e),hd(e),512&n&&null!==r&&Ju(r,r.return),32&e.flags){var i=e.stateNode;try{cn(i,"")}catch(m){xp(e,e.return,m)}}if(4&n&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==r?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===a&&"radio"===s.type&&null!=s.name&&Gr(i,s),vn(a,o);var c=vn(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];"style"===u?hn(i,d):"dangerouslySetInnerHTML"===u?ln(i,d):"children"===u?cn(i,d):mr(i,u,d,c)}switch(a){case"input":Kr(i,s);break;case"textarea":tn(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;null!=h?Qr(i,!!s.multiple,h,!1):p!==!!s.multiple&&(null!=s.defaultValue?Qr(i,!!s.multiple,s.defaultValue,!0):Qr(i,!!s.multiple,s.multiple?[]:"",!1))}i[ua]=s}catch(m){xp(e,e.return,m)}}break;case 6:if(dd(t,e),hd(e),4&n){if(null===e.stateNode)throw Error(tr(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){xp(e,e.return,m)}}break;case 3:if(dd(t,e),hd(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Fi(t.containerInfo)}catch(m){xp(e,e.return,m)}break;case 4:default:dd(t,e),hd(e);break;case 13:dd(t,e),hd(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Ld=Kn())),4&n&&ud(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(qu=(c=qu)||u,dd(t,e),qu=c):dd(t,e),hd(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Ku=e,u=e.child;null!==u;){for(d=Ku=u;null!==Ku;){switch(h=(p=Ku).child,p.tag){case 0:case 11:case 14:case 15:Qu(4,p,p.return);break;case 1:Ju(p,p.return);var f=p.stateNode;if("function"==typeof f.componentWillUnmount){n=p,r=p.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){xp(n,r,m)}}break;case 5:Ju(p,p.return);break;case 22:if(null!==p.memoizedState){gd(d);continue}}null!==h?(h.return=p,Ku=h):gd(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{i=d.stateNode,c?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(a=d.stateNode,o=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,a.style.display=pn("display",o))}catch(m){xp(e,e.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){xp(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dd(t,e),hd(e),4&n&&ud(e);case 21:}}function hd(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(rd(r)){var n=r;break e}r=r.return}throw Error(tr(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(cn(i,""),n.flags&=-33),sd(e,nd(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;id(e,nd(e),s);break;default:throw Error(tr(161))}}catch(o){xp(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function fd(e,t,r){Ku=e,md(e)}function md(e,t,r){for(var n=!!(1&e.mode);null!==Ku;){var i=Ku,s=i.child;if(22===i.tag&&n){var o=null!==i.memoizedState||Vu;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||qu;a=Vu;var c=qu;if(Vu=o,(qu=l)&&!c)for(Ku=i;null!==Ku;)l=(o=Ku).child,22===o.tag&&null!==o.memoizedState?yd(i):null!==l?(l.return=o,Ku=l):yd(i);for(;null!==s;)Ku=s,md(s),s=s.sibling;Ku=i,Vu=a,qu=c}vd(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,Ku=s):vd(e)}}function vd(e){for(;null!==Ku;){var t=Ku;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:qu||Xu(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!qu)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Qc(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Bl(t,s,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Bl(t,o,r)}break;case 5:var a=t.stateNode;if(null===r&&4&t.flags){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Fi(d)}}}break;default:throw Error(tr(163))}qu||512&t.flags&&ed(t)}catch(p){xp(t,t.return,p)}}if(t===e){Ku=null;break}if(null!==(r=t.sibling)){r.return=t.return,Ku=r;break}Ku=t.return}}function gd(e){for(;null!==Ku;){var t=Ku;if(t===e){Ku=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Ku=r;break}Ku=t.return}}function yd(e){for(;null!==Ku;){var t=Ku;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Xu(4,t)}catch(l){xp(t,r,l)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(l){xp(t,i,l)}}var s=t.return;try{ed(t)}catch(l){xp(t,s,l)}break;case 5:var o=t.return;try{ed(t)}catch(l){xp(t,o,l)}}}catch(l){xp(t,t.return,l)}if(t===e){Ku=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ku=a;break}Ku=t.return}}var bd,xd=Math.ceil,wd=vr.ReactCurrentDispatcher,Sd=vr.ReactCurrentOwner,Cd=vr.ReactCurrentBatchConfig,Ed=0,Td=null,Nd=null,Pd=0,Rd=0,Id=wa(0),kd=0,_d=null,Ad=0,jd=0,Od=0,Dd=null,Md=null,Ld=0,zd=1/0,Fd=null,Bd=!1,Ud=null,Wd=null,Hd=!1,$d=null,Vd=0,qd=0,Gd=null,Kd=-1,Jd=0;function Yd(){return 6&Ed?Kn():-1!==Kd?Kd:Kd=Kn()}function Zd(e){return 1&e.mode?2&Ed&&0!==Pd?Pd&-Pd:null!==pl.transition?(0===Jd&&(Jd=pi()),Jd):0!==(e=vi)?e:e=void 0===(e=window.event)?16:Gi(e.type):1}function Qd(e,t,r,n){if(50<qd)throw qd=0,Gd=null,Error(tr(185));fi(e,r,n),2&Ed&&e===Td||(e===Td&&(!(2&Ed)&&(jd|=r),4===kd&&np(e,Pd)),Xd(e,n),1===r&&0===Ed&&!(1&t.mode)&&(zd=Kn()+500,Ma&&Fa()))}function Xd(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ni(s),a=1<<o,l=i[o];-1===l?0!==(a&r)&&0===(a&n)||(i[o]=ui(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var n=ci(e,e===Td?Pd:0);if(0===n)null!==r&&Vn(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Vn(r),1===t)0===e.tag?function(e){Ma=!0,za(e)}(ip.bind(null,e)):za(ip.bind(null,e)),na(function(){!(6&Ed)&&Fa()}),r=null;else{switch(gi(n)){case 1:r=Yn;break;case 4:r=Zn;break;case 16:default:r=Qn;break;case 536870912:r=ei}r=Tp(r,ep.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ep(e,t){if(Kd=-1,Jd=0,6&Ed)throw Error(tr(327));var r=e.callbackNode;if(yp()&&e.callbackNode!==r)return null;var n=ci(e,e===Td?Pd:0);if(0===n)return null;if(30&n||0!==(n&e.expiredLanes)||t)t=pp(e,n);else{t=n;var i=Ed;Ed|=2;var s=up();for(Td===e&&Pd===t||(Fd=null,zd=Kn()+500,lp(e,t));;)try{fp();break}catch(a){cp(e,a)}Cl(),wd.current=s,Ed=i,null!==Nd?t=0:(Td=null,Pd=0,t=kd)}if(0!==t){if(2===t&&(0!==(i=di(e))&&(n=i,t=tp(e,i))),1===t)throw r=_d,lp(e,0),np(e,n),Xd(e,Kn()),r;if(6===t)np(e,n);else{if(i=e.current.alternate,!(30&n||function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!no(s(),i))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=pp(e,n),2===t&&(s=di(e),0!==s&&(n=s,t=tp(e,s))),1!==t)))throw r=_d,lp(e,0),np(e,n),Xd(e,Kn()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(tr(345));case 2:case 5:gp(e,Md,Fd);break;case 3:if(np(e,n),(130023424&n)===n&&10<(t=Ld+500-Kn())){if(0!==ci(e,0))break;if(((i=e.suspendedLanes)&n)!==n){Yd(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ea(gp.bind(null,e,Md,Fd),t);break}gp(e,Md,Fd);break;case 4:if(np(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-ni(n);s=1<<o,(o=t[o])>i&&(i=o),n&=~s}if(n=i,10<(n=(120>(n=Kn()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xd(n/1960))-n)){e.timeoutHandle=ea(gp.bind(null,e,Md,Fd),n);break}gp(e,Md,Fd);break;default:throw Error(tr(329))}}}return Xd(e,Kn()),e.callbackNode===r?ep.bind(null,e):null}function tp(e,t){var r=Dd;return e.current.memoizedState.isDehydrated&&(lp(e,t).flags|=256),2!==(e=pp(e,t))&&(t=Md,Md=r,null!==t&&rp(t)),e}function rp(e){null===Md?Md=e:Md.push.apply(Md,e)}function np(e,t){for(t&=~Od,t&=~jd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ni(t),n=1<<r;e[r]=-1,t&=~n}}function ip(e){if(6&Ed)throw Error(tr(327));yp();var t=ci(e,0);if(!(1&t))return Xd(e,Kn()),null;var r=pp(e,t);if(0!==e.tag&&2===r){var n=di(e);0!==n&&(t=n,r=tp(e,n))}if(1===r)throw r=_d,lp(e,0),np(e,t),Xd(e,Kn()),r;if(6===r)throw Error(tr(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gp(e,Md,Fd),Xd(e,Kn()),null}function sp(e,t){var r=Ed;Ed|=1;try{return e(t)}finally{0===(Ed=r)&&(zd=Kn()+500,Ma&&Fa())}}function op(e){null!==$d&&0===$d.tag&&!(6&Ed)&&yp();var t=Ed;Ed|=1;var r=Cd.transition,n=vi;try{if(Cd.transition=null,vi=1,e)return e()}finally{vi=n,Cd.transition=r,!(6&(Ed=t))&&Fa()}}function ap(){Rd=Id.current,Sa(Id)}function lp(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ta(r)),null!==Nd)for(r=Nd.return;null!==r;){var n=r;switch(Qa(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&ka();break;case 3:Gl(),Sa(Na),Sa(Ta),Xl();break;case 5:Jl(n);break;case 4:Gl();break;case 13:case 19:Sa(Yl);break;case 10:El(n.type._context);break;case 22:case 23:ap()}r=r.return}if(Td=e,Nd=e=Ip(e.current,null),Pd=Rd=t,kd=0,_d=null,Od=jd=Ad=0,Md=Dd=null,null!==Rl){for(t=0;t<Rl.length;t++)if(null!==(n=(r=Rl[t]).interleaved)){r.interleaved=null;var i=n.next,s=r.pending;if(null!==s){var o=s.next;s.next=i,n.next=o}r.pending=n}Rl=null}return e}function cp(e,t){for(;;){var r=Nd;try{if(Cl(),ec.current=Kc,oc){for(var n=nc.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}oc=!1}if(rc=0,sc=ic=nc=null,ac=!1,lc=0,Sd.current=null,null===r||null===r.return){kd=1,_d=t,Nd=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=Pd,a.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=a,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=pu(o);if(null!==h){h.flags&=-257,hu(h,o,a,0,t),1&h.mode&&du(s,c,t),l=c;var f=(t=h).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(!(1&t)){du(s,c,t),dp();break e}l=Error(tr(426))}else if(tl&&1&a.mode){var v=pu(o);if(null!==v){!(65536&v.flags)&&(v.flags|=256),hu(v,o,a,0,t),dl(su(l,a));break e}}s=l=su(l,a),4!==kd&&(kd=2),null===Dd?Dd=[s]:Dd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,zl(s,cu(0,l,t));break e;case 1:a=l;var g=s.type,y=s.stateNode;if(!(128&s.flags||"function"!=typeof g.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==Wd&&Wd.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,zl(s,uu(s,a,t));break e}}s=s.return}while(null!==s)}vp(r)}catch(b){t=b,Nd===r&&null!==r&&(Nd=r=r.return);continue}break}}function up(){var e=wd.current;return wd.current=Kc,null===e?Kc:e}function dp(){0!==kd&&3!==kd&&2!==kd||(kd=4),null===Td||!(268435455&Ad)&&!(268435455&jd)||np(Td,Pd)}function pp(e,t){var r=Ed;Ed|=2;var n=up();for(Td===e&&Pd===t||(Fd=null,lp(e,t));;)try{hp();break}catch(i){cp(e,i)}if(Cl(),Ed=r,wd.current=n,null!==Nd)throw Error(tr(261));return Td=null,Pd=0,kd}function hp(){for(;null!==Nd;)mp(Nd)}function fp(){for(;null!==Nd&&!qn();)mp(Nd)}function mp(e){var t=bd(e.alternate,e,Rd);e.memoizedProps=e.pendingProps,null===t?vp(e):Nd=t,Sd.current=null}function vp(e){var t=e;do{var r=t.alternate;if(e=t.return,32768&t.flags){if(null!==(r=$u(r,t)))return r.flags&=32767,void(Nd=r);if(null===e)return kd=6,void(Nd=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(r=Hu(r,t,Rd)))return void(Nd=r);if(null!==(t=t.sibling))return void(Nd=t);Nd=t=e}while(null!==t);0===kd&&(kd=5)}function gp(e,t,r){var n=vi,i=Cd.transition;try{Cd.transition=null,vi=1,function(e,t,r,n){do{yp()}while(null!==$d);if(6&Ed)throw Error(tr(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(tr(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ni(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}(e,s),e===Td&&(Nd=Td=null,Pd=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Hd||(Hd=!0,Tp(Qn,function(){return yp(),null})),s=!!(15990&r.flags),!!(15990&r.subtreeFlags)||s){s=Cd.transition,Cd.transition=null;var o=vi;vi=1;var a=Ed;Ed|=4,Sd.current=null,function(e,t){if(Zo=Ui,co(e=lo())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(x){r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,p=null;t:for(;;){for(var h;d!==r||0!==i&&3!==d.nodeType||(a=o+i),d!==s||0!==n&&3!==d.nodeType||(l=o+n),3===d.nodeType&&(o+=d.nodeValue.length),null!==(h=d.firstChild);)p=d,d=h;for(;;){if(d===e)break t;if(p===r&&++c===i&&(a=o),p===s&&++u===n&&(l=o),null!==(h=d.nextSibling))break;p=(d=p).parentNode}d=h}r=-1===a||-1===l?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qo={focusedElem:e,selectionRange:r},Ui=!1,Ku=t;null!==Ku;)if(e=(t=Ku).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ku=e;else for(;null!==Ku;){t=Ku;try{var f=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,v=f.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Qc(t.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(tr(163))}}catch(x){xp(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ku=e;break}Ku=t.return}f=Zu,Zu=!1}(e,r),pd(r,e),uo(Qo),Ui=!!Zo,Qo=Zo=null,e.current=r,fd(r),Gn(),Ed=a,vi=o,Cd.transition=s}else e.current=r;if(Hd&&(Hd=!1,$d=e,Vd=i),s=e.pendingLanes,0===s&&(Wd=null),function(e){if(ri&&"function"==typeof ri.onCommitFiberRoot)try{ri.onCommitFiberRoot(ti,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),Xd(e,Kn()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Bd)throw Bd=!1,e=Ud,Ud=null,e;!!(1&Vd)&&0!==e.tag&&yp(),s=e.pendingLanes,1&s?e===Gd?qd++:(qd=0,Gd=e):qd=0,Fa()}(e,t,r,n)}finally{Cd.transition=i,vi=n}return null}function yp(){if(null!==$d){var e=gi(Vd),t=Cd.transition,r=vi;try{if(Cd.transition=null,vi=16>e?16:e,null===$d)var n=!1;else{if(e=$d,$d=null,Vd=0,6&Ed)throw Error(tr(331));var i=Ed;for(Ed|=4,Ku=e.current;null!==Ku;){var s=Ku,o=s.child;if(16&Ku.flags){var a=s.deletions;if(null!==a){for(var l=0;l<a.length;l++){var c=a[l];for(Ku=c;null!==Ku;){var u=Ku;switch(u.tag){case 0:case 11:case 15:Qu(8,u,s)}var d=u.child;if(null!==d)d.return=u,Ku=d;else for(;null!==Ku;){var p=(u=Ku).sibling,h=u.return;if(td(u),u===c){Ku=null;break}if(null!==p){p.return=h,Ku=p;break}Ku=h}}}var f=s.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Ku=s}}if(2064&s.subtreeFlags&&null!==o)o.return=s,Ku=o;else e:for(;null!==Ku;){if(2048&(s=Ku).flags)switch(s.tag){case 0:case 11:case 15:Qu(9,s,s.return)}var g=s.sibling;if(null!==g){g.return=s.return,Ku=g;break e}Ku=s.return}}var y=e.current;for(Ku=y;null!==Ku;){var b=(o=Ku).child;if(2064&o.subtreeFlags&&null!==b)b.return=o,Ku=b;else e:for(o=y;null!==Ku;){if(2048&(a=Ku).flags)try{switch(a.tag){case 0:case 11:case 15:Xu(9,a)}}catch(w){xp(a,a.return,w)}if(a===o){Ku=null;break e}var x=a.sibling;if(null!==x){x.return=a.return,Ku=x;break e}Ku=a.return}}if(Ed=i,Fa(),ri&&"function"==typeof ri.onPostCommitFiberRoot)try{ri.onPostCommitFiberRoot(ti,e)}catch(w){}n=!0}return n}finally{vi=r,Cd.transition=t}}return!1}function bp(e,t,r){e=Ml(e,t=cu(0,t=su(r,t),1),1),t=Yd(),null!==e&&(fi(e,1,t),Xd(e,t))}function xp(e,t,r){if(3===e.tag)bp(e,e,r);else for(;null!==t;){if(3===t.tag){bp(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Wd||!Wd.has(n))){t=Ml(t,e=uu(t,e=su(r,e),1),1),e=Yd(),null!==t&&(fi(t,1,e),Xd(t,e));break}}t=t.return}}function wp(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=Yd(),e.pingedLanes|=e.suspendedLanes&r,Td===e&&(Pd&r)===r&&(4===kd||3===kd&&(130023424&Pd)===Pd&&500>Kn()-Ld?lp(e,0):Od|=r),Xd(e,t)}function Sp(e,t){0===t&&(1&e.mode?(t=ai,!(130023424&(ai<<=1))&&(ai=4194304)):t=1);var r=Yd();null!==(e=_l(e,t))&&(fi(e,t,r),Xd(e,r))}function Cp(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sp(e,r)}function Ep(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(tr(314))}null!==n&&n.delete(t),Sp(e,r)}function Tp(e,t){return $n(e,t)}function Np(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pp(e,t,r,n){return new Np(e,t,r,n)}function Rp(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ip(e,t){var r=e.alternate;return null===r?((r=Pp(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function kp(e,t,r,n,i,s){var o=2;if(n=e,"function"==typeof e)Rp(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case br:return _p(r.children,i,s,t);case xr:o=8,i|=8;break;case wr:return(e=Pp(12,r,t,2|i)).elementType=wr,e.lanes=s,e;case Tr:return(e=Pp(13,r,t,i)).elementType=Tr,e.lanes=s,e;case Nr:return(e=Pp(19,r,t,i)).elementType=Nr,e.lanes=s,e;case Ir:return Ap(r,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Sr:o=10;break e;case Cr:o=9;break e;case Er:o=11;break e;case Pr:o=14;break e;case Rr:o=16,n=null;break e}throw Error(tr(130,null==e?e:typeof e,""))}return(t=Pp(o,r,t,i)).elementType=e,t.type=n,t.lanes=s,t}function _p(e,t,r,n){return(e=Pp(7,e,n,t)).lanes=r,e}function Ap(e,t,r,n){return(e=Pp(22,e,n,t)).elementType=Ir,e.lanes=r,e.stateNode={isHidden:!1},e}function jp(e,t,r){return(e=Pp(6,e,null,t)).lanes=r,e}function Op(e,t,r){return(t=Pp(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dp(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hi(0),this.expirationTimes=hi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mp(e,t,r,n,i,s,o,a,l){return e=new Dp(e,t,r,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pp(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},jl(s),e}function Lp(e){if(!e)return Ea;e:{if(Fn(e=e._reactInternals)!==e||1!==e.tag)throw Error(tr(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ia(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(tr(171))}if(1===e.tag){var r=e.type;if(Ia(r))return Aa(e,r,t)}return t}function zp(e,t,r,n,i,s,o,a,l){return(e=Mp(r,n,!0,e,0,s,0,a,l)).context=Lp(null),r=e.current,(s=Dl(n=Yd(),i=Zd(r))).callback=null!=t?t:null,Ml(r,s,i),e.current.lanes=i,fi(e,i,n),Xd(e,n),e}function Fp(e,t,r,n){var i=t.current,s=Yd(),o=Zd(i);return r=Lp(r),null===t.context?t.context=r:t.pendingContext=r,(t=Dl(s,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ml(i,t,o))&&(Qd(e,i,o,s),Ll(e,i,o)),o}function Bp(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Up(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wp(e,t){Up(e,t),(e=e.alternate)&&Up(e,t)}bd=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Na.current)mu=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return mu=!1,function(e,t,r){switch(t.tag){case 3:Tu(t),ul();break;case 5:Kl(t);break;case 1:Ia(t.type)&&ja(t);break;case 4:ql(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ca(bl,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ca(Yl,1&Yl.current),t.flags|=128,null):0!==(r&t.child.childLanes)?ju(e,t,r):(Ca(Yl,1&Yl.current),null!==(e=Bu(e,t,r))?e.sibling:null);Ca(Yl,1&Yl.current);break;case 19:if(n=0!==(r&t.childLanes),128&e.flags){if(n)return zu(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ca(Yl,Yl.current),n)break;return null;case 22:case 23:return t.lanes=0,xu(e,t,r)}return Bu(e,t,r)}(e,t,r);mu=!!(131072&e.flags)}else mu=!1,tl&&1048576&t.flags&&Ya(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Fu(e,t),e=t.pendingProps;var i=Ra(t,Ta.current);Nl(t,r),i=pc(null,t,n,e,i,r);var s=hc();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ia(n)?(s=!0,ja(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,jl(t),i.updater=eu,t.stateNode=i,i._reactInternals=t,iu(t,n,e,r),t=Eu(null,t,n,!0,s,r)):(t.tag=0,tl&&s&&Za(t),vu(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Fu(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"==typeof e)return Rp(e)?1:0;if(null!=e){if((e=e.$$typeof)===Er)return 11;if(e===Pr)return 14}return 2}(n),e=Qc(n,e),i){case 0:t=Su(null,t,n,e,r);break e;case 1:t=Cu(null,t,n,e,r);break e;case 11:t=gu(null,t,n,e,r);break e;case 14:t=yu(null,t,n,Qc(n.type,e),r);break e}throw Error(tr(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Su(e,t,n,i=t.elementType===n?i:Qc(n,i),r);case 1:return n=t.type,i=t.pendingProps,Cu(e,t,n,i=t.elementType===n?i:Qc(n,i),r);case 3:e:{if(Tu(t),null===e)throw Error(tr(387));n=t.pendingProps,i=(s=t.memoizedState).element,Ol(e,t),Fl(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Nu(e,t,n,r,i=su(Error(tr(423)),t));break e}if(n!==i){t=Nu(e,t,n,r,i=su(Error(tr(424)),t));break e}for(el=oa(t.stateNode.containerInfo.firstChild),Xa=t,tl=!0,rl=null,r=yl(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ul(),n===i){t=Bu(e,t,r);break e}vu(e,t,n,r)}t=t.child}return t;case 5:return Kl(t),null===e&&ol(t),n=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,Xo(n,i)?o=null:null!==s&&Xo(n,s)&&(t.flags|=32),wu(e,t),vu(e,t,o,r),t.child;case 6:return null===e&&ol(t),null;case 13:return ju(e,t,r);case 4:return ql(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=gl(t,null,n,r):vu(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,gu(e,t,n,i=t.elementType===n?i:Qc(n,i),r);case 7:return vu(e,t,t.pendingProps,r),t.child;case 8:case 12:return vu(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ca(bl,n._currentValue),n._currentValue=o,null!==s)if(no(s.value,o)){if(s.children===i.children&&!Na.current){t=Bu(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var a=s.dependencies;if(null!==a){o=s.child;for(var l=a.firstContext;null!==l;){if(l.context===n){if(1===s.tag){(l=Dl(-1,r&-r)).tag=2;var c=s.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),Tl(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(tr(341));o.lanes|=r,null!==(a=o.alternate)&&(a.lanes|=r),Tl(o,r,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}vu(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Nl(t,r),n=n(i=Pl(i)),t.flags|=1,vu(e,t,n,r),t.child;case 14:return i=Qc(n=t.type,t.pendingProps),yu(e,t,n,i=Qc(n.type,i),r);case 15:return bu(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Qc(n,i),Fu(e,t),t.tag=1,Ia(n)?(e=!0,ja(t)):e=!1,Nl(t,r),ru(t,n,i),iu(t,n,i,r),Eu(null,t,n,!0,e,r);case 19:return zu(e,t,r);case 22:return xu(e,t,r)}throw Error(tr(156,t.tag))};var Hp="function"==typeof reportError?reportError:function(e){console.error(e)};function $p(e){this._internalRoot=e}function Vp(e){this._internalRoot=e}function qp(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Gp(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kp(){}function Jp(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=Bp(o);a.call(e)}}Fp(t,o,e,i)}else o=function(e,t,r,n,i){if(i){if("function"==typeof n){var s=n;n=function(){var e=Bp(o);s.call(e)}}var o=zp(t,n,e,0,null,!1,0,"",Kp);return e._reactRootContainer=o,e[da]=o.current,Fo(8===e.nodeType?e.parentNode:e),op(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof n){var a=n;n=function(){var e=Bp(l);a.call(e)}}var l=Mp(e,0,!1,null,0,!1,0,"",Kp);return e._reactRootContainer=l,e[da]=l.current,Fo(8===e.nodeType?e.parentNode:e),op(function(){Fp(t,l,r,n)}),l}(r,t,e,i,n);return Bp(o)}Vp.prototype.render=$p.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(tr(409));Fp(e,t,null,null)},Vp.prototype.unmount=$p.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;op(function(){Fp(null,e,null,null)}),t[da]=null}},Vp.prototype.unstable_scheduleHydration=function(e){if(e){var t=wi();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ki.length&&0!==t&&t<ki[r].priority;r++);ki.splice(r,0,e),0===r&&Oi(e)}},yi=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=li(t.pendingLanes);0!==r&&(mi(t,1|r),Xd(t,Kn()),!(6&Ed)&&(zd=Kn()+500,Fa()))}break;case 13:op(function(){var t=_l(e,1);if(null!==t){var r=Yd();Qd(t,e,1,r)}}),Wp(e,1)}},bi=function(e){if(13===e.tag){var t=_l(e,134217728);if(null!==t)Qd(t,e,134217728,Yd());Wp(e,134217728)}},xi=function(e){if(13===e.tag){var t=Zd(e),r=_l(e,t);if(null!==r)Qd(r,e,t,Yd());Wp(e,t)}},wi=function(){return vi},Si=function(e,t){var r=vi;try{return vi=e,t()}finally{vi=r}},bn=function(e,t,r){switch(t){case"input":if(Kr(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=ya(n);if(!i)throw Error(tr(90));Hr(n),Kr(n,i)}}}break;case"textarea":tn(e,r);break;case"select":null!=(t=r.value)&&Qr(e,!!r.multiple,t,!1)}},Tn=sp,Nn=op;var Yp={usingClientEntryPoint:!1,Events:[va,ga,ya,Cn,En,sp]},Zp={findFiberByHostInstance:ma,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qp={bundleType:Zp.bundleType,version:Zp.version,rendererPackageName:Zp.rendererPackageName,rendererConfig:Zp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Wn(e))?null:e.stateNode},findFiberByHostInstance:Zp.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xp.isDisabled&&Xp.supportsFiber)try{ti=Xp.inject(Qp),ri=Xp}catch(an){}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yp,Jt.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qp(t))throw Error(tr(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:yr,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},Jt.createRoot=function(e,t){if(!qp(e))throw Error(tr(299));var r=!1,n="",i=Hp;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Mp(e,1,!1,null,0,r,0,n,i),e[da]=t.current,Fo(8===e.nodeType?e.parentNode:e),new $p(t)},Jt.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(tr(188));throw e=Object.keys(e).join(","),Error(tr(268,e))}return e=null===(e=Wn(t))?null:e.stateNode},Jt.flushSync=function(e){return op(e)},Jt.hydrate=function(e,t,r){if(!Gp(t))throw Error(tr(200));return Jp(null,e,t,!0,r)},Jt.hydrateRoot=function(e,t,r){if(!qp(e))throw Error(tr(405));var n=null!=r&&r.hydratedSources||null,i=!1,s="",o=Hp;if(null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=zp(t,null,e,1,null!=r?r:null,i,0,s,o),e[da]=t.current,Fo(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Vp(t)},Jt.render=function(e,t,r){if(!Gp(t))throw Error(tr(200));return Jp(null,e,t,!1,r)},Jt.unmountComponentAtNode=function(e){if(!Gp(e))throw Error(tr(40));return!!e._reactRootContainer&&(op(function(){Jp(null,null,e,!1,function(){e._reactRootContainer=null,e[da]=null})}),!0)},Jt.unstable_batchedUpdates=sp,Jt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Gp(r))throw Error(tr(200));if(null==e||void 0===e._reactInternals)throw Error(tr(38));return Jp(e,t,r,!1,n)},Jt.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Kt.exports=Jt;var eh=Kt.exports;const th=Ze(eh);var rh,nh=eh;rh=nh.createRoot,nh.hydrateRoot;var ih=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sh={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},oh=new(r=class{constructor(){He(this,e,sh),He(this,t,!1)}setTimeoutProvider(t){$e(this,e,t)}setTimeout(t,r){return We(this,e).setTimeout(t,r)}clearTimeout(t){We(this,e).clearTimeout(t)}setInterval(t,r){return We(this,e).setInterval(t,r)}clearInterval(t){We(this,e).clearInterval(t)}},e=new WeakMap,t=new WeakMap,r);var ah="undefined"==typeof window||"Deno"in globalThis;function lh(){}function ch(e){return"number"==typeof e&&e>=0&&e!==1/0}function uh(e,t){return Math.max(e+(t||0)-Date.now(),0)}function dh(e,t){return"function"==typeof e?e(t):e}function ph(e,t){return"function"==typeof e?e(t):e}function hh(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=e;if(o)if(n){if(t.queryHash!==mh(o,t.options))return!1}else if(!gh(t.queryKey,o))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return("boolean"!=typeof a||t.isStale()===a)&&((!i||i===t.state.fetchStatus)&&!(s&&!s(t)))}function fh(e,t){const{exact:r,status:n,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(vh(t.options.mutationKey)!==vh(s))return!1}else if(!gh(t.options.mutationKey,s))return!1}return(!n||t.state.status===n)&&!(i&&!i(t))}function mh(e,t){return((null==t?void 0:t.queryKeyHashFn)||vh)(e)}function vh(e){return JSON.stringify(e,(e,t)=>Sh(t)?Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}):t)}function gh(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(r=>gh(e[r],t[r])))}var yh=Object.prototype.hasOwnProperty;function bh(e,t){if(e===t)return e;const r=wh(e)&&wh(t);if(!(r||Sh(e)&&Sh(t)))return t;const n=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),s=i.length,o=r?new Array(s):{};let a=0;for(let l=0;l<s;l++){const s=r?l:i[l],c=e[s],u=t[s];if(c===u){o[s]=c,(r?l<n:yh.call(e,s))&&a++;continue}if(null===c||null===u||"object"!=typeof c||"object"!=typeof u){o[s]=u;continue}const d=bh(c,u);o[s]=d,d===c&&a++}return n===s&&a===n?e:o}function xh(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function wh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Sh(e){if(!Ch(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!Ch(r)&&(!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function Ch(e){return"[object Object]"===Object.prototype.toString.call(e)}function Eh(e,t,r){return"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?bh(e,t):t}function Th(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Nh(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Ph=Symbol();function Rh(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==Ph?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function Ih(e,t){return"function"==typeof e?e(...t):!!e}var kh=new(o=class extends ih{constructor(){super(),He(this,n),He(this,i),He(this,s),$e(this,s,e=>{if(!ah&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){We(this,i)||this.setEventListener(We(this,s))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=We(this,i))||e.call(this),$e(this,i,void 0))}setEventListener(e){var t;$e(this,s,e),null==(t=We(this,i))||t.call(this),$e(this,i,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){We(this,n)!==e&&($e(this,n,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return"boolean"==typeof We(this,n)?We(this,n):"hidden"!==(null==(e=globalThis.document)?void 0:e.visibilityState)}},n=new WeakMap,i=new WeakMap,s=new WeakMap,o);function _h(){let e,t;const r=new Promise((r,n)=>{e=r,t=n});function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch(()=>{}),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}var Ah=function(e){setTimeout(e,0)};var jh=function(){let e=[],t=0,r=e=>{e()},n=e=>{e()},i=Ah;const s=n=>{t?e.push(n):i(()=>{r(n)})};return{batch:s=>{let o;t++;try{o=s()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i(()=>{n(()=>{t.forEach(e=>{r(e)})})})})()}return o},batchCalls:e=>(...t)=>{s(()=>{e(...t)})},schedule:s,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{i=e}}}(),Oh=new(u=class extends ih{constructor(){super(),He(this,a,!0),He(this,l),He(this,c),$e(this,c,e=>{if(!ah&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){We(this,l)||this.setEventListener(We(this,c))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=We(this,l))||e.call(this),$e(this,l,void 0))}setEventListener(e){var t;$e(this,c,e),null==(t=We(this,l))||t.call(this),$e(this,l,e(this.setOnline.bind(this)))}setOnline(e){We(this,a)!==e&&($e(this,a,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return We(this,a)}},a=new WeakMap,l=new WeakMap,c=new WeakMap,u);function Dh(e){return Math.min(1e3*De(2,e),3e4)}function Mh(e){return"online"!==(null!=e?e:"online")||Oh.isOnline()}var Lh=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function zh(e){let t,r=!1,n=0;const i=_h(),s=()=>"pending"!==i.status,o=()=>kh.isFocused()&&("always"===e.networkMode||Oh.isOnline())&&e.canRun(),a=()=>Mh(e.networkMode)&&e.canRun(),l=e=>{s()||(null==t||t(),i.resolve(e))},c=e=>{s()||(null==t||t(),i.reject(e))},u=()=>new Promise(r=>{var n;t=e=>{(s()||o())&&r(e)},null==(n=e.onPause)||n.call(e)}).then(()=>{var r;t=void 0,s()||null==(r=e.onContinue)||r.call(e)}),d=()=>{if(s())return;let t;const i=0===n?e.initialPromise:void 0;try{t=null!=i?i:e.fn()}catch(a){t=Promise.reject(a)}Promise.resolve(t).then(l).catch(t=>{var i,a,l;if(s())return;const p=null!=(i=e.retry)?i:ah?0:3,h=null!=(a=e.retryDelay)?a:Dh,f="function"==typeof h?h(n,t):h,m=!0===p||"number"==typeof p&&n<p||"function"==typeof p&&p(n,t);var v;!r&&m?(n++,null==(l=e.onFail)||l.call(e,n,t),(v=f,new Promise(e=>{oh.setTimeout(e,v)})).then(()=>o()?void 0:u()).then(()=>{r?c(t):d()})):c(t)})};return{promise:i,status:()=>i.status,cancel:t=>{var r;if(!s()){const n=new Lh(t);c(n),null==(r=e.onCancel)||r.call(e,n)}},continue:()=>(null==t||t(),i),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:a,start:()=>(a()?d():u().then(d),i)}}var Fh=(p=class{constructor(){He(this,d)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ch(this.gcTime)&&$e(this,d,oh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!=e?e:ah?1/0:3e5)}clearGcTimeout(){We(this,d)&&(oh.clearTimeout(We(this,d)),$e(this,d,void 0))}},d=new WeakMap,p),Bh=(S=class extends Fh{constructor(e){var t;super(),He(this,x),He(this,h),He(this,f),He(this,m),He(this,v),He(this,g),He(this,y),He(this,b),$e(this,b,!1),$e(this,y,e.defaultOptions),this.setOptions(e.options),this.observers=[],$e(this,v,e.client),$e(this,m,We(this,v).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,$e(this,h,Hh(this.options)),this.state=null!=(t=e.state)?t:We(this,h),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=We(this,g))?void 0:e.promise}setOptions(e){if(this.options=Le(Le({},We(this,y)),e),this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=Hh(this.options);void 0!==e.data&&(this.setState(Wh(e.data,e.dataUpdatedAt)),$e(this,h,e))}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||We(this,m).remove(this)}setData(e,t){const r=Eh(this.state.data,e,this.options);return Ve(this,x,w).call(this,{data:r,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),r}setState(e,t){Ve(this,x,w).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,r;const n=null==(t=We(this,g))?void 0:t.promise;return null==(r=We(this,g))||r.cancel(e),n?n.then(lh).catch(lh):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(We(this,h))}isActive(){return this.observers.some(e=>!1!==ph(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ph||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===dh(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!uh(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=We(this,g))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=We(this,g))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),We(this,m).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(We(this,g)&&(We(this,b)?We(this,g).cancel({revert:!0}):We(this,g).cancelRetry()),this.scheduleGc()),We(this,m).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ve(this,x,w).call(this,{type:"invalidate"})}fetch(e,t){return Ke(this,null,function*(){var r,n,i,s,o,a,l,c,u,d,p,h;if("idle"!==this.state.fetchStatus&&"rejected"!==(null==(r=We(this,g))?void 0:r.status()))if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(We(this,g))return We(this,g).continueRetry(),We(this,g).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const y=new AbortController,S=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>($e(this,b,!0),y.signal)})},C=()=>{const e=Rh(this.options,t),r=(()=>{const e={client:We(this,v),queryKey:this.queryKey,meta:this.meta};return S(e),e})();return $e(this,b,!1),this.options.persister?this.options.persister(e,r,this):e(r)},E=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:We(this,v),state:this.state,fetchFn:C};return S(e),e})();null==(n=this.options.behavior)||n.onFetch(E,this),$e(this,f,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(i=E.fetchOptions)?void 0:i.meta)||Ve(this,x,w).call(this,{type:"fetch",meta:null==(s=E.fetchOptions)?void 0:s.meta}),$e(this,g,zh({initialPromise:null==t?void 0:t.initialPromise,fn:E.fetchFn,onCancel:e=>{e instanceof Lh&&e.revert&&this.setState(ze(Le({},We(this,f)),{fetchStatus:"idle"})),y.abort()},onFail:(e,t)=>{Ve(this,x,w).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Ve(this,x,w).call(this,{type:"pause"})},onContinue:()=>{Ve(this,x,w).call(this,{type:"continue"})},retry:E.options.retry,retryDelay:E.options.retryDelay,networkMode:E.options.networkMode,canRun:()=>!0}));try{const e=yield We(this,g).start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),null==(a=(o=We(this,m).config).onSuccess)||a.call(o,e,this),null==(c=(l=We(this,m).config).onSettled)||c.call(l,e,this.state.error,this),e}catch(T){if(T instanceof Lh){if(T.silent)return We(this,g).promise;if(T.revert){if(void 0===this.state.data)throw T;return this.state.data}}throw Ve(this,x,w).call(this,{type:"error",error:T}),null==(d=(u=We(this,m).config).onError)||d.call(u,T,this),null==(h=(p=We(this,m).config).onSettled)||h.call(p,this.state.data,T,this),T}finally{this.scheduleGc()}})}},h=new WeakMap,f=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakMap,y=new WeakMap,b=new WeakMap,x=new WeakSet,w=function(e){this.state=(t=>{var r;switch(e.type){case"failed":return ze(Le({},t),{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return ze(Le({},t),{fetchStatus:"paused"});case"continue":return ze(Le({},t),{fetchStatus:"fetching"});case"fetch":return ze(Le(Le({},t),Uh(t.data,this.options)),{fetchMeta:null!=(r=e.meta)?r:null});case"success":const n=Le(ze(Le(Le({},t),Wh(e.data,e.dataUpdatedAt)),{dataUpdateCount:t.dataUpdateCount+1}),!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});return $e(this,f,e.manual?n:void 0),n;case"error":const i=e.error;return ze(Le({},t),{error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"});case"invalidate":return ze(Le({},t),{isInvalidated:!0});case"setState":return Le(Le({},t),e.state)}})(this.state),jh.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),We(this,m).notify({query:this,type:"updated",action:e})})},S);function Uh(e,t){return Le({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Mh(t.networkMode)?"fetching":"paused"},void 0===e&&{error:null,status:"pending"})}function Wh(e,t){return{data:e,dataUpdatedAt:null!=t?t:Date.now(),error:null,isInvalidated:!1,status:"success"}}function Hh(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var $h=(J=class extends ih{constructor(e,t){super(),He(this,z),He(this,C),He(this,E),He(this,T),He(this,N),He(this,P),He(this,R),He(this,I),He(this,k),He(this,_),He(this,A),He(this,j),He(this,O),He(this,D),He(this,M),He(this,L,new Set),this.options=t,$e(this,C,e),$e(this,k,null),$e(this,I,_h()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(We(this,E).addObserver(this),Vh(We(this,E),this.options)?Ve(this,z,F).call(this):this.updateResult(),Ve(this,z,H).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return qh(We(this,E),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return qh(We(this,E),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ve(this,z,V).call(this),Ve(this,z,q).call(this),We(this,E).removeObserver(this)}setOptions(e){const t=this.options,r=We(this,E);if(this.options=We(this,C).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof ph(this.options.enabled,We(this,E)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ve(this,z,G).call(this),We(this,E).setOptions(this.options),t._defaulted&&!xh(this.options,t)&&We(this,C).getQueryCache().notify({type:"observerOptionsUpdated",query:We(this,E),observer:this});const n=this.hasListeners();n&&Gh(We(this,E),r,this.options,t)&&Ve(this,z,F).call(this),this.updateResult(),!n||We(this,E)===r&&ph(this.options.enabled,We(this,E))===ph(t.enabled,We(this,E))&&dh(this.options.staleTime,We(this,E))===dh(t.staleTime,We(this,E))||Ve(this,z,B).call(this);const i=Ve(this,z,U).call(this);!n||We(this,E)===r&&ph(this.options.enabled,We(this,E))===ph(t.enabled,We(this,E))&&i===We(this,M)||Ve(this,z,W).call(this,i)}getOptimisticResult(e){const t=We(this,C).getQueryCache().build(We(this,C),e),r=this.createResult(t,e);return function(e,t){if(!xh(e.getCurrentResult(),t))return!0;return!1}(this,r)&&($e(this,N,r),$e(this,R,this.options),$e(this,P,We(this,E).state)),r}getCurrentResult(){return We(this,N)}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),null==t||t(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==We(this,I).status||We(this,I).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){We(this,L).add(e)}getCurrentQuery(){return We(this,E)}refetch(e={}){var t=Fe(e,[]);return this.fetch(Le({},t))}fetchOptimistic(e){const t=We(this,C).defaultQueryOptions(e),r=We(this,C).getQueryCache().build(We(this,C),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){var t;return Ve(this,z,F).call(this,ze(Le({},e),{cancelRefetch:null==(t=e.cancelRefetch)||t})).then(()=>(this.updateResult(),We(this,N)))}createResult(e,t){var r;const n=We(this,E),i=this.options,s=We(this,N),o=We(this,P),a=We(this,R),l=e!==n?e.state:We(this,T),{state:c}=e;let u,d=Le({},c),p=!1;if(t._optimisticResults){const r=this.hasListeners(),s=!r&&Vh(e,t),o=r&&Gh(e,n,t,i);(s||o)&&(d=Le(Le({},d),Uh(c.data,e.options))),"isRestoring"===t._optimisticResults&&(d.fetchStatus="idle")}let{error:h,errorUpdatedAt:f,status:m}=d;u=d.data;let v=!1;if(void 0!==t.placeholderData&&void 0===u&&"pending"===m){let e;(null==s?void 0:s.isPlaceholderData)&&t.placeholderData===(null==a?void 0:a.placeholderData)?(e=s.data,v=!0):e="function"==typeof t.placeholderData?t.placeholderData(null==(r=We(this,j))?void 0:r.state.data,We(this,j)):t.placeholderData,void 0!==e&&(m="success",u=Eh(null==s?void 0:s.data,e,t),p=!0)}if(t.select&&void 0!==u&&!v)if(s&&u===(null==o?void 0:o.data)&&t.select===We(this,_))u=We(this,A);else try{$e(this,_,t.select),u=t.select(u),u=Eh(null==s?void 0:s.data,u,t),$e(this,A,u),$e(this,k,null)}catch(C){$e(this,k,C)}We(this,k)&&(h=We(this,k),u=We(this,A),f=Date.now(),m="error");const g="fetching"===d.fetchStatus,y="pending"===m,b="error"===m,x=y&&g,w=void 0!==u,S={status:m,fetchStatus:d.fetchStatus,isPending:y,isSuccess:"success"===m,isError:b,isInitialLoading:x,isLoading:x,data:u,dataUpdatedAt:d.dataUpdatedAt,error:h,errorUpdatedAt:f,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:g,isRefetching:g&&!y,isLoadingError:b&&!w,isPaused:"paused"===d.fetchStatus,isPlaceholderData:p,isRefetchError:b&&w,isStale:Kh(e,t),refetch:this.refetch,promise:We(this,I),isEnabled:!1!==ph(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===S.status?e.reject(S.error):void 0!==S.data&&e.resolve(S.data)},r=()=>{const e=$e(this,I,S.promise=_h());t(e)},i=We(this,I);switch(i.status){case"pending":e.queryHash===n.queryHash&&t(i);break;case"fulfilled":"error"!==S.status&&S.data===i.value||r();break;case"rejected":"error"===S.status&&S.error===i.reason||r()}}return S}updateResult(){const e=We(this,N),t=this.createResult(We(this,E),this.options);if($e(this,P,We(this,E).state),$e(this,R,this.options),void 0!==We(this,P).data&&$e(this,j,We(this,E)),xh(t,e))return;$e(this,N,t);Ve(this,z,K).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!We(this,L).size)return!0;const n=new Set(null!=r?r:We(this,L));return this.options.throwOnError&&n.add("error"),Object.keys(We(this,N)).some(t=>{const r=t;return We(this,N)[r]!==e[r]&&n.has(r)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ve(this,z,H).call(this)}},C=new WeakMap,E=new WeakMap,T=new WeakMap,N=new WeakMap,P=new WeakMap,R=new WeakMap,I=new WeakMap,k=new WeakMap,_=new WeakMap,A=new WeakMap,j=new WeakMap,O=new WeakMap,D=new WeakMap,M=new WeakMap,L=new WeakMap,z=new WeakSet,F=function(e){Ve(this,z,G).call(this);let t=We(this,E).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(lh)),t},B=function(){Ve(this,z,V).call(this);const e=dh(this.options.staleTime,We(this,E));if(ah||We(this,N).isStale||!ch(e))return;const t=uh(We(this,N).dataUpdatedAt,e)+1;$e(this,O,oh.setTimeout(()=>{We(this,N).isStale||this.updateResult()},t))},U=function(){var e;return null!=(e="function"==typeof this.options.refetchInterval?this.options.refetchInterval(We(this,E)):this.options.refetchInterval)&&e},W=function(e){Ve(this,z,q).call(this),$e(this,M,e),!ah&&!1!==ph(this.options.enabled,We(this,E))&&ch(We(this,M))&&0!==We(this,M)&&$e(this,D,oh.setInterval(()=>{(this.options.refetchIntervalInBackground||kh.isFocused())&&Ve(this,z,F).call(this)},We(this,M)))},H=function(){Ve(this,z,B).call(this),Ve(this,z,W).call(this,Ve(this,z,U).call(this))},V=function(){We(this,O)&&(oh.clearTimeout(We(this,O)),$e(this,O,void 0))},q=function(){We(this,D)&&(oh.clearInterval(We(this,D)),$e(this,D,void 0))},G=function(){const e=We(this,C).getQueryCache().build(We(this,C),this.options);if(e===We(this,E))return;const t=We(this,E);$e(this,E,e),$e(this,T,e.state),this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))},K=function(e){jh.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(We(this,N))}),We(this,C).getQueryCache().notify({query:We(this,E),type:"observerResultsUpdated"})})},J);function Vh(e,t){return function(e,t){return!1!==ph(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&qh(e,t,t.refetchOnMount)}function qh(e,t,r){if(!1!==ph(t.enabled,e)&&"static"!==dh(t.staleTime,e)){const n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&Kh(e,t)}return!1}function Gh(e,t,r,n){return(e!==t||!1===ph(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&Kh(e,r)}function Kh(e,t){return!1!==ph(t.enabled,e)&&e.isStaleByTime(dh(t.staleTime,e))}function Jh(e){return{onFetch:(t,r)=>{var n,i,s,o,a;const l=t.options,c=null==(s=null==(i=null==(n=t.fetchOptions)?void 0:n.meta)?void 0:i.fetchMore)?void 0:s.direction,u=(null==(o=t.state.data)?void 0:o.pages)||[],d=(null==(a=t.state.data)?void 0:a.pageParams)||[];let p={pages:[],pageParams:[]},h=0;const f=()=>Ke(this,null,function*(){var r;let n=!1;const i=Rh(t.options,t.fetchOptions),s=(e,r,s)=>Ke(this,null,function*(){if(n)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);const o=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:r,direction:s?"backward":"forward",meta:t.options.meta};var i;return i=e,Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)}),e})(),a=yield i(o),{maxPages:l}=t.options,c=s?Nh:Th;return{pages:c(e.pages,a,l),pageParams:c(e.pageParams,r,l)}});if(c&&u.length){const e="backward"===c,t={pages:u,pageParams:d},r=(e?Zh:Yh)(l,t);p=yield s(t,r,e)}else{const t=null!=e?e:u.length;do{const e=0===h?null!=(r=d[0])?r:l.initialPageParam:Yh(l,p);if(h>0&&null==e)break;p=yield s(p,e),h++}while(h<t)}return p});t.options.persister?t.fetchFn=()=>{var e,n;return null==(n=(e=t.options).persister)?void 0:n.call(e,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=f}}}function Yh(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Zh(e,{pages:t,pageParams:r}){var n;return t.length>0?null==(n=e.getPreviousPageParam)?void 0:n.call(e,t[0],t,r[0],r):void 0}var Qh=(re=class extends Fh{constructor(e){super(),He(this,ee),He(this,Y),He(this,Z),He(this,Q),He(this,X),$e(this,Y,e.client),this.mutationId=e.mutationId,$e(this,Q,e.mutationCache),$e(this,Z,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){We(this,Z).includes(e)||(We(this,Z).push(e),this.clearGcTimeout(),We(this,Q).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){$e(this,Z,We(this,Z).filter(t=>t!==e)),this.scheduleGc(),We(this,Q).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){We(this,Z).length||("pending"===this.state.status?this.scheduleGc():We(this,Q).remove(this))}continue(){var e,t;return null!=(t=null==(e=We(this,X))?void 0:e.continue())?t:this.execute(this.state.variables)}execute(e){return Ke(this,null,function*(){var t,r,n,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y,b,x,w;const S=()=>{Ve(this,ee,te).call(this,{type:"continue"})},C={client:We(this,Y),meta:this.options.meta,mutationKey:this.options.mutationKey};$e(this,X,zh({fn:()=>this.options.mutationFn?this.options.mutationFn(e,C):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{Ve(this,ee,te).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Ve(this,ee,te).call(this,{type:"pause"})},onContinue:S,retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>We(this,Q).canRun(this)}));const E="pending"===this.state.status,T=!We(this,X).canStart();try{if(E)S();else{Ve(this,ee,te).call(this,{type:"pending",variables:e,isPaused:T}),yield null==(n=(r=We(this,Q).config).onMutate)?void 0:n.call(r,e,this,C);const t=yield null==(s=(i=this.options).onMutate)?void 0:s.call(i,e,C);t!==this.state.context&&Ve(this,ee,te).call(this,{type:"pending",context:t,variables:e,isPaused:T})}const t=yield We(this,X).start();return yield null==(a=(o=We(this,Q).config).onSuccess)?void 0:a.call(o,t,e,this.state.context,this,C),yield null==(c=(l=this.options).onSuccess)?void 0:c.call(l,t,e,this.state.context,C),yield null==(d=(u=We(this,Q).config).onSettled)?void 0:d.call(u,t,null,this.state.variables,this.state.context,this,C),yield null==(h=(p=this.options).onSettled)?void 0:h.call(p,t,null,e,this.state.context,C),Ve(this,ee,te).call(this,{type:"success",data:t}),t}catch(N){try{throw yield null==(m=(f=We(this,Q).config).onError)?void 0:m.call(f,N,e,this.state.context,this,C),yield null==(g=(v=this.options).onError)?void 0:g.call(v,N,e,this.state.context,C),yield null==(b=(y=We(this,Q).config).onSettled)?void 0:b.call(y,void 0,N,this.state.variables,this.state.context,this,C),yield null==(w=(x=this.options).onSettled)?void 0:w.call(x,void 0,N,e,this.state.context,C),N}finally{Ve(this,ee,te).call(this,{type:"error",error:N})}}finally{We(this,Q).runNext(this)}})}},Y=new WeakMap,Z=new WeakMap,Q=new WeakMap,X=new WeakMap,ee=new WeakSet,te=function(e){this.state=(t=>{switch(e.type){case"failed":return ze(Le({},t),{failureCount:e.failureCount,failureReason:e.error});case"pause":return ze(Le({},t),{isPaused:!0});case"continue":return ze(Le({},t),{isPaused:!1});case"pending":return ze(Le({},t),{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return ze(Le({},t),{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return ze(Le({},t),{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),jh.batch(()=>{We(this,Z).forEach(t=>{t.onMutationUpdate(e)}),We(this,Q).notify({mutation:this,type:"updated",action:e})})},re);var Xh=(oe=class extends ih{constructor(e={}){super(),He(this,ne),He(this,ie),He(this,se),this.config=e,$e(this,ne,new Set),$e(this,ie,new Map),$e(this,se,0)}build(e,t,r){const n=new Qh({client:e,mutationCache:this,mutationId:++qe(this,se)._,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){We(this,ne).add(e);const t=ef(e);if("string"==typeof t){const r=We(this,ie).get(t);r?r.push(e):We(this,ie).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(We(this,ne).delete(e)){const t=ef(e);if("string"==typeof t){const r=We(this,ie).get(t);if(r)if(r.length>1){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&We(this,ie).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ef(e);if("string"==typeof t){const r=We(this,ie).get(t),n=null==r?void 0:r.find(e=>"pending"===e.state.status);return!n||n===e}return!0}runNext(e){var t,r;const n=ef(e);if("string"==typeof n){const i=null==(t=We(this,ie).get(n))?void 0:t.find(t=>t!==e&&t.state.isPaused);return null!=(r=null==i?void 0:i.continue())?r:Promise.resolve()}return Promise.resolve()}clear(){jh.batch(()=>{We(this,ne).forEach(e=>{this.notify({type:"removed",mutation:e})}),We(this,ne).clear(),We(this,ie).clear()})}getAll(){return Array.from(We(this,ne))}find(e){const t=Le({exact:!0},e);return this.getAll().find(e=>fh(t,e))}findAll(e={}){return this.getAll().filter(t=>fh(e,t))}notify(e){jh.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return jh.batch(()=>Promise.all(e.map(e=>e.continue().catch(lh))))}},ne=new WeakMap,ie=new WeakMap,se=new WeakMap,oe);function ef(e){var t;return null==(t=e.options.scope)?void 0:t.id}var tf=(fe=class extends ih{constructor(e,t){super(),He(this,de),He(this,ae),He(this,le),He(this,ce),He(this,ue),$e(this,ae,e),this.setOptions(t),this.bindMethods(),Ve(this,de,pe).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=We(this,ae).defaultMutationOptions(e),xh(this.options,r)||We(this,ae).getMutationCache().notify({type:"observerOptionsUpdated",mutation:We(this,ce),observer:this}),(null==r?void 0:r.mutationKey)&&this.options.mutationKey&&vh(r.mutationKey)!==vh(this.options.mutationKey)?this.reset():"pending"===(null==(t=We(this,ce))?void 0:t.state.status)&&We(this,ce).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=We(this,ce))||e.removeObserver(this)}onMutationUpdate(e){Ve(this,de,pe).call(this),Ve(this,de,he).call(this,e)}getCurrentResult(){return We(this,le)}reset(){var e;null==(e=We(this,ce))||e.removeObserver(this),$e(this,ce,void 0),Ve(this,de,pe).call(this),Ve(this,de,he).call(this)}mutate(e,t){var r;return $e(this,ue,t),null==(r=We(this,ce))||r.removeObserver(this),$e(this,ce,We(this,ae).getMutationCache().build(We(this,ae),this.options)),We(this,ce).addObserver(this),We(this,ce).execute(e)}},ae=new WeakMap,le=new WeakMap,ce=new WeakMap,ue=new WeakMap,de=new WeakSet,pe=function(){var e,t;const r=null!=(t=null==(e=We(this,ce))?void 0:e.state)?t:{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};$e(this,le,ze(Le({},r),{isPending:"pending"===r.status,isSuccess:"success"===r.status,isError:"error"===r.status,isIdle:"idle"===r.status,mutate:this.mutate,reset:this.reset}))},he=function(e){jh.batch(()=>{var t,r,n,i,s,o,a,l;if(We(this,ue)&&this.hasListeners()){const c=We(this,le).variables,u=We(this,le).context,d={client:We(this,ae),meta:this.options.meta,mutationKey:this.options.mutationKey};"success"===(null==e?void 0:e.type)?(null==(r=(t=We(this,ue)).onSuccess)||r.call(t,e.data,c,u,d),null==(i=(n=We(this,ue)).onSettled)||i.call(n,e.data,null,c,u,d)):"error"===(null==e?void 0:e.type)&&(null==(o=(s=We(this,ue)).onError)||o.call(s,e.error,c,u,d),null==(l=(a=We(this,ue)).onSettled)||l.call(a,void 0,e.error,c,u,d))}this.listeners.forEach(e=>{e(We(this,le))})})},fe),rf=(ve=class extends ih{constructor(e={}){super(),He(this,me),this.config=e,$e(this,me,new Map)}build(e,t,r){var n;const i=t.queryKey,s=null!=(n=t.queryHash)?n:mh(i,t);let o=this.get(s);return o||(o=new Bh({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){We(this,me).has(e.queryHash)||(We(this,me).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=We(this,me).get(e.queryHash);t&&(e.destroy(),t===e&&We(this,me).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){jh.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return We(this,me).get(e)}getAll(){return[...We(this,me).values()]}find(e){const t=Le({exact:!0},e);return this.getAll().find(e=>hh(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>hh(e,t)):t}notify(e){jh.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){jh.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){jh.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},me=new WeakMap,ve),nf=(Te=class{constructor(e={}){He(this,ge),He(this,ye),He(this,be),He(this,xe),He(this,we),He(this,Se),He(this,Ce),He(this,Ee),$e(this,ge,e.queryCache||new rf),$e(this,ye,e.mutationCache||new Xh),$e(this,be,e.defaultOptions||{}),$e(this,xe,new Map),$e(this,we,new Map),$e(this,Se,0)}mount(){qe(this,Se)._++,1===We(this,Se)&&($e(this,Ce,kh.subscribe(e=>Ke(this,null,function*(){e&&(yield this.resumePausedMutations(),We(this,ge).onFocus())}))),$e(this,Ee,Oh.subscribe(e=>Ke(this,null,function*(){e&&(yield this.resumePausedMutations(),We(this,ge).onOnline())}))))}unmount(){var e,t;qe(this,Se)._--,0===We(this,Se)&&(null==(e=We(this,Ce))||e.call(this),$e(this,Ce,void 0),null==(t=We(this,Ee))||t.call(this),$e(this,Ee,void 0))}isFetching(e){return We(this,ge).findAll(ze(Le({},e),{fetchStatus:"fetching"})).length}isMutating(e){return We(this,ye).findAll(ze(Le({},e),{status:"pending"})).length}getQueryData(e){var t;const r=this.defaultQueryOptions({queryKey:e});return null==(t=We(this,ge).get(r.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=We(this,ge).build(this,t),n=r.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(dh(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return We(this,ge).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=We(this,ge).get(n.queryHash),s=function(e,t){return"function"==typeof e?e(t):e}(t,null==i?void 0:i.state.data);if(void 0!==s)return We(this,ge).build(this,n).setData(s,ze(Le({},r),{manual:!0}))}setQueriesData(e,t,r){return jh.batch(()=>We(this,ge).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,r)]))}getQueryState(e){var t;const r=this.defaultQueryOptions({queryKey:e});return null==(t=We(this,ge).get(r.queryHash))?void 0:t.state}removeQueries(e){const t=We(this,ge);jh.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const r=We(this,ge);return jh.batch(()=>(r.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(Le({type:"active"},e),t)))}cancelQueries(e,t={}){const r=Le({revert:!0},t),n=jh.batch(()=>We(this,ge).findAll(e).map(e=>e.cancel(r)));return Promise.all(n).then(lh).catch(lh)}invalidateQueries(e,t={}){return jh.batch(()=>{var r,n;return We(this,ge).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries(ze(Le({},e),{type:null!=(n=null!=(r=null==e?void 0:e.refetchType)?r:null==e?void 0:e.type)?n:"active"}),t)})}refetchQueries(e,t={}){var r;const n=ze(Le({},t),{cancelRefetch:null==(r=t.cancelRefetch)||r}),i=jh.batch(()=>We(this,ge).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(lh)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(i).then(lh)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const r=We(this,ge).build(this,t);return r.isStaleByTime(dh(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(lh).catch(lh)}fetchInfiniteQuery(e){return e.behavior=Jh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(lh).catch(lh)}ensureInfiniteQueryData(e){return e.behavior=Jh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Oh.isOnline()?We(this,ye).resumePausedMutations():Promise.resolve()}getQueryCache(){return We(this,ge)}getMutationCache(){return We(this,ye)}getDefaultOptions(){return We(this,be)}setDefaultOptions(e){$e(this,be,e)}setQueryDefaults(e,t){We(this,xe).set(vh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...We(this,xe).values()],r={};return t.forEach(t=>{gh(e,t.queryKey)&&Object.assign(r,t.defaultOptions)}),r}setMutationDefaults(e,t){We(this,we).set(vh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...We(this,we).values()],r={};return t.forEach(t=>{gh(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t=ze(Le(Le(Le({},We(this,be).queries),this.getQueryDefaults(e.queryKey)),e),{_defaulted:!0});return t.queryHash||(t.queryHash=mh(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ph&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:ze(Le(Le(Le({},We(this,be).mutations),(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{_defaulted:!0})}clear(){We(this,ge).clear(),We(this,ye).clear()}},ge=new WeakMap,ye=new WeakMap,be=new WeakMap,xe=new WeakMap,we=new WeakMap,Se=new WeakMap,Ce=new WeakMap,Ee=new WeakMap,Te),sf=Lt.createContext(void 0),of=e=>{const t=Lt.useContext(sf);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},af=({client:e,children:t})=>(Lt.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Gt.jsx(sf.Provider,{value:e,children:t})),lf=Lt.createContext(!1);lf.Provider;var cf=Lt.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),uf=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function df(e,t,r){var n,i,s,o,a;const l=Lt.useContext(lf),c=Lt.useContext(cf),u=of(),d=u.defaultQueryOptions(e);null==(i=null==(n=u.getDefaultOptions().queries)?void 0:n._experimental_beforeQuery)||i.call(n,d),d._optimisticResults=l?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,r=e=>"static"===e?e:Math.max(null!=e?e:t,t),n=e.staleTime;e.staleTime="function"==typeof n?(...e)=>r(n(...e)):r(n),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(d),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(d,c),(e=>{Lt.useEffect(()=>{e.clearReset()},[e])})(c);const p=!u.getQueryCache().get(d.queryHash),[h]=Lt.useState(()=>new t(u,d)),f=h.getOptimisticResult(d),m=!l&&!1!==e.subscribed;if(Lt.useSyncExternalStore(Lt.useCallback(e=>{const t=m?h.subscribe(jh.batchCalls(e)):lh;return h.updateResult(),t},[h,m]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),Lt.useEffect(()=>{h.setOptions(d)},[d,h]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(d,f))throw uf(d,h,c);if((({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&void 0===e.data||Ih(r,[e.error,n])))({result:f,errorResetBoundary:c,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw f.error;if(null==(o=null==(s=u.getDefaultOptions().queries)?void 0:s._experimental_afterQuery)||o.call(s,d,f),d.experimental_prefetchInRender&&!ah&&((e,t)=>e.isLoading&&e.isFetching&&!t)(f,l)){const e=p?uf(d,h,c):null==(a=u.getQueryCache().get(d.queryHash))?void 0:a.promise;null==e||e.catch(lh).finally(()=>{h.updateResult()})}return d.notifyOnChangeProps?f:h.trackResult(f)}function pf(e,t){const r=of(),[n]=Lt.useState(()=>new tf(r,e));Lt.useEffect(()=>{n.setOptions(e)},[n,e]);const i=Lt.useSyncExternalStore(Lt.useCallback(e=>n.subscribe(jh.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=Lt.useCallback((e,t)=>{n.mutate(e,t).catch(lh)},[n]);if(i.error&&Ih(n.options.throwOnError,[i.error]))throw i.error;return ze(Le({},i),{mutate:s,mutateAsync:i.mutate})}const hf={},ff=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in hf)return;hf[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,r)=>{i.addEventListener("load",t),i.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};
/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var mf="popstate";function vf(e={}){return function(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a="POP",l=null,c=u();null==c&&(c=0,o.replaceState(ze(Le({},o.state),{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:m.location,delta:t})}function p(e,t){a="PUSH";let r=xf(m.location,e,t);c=u()+1;let n=bf(r,c),d=m.createHref(r);try{o.pushState(n,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(d)}s&&l&&l({action:a,location:m.location,delta:1})}function h(e,t){a="REPLACE";let r=xf(m.location,e,t);c=u();let n=bf(r,c),i=m.createHref(r);o.replaceState(n,"",i),s&&l&&l({action:a,location:m.location,delta:0})}function f(e){return function(e,t=!1){let r="http://localhost";"undefined"!=typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href);gf(r,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:wf(e);n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n);return new URL(n,r)}(e)}let m={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(mf,d),l=e,()=>{i.removeEventListener(mf,d),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:p,replace:h,go:e=>o.go(e)};return m}(function(e,t){let{pathname:r,search:n,hash:i}=e.location;return xf("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:wf(t)},0,e)}function gf(e,t){if(!1===e||null==e)throw new Error(t)}function yf(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function bf(e,t){return{usr:e.state,key:e.key,idx:t}}function xf(e,t,r=null,n){return ze(Le({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?Sf(t):t),{state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)})}function wf({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function Sf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Cf(e,t,r="/"){return function(e,t,r,n){let i="string"==typeof t?Sf(t):t,s=Lf(i.pathname||"/",r);if(null==s)return null;let o=Ef(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let l=0;null==a&&l<o.length;++l){let e=Mf(s);a=Of(o[l],e,n)}return a}(e,t,r,!1)}function Ef(e,t=[],r=[],n="",i=!1){let s=(e,s,o=i,a)=>{let l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(n)&&o)return;gf(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length)}let c=Uf([n,l.relativePath]),u=r.concat(l);e.children&&e.children.length>0&&(gf(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Ef(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:jf(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var r;if(""!==e.path&&(null==(r=e.path)?void 0:r.includes("?")))for(let n of Tf(e.path))s(e,t,!0,n);else s(e,t)}),t}function Tf(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return i?[s,""]:[s];let o=Tf(n.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var Nf=/^:[\w-]+$/,Pf=3,Rf=2,If=1,kf=10,_f=-2,Af=e=>"*"===e;function jf(e,t){let r=e.split("/"),n=r.length;return r.some(Af)&&(n+=_f),t&&(n+=Rf),r.filter(e=>!Af(e)).reduce((e,t)=>e+(Nf.test(t)?Pf:""===t?If:kf),n)}function Of(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",o=[];for(let a=0;a<n.length;++a){let e=n[a],l=a===n.length-1,c="/"===s?t:t.slice(s.length)||"/",u=Df({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=Df({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Uf([s,u.pathname]),pathnameBase:Wf(Uf([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=Uf([s,u.pathnameBase]))}return o}function Df(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t=!1,r=!0){yf("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const i=a[n];return e[t]=r&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function Mf(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return yf(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Lf(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function zf(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ff(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function Bf(e,t,r,n=!1){let i;"string"==typeof e?i=Sf(e):(i=Le({},e),gf(!i.pathname||!i.pathname.includes("?"),zf("?","pathname","search",i)),gf(!i.pathname||!i.pathname.includes("#"),zf("#","pathname","hash",i)),gf(!i.search||!i.search.includes("#"),zf("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=r;else{let e=t.length-1;if(!n&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:r,search:n="",hash:i=""}="string"==typeof e?Sf(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:Hf(n),hash:$f(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Uf=e=>e.join("/").replace(/\/\/+/g,"/"),Wf=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Hf=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$f=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Vf=["POST","PUT","PATCH","DELETE"];new Set(Vf);var qf=["GET",...Vf];new Set(qf);var Gf=Lt.createContext(null);Gf.displayName="DataRouter";var Kf=Lt.createContext(null);Kf.displayName="DataRouterState",Lt.createContext(!1);var Jf=Lt.createContext({isTransitioning:!1});Jf.displayName="ViewTransition",Lt.createContext(new Map).displayName="Fetchers",Lt.createContext(null).displayName="Await";var Yf=Lt.createContext(null);Yf.displayName="Navigation";var Zf=Lt.createContext(null);Zf.displayName="Location";var Qf=Lt.createContext({outlet:null,matches:[],isDataRoute:!1});Qf.displayName="Route";var Xf=Lt.createContext(null);function em(){return null!=Lt.useContext(Zf)}function tm(){return gf(em(),"useLocation() may be used only in the context of a <Router> component."),Lt.useContext(Zf).location}Xf.displayName="RouteError";var rm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nm(e){Lt.useContext(Yf).static||Lt.useLayoutEffect(e)}function im(){let{isDataRoute:e}=Lt.useContext(Qf);return e?function(){let{router:e}=function(e){let t=Lt.useContext(Gf);return gf(t,dm(e)),t}("useNavigate"),t=pm("useNavigate"),r=Lt.useRef(!1);nm(()=>{r.current=!0});let n=Lt.useCallback((n,...i)=>Ke(this,[n,...i],function*(n,i={}){yf(r.current,rm),r.current&&("number"==typeof n?e.navigate(n):yield e.navigate(n,Le({fromRouteId:t},i)))}),[e,t]);return n}():function(){gf(em(),"useNavigate() may be used only in the context of a <Router> component.");let e=Lt.useContext(Gf),{basename:t,navigator:r}=Lt.useContext(Yf),{matches:n}=Lt.useContext(Qf),{pathname:i}=tm(),s=JSON.stringify(Ff(n)),o=Lt.useRef(!1);nm(()=>{o.current=!0});let a=Lt.useCallback((n,a={})=>{if(yf(o.current,rm),!o.current)return;if("number"==typeof n)return void r.go(n);let l=Bf(n,JSON.parse(s),i,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Uf([t,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)},[t,r,s,i,e]);return a}()}function sm(e,{relative:t}={}){let{matches:r}=Lt.useContext(Qf),{pathname:n}=tm(),i=JSON.stringify(Ff(r));return Lt.useMemo(()=>Bf(e,JSON.parse(i),n,"path"===t),[e,i,n,t])}function om(e,t,r,n,i){var s;gf(em(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Lt.useContext(Yf),{matches:a}=Lt.useContext(Qf),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",p=l&&l.route;{let e=p&&p.path||"";fm(u,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let h,f=tm();if(t){let e="string"==typeof t?Sf(t):t;gf("/"===d||(null==(s=e.pathname)?void 0:s.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),h=e}else h=f;let m=h.pathname||"/",v=m;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=Cf(e,{pathname:v});yf(p||null!=g,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),yf(null==g||void 0!==g[g.length-1].route.element||void 0!==g[g.length-1].route.Component||void 0!==g[g.length-1].route.lazy,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=function(e,t=[],r=null,n=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let i=e,s=null==r?void 0:r.errors;if(null!=s){let e=i.findIndex(e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id]));gf(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let o=!1,a=-1;if(r)for(let l=0;l<i.length;l++){let e=i[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(a=l),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){o=!0,i=a>=0?i.slice(0,a+1):[i[0]];break}}}return i.reduceRight((e,l,c)=>{let u,d=!1,p=null,h=null;r&&(u=s&&l.route.id?s[l.route.id]:void 0,p=l.route.errorElement||lm,o&&(a<0&&0===c?(fm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,h=null):a===c&&(d=!0,h=l.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,c+1)),m=()=>{let t;return t=u?p:d?h:l.route.Component?Lt.createElement(l.route.Component,null):l.route.element?l.route.element:e,Lt.createElement(um,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:t})};return r&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?Lt.createElement(cm,{location:r.location,revalidation:r.revalidation,component:p,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0},unstable_onError:n}):m()},null)}(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Uf([d,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Uf([d,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),a,r,n,i);return t&&y?Lt.createElement(Zf.Provider,{value:{location:Le({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},y):y}function am(){let e=function(){var e;let t=Lt.useContext(Xf),r=function(e){let t=Lt.useContext(Kf);return gf(t,dm(e)),t}("useRouteError"),n=pm("useRouteError");if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=Lt.createElement(Lt.Fragment,null,Lt.createElement("p",null," Hey developer "),Lt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Lt.createElement("code",{style:s},"ErrorBoundary")," or"," ",Lt.createElement("code",{style:s},"errorElement")," prop on your route.")),Lt.createElement(Lt.Fragment,null,Lt.createElement("h2",null,"Unexpected Application Error!"),Lt.createElement("h3",{style:{fontStyle:"italic"}},t),r?Lt.createElement("pre",{style:i},r):null,o)}Lt.createContext(null);var lm=Lt.createElement(am,null),cm=class extends Lt.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?Lt.createElement(Qf.Provider,{value:this.props.routeContext},Lt.createElement(Xf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function um({routeContext:e,match:t,children:r}){let n=Lt.useContext(Gf);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),Lt.createElement(Qf.Provider,{value:e},r)}function dm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pm(e){let t=function(e){let t=Lt.useContext(Qf);return gf(t,dm(e)),t}(e),r=t.matches[t.matches.length-1];return gf(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}var hm={};function fm(e,t,r){t||hm[e]||(hm[e]=!0,yf(!1,r))}function mm({to:e,replace:t,state:r,relative:n}){gf(em(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=Lt.useContext(Yf);yf(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=Lt.useContext(Qf),{pathname:o}=tm(),a=im(),l=Bf(e,Ff(s),o,"path"===n),c=JSON.stringify(l);return Lt.useEffect(()=>{a(JSON.parse(c),{replace:t,state:r,relative:n})},[a,c,n,t,r]),null}function vm(e){gf(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gm({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1}){gf(!em(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=Lt.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);"string"==typeof r&&(r=Sf(r));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:p="default"}=r,h=Lt.useMemo(()=>{let e=Lf(l,o);return null==e?null:{location:{pathname:e,search:c,hash:u,state:d,key:p},navigationType:n}},[o,l,c,u,d,p,n]);return yf(null!=h,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==h?null:Lt.createElement(Yf.Provider,{value:a},Lt.createElement(Zf.Provider,{children:t,value:h}))}function ym({children:e,location:t}){return om(bm(e),t)}function bm(e,t=[]){let r=[];return Lt.Children.forEach(e,(e,n)=>{if(!Lt.isValidElement(e))return;let i=[...t,n];if(e.type===Lt.Fragment)return void r.push.apply(r,bm(e.props.children,i));gf(e.type===vm,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gf(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=bm(e.props.children,i)),r.push(s)}),r}Lt.memo(function({routes:e,future:t,state:r,unstable_onError:n}){return om(e,void 0,r,n,t)});var xm="get",wm="application/x-www-form-urlencoded";function Sm(e){return null!=e&&"string"==typeof e.tagName}var Cm=null;var Em=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tm(e){return null==e||Em.has(e)?e:(yf(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wm}"`),null)}function Nm(e,t){let r,n,i,s,o;if(Sm(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");n=o?Lf(o,t):null,r=e.getAttribute("method")||xm,i=Tm(e.getAttribute("enctype"))||wm,s=new FormData(e)}else if(function(e){return Sm(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Sm(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(n=a?Lf(a,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||xm,i=Tm(e.getAttribute("formenctype"))||Tm(o.getAttribute("enctype"))||wm,s=new FormData(o,e),!function(){if(null===Cm)try{new FormData(document.createElement("form"),0),Cm=!1}catch(e){Cm=!0}return Cm}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,n)}}else{if(Sm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=xm,n=null,i=wm,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:o}}function Pm(e,t){if(!1===e||null==e)throw new Error(t)}function Rm(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function Im(e,t,r){return Ke(this,null,function*(){return function(e,t){let r=new Set;return new Set(t),e.reduce((e,t)=>{let n=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(t));return r.has(n)||(r.add(n),e.push({key:n,link:t})),e},[])}((yield Promise.all(e.map(e=>Ke(this,null,function*(){let n=t.routes[e.route.id];if(n){let e=yield function(e,t){return Ke(this,null,function*(){if(e.id in t)return t[e.id];try{let r=yield import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}(n,r);return e.links?e.links():[]}return[]})))).flat(1).filter(Rm).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?ze(Le({},e),{rel:"prefetch",as:"style"}):ze(Le({},e),{rel:"prefetch"})))})}function km(e,t,r,n,i,s){let o=(e,t)=>!r[t]||e.route.id!==r[t].route.id,a=(e,t)=>{var n;return r[t].pathname!==e.pathname||(null==(n=r[t].route.path)?void 0:n.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>o(e,t)||a(e,t)):"data"===s?t.filter((t,s)=>{var l;let c=n.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null==(l=r[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function _m(e,t,{includeHydrateFallback:r}={}){return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1),[...new Set(n)];var n}function Am(){let e=Lt.useContext(Gf);return Pm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jm=Lt.createContext(void 0);function Om(){let e=Lt.useContext(jm);return Pm(e,"You must render this element inside a <HydratedRouter> element"),e}function Dm(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Mm(e){var t=e,{page:r}=t,n=Fe(t,["page"]);let{router:i}=Am(),s=Lt.useMemo(()=>Cf(i.routes,r,i.basename),[i.routes,r,i.basename]);return s?Lt.createElement(Lm,Le({page:r,matches:s},n)):null}function Lm(e){var t=e,{page:r,matches:n}=t,i=Fe(t,["page","matches"]);let s=tm(),{manifest:o,routeModules:a}=Om(),{basename:l}=Am(),{loaderData:c,matches:u}=function(){let e=Lt.useContext(Kf);return Pm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),d=Lt.useMemo(()=>km(r,n,u,o,s,"data"),[r,n,u,o,s]),p=Lt.useMemo(()=>km(r,n,u,o,s,"assets"),[r,n,u,o,s]),h=Lt.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let e=new Set,t=!1;if(n.forEach(r=>{var n;let i=o.routes[r.route.id];i&&i.hasLoader&&(!d.some(e=>e.route.id===r.route.id)&&r.route.id in c&&(null==(n=a[r.route.id])?void 0:n.shouldRevalidate)||i.hasClientLoader?t=!0:e.add(r.route.id))}),0===e.size)return[];let i=function(e,t,r){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${r}`:t&&"/"===Lf(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}(r,l,"data");return t&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[l,c,s,o,d,n,r,a]),f=Lt.useMemo(()=>_m(p,o),[p,o]),m=function(e){let{manifest:t,routeModules:r}=Om(),[n,i]=Lt.useState([]);return Lt.useEffect(()=>{let n=!1;return Im(e,t,r).then(e=>{n||i(e)}),()=>{n=!0}},[e,t,r]),n}(p);return Lt.createElement(Lt.Fragment,null,h.map(e=>Lt.createElement("link",Le({key:e,rel:"prefetch",as:"fetch",href:e},i))),f.map(e=>Lt.createElement("link",Le({key:e,rel:"modulepreload",href:e},i))),m.map(({key:e,link:t})=>Lt.createElement("link",Le({key:e,nonce:i.nonce},t))))}function zm(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}jm.displayName="FrameworkContext";var Fm="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{Fm&&(window.__reactRouterVersion="7.9.5")}catch(Nie){}function Bm({basename:e,children:t,window:r}){let n=Lt.useRef();null==n.current&&(n.current=vf({window:r,v5Compat:!0}));let i=n.current,[s,o]=Lt.useState({action:i.action,location:i.location}),a=Lt.useCallback(e=>{Lt.startTransition(()=>o(e))},[o]);return Lt.useLayoutEffect(()=>i.listen(a),[i,a]),Lt.createElement(gm,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var Um=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wm=Lt.forwardRef(function(e,t){var r=e,{onClick:n,discover:i="render",prefetch:s="none",relative:o,reloadDocument:a,replace:l,state:c,target:u,to:d,preventScrollReset:p,viewTransition:h}=r,f=Fe(r,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"]);let m,{basename:v}=Lt.useContext(Yf),g="string"==typeof d&&Um.test(d),y=!1;if("string"==typeof d&&g&&(m=d,Fm))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),r=Lf(t.pathname,v);t.origin===e.origin&&null!=r?d=r+t.search+t.hash:y=!0}catch(Nie){yf(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=function(e,{relative:t}={}){gf(em(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=Lt.useContext(Yf),{hash:i,pathname:s,search:o}=sm(e,{relative:t}),a=s;return"/"!==r&&(a="/"===s?r:Uf([r,s])),n.createHref({pathname:a,search:o,hash:i})}(d,{relative:o}),[x,w,S]=function(e,t){let r=Lt.useContext(jm),[n,i]=Lt.useState(!1),[s,o]=Lt.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,p=Lt.useRef(null);Lt.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),Lt.useEffect(()=>{if(n){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[n]);let h=()=>{i(!0)},f=()=>{i(!1),o(!1)};return r?"intent"!==e?[s,p,{}]:[s,p,{onFocus:Dm(a,h),onBlur:Dm(l,f),onMouseEnter:Dm(c,h),onMouseLeave:Dm(u,f),onTouchStart:Dm(d,h)}]:[!1,p,{}]}(s,f),C=function(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=im(),l=tm(),c=sm(e,{relative:s});return Lt.useCallback(u=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(u,t)){u.preventDefault();let t=void 0!==r?r:wf(l)===wf(c);a(e,{replace:t,state:n,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,r,n,t,e,i,s,o])}(d,{replace:l,state:c,target:u,preventScrollReset:p,relative:o,viewTransition:h});let E=Lt.createElement("a",ze(Le(Le({},f),S),{href:m||b,onClick:y||a?n:function(e){n&&n(e),e.defaultPrevented||C(e)},ref:zm(t,w),target:u,"data-discover":g||"render"!==i?void 0:"true"}));return x&&!g?Lt.createElement(Lt.Fragment,null,E,Lt.createElement(Mm,{page:b})):E});Wm.displayName="Link",Lt.forwardRef(function(e,t){var r=e,{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=r,d=Fe(r,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let p=sm(l,{relative:d.relative}),h=tm(),f=Lt.useContext(Kf),{navigator:m,basename:v}=Lt.useContext(Yf),g=null!=f&&function(e,{relative:t}={}){let r=Lt.useContext(Jf);gf(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=$m("useViewTransitionState"),i=sm(e,{relative:t});if(!r.isTransitioning)return!1;let s=Lf(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Lf(r.nextLocation.pathname,n)||r.nextLocation.pathname;return null!=Df(i.pathname,o)||null!=Df(i.pathname,s)}(p)&&!0===c,y=m.encodeLocation?m.encodeLocation(p).pathname:p.pathname,b=h.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;i||(b=b.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&v&&(x=Lf(x,v)||x);const w="/"!==y&&y.endsWith("/")?y.length-1:y.length;let S,C=b===y||!o&&b.startsWith(y)&&"/"===b.charAt(w),E=null!=x&&(x===y||!o&&x.startsWith(y)&&"/"===x.charAt(y.length)),T={isActive:C,isPending:E,isTransitioning:g},N=C?n:void 0;S="function"==typeof s?s(T):[s,C?"active":null,E?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let P="function"==typeof a?a(T):a;return Lt.createElement(Wm,ze(Le({},d),{"aria-current":N,className:S,ref:t,style:P,to:l,viewTransition:c}),"function"==typeof u?u(T):u)}).displayName="NavLink";var Hm=Lt.forwardRef((e,t)=>{var r=e,{discover:n="render",fetcherKey:i,navigate:s,reloadDocument:o,replace:a,state:l,method:c=xm,action:u,onSubmit:d,relative:p,preventScrollReset:h,viewTransition:f}=r,m=Fe(r,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"]);let v=function(){let{router:e}=$m("useSubmit"),{basename:t}=Lt.useContext(Yf),r=pm("useRouteId");return Lt.useCallback((n,...i)=>Ke(this,[n,...i],function*(n,i={}){let{action:s,method:o,encType:a,formData:l,body:c}=Nm(n,t);if(!1===i.navigate){let t=i.fetcherKey||qm();yield e.fetch(t,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else yield e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[e,t,r])}(),g=function(e,{relative:t}={}){let{basename:r}=Lt.useContext(Yf),n=Lt.useContext(Qf);gf(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s=Le({},sm(e||".",{relative:t})),o=tm();if(null==e){s.search=o.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();s.search=r?`?${r}`:""}}e&&"."!==e||!i.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(s.pathname="/"===s.pathname?r:Uf([r,s.pathname]));return wf(s)}(u,{relative:p}),y="get"===c.toLowerCase()?"get":"post",b="string"==typeof u&&Um.test(u);return Lt.createElement("form",ze(Le({ref:t,method:y,action:g,onSubmit:o?d:e=>{if(d&&d(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=(null==t?void 0:t.getAttribute("formmethod"))||c;v(t||e.currentTarget,{fetcherKey:i,method:r,navigate:s,replace:a,state:l,relative:p,preventScrollReset:h,viewTransition:f})}},m),{"data-discover":b||"render"!==n?void 0:"true"}))});function $m(e){let t=Lt.useContext(Gf);return gf(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}Hm.displayName="Form";var Vm=0,qm=()=>`__${String(++Vm)}__`;const Gm=e=>{const t=e.startsWith("/")?e:`/${e}`;return`/api${t}`},Km=(e,...t)=>Ke(void 0,[e,...t],function*(e,t={}){const r=Gm(e),n=localStorage.getItem("authToken"),i=ze(Le({},t),{headers:Le(Le({"Content-Type":"application/json"},n&&{Authorization:`Bearer ${n}`}),t.headers),credentials:"include",mode:"cors"});console.log(` API Request: ${t.method||"GET"} ${r}`);try{const e=yield fetch(r,i);if(!e.ok){const t=yield e.text();if(console.error(` API Error: ${e.status} ${e.statusText}`),401===e.status)throw localStorage.removeItem("authToken"),new Error("AUTHENTICATION_ERROR");throw new Error(`API Error ${e.status}: ${t}`)}const n=yield e.json();return console.log(` API Response: ${t.method||"GET"} ${r}`),n}catch(s){throw console.error(` API Request Failed: ${t.method||"GET"} ${r}`,s),s}}),Jm={get:e=>Km(e,{method:"GET"}),post:(e,t)=>Km(e,{method:"POST",body:t?JSON.stringify(t):void 0}),put:(e,t)=>Km(e,{method:"PUT",body:t?JSON.stringify(t):void 0}),delete:e=>Km(e,{method:"DELETE"})},Ym={login:e=>Jm.post("/auth/login",e),logout:()=>Jm.post("/auth/logout"),me:()=>Jm.get("/auth/me")},Zm={get:e=>Km(e,{method:"GET"}),post:(e,t)=>Km(e,{method:"POST",body:t?JSON.stringify(t):void 0}),put:(e,t)=>Km(e,{method:"PUT",body:t?JSON.stringify(t):void 0}),delete:e=>Km(e,{method:"DELETE"}),login:e=>Km("/auth/login",{method:"POST",body:JSON.stringify(e)})};console.log(" Simple API Client:",{isDevelopment:!1,isProduction:!0,API_BASE_URL:"",VITE_API_BASE_URL:"",exampleUrl:Gm("/health"),loginUrl:Gm("/auth/login")});const Qm=Object.freeze(Object.defineProperty({__proto__:null,api:Jm,apiRequest:Km,authApi:Ym,buildApiUrl:Gm,userApi:Zm},Symbol.toStringTag,{value:"Module"})),Xm=e=>Ke(void 0,null,function*(){try{console.log(" :",{username:e.username});const t=yield Ym.login(e);if(t.token||t.accessToken){const e=t.token||t.accessToken;localStorage.setItem("authToken",e),console.info("[auth] token saved to authToken:",!!e)}return console.log(" :",t),t}catch(t){if(console.error(" Login error:",t),t instanceof Error){if(t.message.includes("500"))throw new Error("");if(t.message.includes("401"))throw new Error("");if(t.message.includes("fetch"))throw new Error("");throw t}throw new Error("")}}),ev=()=>Ke(void 0,null,function*(){try{console.log(" ");const e=yield Ym.me();return console.log(" :",e),e}catch(e){return console.warn(" :",e),e instanceof Error&&e.message.includes("401")?(console.log("  (401) - "),null):e instanceof Error&&e.message.includes("500")?(console.warn("  (500) - "),null):null}}),tv=Xm,rv=ev,nv=Lt.createContext(void 0);function iv({children:e}){const[t,r]=Lt.useState(null),[n,i]=Lt.useState(!0),[s,o]=Lt.useState(!1),[a,l]=Lt.useState(null);Lt.useEffect(()=>{(()=>{Ke(this,null,function*(){try{i(!0);if(localStorage.getItem("authToken")){console.log(" ...");try{const e=yield ev();e&&e.success&&e.user?(console.log(" "),r({id:e.user.id,username:e.user.username,displayName:e.user.displayName||e.user.display_name,role:e.user.role,department:e.user.department})):(console.log(" "),localStorage.removeItem("authToken"),r(null))}catch(e){console.log(" :",e),localStorage.removeItem("authToken"),r(null)}}else console.log(" "),r(null)}catch(e){console.warn(" :",e),r(null)}finally{i(!1),o(!0)}})})()},[]);const c=(e,t)=>Ke(this,null,function*(){console.log(" :",{username:e});try{i(!0);const n=yield Xm({username:e,password:t});if(console.log(" :",n),!(n&&n.success&&n.user))throw console.log(" :",n),new Error("");{const e=n.token||n.accessToken;e&&(localStorage.setItem("authToken",e),console.log(" localStorage")),r({id:n.user.id,username:n.user.username,displayName:n.user.displayName||n.user.display_name,role:n.user.role,department:n.user.department})}}catch(n){throw console.error(" :",n),r(null),n}finally{i(!1)}}),u=()=>Ke(this,null,function*(){console.log(" ");try{yield Ke(void 0,null,function*(){try{console.log(" "),localStorage.removeItem("authToken"),yield Ym.logout(),console.log(" ")}catch(e){throw console.error(" Logout error:",e),new Error("")}}),console.log(" ")}catch(e){console.error(" :",e)}finally{localStorage.removeItem("authToken"),console.log(" localStorage"),r(null)}});return n?Gt.jsx(nv.Provider,{value:{user:t,isLoading:n,login:c,logout:u,authMode:a},children:Gt.jsx("div",{className:"flex justify-center items-center h-screen",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-600",children:"..."})]})})}):Gt.jsx(nv.Provider,{value:{user:t,isLoading:n,login:c,logout:u,authMode:a},children:e})}function sv(){const e=Lt.useContext(nv);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}let ov=0;const av=new Map,lv=e=>{if(av.has(e))return;const t=setTimeout(()=>{av.delete(e),pv({type:"REMOVE_TOAST",toastId:e})},1e6);av.set(e,t)},cv=(e,t)=>{switch(t.type){case"ADD_TOAST":return ze(Le({},e),{toasts:[t.toast,...e.toasts].slice(0,1)});case"UPDATE_TOAST":return ze(Le({},e),{toasts:e.toasts.map(e=>e.id===t.toast.id?Le(Le({},e),t.toast):e)});case"DISMISS_TOAST":{const{toastId:r}=t;return r?lv(r):e.toasts.forEach(e=>{lv(e.id)}),ze(Le({},e),{toasts:e.toasts.map(e=>e.id===r||void 0===r?ze(Le({},e),{open:!1}):e)})}case"REMOVE_TOAST":return void 0===t.toastId?ze(Le({},e),{toasts:[]}):ze(Le({},e),{toasts:e.toasts.filter(e=>e.id!==t.toastId)})}},uv=[];let dv={toasts:[]};function pv(e){dv=cv(dv,e),uv.forEach(e=>{e(dv)})}function hv(e){var t=Fe(e,[]);const r=(ov=(ov+1)%Number.MAX_SAFE_INTEGER,ov.toString()),n=()=>pv({type:"DISMISS_TOAST",toastId:r});return pv({type:"ADD_TOAST",toast:ze(Le({},t),{id:r,open:!0,onOpenChange:e=>{e||n()}})}),{id:r,dismiss:n,update:e=>pv({type:"UPDATE_TOAST",toast:ze(Le({},e),{id:r})})}}function fv(){const[e,t]=Lt.useState(dv);return Lt.useEffect(()=>(uv.push(t),()=>{const e=uv.indexOf(t);e>-1&&uv.splice(e,1)}),[]),ze(Le({},e),{toast:hv,dismiss:e=>pv({type:"DISMISS_TOAST",toastId:e})})}class mv{constructor(){Be(this,"recognition",null),Be(this,"sendToServer",null)}start(){return Ke(this,null,function*(){if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))throw new Error("");const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="ja-JP",this.recognition.onresult=e=>{for(let t=e.resultIndex;t<e.results.length;t++)e.results[t].isFinal&&this.sendToServer&&this.sendToServer(e.results[t][0].transcript)},this.recognition.onerror=e=>{console.error("Web Speech:",e.error)},this.recognition.start()})}stop(){this.recognition&&(this.recognition.stop(),this.recognition=null)}}class vv{constructor(e,t){Be(this,"recognizer",null),Be(this,"sendToServer",null),this.subscriptionKey=e,this.region=t}start(){return Ke(this,null,function*(){try{const e=yield ff(()=>Promise.resolve().then(()=>PO),[]),t=e.SpeechConfig.fromSubscription(this.subscriptionKey,this.region);t.speechRecognitionLanguage="ja-JP";const r=e.AudioConfig.fromDefaultMicrophoneInput();this.recognizer=new e.SpeechRecognizer(t,r),this.recognizer.recognizing=(e,t)=>{},this.recognizer.recognized=(t,r)=>{r.result.reason===e.ResultReason.RecognizedSpeech&&this.sendToServer&&this.sendToServer(r.result.text)},this.recognizer.startContinuousRecognitionAsync()}catch(e){throw console.error("Azure Speech SDK:",e),e}})}stop(){this.recognizer&&(this.recognizer.stopContinuousRecognitionAsync(),this.recognizer=null)}}let gv=null;const yv=()=>{gv&&(gv.stop(),gv=null)},bv=()=>{gv&&(gv.stop(),gv=null)},xv=Lt.createContext(null),wv=()=>{const e=Lt.useContext(xv);return null===e?(console.error("ChatContext is null - this likely means useChat was called outside of the ChatProvider"),{messages:[],isLoading:!1,searching:!1,searchResults:[],selectedText:"",setSelectedText:()=>{},sendMessage:()=>Ke(void 0,null,function*(){}),startRecording:()=>{},stopRecording:()=>{},isRecording:!1,recordedText:"",searchBySelectedText:()=>Ke(void 0,null,function*(){}),clearSearchResults:()=>{},captureImage:()=>Ke(void 0,null,function*(){}),exportChatHistory:()=>Ke(void 0,null,function*(){}),exportFormattedData:()=>Ke(void 0,null,function*(){return{}}),lastExportTimestamp:null,isExporting:!1,hasUnexportedMessages:!1,sendEmergencyGuide:()=>Ke(void 0,null,function*(){}),sendFlowExecutionResult:()=>Ke(void 0,null,function*(){}),draftMessage:null,setDraftMessage:()=>{},clearChatHistory:()=>Ke(void 0,null,function*(){}),isClearing:!1,initializeChat:()=>Ke(void 0,null,function*(){return""}),chatId:null}):e},Sv=({children:e})=>{const[t,r]=Lt.useState([]),[n,i]=Lt.useState(!1),[s,o]=Lt.useState(!1),[a,l]=Lt.useState(""),[c,u]=Lt.useState(""),[d,p]=Lt.useState(!1),[h,f]=Lt.useState([]),[m,v]=Lt.useState(null),[g,y]=Lt.useState(!1),[b,x]=Lt.useState(!1),[w,S]=Lt.useState(null),[C,E]=Lt.useState(!1),[T,N]=Lt.useState(!1),[P,R]=Lt.useState([]),[I,k]=Lt.useState(null),{toast:_}=fv(),A=of(),[j,O]=Lt.useState(""),[D,M]=Lt.useState(null),[L,z]=Lt.useState([]),[F,B]=Lt.useState(!1),[U,W]=Lt.useState(0),[H,$]=Lt.useState(!1),[V,q]=Lt.useState(""),[G,K]=Lt.useState(!1),[J,Y]=Lt.useState(Date.now()),[Z,Q]=Lt.useState(null),[X,ee]=Lt.useState([]),[te,re]=Lt.useState(null),ne=Lt.useCallback(()=>Ke(void 0,null,function*(){try{E(!0);const e=(()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))();return S(e),console.log(" ID:",e),e}catch(e){console.error(" Failed to initialize chat:",e);const t=(()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))();return S(t),console.log(" ID:",t),t}finally{E(!1)}}),[]);Lt.useEffect(()=>{ne()},[ne]),Lt.useEffect(()=>{w&&!C&&(console.log(` : chatId=${w}`),r(e=>0===e.length?(console.log(""),[]):(console.log(`${e.length}`),e)),f([]),v(null),x(!1))},[w,C]),Lt.useEffect(()=>{let e=!1,t=null;const r=r=>{if(e)console.log("");else if(r.detail&&"string"==typeof r.detail.content){const{content:n}=r.detail;if(!n.trim())return void k(null);e=!0;const i=(null==I?void 0:I.media)||[];k({content:n,media:i}),t&&clearTimeout(t),t=setTimeout(()=>{e=!1},300)}},n=e=>{console.log(""),k(null),l(""),O(""),z([]),B(!1),K(!1),yv(),bv()};return window.addEventListener("update-draft-message",r),window.addEventListener("clear-draft-message",n),()=>{t&&clearTimeout(t),window.removeEventListener("update-draft-message",r),window.removeEventListener("clear-draft-message",n)}},[I]),Lt.useCallback((e,t=!1)=>Ke(void 0,null,function*(){console.log(" ")}),[]);const ie=Lt.useCallback(()=>{f([])},[]);Lt.useCallback(()=>Ke(void 0,null,function*(){try{const e=new Event("open-camera");return window.dispatchEvent(e),Promise.resolve()}catch(e){return console.error(":",e),_({title:"",description:"",variant:"destructive"}),Promise.resolve()}}),[_]),Lt.useCallback(e=>{console.log(" :",{id:e.id,hasContent:!!e.content,contentType:typeof e.content,hasText:!!e.text,hasMessage:!!e.message,messageKeys:Object.keys(e||{}),fullMessage:e});let t="";if("string"==typeof e.content&&e.content.trim())t=e.content,console.log(" content:",t.substring(0,50)+"...");else if("string"==typeof e.text&&e.text.trim())t=e.text,console.log(" text:",t.substring(0,50)+"...");else if("string"==typeof e.message&&e.message.trim())t=e.message,console.log(" message:",t.substring(0,50)+"...");else if(e.choices&&Array.isArray(e.choices)&&e.choices.length>0){const r=e.choices[0];r.message&&"string"==typeof r.message.content&&(t=r.message.content,console.log(" OpenAI API:",t.substring(0,50)+"..."))}else if("object"==typeof e.content&&null!==e.content)if(console.warn(" content:",e.content),e.content.preview&&"string"==typeof e.content.preview)t=e.content.preview,console.log(" preview:",t.substring(0,50)+"...");else if(e.content.url&&"string"==typeof e.content.url)t=e.content.url,console.log(" url:",t);else{const r=e.content.text||e.content.content||e.content.message||e.content.data||e.content.response||e.content.answer;"string"==typeof r&&r.trim()?(t=r,console.log(" :",t.substring(0,50)+"...")):(t=JSON.stringify(e.content,null,2),console.log(" JSON"))}else console.error(" :",{message:e,contentType:typeof e.content,hasText:!!e.text,hasMessage:!!e.message,hasChoices:!!e.choices}),console.log("  - :",{messageKeys:Object.keys(e),contentKeys:e.content?Object.keys(e.content):"content is null/undefined",textType:typeof e.text,messageType:typeof e.message}),t=`[ - : ${JSON.stringify({id:e.id,keys:Object.keys(e),contentType:typeof e.content})}]`;t&&t.trim()||(t="[]",console.warn(" "));const r=ze(Le({},e),{content:t,text:t,timestamp:e.timestamp?new Date(e.timestamp):new Date(e.createdAt||new Date)});return console.log(" :",{id:r.id,contentLength:t.length,contentPreview:t.substring(0,100)+"...",originalMessageType:typeof e.content,normalizedSuccessfully:!!t&&t.trim().length>0}),r},[]);const se=Lt.useCallback((e,t,n=!1)=>Ke(void 0,null,function*(){if(!e||"string"!=typeof e)return console.error(":",e),void _({title:"",description:"",variant:"destructive"});if(e.trim()||t&&0!==t.length){i(!0);try{let i=w;if(!i&&(console.log("ID"),i=yield ne(),!i))throw new Error("ID");const s=Date.now();let o=[];t&&t.length>0&&(o=t.map((t,r)=>({id:`media_${s}_${r}`,type:t.type,url:t.url,thumbnail:t.thumbnail||t.url,fileName:`${t.type}_${s}_${r}`,title:e.substring(0,50)||`${t.type}`})));const a={id:s,chatId:i,content:e.trim(),text:e.trim(),isAiResponse:n,senderId:n?"ai":"user",timestamp:new Date,media:o};console.log(" :",{id:a.id,content:a.content.substring(0,50)+"...",isAiResponse:a.isAiResponse,mediaCount:o.length}),r(e=>[...e,a]),e.trim()&&(localStorage.setItem("lastSearchKeyword",e.trim()),console.log(" :",e.trim())),setTimeout(()=>{const e=document.getElementById("chatMessages");e&&(e.scrollTop=e.scrollHeight,console.log(""))},100)}catch(s){console.error(":",s),_({title:"",description:s instanceof Error?s.message:"",variant:"destructive"})}finally{i(!1)}}else console.log("")}),[w,ne,f,_]),oe=Lt.useCallback(()=>{try{null==I||I.media;((e,t)=>{try{const t="",r="japaneast";if(!t)throw new Error("Azure Speech API");gv=new vv(t,r),gv.sendToServer=e,gv.start()}catch(r){console.error("Azure Speech:",r),t(r instanceof Error?r.message:"")}})(e=>Ke(void 0,null,function*(){if(!e.trim())return;console.log(" :",e),Y(Date.now()),Z&&clearTimeout(Z);const t=setTimeout(()=>{Date.now()-J>=1e4&&(console.log(" "),yv(),bv(),o(!1),k(null),z([]),ee([]),O(""),l(""))},1e4);Q(t),ee(t=>{if(t.includes(e))return console.log(" :",e),t;const r=[...t,e];console.log(" :",r),te&&clearTimeout(te);const i=setTimeout(()=>{if(n)return void console.log(" ");const e=r.join(" ").trim();e&&e.length>2&&(console.log(" :",e),se(e),ee([]))},200);return re(i),r})}),e=>{console.log("Azure:",e),_({title:"API",duration:1e3}),yv(),l(""),O(""),z([]),ee([]),B(!1),((t,r)=>{try{gv=new mv,gv.sendToServer=t,gv.start()}catch(e){console.error("Web Speech:",e),r(e instanceof Error?e.message:"")}})(e=>Ke(void 0,null,function*(){if(!e.trim())return;Y(Date.now()),Z&&clearTimeout(Z);const t=setTimeout(()=>{Date.now()-J>=1e3&&(yv(),bv(),o(!1),k(null),z([]),ee([]),O(""),l(""))},1e3);Q(t),ee(t=>{const r=[...t,e];te&&clearTimeout(te);const n=setTimeout(()=>{const e=r.join(" ");se(e),ee([])},200);return re(n),r})}),e=>{_({title:"",description:e,variant:"destructive"}),o(!1)})})}catch(e){console.error(":",e),o(!1),_({title:"",description:"",variant:"destructive"})}},[null==I?void 0:I.media,J,Z,te,se,_]);Lt.useCallback(()=>{o(!0),l(""),O(""),z([]),ee([]),B(!1),Y(Date.now()),oe()},[oe]),Lt.useCallback(()=>{if(o(!1),X.length>0){const e=X.join(" ");se(e)}l(""),O(""),z([]),ee([]),yv(),bv(),Z&&(clearTimeout(Z),Q(null)),te&&(clearTimeout(te),re(null))},[Z,te,X,se]);const ae=Lt.useCallback(()=>Ke(void 0,null,function*(){try{if(!w)return console.error(": chatId"),_({title:"",description:"ID",variant:"destructive"}),null;console.log(":",w),y(!0);const e=yield Km(`/api/chats/${w}/export`,{method:"POST"});return console.log(":",e),_({title:"",description:""}),v(new Date),x(!1),e}catch(e){return console.error(":",e),_({title:"",description:e instanceof Error?e.message:"",variant:"destructive"}),null}finally{y(!1)}}),[w,_]);Lt.useCallback(()=>Ke(void 0,null,function*(){try{if(!w)return{};return yield Km(`/api/chats/${w}/formatted-export`,{method:"GET"})}catch(e){return console.error(":",e),{}}}),[w]);const le=Lt.useCallback(e=>Ke(void 0,null,function*(){var t;try{if(!w){if(!(yield ne()))throw new Error("")}i(!0);const s=w||"1";console.log(": ID",s,"");const o=Date.now(),a=`${e.title}`,l={id:o,chatId:s,content:a,text:a,isAiResponse:!1,senderId:"user",timestamp:new Date},c=(null==(t=e.steps)?void 0:t.filter(e=>e.imageUrl&&e.imageUrl.trim()).map((e,t)=>({id:`guide_img_${t}`,type:"image",url:e.imageUrl,thumbnail:e.imageUrl,title:e.title||`${t+1}`,fileName:e.imageFileName})))||[];console.log(" :",c.length,"");const u=` \n\n**${e.title}**\n\n${e.content}\n\n---\n**AI**: `,d={id:o+1,chatId:s,content:u,text:u,isAiResponse:!0,senderId:"ai",timestamp:new Date,media:c};console.log(" ChatMessage:"),console.log("- :",l),console.log("- AI:",d),console.log("- :",c.length),r(e=>{console.log("  - :",e.length);const t=[...e,l,d];return console.log(" :",t.length,""),t});try{const t=yield fetch("/api/emergency-guide/send",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},body:JSON.stringify({chatId:s,guideData:{title:e.title,content:e.content,steps:e.steps||[],images:c}})});if(t.ok){const e=yield t.json();console.log(": ",e)}else console.warn(""),console.error(":",t.status,t.statusText)}catch(n){console.error("API:",n)}console.log("  - "),_({title:"",description:""}),setTimeout(()=>{const e=document.getElementById("chatMessages");e&&(e.scrollTop=e.scrollHeight,console.log(""))},100),window.dispatchEvent(new CustomEvent("emergency-guide-sent",{detail:{guideData:e,timestamp:new Date,success:!0,userMessage:l,aiMessage:d}}))}catch(s){console.error(":",s),_({title:"",description:"",variant:"destructive"})}finally{i(!1)}}),[w,ne,r,f,_]),ce=Lt.useCallback(e=>Ke(void 0,null,function*(){var t,n;try{if(!w){if(!(yield ne()))throw new Error("")}i(!0);const s=w||"1";console.log(": ID",s,"");const o=Date.now(),a=e.isPartial?`${e.title}`:`${e.title}`,l={id:o,chatId:s,content:a,text:a,isAiResponse:!1,senderId:"user",timestamp:new Date},c=(null==(t=e.executedSteps)?void 0:t.flatMap(e=>{const t=[];return e.imageUrl&&e.imageUrl.trim()&&t.push({id:`flow_img_${e.stepId}_url`,type:"image",url:e.imageUrl,thumbnail:e.imageUrl,title:e.title||"",fileName:`step_${e.stepId}.jpg`}),e.images&&Array.isArray(e.images)&&e.images.forEach((r,n)=>{r.url&&r.url.trim()&&t.push({id:`flow_img_${e.stepId}_${n}`,type:"image",url:r.url,thumbnail:r.url,title:e.title||`${n+1}`,fileName:r.fileName||`step_${e.stepId}_${n}.jpg`})}),t}))||[];console.log(" :",c.length,"");const u=(null==(n=e.executedSteps)?void 0:n.map((e,t)=>{let r=`${t+1}. **${e.title}**\n${e.message}`;return e.selectedCondition&&(r+=`\n: ${e.selectedCondition}`),r}).join("\n\n"))||"",d=e.isPartial?` \n\n**${e.title}**\n\n**:**\n${u}\n\n**:** ${e.completedAt.toLocaleString("ja-JP")}\n\n---\n**AI**: `:` \n\n**${e.title}**\n\n**:**\n${u}\n\n**:** ${e.completedAt.toLocaleString("ja-JP")}\n\n---\n**AI**: `,p={id:o+1,chatId:s,content:d,text:d,isAiResponse:!0,senderId:"ai",timestamp:new Date,media:c};console.log(" :"),console.log("- :",l),console.log("- AI:",p),console.log("- :",c.length),console.log(" :",{chatId:s,title:`: ${e.title}`,description:a,emergencyGuideTitle:e.title,emergencyGuideContent:d,images:c.length}),r(e=>{console.log("  - :",e.length);const t=[...e,l,p];return console.log(" :",t.length,""),t}),_({title:e.isPartial?"":"",description:e.isPartial?"":""}),setTimeout(()=>{const e=document.getElementById("chatMessages");e&&(e.scrollTop=e.scrollHeight,console.log(""))},100),window.dispatchEvent(new CustomEvent("flow-execution-sent",{detail:{flowData:e,timestamp:new Date,success:!0,userMessage:l,aiMessage:p}}))}catch(s){console.error(":",s),_({title:"",description:"",variant:"destructive"})}finally{i(!1)}}),[w,ne,r,_]);Lt.useEffect(()=>{const e=e=>{console.log(" :",e.detail)},t=e=>{console.log(" :",e.detail),ce(e.detail)};return window.addEventListener("emergency-guide-sent",e),window.addEventListener("emergency-guide-completed",t),()=>{window.removeEventListener("emergency-guide-sent",e),window.removeEventListener("emergency-guide-completed",t)}},[ce]);const ue=Lt.useCallback(()=>Ke(void 0,null,function*(){try{N(!0),console.log(" : "),console.log(" "),r([]),f([]),v(null),x(!1),R([]),k(null),l(""),u(""),ie();try{A.removeQueries({queryKey:[`/api/chats/${w}/messages`]}),A.removeQueries({queryKey:["search_results"]}),A.invalidateQueries({queryKey:[`/api/chats/${w}/messages`]}),A.clear(),console.log(" ")}catch(e){console.warn(":",e)}console.log(" "),_({title:"",description:""})}catch(t){console.error(" :",t),r([]),f([]),x(!1),_({title:"",description:"",variant:"destructive"})}finally{N(!1)}}),[w,ie,_,A]);Lt.useEffect(()=>{w&&!T&&(console.log(" "),r([]),f([]),v(null),x(!1))},[w,T]);const de=Lt.useCallback(()=>Ke(void 0,null,function*(){console.log(" ")}),[w]);Lt.useEffect(()=>{de()},[de]),Lt.useEffect(()=>{if(t.length>0&&m){const e=t.some(e=>new Date(e.timestamp)>m);x(e)}else t.length>0?x(!0):x(!1)},[t,m]);const pe={messages:t,setMessages:r,sendMessage:se,isLoading:n,clearChatHistory:ue,isClearing:T,chatId:w,initializeChat:ne,exportChatHistory:ae,searchResults:h,setSearchResults:f,searching:d,setSearching:p,sendEmergencyGuide:le};return Gt.jsx(xv.Provider,{value:pe,children:e})};function Cv({children:e,requireAdmin:t=!1}){const{user:r,isLoading:n}=sv(),i=tm();return console.log(" ProtectedRoute - :",{isLoading:n,hasUser:!!r,username:null==r?void 0:r.username,role:null==r?void 0:r.role,requireAdmin:t,currentPath:i.pathname,timestamp:(new Date).toISOString()}),n?(console.log(" ProtectedRoute - ..."),Gt.jsx("div",{className:"flex justify-center items-center h-screen",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-600",children:"..."})]})})):r?t&&"admin"!==r.role&&"employee"!==r.role?(console.log(" ProtectedRoute - "),Gt.jsx(mm,{to:"/chat",replace:!0})):(console.log(" ProtectedRoute - OK"),Gt.jsx(Gt.Fragment,{children:e})):(console.log(" ProtectedRoute - "),Gt.jsx(mm,{to:"/login",state:{from:i},replace:!0}))}function Ev({children:e}){const{user:t,isLoading:r}=sv();return console.log(" AdminRoute - :",{isLoading:r,hasUser:!!t,role:null==t?void 0:t.role,isAdmin:"admin"===(null==t?void 0:t.role)}),r?Gt.jsx("div",{className:"flex justify-center items-center h-screen",children:Gt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):t?"admin"!==t.role&&"employee"!==t.role?(console.log(" AdminRoute - "),Gt.jsx(mm,{to:"/chat",replace:!0})):(console.log(" AdminRoute - OK"),Gt.jsx(Gt.Fragment,{children:e})):(console.log(" AdminRoute - "),Gt.jsx(mm,{to:"/login",replace:!0}))}function Tv(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Nv(...e){return t=>{let r=!1;const n=e.map(e=>{const n=Tv(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){const r=n[t];"function"==typeof r?r():Tv(e[t],null)}}}}function Pv(...e){return Lt.useCallback(Nv(...e),e)}var Rv=Symbol.for("react.lazy"),Iv=Ft[" use ".trim().toString()];function kv(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===Rv&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function _v(e){const t=jv(e),r=Lt.forwardRef((e,r)=>{let n=e,{children:i}=n,s=Fe(n,["children"]);kv(i)&&"function"==typeof Iv&&(i=Iv(i._payload));const o=Lt.Children.toArray(i),a=o.find(Dv);if(a){const e=a.props.children,n=o.map(t=>t===a?Lt.Children.count(e)>1?Lt.Children.only(null):Lt.isValidElement(e)?e.props.children:null:t);return Gt.jsx(t,ze(Le({},s),{ref:r,children:Lt.isValidElement(e)?Lt.cloneElement(e,void 0,n):null}))}return Gt.jsx(t,ze(Le({},s),{ref:r,children:i}))});return r.displayName=`${e}.Slot`,r}var Av=_v("Slot");function jv(e){const t=Lt.forwardRef((e,t)=>{let r=e,{children:n}=r,i=Fe(r,["children"]);if(kv(n)&&"function"==typeof Iv&&(n=Iv(n._payload)),Lt.isValidElement(n)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const r=Le({},t);for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]=Le(Le({},i),s):"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return Le(Le({},e),r)}(i,n.props);return n.type!==Lt.Fragment&&(r.ref=t?Nv(t,e):e),Lt.cloneElement(n,r)}return Lt.Children.count(n)>1?Lt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ov=Symbol("radix.slottable");function Dv(e){return Lt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Ov}function Mv(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Mv(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Lv(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Mv(e))&&(n&&(n+=" "),n+=t);return n}const zv=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Fv=Lv,Bv=(e,t)=>r=>{var n;if(null==(null==t?void 0:t.variants))return Fv(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(e=>{const t=null==r?void 0:r[e],n=null==s?void 0:s[e];if(null===t)return null;const o=zv(t)||zv(n);return i[e][o]}),a=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let r=t,{class:n,className:i}=r,o=Fe(r,["class","className"]);return Object.entries(o).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes(Le(Le({},s),a)[t]):Le(Le({},s),a)[t]===r})?[...e,n,i]:e},[]);return Fv(e,o,l,null==r?void 0:r.class,null==r?void 0:r.className)},Uv=(e,t)=>{var r;if(0===e.length)return t.classGroupId;const n=e[0],i=t.nextPart.get(n),s=i?Uv(e.slice(1),i):void 0;if(s)return s;if(0===t.validators.length)return;const o=e.join("-");return null==(r=t.validators.find(({validator:e})=>e(o)))?void 0:r.classGroupId},Wv=/^\[(.+)\]$/,Hv=e=>{if(Wv.test(e)){const t=Wv.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},$v=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Kv(Object.entries(e.classGroups),r).forEach(([e,r])=>{Vv(r,n,e,t)}),n},Vv=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:qv(t,e)).classGroupId=r)}if("function"==typeof e)return Gv(e)?void Vv(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,i])=>{Vv(i,qv(t,e),r,n)})})},qv=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},Gv=e=>e.isThemeGetter,Kv=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,Jv=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(i,s)=>{r.set(i,s),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(i(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):i(e,t)}}},Yv=e=>{const{separator:t,experimentalParseClassName:r}=e,n=1===t.length,i=t[0],s=t.length,o=e=>{const r=[];let o,a=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===a){if(c===i&&(n||e.slice(d,d+s)===t)){r.push(e.slice(l,d)),l=d+s;continue}if("/"===c){o=d;continue}}"["===c?a++:"]"===c&&a--}const c=0===r.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:r,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:o&&o>l?o-l:void 0}};return r?e=>r({className:e,parseClassName:o}):o},Zv=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},Qv=e=>Le({cache:Jv(e.cacheSize),parseClassName:Yv(e)},(e=>{const t=$v(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),Uv(r,t)||Hv(e)},getConflictingClassGroupIds:(e,t)=>{const i=r[e]||[];return t&&n[e]?[...i,...n[e]]:i}}})(e)),Xv=/\s+/;function eg(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=tg(e))&&(n&&(n+=" "),n+=t);return n}const tg=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=tg(e[n]))&&(r&&(r+=" "),r+=t);return r};function rg(e,...t){let r,n,i,s=function(a){const l=t.reduce((e,t)=>t(e),e());return r=Qv(l),n=r.cache.get,i=r.cache.set,s=o,o(a)};function o(e){const t=n(e);if(t)return t;const s=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,s=[],o=e.trim().split(Xv);let a="";for(let l=o.length-1;l>=0;l-=1){const e=o[l],{modifiers:t,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=r(e);let p=Boolean(d),h=n(p?u.substring(0,d):u);if(!h){if(!p){a=e+(a.length>0?" "+a:a);continue}if(h=n(u),!h){a=e+(a.length>0?" "+a:a);continue}p=!1}const f=Zv(t).join(":"),m=c?f+"!":f,v=m+h;if(s.includes(v))continue;s.push(v);const g=i(h,p);for(let r=0;r<g.length;++r){const e=g[r];s.push(m+e)}a=e+(a.length>0?" "+a:a)}return a})(e,r);return i(e,s),s}return function(){return s(eg.apply(null,arguments))}}const ng=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},ig=/^\[(?:([a-z-]+):)?(.+)\]$/i,sg=/^\d+\/\d+$/,og=new Set(["px","full","screen"]),ag=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lg=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cg=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ug=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dg=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pg=e=>fg(e)||og.has(e)||sg.test(e),hg=e=>Pg(e,"length",Rg),fg=e=>Boolean(e)&&!Number.isNaN(Number(e)),mg=e=>Pg(e,"number",fg),vg=e=>Boolean(e)&&Number.isInteger(Number(e)),gg=e=>e.endsWith("%")&&fg(e.slice(0,-1)),yg=e=>ig.test(e),bg=e=>ag.test(e),xg=new Set(["length","size","percentage"]),wg=e=>Pg(e,xg,Ig),Sg=e=>Pg(e,"position",Ig),Cg=new Set(["image","url"]),Eg=e=>Pg(e,Cg,_g),Tg=e=>Pg(e,"",kg),Ng=()=>!0,Pg=(e,t,r)=>{const n=ig.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},Rg=e=>lg.test(e)&&!cg.test(e),Ig=()=>!1,kg=e=>ug.test(e),_g=e=>dg.test(e),Ag=rg(()=>{const e=ng("colors"),t=ng("spacing"),r=ng("blur"),n=ng("brightness"),i=ng("borderColor"),s=ng("borderRadius"),o=ng("borderSpacing"),a=ng("borderWidth"),l=ng("contrast"),c=ng("grayscale"),u=ng("hueRotate"),d=ng("invert"),p=ng("gap"),h=ng("gradientColorStops"),f=ng("gradientColorStopPositions"),m=ng("inset"),v=ng("margin"),g=ng("opacity"),y=ng("padding"),b=ng("saturate"),x=ng("scale"),w=ng("sepia"),S=ng("skew"),C=ng("space"),E=ng("translate"),T=()=>["auto",yg,t],N=()=>[yg,t],P=()=>["",pg,hg],R=()=>["auto",fg,yg],I=()=>["","0",yg],k=()=>[fg,yg];return{cacheSize:500,separator:":",theme:{colors:[Ng],spacing:[pg,hg],blur:["none","",bg,yg],brightness:k(),borderColor:[e],borderRadius:["none","","full",bg,yg],borderSpacing:N(),borderWidth:P(),contrast:k(),grayscale:I(),hueRotate:k(),invert:I(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[gg,hg],inset:T(),margin:T(),opacity:k(),padding:N(),saturate:k(),scale:k(),sepia:I(),skew:k(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",yg]}],container:["container"],columns:[{columns:[bg]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",yg]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vg,yg]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yg]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",vg,yg]}],"grid-cols":[{"grid-cols":[Ng]}],"col-start-end":[{col:["auto",{span:["full",vg,yg]},yg]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Ng]}],"row-start-end":[{row:["auto",{span:[vg,yg]},yg]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yg]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yg]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",yg,t]}],"min-w":[{"min-w":[yg,t,"min","max","fit"]}],"max-w":[{"max-w":[yg,t,"none","full","min","max","fit","prose",{screen:[bg]},bg]}],h:[{h:[yg,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[yg,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[yg,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[yg,t,"auto","min","max","fit"]}],"font-size":[{text:["base",bg,hg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mg]}],"font-family":[{font:[Ng]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yg]}],"line-clamp":[{"line-clamp":["none",fg,mg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",pg,yg]}],"list-image":[{"list-image":["none",yg]}],"list-style-type":[{list:["none","disc","decimal",yg]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",pg,hg]}],"underline-offset":[{"underline-offset":["auto",pg,yg]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yg]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yg]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Sg]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",wg]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Eg]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[pg,yg]}],"outline-w":[{outline:[pg,hg]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[pg,hg]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",bg,Tg]}],"shadow-color":[{shadow:[Ng]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",bg,yg]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yg]}],duration:[{duration:k()}],ease:[{ease:["linear","in","out","in-out",yg]}],delay:[{delay:k()}],animate:[{animate:["none","spin","ping","pulse","bounce",yg]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[vg,yg]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yg]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yg]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yg]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[pg,hg,mg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function jg(){try{if("undefined"!=typeof window){if(window.runtimeConfig&&window.runtimeConfig.API_BASE_URL){const e=window.runtimeConfig.API_BASE_URL.replace(/\/$/,"");return console.log(" runtime-configAPI_BASE_URL:",e),e.replace(/\/api$/,"")}"";const e=window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1");return/\.azurestaticapps\.net$/i.test(window.location.hostname)?"":e?window.location.origin:""}}catch(e){console.warn("APIURL:",e)}return"undefined"!=typeof window?window.location.origin:"http://localhost:8080"}function Og(e){if(console.log(" convertImageUrl :",{url:e,type:typeof e}),!e)return console.log(" URL"),"";if("string"!=typeof e){if("string"!=typeof e.url)return console.log(" URL"),"";e=e.url,console.log(" URL:",e)}if("string"==typeof e&&e.includes("localhost:8000")){const t="http://localhost:8080",r="undefined"!=typeof window?window.location.origin:t,n=e.replace(/http:\/\/localhost:8000/g,r);return console.log(" :",{original:e,corrected:n,currentOrigin:r}),n}if(e.startsWith("http://")||e.startsWith("https://"))return console.log(" URL:",e),e;if(e.startsWith("data:image/"))return console.log(" Base64:",e.substring(0,50)+"..."),e;if(e.startsWith("/api/emergency-flow/image/")||e.startsWith("/api/troubleshooting/image/")){const t=e.split("/").pop()||e.split("\\").pop()||e,r=jg();if(e.includes("emergency-flow")){const n=`${r}/api/emergency-flow/image/${t}`;return console.log(" emergency-flow URLURL:",{original:e,fileName:t,apiBaseUrl:r,emergencyUrl:n}),n}const n=`${r}/api/troubleshooting/image/${t}`;return console.log(" troubleshooting URLURL:",{original:e,fileName:t,apiBaseUrl:r,troubleshootingUrl:n}),n}if(e.startsWith("/api/")){const t=jg(),r=`${t}${e}`;return console.log(" APIURL:",{original:e,apiBaseUrl:t,fullUrl:r}),r}if(e.startsWith("/"))return console.log(" :",e),e;const t=jg();console.log(" APIURL:",t);let r=e;if(e.includes("/")?r=e.split("/").pop()||e:e.includes("\\")&&(r=e.split("\\").pop()||e),console.log(" :",{original:e,fileName:r}),r.includes("emergency-flow-step")||e.includes("/api/emergency-flow/image/")){const e=`${t}/api/emergency-flow/image/${r}`;return console.log(" emergency-flow URL:",e),e}const n=`${t}/api/troubleshooting/image/${r}`;return console.log(" troubleshooting URL:",n),n}function Dg(e){const t=Og(e);return console.log(" buildImageUrl -> convertImageUrl:",{input:e,output:t}),t}const Mg=new Map;function Lg(e,t){const r=e.currentTarget,n=r.src,i=Mg.get(n)||0;if(console.error(":",{imageUrl:t,currentSrc:n,retryCount:i,maxRetries:2}),i>=2)return console.error(" "),r.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBDMTE2LjU2OSA3MCAxMzAgODMuNDMxIDEzMCAxMDBDMTMwIDExNi41NjkgMTE2LjU2OSAxMzAgMTAwIDEzMEM4My40MzEgMTMwIDcwIDExNi41NjkgNzAgMTAwQzcwIDgzLjQzMSA4My40MzEgNzAgMTAwIDcwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDE0MEMxMTYuNTY5IDE0MCAxMzAgMTUzLjQzMSAxMzAgMTcwQzEzMCAxODYuNTY5IDExNi41NjkgMjAwIDEwMCAyMDBDODMuNDMxIDIwMCA3MCAxODYuNTY5IDcwIDE3MEM3MCAxNTMuNDMxIDgzLjQzMSAxNDAgMTAwIDE0MFoiIGZpbGw9IiM5Q0EwQTYiLz4KPHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwIDIwQzIwIDE3LjIzOSAyMi4yMzkgMTUgMjUgMTVIMzVDMzcuNzYxIDE1IDQwIDE3LjIzOSA0MCAyMFYzMEM0MCAzMi43NjEgMzcuNzYxIDM1IDM1IDM1SDI1QzIyLjIzOSAzNSAyMCAzMi43NjEgMjAgMzBWMjBaIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNSAxN0MyNSAxNi40NDc3IDI1LjQ0NzcgMTYgMjYgMTZIMzRDMzQuNTUyMyAxNiAzNSAxNi40NDc3IDM1IDE3VjI5QzM1IDI5LjU1MjMgMzQuNTUyMyAzMCAzNCAzMEgyNkMyNS40NDc3IDMwIDI1IDI5LjU1MjMgMjUgMjlWMTdaIiBmaWxsPSIjOTlBM0Y2Ii8+Cjwvc3ZnPgo8L3N2Zz4K",void Mg.delete(n);Mg.set(n,i+1);try{const e=jg();let s;const o=n.split("/").pop()||n.split("\\").pop();if(o&&o.includes("emergency-flow-step")?(s=o,console.log(" currentSrc:",s)):(s=t.includes("/")?t.split("/").pop():t.includes("\\")?t.split("\\").pop():t,console.log(" imageUrl:",s)),s&&""!==s.trim()&&s.includes("emergency-flow-step")){console.log(" :",{original:t,currentSrc:n,fileName:s,retryCount:i+1,maxRetries:2});{const t=`${e}/api/emergency-flow/image/${s}`;if(t!==n&&!n.endsWith(`/api/emergency-flow/image/${s}`))return console.log(" URLURL:",t),Mg.delete(n),Mg.set(t,i+1),void(r.src=t)}}console.warn(" "),r.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBDMTE2LjU2OSA3MCAxMzAgODMuNDMxIDEzMCAxMDBDMTMwIDExNi41NjkgMTE2LjU2OSAxMzAgMTAwIDEzMEM4My40MzEgMTMwIDcwIDExNi41NjkgNzAgMTAwQzcwIDgzLjQzMSA4My40MzEgNzAgMTAwIDcwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDE0MEMxMTYuNTY5IDE0MCAxMzAgMTUzLjQzMSAxMzAgMTcwQzEzMCAxODYuNTY5IDExNi41NjkgMjAwIDEwMCAyMDBDODMuNDMxIDIwMCA3MCAxODYuNTY5IDcwIDE3MEM3MCAxNTMuNDMxIDgzLjQzMSAxNDAgMTAwIDE0MFoiIGZpbGw9IiM5Q0EwQTYiLz4KPHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwIDIwQzIwIDE3LjIzOSAyMi4yMzkgMTUgMjUgMTVIMzVDMzcuNzYxIDE1IDQwIDE3LjIzOSA0MCAyMFYzMEM0MCAzMi43NjEgMzcuNzYxIDM1IDM1IDM1SDI1QzIyLjIzOSAzNSAyMCAzMi43NjEgMjAgMzBWMjBaIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNSAxN0MyNSAxNi40NDc3IDI1LjQ0NzcgMTYgMjYgMTZIMzRDMzQuNTUyMyAxNiAzNSAxNi40NDc3IDM1IDE3VjI5QzM1IDI5LjU1MjMgMzQuNTUyMyAzMCAzNCAzMEgyNkMyNS40NDc3IDMwIDI1IDI5LjU1MjMgMjUgMjlWMTdaIiBmaWxsPSIjOTlBM0Y2Ii8+Cjwvc3ZnPgo8L3N2Zz4K",Mg.delete(n)}catch(s){console.error(" :",s),r.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBDMTE2LjU2OSA3MCAxMzAgODMuNDMxIDEzMCAxMDBDMTMwIDExNi41NjkgMTE2LjU2OSAxMzAgMTAwIDEzMEM4My40MzEgMTMwIDcwIDExNi41NjkgNzAgMTAwQzcwIDgzLjQzMSA4My40MzEgNzAgMTAwIDcwWiIgZmlsbD0iIzlDQTBBNiIvPgo8cGF0aCBkPSJNMTAwIDE0MEMxMTYuNTY5IDE0MCAxMzAgMTUzLjQzMSAxMzAgMTcwQzEzMCAxODYuNTY5IDExNi41NjkgMjAwIDEwMCAyMDBDODMuNDMxIDIwMCA3MCAxODYuNTY5IDcwIDE3MEM3MCAxNTMuNDMxIDgzLjQzMSAxNDAgMTAwIDE0MFoiIGZpbGw9IiM5Q0EwQTYiLz4KPHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwIDIwQzIwIDE3LjIzOSAyMi4yMzkgMTUgMjUgMTVIMzVDMzcuNzYxIDE1IDQwIDE3LjIzOSA0MCAyMFYzMEM0MCAzMi43NjEgMzcuNzYxIDM1IDM1IDM1SDI1QzIyLjIzOSAzNSAyMCAzMi43NjEgMjAgMzBWMjBaIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNSAxN0MyNSAxNi40NDc3IDI1LjQ0NzcgMTYgMjYgMTZIMzRDMzQuNTUyMyAxNiAzNSAxNi40NDc3IDM1IDE3VjI5QzM1IDI5LjU1MjMgMzQuNTUyMyAzMCAzNCAzMEgyNkMyNS40NDc3IDMwIDI1IDI5LjU1MjMgMjUgMjlWMTdaIiBmaWxsPSIjOTlBM0Y2Ii8+Cjwvc3ZnPgo8L3N2Zz4K",Mg.delete(n)}}function zg(...e){return Ag(Lv(e))}const Fg=Bv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Bg=Lt.forwardRef((e,t)=>{var r=e,{className:n,variant:i,size:s,asChild:o=!1}=r,a=Fe(r,["className","variant","size","asChild"]);const l=o?Av:"button";return Gt.jsx(l,Le({className:zg(Fg({variant:i,size:s,className:n})),ref:t},a))});Bg.displayName="Button";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Ug=(...e)=>e.filter((e,t,r)=>Boolean(e)&&r.indexOf(e)===t).join(" ");
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Wg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=Lt.forwardRef((e,t)=>{var r=e,{color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,iconNode:c}=r,u=Fe(r,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return Lt.createElement("svg",Le(ze(Le({ref:t},Wg),{width:i,height:i,stroke:n,strokeWidth:o?24*Number(s)/Number(i):s,className:Ug("lucide",a)}),u),[...c.map(([e,t])=>Lt.createElement(e,t)),...Array.isArray(l)?l:[l]])}),$g=(e,t)=>{const r=Lt.forwardRef((r,n)=>{var i,s=r,{className:o}=s,a=Fe(s,["className"]);return Lt.createElement(Hg,Le({ref:n,iconNode:t,className:Ug(`lucide-${i=e,i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,o)},a))});return r.displayName=`${e}`,r},Vg=$g("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),qg=$g("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Gg=$g("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Kg=$g("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Jg=$g("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]),Yg=$g("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Zg=$g("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Qg=$g("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Xg=$g("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ey=$g("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ty=$g("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ry=$g("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ny=$g("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),iy=$g("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),sy=$g("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),oy=$g("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ay=$g("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ly=$g("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),cy=$g("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),uy=$g("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),dy=$g("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),py=$g("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),hy=$g("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),fy=$g("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]),my=$g("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),vy=$g("FileType",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]),gy=$g("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]),yy=$g("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),by=$g("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),xy=$g("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),wy=$g("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Sy=$g("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Cy=$g("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Ey=$g("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),Ty=$g("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Ny=$g("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Py=$g("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Ry=$g("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Iy=$g("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),ky=$g("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),_y=$g("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Ay=$g("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),jy=$g("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Oy=$g("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Dy=$g("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),My=$g("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Ly=$g("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),zy=$g("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Fy=$g("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),By=$g("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Uy=$g("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Wy=$g("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]),Hy=$g("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),$y=$g("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Vy=$g("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),qy=$g("TabletSmartphone",[["rect",{width:"10",height:"14",x:"3",y:"8",rx:"2",key:"1vrsiq"}],["path",{d:"M5 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-2.4",key:"1j4zmg"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Gy=$g("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Ky=$g("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Jy=$g("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Yy=$g("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Zy=$g("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Qy=$g("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Xy=$g("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),eb=$g("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),tb=$g("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),rb=$g("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),nb=$g("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),ib=$g("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),sb=$g("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),ob=$g("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ab=$g("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function lb(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function cb(e,t=[]){let r=[];const n=()=>{const t=r.map(e=>Lt.createContext(e));return function(r){const n=(null==r?void 0:r[e])||t;return Lt.useMemo(()=>({[`__scope${e}`]:ze(Le({},r),{[e]:n})}),[r,n])}};return n.scopeName=e,[function(t,n){const i=Lt.createContext(n),s=r.length;r=[...r,n];const o=t=>{var r;const n=t,{scope:o,children:a}=n,l=Fe(n,["scope","children"]),c=(null==(r=null==o?void 0:o[e])?void 0:r[s])||i,u=Lt.useMemo(()=>l,Object.values(l));return Gt.jsx(c.Provider,{value:u,children:a})};return o.displayName=t+"Provider",[o,function(r,o){var a;const l=(null==(a=null==o?void 0:o[e])?void 0:a[s])||i,c=Lt.useContext(l);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},ub(n,...t)]}function ub(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>{const i=r(e)[`__scope${n}`];return Le(Le({},t),i)},{});return Lt.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}var db=(null==globalThis?void 0:globalThis.document)?Lt.useLayoutEffect:()=>{},pb=Ft[" useId ".trim().toString()]||(()=>{}),hb=0;function fb(e){const[t,r]=Lt.useState(pb());return db(()=>{r(e=>null!=e?e:String(hb++))},[e]),t?`radix-${t}`:""}var mb=Ft[" useInsertionEffect ".trim().toString()]||db;function vb({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,s,o]=function({defaultProp:e,onChange:t}){const[r,n]=Lt.useState(e),i=Lt.useRef(r),s=Lt.useRef(t);return mb(()=>{s.current=t},[t]),Lt.useEffect(()=>{var e;i.current!==r&&(null==(e=s.current)||e.call(s,r),i.current=r)},[r,i]),[r,n,s]}({defaultProp:t,onChange:r}),a=void 0!==e,l=a?e:i;{const t=Lt.useRef(void 0!==e);Lt.useEffect(()=>{const e=t.current;if(e!==a){const t=e?"controlled":"uncontrolled",r=a?"controlled":"uncontrolled";console.warn(`${n} is changing from ${t} to ${r}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=a},[a,n])}const c=Lt.useCallback(t=>{var r;if(a){const n=function(e){return"function"==typeof e}(t)?t(e):t;n!==e&&(null==(r=o.current)||r.call(o,n))}else s(t)},[a,e,s,o]);return[l,c]}function gb(e){const t=yb(e),r=Lt.forwardRef((e,r)=>{const n=e,{children:i}=n,s=Fe(n,["children"]),o=Lt.Children.toArray(i),a=o.find(xb);if(a){const e=a.props.children,n=o.map(t=>t===a?Lt.Children.count(e)>1?Lt.Children.only(null):Lt.isValidElement(e)?e.props.children:null:t);return Gt.jsx(t,ze(Le({},s),{ref:r,children:Lt.isValidElement(e)?Lt.cloneElement(e,void 0,n):null}))}return Gt.jsx(t,ze(Le({},s),{ref:r,children:i}))});return r.displayName=`${e}.Slot`,r}function yb(e){const t=Lt.forwardRef((e,t)=>{const r=e,{children:n}=r,i=Fe(r,["children"]);if(Lt.isValidElement(n)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const r=Le({},t);for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]=Le(Le({},i),s):"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return Le(Le({},e),r)}(i,n.props);return n.type!==Lt.Fragment&&(r.ref=t?Nv(t,e):e),Lt.cloneElement(n,r)}return Lt.Children.count(n)>1?Lt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bb=Symbol("radix.slottable");function xb(e){return Lt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===bb}var wb=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const r=gb(`Primitive.${t}`),n=Lt.forwardRef((e,n)=>{const i=e,{asChild:s}=i,o=Fe(i,["asChild"]),a=s?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Gt.jsx(a,ze(Le({},o),{ref:n}))});return n.displayName=`Primitive.${t}`,ze(Le({},e),{[t]:n})},{});function Sb(e,t){e&&eh.flushSync(()=>e.dispatchEvent(t))}function Cb(e){const t=Lt.useRef(e);return Lt.useEffect(()=>{t.current=e}),Lt.useMemo(()=>(...e)=>{var r;return null==(r=t.current)?void 0:r.call(t,...e)},[])}var Eb,Tb="dismissableLayer.update",Nb="dismissableLayer.pointerDownOutside",Pb="dismissableLayer.focusOutside",Rb=Lt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ib=Lt.forwardRef((e,t)=>{var r;const n=e,{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:l,onDismiss:c}=n,u=Fe(n,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),d=Lt.useContext(Rb),[p,h]=Lt.useState(null),f=null!=(r=null==p?void 0:p.ownerDocument)?r:null==globalThis?void 0:globalThis.document,[,m]=Lt.useState({}),v=Pv(t,e=>h(e)),g=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),x=p?g.indexOf(p):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,S=x>=b,C=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Cb(e),n=Lt.useRef(!1),i=Lt.useRef(()=>{});return Lt.useEffect(()=>{const e=e=>{if(e.target&&!n.current){let n=function(){Ab(Nb,r,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=n,t.addEventListener("click",i.current,{once:!0})):n()}else t.removeEventListener("click",i.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{const t=e.target,r=[...d.branches].some(e=>e.contains(t));S&&!r&&(null==o||o(e),null==l||l(e),e.defaultPrevented||null==c||c())},f),E=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Cb(e),n=Lt.useRef(!1);return Lt.useEffect(()=>{const e=e=>{if(e.target&&!n.current){Ab(Pb,r,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(null==a||a(e),null==l||l(e),e.defaultPrevented||null==c||c())},f);return function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Cb(e);Lt.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{x===d.layers.size-1&&(null==s||s(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},f),Lt.useEffect(()=>{if(p)return i&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(Eb=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),_b(),()=>{i&&1===d.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=Eb)}},[p,f,i,d]),Lt.useEffect(()=>()=>{p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),_b())},[p,d]),Lt.useEffect(()=>{const e=()=>m({});return document.addEventListener(Tb,e),()=>document.removeEventListener(Tb,e)},[]),Gt.jsx(wb.div,ze(Le({},u),{ref:v,style:Le({pointerEvents:w?S?"auto":"none":void 0},e.style),onFocusCapture:lb(e.onFocusCapture,E.onFocusCapture),onBlurCapture:lb(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:lb(e.onPointerDownCapture,C.onPointerDownCapture)}))});Ib.displayName="DismissableLayer";var kb=Lt.forwardRef((e,t)=>{const r=Lt.useContext(Rb),n=Lt.useRef(null),i=Pv(t,n);return Lt.useEffect(()=>{const e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),Gt.jsx(wb.div,ze(Le({},e),{ref:i}))});function _b(){const e=new CustomEvent(Tb);document.dispatchEvent(e)}function Ab(e,t,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Sb(i,s):i.dispatchEvent(s)}kb.displayName="DismissableLayerBranch";var jb=Ib,Ob=kb,Db="focusScope.autoFocusOnMount",Mb="focusScope.autoFocusOnUnmount",Lb={bubbles:!1,cancelable:!0},zb=Lt.forwardRef((e,t)=>{const r=e,{loop:n=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:o}=r,a=Fe(r,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[l,c]=Lt.useState(null),u=Cb(s),d=Cb(o),p=Lt.useRef(null),h=Pv(t,e=>c(e)),f=Lt.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Lt.useEffect(()=>{if(i){let e=function(e){if(f.paused||!l)return;const t=e.target;l.contains(t)?p.current=t:Wb(p.current,{select:!0})},t=function(e){if(f.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||Wb(p.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Wb(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return l&&n.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[i,l,f.paused]),Lt.useEffect(()=>{if(l){Hb.add(f);const t=document.activeElement;if(!l.contains(t)){const r=new CustomEvent(Db,Lb);l.addEventListener(Db,u),l.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Wb(n,{select:t}),document.activeElement!==r)return}((e=Fb(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Wb(l))}return()=>{l.removeEventListener(Db,u),setTimeout(()=>{const e=new CustomEvent(Mb,Lb);l.addEventListener(Mb,d),l.dispatchEvent(e),e.defaultPrevented||Wb(null!=t?t:document.body,{select:!0}),l.removeEventListener(Mb,d),Hb.remove(f)},0)}}var e},[l,u,d,f]);const m=Lt.useCallback(e=>{if(!n&&!i)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[i,s]=function(e){const t=Fb(e),r=Bb(t,e),n=Bb(t.reverse(),e);return[r,n]}(t);i&&s?e.shiftKey||r!==s?e.shiftKey&&r===i&&(e.preventDefault(),n&&Wb(s,{select:!0})):(e.preventDefault(),n&&Wb(i,{select:!0})):r===t&&e.preventDefault()}},[n,i,f.paused]);return Gt.jsx(wb.div,ze(Le({tabIndex:-1},a),{ref:h,onKeyDown:m}))});function Fb(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Bb(e,t){for(const r of e)if(!Ub(r,{upTo:t}))return r}function Ub(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Wb(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}zb.displayName="FocusScope";var Hb=function(){let e=[];return{add(t){const r=e[0];t!==r&&(null==r||r.pause()),e=$b(e,t),e.unshift(t)},remove(t){var r;e=$b(e,t),null==(r=e[0])||r.resume()}}}();function $b(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}var Vb=Lt.forwardRef((e,t)=>{var r;const n=e,{container:i}=n,s=Fe(n,["container"]),[o,a]=Lt.useState(!1);db(()=>a(!0),[]);const l=i||o&&(null==(r=null==globalThis?void 0:globalThis.document)?void 0:r.body);return l?th.createPortal(Gt.jsx(wb.div,ze(Le({},s),{ref:t})),l):null});Vb.displayName="Portal";var qb=e=>{const{present:t,children:r}=e,n=function(e){const[t,r]=Lt.useState(),n=Lt.useRef(null),i=Lt.useRef(e),s=Lt.useRef("none"),o=e?"mounted":"unmounted",[a,l]=function(e,t){return Lt.useReducer((e,r)=>{const n=t[e][r];return null!=n?n:e},e)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Lt.useEffect(()=>{const e=Gb(n.current);s.current="mounted"===a?e:"none"},[a]),db(()=>{const t=n.current,r=i.current;if(r!==e){const n=s.current,o=Gb(t);if(e)l("MOUNT");else if("none"===o||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(r&&n!==o?"ANIMATION_OUT":"UNMOUNT")}i.current=e}},[e,l]),db(()=>{var e;if(t){let r;const o=null!=(e=t.ownerDocument.defaultView)?e:window,a=e=>{const s=Gb(n.current).includes(CSS.escape(e.animationName));if(e.target===t&&s&&(l("ANIMATION_END"),!i.current)){const e=t.style.animationFillMode;t.style.animationFillMode="forwards",r=o.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},c=e=>{e.target===t&&(s.current=Gb(n.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{o.clearTimeout(r),t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:Lt.useCallback(e=>{n.current=e?getComputedStyle(e):null,r(e)},[])}}(t),i="function"==typeof r?r({present:n.isPresent}):Lt.Children.only(r),s=Pv(n.ref,function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof r||n.isPresent?Lt.cloneElement(i,{ref:s}):null};function Gb(e){return(null==e?void 0:e.animationName)||"none"}qb.displayName="Presence";var Kb=0;function Jb(){Lt.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!=(e=r[0])?e:Yb()),document.body.insertAdjacentElement("beforeend",null!=(t=r[1])?t:Yb()),Kb++,()=>{1===Kb&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Kb--}},[])}function Yb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Zb=function(){return Zb=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zb.apply(this,arguments)};function Qb(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function Xb(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(Nie){s(Nie)}}function a(e){try{l(n.throw(e))}catch(Nie){s(Nie)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var ex="right-scroll-bar-position",tx="width-before-scroll-bar";function rx(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var nx="undefined"!=typeof window?Lt.useLayoutEffect:Lt.useEffect,ix=new WeakMap;function sx(e,t){var r,n,i,s=(r=null,n=function(t){return e.forEach(function(e){return rx(e,t)})},(i=Lt.useState(function(){return{value:r,callback:n,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}})[0]).callback=n,i.facade);return nx(function(){var t=ix.get(s);if(t){var r=new Set(t),n=new Set(e),i=s.current;r.forEach(function(e){n.has(e)||rx(e,null)}),n.forEach(function(e){r.has(e)||rx(e,i)})}ix.set(s,e)},[e]),s}function ox(e){return e}var ax=function(e){var t=e.sideCar,r=Qb(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return Lt.createElement(n,Zb({},r))};ax.isSideCarExport=!0;var lx=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=ox);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var i=t(e,n);return r.push(i),function(){r=r.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var i=r;r=[],i.forEach(e),t=r}var s=function(){var r=t;t=[],r.forEach(e)},o=function(){return Promise.resolve().then(s)};o(),r={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),r}}}};return i}(null);return t.options=Zb({async:!0,ssr:!1},e),t}(),cx=function(){},ux=Lt.forwardRef(function(e,t){var r=Lt.useRef(null),n=Lt.useState({onScrollCapture:cx,onWheelCapture:cx,onTouchMoveCapture:cx}),i=n[0],s=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,p=e.sideCar,h=e.noRelative,f=e.noIsolation,m=e.inert,v=e.allowPinchZoom,g=e.as,y=void 0===g?"div":g,b=e.gapMode,x=Qb(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,S=sx([r,t]),C=Zb(Zb({},x),i);return Lt.createElement(Lt.Fragment,null,u&&Lt.createElement(w,{sideCar:lx,removeScrollBar:c,shards:d,noRelative:h,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:r,gapMode:b}),o?Lt.cloneElement(Lt.Children.only(a),Zb(Zb({},C),{ref:S})):Lt.createElement(y,Zb({},C,{className:l,ref:S}),a))});ux.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},ux.classNames={fullWidth:tx,zeroRight:ex};function dx(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var px=function(){var e=0,t=null;return{add:function(r){var n,i;0==e&&(t=dx())&&(i=r,(n=t).styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},hx=function(){var e,t=(e=px(),function(t,r){Lt.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])});return function(e){var r=e.styles,n=e.dynamic;return t(r,n),null}},fx={left:0,top:0,right:0,gap:0},mx=function(e){return parseInt(e||"",10)||0},vx=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return fx;var t=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[mx(r),mx(n),mx(i)]}(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},gx=hx(),yx="data-scroll-locked",bx=function(e,t,r,n){var i=e.left,s=e.top,o=e.right,a=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(a,"px ").concat(n,";\n  }\n  body[").concat(yx,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(ex," {\n    right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(tx," {\n    margin-right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(ex," .").concat(ex," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(tx," .").concat(tx," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(yx,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},xx=function(){var e=parseInt(document.body.getAttribute(yx)||"0",10);return isFinite(e)?e:0},wx=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=void 0===n?"margin":n;Lt.useEffect(function(){return document.body.setAttribute(yx,(xx()+1).toString()),function(){var e=xx()-1;e<=0?document.body.removeAttribute(yx):document.body.setAttribute(yx,e.toString())}},[]);var s=Lt.useMemo(function(){return vx(i)},[i]);return Lt.createElement(gx,{styles:bx(s,!t,i,r?"":"!important")})},Sx=!1;if("undefined"!=typeof window)try{var Cx=Object.defineProperty({},"passive",{get:function(){return Sx=!0,!0}});window.addEventListener("test",Cx,Cx),window.removeEventListener("test",Cx,Cx)}catch(Pie){Sx=!1}var Ex=!!Sx&&{passive:!1},Tx=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},Nx=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),Px(e,n)){var i=Rx(e,n);if(i[1]>i[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Px=function(e,t){return"v"===e?function(e){return Tx(e,"overflowY")}(t):function(e){return Tx(e,"overflowX")}(t)},Rx=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},Ix=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},kx=function(e){return[e.deltaX,e.deltaY]},_x=function(e){return e&&"current"in e?e.current:e},Ax=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},jx=0,Ox=[];function Dx(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Mx=(Lx=function(e){var t=Lt.useRef([]),r=Lt.useRef([0,0]),n=Lt.useRef(),i=Lt.useState(jx++)[0],s=Lt.useState(hx)[0],o=Lt.useRef(e);Lt.useEffect(function(){o.current=e},[e]),Lt.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(_x),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=Lt.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var i,s=Ix(e),a=r.current,l="deltaX"in e?e.deltaX:a[0]-s[0],c="deltaY"in e?e.deltaY:a[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var p=Nx(d,u);if(!p)return!0;if(p?i=d:(i="v"===d?"h":"v",p=Nx(d,u)),!p)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=i),!i)return!0;var h=n.current||i;return function(e,t,r,n){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=i*n,o=r.target,a=t.contains(o),l=!1,c=s>0,u=0,d=0;do{if(!o)break;var p=Rx(e,o),h=p[0],f=p[1]-p[2]-i*h;(h||f)&&Px(e,o)&&(u+=f,d+=h);var m=o.parentNode;o=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!a&&o!==document.body||a&&(t.contains(o)||t===o));return(c&&Math.abs(u)<1||!c&&Math.abs(d)<1)&&(l=!0),l}(h,t,e,"h"===h?l:c)},[]),l=Lt.useCallback(function(e){var r=e;if(Ox.length&&Ox[Ox.length-1]===s){var n="deltaY"in r?kx(r):Ix(r),i=t.current.filter(function(e){return e.name===r.type&&(e.target===r.target||r.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,n)})[0];if(i&&i.should)r.cancelable&&r.preventDefault();else if(!i){var l=(o.current.shards||[]).map(_x).filter(Boolean).filter(function(e){return e.contains(r.target)});(l.length>0?a(r,l[0]):!o.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),c=Lt.useCallback(function(e,r,n,i){var s={name:e,delta:r,target:n,should:i,shadowParent:Dx(n)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),u=Lt.useCallback(function(e){r.current=Ix(e),n.current=void 0},[]),d=Lt.useCallback(function(t){c(t.type,kx(t),t.target,a(t,e.lockRef.current))},[]),p=Lt.useCallback(function(t){c(t.type,Ix(t),t.target,a(t,e.lockRef.current))},[]);Lt.useEffect(function(){return Ox.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Ex),document.addEventListener("touchmove",l,Ex),document.addEventListener("touchstart",u,Ex),function(){Ox=Ox.filter(function(e){return e!==s}),document.removeEventListener("wheel",l,Ex),document.removeEventListener("touchmove",l,Ex),document.removeEventListener("touchstart",u,Ex)}},[]);var h=e.removeScrollBar,f=e.inert;return Lt.createElement(Lt.Fragment,null,f?Lt.createElement(s,{styles:Ax(i)}):null,h?Lt.createElement(wx,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},lx.useMedium(Lx),ax);var Lx,zx=Lt.forwardRef(function(e,t){return Lt.createElement(ux,Zb({},e,{ref:t,sideCar:Mx}))});zx.classNames=ux.classNames;var Fx=new WeakMap,Bx=new WeakMap,Ux={},Wx=0,Hx=function(e){return e&&(e.host||Hx(e.parentNode))},$x=function(e,t,r,n){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var r=Hx(t);return r&&e.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Ux[r]||(Ux[r]=new WeakMap);var s=Ux[r],o=[],a=new Set,l=new Set(i),c=function(e){e&&!a.has(e)&&(a.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(a.has(e))u(e);else try{var t=e.getAttribute(n),i=null!==t&&"false"!==t,l=(Fx.get(e)||0)+1,c=(s.get(e)||0)+1;Fx.set(e,l),s.set(e,c),o.push(e),1===l&&i&&Bx.set(e,!0),1===c&&e.setAttribute(r,"true"),i||e.setAttribute(n,"true")}catch(Nie){console.error("aria-hidden: cannot operate on ",e,Nie)}})};return u(t),a.clear(),Wx++,function(){o.forEach(function(e){var t=Fx.get(e)-1,i=s.get(e)-1;Fx.set(e,t),s.set(e,i),t||(Bx.has(e)||e.removeAttribute(n),Bx.delete(e)),i||e.removeAttribute(r)}),--Wx||(Fx=new WeakMap,Fx=new WeakMap,Bx=new WeakMap,Ux={})}},Vx=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),$x(n,i,r,"aria-hidden")):function(){return null}};function qx(e){const t=Gx(e),r=Lt.forwardRef((e,r)=>{const n=e,{children:i}=n,s=Fe(n,["children"]),o=Lt.Children.toArray(i),a=o.find(Jx);if(a){const e=a.props.children,n=o.map(t=>t===a?Lt.Children.count(e)>1?Lt.Children.only(null):Lt.isValidElement(e)?e.props.children:null:t);return Gt.jsx(t,ze(Le({},s),{ref:r,children:Lt.isValidElement(e)?Lt.cloneElement(e,void 0,n):null}))}return Gt.jsx(t,ze(Le({},s),{ref:r,children:i}))});return r.displayName=`${e}.Slot`,r}function Gx(e){const t=Lt.forwardRef((e,t)=>{const r=e,{children:n}=r,i=Fe(r,["children"]);if(Lt.isValidElement(n)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const r=Le({},t);for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]=Le(Le({},i),s):"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return Le(Le({},e),r)}(i,n.props);return n.type!==Lt.Fragment&&(r.ref=t?Nv(t,e):e),Lt.cloneElement(n,r)}return Lt.Children.count(n)>1?Lt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Kx=Symbol("radix.slottable");function Jx(e){return Lt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Kx}var Yx="Dialog",[Zx,Qx]=cb(Yx),[Xx,ew]=Zx(Yx),tw=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,a=Lt.useRef(null),l=Lt.useRef(null),[c,u]=vb({prop:n,defaultProp:null!=i&&i,onChange:s,caller:Yx});return Gt.jsx(Xx,{scope:t,triggerRef:a,contentRef:l,contentId:fb(),titleId:fb(),descriptionId:fb(),open:c,onOpenChange:u,onOpenToggle:Lt.useCallback(()=>u(e=>!e),[u]),modal:o,children:r})};tw.displayName=Yx;var rw="DialogTrigger",nw=Lt.forwardRef((e,t)=>{const r=e,{__scopeDialog:n}=r,i=Fe(r,["__scopeDialog"]),s=ew(rw,n),o=Pv(t,s.triggerRef);return Gt.jsx(wb.button,ze(Le({type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Cw(s.open)},i),{ref:o,onClick:lb(e.onClick,s.onOpenToggle)}))});nw.displayName=rw;var iw="DialogPortal",[sw,ow]=Zx(iw,{forceMount:void 0}),aw=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,s=ew(iw,t);return Gt.jsx(sw,{scope:t,forceMount:r,children:Lt.Children.map(n,e=>Gt.jsx(qb,{present:r||s.open,children:Gt.jsx(Vb,{asChild:!0,container:i,children:e})}))})};aw.displayName=iw;var lw="DialogOverlay",cw=Lt.forwardRef((e,t)=>{const r=ow(lw,e.__scopeDialog),n=e,{forceMount:i=r.forceMount}=n,s=Fe(n,["forceMount"]),o=ew(lw,e.__scopeDialog);return o.modal?Gt.jsx(qb,{present:i||o.open,children:Gt.jsx(dw,ze(Le({},s),{ref:t}))}):null});cw.displayName=lw;var uw=qx("DialogOverlay.RemoveScroll"),dw=Lt.forwardRef((e,t)=>{const r=e,{__scopeDialog:n}=r,i=Fe(r,["__scopeDialog"]),s=ew(lw,n);return Gt.jsx(zx,{as:uw,allowPinchZoom:!0,shards:[s.contentRef],children:Gt.jsx(wb.div,ze(Le({"data-state":Cw(s.open)},i),{ref:t,style:Le({pointerEvents:"auto"},i.style)}))})}),pw="DialogContent",hw=Lt.forwardRef((e,t)=>{const r=ow(pw,e.__scopeDialog),n=e,{forceMount:i=r.forceMount}=n,s=Fe(n,["forceMount"]),o=ew(pw,e.__scopeDialog);return Gt.jsx(qb,{present:i||o.open,children:o.modal?Gt.jsx(fw,ze(Le({},s),{ref:t})):Gt.jsx(mw,ze(Le({},s),{ref:t}))})});hw.displayName=pw;var fw=Lt.forwardRef((e,t)=>{const r=ew(pw,e.__scopeDialog),n=Lt.useRef(null),i=Pv(t,r.contentRef,n);return Lt.useEffect(()=>{const e=n.current;if(e)return Vx(e)},[]),Gt.jsx(vw,ze(Le({},e),{ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lb(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:lb(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:lb(e.onFocusOutside,e=>e.preventDefault())}))}),mw=Lt.forwardRef((e,t)=>{const r=ew(pw,e.__scopeDialog),n=Lt.useRef(!1),i=Lt.useRef(!1);return Gt.jsx(vw,ze(Le({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,o;null==(s=e.onCloseAutoFocus)||s.call(e,t),t.defaultPrevented||(n.current||null==(o=r.triggerRef.current)||o.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{var s,o;null==(s=e.onInteractOutside)||s.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const a=t.target;(null==(o=r.triggerRef.current)?void 0:o.contains(a))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}}))}),vw=Lt.forwardRef((e,t)=>{const r=e,{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o}=r,a=Fe(r,["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"]),l=ew(pw,n),c=Lt.useRef(null),u=Pv(t,c);return Jb(),Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(zb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:o,children:Gt.jsx(Ib,ze(Le({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Cw(l.open)},a),{ref:u,onDismiss:()=>l.onOpenChange(!1)}))}),Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Pw,{titleId:l.titleId}),Gt.jsx(Rw,{contentRef:c,descriptionId:l.descriptionId})]})]})}),gw="DialogTitle",yw=Lt.forwardRef((e,t)=>{const r=e,{__scopeDialog:n}=r,i=Fe(r,["__scopeDialog"]),s=ew(gw,n);return Gt.jsx(wb.h2,ze(Le({id:s.titleId},i),{ref:t}))});yw.displayName=gw;var bw="DialogDescription",xw=Lt.forwardRef((e,t)=>{const r=e,{__scopeDialog:n}=r,i=Fe(r,["__scopeDialog"]),s=ew(bw,n);return Gt.jsx(wb.p,ze(Le({id:s.descriptionId},i),{ref:t}))});xw.displayName=bw;var ww="DialogClose",Sw=Lt.forwardRef((e,t)=>{const r=e,{__scopeDialog:n}=r,i=Fe(r,["__scopeDialog"]),s=ew(ww,n);return Gt.jsx(wb.button,ze(Le({type:"button"},i),{ref:t,onClick:lb(e.onClick,()=>s.onOpenChange(!1))}))});function Cw(e){return e?"open":"closed"}Sw.displayName=ww;var Ew="DialogTitleWarning",[Tw,Nw]=function(e,t){const r=Lt.createContext(t),n=e=>{const t=e,{children:n}=t,i=Fe(t,["children"]),s=Lt.useMemo(()=>i,Object.values(i));return Gt.jsx(r.Provider,{value:s,children:n})};return n.displayName=e+"Provider",[n,function(n){const i=Lt.useContext(r);if(i)return i;if(void 0!==t)return t;throw new Error(`\`${n}\` must be used within \`${e}\``)}]}(Ew,{contentName:pw,titleName:gw,docsSlug:"dialog"}),Pw=({titleId:e})=>{const t=Nw(Ew),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return Lt.useEffect(()=>{if(e){document.getElementById(e)||console.error(r)}},[r,e]),null},Rw=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Nw("DialogDescriptionWarning").contentName}}.`;return Lt.useEffect(()=>{var n;const i=null==(n=e.current)?void 0:n.getAttribute("aria-describedby");if(t&&i){document.getElementById(t)||console.warn(r)}},[r,e,t]),null},Iw=tw,kw=nw,_w=aw,Aw=cw,jw=hw,Ow=yw,Dw=xw,Mw=Sw;const Lw=Iw,zw=kw,Fw=_w,Bw=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(Aw,ze(Le({className:zg("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},i),{ref:t}))});Bw.displayName=Aw.displayName;const Uw=Bv("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ww=Lt.forwardRef((e,t)=>{var r=e,{side:n="right",className:i,children:s}=r,o=Fe(r,["side","className","children"]);return Gt.jsxs(Fw,{children:[Gt.jsx(Bw,{}),Gt.jsxs(jw,ze(Le({ref:t,className:zg(Uw({side:n}),i)},o),{children:[s,Gt.jsxs(Mw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[Gt.jsx(ob,{className:"h-4 w-4"}),Gt.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});Ww.displayName=jw.displayName;Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(Ow,Le({ref:t,className:zg("text-lg font-semibold text-foreground",n)},i))}).displayName=Ow.displayName;function Hw(){const e=tm().pathname,{user:t}=sv(),r="admin"===(null==t?void 0:t.role),n=[{title:"",path:"/chat",icon:Gt.jsx(ky,{className:"mr-2 h-5 w-5 text-blue-600"}),className:"text-blue-600 font-bold text-lg border border-blue-300 rounded-md bg-blue-50"},{title:"",path:"/history",icon:Gt.jsx(wy,{className:"mr-2 h-4 w-4"}),adminOnly:!0},{title:"",path:"/base-data",icon:Gt.jsx(sb,{className:"mr-2 h-4 w-4"}),adminOnly:!0},{title:"",path:"/troubleshooting",icon:Gt.jsx(my,{className:"mr-2 h-4 w-4"}),adminOnly:!0},{title:"",path:"/settings",icon:Gt.jsx(By,{className:"mr-2 h-4 w-4"}),adminOnly:!0}].filter(e=>!e.adminOnly||r);return Gt.jsx("div",{className:"flex items-center space-x-2",children:n.map(t=>Gt.jsx(Wm,{to:t.path,children:Gt.jsxs(Bg,{variant:"ghost",className:zg("px-4 py-3 rounded-md",e===t.path?"text-primary font-semibold bg-blue-100":"text-gray-600 hover:bg-gray-100",t.className),children:[t.icon,t.title]})},t.path))})}function $w({onModelChange:e,onMachineNumberChange:t}){const{user:r,logout:n}=sv();tm();const i=im(),[s,o]=Lt.useState(!1),[a,l]=Lt.useState(""),[c,u]=Lt.useState("");if(!r)return null;const d=()=>Ke(this,null,function*(){try{yield n()}catch(e){console.error(":",e)}}),p=()=>{console.log(""),i("/settings")};return Gt.jsxs("header",{className:"bg-primary text-white py-3 px-4 flex items-center justify-between shadow-md",children:[Gt.jsxs("div",{className:"flex items-center",children:[Gt.jsx("h1",{className:"text-sm font-semibold mr-6",style:{fontSize:"70%"},children:""}),Gt.jsx("div",{className:"hidden md:flex items-center space-x-1",children:Gt.jsx(Hw,{})})]}),Gt.jsxs("div",{className:"flex items-center space-x-4",children:[Gt.jsxs("div",{className:"text-xs",style:{fontSize:"80%"},children:[Gt.jsxs("div",{children:["",(null==r?void 0:r.display_name)||(null==r?void 0:r.username)||""]}),Gt.jsx("div",{className:"text-blue-200",children:"admin"===(null==r?void 0:r.role)?"":""})]}),Gt.jsx(Bg,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:p,title:"",children:Gt.jsx(By,{className:"h-6 w-6"})}),Gt.jsx(Bg,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:d,title:"",children:Gt.jsx(Ny,{className:"h-6 w-6"})}),Gt.jsx("div",{className:"md:hidden",children:Gt.jsxs(Lw,{open:s,onOpenChange:o,children:[Gt.jsx(zw,{asChild:!0,children:Gt.jsx(Bg,{variant:"ghost",size:"icon",className:"text-white",children:Gt.jsx(Ry,{})})}),Gt.jsxs(Ww,{side:"left",className:"p-0",children:[Gt.jsx("div",{className:"bg-primary text-white p-4",children:Gt.jsx("h2",{className:"text-xl font-semibold",children:""})}),Gt.jsxs("nav",{className:"p-4",children:[Gt.jsx(Hw,{}),Gt.jsxs("div",{className:"mt-4 pt-4 border-t",children:[Gt.jsxs("button",{onClick:()=>{p(),o(!1)},className:"flex items-center w-full px-3 py-2 text-sm rounded-md hover:bg-gray-100 text-blue-600",children:[Gt.jsx(By,{className:"mr-2 h-4 w-4"}),""]}),Gt.jsxs("button",{onClick:()=>{d(),o(!1)},className:"flex items-center w-full px-3 py-2 text-sm rounded-md hover:bg-gray-100 text-red-600",children:[Gt.jsx(Ny,{className:"mr-2 h-4 w-4"}),""]})]})]})]})]})})]})]})}function Vw(e){const t=qw(e),r=Lt.forwardRef((e,r)=>{const n=e,{children:i}=n,s=Fe(n,["children"]),o=Lt.Children.toArray(i),a=o.find(Kw);if(a){const e=a.props.children,n=o.map(t=>t===a?Lt.Children.count(e)>1?Lt.Children.only(null):Lt.isValidElement(e)?e.props.children:null:t);return Gt.jsx(t,ze(Le({},s),{ref:r,children:Lt.isValidElement(e)?Lt.cloneElement(e,void 0,n):null}))}return Gt.jsx(t,ze(Le({},s),{ref:r,children:i}))});return r.displayName=`${e}.Slot`,r}function qw(e){const t=Lt.forwardRef((e,t)=>{const r=e,{children:n}=r,i=Fe(r,["children"]);if(Lt.isValidElement(n)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const r=Le({},t);for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]=Le(Le({},i),s):"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return Le(Le({},e),r)}(i,n.props);return n.type!==Lt.Fragment&&(r.ref=t?Nv(t,e):e),Lt.cloneElement(n,r)}return Lt.Children.count(n)>1?Lt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(Dw,Le({ref:t,className:zg("text-sm text-muted-foreground",n)},i))}).displayName=Dw.displayName;var Gw=Symbol("radix.slottable");function Kw(e){return Lt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Gw}function Jw(e){const t=e+"CollectionProvider",[r,n]=cb(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:r}=e,n=zt.useRef(null),s=zt.useRef(new Map).current;return Gt.jsx(i,{scope:t,itemMap:s,collectionRef:n,children:r})};o.displayName=t;const a=e+"CollectionSlot",l=Vw(a),c=zt.forwardRef((e,t)=>{const{scope:r,children:n}=e,i=Pv(t,s(a,r).collectionRef);return Gt.jsx(l,{ref:i,children:n})});c.displayName=a;const u=e+"CollectionItemSlot",d="data-radix-collection-item",p=Vw(u),h=zt.forwardRef((e,t)=>{const r=e,{scope:n,children:i}=r,o=Fe(r,["scope","children"]),a=zt.useRef(null),l=Pv(t,a),c=s(u,n);return zt.useEffect(()=>(c.itemMap.set(a,Le({ref:a},o)),()=>{c.itemMap.delete(a)})),Gt.jsx(p,ze(Le({},{[d]:""}),{ref:l,children:i}))});return h.displayName=u,[{Provider:o,Slot:c,ItemSlot:h},function(t){const r=s(e+"CollectionConsumer",t),n=zt.useCallback(()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),n=Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current));return n},[r.collectionRef,r.itemMap]);return n},n]}var Yw=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Zw=Lt.forwardRef((e,t)=>Gt.jsx(wb.span,ze(Le({},e),{ref:t,style:Le(Le({},Yw),e.style)})));Zw.displayName="VisuallyHidden";var Qw=Zw,Xw="ToastProvider",[eS,tS,rS]=Jw("Toast"),[nS]=cb("Toast",[rS]),[iS,sS]=nS(Xw),oS=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=e,[a,l]=Lt.useState(null),[c,u]=Lt.useState(0),d=Lt.useRef(!1),p=Lt.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Xw}\`. Expected non-empty \`string\`.`),Gt.jsx(eS.Provider,{scope:t,children:Gt.jsx(iS,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:Lt.useCallback(()=>u(e=>e+1),[]),onToastRemove:Lt.useCallback(()=>u(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:p,children:o})})};oS.displayName=Xw;var aS="ToastViewport",lS=["F8"],cS="toast.viewportPause",uS="toast.viewportResume",dS=Lt.forwardRef((e,t)=>{const r=e,{__scopeToast:n,hotkey:i=lS,label:s="Notifications ({hotkey})"}=r,o=Fe(r,["__scopeToast","hotkey","label"]),a=sS(aS,n),l=tS(n),c=Lt.useRef(null),u=Lt.useRef(null),d=Lt.useRef(null),p=Lt.useRef(null),h=Pv(t,p,a.onViewportChange),f=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=a.toastCount>0;Lt.useEffect(()=>{const e=e=>{var t;0!==i.length&&i.every(t=>e[t]||e.code===t)&&(null==(t=p.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),Lt.useEffect(()=>{const e=c.current,t=p.current;if(m&&e&&t){const r=()=>{if(!a.isClosePausedRef.current){const e=new CustomEvent(cS);t.dispatchEvent(e),a.isClosePausedRef.current=!0}},n=()=>{if(a.isClosePausedRef.current){const e=new CustomEvent(uS);t.dispatchEvent(e),a.isClosePausedRef.current=!1}},i=t=>{!e.contains(t.relatedTarget)&&n()},s=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",i),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",s),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}},[m,a.isClosePausedRef]);const v=Lt.useCallback(({tabbingDirection:e})=>{const t=l().map(t=>{const r=t.ref.current,n=[r,...kS(r)];return"forwards"===e?n:n.reverse()});return("forwards"===e?t.reverse():t).flat()},[l]);return Lt.useEffect(()=>{const e=p.current;if(e){const t=t=>{var r,n,i;const s=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!s){const s=document.activeElement,o=t.shiftKey;if(t.target===e&&o)return void(null==(r=u.current)||r.focus());const a=v({tabbingDirection:o?"backwards":"forwards"}),l=a.findIndex(e=>e===s);_S(a.slice(l+1))?t.preventDefault():o?null==(n=u.current)||n.focus():null==(i=d.current)||i.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[l,v]),Gt.jsxs(Ob,{ref:c,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&Gt.jsx(hS,{ref:u,onFocusFromOutsideViewport:()=>{_S(v({tabbingDirection:"forwards"}))}}),Gt.jsx(eS.Slot,{scope:n,children:Gt.jsx(wb.ol,ze(Le({tabIndex:-1},o),{ref:h}))}),m&&Gt.jsx(hS,{ref:d,onFocusFromOutsideViewport:()=>{_S(v({tabbingDirection:"backwards"}))}})]})});dS.displayName=aS;var pS="ToastFocusProxy",hS=Lt.forwardRef((e,t)=>{const r=e,{__scopeToast:n,onFocusFromOutsideViewport:i}=r,s=Fe(r,["__scopeToast","onFocusFromOutsideViewport"]),o=sS(pS,n);return Gt.jsx(Zw,ze(Le({tabIndex:0},s),{ref:t,style:{position:"fixed"},onFocus:e=>{var t;const r=e.relatedTarget;!(null==(t=o.viewport)?void 0:t.contains(r))&&i()}}))});hS.displayName=pS;var fS="Toast",mS=Lt.forwardRef((e,t)=>{const r=e,{forceMount:n,open:i,defaultOpen:s,onOpenChange:o}=r,a=Fe(r,["forceMount","open","defaultOpen","onOpenChange"]),[l,c]=vb({prop:i,defaultProp:null==s||s,onChange:o,caller:fS});return Gt.jsx(qb,{present:n||l,children:Gt.jsx(yS,ze(Le({open:l},a),{ref:t,onClose:()=>c(!1),onPause:Cb(e.onPause),onResume:Cb(e.onResume),onSwipeStart:lb(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:lb(e.onSwipeMove,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)}),onSwipeCancel:lb(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:lb(e.onSwipeEnd,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),c(!1)})}))})});mS.displayName=fS;var[vS,gS]=nS(fS,{onClose(){}}),yS=Lt.forwardRef((e,t)=>{const r=e,{__scopeToast:n,type:i="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:p,onSwipeCancel:h,onSwipeEnd:f}=r,m=Fe(r,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),v=sS(fS,n),[g,y]=Lt.useState(null),b=Pv(t,e=>y(e)),x=Lt.useRef(null),w=Lt.useRef(null),S=s||v.duration,C=Lt.useRef(0),E=Lt.useRef(S),T=Lt.useRef(0),{onToastAdd:N,onToastRemove:P}=v,R=Cb(()=>{var e;(null==g?void 0:g.contains(document.activeElement))&&(null==(e=v.viewport)||e.focus()),a()}),I=Lt.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(T.current),C.current=(new Date).getTime(),T.current=window.setTimeout(R,e))},[R]);Lt.useEffect(()=>{const e=v.viewport;if(e){const t=()=>{I(E.current),null==u||u()},r=()=>{const e=(new Date).getTime()-C.current;E.current=E.current-e,window.clearTimeout(T.current),null==c||c()};return e.addEventListener(cS,r),e.addEventListener(uS,t),()=>{e.removeEventListener(cS,r),e.removeEventListener(uS,t)}}},[v.viewport,S,c,u,I]),Lt.useEffect(()=>{o&&!v.isClosePausedRef.current&&I(S)},[o,S,v.isClosePausedRef,I]),Lt.useEffect(()=>(N(),()=>P()),[N,P]);const k=Lt.useMemo(()=>g?PS(g):null,[g]);return v.viewport?Gt.jsxs(Gt.Fragment,{children:[k&&Gt.jsx(bS,{__scopeToast:n,role:"status","aria-live":"foreground"===i?"assertive":"polite",children:k}),Gt.jsx(vS,{scope:n,onClose:R,children:eh.createPortal(Gt.jsx(eS.ItemSlot,{scope:n,children:Gt.jsx(jb,{asChild:!0,onEscapeKeyDown:lb(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||R(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:Gt.jsx(wb.li,ze(Le({tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection},m),{ref:b,style:Le({userSelect:"none",touchAction:"none"},e.style),onKeyDown:lb(e.onKeyDown,e=>{"Escape"===e.key&&(null==l||l(e.nativeEvent),e.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:lb(e.onPointerDown,e=>{0===e.button&&(x.current={x:e.clientX,y:e.clientY})}),onPointerMove:lb(e.onPointerMove,e=>{if(!x.current)return;const t=e.clientX-x.current.x,r=e.clientY-x.current.y,n=Boolean(w.current),i=["left","right"].includes(v.swipeDirection),s=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,o=i?s(0,t):0,a=i?0:s(0,r),l="touch"===e.pointerType?10:2,c={x:o,y:a},u={originalEvent:e,delta:c};n?(w.current=c,RS("toast.swipeMove",p,u,{discrete:!1})):IS(c,v.swipeDirection,l)?(w.current=c,RS("toast.swipeStart",d,u,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(x.current=null)}),onPointerUp:lb(e.onPointerUp,e=>{const t=w.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),w.current=null,x.current=null,t){const r=e.currentTarget,n={originalEvent:e,delta:t};IS(t,v.swipeDirection,v.swipeThreshold)?RS("toast.swipeEnd",f,n,{discrete:!0}):RS("toast.swipeCancel",h,n,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})}))})}),v.viewport)})]}):null}),bS=e=>{const t=e,{__scopeToast:r,children:n}=t,i=Fe(t,["__scopeToast","children"]),s=sS(fS,r),[o,a]=Lt.useState(!1),[l,c]=Lt.useState(!1);return function(e=()=>{}){const t=Cb(e);db(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>a(!0)),Lt.useEffect(()=>{const e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),l?null:Gt.jsx(Vb,{asChild:!0,children:Gt.jsx(Zw,ze(Le({},i),{children:o&&Gt.jsxs(Gt.Fragment,{children:[s.label," ",n]})}))})},xS=Lt.forwardRef((e,t)=>{const r=e,{__scopeToast:n}=r,i=Fe(r,["__scopeToast"]);return Gt.jsx(wb.div,ze(Le({},i),{ref:t}))});xS.displayName="ToastTitle";var wS=Lt.forwardRef((e,t)=>{const r=e,{__scopeToast:n}=r,i=Fe(r,["__scopeToast"]);return Gt.jsx(wb.div,ze(Le({},i),{ref:t}))});wS.displayName="ToastDescription";var SS="ToastAction",CS=Lt.forwardRef((e,t)=>{const r=e,{altText:n}=r,i=Fe(r,["altText"]);return n.trim()?Gt.jsx(NS,{altText:n,asChild:!0,children:Gt.jsx(TS,ze(Le({},i),{ref:t}))}):(console.error(`Invalid prop \`altText\` supplied to \`${SS}\`. Expected non-empty \`string\`.`),null)});CS.displayName=SS;var ES="ToastClose",TS=Lt.forwardRef((e,t)=>{const r=e,{__scopeToast:n}=r,i=Fe(r,["__scopeToast"]),s=gS(ES,n);return Gt.jsx(NS,{asChild:!0,children:Gt.jsx(wb.button,ze(Le({type:"button"},i),{ref:t,onClick:lb(e.onClick,s.onClose)}))})});TS.displayName=ES;var NS=Lt.forwardRef((e,t)=>{const r=e,{__scopeToast:n,altText:i}=r,s=Fe(r,["__scopeToast","altText"]);return Gt.jsx(wb.div,ze(Le({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0},s),{ref:t}))});function PS(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const r=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!r)if(n){const r=e.dataset.radixToastAnnounceAlt;r&&t.push(r)}else t.push(...PS(e))}}),t}function RS(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Sb(i,s):i.dispatchEvent(s)}var IS=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),s=n>i;return"left"===t||"right"===t?s&&n>r:!s&&i>r};function kS(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function _S(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var AS=dS,jS=mS,OS=xS,DS=wS,MS=CS,LS=TS;const zS=oS,FS=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(AS,Le({ref:t,className:zg("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n)},i))});FS.displayName=AS.displayName;const BS=Bv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),US=Lt.forwardRef((e,t)=>{var r=e,{className:n,variant:i}=r,s=Fe(r,["className","variant"]);return Gt.jsx(jS,Le({ref:t,className:zg(BS({variant:i}),n)},s))});US.displayName=jS.displayName;Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(MS,Le({ref:t,className:zg("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n)},i))}).displayName=MS.displayName;const WS=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(LS,ze(Le({ref:t,className:zg("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":""},i),{children:Gt.jsx(ob,{className:"h-4 w-4"})}))});WS.displayName=LS.displayName;const HS=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(OS,Le({ref:t,className:zg("text-sm font-semibold",n)},i))});HS.displayName=OS.displayName;const $S=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(DS,Le({ref:t,className:zg("text-sm opacity-90",n)},i))});$S.displayName=DS.displayName;const VS=()=>{const{toasts:e}=fv();return Gt.jsxs(zS,{children:[e.map(function(e){var t=e,{id:r,title:n,description:i,action:s}=t,o=Fe(t,["id","title","description","action"]);return Gt.jsxs(US,ze(Le({},o),{children:[Gt.jsxs("div",{className:"grid gap-1",children:[n&&Gt.jsx(HS,{children:n}),i&&Gt.jsx($S,{children:i})]}),s,Gt.jsx(WS,{})]}),r)}),Gt.jsx(FS,{})]})};let qS=class extends Lt.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return console.error(" ErrorBoundary caught an error:",e),{hasError:!0,error:e}}componentDidCatch(e,t){console.error(" ErrorBoundary error details:",{error:e.message,stack:e.stack,componentStack:t.componentStack})}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:Gt.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-b from-red-50 to-red-100 p-4",children:Gt.jsxs("div",{className:"text-center max-w-md",children:[Gt.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),Gt.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:""}),Gt.jsx("p",{className:"text-red-600 mb-6",children:""}),Gt.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:Gt.jsx("p",{className:"text-sm text-red-700 font-mono",children:(null==(e=this.state.error)?void 0:e.message)||"Unknown error"})}),Gt.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:""})]})}):this.props.children}};function GS(){const e=tm();return Lt.useEffect(()=>{console.log(" :",{pathname:e.pathname,search:e.search,hash:e.hash,state:e.state,timestamp:(new Date).toISOString()})},[e]),null}console.info("API BASE =","");const KS=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>JL),void 0)),JS=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>cH),void 0)),YS=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>HH),void 0)),ZS=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>YH),void 0)),QS=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>SV),void 0)),XS=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>aq),void 0)),eC=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>d3),void 0)),tC=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>X5),void 0)),rC=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>fie),void 0)),nC=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>Cie),void 0)),iC=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>Eie),void 0)),sC=Lt.lazy(()=>ff(()=>Promise.resolve().then(()=>Tie),void 0));function oC(){const[e,t]=Lt.useState("checking"),[r,n]=Lt.useState(null);return Lt.useEffect(()=>{(()=>{Ke(this,null,function*(){console.log(" APIUI"),t("connected")})})()},[]),"checking"===e?Gt.jsx("div",{className:"flex justify-center items-center h-screen",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-600",children:"API..."})]})}):"failed"===e?(console.warn(" API:",r),Gt.jsx("div",{className:"fixed top-4 right-4 z-50 bg-yellow-50 border border-yellow-200 rounded-lg p-3 max-w-sm",children:Gt.jsxs("div",{className:"flex items-center",children:[Gt.jsx("div",{className:"text-yellow-600 text-lg mr-2",children:""}),Gt.jsxs("div",{children:[Gt.jsx("p",{className:"text-yellow-800 font-medium text-sm",children:"API"}),Gt.jsx("p",{className:"text-yellow-600 text-xs",children:r})]})]})})):null}function aC(){console.log(" RootRedirect - ");const{user:e,isLoading:t}=sv();return console.log(" RootRedirect - :",{isLoading:t,hasUser:!!e,username:null==e?void 0:e.username}),t?Gt.jsx("div",{className:"flex justify-center items-center h-screen",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-600",children:"..."})]})}):Gt.jsx(mm,{to:e?"/chat":"/login",replace:!0})}function lC(){return Gt.jsxs("div",{className:"flex flex-col h-screen",children:[Gt.jsx(cC,{}),Gt.jsx(oC,{}),Gt.jsx($w,{}),Gt.jsxs("main",{className:"flex-1 overflow-auto",children:[Gt.jsx(uC,{}),Gt.jsx(Lt.Suspense,{fallback:Gt.jsx("div",{className:"flex justify-center items-center h-full",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-600",children:"..."})]})}),children:Gt.jsxs(ym,{children:[Gt.jsx(vm,{path:"/login",element:Gt.jsx(KS,{})}),Gt.jsx(vm,{path:"/chat",element:Gt.jsx(Cv,{children:Gt.jsx(JS,{})})}),Gt.jsx(vm,{path:"/settings",element:Gt.jsx(Cv,{children:Gt.jsx(YS,{})})}),Gt.jsx(vm,{path:"/system-diagnostic",element:Gt.jsx(Cv,{children:Gt.jsx(ZS,{})})}),Gt.jsx(vm,{path:"/history",element:Gt.jsx(Cv,{children:Gt.jsx(QS,{})})}),Gt.jsx(vm,{path:"/documents",element:Gt.jsx(Cv,{children:Gt.jsx(XS,{})})}),Gt.jsx(vm,{path:"/troubleshooting",element:Gt.jsx(Cv,{children:Gt.jsx(eC,{})})}),Gt.jsx(vm,{path:"/emergency-guide",element:Gt.jsx(Cv,{children:Gt.jsx(tC,{})})}),Gt.jsx(vm,{path:"/users",element:Gt.jsx(Ev,{children:Gt.jsx(rC,{})})}),Gt.jsx(vm,{path:"/base-data",element:Gt.jsx(Ev,{children:Gt.jsx(nC,{})})}),Gt.jsx(vm,{path:"/machine-management",element:Gt.jsx(Ev,{children:Gt.jsx(iC,{})})}),Gt.jsx(vm,{path:"/not-found",element:Gt.jsx(sC,{})}),Gt.jsx(vm,{path:"/",element:Gt.jsx(aC,{})}),Gt.jsx(vm,{path:"*",element:Gt.jsx(mm,{to:"/not-found",replace:!0})})]})})]}),Gt.jsx(VS,{})]})}function cC(){const{authMode:e}=sv();if(!e)return null;return Gt.jsx("div",{className:`fixed top-4 right-4 z-50 px-3 py-1 rounded-full border text-sm font-medium ${(e=>{switch(e){case"safe":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"jwt-bypass":return"bg-orange-100 text-orange-800 border-orange-200";case"jwt":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e)}`,children:(e=>{switch(e){case"safe":return"";case"jwt-bypass":return"JWT";case"jwt":return"";default:return e}})(e)})}function uC(){const{authMode:e}=sv();return"jwt"===e?null:Gt.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:Gt.jsx("div",{className:"flex",children:Gt.jsx("div",{className:"ml-3",children:Gt.jsxs("p",{className:"text-sm text-yellow-700",children:[Gt.jsx("strong",{children:""}),"safe"===e&&" ","jwt-bypass"===e&&" JWT"]})})})})}function dC(){return console.log(" App.tsx: "),console.log(" App.tsx: :",{VITE_API_BASE_URL:"",NODE_ENV:void 0,timestamp:(new Date).toISOString()}),console.log(" App.tsx: "),Gt.jsx(qS,{children:Gt.jsxs(Bm,{children:[Gt.jsx(GS,{}),Gt.jsx(iv,{children:Gt.jsx(Sv,{children:Gt.jsx(lC,{})})})]})})}const pC=new nf({defaultOptions:{queries:{retry:!1,refetchOnWindowFocus:!1},mutations:{retry:!1}}});let hC=class extends zt.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("React Error:",e,t)}render(){return this.state.hasError?Gt.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Application Error"}),Gt.jsx("p",{className:"text-gray-600 mb-4",children:""}),Gt.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:""})]})}):this.props.children}};function fC(){try{console.log(" ...");const e=document.getElementById("root");if(!e)throw new Error("Root container not found");rh(e).render(Gt.jsx(zt.StrictMode,{children:Gt.jsx(hC,{children:Gt.jsx(af,{client:pC,children:Gt.jsx(dC,{})})})})),console.log(" ")}catch(e){console.error(" :",e);const t=document.getElementById("root");t&&(t.innerHTML='\n        <div style="\n          min-height: 100vh;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background-color: #f9fafb;\n          font-family: system-ui, -apple-system, sans-serif;\n        ">\n          <div style="text-align: center; padding: 2rem;">\n            <h1 style="color: #dc2626; font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">\n              \n            </h1>\n            <p style="color: #6b7280; margin-bottom: 1rem;">\n              \n            </p>\n            <button \n              onclick="window.location.reload()"\n              style="\n                background-color: #3b82f6;\n                color: white;\n                padding: 0.5rem 1rem;\n                border: none;\n                border-radius: 0.25rem;\n                cursor: pointer;\n                font-size: 0.875rem;\n              "\n              onmouseover="this.style.backgroundColor=\'#2563eb\'"\n              onmouseout="this.style.backgroundColor=\'#3b82f6\'"\n            >\n              \n            </button>\n          </div>\n        </div>\n      ')}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",fC):fC();var mC={},vC={},gC={},yC={},bC={},xC={},wC={},SC={},CC={},EC={};let TC;Object.defineProperty(EC,"__esModule",{value:!0}),EC.default=function(){if(!TC&&(TC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!TC))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return TC(NC)};const NC=new Uint8Array(16);var PC={},RC={},IC={};Object.defineProperty(IC,"__esModule",{value:!0}),IC.default=void 0;IC.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Object.defineProperty(RC,"__esModule",{value:!0}),RC.default=void 0;var kC,_C=(kC=IC)&&kC.__esModule?kC:{default:kC};var AC=function(e){return"string"==typeof e&&_C.default.test(e)};RC.default=AC,Object.defineProperty(PC,"__esModule",{value:!0}),PC.default=void 0,PC.unsafeStringify=DC;var jC=function(e){return e&&e.__esModule?e:{default:e}}(RC);const OC=[];for(let $=0;$<256;++$)OC.push(($+256).toString(16).slice(1));function DC(e,t=0){return OC[e[t+0]]+OC[e[t+1]]+OC[e[t+2]]+OC[e[t+3]]+"-"+OC[e[t+4]]+OC[e[t+5]]+"-"+OC[e[t+6]]+OC[e[t+7]]+"-"+OC[e[t+8]]+OC[e[t+9]]+"-"+OC[e[t+10]]+OC[e[t+11]]+OC[e[t+12]]+OC[e[t+13]]+OC[e[t+14]]+OC[e[t+15]]}var MC=function(e,t=0){const r=DC(e,t);if(!(0,jC.default)(r))throw TypeError("Stringified UUID is invalid");return r};PC.default=MC,Object.defineProperty(CC,"__esModule",{value:!0}),CC.default=void 0;var LC=function(e){return e&&e.__esModule?e:{default:e}}(EC),zC=PC;let FC,BC,UC=0,WC=0;var HC=function(e,t,r){let n=t&&r||0;const i=t||new Array(16);let s=(e=e||{}).node||FC,o=void 0!==e.clockseq?e.clockseq:BC;if(null==s||null==o){const t=e.random||(e.rng||LC.default)();null==s&&(s=FC=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==o&&(o=BC=16383&(t[6]<<8|t[7]))}let a=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:WC+1;const c=a-UC+(l-WC)/1e4;if(c<0&&void 0===e.clockseq&&(o=o+1&16383),(c<0||a>UC)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");UC=a,WC=l,BC=o,a+=122192928e5;const u=(1e4*(268435455&a)+l)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=255&u;const d=a/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(let p=0;p<6;++p)i[n+p]=s[p];return t||(0,zC.unsafeStringify)(i)};CC.default=HC;var $C={},VC={},qC={};Object.defineProperty(qC,"__esModule",{value:!0}),qC.default=void 0;var GC=function(e){return e&&e.__esModule?e:{default:e}}(RC);var KC=function(e){if(!(0,GC.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};qC.default=KC,Object.defineProperty(VC,"__esModule",{value:!0}),VC.URL=VC.DNS=void 0,VC.default=function(e,t,r){function n(e,n,i,s){var o;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,YC.default)(n)),16!==(null===(o=n)||void 0===o?void 0:o.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),a=r(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,i){s=s||0;for(let e=0;e<16;++e)i[s+e]=a[e];return i}return(0,JC.unsafeStringify)(a)}try{n.name=e}catch(Pie){}return n.DNS=ZC,n.URL=QC,n};var JC=PC,YC=function(e){return e&&e.__esModule?e:{default:e}}(qC);const ZC="6ba7b810-9dad-11d1-80b4-00c04fd430c8";VC.DNS=ZC;const QC="6ba7b811-9dad-11d1-80b4-00c04fd430c8";VC.URL=QC;var XC={};function eE(e){return 14+(e+64>>>9<<4)+1}function tE(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function rE(e,t,r,n,i,s){return tE((o=tE(tE(t,e),tE(n,s)))<<(a=i)|o>>>32-a,r);var o,a}function nE(e,t,r,n,i,s,o){return rE(t&r|~t&n,e,t,i,s,o)}function iE(e,t,r,n,i,s,o){return rE(t&n|r&~n,e,t,i,s,o)}function sE(e,t,r,n,i,s,o){return rE(t^r^n,e,t,i,s,o)}function oE(e,t,r,n,i,s,o){return rE(r^(t|~n),e,t,i,s,o)}Object.defineProperty(XC,"__esModule",{value:!0}),XC.default=void 0;var aE=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let i=0;i<r;i+=8){const r=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[eE(t)-1]=t;let r=1732584193,n=-271733879,i=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const t=r,a=n,l=i,c=s;r=nE(r,n,i,s,e[o],7,-680876936),s=nE(s,r,n,i,e[o+1],12,-389564586),i=nE(i,s,r,n,e[o+2],17,606105819),n=nE(n,i,s,r,e[o+3],22,-1044525330),r=nE(r,n,i,s,e[o+4],7,-176418897),s=nE(s,r,n,i,e[o+5],12,1200080426),i=nE(i,s,r,n,e[o+6],17,-1473231341),n=nE(n,i,s,r,e[o+7],22,-45705983),r=nE(r,n,i,s,e[o+8],7,1770035416),s=nE(s,r,n,i,e[o+9],12,-1958414417),i=nE(i,s,r,n,e[o+10],17,-42063),n=nE(n,i,s,r,e[o+11],22,-1990404162),r=nE(r,n,i,s,e[o+12],7,1804603682),s=nE(s,r,n,i,e[o+13],12,-40341101),i=nE(i,s,r,n,e[o+14],17,-1502002290),n=nE(n,i,s,r,e[o+15],22,1236535329),r=iE(r,n,i,s,e[o+1],5,-165796510),s=iE(s,r,n,i,e[o+6],9,-1069501632),i=iE(i,s,r,n,e[o+11],14,643717713),n=iE(n,i,s,r,e[o],20,-373897302),r=iE(r,n,i,s,e[o+5],5,-701558691),s=iE(s,r,n,i,e[o+10],9,38016083),i=iE(i,s,r,n,e[o+15],14,-660478335),n=iE(n,i,s,r,e[o+4],20,-405537848),r=iE(r,n,i,s,e[o+9],5,568446438),s=iE(s,r,n,i,e[o+14],9,-1019803690),i=iE(i,s,r,n,e[o+3],14,-187363961),n=iE(n,i,s,r,e[o+8],20,1163531501),r=iE(r,n,i,s,e[o+13],5,-1444681467),s=iE(s,r,n,i,e[o+2],9,-51403784),i=iE(i,s,r,n,e[o+7],14,1735328473),n=iE(n,i,s,r,e[o+12],20,-1926607734),r=sE(r,n,i,s,e[o+5],4,-378558),s=sE(s,r,n,i,e[o+8],11,-2022574463),i=sE(i,s,r,n,e[o+11],16,1839030562),n=sE(n,i,s,r,e[o+14],23,-35309556),r=sE(r,n,i,s,e[o+1],4,-1530992060),s=sE(s,r,n,i,e[o+4],11,1272893353),i=sE(i,s,r,n,e[o+7],16,-155497632),n=sE(n,i,s,r,e[o+10],23,-1094730640),r=sE(r,n,i,s,e[o+13],4,681279174),s=sE(s,r,n,i,e[o],11,-358537222),i=sE(i,s,r,n,e[o+3],16,-722521979),n=sE(n,i,s,r,e[o+6],23,76029189),r=sE(r,n,i,s,e[o+9],4,-640364487),s=sE(s,r,n,i,e[o+12],11,-421815835),i=sE(i,s,r,n,e[o+15],16,530742520),n=sE(n,i,s,r,e[o+2],23,-995338651),r=oE(r,n,i,s,e[o],6,-198630844),s=oE(s,r,n,i,e[o+7],10,1126891415),i=oE(i,s,r,n,e[o+14],15,-1416354905),n=oE(n,i,s,r,e[o+5],21,-57434055),r=oE(r,n,i,s,e[o+12],6,1700485571),s=oE(s,r,n,i,e[o+3],10,-1894986606),i=oE(i,s,r,n,e[o+10],15,-1051523),n=oE(n,i,s,r,e[o+1],21,-2054922799),r=oE(r,n,i,s,e[o+8],6,1873313359),s=oE(s,r,n,i,e[o+15],10,-30611744),i=oE(i,s,r,n,e[o+6],15,-1560198380),n=oE(n,i,s,r,e[o+13],21,1309151649),r=oE(r,n,i,s,e[o+4],6,-145523070),s=oE(s,r,n,i,e[o+11],10,-1120210379),i=oE(i,s,r,n,e[o+2],15,718787259),n=oE(n,i,s,r,e[o+9],21,-343485551),r=tE(r,t),n=tE(n,a),i=tE(i,l),s=tE(s,c)}return[r,n,i,s]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(eE(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};XC.default=aE,Object.defineProperty($C,"__esModule",{value:!0}),$C.default=void 0;var lE=uE(VC),cE=uE(XC);function uE(e){return e&&e.__esModule?e:{default:e}}var dE=(0,lE.default)("v3",48,cE.default);$C.default=dE;var pE={},hE={};Object.defineProperty(hE,"__esModule",{value:!0}),hE.default=void 0;var fE={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};hE.default=fE,Object.defineProperty(pE,"__esModule",{value:!0}),pE.default=void 0;var mE=yE(hE),vE=yE(EC),gE=PC;function yE(e){return e&&e.__esModule?e:{default:e}}var bE=function(e,t,r){if(mE.default.randomUUID&&!t&&!e)return mE.default.randomUUID();const n=(e=e||{}).random||(e.rng||vE.default)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return(0,gE.unsafeStringify)(n)};pE.default=bE;var xE={},wE={};function SE(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function CE(e,t){return e<<t|e>>>32-t}Object.defineProperty(wE,"__esModule",{value:!0}),wE.default=void 0;var EE=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const n=e.length/4+2,i=Math.ceil(n/16),s=new Array(i);for(let o=0;o<i;++o){const t=new Uint32Array(16);for(let r=0;r<16;++r)t[r]=e[64*o+4*r]<<24|e[64*o+4*r+1]<<16|e[64*o+4*r+2]<<8|e[64*o+4*r+3];s[o]=t}s[i-1][14]=8*(e.length-1)/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=8*(e.length-1)&4294967295;for(let o=0;o<i;++o){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=s[o][t];for(let t=16;t<80;++t)e[t]=CE(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let n=r[0],i=r[1],a=r[2],l=r[3],c=r[4];for(let r=0;r<80;++r){const s=Math.floor(r/20),o=CE(n,5)+SE(s,i,a,l)+c+t[s]+e[r]>>>0;c=l,l=a,a=CE(i,30)>>>0,i=n,n=o}r[0]=r[0]+n>>>0,r[1]=r[1]+i>>>0,r[2]=r[2]+a>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+c>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};wE.default=EE,Object.defineProperty(xE,"__esModule",{value:!0}),xE.default=void 0;var TE=PE(VC),NE=PE(wE);function PE(e){return e&&e.__esModule?e:{default:e}}var RE=(0,TE.default)("v5",80,NE.default);xE.default=RE;var IE={};Object.defineProperty(IE,"__esModule",{value:!0}),IE.default=void 0;IE.default="00000000-0000-0000-0000-000000000000";var kE={};Object.defineProperty(kE,"__esModule",{value:!0}),kE.default=void 0;var _E=function(e){return e&&e.__esModule?e:{default:e}}(RC);var AE=function(e){if(!(0,_E.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};kE.default=AE,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return o.default}});var t=u(CC),r=u($C),n=u(pE),i=u(xE),s=u(IE),o=u(kE),a=u(RC),l=u(PC),c=u(qC);function u(e){return e&&e.__esModule?e:{default:e}}}(SC),Object.defineProperty(wC,"__esModule",{value:!0}),wC.createNoDashGuid=wC.createGuid=void 0;const jE=SC,OE=()=>(0,jE.v4)();wC.createGuid=OE;wC.createNoDashGuid=()=>OE().replace(new RegExp("-","g"),"").toUpperCase(),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformEvent=e.EventType=void 0;const t=wC;var r;(r=e.EventType||(e.EventType={}))[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None";e.PlatformEvent=class{constructor(e,r){this.privName=e,this.privEventId=(0,t.createNoDashGuid)(),this.privEventTime=(new Date).toISOString(),this.privEventType=r,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}}(xC),Object.defineProperty(bC,"__esModule",{value:!0}),bC.AudioStreamNodeErrorEvent=bC.AudioStreamNodeDetachedEvent=bC.AudioStreamNodeAttachedEvent=bC.AudioStreamNodeAttachingEvent=bC.AudioStreamNodeEvent=bC.AudioSourceErrorEvent=bC.AudioSourceOffEvent=bC.AudioSourceReadyEvent=bC.AudioSourceInitializingEvent=bC.AudioSourceEvent=void 0;const DE=xC;class ME extends DE.PlatformEvent{constructor(e,t,r=DE.EventType.Info){super(e,r),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}bC.AudioSourceEvent=ME;bC.AudioSourceInitializingEvent=class extends ME{constructor(e){super("AudioSourceInitializingEvent",e)}};bC.AudioSourceReadyEvent=class extends ME{constructor(e){super("AudioSourceReadyEvent",e)}};bC.AudioSourceOffEvent=class extends ME{constructor(e){super("AudioSourceOffEvent",e)}};bC.AudioSourceErrorEvent=class extends ME{constructor(e,t){super("AudioSourceErrorEvent",e,DE.EventType.Error),this.privError=t}get error(){return this.privError}};class LE extends ME{constructor(e,t,r){super(e,t),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}}bC.AudioStreamNodeEvent=LE;bC.AudioStreamNodeAttachingEvent=class extends LE{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}};bC.AudioStreamNodeAttachedEvent=class extends LE{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}};bC.AudioStreamNodeDetachedEvent=class extends LE{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}};bC.AudioStreamNodeErrorEvent=class extends LE{constructor(e,t,r){super("AudioStreamNodeErrorEvent",e,t),this.privError=r}get error(){return this.privError}};var zE={};Object.defineProperty(zE,"__esModule",{value:!0}),zE.ConnectionRedirectEvent=zE.ConnectionMessageSentEvent=zE.ConnectionMessageReceivedEvent=zE.ConnectionEstablishErrorEvent=zE.ConnectionErrorEvent=zE.ConnectionClosedEvent=zE.ConnectionEstablishedEvent=zE.ConnectionStartEvent=zE.ConnectionEvent=zE.ServiceEvent=void 0;const FE=xC;zE.ServiceEvent=class extends FE.PlatformEvent{constructor(e,t,r=FE.EventType.Info){super(e,r),this.privJsonResult=t}get jsonString(){return this.privJsonResult}};class BE extends FE.PlatformEvent{constructor(e,t,r=FE.EventType.Info){super(e,r),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}zE.ConnectionEvent=BE;zE.ConnectionStartEvent=class extends BE{constructor(e,t,r){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}};zE.ConnectionEstablishedEvent=class extends BE{constructor(e){super("ConnectionEstablishedEvent",e)}};zE.ConnectionClosedEvent=class extends BE{constructor(e,t,r){super("ConnectionClosedEvent",e,FE.EventType.Debug),this.privReason=r,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};zE.ConnectionErrorEvent=class extends BE{constructor(e,t,r){super("ConnectionErrorEvent",e,FE.EventType.Debug),this.privMessage=t,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}};zE.ConnectionEstablishErrorEvent=class extends BE{constructor(e,t,r){super("ConnectionEstablishErrorEvent",e,FE.EventType.Error),this.privStatusCode=t,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};zE.ConnectionMessageReceivedEvent=class extends BE{constructor(e,t,r){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}};zE.ConnectionMessageSentEvent=class extends BE{constructor(e,t,r){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}};zE.ConnectionRedirectEvent=class extends BE{constructor(e,t,r,n){super("ConnectionRedirectEvent",e,FE.EventType.Info),this.privRedirectUrl=t,this.privOriginalUrl=r,this.privContext=n}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}};var UE={},WE={};Object.defineProperty(WE,"__esModule",{value:!0}),WE.ObjectDisposedError=WE.InvalidOperationError=WE.ArgumentNullError=void 0;class HE extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}WE.ArgumentNullError=HE;class $E extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}WE.InvalidOperationError=$E;class VE extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}WE.ObjectDisposedError=VE,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionMessage=e.MessageType=void 0;const t=WE,r=wC;var n,i;(i=n=e.MessageType||(e.MessageType={}))[i.Text=0]="Text",i[i.Binary=1]="Binary";e.ConnectionMessage=class{constructor(e,i,s,o){if(this.privBody=null,e===n.Text&&i&&"string"!=typeof i)throw new t.InvalidOperationError("Payload must be a string");if(e===n.Binary&&i&&!(i instanceof ArrayBuffer))throw new t.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=i,this.privHeaders=s||{},this.privId=o||(0,r.createNoDashGuid)(),this.messageType){case n.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}}(UE);var qE={};Object.defineProperty(qE,"__esModule",{value:!0}),qE.ConnectionOpenResponse=void 0;qE.ConnectionOpenResponse=class{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};var GE={};Object.defineProperty(GE,"__esModule",{value:!0}),GE.DeferralMap=void 0;GE.DeferralMap=class{constructor(){this.privMap={}}add(e,t){this.privMap[e]=t}getId(e){return this.privMap[e]}complete(e,t){try{this.privMap[e].resolve(t)}catch(r){this.privMap[e].reject(r)}finally{this.privMap[e]=void 0}}};var KE={};Object.defineProperty(KE,"__esModule",{value:!0}),KE.SendingAgentContextMessageEvent=KE.DialogEvent=void 0;const JE=xC;class YE extends JE.PlatformEvent{constructor(e,t=JE.EventType.Info){super(e,t)}}KE.DialogEvent=YE;KE.SendingAgentContextMessageEvent=class extends YE{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}};var ZE={},QE={};Object.defineProperty(QE,"__esModule",{value:!0}),QE.EventSource=void 0;const XE=WE,eT=wC;QE.EventSource=class{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new XE.ObjectDisposedError("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){const t=(0,eT.createNoDashGuid)();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach(t=>e.onEvent(t))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(t=>e.onEvent(t)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}},Object.defineProperty(ZE,"__esModule",{value:!0}),ZE.Events=void 0;const tT=WE,rT=QE;class nT{static setEventSource(e){if(!e)throw new tT.ArgumentNullError("eventSource");nT.privInstance=e}static get instance(){return nT.privInstance}}ZE.Events=nT,nT.privInstance=new rT.EventSource;var iT={};Object.defineProperty(iT,"__esModule",{value:!0});var sT,oT,aT={};sT=aT,Object.defineProperty(sT,"__esModule",{value:!0}),sT.ConnectionState=void 0,(oT=sT.ConnectionState||(sT.ConnectionState={}))[oT.None=0]="None",oT[oT.Connected=1]="Connected",oT[oT.Connecting=2]="Connecting",oT[oT.Disconnected=3]="Disconnected";var lT={};Object.defineProperty(lT,"__esModule",{value:!0});var cT={};Object.defineProperty(cT,"__esModule",{value:!0});var uT={};Object.defineProperty(uT,"__esModule",{value:!0});var dT={};Object.defineProperty(dT,"__esModule",{value:!0});var pT={};Object.defineProperty(pT,"__esModule",{value:!0});var hT={};Object.defineProperty(hT,"__esModule",{value:!0});var fT={};Object.defineProperty(fT,"__esModule",{value:!0});var mT={};Object.defineProperty(mT,"__esModule",{value:!0});var vT={};Object.defineProperty(vT,"__esModule",{value:!0}),vT.List=void 0;const gT=WE;vT.List=class e{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();const r=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(t=>{e.push(t)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(t){this.throwIfDisposed();const r=[];for(let e=0;e<this.privList.length;e++)r.push(t(this.privList[e],e));return new e(r)}where(t){this.throwIfDisposed();const r=new e;for(let e=0;e<this.privList.length;e++)t(this.privList[e],e)&&r.add(this.privList[e]);return r}orderBy(t){this.throwIfDisposed();const r=this.toArray().sort(t);return new e(r)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((t,r)=>e(r,t))}clone(){return this.throwIfDisposed(),new e(this.toArray())}concat(t){return this.throwIfDisposed(),new e(this.privList.concat(t.toArray()))}concatArray(t){return this.throwIfDisposed(),new e(this.privList.concat(t))}isDisposed(){return null==this.privList}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new gT.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const t in e)t&&e[t]()}};var yT={};!function(e){var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.marshalPromiseToCallbacks=e.Sink=e.Deferred=e.PromiseResultEventSource=e.PromiseResult=e.PromiseState=void 0,(r=t=e.PromiseState||(e.PromiseState={}))[r.None=0]="None",r[r.Resolved=1]="Resolved",r[r.Rejected=2]="Rejected";class n{constructor(e){this.throwIfError=()=>{if(this.isError)throw this.error},e.on(e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=e)},e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=e)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}e.PromiseResult=n;class i{constructor(){this.setResult=e=>{this.privOnSetResult(e)},this.setError=e=>{this.privOnSetError(e)},this.on=(e,t)=>{this.privOnSetResult=e,this.privOnSetError=t}}}e.PromiseResultEventSource=i;e.Deferred=class{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise((e,t)=>{this.privResolve=e,this.privReject=t})}get promise(){return this.privPromise}};e.Sink=class{constructor(){this.privState=t.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new i,this.privPromiseResult=new n(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(e){if(this.privState!==t.None)throw new Error("'Cannot resolve a completed promise'");this.privState=t.Resolved,this.privPromiseResultEvents.setResult(e);for(let t=0;t<this.privSuccessHandlers.length;t++)this.executeSuccessCallback(e,this.privSuccessHandlers[t],this.privErrorHandlers[t]);this.detachHandlers()}reject(e){if(this.privState!==t.None)throw new Error("'Cannot reject a completed promise'");this.privState=t.Rejected,this.privPromiseResultEvents.setError(e);for(const t of this.privErrorHandlers)this.executeErrorCallback(e,t);this.detachHandlers()}on(e,r){null==e&&(e=()=>{}),this.privState===t.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(r)):(this.privState===t.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,r):this.privState===t.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,r),this.detachHandlers())}executeSuccessCallback(e,t,r){try{t(e)}catch(Nie){this.executeErrorCallback(`'Unhandled callback error: ${Nie}'`,r)}}executeErrorCallback(e,t){if(!t)throw new Error(`'Unhandled error: ${e}'`);try{t(e)}catch(Nie){throw new Error(`'Unhandled callback error: ${Nie}. InnerError: ${e}'`)}}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}},e.marshalPromiseToCallbacks=function(e,t,r){e.then(e=>{try{t&&t(e)}catch(n){if(r)try{if(n instanceof Error){const e=n;r(e.name+": "+e.message)}else r(n)}catch(i){}}},e=>{if(r)try{if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e)}catch(t){}})}}(yT);var bT={};Object.defineProperty(bT,"__esModule",{value:!0}),bT.Queue=void 0;const xT=WE,wT=vT,ST=yT;var CT,ET;(ET=CT||(CT={}))[ET.Dequeue=0]="Dequeue",ET[ET.Peek=1]="Peek";bT.Queue=class{constructor(e){this.privPromiseStore=new wT.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new wT.List,this.privDetachables=[],this.privSubscribers=new wT.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(t=>t(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(e=>{this.privList.add(e)},()=>{})}dequeue(){this.throwIfDispose();const e=new ST.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:CT.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new ST.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:CT.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}drainAndDispose(e,t){return Ke(this,null,function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const r=this.privSubscribers;if(r){for(;r.length()>0;){r.removeFirst().deferral.resolve(void 0)}this.privSubscribers===r&&(this.privSubscribers=r)}for(const e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach(e=>{t.push(e)}),Promise.all(t).finally(()=>{this.privSubscribers=null,this.privList.forEach(t=>{e(t)}),this.privList=null}).then()}this.privSubscribers=null,this.privList=null}})}dispose(e){return Ke(this,null,function*(){yield this.drainAndDispose(null,e)})}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const r=e.removeFirst();if(r.type===CT.Peek)r.deferral.resolve(t.first());else{const e=t.removeFirst();r.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new xT.InvalidOperationError(this.privDisposeReason);throw new xT.ObjectDisposedError("Queue")}if(this.privIsDisposing)throw new xT.InvalidOperationError("Queue disposing")}};var TT={};Object.defineProperty(TT,"__esModule",{value:!0}),TT.RawWebsocketMessage=void 0;const NT=UE,PT=WE,RT=wC;TT.RawWebsocketMessage=class{constructor(e,t,r){if(this.privPayload=null,!t)throw new PT.ArgumentNullError("payload");if(e===NT.MessageType.Binary&&"ArrayBuffer"!==Object.getPrototypeOf(t).constructor.name)throw new PT.InvalidOperationError("Payload must be ArrayBuffer");if(e===NT.MessageType.Text&&"string"!=typeof t)throw new PT.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=r||(0,RT.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===NT.MessageType.Binary)throw new PT.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===NT.MessageType.Text)throw new PT.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};var IT={};Object.defineProperty(IT,"__esModule",{value:!0}),IT.RiffPcmEncoder=void 0;IT.RiffPcmEncoder=class{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const r=2*t.length,n=new ArrayBuffer(r),i=new DataView(n);return this.floatTo16BitPCM(i,0,t),n}setString(e,t,r){for(let n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}floatTo16BitPCM(e,t,r){for(let n=0;n<r.length;n++,t+=2){const i=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,i<0?32768*i:32767*i,!0)}}downSampleAudioFrame(e,t,r){if(!e)return null;if(r===t||r>t)return e;const n=t/r,i=Math.round(e.length/n),s=new Float32Array(i);let o=0,a=0;for(;a<i;){const t=Math.round((a+1)*n);let r=0,i=0;for(;o<t&&o<e.length;)r+=e[o++],i++;s[a++]=r/i}return s}};var kT={};Object.defineProperty(kT,"__esModule",{value:!0}),kT.Stream=void 0;const _T=WE,AT=wC,jT=bT;kT.Stream=class{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||(0,AT.createNoDashGuid)(),this.privReaderQueue=new jT.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(Nie){}}read(){if(this.privIsReadEnded)throw new _T.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(e=>Ke(this,null,function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e}))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new jT.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new _T.InvalidOperationError("Stream closed")}};var OT={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,(t=e.TranslationStatus||(e.TranslationStatus={}))[t.Success=0]="Success",t[t.Error=1]="Error"}(OT);var DT,MT={};var LT={};Object.defineProperty(LT,"__esModule",{value:!0});var zT={};Object.defineProperty(zT,"__esModule",{value:!0}),zT.Timeout=void 0;class FT{static load(){const e=new Map([[0,()=>{}]]),t=new Map,r="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),n=new Worker(r);n.addEventListener("message",({data:r})=>{if(FT.isCallNotification(r)){const{params:{timerId:n}}=r,i=e.get(n);if("number"==typeof i){const e=t.get(i);if(void 0===e||e!==n)throw new Error("The timer is in an undefined state.")}else{if(void 0===i)throw new Error("The timer is in an undefined state.");i(),e.delete(n)}}else{if(!FT.isClearResponse(r)){const{error:{message:e}}=r;throw new Error(e)}{const{id:n}=r,i=t.get(n);if(void 0===i)throw new Error("The timer is in an undefined state.");t.delete(n),e.delete(i)}}});return{clearTimeout:r=>{const i=Math.random();t.set(i,r),e.set(r,i),n.postMessage({id:i,method:"clear",params:{timerId:r}})},setTimeout:(t,r)=>{const i=Math.random();return e.set(i,t),n.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:i}}),i}}}static loadWorkerTimers(){return()=>(null!==FT.workerTimers||(FT.workerTimers=FT.load()),FT.workerTimers)}static isCallNotification(e){return void 0!==e.method&&"call"===e.method}static isClearResponse(e){return null===e.error&&"number"==typeof e.id}}zT.Timeout=FT,FT.workerTimers=null,FT.clearTimeout=e=>FT.timers().clearTimeout(e),FT.setTimeout=(e,t)=>FT.timers().setTimeout(e,t),FT.timers=FT.loadWorkerTimers();var BT={};Object.defineProperty(BT,"__esModule",{value:!0}),BT.OCSPCacheUpdateErrorEvent=BT.OCSPResponseRetrievedEvent=BT.OCSPCacheFetchErrorEvent=BT.OCSPVerificationFailedEvent=BT.OCSPCacheHitEvent=BT.OCSPCacheEntryNeedsRefreshEvent=BT.OCSPCacheEntryExpiredEvent=BT.OCSPWSUpgradeStartedEvent=BT.OCSPStapleReceivedEvent=BT.OCSPCacheUpdateCompleteEvent=BT.OCSPDiskCacheStoreEvent=BT.OCSPMemoryCacheStoreEvent=BT.OCSPCacheUpdateNeededEvent=BT.OCSPDiskCacheHitEvent=BT.OCSPCacheMissEvent=BT.OCSPMemoryCacheHitEvent=BT.OCSPEvent=void 0;const UT=xC;class WT extends UT.PlatformEvent{constructor(e,t,r){super(e,t),this.privSignature=r}}BT.OCSPEvent=WT;BT.OCSPMemoryCacheHitEvent=class extends WT{constructor(e){super("OCSPMemoryCacheHitEvent",UT.EventType.Debug,e)}};BT.OCSPCacheMissEvent=class extends WT{constructor(e){super("OCSPCacheMissEvent",UT.EventType.Debug,e)}};BT.OCSPDiskCacheHitEvent=class extends WT{constructor(e){super("OCSPDiskCacheHitEvent",UT.EventType.Debug,e)}};BT.OCSPCacheUpdateNeededEvent=class extends WT{constructor(e){super("OCSPCacheUpdateNeededEvent",UT.EventType.Debug,e)}};BT.OCSPMemoryCacheStoreEvent=class extends WT{constructor(e){super("OCSPMemoryCacheStoreEvent",UT.EventType.Debug,e)}};BT.OCSPDiskCacheStoreEvent=class extends WT{constructor(e){super("OCSPDiskCacheStoreEvent",UT.EventType.Debug,e)}};BT.OCSPCacheUpdateCompleteEvent=class extends WT{constructor(e){super("OCSPCacheUpdateCompleteEvent",UT.EventType.Debug,e)}};BT.OCSPStapleReceivedEvent=class extends WT{constructor(){super("OCSPStapleReceivedEvent",UT.EventType.Debug,"")}};BT.OCSPWSUpgradeStartedEvent=class extends WT{constructor(e){super("OCSPWSUpgradeStartedEvent",UT.EventType.Debug,e)}};BT.OCSPCacheEntryExpiredEvent=class extends WT{constructor(e,t){super("OCSPCacheEntryExpiredEvent",UT.EventType.Debug,e),this.privExpireTime=t}};BT.OCSPCacheEntryNeedsRefreshEvent=class extends WT{constructor(e,t,r){super("OCSPCacheEntryNeedsRefreshEvent",UT.EventType.Debug,e),this.privExpireTime=r,this.privStartTime=t}};BT.OCSPCacheHitEvent=class extends WT{constructor(e,t,r){super("OCSPCacheHitEvent",UT.EventType.Debug,e),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}};BT.OCSPVerificationFailedEvent=class extends WT{constructor(e,t){super("OCSPVerificationFailedEvent",UT.EventType.Debug,e),this.privError=t}};BT.OCSPCacheFetchErrorEvent=class extends WT{constructor(e,t){super("OCSPCacheFetchErrorEvent",UT.EventType.Debug,e),this.privError=t}};BT.OCSPResponseRetrievedEvent=class extends WT{constructor(e){super("OCSPResponseRetrievedEvent",UT.EventType.Debug,e)}};BT.OCSPCacheUpdateErrorEvent=class extends WT{constructor(e,t){super("OCSPCacheUpdateErrorEvent",UT.EventType.Debug,e),this.privError=t}};var HT,$T,VT={};function qT(){return $T||($T=1,function(e){var t=Ye&&Ye.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Ye&&Ye.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,r(bC,e),r(zE,e),r(UE,e),r(qE,e),r(GE,e),r(KE,e),r(WE,e),r(ZE,e),r(QE,e),r(wC,e),r(iT,e),r(aT,e),r(lT,e),r(cT,e),r(uT,e),r(dT,e),r(pT,e),r(hT,e),r(fT,e),r(mT,e),r(vT,e),r(xC,e),r(yT,e),r(bT,e),r(TT,e),r(IT,e),r(kT,e);var n=OT;Object.defineProperty(e,"TranslationStatus",{enumerable:!0,get:function(){return n.TranslationStatus}}),r(function(){if(DT)return MT;DT=1,Object.defineProperty(MT,"__esModule",{value:!0}),MT.ChunkedArrayBufferStream=void 0;const e=qT();let t=class extends e.Stream{constructor(e,t){super(t),this.privTargetChunkSize=Math.round(e),this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const r=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),n=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(e.buffer.slice(t,r+t));n.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=r,t+=r,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return MT.ChunkedArrayBufferStream=t,MT}(),e),r(LT,e),r(zT,e),r(BT,e),r(function(){if(HT)return VT;HT=1,Object.defineProperty(VT,"__esModule",{value:!0}),VT.BackgroundEvent=void 0;const e=qT();class t extends e.PlatformEvent{constructor(t){super("BackgroundEvent",e.EventType.Error),this.privError=t}get error(){return this.privError}}return VT.BackgroundEvent=t,VT}(),e)}(yC)),yC}var GT={};Object.defineProperty(GT,"__esModule",{value:!0}),GT.HeaderNames=void 0;class KT{}GT.HeaderNames=KT,KT.AuthKey="Ocp-Apim-Subscription-Key",KT.Authorization="Authorization",KT.SpIDAuthKey="Apim-Subscription-Id",KT.ConnectionId="X-ConnectionId",KT.ContentType="Content-Type",KT.CustomCommandsAppId="X-CommandsAppId",KT.Path="Path",KT.RequestId="X-RequestId",KT.RequestStreamId="X-StreamId",KT.RequestTimestamp="X-Timestamp";var JT={};Object.defineProperty(JT,"__esModule",{value:!0}),JT.AuthInfo=void 0;JT.AuthInfo=class{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}},Object.defineProperty(gC,"__esModule",{value:!0}),gC.CognitiveSubscriptionKeyAuthentication=void 0;const YT=qT(),ZT=GT,QT=JT;gC.CognitiveSubscriptionKeyAuthentication=class{constructor(e){if(!e)throw new YT.ArgumentNullError("subscriptionKey");this.privAuthInfo=new QT.AuthInfo(ZT.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}};var XT={};Object.defineProperty(XT,"__esModule",{value:!0}),XT.CognitiveTokenAuthentication=void 0;const eN=qT(),tN=JT,rN=GT;class nN{constructor(e,t){if(!e)throw new eN.ArgumentNullError("fetchCallback");if(!t)throw new eN.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(e){return this.privFetchCallback(e).then(e=>new tN.AuthInfo(rN.HeaderNames.Authorization,void 0===e?void 0:nN.privTokenPrefix+e))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(e=>new tN.AuthInfo(rN.HeaderNames.Authorization,void 0===e?void 0:nN.privTokenPrefix+e))}}XT.CognitiveTokenAuthentication=nN,nN.privTokenPrefix="Bearer ";var iN={};Object.defineProperty(iN,"__esModule",{value:!0});var sN={};Object.defineProperty(sN,"__esModule",{value:!0});var oN={},aN={},lN={};const cN=Qe(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var uN={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;const t=qT();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.EventType}})}(uN);var dN={};Object.defineProperty(dN,"__esModule",{value:!0}),dN.Contracts=void 0;class pN{static throwIfNullOrUndefined(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(pN.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfNullOrTooLong(e,t,r){if(pN.throwIfNullOrUndefined(e,t),(""+e).length>r)throw new Error("throwIfNullOrTooLong:"+t+" (more than "+r.toString()+" characters)")}static throwIfNullOrTooShort(e,t,r){if(pN.throwIfNullOrUndefined(e,t),(""+e).length<r)throw new Error("throwIfNullOrTooShort:"+t+" (less than "+r.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(pN.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const r of e)pN.throwIfNullOrWhitespace(r,t)}static throwIfFileDoesNotExist(e,t){pN.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}static throwIfNumberOutOfRange(e,t,r,n){if(pN.throwIfNullOrUndefined(e,t),e<r||e>n)throw new Error("throwIfNumberOutOfRange:"+t+" (must be between "+r.toString()+" and "+n.toString()+")")}}dN.Contracts=pN;var hN=Ye&&Ye.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),fN=Ye&&Ye.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mN=Ye&&Ye.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&hN(t,e,r);return fN(t,e),t};Object.defineProperty(lN,"__esModule",{value:!0}),lN.ConsoleLoggingListener=void 0;const vN=mN(cN),gN=uN,yN=dN;lN.ConsoleLoggingListener=class{constructor(e=gN.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){yN.Contracts.throwIfNullOrUndefined(vN.openSync,"\nFile System access not available"),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const t=this.toString(e);if(this.logCallback&&this.logCallback(t),this.privLogPath&&vN.writeFileSync(this.privLogPath,t+"\n",{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case gN.LogLevel.Debug:console.debug(t);break;case gN.LogLevel.Info:console.info(t);break;case gN.LogLevel.Warning:console.warn(t);break;case gN.LogLevel.Error:console.error(t);break;default:console.log(t)}}}toString(e){const t=[`${e.eventTime}`,`${e.name}`],r=e;for(const n in r)if(n&&e.hasOwnProperty(n)&&"eventTime"!==n&&"eventType"!==n&&"eventId"!==n&&"name"!==n&&"constructor"!==n){const e=r[n];let i="<NULL>";null!=e&&(i="number"==typeof e||"string"==typeof e?e.toString():JSON.stringify(e)),t.push(`${n}: ${i}`)}return t.join(" | ")}};var bN={};Object.defineProperty(bN,"__esModule",{value:!0});var xN,wN={},SN={};!function(e){var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.AudioStreamFormatImpl=e.AudioStreamFormat=e.AudioFormatTag=void 0,(r=t=e.AudioFormatTag||(e.AudioFormatTag={}))[r.PCM=1]="PCM",r[r.MuLaw=2]="MuLaw",r[r.Siren=3]="Siren",r[r.MP3=4]="MP3",r[r.SILKSkype=5]="SILKSkype",r[r.OGG_OPUS=6]="OGG_OPUS",r[r.WEBM_OPUS=7]="WEBM_OPUS",r[r.ALaw=8]="ALaw",r[r.FLAC=9]="FLAC",r[r.OPUS=10]="OPUS",r[r.AMR_WB=11]="AMR_WB",r[r.G722=12]="G722";class n{static getDefaultInputFormat(){return i.getDefaultInputFormat()}static getWaveFormat(e,t,r,n){return new i(e,t,r,n)}static getWaveFormatPCM(e,t,r){return new i(e,t,r)}}e.AudioStreamFormat=n;class i extends n{constructor(e=16e3,r=16,n=1,i=t.PCM){super();let s=!0;switch(i){case t.PCM:this.formatTag=1;break;case t.ALaw:this.formatTag=6;break;case t.MuLaw:this.formatTag=7;break;default:s=!1}if(this.bitsPerSample=r,this.samplesPerSec=e,this.channels=n,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),s){this.privHeader=new ArrayBuffer(44);const e=new DataView(this.privHeader);this.setString(e,0,"RIFF"),e.setUint32(4,0,!0),this.setString(e,8,"WAVEfmt "),e.setUint32(16,16,!0),e.setUint16(20,this.formatTag,!0),e.setUint16(22,this.channels,!0),e.setUint32(24,this.samplesPerSec,!0),e.setUint32(28,this.avgBytesPerSec,!0),e.setUint16(32,this.channels*(this.bitsPerSample/8),!0),e.setUint16(34,this.bitsPerSample,!0),this.setString(e,36,"data"),e.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new i}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,t,r){for(let n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}}e.AudioStreamFormatImpl=i}(SN);var CN,EN={};var TN={};Object.defineProperty(TN,"__esModule",{value:!0}),TN.PcmRecorder=void 0;const NN=qT();TN.PcmRecorder=class{constructor(e){this.privStopInputOnRelease=e}record(e,t,r){const n=new NN.RiffPcmEncoder(e.sampleRate,16e3),i=e.createMediaStreamSource(t),s=()=>{const s=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(r){t=2048;let n=e.sampleRate;for(;t<16384&&n>=32e3;)t<<=1,n>>=1;return e.createScriptProcessor(t,1,1)}})();s.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(r&&!r.isClosed){const e=n.encode(t);e&&r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},i.connect(s),s.connect(e.destination),this.privMediaResources={scriptProcessorNode:s,source:i,stream:t}},o=!!this.privSpeechProcessorScript&&"ignore"===this.privSpeechProcessorScript.toLowerCase();if(e.audioWorklet&&!o){if(!this.privSpeechProcessorScript){const e=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(e)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const s=new AudioWorkletNode(e,"speech-processor");s.port.onmessage=e=>{const t=e.data;if(r&&!r.isClosed){const e=n.encode(t);e&&r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},i.connect(s),s.connect(e.destination),this.privMediaResources={scriptProcessorNode:s,source:i,stream:t}}).catch(()=>{s()})}else try{s()}catch(Pie){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${Pie}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(e=>e.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}};var PN={},RN={},IN=Ye&&Ye.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),kN=Ye&&Ye.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),_N=Ye&&Ye.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&IN(t,e,r);return kN(t,e),t},AN=Ye&&Ye.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(RN,"__esModule",{value:!0}),RN.WebsocketMessageAdapter=void 0;const jN=_N(cN),ON=_N(cN),DN=AN(cN),MN=AN(cN),LN=AN(cN),zN=GT,FN=qT();class BN{constructor(e,t,r,n,i,s){if(!e)throw new FN.ArgumentNullError("uri");if(!r)throw new FN.ArgumentNullError("messageFormatter");this.proxyInfo=n,this.privConnectionEvents=new FN.EventSource,this.privConnectionId=t,this.privMessageFormatter=r,this.privConnectionState=FN.ConnectionState.None,this.privUri=e,this.privHeaders=i,this.privEnableCompression=s,this.privHeaders[zN.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===FN.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new FN.Deferred,this.privCertificateValidatedDeferral=new FN.Deferred,this.privConnectionState=FN.ConnectionState.Connecting;try{if("undefined"==typeof WebSocket||BN.forceNpmWebSocket){let e=new URL(this.privUri).protocol;"wss:"===(null==e?void 0:e.toLocaleLowerCase())?e="https:":"ws:"===(null==e?void 0:e.toLocaleLowerCase())&&(e="http:");const t={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:"https:"===e.toLocaleLowerCase()};this.privCertificateValidatedDeferral.resolve(),t.agent=this.getAgent(),t.agent.protocol=e,this.privWebsocketClient=new LN.default(this.privUri,t),this.privWebsocketClient.on("redirect",e=>{const t=new FN.ConnectionRedirectEvent(this.privConnectionId,e,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${e}'`);FN.Events.instance.onEvent(t)})}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new FN.Queue,this.privDisconnectDeferral=new FN.Deferred,this.privSendMessageQueue=new FN.Queue,this.processSendQueue().catch(e=>{FN.Events.instance.onEvent(new FN.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new FN.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new FN.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=FN.ConnectionState.Connected,this.onEvent(new FN.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new FN.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new FN.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===FN.ConnectionState.Connecting?(this.privConnectionState=FN.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new FN.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=FN.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new FN.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(e=>{FN.Events.instance.onEvent(new FN.BackgroundEvent(e))})},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===FN.ConnectionState.Connected){const r=new FN.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),e.data instanceof ArrayBuffer){const n=new FN.RawWebsocketMessage(FN.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(n).then(e=>{this.onEvent(new FN.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),r.resolve(e)},e=>{r.reject(`Invalid binary message format. Error: ${e}`)})}else{const n=new FN.RawWebsocketMessage(FN.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(n).then(e=>{this.onEvent(new FN.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),r.resolve(e)},e=>{r.reject(`Invalid text message format. Error: ${e}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==FN.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${FN.ConnectionState[this.privConnectionState]} state`);const t=new FN.Deferred,r=new FN.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(e).then(n=>{r.resolve({Message:e,RawWebsocketMessage:n,sendStatusDeferral:t})},e=>{r.reject(`Error formatting the message. ${e}`)}),t.promise}read(){return this.privConnectionState!==FN.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){return this.privWebsocketClient?(this.privConnectionState!==FN.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(e){try{return e?(this.onEvent(new FN.ConnectionMessageSentEvent(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(Nie){return Promise.reject(`websocket send error: ${Nie}`)}}onClose(e,t){return Ke(this,null,function*(){const r=`Connection closed. ${e}: ${t}`;this.privConnectionState=FN.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(()=>{},r),yield this.privSendMessageQueue.drainAndDispose(e=>{e.sendStatusDeferral.reject(r)},r)})}processSendQueue(){return Ke(this,null,function*(){for(;;){const t=this.privSendMessageQueue.dequeue(),r=yield t;if(!r)return;try{yield this.sendRawMessage(r),r.sendStatusDeferral.resolve()}catch(e){r.sendStatusDeferral.reject(e)}}})}onEvent(e){this.privConnectionEvents.onEvent(e),FN.Events.instance.onEvent(e)}getAgent(){const e=new DN.default.Agent(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};e.UserName?t.headers={"Proxy-Authentication":"Basic "+Buffer.from(`${e.UserName}:${void 0===e.Password?"":e.Password}`).toString("base64")}:t.headers={},t.headers.requestOCSP="true";return new MN.default(t)}createConnection(e,t){let r;if(t=Le(Le({},t),{requestOCSP:!0,servername:t.host}),this.proxyInfo){const n=BN.GetProxyAgent(this.proxyInfo);r=new Promise((r,i)=>{n.callback(e,t,(e,t)=>{e?i(e):r(t)})})}else r=t.secureEndpoint?Promise.resolve(ON.connect(t)):Promise.resolve(jN.connect(t));return r}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}RN.WebsocketMessageAdapter=BN,BN.forceNpmWebSocket=!1,Object.defineProperty(PN,"__esModule",{value:!0}),PN.WebsocketConnection=void 0;const UN=qT(),WN=RN;PN.WebsocketConnection=class{constructor(e,t,r,n,i,s=!1,o){if(this.privIsDisposed=!1,!e)throw new UN.ArgumentNullError("uri");if(!n)throw new UN.ArgumentNullError("messageFormatter");this.privMessageFormatter=n;let a="",l=0;if(t)for(const c in t)if(c){a+=0===l&&-1===e.indexOf("?")?"?":"&";a+=encodeURIComponent(c);let r=t[c];r&&(r=encodeURIComponent(r),a+=`=${r}`),l++}if(r)for(const c in r)if(c){a+=0===l&&-1===e.indexOf("?")?"?":"&";a+=`${c}=${encodeURIComponent(r[c])}`,l++}this.privUri=e+a,this.privId=o||(0,UN.createNoDashGuid)(),this.privConnectionMessageAdapter=new WN.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,i,r,s)}dispose(){return Ke(this,null,function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())})}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};var HN={};Object.defineProperty(HN,"__esModule",{value:!0}),HN.ReplayableAudioNode=void 0;HN.ReplayableAudioNode=class{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);0!=t%2&&t++;let r=0;for(;r<this.privBuffers.length&&t>=this.privBuffers[r].chunk.buffer.byteLength;)t-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){const e=this.privBuffers[r].chunk.buffer.slice(t);return this.privReplayOffset+=e.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:e,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&this.privBuffers&&(this.privBuffers.push(new $N(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let r=Math.round(t*this.privBytesPerSecond*1e-7),n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(n)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const r=t.byteOffset/this.privBytesPerSecond*1e7,n=r+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=r&&e<=n)return t.chunk.timeReceived}return 0}};class $N{constructor(e,t,r){this.chunk=e,this.serial=t,this.byteOffset=r}}var VN={},qN={},GN={},KN={},JN=Ye&&Ye.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),YN=Ye&&Ye.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ZN=Ye&&Ye.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&JN(t,e,r);return YN(t,e),t};Object.defineProperty(KN,"__esModule",{value:!0}),KN.AudioFileWriter=void 0;const QN=ZN(cN),XN=dN;KN.AudioFileWriter=class{constructor(e){XN.Contracts.throwIfNullOrUndefined(QN.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=QN.openSync(e,"w")}set format(e){XN.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=QN.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){XN.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),QN.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),QN.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};var eP,tP={};function rP(){if(eP)return tP;eP=1,Object.defineProperty(tP,"__esModule",{value:!0}),tP.PullAudioInputStreamImpl=tP.PullAudioInputStream=tP.PushAudioInputStreamImpl=tP.PushAudioInputStream=tP.AudioInputStream=void 0;const e=NO(),t=qT(),r=wC,n=g_(),i=SN;let s=class{constructor(){}static createPushStream(e){return o.create(e)}static createPullStream(e,t){return l.create(e,t)}};tP.AudioInputStream=s;class o extends s{static create(e){return new a(e)}}tP.PushAudioInputStream=o;class a extends o{constructor(e){super(),this.privFormat=void 0===e?i.AudioStreamFormatImpl.getDefaultInputFormat():e,this.privEvents=new t.EventSource,this.privId=(0,r.createNoDashGuid)(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}attach(e){return Ke(this,null,function*(){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn();const r=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>Ke(this,null,function*(){return this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>r.read()}})}detach(e){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(e){this.privEvents.onEvent(e),t.Events.instance.onEvent(e)}toBuffer(e){const t=Buffer.alloc(e.byteLength),r=new Uint8Array(e);for(let n=0;n<t.length;++n)t[n]=r[n];return t}}tP.PushAudioInputStreamImpl=a;class l extends s{constructor(){super()}static create(e,t){return new c(e,t)}}tP.PullAudioInputStream=l;class c extends l{constructor(e,i){super(),this.privFormat=void 0===i?n.AudioStreamFormat.getDefaultInputFormat():i,this.privEvents=new t.EventSource,this.privId=(0,r.createNoDashGuid)(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}attach(e){return Ke(this,null,function*(){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const r=new ArrayBuffer(this.privBufferSize-t),n=this.privCallback.read(r);if(void 0===e)e=r;else{new Int8Array(e).set(new Int8Array(r),t)}if(0===n)break;t+=n}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}})}detach(e){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(e){this.privEvents.onEvent(e),t.Events.instance.onEvent(e)}}return tP.PullAudioInputStreamImpl=c,tP}var nP={},iP={},sP={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisOutputFormat=void 0,(t=e.SpeechSynthesisOutputFormat||(e.SpeechSynthesisOutputFormat={}))[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(sP),Object.defineProperty(iP,"__esModule",{value:!0}),iP.AudioOutputFormatImpl=void 0;const oP=sP,aP=SN;class lP extends aP.AudioStreamFormatImpl{constructor(e,t,r,n,i,s,o,a,l){super(r,s,t,e),this.formatTag=e,this.avgBytesPerSec=n,this.blockAlign=i,this.priAudioFormatString=o,this.priRequestAudioFormatString=a,this.priHasHeader=l}static fromSpeechSynthesisOutputFormat(e){return void 0===e?lP.getDefaultOutputFormat():lP.fromSpeechSynthesisOutputFormatString(lP.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new lP(aP.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new lP(aP.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new lP(aP.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new lP(aP.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new lP(aP.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new lP(aP.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new lP(aP.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new lP(aP.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new lP(aP.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new lP(aP.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new lP(aP.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new lP(aP.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new lP(aP.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new lP(aP.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new lP(aP.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new lP(aP.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new lP(aP.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new lP(aP.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new lP(aP.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new lP(aP.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new lP(aP.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new lP(aP.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new lP(aP.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new lP(aP.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new lP(aP.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new lP(aP.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new lP(aP.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new lP(aP.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new lP(aP.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,e,e,!1);case"g722-16khz-64kbps":return new lP(aP.AudioFormatTag.G722,1,16e3,8e3,2,16,e,e,!1);default:return new lP(aP.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return lP.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const t=new Uint8Array(e.byteLength+this.header.byteLength);return t.set(new Uint8Array(this.header),0),t.set(new Uint8Array(e),this.header.byteLength),t.buffer}}iP.AudioOutputFormatImpl=lP,lP.SpeechSynthesisOutputFormatToString={[oP.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[oP.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[oP.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[oP.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[oP.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[oP.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[oP.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[oP.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[oP.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[oP.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[oP.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[oP.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[oP.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[oP.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[oP.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[oP.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[oP.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[oP.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[oP.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[oP.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[oP.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[oP.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[oP.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[oP.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[oP.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[oP.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[oP.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[oP.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"},Object.defineProperty(nP,"__esModule",{value:!0}),nP.PushAudioOutputStreamImpl=nP.PushAudioOutputStream=nP.PullAudioOutputStreamImpl=nP.PullAudioOutputStream=nP.AudioOutputStream=void 0;const cP=qT(),uP=dN,dP=iP;class pP{constructor(){}static createPullStream(){return hP.create()}}nP.AudioOutputStream=pP;class hP extends pP{static create(){return new fP}}nP.PullAudioOutputStream=hP;class fP extends hP{constructor(){super(),this.privId=(0,cP.createNoDashGuid)(),this.privStream=new cP.Stream}set format(e){null==e&&(this.privFormat=dP.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return Ke(this,null,function*(){const t=new Int8Array(e);let r=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<e.byteLength&&!this.privStream.isReadEnded;){const n=yield this.privStream.read();if(void 0===n||n.isEnd)this.privStream.readEnded();else{let i;n.buffer.byteLength>e.byteLength-r?(i=n.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(n.buffer.slice(e.byteLength-r))):i=n.buffer,t.set(new Int8Array(i),r),r+=i.byteLength}}return r})}write(e){uP.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}nP.PullAudioOutputStreamImpl=fP;class mP extends pP{constructor(){super()}static create(e){return new vP(e)}}nP.PushAudioOutputStream=mP;class vP extends mP{constructor(e){super(),this.privId=(0,cP.createNoDashGuid)(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}var gP;function yP(){if(gP)return GN;gP=1,Object.defineProperty(GN,"__esModule",{value:!0}),GN.AudioOutputConfigImpl=GN.AudioConfigImpl=GN.AudioConfig=void 0;const e=P_(),t=dN,r=g_(),n=KN,i=rP(),s=nP;let o=class t{static fromDefaultMicrophoneInput(){const t=new e.PcmRecorder(!0);return new a(new e.MicAudioSource(t))}static fromMicrophoneInput(t){const r=new e.PcmRecorder(!0);return new a(new e.MicAudioSource(r,t))}static fromWavFileInput(t,r="unnamedBuffer.wav"){return new a(new e.FileAudioSource(t,r))}static fromStreamInput(t){if(t instanceof r.PullAudioInputStreamCallback)return new a(new i.PullAudioInputStreamImpl(t));if(t instanceof r.AudioInputStream)return new a(t);if("undefined"!=typeof MediaStream&&t instanceof MediaStream){const r=new e.PcmRecorder(!1);return new a(new e.MicAudioSource(r,null,null,t))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new l(new r.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(void 0===e)return t.fromDefaultSpeakerOutput();if(e instanceof r.SpeakerAudioDestination)return new l(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new l(new n.AudioFileWriter(e))}static fromStreamOutput(e){if(e instanceof r.PushAudioOutputStreamCallback)return new l(new s.PushAudioOutputStreamImpl(e));if(e instanceof r.PushAudioOutputStream)return new l(e);if(e instanceof r.PullAudioOutputStream)return new l(e);throw new Error("Not Supported Type")}};GN.AudioConfig=o;class a extends o{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then(()=>{e&&e()},e=>{t&&t(e)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,r){if(t.Contracts.throwIfNull(r,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,r)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}GN.AudioConfigImpl=a;class l extends o{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return GN.AudioOutputConfigImpl=l,GN}nP.PushAudioOutputStreamImpl=vP;var bP={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationReason=void 0,(t=e.CancellationReason||(e.CancellationReason={}))[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"}(bP);var xP={};Object.defineProperty(xP,"__esModule",{value:!0}),xP.PullAudioInputStreamCallback=void 0;xP.PullAudioInputStreamCallback=class{};var wP={};Object.defineProperty(wP,"__esModule",{value:!0}),wP.PushAudioOutputStreamCallback=void 0;wP.PushAudioOutputStreamCallback=class{};var SP={};Object.defineProperty(SP,"__esModule",{value:!0}),SP.KeywordRecognitionModel=void 0;const CP=dN;SP.KeywordRecognitionModel=class{constructor(){this.privDisposed=!1}static fromFile(e){throw CP.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw CP.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};var EP={};Object.defineProperty(EP,"__esModule",{value:!0}),EP.SessionEventArgs=void 0;EP.SessionEventArgs=class{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}};var TP,NP={};var PP={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.OutputFormat=void 0,(t=e.OutputFormat||(e.OutputFormat={}))[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"}(PP);var RP,IP={};var kP={};Object.defineProperty(kP,"__esModule",{value:!0}),kP.RecognitionResult=void 0;kP.RecognitionResult=class{constructor(e,t,r,n,i,s,o,a,l,c){this.privResultId=e,this.privReason=t,this.privText=r,this.privDuration=n,this.privOffset=i,this.privLanguage=s,this.privLanguageDetectionConfidence=o,this.privErrorDetails=a,this.privJson=l,this.privProperties=c}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};var _P,AP={};var jP,OP={};var DP={};Object.defineProperty(DP,"__esModule",{value:!0}),DP.LanguageUnderstandingModelImpl=DP.LanguageUnderstandingModel=void 0;const MP=dN;class LP{constructor(){}static fromEndpoint(e){MP.Contracts.throwIfNull(e,"uri"),MP.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const t=new zP,r=e.host.indexOf(".");if(-1===r)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,r);const n=e.pathname.lastIndexOf("/")+1;if(-1===n)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(n),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){MP.Contracts.throwIfNullOrWhitespace(e,"appId");const t=new zP;return t.appId=e,t}static fromSubscription(e,t,r){MP.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),MP.Contracts.throwIfNullOrWhitespace(t,"appId"),MP.Contracts.throwIfNullOrWhitespace(r,"region");const n=new zP;return n.appId=t,n.region=r,n.subscriptionKey=e,n}}DP.LanguageUnderstandingModel=LP;class zP extends LP{}DP.LanguageUnderstandingModelImpl=zP;var FP,BP={};var UP,WP,HP={},$P={};function VP(){if(UP)return $P;UP=1,Object.defineProperty($P,"__esModule",{value:!0}),$P.CancellationEventArgsBase=void 0;const e=g_();let t=class extends e.RecognitionEventArgs{constructor(e,t,r,n,i){super(n,i),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return $P.CancellationEventArgsBase=t,$P}var qP,GP={};var KP,JP={};var YP,ZP={};function QP(){if(YP)return ZP;YP=1,Object.defineProperty(ZP,"__esModule",{value:!0}),ZP.TranslationRecognitionResult=void 0;const e=g_();let t=class t extends e.SpeechRecognitionResult{constructor(e,t,r,n,i,s,o,a,l,c,u){super(t,r,n,i,s,o,a,void 0,l,c,u),this.privTranslations=e}static fromSpeechRecognitionResult(e){return new t(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)}get translations(){return this.privTranslations}};return ZP.TranslationRecognitionResult=t,ZP}var XP={};Object.defineProperty(XP,"__esModule",{value:!0}),XP.TranslationSynthesisResult=void 0;XP.TranslationSynthesisResult=class{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}};var eR={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReason=void 0,(t=e.ResultReason||(e.ResultReason={}))[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(eR);var tR,rR={};var nR,iR={};var sR,oR={};function aR(){if(sR)return oR;sR=1,Object.defineProperty(oR,"__esModule",{value:!0}),oR.PropertyCollection=void 0;const e=g_();return oR.PropertyCollection=class t{constructor(){this.privKeys=[],this.privValues=[]}getProperty(t,r){let n;n="string"==typeof t?t:e.PropertyId[t];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===n)return this.privValues[e];if(void 0!==r)return String(r)}setProperty(t,r){let n;n="string"==typeof t?t:e.PropertyId[t];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===n)return void(this.privValues[e]=r);this.privKeys.push(n),this.privValues.push(r)}clone(){const e=new t;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach(t=>{if(void 0===e.getProperty(t,void 0)){const r=this.getProperty(t);e.setProperty(t,r)}})}get keys(){return this.privKeys}},oR}var lR={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyId=void 0,(t=e.PropertyId||(e.PropertyId={}))[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",t[t.SpeechServiceConnection_IntentRegion=10]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=11]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=12]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=13]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=14]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=15]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=16]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=17]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=18]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=19]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=20]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=21]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=22]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=23]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=24]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=25]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=26]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=27]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=28]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=29]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=30]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=31]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=32]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=33]="Speech_SegmentationSilenceTimeoutMs",t[t.Speech_SegmentationMaximumTimeMs=34]="Speech_SegmentationMaximumTimeMs",t[t.Speech_SegmentationStrategy=35]="Speech_SegmentationStrategy",t[t.Speech_StartEventSensitivity=36]="Speech_StartEventSensitivity",t[t.SpeechServiceConnection_EnableAudioLogging=37]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=38]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=39]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=40]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=41]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=42]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=43]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=44]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=45]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=46]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=47]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=48]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=49]="SpeechServiceResponse_RequestSentenceBoundary",t[t.SpeechServiceResponse_DiarizeIntermediateResults=50]="SpeechServiceResponse_DiarizeIntermediateResults",t[t.Conversation_ApplicationId=51]="Conversation_ApplicationId",t[t.Conversation_DialogType=52]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=53]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=54]="Conversation_From_Id",t[t.Conversation_Conversation_Id=55]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=56]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=57]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=58]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=59]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=60]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=61]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=62]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=63]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=64]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=65]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=66]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=67]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=68]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=69]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=70]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=71]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=72]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=73]="TalkingAvatarService_WebRTC_SDP"}(lR);var cR,uR={};var dR,pR={},hR={};!function(e){var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechStartEventSensitivity=e.RecognitionMode=void 0,(t=e.RecognitionMode||(e.RecognitionMode={})).Interactive="Interactive",t.Dictation="Dictation",t.Conversation="Conversation",t.None="None",(r=e.SpeechStartEventSensitivity||(e.SpeechStartEventSensitivity={})).Low="low",r.Medium="medium",r.High="high"}(hR);var fR,mR={};var vR={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceProfileType=void 0,(t=e.VoiceProfileType||(e.VoiceProfileType={}))[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"}(vR);var gR,yR,bR,xR={},wR={},SR={};function CR(){if(gR)return SR;gR=1,Object.defineProperty(SR,"__esModule",{value:!0}),SR.ConnectionMessageImpl=SR.ConnectionMessage=void 0;const e=GT,t=qT(),r=aR(),n=lR;SR.ConnectionMessage=class{};return SR.ConnectionMessageImpl=class{constructor(t){this.privConnectionMessage=t,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]&&this.privProperties.setProperty(n.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(e=>{this.privProperties.setProperty(e,this.privConnectionMessage.headers[e])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(e=>e.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===t.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===t.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}},SR}function ER(){if(yR)return wR;yR=1,Object.defineProperty(wR,"__esModule",{value:!0}),wR.Connection=void 0;const e=NO(),t=qT(),r=CR(),n=dN,i=g_();return wR.Connection=class s{static fromRecognizer(e){const t=e.internalData,r=new s;return r.privInternalData=t,r.setupEvents(),r}static fromSynthesizer(e){const t=e.internalData,r=new s;return r.privInternalData=t,r.setupEvents(),r}openConnection(e,r){(0,t.marshalPromiseToCallbacks)(this.privInternalData.connect(),e,r)}closeConnection(r,n){if(this.privInternalData instanceof e.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,t.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),r,n)}setMessageProperty(t,r,i){if(n.Contracts.throwIfNullOrWhitespace(r,"propertyName"),this.privInternalData instanceof e.ServiceRecognizerBase){if("speech.context"!==t.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.getContext()[r]=i}else if(this.privInternalData instanceof e.SynthesisAdapterBase){if("speech.config"!==t.toLowerCase()&&"synthesis.context"!==t.toLowerCase())throw new Error("Only speech.config and synthesis.context message paths are currently supported for synthesizer");if("speech.config"===t.toLowerCase()){if("context"!==r.toLowerCase())throw new Error("Only context property is currently supported for speech.config message path for synthesizer");this.privInternalData.synthesizerConfig.setContextFromJson(i)}else this.privInternalData.synthesisContext.setSection(r,i)}}sendMessageAsync(e,r,n,i){(0,t.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(e,r),n,i)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(e=>{"ConnectionEstablishedEvent"===e.name?this.connected&&this.connected(new i.ConnectionEventArgs(e.connectionId)):"ConnectionClosedEvent"===e.name?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(e.connectionId)):"ConnectionMessageSentEvent"===e.name?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(e.message))):"ConnectionMessageReceivedEvent"===e.name&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(e.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(e.jsonString,e.name))})}},wR}var TR,NR={};var PR={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.NoMatchReason=void 0,(t=e.NoMatchReason||(e.NoMatchReason={}))[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(PR);var RR,IR={};var kR={};Object.defineProperty(kR,"__esModule",{value:!0}),kR.TranslationRecognitionCanceledEventArgs=void 0;kR.TranslationRecognitionCanceledEventArgs=class{constructor(e,t,r,n,i){this.privCancelReason=t,this.privErrorDetails=r,this.privResult=i,this.privSessionId=e,this.privErrorCode=n}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};var _R,AR={};var jR={};Object.defineProperty(jR,"__esModule",{value:!0}),jR.CancellationDetailsBase=void 0;jR.CancellationDetailsBase=class{constructor(e,t,r){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};var OR,DR={};var MR={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationErrorCode=void 0,(t=e.CancellationErrorCode||(e.CancellationErrorCode={}))[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"}(MR);var LR,zR={};var FR,BR={};var UR={};Object.defineProperty(UR,"__esModule",{value:!0}),UR.PhraseListGrammar=void 0;const WR=dN;class HR{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const t=e.internalData;return new HR(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}setWeight(e){WR.Contracts.throwIfNumberOutOfRange(e,"weight",0,2),this.privGrammerBuilder.setWeight(e)}}UR.PhraseListGrammar=HR;var $R,VR={};function qR(){if($R)return VR;$R=1,Object.defineProperty(VR,"__esModule",{value:!0}),VR.DialogServiceConfigImpl=VR.DialogServiceConfig=void 0;const e=dN,t=g_();let r=class{constructor(){}set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};VR.DialogServiceConfig=r;return VR.DialogServiceConfigImpl=class extends r{constructor(){super(),this.privSpeechConfig=new t.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(t){e.Contracts.throwIfNullOrWhitespace(t,"value"),this.privSpeechConfig.speechRecognitionLanguage=t}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,t){this.privSpeechConfig.setProperty(e,t)}getProperty(e,t){return this.privSpeechConfig.getProperty(e)}setProxy(e,r,n,i){this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPort,`${r}`),n&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName,n),i&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword,i)}setServiceProperty(e,t,r){this.privSpeechConfig.setServiceProperty(e,t)}close(){}},VR}var GR,KR={};var JR,YR={};var ZR,QR,XR,eI={},tI={},rI={},nI={};Object.defineProperty(nI,"__esModule",{value:!0}),nI.QueryParameterNames=void 0;class iI{}function sI(){if(ZR)return rI;ZR=1,Object.defineProperty(rI,"__esModule",{value:!0}),rI.ConnectionFactoryBase=void 0;const e=NO(),t=qT(),r=g_(),n=nI;return rI.ConnectionFactoryBase=class{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(t,i,s){new Map([[r.PropertyId.Speech_SegmentationSilenceTimeoutMs,n.QueryParameterNames.SegmentationSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_EnableAudioLogging,n.QueryParameterNames.EnableAudioLogging],[r.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,n.QueryParameterNames.EndSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,n.QueryParameterNames.InitialSilenceTimeoutMs],[r.PropertyId.SpeechServiceResponse_PostProcessingOption,n.QueryParameterNames.Postprocessing],[r.PropertyId.SpeechServiceResponse_ProfanityOption,n.QueryParameterNames.Profanity],[r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,n.QueryParameterNames.EnableWordLevelTimestamps],[r.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,n.QueryParameterNames.StableIntermediateThreshold]]).forEach((e,r)=>{this.setUrlParameter(r,e,t,i,s)});const o=JSON.parse(t.parameters.getProperty(e.ServicePropertiesPropertyName,"{}"));Object.keys(o).forEach(e=>{i[e]=o[e]})}setUrlParameter(e,t,r,n,i){const s=r.parameters.getProperty(e,void 0);!s||i&&-1!==i.search(t)||(n[t]=s.toLocaleLowerCase())}static getRedirectUrlFromEndpoint(e){return Ke(this,null,function*(){const r=new URL(e);r.protocol="https:",r.port="443";r.searchParams.append("GenerateRedirectResponse","true");const n=r.toString();t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",n,void 0,"ConnectionFactoryBase: redirectUrl request"));const i=yield fetch(n);if(200!==i.status)return e;const s=yield i.text();t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",s,e,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(s.trim()).toString()}catch(o){return e}})}},rI}function oI(){if(XR)return eI;XR=1,Object.defineProperty(eI,"__esModule",{value:!0}),eI.DialogServiceConnector=void 0;const e=function(){if(QR)return tI;QR=1,Object.defineProperty(tI,"__esModule",{value:!0}),tI.DialogConnectionFactory=void 0;const e=P_(),t=NO(),r=g_(),n=sI(),i=NO(),s=GT,o=nI;class a extends n.ConnectionFactoryBase{create(l,c,u){const d=l.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),p=l.parameters.getProperty(r.PropertyId.Conversation_DialogType),h=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),f=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),m=l.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),v={};v[s.HeaderNames.ConnectionId]=u,v[o.QueryParameterNames.Format]=l.parameters.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),v[o.QueryParameterNames.Language]=f,v[o.QueryParameterNames.RequestBotStatusMessages]=m,d&&(v[o.QueryParameterNames.BotId]=d,p===r.DialogServiceConfig.DialogTypes.CustomCommands&&(v[s.HeaderNames.CustomCommandsAppId]=d));const g=p===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",y=p===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":p===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",b={};null!=c.token&&""!==c.token&&(b[c.headerName]=c.token);let x=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!x){const e=n.ConnectionFactoryBase.getHostSuffix(h),t=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${h}.${a.BaseUrl}${e}`);x=`${t.endsWith("/")?t:t+"/"}${g}${a.ApiKey}/${y}`}this.setCommonUrlParams(l,v,x);const w="true"===l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new e.WebsocketConnection(x,v,b,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),w,u))}}return tI.DialogConnectionFactory=a,a.ApiKey="api",a.BaseUrl="convai.speech",tI}(),t=NO(),r=hR,n=qT(),i=dN,s=g_(),o=lR;let a=class a extends s.Recognizer{constructor(t,r){const n=t;i.Contracts.throwIfNull(t,"dialogConfig"),super(r,n.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=n.properties.clone();const s=this.buildAgentConfig();this.privReco.agentConfig.set(s)}connect(e,t){(0,n.marshalPromiseToCallbacks)(this.privReco.connect(),e,t)}disconnect(e,t){(0,n.marshalPromiseToCallbacks)(this.privReco.disconnect(),e,t)}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){i.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(o.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(o.PropertyId.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,t){if(this.isTurnComplete){i.Contracts.throwIfDisposed(this.privIsDisposed);const s=(()=>Ke(this,null,function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;const e=new n.Deferred;yield this.privReco.recognize(r.RecognitionMode.Conversation,e.resolve,e.reject);const t=yield e.promise;return yield this.implRecognizerStop(),t}))();s.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,n.marshalPromiseToCallbacks)(s.finally(()=>{this.isTurnComplete=!0}),e,t)}}sendActivityAsync(e,t,r){(0,n.marshalPromiseToCallbacks)(this.privReco.sendMessage(e),t,r)}close(e,t){i.Contracts.throwIfDisposed(this.privIsDisposed),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}dispose(e){return Ke(this,null,function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield Ge(a.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new t.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,r,n,i){const s=n;return new t.DialogServiceAdapter(e,r,s,i,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(o.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(o.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(o.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return eI.DialogServiceConnector=a,eI}nI.QueryParameterNames=iI,iI.BotId="botid",iI.CustomSpeechDeploymentId="cid",iI.CustomVoiceDeploymentId="deploymentId",iI.EnableAudioLogging="storeAudio",iI.EnableLanguageId="lidEnabled",iI.EnableWordLevelTimestamps="wordLevelTimestamps",iI.EndSilenceTimeoutMs="endSilenceTimeoutMs",iI.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",iI.SegmentationMaximumTimeMs="segmentationMaximumTimeMs",iI.SegmentationStrategy="segmentationStrategy",iI.Format="format",iI.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",iI.Language="language",iI.Profanity="profanity",iI.RequestBotStatusMessages="enableBotMessageStatus",iI.StableIntermediateThreshold="stableIntermediateThreshold",iI.StableTranslation="stableTranslation",iI.TestHooks="testhooks",iI.Postprocessing="postprocessing",iI.CtsMeetingId="meetingId",iI.CtsDeviceId="deviceId",iI.CtsIsParticipant="isParticipant",iI.EnableAvatar="enableTalkingAvatar";var aI={};Object.defineProperty(aI,"__esModule",{value:!0}),aI.ActivityReceivedEventArgs=void 0;aI.ActivityReceivedEventArgs=class{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};var lI={},cI={};Object.defineProperty(cI,"__esModule",{value:!0}),cI.TurnStatusResponsePayload=void 0;class uI{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new uI(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}cI.TurnStatusResponsePayload=uI,Object.defineProperty(lI,"__esModule",{value:!0}),lI.TurnStatusReceivedEventArgs=void 0;const dI=cI;lI.TurnStatusReceivedEventArgs=class{constructor(e){this.privTurnStatus=dI.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};var pI={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ServicePropertyChannel=void 0,(t=e.ServicePropertyChannel||(e.ServicePropertyChannel={}))[t.UriQueryParameter=0]="UriQueryParameter"}(pI);var hI={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ProfanityOption=void 0,(t=e.ProfanityOption||(e.ProfanityOption={}))[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"}(hI);var fI,mI={};var vI={};Object.defineProperty(vI,"__esModule",{value:!0}),vI.ConnectionMessageEventArgs=void 0;vI.ConnectionMessageEventArgs=class{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};var gI={};Object.defineProperty(gI,"__esModule",{value:!0}),gI.VoiceProfile=void 0;gI.VoiceProfile=class{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}};var yI,bI={};var xI,wI={};var SI,CI={};var EI,TI={};var NI,PI={};var RI,II={};var kI,_I={};var AI,jI={},OI={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdMode=void 0,(t=e.LanguageIdMode||(e.LanguageIdMode={}))[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"}(OI);var DI={};Object.defineProperty(DI,"__esModule",{value:!0}),DI.AutoDetectSourceLanguageResult=void 0;const MI=dN;class LI{constructor(e,t){MI.Contracts.throwIfNullOrUndefined(e,"language"),MI.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new LI(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new LI(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}DI.AutoDetectSourceLanguageResult=LI;var zI={};Object.defineProperty(zI,"__esModule",{value:!0}),zI.SourceLanguageConfig=void 0;const FI=dN;class BI{constructor(e,t){FI.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new BI(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}zI.SourceLanguageConfig=BI;var UI,WI={};var HI,$I={},VI={};function qI(){if(HI)return VI;HI=1,Object.defineProperty(VI,"__esModule",{value:!0}),VI.ConversationImpl=VI.Conversation=void 0;const e=NO(),t=qT(),r=dN,n=g_();let i=class{constructor(){}static createConversationAsync(i,o,a,l){let c,u,d;return r.Contracts.throwIfNullOrUndefined(i,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(i.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),i.subscriptionKey||i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])||r.Contracts.throwIfNullOrUndefined(i.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof o?(c=new s(i,o),(0,t.marshalPromiseToCallbacks)((()=>Ke(this,null,function*(){}))(),a,l)):(c=new s(i),u=o,d=a,c.createConversationAsync(()=>{u&&u()},e=>{d&&d(e)})),c}};VI.Conversation=i;class s extends i{constructor(t,i){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=e=>{var t;this.privIsConnected=!0;try{(null==(t=this.privConversationTranslator)?void 0:t.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(r){}},this.onDisconnected=e=>{var t;try{(null==(t=this.privConversationTranslator)?void 0:t.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(r){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{var r;try{(null==(r=this.privConversationTranslator)?void 0:r.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(n){}},this.onParticipantUpdateCommandReceived=(t,r)=>{try{const t=this.privParticipants.getParticipant(r.id);if(void 0!==t){switch(r.key){case e.ConversationTranslatorCommandTypes.changeNickname:t.displayName=r.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:t.isUsingTts=r.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:t.profanity=r.value;break;case e.ConversationTranslatorCommandTypes.setMute:t.isMuted=r.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:t.translateToLanguages=r.value}this.privParticipants.addOrUpdateParticipant(t),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(t)],r.sessionId))}}catch(i){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach(e=>e.isMuted=!e.isHost&&t.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(r){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(r){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(r){}},this.onTranslationReceived=(t,r)=>{try{switch(r.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(r.payload,void 0,r.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(r.payload,void 0,r.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(r.payload,void 0,r.sessionId))}}catch(i){}},this.onParticipantsListReceived=(e,t)=>{var r;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){const e=null==(r=this.privConversationTranslator)?void 0:r.properties.getProperty(n.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(i){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(r){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new e.ConversationManager;if(t.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||t.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=t.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),i)this.privConversationId=i;else{0===t.targetLanguages.length&&t.addTargetLanguage(this.privLanguage);t.getProperty(n.PropertyId[n.PropertyId.SpeechServiceResponse_ProfanityOption])||t.setProfanity(n.ProfanityOption.Masked);let e=t.getProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name]);null==e&&(e="Host"),r.Contracts.throwIfNullOrTooLong(e,"nickname",50),r.Contracts.throwIfNullOrTooShort(e,"nickname",2),t.setProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name],e)}this.privConfig=t;const s=t;r.Contracts.throwIfNull(s,"speechConfig"),this.privProperties=s.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return!(null==(e=this.privParticipants.me)?void 0:e.isHost)&&(null==(t=this.privParticipants.me)?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const t=this.conversationId,r=this.participants.map(e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice})),n={};for(const i of e.ConversationConnectionConfig.transcriptionEventKeys){const e=this.properties.getProperty(i,"");""!==e&&(n[i]=e)}return{id:t,participants:r,conversationProperties:n}}get canSend(){var e;return this.privIsConnected&&!(null==(e=this.privParticipants.me)?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null==(e=this.privParticipants.me)?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}onToken(e){this.privConversationTranslator.onToken(e)}createConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,r=>{r||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=r,this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}startConversationAsync(t,n){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),n),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}addParticipantAsync(e,n,i){r.Contracts.throwIfNullOrUndefined(e,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(e),n,i)}joinConversationAsync(e,t,n,i,s){try{r.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,e=>{r.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,i&&i(e.cognitiveSpeechAuthToken)},e=>{this.handleError(e,s)})}catch(o){this.handleError(o,s)}}deleteConversationAsync(e,r){(0,t.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),e,r)}deleteConversationImplAsync(){return Ke(this,null,function*(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endConversationAsync(e,r){(0,t.marshalPromiseToCallbacks)(this.endConversationImplAsync(),e,r)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,t){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}muteAllParticipantsAsync(e,t){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}muteParticipantAsync(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}removeParticipantAsync(e,n,i){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(e),n,i);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),i);let t="";if("string"==typeof e)t=e;else if(e.hasOwnProperty("id")){t=e.id}else if(e.hasOwnProperty("userId")){t=e.userId}r.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","userId"));-1===this.participants.findIndex(e=>e.id===t)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(t),()=>{this.handleCallback(n,i)},e=>{this.handleError(e,i)})}}catch(s){this.handleError(s,i)}}unlockConversationAsync(e,t){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}unmuteAllParticipantsAsync(e,t){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}unmuteParticipantAsync(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}sendTextMessageAsync(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}setTranslatedLanguagesAsync(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}changeNicknameAsync(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return Ke(this,null,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this})}getKeepAlive(){const t=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:t,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")}close(e){return Ke(this,null,function*(){var t;try{this.privIsConnected=!1,yield null==(t=this.privConversationRecognizer)?void 0:t.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(Nie){throw Nie}e&&this.dispose()})}handleCallback(e,t){if(e){try{e()}catch(Nie){t&&t(Nie)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map(e=>this.toParticipant(e));return e?t:t.filter(e=>!1===e.isHost)}toParticipant(e){return new n.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getMuteCommand(t,n){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(t,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:t,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:n})}getLockCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getEjectCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(t,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:t,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getChangeNicknameCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(t,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:t,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getMessageCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(t,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:t,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return VI.ConversationImpl=s,VI}var GI={};Object.defineProperty(GI,"__esModule",{value:!0}),GI.ConversationCommon=void 0;GI.ConversationCommon=class{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(Nie){t&&t(Nie)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}};var KI,JI={};var YI,ZI={};var QI,XI={};var ek,tk={};var rk,nk={};var ik,sk,ok={},ak={},lk={};Object.defineProperty(lk,"__esModule",{value:!0}),lk.StringUtils=void 0;function ck(){return sk||(sk=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranslator=e.SpeechState=void 0;const t=NO(),r=function(){if(ik)return ak;ik=1,Object.defineProperty(ak,"__esModule",{value:!0}),ak.ConversationTranslatorConnectionFactory=void 0;const e=P_(),t=lk,r=dN,n=g_(),i=GT,s=nI,o=sI(),a=NO();let l=class l extends o.ConnectionFactoryBase{constructor(e){super(),r.Contracts.throwIfNullOrUndefined(e,"convGetter"),this.privConvGetter=e}create(r,c,u){const d="TRUE"===r.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase(),p=this.privConvGetter().room,h=p.cognitiveSpeechRegion||r.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,""),f={hostSuffix:o.ConnectionFactoryBase.getHostSuffix(h),path:l.CTS_VIRT_MIC_PATH,region:encodeURIComponent(h)};f[s.QueryParameterNames.Language]=encodeURIComponent(r.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"")),f[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(p.roomId),f[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(p.participantId),f[s.QueryParameterNames.CtsIsParticipant]=p.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let m="";const v={},g={};if(d){m=r.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint),m||(m="wss://"+r.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),m=t.StringUtils.formatString(m,f);const e=new URL(m);e.searchParams.forEach((e,t)=>{v[t]=e}),(new a.TranscriberConnectionFactory).setQueryParams(v,r,m),v[s.QueryParameterNames.CtsMeetingId]=f[s.QueryParameterNames.CtsMeetingId],v[s.QueryParameterNames.CtsDeviceId]=f[s.QueryParameterNames.CtsDeviceId],p.isHost||(v[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in v||(v[s.QueryParameterNames.Format]="simple"),e.searchParams.forEach((t,r)=>{e.searchParams.set(r,v[r]),delete v[r]}),m=e.toString()}else{const e=new a.TranslationConnectionFactory;m=e.getEndpointUrl(r,!0),m=t.StringUtils.formatString(m,f),e.setQueryParams(v,r,m)}g[i.HeaderNames.ConnectionId]=u,g[e.RestConfigBase.configParams.token]=p.token,c.token&&(g[c.headerName]=c.token);const y="TRUE"===r.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase();return Promise.resolve(new e.WebsocketConnection(m,v,g,new a.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(r),y,u))}};return ak.ConversationTranslatorConnectionFactory=l,l.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",ak}(),n=qT(),i=dN,s=g_(),o=qI(),a=Ek();var l,c;(c=l=e.SpeechState||(e.SpeechState={}))[c.Inactive=0]="Inactive",c[c.Connecting=1]="Connecting",c[c.Connected=2]="Connected";class u extends s.TranslationRecognizer{constructor(e,t,n,i){super(e,t,new r.ConversationTranslatorConnectionFactory(i)),this.privSpeechState=l.Inactive,n&&(this.privTranslator=n,this.sessionStarted=()=>{this.privSpeechState=l.Connected},this.sessionStopped=()=>{this.privSpeechState=l.Inactive},this.recognizing=(e,t)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,t)},this.recognized=(e,t)=>Ke(this,null,function*(){var e;(null==(e=t.result)?void 0:e.errorDetails)?(yield this.cancelSpeech(),this.fireCancelEvent(t.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,t)}),this.canceled=()=>Ke(this,null,function*(){if(this.privSpeechState!==l.Inactive)try{yield this.cancelSpeech()}catch(e){this.privSpeechState=l.Inactive}}))}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}set authentication(e){this.privReco.authentication=e}onConnection(){this.privSpeechState=l.Connected}onCancelSpeech(){return Ke(this,null,function*(){this.privSpeechState=l.Inactive,yield this.cancelSpeech()})}fireCancelEvent(e){try{if(this.privTranslator.canceled){const t=new a.ConversationTranslationCanceledEventArgs(s.CancellationReason.Error,e,s.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,t)}}catch(Nie){}}cancelSpeech(){return Ke(this,null,function*(){var e;try{this.stopContinuousRecognitionAsync(),yield null==(e=this.privReco)?void 0:e.disconnect(),this.privSpeechState=l.Inactive}catch(Nie){}})}}class d extends a.ConversationCommon{constructor(e){super(e),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new s.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var e;return null==(e=this.privConversation)?void 0:e.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer)&&(!this.privIsSpeaking&&this.privCTRecognizer.state!==l.Connected&&this.privCTRecognizer.state!==l.Connecting&&!this.privConversation.isMutedByHost)}onToken(e){this.privCTRecognizer.authentication=e}setServiceProperty(e,r){const n=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));n[e]=r,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(n))}joinConversationAsync(e,r,n,a,l){try{if("string"==typeof e){i.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),l);let c=n;null!=c&&""!==c||(c=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=s.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(s.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(c),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],c),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],r);const u=[s.PropertyId.SpeechServiceConnection_Host,s.PropertyId.ConversationTranslator_Host,s.PropertyId.SpeechServiceConnection_Endpoint,s.PropertyId.SpeechServiceConnection_ProxyHostName,s.PropertyId.SpeechServiceConnection_ProxyPassword,s.PropertyId.SpeechServiceConnection_ProxyPort,s.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const e of u){const t=this.privProperties.getProperty(e);if(t){const r="string"==typeof e?e:s.PropertyId[e];this.privSpeechTranslationConfig.setProperty(r,t)}}const d=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const e of Object.keys(d))this.privSpeechTranslationConfig.setServiceProperty(e,d[e],s.ServicePropertyChannel.UriQueryParameter);this.privConversation=new o.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,r,c,e=>{e||this.handleError(new Error(this.privErrors.permissionDeniedConnect),l),this.privSpeechTranslationConfig.authorizationToken=e,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(a,l)},e=>{this.handleError(e,l)})},e=>{this.handleError(e,l)})}else"object"==typeof e?(i.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(s.PropertyId.ConversationTranslator_Name,r),this.privConversation=e,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(n,a)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),a)}catch(c){this.handleError(c,"string"==typeof n?l:a)}}leaveConversationAsync(e,t){(0,n.marshalPromiseToCallbacks)((()=>Ke(this,null,function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()}))(),e,t)}sendTextMessageAsync(e,t,r){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,t,r)}catch(n){this.handleError(n,r)}}startTranscribingAsync(e,t){(0,n.marshalPromiseToCallbacks)((()=>Ke(this,null,function*(){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&(yield this.connectTranslatorRecognizer()),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(e){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),e}}))(),e,t)}stopTranscribingAsync(e,t){(0,n.marshalPromiseToCallbacks)((()=>Ke(this,null,function*(){try{if(!this.privIsSpeaking)return void(yield this.cancelSpeech());this.privIsSpeaking=!1,yield new Promise((e,t)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(e,t)})}catch(e){yield this.cancelSpeech()}}))(),e,t)}isDisposed(){return this.privIsDisposed}dispose(e,t,r){(0,n.marshalPromiseToCallbacks)((()=>Ke(this,null,function*(){this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)}))(),t,r)}cancelSpeech(){return Ke(this,null,function*(){var e;try{this.privIsSpeaking=!1,yield null==(e=this.privCTRecognizer)?void 0:e.onCancelSpeech(),this.privCTRecognizer=void 0}catch(Nie){}})}connectTranslatorRecognizer(){return Ke(this,null,function*(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=s.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key],"");const e=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,e)}catch(e){throw yield this.cancelSpeech(),e}})}startContinuousRecognition(){return new Promise((e,t)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,t)})}}e.ConversationTranslator=d}(ok)),ok}lk.StringUtils=class{static formatString(e,t){if(!e)return"";if(!t)return e;let r="",n="";const i=e=>{r+=e},s=e=>{n+=e};let o=i;for(let a=0;a<e.length;a++){const l=e[a],c=a+1<e.length?e[a+1]:"";switch(l){case"{":"{"===c?(o("{"),a++):o=s;break;case"}":"}"===c?(o("}"),a++):(t.hasOwnProperty(n)&&(r+=t[n]),o=i,n="");break;default:o(l)}}return r}};var uk,dk={};var pk,hk={};var fk={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ParticipantChangedReason=void 0,(t=e.ParticipantChangedReason||(e.ParticipantChangedReason={}))[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"}(fk);var mk,vk={};var gk,yk={};var bk,xk={};var wk,Sk,Ck={};function Ek(){return Sk||(Sk=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranscriptionResult=e.MeetingTranscriber=e.MeetingTranscriptionCanceledEventArgs=e.MeetingImpl=e.Meeting=e.ParticipantChangedReason=e.User=e.Participant=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.ConversationCommon=e.ConversationImpl=e.Conversation=void 0;var t=qI();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return t.Conversation}}),Object.defineProperty(e,"ConversationImpl",{enumerable:!0,get:function(){return t.ConversationImpl}});var r=GI;Object.defineProperty(e,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var n=function(){if(KI)return JI;KI=1,Object.defineProperty(JI,"__esModule",{value:!0}),JI.ConversationExpirationEventArgs=void 0;const e=g_();let t=class extends e.SessionEventArgs{constructor(e,t){super(t),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}};return JI.ConversationExpirationEventArgs=t,JI}();Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return n.ConversationExpirationEventArgs}});var i=function(){if(YI)return ZI;YI=1,Object.defineProperty(ZI,"__esModule",{value:!0}),ZI.ConversationParticipantsChangedEventArgs=void 0;const e=g_();let t=class extends e.SessionEventArgs{constructor(e,t,r){super(r),this.privReason=e,this.privParticipant=t}get reason(){return this.privReason}get participants(){return this.privParticipant}};return ZI.ConversationParticipantsChangedEventArgs=t,ZI}();Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var s=function(){if(QI)return XI;QI=1,Object.defineProperty(XI,"__esModule",{value:!0}),XI.ConversationTranslationCanceledEventArgs=void 0;const e=VP();let t=class extends e.CancellationEventArgsBase{};return XI.ConversationTranslationCanceledEventArgs=t,XI}();Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var o=function(){if(ek)return tk;ek=1,Object.defineProperty(tk,"__esModule",{value:!0}),tk.ConversationTranslationEventArgs=void 0;const e=g_();let t=class extends e.RecognitionEventArgs{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}};return tk.ConversationTranslationEventArgs=t,tk}();Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return o.ConversationTranslationEventArgs}});var a=function(){if(rk)return nk;rk=1,Object.defineProperty(nk,"__esModule",{value:!0}),nk.ConversationTranslationResult=void 0;const e=QP();let t=class extends e.TranslationRecognitionResult{constructor(e,t,r,n,i,s,o,a,l,c,u){super(t,n,i,s,o,a,void 0,void 0,l,c,u),this.privId=e,this.privOrigLang=r}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return nk.ConversationTranslationResult=t,nk}();Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return a.ConversationTranslationResult}});var l=ck();Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return l.ConversationTranslator}});var c=function(){if(uk)return dk;uk=1,Object.defineProperty(dk,"__esModule",{value:!0}),dk.ConversationTranscriber=void 0;const e=NO(),t=hR,r=qT(),n=dN,i=g_();let s=class s extends i.Recognizer{constructor(t,r){const s=t;n.Contracts.throwIfNull(s,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(s.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(r,s.properties,new e.ConversationTranscriberConnectionFactory,t.tokenCredential),this.privProperties.setProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(e,t,r){const n=e;return t.properties.mergeTo(n.properties),new s(e,r)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){n.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(e,n){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),e,n)}stopTranscribingAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(e,t){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}dispose(e){return Ke(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield Ge(s.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(t,r,n,i){const s=n;return i.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(t,r,s,i,this)}};return dk.ConversationTranscriber=s,dk}();Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return c.ConversationTranscriber}});var u=function(){if(pk)return hk;pk=1,Object.defineProperty(hk,"__esModule",{value:!0}),hk.Participant=hk.User=void 0;const e=g_();hk.User=class{constructor(e){this.privUserId=e}get userId(){return this.privUserId}};class t{constructor(t,r,n,i,s,o,a,l){this.privId=t,this.privAvatar=r,this.privDisplayName=n,this.privIsHost=i,this.privIsMuted=s,this.privIsUsingTts=o,this.privPreferredLanguage=a,this.privVoice=l,this.privProperties=new e.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,r,n){return new t(e,"",e,!1,!1,!1,r,n)}}return hk.Participant=t,hk}();Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return u.Participant}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return u.User}});var d=fk;Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return d.ParticipantChangedReason}});var p=function(){if(mk)return vk;mk=1,Object.defineProperty(vk,"__esModule",{value:!0}),vk.MeetingImpl=vk.Meeting=void 0;const e=NO(),t=qT(),r=dN,n=g_();let i=class{constructor(){}static createMeetingAsync(i,o,a,l){if(r.Contracts.throwIfNullOrUndefined(i,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(i.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(o,"meetingId"),0===o.length)throw new Error("meetingId cannot be empty");i.subscriptionKey||i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])||r.Contracts.throwIfNullOrUndefined(i.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const c=new s(i,o);return(0,t.marshalPromiseToCallbacks)((()=>Ke(this,null,function*(){}))(),a,l),c}};vk.Meeting=i;class s extends i{constructor(t,i){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=e=>{var t;this.privIsConnected=!0;try{(null==(t=this.privConversationTranslator)?void 0:t.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(r){}},this.onDisconnected=e=>{var t;try{(null==(t=this.privConversationTranslator)?void 0:t.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(r){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{var r;try{(null==(r=this.privConversationTranslator)?void 0:r.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(n){}},this.onParticipantUpdateCommandReceived=(t,r)=>{try{const t=this.privParticipants.getParticipant(r.id);if(void 0!==t){switch(r.key){case e.ConversationTranslatorCommandTypes.changeNickname:t.displayName=r.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:t.isUsingTts=r.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:t.profanity=r.value;break;case e.ConversationTranslatorCommandTypes.setMute:t.isMuted=r.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:t.translateToLanguages=r.value}this.privParticipants.addOrUpdateParticipant(t),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(t)],r.sessionId))}}catch(i){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach(e=>e.isMuted=!e.isHost&&t.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(r){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(r){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(r){}},this.onTranslationReceived=(t,r)=>{try{switch(r.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(r.payload,void 0,r.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(r.payload,void 0,r.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(r.payload,void 0,r.sessionId))}}catch(i){}},this.onParticipantsListReceived=(e,t)=>{var r;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){const e=null==(r=this.privConversationTranslator)?void 0:r.properties.getProperty(n.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(i){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(r){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new e.ConversationManager,t.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||t.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=t.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=i,this.privConfig=t;const s=t;r.Contracts.throwIfNull(s,"speechConfig"),this.privProperties=s.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return!(null==(e=this.privParticipants.me)?void 0:e.isHost)&&(null==(t=this.privParticipants.me)?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const t=this.meetingId,r=this.participants.map(e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice})),n={};for(const i of e.ConversationConnectionConfig.transcriptionEventKeys){const e=this.properties.getProperty(i,"");""!==e&&(n[i]=e)}return{id:t,participants:r,meetingProperties:n}}get canSend(){var e;return this.privIsConnected&&!(null==(e=this.privParticipants.me)?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null==(e=this.privParticipants.me)?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}createMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,r=>{r||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=r,this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(r){this.handleError(r,t)}}startMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}addParticipantAsync(e,n,i){r.Contracts.throwIfNullOrUndefined(e,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(e),n,i)}joinMeetingAsync(e,t,n,i,s){try{r.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,e=>{r.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,i&&i(e.cognitiveSpeechAuthToken)},e=>{this.handleError(e,s)})}catch(o){this.handleError(o,s)}}deleteMeetingAsync(e,r){(0,t.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),e,r)}deleteMeetingImplAsync(){return Ke(this,null,function*(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endMeetingAsync(e,r){(0,t.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),e,r)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(e,t){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}muteAllParticipantsAsync(e,t){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}muteParticipantAsync(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}removeParticipantAsync(e,n,i){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(e),n,i);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),i);let t="";"string"==typeof e?t=e:e.hasOwnProperty("id")?t=e.id:e.hasOwnProperty("userId")&&(t=e.userId),r.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","userId")),-1===this.participants.findIndex(e=>e.id===t)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(t),()=>{this.handleCallback(n,i)},e=>{this.handleError(e,i)})}}catch(s){this.handleError(s,i)}}unlockMeetingAsync(e,t){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}unmuteAllParticipantsAsync(e,t){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(n){this.handleError(n,t)}}unmuteParticipantAsync(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}sendTextMessageAsync(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}setTranslatedLanguagesAsync(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}changeNicknameAsync(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(t,n)},e=>{this.handleError(e,n)})}catch(i){this.handleError(i,n)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return Ke(this,null,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this})}getKeepAlive(){const t=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:t,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"leave")}close(e){return Ke(this,null,function*(){var t;try{this.privIsConnected=!1,yield null==(t=this.privConversationRecognizer)?void 0:t.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(Nie){throw Nie}e&&this.dispose()})}handleCallback(e,t){if(e){try{e()}catch(Nie){t&&t(Nie)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map(e=>this.toParticipant(e));return e?t:t.filter(e=>!1===e.isHost)}toParticipant(e){return new n.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getMuteCommand(t,n){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(t,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:t,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:n})}getLockCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getEjectCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(t,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:t,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getChangeNicknameCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(t,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:t,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:t})}getMessageCommand(t){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(t,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:t,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return vk.MeetingImpl=s,vk}();Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return p.Meeting}}),Object.defineProperty(e,"MeetingImpl",{enumerable:!0,get:function(){return p.MeetingImpl}});var h=function(){if(gk)return yk;gk=1,Object.defineProperty(yk,"__esModule",{value:!0}),yk.MeetingTranscriptionCanceledEventArgs=void 0;const e=VP();class t extends e.CancellationEventArgsBase{}return yk.MeetingTranscriptionCanceledEventArgs=t,yk}();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var f=function(){if(bk)return xk;bk=1,Object.defineProperty(xk,"__esModule",{value:!0}),xk.MeetingTranscriber=void 0;const e=NO(),t=qT(),r=dN,n=g_(),i=Ek();return xk.MeetingTranscriber=class{constructor(e){this.privAudioConfig=e,this.privProperties=new n.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return n.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,e)}joinMeetingAsync(n,s,o){const a=n;r.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(n.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,t.marshalPromiseToCallbacks)(a.connectTranscriberRecognizer(this.privRecognizer),s,o)}startTranscribingAsync(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)}stopTranscribingAsync(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)}leaveMeetingAsync(e,r){this.privRecognizer.disconnectCallbacks(),(0,t.marshalPromiseToCallbacks)((()=>Ke(this,null,function*(){}))(),e,r)}close(e,n){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),e,n)}dispose(e){return Ke(this,null,function*(){this.privDisposedRecognizer||(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))})}},xk}();Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return f.MeetingTranscriber}});var m=function(){if(wk)return Ck;wk=1,Object.defineProperty(Ck,"__esModule",{value:!0}),Ck.ConversationTranscriptionResult=void 0;const e=g_();let t=class extends e.RecognitionResult{constructor(e,t,r,n,i,s,o,a,l,c,u){super(e,t,r,n,i,s,o,l,c,u),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}};return Ck.ConversationTranscriptionResult=t,Ck}();Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return m.ConversationTranscriptionResult}})}($I)),$I}var Tk,Nk={};function Pk(){if(Tk)return Nk;Tk=1,Object.defineProperty(Nk,"__esModule",{value:!0}),Nk.SynthesisRequest=Nk.Synthesizer=void 0;const e=NO(),t=qT(),r=dN,n=g_();Nk.Synthesizer=class i{constructor(e){const n=e;r.Contracts.throwIfNull(n,"speechConfig"),this.privProperties=n.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue,this.tokenCredential=e.tokenCredential}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(e){const t={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let r=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),s=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,""),o=i.XMLEncode(e);return this.autoDetectSourceLanguage?r="en-US":s=s||t[r],s&&(o=`<voice name='${s}'>${o}</voice>`),o=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${r}'>${o}</speak>`,o}dispose(e){return Ke(this,null,function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)})}adapterSpeak(){return Ke(this,null,function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}})}createSynthesizerConfig(t){return new e.SynthesizerConfig(t,this.privProperties)}implCommonSynthesizeSetup(){let t="undefined"!=typeof window?"Browser":"Node",r="unknown",i="unknown";"undefined"!=typeof navigator&&(t=t+"/"+navigator.platform,r=navigator.userAgent,i=navigator.appVersion);const s=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(t,r,i)))),o=this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0),a=o&&""!==o?new e.CognitiveSubscriptionKeyAuthentication(o):this.tokenCredential?new e.CognitiveTokenAuthentication(()=>Ke(this,null,function*(){var e;try{const t=yield this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return null!=(e=null==t?void 0:t.token)?e:""}catch(Pie){throw Pie}}),()=>Ke(this,null,function*(){var e;try{const t=yield this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return null!=(e=null==t?void 0:t.token)?e:""}catch(Pie){throw Pie}})):new e.CognitiveTokenAuthentication(()=>{const e=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)},()=>{const e=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)});this.privAdapter=this.createSynthesisAdapter(a,this.privConnectionFactory,s),this.privRestAdapter=this.createRestSynthesisAdapter(a,s)}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};return Nk.SynthesisRequest=class{constructor(e,t,r,n,i,s){this.requestId=e,this.text=t,this.isSSML=r,this.cb=n,this.err=i,this.dataStream=s}},Nk}var Rk,Ik={};var kk={};Object.defineProperty(kk,"__esModule",{value:!0}),kk.SynthesisResult=void 0;kk.SynthesisResult=class{constructor(e,t,r,n){this.privResultId=e,this.privReason=t,this.privErrorDetails=r,this.privProperties=n}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};var _k,Ak={};var jk={};Object.defineProperty(jk,"__esModule",{value:!0}),jk.SpeechSynthesisEventArgs=void 0;jk.SpeechSynthesisEventArgs=class{constructor(e){this.privResult=e}get result(){return this.privResult}};var Ok={};Object.defineProperty(Ok,"__esModule",{value:!0}),Ok.SpeechSynthesisWordBoundaryEventArgs=void 0;Ok.SpeechSynthesisWordBoundaryEventArgs=class{constructor(e,t,r,n,i,s){this.privAudioOffset=e,this.privDuration=t,this.privText=r,this.privWordLength=n,this.privTextOffset=i,this.privBoundaryType=s}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};var Dk={};Object.defineProperty(Dk,"__esModule",{value:!0}),Dk.SpeechSynthesisBookmarkEventArgs=void 0;Dk.SpeechSynthesisBookmarkEventArgs=class{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};var Mk={};Object.defineProperty(Mk,"__esModule",{value:!0}),Mk.SpeechSynthesisVisemeEventArgs=void 0;Mk.SpeechSynthesisVisemeEventArgs=class{constructor(e,t,r){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};var Lk={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisBoundaryType=void 0,(t=e.SpeechSynthesisBoundaryType||(e.SpeechSynthesisBoundaryType={})).Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"}(Lk);var zk,Fk={};var Bk={};!function(e){var t,r,n,i;Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=void 0,(r=t=e.SynthesisVoiceGender||(e.SynthesisVoiceGender={}))[r.Unknown=0]="Unknown",r[r.Female=1]="Female",r[r.Male=2]="Male",r[r.Neutral=3]="Neutral",(i=n=e.SynthesisVoiceType||(e.SynthesisVoiceType={}))[i.Unknown=0]="Unknown",i[i.OnlineNeural=1]="OnlineNeural",i[i.OnlineStandard=2]="OnlineStandard",i[i.OfflineNeural=3]="OfflineNeural",i[i.OfflineStandard=4]="OfflineStandard",i[i.OnlineNeuralHD=5]="OnlineNeuralHD";const s={[t[t.Neutral]]:t.Neutral,[t[t.Male]]:t.Male,[t[t.Female]]:t.Female},o={Neural:n.OnlineNeural,NeuralHD:n.OnlineNeuralHD};e.VoiceInfo=class{constructor(e){if(this.privStyleList=[],e){if(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=o[e.VoiceType]||n.Unknown,this.privGender=s[e.Gender]||t.Unknown,e.StyleList&&Array.isArray(e.StyleList))for(const t of e.StyleList)this.privStyleList.push(t);this.privSampleRateHertz=e.SampleRateHertz,this.privStatus=e.Status,e.ExtendedPropertyMap&&(this.privExtendedPropertyMap=e.ExtendedPropertyMap),this.privWordsPerMinute=e.WordsPerMinute,Array.isArray(e.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...e.SecondaryLocaleList]),Array.isArray(e.RolePlayList)&&(this.privRolePlayList=[...e.RolePlayList]),e.VoiceTag&&(this.privVoiceTag=e.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}}(Bk);var Uk={};Object.defineProperty(Uk,"__esModule",{value:!0}),Uk.SpeakerAudioDestination=void 0;const Wk=qT(),Hk=nP,$k=SN,Vk={[$k.AudioFormatTag.PCM]:"audio/wav",[$k.AudioFormatTag.MuLaw]:"audio/x-wav",[$k.AudioFormatTag.MP3]:"audio/mpeg",[$k.AudioFormatTag.OGG_OPUS]:"audio/ogg",[$k.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[$k.AudioFormatTag.ALaw]:"audio/x-wav",[$k.AudioFormatTag.FLAC]:"audio/flac",[$k.AudioFormatTag.AMR_WB]:"audio/amr-wb",[$k.AudioFormatTag.G722]:"audio/G722"};Uk.SpeakerAudioDestination=class{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||(0,Wk.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,r){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{t&&t()},e=>{r&&r(e)})):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},e=>{t&&t(e)});else if(void 0!==this.privAudioOutputStream&&"undefined"!=typeof window)if(this.privFormat.formatTag!==$k.AudioFormatTag.PCM&&this.privFormat.formatTag!==$k.AudioFormatTag.MuLaw&&this.privFormat.formatTag!==$k.AudioFormatTag.ALaw||!1!==this.privFormat.hasHeader){let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(()=>{r=this.privFormat.addHeader(r);const n=new Blob([r],{type:Vk[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(n),this.notifyPlayback().then(()=>{e&&e()},e=>{t&&t(e)})},e=>{t&&t(e)})}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!=typeof AudioContext||"undefined"!=typeof window&&void 0!==window.webkitAudioContext){this.privFormat=e;const t=Vk[this.privFormat.formatTag];void 0===t?console.warn(`Unknown mimeType for format ${$k.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(e=>{Wk.Events.instance.onEvent(new Wk.BackgroundEvent(e))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(e=>{Wk.Events.instance.onEvent(new Wk.BackgroundEvent(e))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(e=>{Wk.Events.instance.onEvent(new Wk.BackgroundEvent(e))})):(console.warn(`Format ${$k.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new Hk.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e,t;return null!=(t=null==(e=this.privAudio)?void 0:e.volume)?t:-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then(()=>{e&&e()},e=>{t&&t(e)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return Ke(this,null,function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch(e){return this.privAudioBuffer.unshift(t),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())})}handleSourceBufferUpdateEnd(){return Ke(this,null,function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())})}notifyPlayback(){return Ke(this,null,function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))})}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}};var qk,Gk={};var Kk,Jk={};var Yk={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGradingSystem=void 0,(t=e.PronunciationAssessmentGradingSystem||(e.PronunciationAssessmentGradingSystem={}))[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"}(Yk);var Zk={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGranularity=void 0,(t=e.PronunciationAssessmentGranularity||(e.PronunciationAssessmentGranularity={}))[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"}(Zk);var Qk,Xk={};var e_,t_={};var r_,n_={};var i_={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarEventArgs=e.AvatarEventTypes=void 0,(t=e.AvatarEventTypes||(e.AvatarEventTypes={})).SwitchedToSpeaking="SwitchedToSpeaking",t.SwitchedToIdle="SwitchedToIdle",t.SessionClosed="SessionClosed";e.AvatarEventArgs=class{constructor(e,t){this.privOffset=e,this.privDescription=t}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}}(i_);var s_,o_,a_={},l_={};function c_(){if(s_)return l_;s_=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.SpeechSynthesisConnectionFactory=void 0;const e=P_(),t=g_(),r=sI(),n=NO(),i=GT,s=nI;return l_.SpeechSynthesisConnectionFactory=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}create(o,a,l){return Ke(this,null,function*(){let c=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const u=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),d=r.ConnectionFactoryBase.getHostSuffix(u),p=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),h=void 0===p?"tts":"voice",f=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+u+"."+h+".speech"+d),m={},v={};if(void 0!==a.token&&""!==a.token&&(v[a.headerName]=a.token),v[i.HeaderNames.ConnectionId]=l,void 0!==p&&""!==p&&(c&&-1!==c.search(s.QueryParameterNames.CustomVoiceDeploymentId)||(m[s.QueryParameterNames.CustomVoiceDeploymentId]=p)),o.avatarEnabled&&(c&&-1!==c.search(s.QueryParameterNames.EnableAvatar)||(m[s.QueryParameterNames.EnableAvatar]="true")),c){const e=new URL(c),t=e.pathname;""!==t&&"/"!==t||(e.pathname=this.synthesisUri,c=yield r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(e.toString()))}c||(c=f+this.synthesisUri),o.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,c);const g="true"===o.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new e.WebsocketConnection(c,m,v,new n.WebsocketMessageFormatter,e.ProxyInfo.fromParameters(o.parameters),g,l)})}},l_}var u_={};Object.defineProperty(u_,"__esModule",{value:!0}),u_.AvatarVideoFormat=u_.Coordinate=void 0;u_.Coordinate=class{constructor(e,t){this.x=e,this.y=t}};u_.AvatarVideoFormat=class{constructor(e="H264",t=2e6,r=1920,n=1080){this.codec=e,this.bitrate=t,this.width=r,this.height=n}setCropRange(e,t){this.cropRange={bottomRight:t,topLeft:e}}};var d_,p_={};var h_,f_,m_,v_={};function g_(){return f_||(f_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionEventArgs=e.CancellationErrorCode=e.CancellationDetails=e.CancellationDetailsBase=e.IntentRecognitionCanceledEventArgs=e.TranslationRecognitionCanceledEventArgs=e.NoMatchDetails=e.NoMatchReason=e.Translations=e.TranslationRecognizer=e.VoiceProfileType=e.IntentRecognizer=e.SpeechRecognizer=e.Recognizer=e.PropertyId=e.PropertyCollection=e.SpeechTranslationConfigImpl=e.SpeechTranslationConfig=e.SpeechConfigImpl=e.SpeechConfig=e.ResultReason=e.TranslationSynthesisResult=e.TranslationRecognitionResult=e.TranslationSynthesisEventArgs=e.TranslationRecognitionEventArgs=e.SpeechRecognitionCanceledEventArgs=e.MeetingTranscriptionEventArgs=e.ConversationTranscriptionEventArgs=e.SpeechRecognitionEventArgs=e.LanguageUnderstandingModel=e.IntentRecognitionResult=e.SpeechRecognitionResult=e.RecognitionResult=e.IntentRecognitionEventArgs=e.OutputFormat=e.RecognitionEventArgs=e.SessionEventArgs=e.KeywordRecognitionModel=e.PushAudioOutputStreamCallback=e.PullAudioInputStreamCallback=e.CancellationReason=e.PushAudioOutputStream=e.PullAudioOutputStream=e.AudioOutputStream=e.PushAudioInputStream=e.PullAudioInputStream=e.AudioInputStream=e.AudioFormatTag=e.AudioStreamFormat=e.AudioConfig=void 0,e.SpeechSynthesisEventArgs=e.SpeechSynthesisResult=e.SynthesisResult=e.SpeechSynthesizer=e.SpeechSynthesisOutputFormat=e.Synthesizer=e.User=e.ParticipantChangedReason=e.Participant=e.MeetingTranscriber=e.Meeting=e.ConversationTranscriptionResult=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.Conversation=e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResultType=e.SpeakerRecognitionResult=e.SourceLanguageConfig=e.AutoDetectSourceLanguageResult=e.AutoDetectSourceLanguageConfig=e.SpeakerVerificationModel=e.SpeakerIdentificationModel=e.SpeakerRecognizer=e.VoiceProfileClient=e.VoiceProfilePhraseResult=e.VoiceProfileCancellationDetails=e.VoiceProfileResult=e.VoiceProfileEnrollmentCancellationDetails=e.VoiceProfileEnrollmentResult=e.VoiceProfile=e.ConnectionMessage=e.ConnectionMessageEventArgs=e.BaseAudioPlayer=e.ProfanityOption=e.ServicePropertyChannel=e.TurnStatusReceivedEventArgs=e.ActivityReceivedEventArgs=e.DialogServiceConnector=e.CustomCommandsConfig=e.BotFrameworkConfig=e.DialogServiceConfig=e.PhraseListGrammar=e.Connection=e.ServiceEventArgs=void 0,e.LogLevel=e.Diagnostics=e.AvatarWebRTCConnectionResult=e.Coordinate=e.AvatarVideoFormat=e.AvatarSynthesizer=e.AvatarEventArgs=e.AvatarConfig=e.LanguageIdMode=e.PronunciationAssessmentResult=e.PronunciationAssessmentConfig=e.PronunciationAssessmentGranularity=e.PronunciationAssessmentGradingSystem=e.MeetingTranscriptionCanceledEventArgs=e.ConversationTranscriptionCanceledEventArgs=e.SpeakerAudioDestination=e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=e.SynthesisVoicesResult=e.SpeechSynthesisBoundaryType=e.SpeechSynthesisVisemeEventArgs=e.SpeechSynthesisBookmarkEventArgs=e.SpeechSynthesisWordBoundaryEventArgs=void 0;var t=yP();Object.defineProperty(e,"AudioConfig",{enumerable:!0,get:function(){return t.AudioConfig}});var r=SN;Object.defineProperty(e,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(e,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var n=rP();Object.defineProperty(e,"AudioInputStream",{enumerable:!0,get:function(){return n.AudioInputStream}}),Object.defineProperty(e,"PullAudioInputStream",{enumerable:!0,get:function(){return n.PullAudioInputStream}}),Object.defineProperty(e,"PushAudioInputStream",{enumerable:!0,get:function(){return n.PushAudioInputStream}});var i=nP;Object.defineProperty(e,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(e,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(e,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var s=bP;Object.defineProperty(e,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var o=xP;Object.defineProperty(e,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return o.PullAudioInputStreamCallback}});var a=wP;Object.defineProperty(e,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return a.PushAudioOutputStreamCallback}});var l=SP;Object.defineProperty(e,"KeywordRecognitionModel",{enumerable:!0,get:function(){return l.KeywordRecognitionModel}});var c=EP;Object.defineProperty(e,"SessionEventArgs",{enumerable:!0,get:function(){return c.SessionEventArgs}});var u=function(){if(TP)return NP;TP=1,Object.defineProperty(NP,"__esModule",{value:!0}),NP.RecognitionEventArgs=void 0;const e=g_();let t=class extends e.SessionEventArgs{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}};return NP.RecognitionEventArgs=t,NP}();Object.defineProperty(e,"RecognitionEventArgs",{enumerable:!0,get:function(){return u.RecognitionEventArgs}});var d=PP;Object.defineProperty(e,"OutputFormat",{enumerable:!0,get:function(){return d.OutputFormat}});var p=function(){if(RP)return IP;RP=1,Object.defineProperty(IP,"__esModule",{value:!0}),IP.IntentRecognitionEventArgs=void 0;const e=g_();let t=class extends e.RecognitionEventArgs{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}};return IP.IntentRecognitionEventArgs=t,IP}();Object.defineProperty(e,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return p.IntentRecognitionEventArgs}});var h=kP;Object.defineProperty(e,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var f=function(){if(_P)return AP;_P=1,Object.defineProperty(AP,"__esModule",{value:!0}),AP.SpeechRecognitionResult=void 0;const e=g_();let t=class extends e.RecognitionResult{constructor(e,t,r,n,i,s,o,a,l,c,u){super(e,t,r,n,i,s,o,l,c,u),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}};return AP.SpeechRecognitionResult=t,AP}();Object.defineProperty(e,"SpeechRecognitionResult",{enumerable:!0,get:function(){return f.SpeechRecognitionResult}});var m=function(){if(jP)return OP;jP=1,Object.defineProperty(OP,"__esModule",{value:!0}),OP.IntentRecognitionResult=void 0;const e=g_();let t=class extends e.SpeechRecognitionResult{constructor(e,t,r,n,i,s,o,a,l,c,u){super(t,r,n,i,s,o,a,void 0,l,c,u),this.privIntentId=e}get intentId(){return this.privIntentId}};return OP.IntentRecognitionResult=t,OP}();Object.defineProperty(e,"IntentRecognitionResult",{enumerable:!0,get:function(){return m.IntentRecognitionResult}});var v=DP;Object.defineProperty(e,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return v.LanguageUnderstandingModel}});var g=function(){if(FP)return BP;FP=1,Object.defineProperty(BP,"__esModule",{value:!0}),BP.MeetingTranscriptionEventArgs=BP.ConversationTranscriptionEventArgs=BP.SpeechRecognitionEventArgs=void 0;const e=g_();let t=class extends e.RecognitionEventArgs{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}};BP.SpeechRecognitionEventArgs=t;class r extends e.RecognitionEventArgs{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}return BP.ConversationTranscriptionEventArgs=r,BP.MeetingTranscriptionEventArgs=class extends t{},BP}();Object.defineProperty(e,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return g.SpeechRecognitionEventArgs}}),Object.defineProperty(e,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return g.ConversationTranscriptionEventArgs}}),Object.defineProperty(e,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return g.MeetingTranscriptionEventArgs}});var y=function(){if(WP)return HP;WP=1,Object.defineProperty(HP,"__esModule",{value:!0}),HP.SpeechRecognitionCanceledEventArgs=void 0;const e=VP();let t=class extends e.CancellationEventArgsBase{};return HP.SpeechRecognitionCanceledEventArgs=t,HP}();Object.defineProperty(e,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return y.SpeechRecognitionCanceledEventArgs}});var b=function(){if(qP)return GP;qP=1,Object.defineProperty(GP,"__esModule",{value:!0}),GP.TranslationRecognitionEventArgs=void 0;const e=g_();let t=class extends e.RecognitionEventArgs{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}};return GP.TranslationRecognitionEventArgs=t,GP}();Object.defineProperty(e,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return b.TranslationRecognitionEventArgs}});var x=function(){if(KP)return JP;KP=1,Object.defineProperty(JP,"__esModule",{value:!0}),JP.TranslationSynthesisEventArgs=void 0;const e=g_();let t=class extends e.SessionEventArgs{constructor(e,t){super(t),this.privResult=e}get result(){return this.privResult}};return JP.TranslationSynthesisEventArgs=t,JP}();Object.defineProperty(e,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return x.TranslationSynthesisEventArgs}});var w=QP();Object.defineProperty(e,"TranslationRecognitionResult",{enumerable:!0,get:function(){return w.TranslationRecognitionResult}});var S=XP;Object.defineProperty(e,"TranslationSynthesisResult",{enumerable:!0,get:function(){return S.TranslationSynthesisResult}});var C=eR;Object.defineProperty(e,"ResultReason",{enumerable:!0,get:function(){return C.ResultReason}});var E=function(){if(tR)return rR;tR=1,Object.defineProperty(rR,"__esModule",{value:!0}),rR.SpeechConfigImpl=rR.SpeechConfig=void 0;const e=NO(),t=dN,r=g_();let n=class{constructor(){}static fromSubscription(e,n){t.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(n,"region");const s=new i;return s.setProperty(r.PropertyId.SpeechServiceConnection_Region,n),s.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,n),s.setProperty(r.PropertyId.SpeechServiceConnection_Key,e),s}static fromEndpoint(e,n){t.Contracts.throwIfNull(e,"endpoint");const s="string"==typeof n&&n.trim().length>0,o="object"==typeof n&&null!==n&&"function"==typeof n.getToken,a="object"==typeof n&&null!==n&&"string"==typeof n.key;if(void 0!==n&&!s&&!o&&!a)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let l;return"string"==typeof n?(l=new i,l.setProperty(r.PropertyId.SpeechServiceConnection_Key,n)):"object"==typeof n&&"function"==typeof n.getToken?l=new i(n):"object"==typeof n&&"string"==typeof n.key?(l=new i,l.setProperty(r.PropertyId.SpeechServiceConnection_Key,n.key)):l=new i,l.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,e.href),l}static fromHost(e,n){t.Contracts.throwIfNull(e,"hostName");const s=new i;return s.setProperty(r.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),s.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),void 0!==n&&s.setProperty(r.PropertyId.SpeechServiceConnection_Key,n),s}static fromAuthorizationToken(e,n){t.Contracts.throwIfNull(e,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(n,"region");const s=new i;return s.setProperty(r.PropertyId.SpeechServiceConnection_Region,n),s.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,n),s.authorizationToken=e,s}close(){}};rR.SpeechConfig=n;class i extends n{constructor(e){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple,this.privTokenCredential=e}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(t){this.privProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[t])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,e)}get tokenCredential(){return this.privTokenCredential}setProperty(e,r){t.Contracts.throwIfNull(r,"value"),this.privProperties.setProperty(e,r)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,n,i){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],n),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],i)}setServiceProperty(t,r){const n=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));n[t]=r,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(n))}setProfanity(e){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[e])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(e.ForceDictationPropertyName,"true")}clone(){const e=new i(this.tokenCredential);return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[e])}}return rR.SpeechConfigImpl=i,rR}();Object.defineProperty(e,"SpeechConfig",{enumerable:!0,get:function(){return E.SpeechConfig}}),Object.defineProperty(e,"SpeechConfigImpl",{enumerable:!0,get:function(){return E.SpeechConfigImpl}});var T=function(){if(nR)return iR;nR=1,Object.defineProperty(iR,"__esModule",{value:!0}),iR.SpeechTranslationConfigImpl=iR.SpeechTranslationConfig=void 0;const e=NO(),t=dN,r=g_();let n=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(e,n){t.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(n,"region");const s=new i;return s.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,e),s.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,n),s}static fromAuthorizationToken(e,n){t.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(n,"region");const s=new i;return s.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,e),s.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,n),s}static fromHost(e,n){t.Contracts.throwIfNull(e,"hostName");const s=new i;return s.setProperty(r.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==n&&s.setProperty(r.PropertyId.SpeechServiceConnection_Key,n),s}static fromEndpoint(e,n){t.Contracts.throwIfNull(e,"endpoint");const s="string"==typeof n&&n.trim().length>0,o="object"==typeof n&&null!==n&&"function"==typeof n.getToken,a="object"==typeof n&&null!==n&&"string"==typeof n.key;if(void 0!==n&&!s&&!o&&!a)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let l;return"string"==typeof n?(l=new i,l.setProperty(r.PropertyId.SpeechServiceConnection_Key,n)):"object"==typeof n&&"function"==typeof n.getToken?l=new i(n):"object"==typeof n&&"string"==typeof n.key?(l=new i,l.setProperty(r.PropertyId.SpeechServiceConnection_Key,n.key)):l=new i,l.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,e.href),l}};iR.SpeechTranslationConfig=n;class i extends n{constructor(e){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple,this.privTokenCredential=e}set authorizationToken(e){t.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){t.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(t){this.privSpeechProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[t])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){t.Contracts.throwIfNullOrWhitespace(e,"value");const n=this.targetLanguages;n.includes(e)||(n.push(e),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,n.join(",")))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(e){t.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(e,t,n,i){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],n),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],i)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(t,r){const n=JSON.parse(this.privSpeechProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));n[t]=r,this.privSpeechProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(n))}setProfanity(e){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(e.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[e])}}return iR.SpeechTranslationConfigImpl=i,iR}();Object.defineProperty(e,"SpeechTranslationConfig",{enumerable:!0,get:function(){return T.SpeechTranslationConfig}}),Object.defineProperty(e,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return T.SpeechTranslationConfigImpl}});var N=aR();Object.defineProperty(e,"PropertyCollection",{enumerable:!0,get:function(){return N.PropertyCollection}});var P=lR;Object.defineProperty(e,"PropertyId",{enumerable:!0,get:function(){return P.PropertyId}});var R=function(){if(cR)return uR;cR=1,Object.defineProperty(uR,"__esModule",{value:!0}),uR.Recognizer=void 0;const e=NO(),t=qT(),r=dN,n=g_();return uR.Recognizer=class i{constructor(e,t,r,i){this.audioConfig=void 0!==e?e:n.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=r,this.tokenCredential=i,this.implCommonRecognizerSetup()}close(e,n){r.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),e,n)}get internalData(){return this.privReco}dispose(e){return Ke(this,null,function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))})}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(t){e.ServiceRecognizerBase.telemetryDataEnabled=t}implCommonRecognizerSetup(){let t="undefined"!=typeof window?"Browser":"Node",r="unknown",n="unknown";"undefined"!=typeof navigator&&(t=t+"/"+navigator.platform,r=navigator.userAgent,n=navigator.appVersion);const s=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(t,r,n))));this.privReco=this.createServiceRecognizer(i.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,s)}recognizeOnceAsyncImpl(e){return Ke(this,null,function*(){r.Contracts.throwIfDisposed(this.privDisposed);const n=new t.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(e,n.resolve,n.reject);const i=yield n.promise;return yield this.implRecognizerStop(),i})}startContinuousRecognitionAsyncImpl(e){return Ke(this,null,function*(){r.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)})}stopContinuousRecognitionAsyncImpl(){return Ke(this,null,function*(){r.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()})}implRecognizerStop(){return Ke(this,null,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}static getAuth(t,r){const i=t.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0);return i&&""!==i?new e.CognitiveSubscriptionKeyAuthentication(i):r?new e.CognitiveTokenAuthentication(()=>Ke(this,null,function*(){var e;try{const t=yield r.getToken("https://cognitiveservices.azure.com/.default");return null!=(e=null==t?void 0:t.token)?e:""}catch(Pie){throw Pie}}),()=>Ke(this,null,function*(){var e;try{const t=yield r.getToken("https://cognitiveservices.azure.com/.default");return null!=(e=null==t?void 0:t.token)?e:""}catch(Pie){throw Pie}})):new e.CognitiveTokenAuthentication(()=>{const e=t.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)},()=>{const e=t.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)})}},uR}();Object.defineProperty(e,"Recognizer",{enumerable:!0,get:function(){return R.Recognizer}});var I=function(){if(dR)return pR;dR=1,Object.defineProperty(pR,"__esModule",{value:!0}),pR.SpeechRecognizer=void 0;const e=NO(),t=hR,r=qT(),n=dN,i=g_();let s=class s extends i.Recognizer{constructor(t,r){const s=t;n.Contracts.throwIfNull(s,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(s.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(r,s.properties,new e.SpeechConnectionFactory,t.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(e,t,r){const n=e;return t.properties.mergeTo(n.properties),new s(e,r)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){n.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,n){(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),e,n)}startContinuousRecognitionAsync(n,i){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(void 0===this.properties.getProperty(e.ForceDictationPropertyName,void 0)?t.RecognitionMode.Conversation:t.RecognitionMode.Dictation),n,i)}stopContinuousRecognitionAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,r){n.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,t){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}dispose(e){return Ke(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield Ge(s.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(t,r,n,i){const s=n;return new e.SpeechServiceRecognizer(t,r,s,i,this)}};return pR.SpeechRecognizer=s,pR}();Object.defineProperty(e,"SpeechRecognizer",{enumerable:!0,get:function(){return I.SpeechRecognizer}});var k=function(){if(fR)return mR;fR=1,Object.defineProperty(mR,"__esModule",{value:!0}),mR.IntentRecognizer=void 0;const e=NO(),t=hR,r=qT(),n=dN,i=g_();let s=class s extends i.Recognizer{constructor(t,r){n.Contracts.throwIfNullOrUndefined(t,"speechConfig");const s=t;n.Contracts.throwIfNullOrUndefined(s,"speechConfig"),super(r,s.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=s.properties,n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,i){if(n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=e.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),e,i)}startContinuousRecognitionAsync(e,n){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=e.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),e,n)}stopContinuousRecognitionAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,r){n.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){if(e)try{e()}catch(Nie){t&&t(Nie)}}addIntent(e,t){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.Contracts.throwIfNullOrWhitespace(t,"intentId"),n.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])}addIntentWithLanguageModel(t,r,i){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.Contracts.throwIfNullOrWhitespace(t,"intentId"),n.Contracts.throwIfNull(r,"model");const s=r;n.Contracts.throwIfNullOrWhitespace(s.appId,"model.appId"),this.privAddedLmIntents[t]=new e.AddedLmIntent(s,i)}addAllIntents(t,r){n.Contracts.throwIfNull(t,"model");const i=t;n.Contracts.throwIfNullOrWhitespace(i.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(i,r)}close(e,t){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(t,r,n,i){const s=n;return new e.IntentServiceRecognizer(t,r,s,i,this)}dispose(e){return Ke(this,null,function*(){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,yield Ge(s.prototype,this,"dispose").call(this,e))})}buildSpeechContext(){let e,t,r;const n=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,r=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const i of Object.keys(this.privAddedLmIntents)){const s=this.privAddedLmIntents[i];if(void 0===e)e=s.modelImpl.appId;else if(e!==s.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=s.modelImpl.region;else if(t!==s.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===r)r=s.modelImpl.subscriptionKey;else if(r!==s.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const o="luis/"+e+"-PRODUCTION#"+i;n.push(o)}return{Intent:{id:e,key:void 0===r?this.privProperties.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_Key]):r,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?n:["luis/"+e+"-PRODUCTION"]}}};return mR.IntentRecognizer=s,mR}();Object.defineProperty(e,"IntentRecognizer",{enumerable:!0,get:function(){return k.IntentRecognizer}});var _=vR;Object.defineProperty(e,"VoiceProfileType",{enumerable:!0,get:function(){return _.VoiceProfileType}});var A=function(){if(bR)return xR;bR=1,Object.defineProperty(xR,"__esModule",{value:!0}),xR.TranslationRecognizer=void 0;const e=NO(),t=hR,r=qT(),n=ER(),i=dN,s=g_();let o=class o extends s.Recognizer{constructor(t,r,n){const o=t;i.Contracts.throwIfNull(o,"speechConfig"),super(r,o.properties,n||new e.TranslationConnectionFactory,t.tokenCredential),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice),s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationVoice]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages),s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationToLanguages]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(t,r,n){const i=t;return r.properties.mergeTo(i.properties),r.properties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===e.AutoDetectSourceLanguagesOpenRangeOptionName&&i.properties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new o(t,n)}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,n){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),e,n)}startContinuousRecognitionAsync(e,n){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),e,n)}stopContinuousRecognitionAsync(e,t){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,t)}removeTargetLanguage(e){if(i.Contracts.throwIfNullOrUndefined(e,"language to be removed"),void 0!==this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){const t=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),r=t.indexOf(e);r>-1&&(t.splice(r,1),this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}}addTargetLanguage(e){i.Contracts.throwIfNullOrUndefined(e,"language to be added");let t=[];void 0!==this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(t=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),t.includes(e)||(t.push(e),this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))):(this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)}close(e,t){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),e,t)}onConnection(){}dispose(e){return Ke(this,null,function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield Ge(o.prototype,this,"dispose").call(this,e)))})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(t,r,n,i){const s=n;return new e.TranslationServiceRecognizer(t,r,s,i,this)}updateLanguages(e){const t=n.Connection.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}};return xR.TranslationRecognizer=o,xR}();Object.defineProperty(e,"TranslationRecognizer",{enumerable:!0,get:function(){return A.TranslationRecognizer}});var j=function(){if(TR)return NR;TR=1,Object.defineProperty(NR,"__esModule",{value:!0}),NR.Translations=void 0;const e=g_();return NR.Translations=class{constructor(){this.privMap=new e.PropertyCollection}get languages(){return this.privMap.keys}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}},NR}();Object.defineProperty(e,"Translations",{enumerable:!0,get:function(){return j.Translations}});var O=PR;Object.defineProperty(e,"NoMatchReason",{enumerable:!0,get:function(){return O.NoMatchReason}});var D=function(){if(RR)return IR;RR=1,Object.defineProperty(IR,"__esModule",{value:!0}),IR.NoMatchDetails=void 0;const e=NO(),t=g_();return IR.NoMatchDetails=class r{constructor(e){this.privReason=e}static fromResult(n){const i=e.SimpleSpeechPhrase.fromJSON(n.json,0);let s=t.NoMatchReason.NotRecognized;switch(i.RecognitionStatus){case e.RecognitionStatus.BabbleTimeout:s=t.NoMatchReason.InitialBabbleTimeout;break;case e.RecognitionStatus.InitialSilenceTimeout:s=t.NoMatchReason.InitialSilenceTimeout;break;default:s=t.NoMatchReason.NotRecognized}return new r(s)}get reason(){return this.privReason}},IR}();Object.defineProperty(e,"NoMatchDetails",{enumerable:!0,get:function(){return D.NoMatchDetails}});var M=kR;Object.defineProperty(e,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return M.TranslationRecognitionCanceledEventArgs}});var L=function(){if(_R)return AR;_R=1,Object.defineProperty(AR,"__esModule",{value:!0}),AR.IntentRecognitionCanceledEventArgs=void 0;const e=g_();let t=class extends e.IntentRecognitionEventArgs{constructor(e,t,r,n,i,s){super(n,i,s),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return AR.IntentRecognitionCanceledEventArgs=t,AR}();Object.defineProperty(e,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return L.IntentRecognitionCanceledEventArgs}});var z=jR;Object.defineProperty(e,"CancellationDetailsBase",{enumerable:!0,get:function(){return z.CancellationDetailsBase}});var F=function(){if(OR)return DR;OR=1,Object.defineProperty(DR,"__esModule",{value:!0}),DR.CancellationDetails=void 0;const e=NO(),t=jR,r=g_();let n=class n extends t.CancellationDetailsBase{constructor(e,t,r){super(e,t,r)}static fromResult(t){let i=r.CancellationReason.Error,s=r.CancellationErrorCode.NoError;if(t instanceof r.RecognitionResult&&t.json){const r=e.SimpleSpeechPhrase.fromJSON(t.json,0);i=e.EnumTranslation.implTranslateCancelResult(r.RecognitionStatus)}return t.properties&&(s=r.CancellationErrorCode[t.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new n(i,t.errorDetails||e.EnumTranslation.implTranslateErrorDetails(s),s)}};return DR.CancellationDetails=n,DR}();Object.defineProperty(e,"CancellationDetails",{enumerable:!0,get:function(){return F.CancellationDetails}});var B=MR;Object.defineProperty(e,"CancellationErrorCode",{enumerable:!0,get:function(){return B.CancellationErrorCode}});var U=function(){if(LR)return zR;LR=1,Object.defineProperty(zR,"__esModule",{value:!0}),zR.ConnectionEventArgs=void 0;const e=g_();let t=class extends e.SessionEventArgs{};return zR.ConnectionEventArgs=t,zR}();Object.defineProperty(e,"ConnectionEventArgs",{enumerable:!0,get:function(){return U.ConnectionEventArgs}});var W=function(){if(FR)return BR;FR=1,Object.defineProperty(BR,"__esModule",{value:!0}),BR.ServiceEventArgs=void 0;const e=g_();let t=class extends e.SessionEventArgs{constructor(e,t,r){super(r),this.privJsonResult=e,this.privEventName=t}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return BR.ServiceEventArgs=t,BR}();Object.defineProperty(e,"ServiceEventArgs",{enumerable:!0,get:function(){return W.ServiceEventArgs}});var H=ER();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return H.Connection}});var $=UR;Object.defineProperty(e,"PhraseListGrammar",{enumerable:!0,get:function(){return $.PhraseListGrammar}});var V=qR();Object.defineProperty(e,"DialogServiceConfig",{enumerable:!0,get:function(){return V.DialogServiceConfig}});var q=function(){if(GR)return KR;GR=1,Object.defineProperty(KR,"__esModule",{value:!0}),KR.BotFrameworkConfig=void 0;const e=dN,t=qR(),r=g_();let n=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(n,i,s){e.Contracts.throwIfNullOrWhitespace(n,"subscription"),e.Contracts.throwIfNullOrWhitespace(i,"region");const o=new t.DialogServiceConfigImpl;return o.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(r.PropertyId.SpeechServiceConnection_Key,n),o.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),s&&o.setProperty(r.PropertyId.Conversation_ApplicationId,s),o}static fromAuthorizationToken(n,i,s){e.Contracts.throwIfNullOrWhitespace(n,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(i,"region");const o=new t.DialogServiceConfigImpl;return o.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,n),o.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),s&&o.setProperty(r.PropertyId.Conversation_ApplicationId,s),o}static fromHost(n,i,s){e.Contracts.throwIfNullOrUndefined(n,"host");const o=n instanceof URL?n:new URL(`wss://${n}.convai.speech.azure.us`);e.Contracts.throwIfNullOrUndefined(o,"resolvedHost");const a=new t.DialogServiceConfigImpl;return a.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),a.setProperty(r.PropertyId.SpeechServiceConnection_Host,o.toString()),void 0!==i&&a.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),a}static fromEndpoint(n,i){e.Contracts.throwIfNull(n,"endpoint");const s=new t.DialogServiceConfigImpl;return s.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,n.toString()),void 0!==i&&s.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),s}};return KR.BotFrameworkConfig=n,KR}();Object.defineProperty(e,"BotFrameworkConfig",{enumerable:!0,get:function(){return q.BotFrameworkConfig}});var G=function(){if(JR)return YR;JR=1,Object.defineProperty(YR,"__esModule",{value:!0}),YR.CustomCommandsConfig=void 0;const e=dN,t=qR(),r=g_();let n=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(n,i,s){e.Contracts.throwIfNullOrWhitespace(n,"applicationId"),e.Contracts.throwIfNullOrWhitespace(i,"subscription"),e.Contracts.throwIfNullOrWhitespace(s,"region");const o=new t.DialogServiceConfigImpl;return o.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),o.setProperty(r.PropertyId.Conversation_ApplicationId,n),o.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),o.setProperty(r.PropertyId.SpeechServiceConnection_Region,s),o}static fromAuthorizationToken(n,i,s){e.Contracts.throwIfNullOrWhitespace(n,"applicationId"),e.Contracts.throwIfNullOrWhitespace(i,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(s,"region");const o=new t.DialogServiceConfigImpl;return o.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),o.setProperty(r.PropertyId.Conversation_ApplicationId,n),o.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,i),o.setProperty(r.PropertyId.SpeechServiceConnection_Region,s),o}set applicationId(t){e.Contracts.throwIfNullOrWhitespace(t,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,t)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return YR.CustomCommandsConfig=n,YR}();Object.defineProperty(e,"CustomCommandsConfig",{enumerable:!0,get:function(){return G.CustomCommandsConfig}});var K=oI();Object.defineProperty(e,"DialogServiceConnector",{enumerable:!0,get:function(){return K.DialogServiceConnector}});var J=aI;Object.defineProperty(e,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return J.ActivityReceivedEventArgs}});var Y=lI;Object.defineProperty(e,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Y.TurnStatusReceivedEventArgs}});var Z=pI;Object.defineProperty(e,"ServicePropertyChannel",{enumerable:!0,get:function(){return Z.ServicePropertyChannel}});var Q=hI;Object.defineProperty(e,"ProfanityOption",{enumerable:!0,get:function(){return Q.ProfanityOption}});var X=function(){if(fI)return mI;fI=1,Object.defineProperty(mI,"__esModule",{value:!0}),mI.BaseAudioPlayer=void 0;const e=WE,t=g_(),r=SN;return mI.BaseAudioPlayer=class{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=t.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}playAudioSample(e,t,r){try{this.ensureInitializedContext();const r=this.formatAudioData(e),n=new Float32Array(this.samples.length+r.length);n.set(this.samples,0),n.set(r,this.samples.length),this.samples=n,t&&t()}catch(Nie){r&&r(Nie)}}stopAudio(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{e&&e()},e=>{t&&t(e)}),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(null===this.audioContext){this.createAudioContext();const e=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},e)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(t){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(t),128);case 16:return this.formatArrayBuffer(new Int16Array(t),32768);case 32:return this.formatArrayBuffer(new Int32Array(t),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,t){const r=new Float32Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]/t;return r}updateAudioBuffer(){if(0===this.samples.length)return;const e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),r=this.samples.length/e,n=this.audioContext.createBuffer(e,r,this.audioFormat.samplesPerSec);for(let i=0;i<e;i++){let t=i;const r=n.getChannelData(i);for(let n=0;n<this.samples.length;n++,t+=e)r[n]=this.samples[t]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=n,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=n.duration,this.samples=new Float32Array}playAudio(e){return Ke(this,null,function*(){null===this.audioContext&&this.createAudioContext();const t=this.audioContext.createBufferSource(),r=this.audioContext.destination;yield this.audioContext.decodeAudioData(e,e=>{t.buffer=e,t.connect(r),t.start(0)})})}},mI}();Object.defineProperty(e,"BaseAudioPlayer",{enumerable:!0,get:function(){return X.BaseAudioPlayer}});var ee=vI;Object.defineProperty(e,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return ee.ConnectionMessageEventArgs}});var te=CR();Object.defineProperty(e,"ConnectionMessage",{enumerable:!0,get:function(){return te.ConnectionMessage}});var re=gI;Object.defineProperty(e,"VoiceProfile",{enumerable:!0,get:function(){return re.VoiceProfile}});var ne=function(){if(yI)return bI;yI=1,Object.defineProperty(bI,"__esModule",{value:!0}),bI.VoiceProfileEnrollmentCancellationDetails=bI.VoiceProfileEnrollmentResult=void 0;const e=NO(),t=g_();bI.VoiceProfileEnrollmentResult=class r{constructor(r,n,i){this.privReason=r,this.privProperties=new t.PropertyCollection,this.privReason!==t.ResultReason.Canceled?n&&(this.privDetails=JSON.parse(n),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=t.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=i,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){const n=[];for(const i of e.value){const e="enrolling"===i.enrollmentStatus.toLowerCase()?t.ResultReason.EnrollingVoiceProfile:"enrolled"===i.enrollmentStatus.toLowerCase()?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,s=new r(e,null,null);s.privDetails=this.getIdentificationDetails(i),n.push(s)}return n}static FromVerificationProfileList(e){const n=[];for(const i of e.value){const e="enrolling"===i.enrollmentStatus.toLowerCase()?t.ResultReason.EnrollingVoiceProfile:"enrolled"===i.enrollmentStatus.toLowerCase()?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,s=new r(e,null,null);s.privDetails=this.getVerificationDetails(i),n.push(s)}return n}static getIdentificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}};class r extends t.CancellationDetailsBase{constructor(e,t,r){super(e,t,r)}static fromResult(n){const i=t.CancellationReason.Error;let s=t.CancellationErrorCode.NoError;return n.properties&&(s=t.CancellationErrorCode[n.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new r(i,n.errorDetails,s)}}return bI.VoiceProfileEnrollmentCancellationDetails=r,bI}();Object.defineProperty(e,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return ne.VoiceProfileEnrollmentResult}}),Object.defineProperty(e,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return ne.VoiceProfileEnrollmentCancellationDetails}});var ie=function(){if(xI)return wI;xI=1,Object.defineProperty(wI,"__esModule",{value:!0}),wI.VoiceProfileCancellationDetails=wI.VoiceProfileResult=void 0;const e=NO(),t=dN,r=g_();wI.VoiceProfileResult=class{constructor(n,i){this.privReason=n,this.privProperties=new r.PropertyCollection,n===r.ResultReason.Canceled&&(t.Contracts.throwIfNullOrUndefined(i,"statusText"),this.privErrorDetails=i,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};class n extends r.CancellationDetailsBase{constructor(e,t,r){super(e,t,r)}static fromResult(t){const i=r.CancellationReason.Error;let s=r.CancellationErrorCode.NoError;return t.properties&&(s=r.CancellationErrorCode[t.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new n(i,t.errorDetails,s)}}return wI.VoiceProfileCancellationDetails=n,wI}();Object.defineProperty(e,"VoiceProfileResult",{enumerable:!0,get:function(){return ie.VoiceProfileResult}}),Object.defineProperty(e,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return ie.VoiceProfileCancellationDetails}});var se=function(){if(SI)return CI;SI=1,Object.defineProperty(CI,"__esModule",{value:!0}),CI.VoiceProfilePhraseResult=void 0;const e=dN,t=g_();let r=class extends t.VoiceProfileResult{constructor(t,r,n,i){super(t,r),this.privPhrases=[],e.Contracts.throwIfNullOrUndefined(i,"phrase array"),this.privType=n,i&&i[0]&&(this.privPhrases=i)}get phrases(){return this.privPhrases}get type(){return this.privType}};return CI.VoiceProfilePhraseResult=r,CI}();Object.defineProperty(e,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return se.VoiceProfilePhraseResult}});var oe=function(){if(EI)return TI;EI=1,Object.defineProperty(TI,"__esModule",{value:!0}),TI.VoiceProfileClient=void 0;const e=NO(),t=yP(),r=dN,n=g_();let i=class i extends n.Recognizer{constructor(i){r.Contracts.throwIfNullOrUndefined(i,"speechConfig");const s=i;r.Contracts.throwIfNull(s,"speechConfig"),super(t.AudioConfig.fromStreamInput(n.AudioInputStream.createPushStream()),s.properties,new e.VoiceProfileConnectionFactory),this.privProperties=s.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,e)}createProfileAsync(e,t){return Ke(this,null,function*(){const r=yield this.privVoiceAdapter.createProfile(e,t);return new n.VoiceProfile(r[0],e)})}retrieveEnrollmentResultAsync(e){return Ke(this,null,function*(){return this.privVoiceAdapter.retrieveEnrollmentResult(e)})}getAllProfilesAsync(e){return Ke(this,null,function*(){return this.privVoiceAdapter.getAllProfiles(e)})}getActivationPhrasesAsync(e,t){return Ke(this,null,function*(){return this.privVoiceAdapter.getActivationPhrases(e,t)})}enrollProfileAsync(e,t){return Ke(this,null,function*(){const n=t;return r.Contracts.throwIfNullOrUndefined(n,"audioConfig"),this.audioConfig=t,this.privVoiceAdapter.SpeakerAudioSource=n,this.privVoiceAdapter.enrollProfile(e)})}deleteProfileAsync(e){return Ke(this,null,function*(){return this.privVoiceAdapter.deleteProfile(e)})}resetProfileAsync(e){return Ke(this,null,function*(){return this.privVoiceAdapter.resetProfile(e)})}close(){return Ke(this,null,function*(){yield this.dispose(!0)})}createServiceRecognizer(t,r,n,i){const s=n;return new e.VoiceServiceRecognizer(t,r,s,i,this)}dispose(e){return Ke(this,null,function*(){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,e&&(yield Ge(i.prototype,this,"dispose").call(this,e)))})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.properties)}getResult(e,t){return new n.VoiceProfileResult(e.ok?t:n.ResultReason.Canceled,e.statusText)}};return TI.VoiceProfileClient=i,TI}();Object.defineProperty(e,"VoiceProfileClient",{enumerable:!0,get:function(){return oe.VoiceProfileClient}});var ae=function(){if(NI)return PI;NI=1,Object.defineProperty(PI,"__esModule",{value:!0}),PI.SpeakerRecognizer=void 0;const e=NO(),t=dN,r=g_();let n=class n extends r.Recognizer{constructor(r,n){t.Contracts.throwIfNullOrUndefined(r,"speechConfig");const i=r;t.Contracts.throwIfNullOrUndefined(i,"speechConfig"),super(n,i.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=n,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=i.properties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){t.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e){return Ke(this,null,function*(){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(e)})}close(){return Ke(this,null,function*(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.dispose(!0)})}recognizeSpeakerOnceAsyncImpl(e){return Ke(this,null,function*(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.implRecognizerStop();const r=yield this.privReco.recognizeSpeaker(e);return yield this.implRecognizerStop(),r})}implRecognizerStop(){return Ke(this,null,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(t,r,n,i){const s=n;return new e.SpeakerServiceRecognizer(t,r,s,i,this)}dispose(e){return Ke(this,null,function*(){this.privDisposedSpeakerRecognizer||e&&(this.privDisposedSpeakerRecognizer=!0,yield Ge(n.prototype,this,"dispose").call(this,e))})}};return PI.SpeakerRecognizer=n,PI}();Object.defineProperty(e,"SpeakerRecognizer",{enumerable:!0,get:function(){return ae.SpeakerRecognizer}});var le=function(){if(RI)return II;RI=1,Object.defineProperty(II,"__esModule",{value:!0}),II.SpeakerIdentificationModel=void 0;const e=dN,t=g_();return II.SpeakerIdentificationModel=class r{constructor(r){if(this.privVoiceProfiles=[],this.privProfileIds=[],e.Contracts.throwIfNullOrUndefined(r,"VoiceProfiles"),0===r.length)throw new Error("Empty Voice Profiles array");for(const e of r){if(e.profileType!==t.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+e.profileId);this.privVoiceProfiles.push(e),this.privProfileIds.push(e.profileId)}}static fromProfiles(e){return new r(e)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}},II}();Object.defineProperty(e,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return le.SpeakerIdentificationModel}});var ce=function(){if(kI)return _I;kI=1,Object.defineProperty(_I,"__esModule",{value:!0}),_I.SpeakerVerificationModel=void 0;const e=dN,t=g_();return _I.SpeakerVerificationModel=class r{constructor(r){if(e.Contracts.throwIfNullOrUndefined(r,"VoiceProfile"),r.profileType===t.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=r}static fromProfile(e){return new r(e)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===t.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}},_I}();Object.defineProperty(e,"SpeakerVerificationModel",{enumerable:!0,get:function(){return ce.SpeakerVerificationModel}});var ue=function(){if(AI)return jI;AI=1,Object.defineProperty(jI,"__esModule",{value:!0}),jI.AutoDetectSourceLanguageConfig=void 0;const e=NO(),t=dN,r=g_(),n=OI;return jI.AutoDetectSourceLanguageConfig=class i{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=n.LanguageIdMode.AtStart}static fromOpenRange(){const t=new i;return t.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.AutoDetectSourceLanguagesOpenRangeOptionName),t.properties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),t}static fromLanguages(e){t.Contracts.throwIfArrayEmptyOrWhitespace(e,"languages");const n=new i;return n.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),n}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const t=new i,n=[];return e.forEach(e=>{if(n.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){const n=e.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(n,e.endpointId)}}),t.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,n.join()),t}get properties(){return this.privProperties}set mode(e){e===n.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e}},jI}();Object.defineProperty(e,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return ue.AutoDetectSourceLanguageConfig}});var de=DI;Object.defineProperty(e,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return de.AutoDetectSourceLanguageResult}});var pe=zI;Object.defineProperty(e,"SourceLanguageConfig",{enumerable:!0,get:function(){return pe.SourceLanguageConfig}});var he=(UI||(UI=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResult=e.SpeakerRecognitionResultType=void 0;const t=NO(),r=g_();var n,i;(i=n=e.SpeakerRecognitionResultType||(e.SpeakerRecognitionResultType={}))[i.Verify=0]="Verify",i[i.Identify=1]="Identify",e.SpeakerRecognitionResult=class{constructor(e,i=r.ResultReason.RecognizedSpeaker,s=r.CancellationErrorCode.NoError,o=""){this.privProperties=new r.PropertyCollection;const a="TextIndependentIdentification"===e.scenario?n.Identify:n.Verify;this.privReason=i,this.privReason!==r.ResultReason.Canceled?a===n.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,"accept"!==e.verificationResult.recognitionResult.toLowerCase()&&(this.privReason=r.ResultReason.NoMatch),void 0!==e.verificationResult.profileId&&""!==e.verificationResult.profileId&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=o,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[s])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};class s extends r.CancellationDetailsBase{constructor(e,t,r){super(e,t,r)}static fromResult(e){const n=r.CancellationReason.Error;let i=r.CancellationErrorCode.NoError;return e.properties&&(i=r.CancellationErrorCode[e.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new s(n,e.errorDetails,i)}}e.SpeakerRecognitionCancellationDetails=s}(WI)),WI);Object.defineProperty(e,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return he.SpeakerRecognitionResult}}),Object.defineProperty(e,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return he.SpeakerRecognitionResultType}}),Object.defineProperty(e,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return he.SpeakerRecognitionCancellationDetails}});var fe=Ek();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return fe.Conversation}}),Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return fe.ConversationExpirationEventArgs}}),Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return fe.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return fe.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return fe.ConversationTranslationEventArgs}}),Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return fe.ConversationTranslationResult}}),Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return fe.ConversationTranslator}}),Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return fe.ConversationTranscriber}}),Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return fe.ConversationTranscriptionResult}}),Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return fe.Meeting}}),Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return fe.MeetingTranscriber}}),Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return fe.Participant}}),Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return fe.ParticipantChangedReason}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return fe.User}});var me=Pk();Object.defineProperty(e,"Synthesizer",{enumerable:!0,get:function(){return me.Synthesizer}});var ve=sP;Object.defineProperty(e,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return ve.SpeechSynthesisOutputFormat}});var ge=function(){if(Rk)return Ik;Rk=1,Object.defineProperty(Ik,"__esModule",{value:!0}),Ik.SpeechSynthesizer=void 0;const e=NO(),t=qT(),r=KN,n=iP,i=nP,s=dN,o=g_(),a=Pk();let l=class l extends o.Synthesizer{constructor(t,r){super(t),null!==r&&(this.audioConfig=void 0===r?"undefined"==typeof window?void 0:o.AudioConfig.fromDefaultSpeakerOutput():r),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(e,t,r){const n=e;return t.properties.mergeTo(n.properties),new l(e,r)}speakTextAsync(e,t,r,n){this.speakImpl(e,!1,t,r,n)}speakSsmlAsync(e,t,r,n){this.speakImpl(e,!0,t,r,n)}getVoicesAsync(e=""){return Ke(this,null,function*(){return this.getVoices(e)})}close(e,r){s.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}get internalData(){return this.privAdapter}createSynthesisAdapter(t,r,n){return new e.SpeechSynthesisAdapter(t,r,n,this,this.audioConfig)}createRestSynthesisAdapter(t,r){return new e.SynthesisRestAdapter(r,t)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(o.SpeechSynthesisOutputFormat[this.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,n,l,c,u){try{s.Contracts.throwIfDisposed(this.privDisposed);const d=(0,t.createNoDashGuid)();let p;p=u instanceof o.PushAudioOutputStreamCallback?new i.PushAudioOutputStreamImpl(u):u instanceof o.PullAudioOutputStream?u:void 0!==u?new r.AudioFileWriter(u):void 0,this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(d,e,n,e=>{if(this.privSynthesizing=!1,l)try{l(e)}catch(t){c&&c(t)}l=void 0,this.adapterSpeak().catch(()=>{})},e=>{c&&c(e)},p)),this.adapterSpeak().catch(()=>{})}catch(d){if(c)if(d instanceof Error){const e=d;c(e.name+": "+e.message)}else c(d);this.dispose(!0).catch(()=>{})}}getVoices(e){return Ke(this,null,function*(){const r=(0,t.createNoDashGuid)(),n=yield this.privRestAdapter.getVoicesList(r);if(n.ok&&Array.isArray(n.json)){let t=n.json;return e&&e.length>0&&(t=t.filter(t=>!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase())),new o.SynthesisVoicesResult(r,t,void 0)}return new o.SynthesisVoicesResult(r,void 0,`Error: ${n.status}: ${n.statusText}`)})}};return Ik.SpeechSynthesizer=l,Ik}();Object.defineProperty(e,"SpeechSynthesizer",{enumerable:!0,get:function(){return ge.SpeechSynthesizer}});var ye=kk;Object.defineProperty(e,"SynthesisResult",{enumerable:!0,get:function(){return ye.SynthesisResult}});var be=function(){if(_k)return Ak;_k=1,Object.defineProperty(Ak,"__esModule",{value:!0}),Ak.SpeechSynthesisResult=void 0;const e=g_();let t=class extends e.SynthesisResult{constructor(e,t,r,n,i,s){super(e,t,n,i),this.privAudioData=r,this.privAudioDuration=s}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return Ak.SpeechSynthesisResult=t,Ak}();Object.defineProperty(e,"SpeechSynthesisResult",{enumerable:!0,get:function(){return be.SpeechSynthesisResult}});var xe=jk;Object.defineProperty(e,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return xe.SpeechSynthesisEventArgs}});var we=Ok;Object.defineProperty(e,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return we.SpeechSynthesisWordBoundaryEventArgs}});var Se=Dk;Object.defineProperty(e,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Se.SpeechSynthesisBookmarkEventArgs}});var Ce=Mk;Object.defineProperty(e,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return Ce.SpeechSynthesisVisemeEventArgs}});var Ee=Lk;Object.defineProperty(e,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Ee.SpeechSynthesisBoundaryType}});var Te=function(){if(zk)return Fk;zk=1,Object.defineProperty(Fk,"__esModule",{value:!0}),Fk.SynthesisVoicesResult=void 0;const e=g_();let t=class extends e.SynthesisResult{constructor(t,r,n){if(Array.isArray(r)){super(t,e.ResultReason.VoicesListRetrieved,void 0,new e.PropertyCollection),this.privVoices=[];for(const t of r)this.privVoices.push(new e.VoiceInfo(t))}else super(t,e.ResultReason.Canceled,n||"Error information unavailable",new e.PropertyCollection)}get voices(){return this.privVoices}};return Fk.SynthesisVoicesResult=t,Fk}();Object.defineProperty(e,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Te.SynthesisVoicesResult}});var Ne=Bk;Object.defineProperty(e,"SynthesisVoiceGender",{enumerable:!0,get:function(){return Ne.SynthesisVoiceGender}}),Object.defineProperty(e,"SynthesisVoiceType",{enumerable:!0,get:function(){return Ne.SynthesisVoiceType}}),Object.defineProperty(e,"VoiceInfo",{enumerable:!0,get:function(){return Ne.VoiceInfo}});var Pe=Uk;Object.defineProperty(e,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Pe.SpeakerAudioDestination}});var Re=function(){if(qk)return Gk;qk=1,Object.defineProperty(Gk,"__esModule",{value:!0}),Gk.ConversationTranscriptionCanceledEventArgs=void 0;const e=VP();let t=class extends e.CancellationEventArgsBase{};return Gk.ConversationTranscriptionCanceledEventArgs=t,Gk}();Object.defineProperty(e,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Re.ConversationTranscriptionCanceledEventArgs}});var Ie=function(){if(Kk)return Jk;Kk=1,Object.defineProperty(Jk,"__esModule",{value:!0}),Jk.MeetingTranscriptionCanceledEventArgs=void 0;const e=VP();let t=class extends e.CancellationEventArgsBase{};return Jk.MeetingTranscriptionCanceledEventArgs=t,Jk}();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Ie.MeetingTranscriptionCanceledEventArgs}});var ke=Yk;Object.defineProperty(e,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return ke.PronunciationAssessmentGradingSystem}});var _e=Zk;Object.defineProperty(e,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return _e.PronunciationAssessmentGranularity}});var Ae=function(){if(Qk)return Xk;Qk=1,Object.defineProperty(Xk,"__esModule",{value:!0}),Xk.PronunciationAssessmentConfig=void 0;const e=dN,t=g_();return Xk.PronunciationAssessmentConfig=class r{constructor(r,n=t.PronunciationAssessmentGradingSystem.FivePoint,i=t.PronunciationAssessmentGranularity.Phoneme,s=!1){e.Contracts.throwIfNullOrUndefined(r,"referenceText"),this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,r),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_GradingSystem,t.PronunciationAssessmentGradingSystem[n]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Granularity,t.PronunciationAssessmentGranularity[i]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,String(s))}static fromJSON(n){e.Contracts.throwIfNullOrUndefined(n,"json");const i=new r("");return i.privProperties=new t.PropertyCollection,i.properties.setProperty(t.PropertyId.PronunciationAssessment_Json,n),i}toJSON(){return this.updateJson(),this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Params)}applyTo(e){this.updateJson();const r=e.internalData;r.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(t.PropertyId.PronunciationAssessment_Params),r.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(r){e.Contracts.throwIfNullOrWhitespace(r,"referenceText"),this.properties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,r)}set phonemeAlphabet(t){e.Contracts.throwIfNullOrWhitespace(t,"phonemeAlphabet"),this.privPhonemeAlphabet=t}set enableMiscue(e){const r=e?"true":"false";this.properties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,r)}get enableMiscue(){return"true"===this.properties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}set enableProsodyAssessment(e){this.privEnableProsodyAssessment=e}get properties(){return this.privProperties}updateJson(){const e=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Json,"{}"),r=JSON.parse(e),n=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText);n&&(r.referenceText=n);const i=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_GradingSystem);i&&(r.gradingSystem=i);const s=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Granularity);s&&(r.granularity=s),this.privPhonemeAlphabet&&(r.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(r.nbestPhonemeCount=this.privNBestPhonemeCount),r.enableProsodyAssessment=this.privEnableProsodyAssessment,r.dimension="Comprehensive",this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue)&&(r.enableMiscue=this.enableMiscue),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Params,JSON.stringify(r))}},Xk}();Object.defineProperty(e,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return Ae.PronunciationAssessmentConfig}});var je=function(){if(e_)return t_;e_=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.PronunciationAssessmentResult=void 0;const e=dN,t=g_();return t_.PronunciationAssessmentResult=class r{constructor(t){const r=JSON.parse(t);e.Contracts.throwIfNullOrUndefined(r.NBest[0],"NBest"),this.privPronJson=r.NBest[0]}static fromResult(n){e.Contracts.throwIfNullOrUndefined(n,"result");const i=n.properties.getProperty(t.PropertyId.SpeechServiceResponse_JsonResult);return e.Contracts.throwIfNullOrUndefined(i,"json"),new r(i)}get detailResult(){return this.privPronJson}get accuracyScore(){var e;return null==(e=this.detailResult.PronunciationAssessment)?void 0:e.AccuracyScore}get pronunciationScore(){var e;return null==(e=this.detailResult.PronunciationAssessment)?void 0:e.PronScore}get completenessScore(){var e;return null==(e=this.detailResult.PronunciationAssessment)?void 0:e.CompletenessScore}get fluencyScore(){var e;return null==(e=this.detailResult.PronunciationAssessment)?void 0:e.FluencyScore}get prosodyScore(){var e;return null==(e=this.detailResult.PronunciationAssessment)?void 0:e.ProsodyScore}},t_}();Object.defineProperty(e,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return je.PronunciationAssessmentResult}});var Oe=OI;Object.defineProperty(e,"LanguageIdMode",{enumerable:!0,get:function(){return Oe.LanguageIdMode}});var De=function(){if(r_)return n_;r_=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.AvatarConfig=void 0;const e=dN,t=g_();return n_.AvatarConfig=class{constructor(r,n,i){this.privCustomized=!1,this.privUseBuiltInVoice=!1,e.Contracts.throwIfNullOrWhitespace(r,"character"),this.character=r,this.style=n,void 0===i&&(i=new t.AvatarVideoFormat),this.videoFormat=i}get customized(){return this.privCustomized}set customized(e){this.privCustomized=e}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(e){this.privUseBuiltInVoice=e}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(e){this.privBackgroundColor=e}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(e){this.privBackgroundImage=e}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(e){this.privRemoteIceServers=e}},n_}();Object.defineProperty(e,"AvatarConfig",{enumerable:!0,get:function(){return De.AvatarConfig}});var Me=i_;Object.defineProperty(e,"AvatarEventArgs",{enumerable:!0,get:function(){return Me.AvatarEventArgs}});var Le=function(){if(o_)return a_;o_=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.AvatarSynthesizer=void 0;const e=c_(),t=NO(),r=qT(),n=iP,i=g_(),s=dN,o=Pk();let a=class extends i.Synthesizer{constructor(t,r){super(t),s.Contracts.throwIfNullOrUndefined(r,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=r,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}startAvatarAsync(e){return Ke(this,null,function*(){s.Contracts.throwIfNullOrUndefined(e,"peerConnection"),this.privIceServers=e.getConfiguration().iceServers,s.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const t=new r.Deferred;e.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+e.iceGatheringState,r.EventType.Debug)),"complete"===e.iceGatheringState&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),t.resolve())},e.onicecandidate=e=>{e.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+e.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),t.resolve())},setTimeout(()=>{"complete"!==e.iceGatheringState&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),t.resolve())},2e3);const n=yield e.createOffer();yield e.setLocalDescription(n),yield t.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(e.localDescription));const o=yield this.speak("",!1);if(o.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(o.resultId,o.reason,o.errorDetails,o.properties);const a=atob(o.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),l=new RTCSessionDescription(JSON.parse(a));return yield e.setRemoteDescription(l),new i.SynthesisResult(o.resultId,o.reason,void 0,o.properties)})}speakTextAsync(e){return Ke(this,null,function*(){const t=yield this.speak(e,!1);return new i.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)})}speakSsmlAsync(e){return Ke(this,null,function*(){const t=yield this.speak(e,!0);return new i.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)})}stopSpeakingAsync(){return Ke(this,null,function*(){for(;this.synthesisRequestQueue.length()>0;)(yield this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()})}stopAvatarAsync(){return Ke(this,null,function*(){return s.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)})}close(){return Ke(this,null,function*(){if(!this.privDisposed)return this.dispose(!0)})}get iceServers(){return this.privIceServers}createSynthesisAdapter(e,r,n){return new t.AvatarSynthesisAdapter(e,r,n,this,this.privAvatarConfig)}createRestSynthesisAdapter(e,t){}createSynthesizerConfig(e){const t=super.createSynthesizerConfig(e);return t.avatarEnabled=!0,t}speak(e,t){return Ke(this,null,function*(){const n=(0,r.createNoDashGuid)(),i=new r.Deferred;return this.synthesisRequestQueue.enqueue(new o.SynthesisRequest(n,e,t,e=>{i.resolve(e),this.privSynthesizing=!1,this.adapterSpeak()},e=>{i.reject(e),this.privSynthesizing=!1})),this.adapterSpeak(),i.promise})}};return a_.AvatarSynthesizer=a,a_}();Object.defineProperty(e,"AvatarSynthesizer",{enumerable:!0,get:function(){return Le.AvatarSynthesizer}});var ze=u_;Object.defineProperty(e,"AvatarVideoFormat",{enumerable:!0,get:function(){return ze.AvatarVideoFormat}}),Object.defineProperty(e,"Coordinate",{enumerable:!0,get:function(){return ze.Coordinate}});var Fe=function(){if(d_)return p_;d_=1,Object.defineProperty(p_,"__esModule",{value:!0}),p_.AvatarWebRTCConnectionResult=void 0;const e=g_();let t=class extends e.SynthesisResult{constructor(e,t,r,n,i){super(t,r,n,i),this.privSDPAnswer=e}get SDPAnswer(){return this.privSDPAnswer}};return p_.AvatarWebRTCConnectionResult=t,p_}();Object.defineProperty(e,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return Fe.AvatarWebRTCConnectionResult}});var Be=function(){if(h_)return v_;h_=1,Object.defineProperty(v_,"__esModule",{value:!0}),v_.Diagnostics=void 0;const e=P_(),t=qT();let r=class{static SetLoggingLevel(r){this.privListener=new e.ConsoleLoggingListener(r),t.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(e){if("undefined"!=typeof window)throw new Error("File system logging not available in browser.");this.privListener&&(this.privListener.logPath=e)}static set onLogOutput(e){this.privListener&&(this.privListener.logCallback=e)}};return v_.Diagnostics=r,r.privListener=void 0,v_}();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return Be.Diagnostics}});var Ue=uN;Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return Ue.LogLevel}})}(qN)),qN}var y_={};const b_=new Set(["json","buffer","string"]);const x_=e=>(...t)=>{const r=new Set;let n,i,s,o="";return t.forEach(e=>{if("string"==typeof e)if(e.toUpperCase()===e){if(n){throw new Error(`Can't set method to ${e}, already set to ${n}.`)}n=e}else if(e.startsWith("http:")||e.startsWith("https:"))o=e;else{if(!b_.has(e))throw new Error(`Unknown encoding, ${e}`);i=e}else if("number"==typeof e)r.add(e);else{if("object"!=typeof e)throw new Error("Unknown type: "+typeof e);if(Array.isArray(e)||e instanceof Set)e.forEach(e=>r.add(e));else{if(s)throw new Error("Cannot set headers twice.");s=e}}}),n||(n="GET"),0===r.size&&r.add(200),e(r,n,i,s,o)};class w_ extends Error{constructor(e,...t){let r;super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,w_),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(const[n,i]of e.headers.entries())this.headers[n.toLowerCase()]=i}}var S_=x_((e,t,r,n,i)=>(s,o,...a)=>Ke(void 0,[s,o,...a],function*(s,o,a={}){s=i+(s||"");let l=new URL(s);if(n||(n={}),l.username&&(n.Authorization="Basic "+btoa(l.username+":"+l.password),l=new URL(l.protocol+"//"+l.host+l.pathname+l.search)),"https:"!==l.protocol&&"http:"!==l.protocol)throw new Error(`Unknown protocol, ${l.protocol}`);if(o)if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||"string"==typeof o);else{if("object"!=typeof o)throw new Error("Unknown body type.");o=JSON.stringify(o),n["Content-Type"]="application/json"}a=new Headers(Le(Le({},n||{}),a));const c=yield fetch(l,{method:t,headers:a,body:o});if(c.statusCode=c.status,!e.has(c.status))throw new w_(c);return"json"===r?c.json():"buffer"===r?c.arrayBuffer():"string"===r?c.text():c}));!function(e){var t=Ye&&Ye.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.RestMessageAdapter=e.RestRequestType=void 0;const r=t(S_),n=qT();var i,s;(s=i=e.RestRequestType||(e.RestRequestType={})).Get="GET",s.Post="POST",s.Delete="DELETE",s.File="file";e.RestMessageAdapter=class{constructor(e){if(!e)throw new n.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,t){let r="";try{const n=t.trim().split(/[\r\n]+/),i={};n.forEach(e=>{const t=e.split(": "),r=t.shift().toLowerCase(),n=t.join(": ");i[r]=n}),r=i[e.toLowerCase()]}catch(Nie){}return r}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t,s={},o=null){const a=new n.Deferred,l=e===i.File?"POST":e,c=(e,t={})=>{const r=e;return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:r.statusText?r.statusText:r.statusMessage}};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===i.Post&&o&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),(n=>{(0,r.default)(t,l,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(s)?"":`?${this.queryParams(s)}`,n).then(t=>Ke(this,null,function*(){if(e===i.Delete||204===t.statusCode)a.resolve(c(t));else try{const e=yield t.json();a.resolve(c(t,e))}catch(Nie){a.resolve(c(t))}})).catch(e=>{a.reject(e)})})(o),a.promise}queryParams(e={}){return Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}}}(y_);var C_,E_,T_={};Object.defineProperty(T_,"__esModule",{value:!0}),T_.RestConfigBase=void 0;class N_{static get requestOptions(){return N_.privDefaultRequestOptions}static get configParams(){return N_.privDefaultParams}static get restErrors(){return N_.privRestErrors}}function P_(){return C_||(C_=1,function(e){var t=Ye&&Ye.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Ye&&Ye.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(lN,e),r(bN,e),r((xN||(xN=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicAudioSource=e.AudioWorkletSourceURLPropertyName=void 0;const t=NO(),r=qT(),n=SN;e.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(e,t,n,s){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=n||(0,r.createNoDashGuid)(),this.privEvents=new r.EventSource,this.privMediaStream=s||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(n){if(n instanceof Error){const e=n;this.privInitializeDeferral.reject(e.name+": "+e.message)}else this.privInitializeDeferral.reject(n);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,r,n)=>{e.mediaDevices.getUserMedia(t).then(r).catch(n)}),t){const e=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},e=>{this.privMediaStream=e,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},e=>{const t=`Error occurred during microphone initialization: ${e}`;this.privInitializeDeferral.reject(t),this.onEvent(new r.AudioSourceErrorEvent(this.privId,t))})};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch(e=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${e}`)}):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new r.AudioSourceErrorEvent(e,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then(t=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>Ke(this,null,function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>t.read()}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){return Ke(this,null,function*(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()})}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(e=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:i.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(t,r){if(t!==e.AudioWorkletSourceURLPropertyName)throw new Error("Property '"+t+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(r)}getMicrophoneLabel(){const e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;const t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);const n=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(e=>{for(const r of e)if(r.deviceId===t){this.privMicrophoneLabel=r.label;break}n.resolve(this.privMicrophoneLabel)},()=>n.resolve(this.privMicrophoneLabel)),n.promise}listen(e){return Ke(this,null,function*(){yield this.turnOn();const t=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(n){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,e,n)),n}return t})}onEvent(e){this.privEvents.onEvent(e),r.Events.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=n.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return Ke(this,null,function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())})}}e.MicAudioSource=i,i.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat()}(wN)),wN),e),r(function(){if(CN)return EN;CN=1,Object.defineProperty(EN,"__esModule",{value:!0}),EN.FileAudioSource=void 0;const e=NO(),t=qT(),r=SN;return EN.FileAudioSource=class{constructor(e,r,n){this.privStreams={},this.privHeaderEnd=44,this.privId=n||(0,t.createNoDashGuid)(),this.privEvents=new t.EventSource,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=r||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}attach(e){return Ke(this,null,function*(){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,e));const r=yield this.upload(e);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,e)),Promise.resolve({detach:()=>Ke(this,null,function*(){r.readEnded(),delete this.privStreams[e],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e)),yield this.turnOff()}),id:()=>e,read:()=>r.read()})})}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(t=>Promise.resolve({bitspersample:t.bitsPerSample,channelcount:t.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:t.samplesPerSec,type:e.type.File}))}readHeader(){const e=this.privSource.slice(0,4296),n=new t.Deferred,i=e=>{const t=new DataView(e),i=e=>String.fromCharCode(t.getUint8(e),t.getUint8(e+1),t.getUint8(e+2),t.getUint8(e+3));if("RIFF"!==i(0))return void n.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==i(8)||"fmt "!==i(12))return void n.reject("Invalid WAV header in file, WAVEfmt was not found");const s=t.getInt32(16,!0),o=t.getUint16(22,!0),a=t.getUint32(24,!0),l=t.getUint16(34,!0);let c=36+Math.max(s-16,0);for(;"data"!==i(c);c+=2)if(c>4288)return void n.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=c+8,n.resolve(r.AudioStreamFormat.getWaveFormatPCM(a,l,o))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{const t=e.target.result;i(t)},t.readAsArrayBuffer(e)}else{const t=e;i(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}return n.promise}upload(e){return Ke(this,null,function*(){const r=r=>{const n=`Error occurred while processing '${this.privFilename}'. ${r}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,e,n)),new Error(n)};try{yield this.turnOn();const n=yield this.privAudioFormatPromise,i=new t.ChunkedArrayBufferStream(n.avgBytesPerSec/10,e);this.privStreams[e]=i;const s=this.privSource.slice(this.privHeaderEnd),o=e=>{i.isClosed||(i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),i.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&s instanceof Blob){const e=new FileReader;e.onerror=e=>r(e.toString()),e.onload=e=>{const t=e.target.result;o(t)},e.readAsArrayBuffer(s)}else{const e=s;o(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}return i}catch(Nie){r(Nie)}})}onEvent(e){this.privEvents.onEvent(e),t.Events.instance.onEvent(e)}},EN}(),e),r(TN,e),r(PN,e),r(RN,e),r(HN,e),r(function(){if(m_)return VN;m_=1,Object.defineProperty(VN,"__esModule",{value:!0}),VN.ProxyInfo=void 0;const e=g_();return VN.ProxyInfo=class t{constructor(e,t,r,n){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=r,this.privProxyPassword=n}static fromParameters(r){return new t(r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPort),10),r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName),r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}},VN}(),e),r(y_,e),r(T_,e)}(aN)),aN}T_.RestConfigBase=N_,N_.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},N_.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},N_.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var R_,I_={};var k_={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionEndedEvent=e.RecognitionCompletionStatus=e.RecognitionStartedEvent=e.ConnectingToServiceEvent=e.ListeningStartedEvent=e.RecognitionTriggeredEvent=e.SpeechRecognitionEvent=void 0;const t=qT();class r extends t.PlatformEvent{constructor(e,r,n,i=t.EventType.Info){super(e,i),this.privRequestId=r,this.privSessionId=n}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}e.SpeechRecognitionEvent=r;e.RecognitionTriggeredEvent=class extends r{constructor(e,t,r,n){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=r,this.privAudioNodeId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};e.ListeningStartedEvent=class extends r{constructor(e,t,r,n){super("ListeningStartedEvent",e,t),this.privAudioSourceId=r,this.privAudioNodeId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};e.ConnectingToServiceEvent=class extends r{constructor(e,t,r){super("ConnectingToServiceEvent",e,r),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}};var n,i;e.RecognitionStartedEvent=class extends r{constructor(e,t,r,n,i){super("RecognitionStartedEvent",e,i),this.privAudioSourceId=t,this.privAudioNodeId=r,this.privAuthFetchEventId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}},(i=n=e.RecognitionCompletionStatus||(e.RecognitionCompletionStatus={}))[i.Success=0]="Success",i[i.AudioSourceError=1]="AudioSourceError",i[i.AudioSourceTimeout=2]="AudioSourceTimeout",i[i.AuthTokenFetchError=3]="AuthTokenFetchError",i[i.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",i[i.UnAuthorized=5]="UnAuthorized",i[i.ConnectTimeout=6]="ConnectTimeout",i[i.ConnectError=7]="ConnectError",i[i.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",i[i.UnknownError=9]="UnknownError";e.RecognitionEndedEvent=class extends r{constructor(e,r,i,s,o,a,l,c){super("RecognitionEndedEvent",e,o,l===n.Success?t.EventType.Info:t.EventType.Error),this.privAudioSourceId=r,this.privAudioNodeId=i,this.privAuthFetchEventId=s,this.privStatus=l,this.privError=c,this.privServiceTag=a}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}}(k_);var __={},A_={};Object.defineProperty(A_,"__esModule",{value:!0}),A_.SpeechConnectionMessage=void 0;const j_=qT(),O_=GT;class D_ extends j_.ConnectionMessage{constructor(e,t,r,n,i,s,o,a){if(!t)throw new j_.ArgumentNullError("path");if(!r)throw new j_.ArgumentNullError("requestId");const l={};if(l[O_.HeaderNames.Path]=t,l[O_.HeaderNames.RequestId]=r,l[O_.HeaderNames.RequestTimestamp]=(new Date).toISOString(),n&&(l[O_.HeaderNames.ContentType]=n),s&&(l[O_.HeaderNames.RequestStreamId]=s),o)for(const c in o)c&&(l[c]=o[c]);a?super(e,i,l,a):super(e,i,l),this.privPath=t,this.privRequestId=r,this.privContentType=n,this.privStreamId=s,this.privAdditionalHeaders=o}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,r=null,n=null,i=null;const s={};if(e.headers)for(const o in e.headers)o&&(o.toLowerCase()===O_.HeaderNames.Path.toLowerCase()?t=e.headers[o]:o.toLowerCase()===O_.HeaderNames.RequestId.toLowerCase()?r=e.headers[o]:o.toLowerCase()===O_.HeaderNames.ContentType.toLowerCase()?n=e.headers[o]:o.toLowerCase()===O_.HeaderNames.RequestStreamId.toLowerCase()?i=e.headers[o]:s[o]=e.headers[o]);return new D_(e.messageType,t,r,n,e.body,i,s,e.id)}}A_.SpeechConnectionMessage=D_;var M_={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SegmentationMode=void 0,(t=e.SegmentationMode||(e.SegmentationMode={})).Normal="Normal",t.Disabled="Disabled",t.Custom="Custom",t.Semantic="Semantic"}(M_);var L_={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,(t=e.NextAction||(e.NextAction={})).None="None",t.Synthesize="Synthesize"}(L_);var z_={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.Mode=void 0,(t=e.Mode||(e.Mode={})).None="None",t.Always="Always"}(z_);var F_={};!function(e){var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdDetectionPriority=e.LanguageIdDetectionMode=void 0,(t=e.LanguageIdDetectionMode||(e.LanguageIdDetectionMode={})).DetectAtAudioStart="DetectAtAudioStart",t.DetectContinuous="DetectContinuous",t.DetectSegments="DetectSegments",(r=e.LanguageIdDetectionPriority||(e.LanguageIdDetectionPriority={})).Auto="Auto",r.PrioritizeLatency="PrioritizeLatency",r.PrioritizeAccuracy="PrioritizeAccuracy"}(F_);var B_={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,(t=e.NextAction||(e.NextAction={})).Recognize="Recognize",t.None="None"}(B_);var U_={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.OnUnknownAction=void 0,(t=e.OnUnknownAction||(e.OnUnknownAction={})).RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",t.None="None"}(U_);var W_={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ResultType=void 0,(t=e.ResultType||(e.ResultType={})).Auto="Auto",t.StableFragment="StableFragment",t.Hypothesis="Hypothesis",t.None="None"}(W_);var H_={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.PhraseResultOutputType=void 0,(t=e.PhraseResultOutputType||(e.PhraseResultOutputType={})).Always="Always",t.None="None"}(H_);var $_,V_={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,(t=e.NextAction||(e.NextAction={})).None="None",t.Translate="Translate"}(V_);var q_,G_={};var K_,J_={};var Y_={};Object.defineProperty(Y_,"__esModule",{value:!0});var Z_={};Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.WebsocketMessageFormatter=void 0;const Q_=qT();Z_.WebsocketMessageFormatter=class{toConnectionMessage(e){const t=new Q_.Deferred;try{if(e.messageType===Q_.MessageType.Text){const r=e.textContent;let n={},i=null;if(r){const e=r.split("\r\n\r\n");e&&e.length>0&&(n=this.parseHeaders(e[0]),e.length>1&&(i=e[1]))}t.resolve(new Q_.ConnectionMessage(e.messageType,i,n,e.id))}else if(e.messageType===Q_.MessageType.Binary){const r=e.binaryContent;let n={},i=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const s=new DataView(r),o=s.getInt16(0);if(r.byteLength<o+2)throw new Error("Invalid binary message format. Header content missing.");let a="";for(let e=0;e<o;e++)a+=String.fromCharCode(s.getInt8(e+2));n=this.parseHeaders(a),r.byteLength>o+2&&(i=r.slice(2+o)),t.resolve(new Q_.ConnectionMessage(e.messageType,i,n,e.id))}}catch(Nie){t.reject(`Error formatting the message. Error: ${Nie}`)}return t.promise}fromConnectionMessage(e){const t=new Q_.Deferred;try{if(e.messageType===Q_.MessageType.Text){const r=`${this.makeHeaders(e)}\r\n${e.textBody?e.textBody:""}`;t.resolve(new Q_.RawWebsocketMessage(Q_.MessageType.Text,r,e.id))}else if(e.messageType===Q_.MessageType.Binary){const r=this.makeHeaders(e),n=e.binaryBody,i=this.stringToArrayBuffer(r),s=new Int8Array(i),o=s.byteLength,a=new Int8Array(2+o+(n?n.byteLength:0));if(a[0]=o>>8&255,a[1]=255&o,a.set(s,2),n){const e=new Int8Array(n);a.set(e,2+o)}const l=a.buffer;t.resolve(new Q_.RawWebsocketMessage(Q_.MessageType.Binary,l,e.id))}}catch(Nie){t.reject(`Error formatting the message. ${Nie}`)}return t.promise}makeHeaders(e){let t="";if(e.headers)for(const r in e.headers)r&&(t+=`${r}: ${e.headers[r]}\r\n`);return t}parseHeaders(e){const t={};if(e){const r=e.match(/[^\r\n]+/g);if(t)for(const e of r)if(e){const r=e.indexOf(":"),n=r>0?e.substr(0,r).trim().toLowerCase():e,i=r>0&&e.length>r+1?e.substr(r+1).trim():"";t[n]=i}}return t}stringToArrayBuffer(e){const t=new ArrayBuffer(e.length),r=new DataView(t);for(let n=0;n<e.length;n++)r.setUint8(n,e.charCodeAt(n));return t}};var X_,eA={};var tA,rA={};var nA,iA={};var sA,oA={};var aA,lA={};var cA={};!function(e){var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionStatus=e.SynthesisStatus=void 0,(t=e.SynthesisStatus||(e.SynthesisStatus={}))[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error",(r=e.RecognitionStatus||(e.RecognitionStatus={}))[r.Success=0]="Success",r[r.NoMatch=1]="NoMatch",r[r.InitialSilenceTimeout=2]="InitialSilenceTimeout",r[r.BabbleTimeout=3]="BabbleTimeout",r[r.Error=4]="Error",r[r.EndOfDictation=5]="EndOfDictation",r[r.TooManyRequests=6]="TooManyRequests",r[r.BadRequest=7]="BadRequest",r[r.Forbidden=8]="Forbidden"}(cA);var uA,dA={};var pA={};Object.defineProperty(pA,"__esModule",{value:!0}),pA.TranslationHypothesis=void 0;const hA=dN,fA=OT;class mA{constructor(e,t){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Offset+=t,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(e,t){return new mA(JSON.parse(e),t)}static fromTranslationResponse(e,t){hA.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const r=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,r.Translation=e,new mA(r,t)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return null==(e=this.privTranslationHypothesis.PrimaryLanguage)?void 0:e.Language}asJson(){const e=Le({},this.privTranslationHypothesis);return void 0!==e.Translation?JSON.stringify(ze(Le({},e),{TranslationStatus:fA.TranslationStatus[e.Translation.TranslationStatus]})):JSON.stringify(e)}mapTranslationStatus(e){return"string"==typeof e?fA.TranslationStatus[e]:"number"==typeof e?e:void 0}}pA.TranslationHypothesis=mA;var vA,gA={};var yA,bA={};var xA={};Object.defineProperty(xA,"__esModule",{value:!0}),xA.SpeechDetected=void 0;class wA{constructor(e,t){this.privSpeechStartDetected=JSON.parse(e),this.privSpeechStartDetected.Offset+=t}static fromJSON(e,t){return new wA(e,t)}get Offset(){return this.privSpeechStartDetected.Offset}}xA.SpeechDetected=wA;var SA={};Object.defineProperty(SA,"__esModule",{value:!0}),SA.SpeechHypothesis=void 0;class CA{constructor(e,t){this.privSpeechHypothesis=JSON.parse(e),this.updateOffset(t)}static fromJSON(e,t){return new CA(e,t)}updateOffset(e){this.privSpeechHypothesis.Offset+=e}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}SA.SpeechHypothesis=CA;var EA={};Object.defineProperty(EA,"__esModule",{value:!0}),EA.SpeechKeyword=void 0;class TA{constructor(e,t){this.privSpeechKeyword=JSON.parse(e),this.privSpeechKeyword.Offset+=t}static fromJSON(e,t){return new TA(e,t)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}}EA.SpeechKeyword=TA;var NA,PA={};var RA,IA={},kA={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityProvider=e.SpeakerDiarizationMode=void 0,(t=e.SpeakerDiarizationMode||(e.SpeakerDiarizationMode={})).None="None",t.Identity="Identity",t.Anonymous="Anonymous",(e.IdentityProvider||(e.IdentityProvider={})).CallCenter="CallCenter"}(kA);var _A,AA={};var jA,OA={};var DA,MA={};var LA={};Object.defineProperty(LA,"__esModule",{value:!0}),LA.AddedLmIntent=void 0;LA.AddedLmIntent=class{constructor(e,t){this.modelImpl=e,this.intentName=t}};var zA,FA={};var BA={};Object.defineProperty(BA,"__esModule",{value:!0}),BA.IntentResponse=void 0;class UA{constructor(e){this.privIntentResponse=""===e?{}:JSON.parse(e)}static fromJSON(e){return new UA(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}BA.IntentResponse=UA;var WA={};Object.defineProperty(WA,"__esModule",{value:!0});var HA={},$A={};Object.defineProperty($A,"__esModule",{value:!0}),$A.ServiceTelemetryListener=void 0;const VA=qT(),qA=k_;$A.ServiceTelemetryListener=class{constructor(e,t,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){if(!this.privIsDisposed&&(e instanceof qA.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof VA.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof VA.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof VA.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof VA.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof VA.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof qA.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof VA.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof VA.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof VA.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof VA.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)){this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array);const t=50;this.privReceivedMessages[e.message.headers.path].length<t&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)}}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}},Object.defineProperty(HA,"__esModule",{value:!0}),HA.RequestSession=void 0;const GA=qT(),KA=k_,JA=$A;HA.RequestSession=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=(0,GA.createNoDashGuid)(),this.privAudioNodeId=(0,GA.createNoDashGuid)(),this.privTurnDeferral=new GA.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new JA.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new KA.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t){return Ke(this,null,function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new KA.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))})}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new KA.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(e){return Ke(this,null,function*(){e&&(yield this.onComplete())})}onConnectionEstablishCompleted(e,t){return Ke(this,null,function*(){if(200===e)return this.onEvent(new KA.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&(yield this.onComplete())})}onServiceTurnEndResponse(e){return Ke(this,null,function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())})}onSpeechContext(){this.privRequestId=(0,GA.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new GA.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(){return Ke(this,null,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}})}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return Ke(this,null,function*(){yield this.onComplete()})}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),GA.Events.instance.onEvent(e)}onComplete(){return Ke(this,null,function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())})}detachAudioNode(){return Ke(this,null,function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))})}};var YA={},ZA={};!function(e){var t,r,n,i;Object.defineProperty(e,"__esModule",{value:!0}),e.TentativePhraseResultsOption=e.OutputFormat=e.PhraseExtension=e.PhraseOption=void 0,(t=e.PhraseOption||(e.PhraseOption={})).WordTimings="WordTimings",t.SNR="SNR",t.Pronunciation="Pronunciation",t.WordPronunciation="WordPronunciation",t.WordConfidence="WordConfidence",t.Words="Words",t.Sentiment="Sentiment",t.PronunciationAssessment="PronunciationAssessment",t.ContentAssessment="ContentAssessment",t.PhraseAMScore="PhraseAMScore",t.PhraseLMScore="PhraseLMScore",t.WordAMScore="WordAMScore",t.WordLMScore="WordLMScore",t.RuleTree="RuleTree",t.NBestTimings="NBestTimings",t.DecoderDiagnostics="DecoderDiagnostics",t.DisplayWordTimings="DisplayWordTimings",t.DisplayWords="DisplayWords",(r=e.PhraseExtension||(e.PhraseExtension={})).Graph="Graph",r.Corrections="Corrections",r.Sentiment="Sentiment",(n=e.OutputFormat||(e.OutputFormat={})).Simple="Simple",n.Detailed="Detailed",(i=e.TentativePhraseResultsOption||(e.TentativePhraseResultsOption={})).None="None",i.Always="Always"}(ZA),Object.defineProperty(YA,"__esModule",{value:!0}),YA.SpeechContext=void 0;const QA=hR,XA=ZA;YA.SpeechContext=class{constructor(e){this.privContext={},this.privDynamicGrammar=e}getContext(){return this.privContext}setPronunciationAssessmentParams(e,t=!1){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),void 0===this.privContext.phraseDetection.enrichment&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e)||{},t&&(this.privContext.phraseDetection.mode=QA.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(XA.PhraseOption.PronunciationAssessment),-1===this.privContext.phraseOutput.detailed.options.indexOf(XA.PhraseOption.SNR)&&this.privContext.phraseOutput.detailed.options.push(XA.PhraseOption.SNR)}setDetailedOutputFormat(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=XA.OutputFormat.Detailed}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=XA.OutputFormat.Detailed,-1===this.privContext.phraseOutput.detailed.options.indexOf(XA.PhraseOption.WordTimings)&&this.privContext.phraseOutput.detailed.options.push(XA.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();this.privContext.dgi=e;return JSON.stringify(this.privContext)}};var ej={},tj={};!function(e){var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.SubstringMatchType=e.GroupType=void 0,(t=e.GroupType||(e.GroupType={})).IntentText="IntentText",t.IntentEntity="IntentEntity",t.Generic="Generic",t.People="People",t.Place="Place",t.DynamicEntity="DynamicEntity",(r=e.SubstringMatchType||(e.SubstringMatchType={})).None="None",r.LeftRooted="LeftRooted",r.PartialName="PartialName",r.MiddleOfSentence="MiddleOfSentence"}(tj),Object.defineProperty(ej,"__esModule",{value:!0}),ej.DynamicGrammarBuilder=void 0;const rj=tj;ej.DynamicGrammarBuilder=class{constructor(){this.privWeight=1}addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}setWeight(e){this.privWeight=e}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.referenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach(e=>{t.push({text:e})}),e.groups=[{type:rj.GroupType.Generic,items:t}],e.bias=this.privWeight}return e}};var nj={},ij={},sj={},oj={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataStreamType=e.ActivityPayloadResponse=void 0;class t{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}var r;e.ActivityPayloadResponse=t,(r=e.MessageDataStreamType||(e.MessageDataStreamType={}))[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"}(oj),Object.defineProperty(sj,"__esModule",{value:!0}),sj.DialogServiceTurnState=void 0;const aj=iP,lj=nP,cj=oj;sj.DialogServiceTurnState=class{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===cj.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=lj.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==t?t:aj.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}},Object.defineProperty(ij,"__esModule",{value:!0}),ij.DialogServiceTurnStateManager=void 0;const uj=WE,dj=sj;ij.DialogServiceTurnStateManager=class{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new uj.InvalidOperationError("Service error: There is already a turn with id:"+e);const t=new dj.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new uj.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}};var pj={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.InvocationSource=void 0,(t=e.InvocationSource||(e.InvocationSource={})).None="None",t.VoiceActivationWithKeyword="VoiceActivationWithKeyword"}(pj);var hj,fj={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.OnRejectAction=e.KeywordDetectionType=void 0,(e.KeywordDetectionType||(e.KeywordDetectionType={})).StartTrigger="StartTrigger",(t=e.OnRejectAction||(e.OnRejectAction={})).EndOfTurn="EndOfTurn",t.Continue="Continue"}(fj);var mj={};Object.defineProperty(mj,"__esModule",{value:!0}),mj.AgentConfig=void 0;mj.AgentConfig=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}};var vj={},gj={},yj={};Object.defineProperty(yj,"__esModule",{value:!0}),yj.ConversationConnectionConfig=void 0;const bj=T_;class xj extends bj.RestConfigBase{static get host(){return xj.privHost}static get apiVersion(){return xj.privApiVersion}static get clientAppId(){return xj.privClientAppId}static get defaultLanguageCode(){return xj.privDefaultLanguageCode}static get restPath(){return xj.privRestPath}static get webSocketPath(){return xj.privWebSocketPath}static get transcriptionEventKeys(){return xj.privTranscriptionEventKeys}}var wj;yj.ConversationConnectionConfig=xj,xj.privHost="dev.microsofttranslator.com",xj.privRestPath="/capito/room",xj.privApiVersion="2.0",xj.privDefaultLanguageCode="en-US",xj.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",xj.privWebSocketPath="/capito/translate",xj.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var Sj={},Cj={},Ej={},Tj={};Object.defineProperty(Tj,"__esModule",{value:!0}),Tj.ConversationConnectionMessage=void 0;const Nj=qT();class Pj extends Nj.ConnectionMessage{constructor(e,t,r,n){super(e,t,r,n);const i=JSON.parse(this.textBody);void 0!==i.type&&(this.privConversationMessageType=i.type)}get conversationMessageType(){return this.privConversationMessageType}}Tj.ConversationConnectionMessage=Pj,Object.defineProperty(Ej,"__esModule",{value:!0}),Ej.ConversationWebsocketMessageFormatter=void 0;const Rj=qT(),Ij=Tj;var kj;Ej.ConversationWebsocketMessageFormatter=class{toConnectionMessage(e){const t=new Rj.Deferred;try{if(e.messageType===Rj.MessageType.Text){const r=new Ij.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(r)}else e.messageType===Rj.MessageType.Binary&&t.resolve(new Ij.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(Nie){t.reject(`Error formatting the message. Error: ${Nie}`)}return t.promise}fromConnectionMessage(e){const t=new Rj.Deferred;try{if(e.messageType===Rj.MessageType.Text){const r=`${e.textBody?e.textBody:""}`;t.resolve(new Rj.RawWebsocketMessage(Rj.MessageType.Text,r,e.id))}}catch(Nie){t.reject(`Error formatting the message. ${Nie}`)}return t.promise}};var _j={},Aj={};Object.defineProperty(Aj,"__esModule",{value:!0}),Aj.ConversationRequestSession=void 0;const jj=qT();Aj.ConversationRequestSession=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=(0,jj.createNoDashGuid)(),this.privRequestCompletionDeferral=new jj.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,t){this.privSessionId=t}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){200!==e&&403===e&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=(0,jj.createNoDashGuid)():this.onComplete()}dispose(){return Ke(this,null,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach()}})}onComplete(){}};var Oj,Dj={};function Mj(){if(Oj)return Dj;Oj=1,Object.defineProperty(Dj,"__esModule",{value:!0}),Dj.ConversationReceivedTranslationEventArgs=Dj.ParticipantsListEventArgs=Dj.ParticipantAttributeEventArgs=Dj.ParticipantEventArgs=Dj.LockRoomEventArgs=Dj.MuteAllEventArgs=void 0;const e=g_();class t extends e.SessionEventArgs{constructor(e,t){super(t),this.privIsMuted=e}get isMuted(){return this.privIsMuted}}Dj.MuteAllEventArgs=t;class r extends e.SessionEventArgs{constructor(e,t){super(t),this.privIsLocked=e}get isMuted(){return this.privIsLocked}}Dj.LockRoomEventArgs=r;class n extends e.SessionEventArgs{constructor(e,t){super(t),this.privParticipant=e}get participant(){return this.privParticipant}}Dj.ParticipantEventArgs=n;class i extends e.SessionEventArgs{constructor(e,t,r,n){super(n),this.privKey=t,this.privValue=r,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Dj.ParticipantAttributeEventArgs=i;class s extends e.SessionEventArgs{constructor(e,t,r,n,i,s,o,a,l){super(l),this.privRoomId=e,this.privSessionToken=t,this.privTranslateTo=r,this.privProfanityFilter=n,this.privRoomProfanityFilter=i,this.privIsRoomLocked=s,this.privIsRoomLocked=o,this.privParticipants=a}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Dj.ParticipantsListEventArgs=s;return Dj.ConversationReceivedTranslationEventArgs=class{constructor(e,t,r){this.privPayload=t,this.privCommand=e,this.privSessionId=r}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}},Dj}var Lj={};Object.defineProperty(Lj,"__esModule",{value:!0}),Lj.ConversationTranslatorCommandTypes=Lj.ConversationTranslatorMessageTypes=Lj.InternalParticipants=void 0;Lj.InternalParticipants=class{constructor(e=[],t){this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(void 0===e)return;const t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(t=>t.id===e)}getParticipant(e){return this.participants.find(t=>t.id===e)}deleteParticipant(e){this.participants=this.participants.filter(t=>t.id!==e)}get host(){return this.participants.find(e=>!0===e.isHost)}get me(){return this.getParticipant(this.meId)}},Lj.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},Lj.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var zj={},Fj={};Object.defineProperty(Fj,"__esModule",{value:!0}),Fj.CommandResponsePayload=void 0;class Bj{constructor(e){this.privCommandResponse=(e=>JSON.parse(e))(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new Bj(e)}}Fj.CommandResponsePayload=Bj;var Uj={};Object.defineProperty(Uj,"__esModule",{value:!0}),Uj.ParticipantPayloadResponse=Uj.ParticipantsListPayloadResponse=void 0;class Wj{constructor(e){this.privParticipantsPayloadResponse=(e=>JSON.parse(e))(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new Wj(e)}}Uj.ParticipantsListPayloadResponse=Wj;class Hj{constructor(e){this.privParticipantPayloadResponse=(e=>JSON.parse(e))(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new Hj(e)}}Uj.ParticipantPayloadResponse=Hj;var $j={};Object.defineProperty($j,"__esModule",{value:!0}),$j.TextResponsePayload=$j.SpeechResponsePayload=void 0;class Vj{constructor(e){this.privSpeechResponse=(e=>JSON.parse(e))(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}static fromJSON(e){return new Vj(e)}}$j.SpeechResponsePayload=Vj;class qj{constructor(e){this.privTextResponse=(e=>JSON.parse(e))(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new qj(e)}}var Gj,Kj;function Jj(){if(Kj)return Sj;Kj=1,Object.defineProperty(Sj,"__esModule",{value:!0}),Sj.ConversationTranslatorRecognizer=Sj.ConversationRecognizerFactory=void 0;const e=NO(),t=qT(),r=dN,n=g_(),i=function(){if(kj)return Cj;kj=1,Object.defineProperty(Cj,"__esModule",{value:!0}),Cj.ConversationConnectionFactory=void 0;const e=P_(),t=qT(),r=dN,n=g_(),i=sI(),s=yj,o=Ej;let a=class extends i.ConnectionFactoryBase{create(i,a,l){const c=i.parameters.getProperty(n.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),u=i.parameters.getProperty(n.PropertyId.ConversationTranslator_CorrelationId,(0,t.createGuid)()),d=`wss://${c}${s.ConversationConnectionConfig.webSocketPath}`,p=i.parameters.getProperty(n.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(p,"token");const h={};h[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,h[s.ConversationConnectionConfig.configParams.token]=p,h[s.ConversationConnectionConfig.configParams.correlationId]=u;const f="true"===i.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new e.WebsocketConnection(d,h,{},new o.ConversationWebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(i),f,l))}};return Cj.ConversationConnectionFactory=a,Cj}(),s=function(){if(Gj)return _j;Gj=1,Object.defineProperty(_j,"__esModule",{value:!0}),_j.ConversationServiceAdapter=void 0;const e=qT(),t=g_(),r=NO(),n=Tj,i=Aj,s=Mj(),o=Lj,a=zj;let l=class l extends r.ServiceRecognizerBase{constructor(t,r,n,s,o){super(t,r,n,s,o),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=o,this.privConversationAuthentication=t,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=e=>this.conversationConnectImpl(e),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession((0,e.createNoDashGuid)()),this.privConversationConnectionFactory=r,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(e){return Ke(this,null,function*(){if(this.privConversationIsDisposed=!0,void 0!==this.privConnectionConfigPromise){const t=yield this.privConnectionConfigPromise;yield t.dispose(e)}yield Ge(l.prototype,this,"dispose").call(this,e)})}sendMessage(t){return Ke(this,null,function*(){return(yield this.fetchConnection()).send(new n.ConversationConnectionMessage(e.MessageType.Text,t))})}sendMessageAsync(t){return Ke(this,null,function*(){const r=yield this.fetchConnection();yield r.send(new n.ConversationConnectionMessage(e.MessageType.Text,t))})}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return Ke(this,null,function*(){return!0})}cancelRecognition(e,r,n,i,s){this.terminateMessageLoop=!0;const o=new t.ConversationTranslationCanceledEventArgs(n,s,i,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,o)}catch(Nie){}}conversationConnectImpl(e){return Ke(this,null,function*(){return this.privConnectionLoop=this.startMessageLoop(),e})}receiveConversationMessageOverride(){return Ke(this,null,function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const n=new e.Deferred;try{const e=yield this.fetchConnection(),i=yield e.read();if(this.isDisposed()||this.terminateMessageLoop)return n.resolve(),Promise.resolve();if(!i)return this.receiveConversationMessageOverride();const l=this.privConversationRequestSession.sessionId,c=i.conversationMessageType.toLowerCase();let u=!1;try{switch(c){case"info":case"participant_command":case"command":const e=a.CommandResponsePayload.fromJSON(i.textBody);switch(e.command.toLowerCase()){case"participantlist":const n=a.ParticipantsListPayloadResponse.fromJSON(i.textBody),c=n.participants.map(e=>({avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new s.ParticipantsListEventArgs(n.roomid,n.token,n.translateTo,n.profanityFilter,n.roomProfanityFilter,n.roomLocked,n.muteAll,c,l));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(e.participantId,o.ConversationTranslatorCommandTypes.setTranslateToLanguages,e.value,l));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(e.participantId,o.ConversationTranslatorCommandTypes.setProfanityFiltering,e.value,l));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(e.participantId,o.ConversationTranslatorCommandTypes.setMute,e.value,l));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new s.MuteAllEventArgs(e.value,l));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(e.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(e.participantId,o.ConversationTranslatorCommandTypes.setUseTTS,e.value,l));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new s.LockRoomEventArgs(e.value,l));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(e.participantId,o.ConversationTranslatorCommandTypes.changeNickname,e.value,l));break;case"joinsession":const u=a.ParticipantPayloadResponse.fromJSON(i.textBody),d={avatar:u.avatar,displayName:u.nickname,id:u.participantId,isHost:u.ishost,isMuted:u.ismuted,isUsingTts:u.usetts,preferredLanguage:u.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(d,l));break;case"leavesession":const p={id:e.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(p,l));break;case"disconnectsession":e.participantId;break;case"token":const h=new r.CognitiveTokenAuthentication(()=>{const t=e.token;return Promise.resolve(t)},()=>{const t=e.token;return Promise.resolve(t)});this.authentication=h,this.privConversationServiceConnector.onToken(h)}break;case"partial":case"final":const n=a.SpeechResponsePayload.fromJSON(i.textBody),d="final"===c?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,p=new t.ConversationTranslationResult(n.participantId,this.getTranslations(n.translations),n.language,n.id,d,n.recognition,void 0,void 0,i.textBody,void 0);n.isFinal?((void 0!==p.text&&p.text.length>0||n.id===this.privLastPartialUtteranceId)&&(u=!0),u&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(o.ConversationTranslatorMessageTypes.final,p,l))):void 0!==p.text&&(this.privLastPartialUtteranceId=n.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(o.ConversationTranslatorMessageTypes.partial,p,l)));break;case"translated_message":const h=a.TextResponsePayload.fromJSON(i.textBody),f=new t.ConversationTranslationResult(h.participantId,this.getTranslations(h.translations),h.language,void 0,void 0,h.originalText,void 0,void 0,void 0,i.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(o.ConversationTranslatorMessageTypes.instantMessage,f,l))}}catch(Nie){}return this.receiveConversationMessageOverride()}catch(Nie){this.terminateMessageLoop=!0}return n.promise})}startMessageLoop(){return Ke(this,null,function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const e=this.receiveConversationMessageOverride();try{return yield e}catch(r){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,r),null}})}configConnection(){return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then(t=>t.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(e=>e),this.privConnectionConfigPromise)}getTranslations(e){let r;if(void 0!==e){r=new t.Translations;for(const t of e)r.set(t.lang,t.translation)}return r}};return _j.ConversationServiceAdapter=l,_j}();Sj.ConversationRecognizerFactory=class{static fromConfig(e,t,r){return new o(e,t,r)}};let o=class o extends n.Recognizer{constructor(e,s,o){const a=s;r.Contracts.throwIfNull(a,"speechConfig");const l=e;r.Contracts.throwIfNull(l,"conversationImpl"),super(o,a.properties,new i.ConversationConnectionFactory),this.privConversation=l,this.privIsDisposed=!1,this.privProperties=a.properties.clone(),this.privConnection=n.Connection.fromRecognizer(this);"on"===this.privProperties.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!=typeof Blob&&"undefined"!=typeof Worker?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):"undefined"!=typeof window?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,t,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(t,n)}catch(i){if(n)if(i instanceof Error){const e=i;n(e.name+": "+e.message)}else n(i)}}disconnect(e,n){try{r.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{e&&e()},e=>{n&&n(e)})}catch(i){if(n)if(i instanceof Error){const e=i;n(e.name+": "+e.message)}else n(i);this.dispose(!0).catch(e=>{t.Events.instance.onEvent(new t.BackgroundEvent(e))})}}sendRequest(e,n,i){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,n,i)}catch(s){if(i)if(s instanceof Error){const e=s;i(e.name+": "+e.message)}else i(s);this.dispose(!0).catch(e=>{t.Events.instance.onEvent(new t.BackgroundEvent(e))})}}onToken(e){this.privConversation.onToken(e)}close(){return Ke(this,null,function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))})}dispose(e){return Ke(this,null,function*(){this.privIsDisposed||e&&(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield Ge(o.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(t){return new e.RecognizerConfig(t,this.privProperties)}createServiceRecognizer(e,t,r,n){const i=r;return new s.ConversationServiceAdapter(e,t,i,n,this)}sendMessage(e,t,r){const n=this.privReco;var i,s,o;i=n.sendMessageAsync(e),s=t,o=r,void 0!==i?i.then(()=>{try{s&&s()}catch(Nie){o&&o(`'Unhandled error on promise callback: ${Nie}'`)}},e=>{try{o&&o(e)}catch(t){}}):o&&o("Null promise"),this.resetConversationTimeout()}resetConversationTimeout(){void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return Sj.ConversationTranslatorRecognizer=o,Sj}$j.TextResponsePayload=qj,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextResponsePayload=e.SpeechResponsePayload=e.ParticipantPayloadResponse=e.ParticipantsListPayloadResponse=e.CommandResponsePayload=void 0;var t=Fj;Object.defineProperty(e,"CommandResponsePayload",{enumerable:!0,get:function(){return t.CommandResponsePayload}});var r=Uj;Object.defineProperty(e,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(e,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var n=$j;Object.defineProperty(e,"SpeechResponsePayload",{enumerable:!0,get:function(){return n.SpeechResponsePayload}}),Object.defineProperty(e,"TextResponsePayload",{enumerable:!0,get:function(){return n.TextResponsePayload}})}(zj);var Yj,Zj,Qj={};function Xj(){return Zj||(Zj=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InternalParticipants=e.ConversationTranslatorMessageTypes=e.ConversationTranslatorCommandTypes=e.ParticipantsListEventArgs=e.ParticipantEventArgs=e.ParticipantAttributeEventArgs=e.MuteAllEventArgs=e.LockRoomEventArgs=e.ConversationReceivedTranslationEventArgs=e.TranscriberRecognizer=e.ConversationRecognizerFactory=e.ConversationConnectionConfig=e.ConversationManager=void 0;var t=function(){if(wj)return gj;wj=1,Object.defineProperty(gj,"__esModule",{value:!0}),gj.ConversationManager=void 0;const e=P_(),t=dN,r=g_(),n=yj;return gj.ConversationManager=class{constructor(){this.privRequestParams=n.ConversationConnectionConfig.configParams,this.privErrors=n.ConversationConnectionConfig.restErrors,this.privHost=n.ConversationConnectionConfig.host,this.privApiVersion=n.ConversationConnectionConfig.apiVersion,this.privRestPath=n.ConversationConnectionConfig.restPath,this.privRestAdapter=new e.RestMessageAdapter({})}createOrJoin(i,s,o,a){try{t.Contracts.throwIfNullOrUndefined(i,"args");const l=i.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n.ConversationConnectionConfig.defaultLanguageCode),c=i.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),u=i.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),d=i.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),p=i.getProperty(r.PropertyId.SpeechServiceConnection_Key),h=i.getProperty(r.PropertyId.SpeechServiceConnection_Region),f=i.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);t.Contracts.throwIfNullOrWhitespace(l,"languageCode"),t.Contracts.throwIfNullOrWhitespace(c,"nickname"),t.Contracts.throwIfNullOrWhitespace(u,"endpointHost");const m={};m[this.privRequestParams.apiVersion]=this.privApiVersion,m[this.privRequestParams.languageCode]=l,m[this.privRequestParams.nickname]=c;const v={};d&&(v[this.privRequestParams.correlationId]=d),v[this.privRequestParams.clientAppId]=n.ConversationConnectionConfig.clientAppId,void 0!==s?m[this.privRequestParams.roomId]=s:(t.Contracts.throwIfNullOrUndefined(h,this.privErrors.authInvalidSubscriptionRegion),v[this.privRequestParams.subscriptionRegion]=h,p?v[this.privRequestParams.subscriptionKey]=p:f?v[this.privRequestParams.authorization]=`Bearer ${f}`:t.Contracts.throwIfNullOrUndefined(p,this.privErrors.authInvalidSubscriptionKey));const g={};g.headers=v,this.privRestAdapter.options=g;const y=`https://${u}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Post,y,m,null).then(t=>{const r=e.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,t.headers);if(!t.ok){if(a){let e,n=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",t.status.toString());try{e=JSON.parse(t.data),n+=` [${e.error.code}: ${e.error.message}]`}catch(Nie){n+=` [${t.data}]`}r&&(n+=` ${r}`),a(n)}return}const n=JSON.parse(t.data);if(n&&(n.requestId=r),o){try{o(n)}catch(Nie){a&&a(Nie)}o=void 0}}).catch(()=>{})}catch(l){if(a)if(l instanceof Error){const e=l;a(e.name+": "+e.message)}else a(l)}}leave(n,i){return new Promise((s,o)=>{try{t.Contracts.throwIfNullOrUndefined(n,this.privErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","token"));const o=n.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),a=n.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),l={};l[this.privRequestParams.apiVersion]=this.privApiVersion,l[this.privRequestParams.sessionToken]=i;const c={};a&&(c[this.privRequestParams.correlationId]=a);const u={};u.headers=c,this.privRestAdapter.options=u;const d=`https://${o}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Delete,d,l,null).then(e=>{e.ok,s()}).catch(()=>{})}catch(a){if(a instanceof Error){const e=a;o(e.name+": "+e.message)}else o(a)}})}},gj}();Object.defineProperty(e,"ConversationManager",{enumerable:!0,get:function(){return t.ConversationManager}});var r=yj;Object.defineProperty(e,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var n=Jj();Object.defineProperty(e,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return n.ConversationRecognizerFactory}});var i=function(){if(Yj)return Qj;Yj=1,Object.defineProperty(Qj,"__esModule",{value:!0}),Qj.TranscriberRecognizer=void 0;const e=qT(),t=dN,r=g_(),n=NO(),i=hR;let s=class s extends r.Recognizer{constructor(e,i){const s=e;t.Contracts.throwIfNull(s,"speechTranslationConfig");const o=i;t.Contracts.throwIfNull(o,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(s.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(i,s.properties,new n.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){t.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,e)}set conversation(e){t.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(e){t.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(t,r){(0,e.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),t,r)}stopContinuousRecognitionAsync(t,r){(0,e.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),t,r)}close(){return Ke(this,null,function*(){this.privDisposedRecognizer||(yield this.dispose(!0))})}pushConversationEvent(e,r){return Ke(this,null,function*(){const n=this.privReco;t.Contracts.throwIfNullOrUndefined(n,"serviceRecognizer"),yield n.sendSpeechEventAsync(e,r)})}pushMeetingEvent(e,r){return Ke(this,null,function*(){const n=this.privReco;t.Contracts.throwIfNullOrUndefined(n,"serviceRecognizer"),yield n.sendMeetingSpeechEventAsync(e,r)})}enforceAudioGating(){return Ke(this,null,function*(){const e=this.audioConfig,t=(yield e.format).channels;if(1===t){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==t)throw new Error(`Unsupported audio configuration: Detected ${t}-channel audio`)})}connectMeetingCallbacks(e){this.isMeetingRecognizer=!0,this.canceled=(t,r)=>{e.canceled&&e.canceled(e,r)},this.recognizing=(t,r)=>{e.transcribing&&e.transcribing(e,r)},this.recognized=(t,r)=>{e.transcribed&&e.transcribed(e,r)},this.sessionStarted=(t,r)=>{e.sessionStarted&&e.sessionStarted(e,r)},this.sessionStopped=(t,r)=>{e.sessionStopped&&e.sessionStopped(e,r)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(e){return Ke(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield Ge(s.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,r,i){const s=r;return new n.TranscriptionServiceRecognizer(e,t,s,i,this)}};return Qj.TranscriberRecognizer=s,Qj}();Object.defineProperty(e,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var s=Mj();Object.defineProperty(e,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(e,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(e,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(e,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(e,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var o=Lj;Object.defineProperty(e,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return o.ConversationTranslatorCommandTypes}}),Object.defineProperty(e,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return o.ConversationTranslatorMessageTypes}}),Object.defineProperty(e,"InternalParticipants",{enumerable:!0,get:function(){return o.InternalParticipants}})}(vj)),vj}var eO={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesisAudioMetadata=e.MetadataType=void 0,(t=e.MetadataType||(e.MetadataType={})).WordBoundary="WordBoundary",t.Bookmark="Bookmark",t.Viseme="Viseme",t.SentenceBoundary="SentenceBoundary",t.SessionEnd="SessionEnd",t.AvatarSignal="TalkingAvatarSignal";class r{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new r(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}e.SynthesisAudioMetadata=r}(eO);var tO={},rO={};Object.defineProperty(rO,"__esModule",{value:!0}),rO.SynthesisStartedEvent=rO.ConnectingToSynthesisServiceEvent=rO.SynthesisTriggeredEvent=rO.SpeechSynthesisEvent=void 0;const nO=qT();class iO extends nO.PlatformEvent{constructor(e,t,r=nO.EventType.Info){super(e,r),this.privRequestId=t}get requestId(){return this.privRequestId}}rO.SpeechSynthesisEvent=iO;rO.SynthesisTriggeredEvent=class extends iO{constructor(e,t,r){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}};rO.ConnectingToSynthesisServiceEvent=class extends iO{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}};var sO;rO.SynthesisStartedEvent=class extends iO{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}};var oO,aO={};var lO,cO={};var uO,dO={};var pO,hO={};var fO,mO={};var vO,gO={};var yO,bO={};var xO,wO={};var SO,CO={};var EO,TO={};function NO(){return EO||(EO=1,function(e){var t=Ye&&Ye.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Ye&&Ye.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDetectSourceLanguagesOpenRangeOptionName=e.ForceDictationPropertyName=e.ServicePropertiesPropertyName=e.CancellationErrorCodePropertyName=e.OutputFormatPropertyName=e.SpeechSynthesisAdapter=e.AvatarSynthesisAdapter=void 0,r(gC,e),r(XT,e),r(JT,e),r(iN,e),r(sN,e),r(function(){if(E_)return oN;E_=1,Object.defineProperty(oN,"__esModule",{value:!0}),oN.IntentConnectionFactory=void 0;const e=P_(),t=g_(),r=sI(),n=NO(),i=GT;let s=class extends r.ConnectionFactoryBase{create(s,o,a){let l=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const e=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_IntentRegion),n=r.ConnectionFactoryBase.getHostSuffix(e);l=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+e+".sr.speech"+n)+"/speech/recognition/interactive/cognitiveservices/v1"}const c={format:"simple",language:s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(s,c,l);const u={};void 0!==o.token&&""!==o.token&&(u[o.headerName]=o.token),u[i.HeaderNames.ConnectionId]=a,s.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,l);const d="true"===s.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new e.WebsocketConnection(l,c,u,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(s),d,a))}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}};return oN.IntentConnectionFactory=s,oN}(),e),r(function(){if(R_)return I_;R_=1,Object.defineProperty(I_,"__esModule",{value:!0}),I_.VoiceProfileConnectionFactory=I_.SpeakerRecognitionConnectionFactory=void 0;const e=P_(),t=g_(),r=sI(),n=NO(),i=GT;class s extends r.ConnectionFactoryBase{create(s,o,a,l){let c=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!c){const e=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),n=r.ConnectionFactoryBase.getHostSuffix(e),i=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${e}.spr-frontend.speech${n}`),o=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");c=`${i}/speaker/ws/${this.scenarioToPath(o)}/${a}`}const u={format:"simple",language:s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(s,u,c);const d={};void 0!==o.token&&""!==o.token&&(d[o.headerName]=o.token),d[i.HeaderNames.ConnectionId]=l,d[i.HeaderNames.SpIDAuthKey]=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Key),s.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,c);const p="true"===s.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new e.WebsocketConnection(c,u,d,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(s),p,l))}scenarioToPath(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}return I_.SpeakerRecognitionConnectionFactory=class extends s{create(e,t,r){return super.create(e,t,"recognition",r)}},I_.VoiceProfileConnectionFactory=class extends s{create(e,t,r){return super.create(e,t,"profile",r)}},I_}(),e),r(k_,e),r(function(){if($_)return __;$_=1,Object.defineProperty(__,"__esModule",{value:!0}),__.ServiceRecognizerBase=void 0;const e=P_(),t=qT(),r=g_(),n=NO(),i=A_,s=M_,o=hR,a=L_,l=z_,c=F_,u=B_,d=U_,p=W_,h=H_,f=V_;let m=class m{constructor(e,i,s,o,a){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new t.ArgumentNullError("authentication");if(!i)throw new t.ArgumentNullError("connectionFactory");if(!s)throw new t.ArgumentNullError("audioSource");if(!o)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=o.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=i,this.privAudioSource=s,this.privRecognizerConfig=o,this.privIsDisposed=!1,this.privRecognizer=a,this.privRequestSession=new n.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new n.DynamicGrammarBuilder,this.privSpeechContext=new n.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new n.AgentConfig,"on"===this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!=typeof Blob&&"undefined"!=typeof Worker?this.privSetTimeout=t.Timeout.setTimeout:("undefined"!=typeof window&&(this.privSetTimeout=window.setTimeout.bind(window)),"undefined"!=typeof globalThis&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(e=>{if("ConnectionClosedEvent"===e.name){const t=e;(1003===t.statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,1007===t.statusCode?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${t.reason} websocket error code: ${t.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,t.createNoDashGuid)())}setTranslationJson(){const e=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(void 0!==e){const t=e.split(","),n=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),i=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),s=void 0!==n?a.NextAction.Synthesize:a.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:s},onSuccess:{action:s},output:{includePassThroughResults:!0,interimResults:{mode:l.Mode.Always}},targetLanguages:t},void 0!==i&&(this.privSpeechContext.getContext().translation.category=i),void 0!==n){const e={};for(const r of t)e[r]=n;this.privSpeechContext.getContext().synthesis={defaultVoices:e}}const o=this.privSpeechContext.getContext().phraseDetection||{};o.onSuccess={action:f.NextAction.Translate},o.onInterim={action:f.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=o}}setSpeechSegmentationTimeoutJson(){var e,t,n;const i=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),a=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),l=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationStrategy,void 0),c={mode:s.SegmentationMode.Normal};let u=!1;if(void 0!==l){u=!0;let e=s.SegmentationMode.Normal;switch(l.toLowerCase()){case"default":break;case"time":e=s.SegmentationMode.Custom;break;case"semantic":e=s.SegmentationMode.Semantic}c.mode=e}if(void 0!==i){u=!0;const e=parseInt(i,10);c.mode=s.SegmentationMode.Custom,c.segmentationSilenceTimeoutMs=e}if(void 0!==a){u=!0;const e=parseInt(a,10);c.mode=s.SegmentationMode.Custom,c.segmentationForcedTimeoutMs=e}if(u){const r=this.privSpeechContext.getContext().phraseDetection||{};switch(r.mode=this.recognitionMode,this.recognitionMode){case o.RecognitionMode.Conversation:r.conversation=null!=(e=r.conversation)?e:{segmentation:{}},r.conversation.segmentation=c;break;case o.RecognitionMode.Interactive:r.interactive=null!=(t=r.interactive)?t:{segmentation:{}},r.interactive.segmentation=c;break;case o.RecognitionMode.Dictation:r.dictation=null!=(n=r.dictation)?n:{},r.dictation.segmentation=c}this.privSpeechContext.getContext().phraseDetection=r}}setLanguageIdJson(){const e=this.privSpeechContext.getContext().phraseDetection||{};if(void 0!==this.privRecognizerConfig.autoDetectSourceLanguages){const t=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let r;1===t.length&&t[0]===n.AutoDetectSourceLanguagesOpenRangeOptionName&&(t[0]="UND"),r="Continuous"===this.privRecognizerConfig.languageIdMode?c.LanguageIdDetectionMode.DetectContinuous:c.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:t,mode:r,onSuccess:{action:u.NextAction.Recognize},onUnknown:{action:d.OnUnknownAction.None},priority:c.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:p.ResultType.Auto},phraseResults:{resultType:h.PhraseResultOutputType.Always}};const i=this.privRecognizerConfig.sourceLanguageModels;void 0!==i&&(e.customModels=i,e.onInterim={action:f.NextAction.None},e.onSuccess={action:f.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=e}setOutputDetailLevelJson(){this.privEnableSpeakerId&&("true"===this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}setSpeechStartEventSensitivityJson(){const e=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_StartEventSensitivity,void 0);if(void 0!==e){let t=!1;switch(e.toLowerCase()){case o.SpeechStartEventSensitivity.Low:case o.SpeechStartEventSensitivity.Medium:case o.SpeechStartEventSensitivity.High:t=!0}if(t){const t=this.privSpeechContext.getContext().phraseDetection||{};t.voiceOnsetSensitivity=e.toLowerCase(),this.privSpeechContext.getContext().phraseDetection=t}}}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,e)}set voiceProfileType(e){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)}set authentication(e){this.privAuthentication=e}isDisposed(){return this.privIsDisposed}dispose(e){return Ke(this,null,function*(){if(this.privIsDisposed=!0,void 0!==this.privConnectionPromise)try{const t=yield this.privConnectionPromise;yield t.dispose(e)}catch(t){return}})}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(t,i,s){return Ke(this,null,function*(){if(void 0!==this.recognizeOverride)return void(yield this.recognizeOverride(t,i,s));if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=t,"2"===this.privRecognizerConfig.recognitionEndpointVersion){const e=this.privSpeechContext.getContext().phraseDetection||{};e.mode=t,this.privSpeechContext.getContext().phraseDetection=e}this.setLanguageIdJson(),this.setTranslationJson(),void 0!==this.privRecognizerConfig.autoDetectSourceLanguages&&void 0!==this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.setSpeechStartEventSensitivityJson(),this.privSuccessCallback=i,this.privErrorCallback=s,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const o=this.connectImpl();let a;try{const t=yield this.audioSource.attach(this.privRequestSession.audioNodeId),r=yield this.audioSource.format,i=yield this.audioSource.deviceInfo;this.privIsLiveAudio=i.type&&i.type===n.type.Microphones,a=new e.ReplayableAudioNode(t,r.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(a,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:i}}catch(c){throw yield this.privRequestSession.onStopRecognizing(),c}try{yield o}catch(c){return void(yield this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,c))}const l=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,l),this.receiveMessage(),this.sendAudio(a).catch(e=>Ke(this,null,function*(){yield this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,e)}))})}stopRecognizing(){return Ke(this,null,function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}})}connect(){return Ke(this,null,function*(){return yield this.connectImpl(),Promise.resolve()})}connectAsync(e,t){this.connectImpl().then(()=>{try{e&&e()}catch(Nie){t&&t(Nie)}},e=>{try{t&&t(e)}catch(r){}})}disconnect(){return Ke(this,null,function*(){if(yield this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride()),void 0!==this.privConnectionPromise)try{yield(yield this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=void 0})}sendMessage(e){}sendNetworkMessage(e,r){return Ke(this,null,function*(){const n="string"==typeof r?t.MessageType.Text:t.MessageType.Binary,s="string"==typeof r?"application/json":"";return(yield this.fetchConnection()).send(new i.SpeechConnectionMessage(n,e,this.privRequestSession.requestId,s,r))})}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(e){this.privExpectContentAssessmentResponse=e}sendTelemetryData(){return Ke(this,null,function*(){const e=this.privRequestSession.getTelemetry();if(!0!==m.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(m.telemetryData)try{m.telemetryData(e)}catch(Nie){}const r=yield this.fetchConnection();yield r.send(new i.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))})}cancelRecognitionLocal(e,t,r){return Ke(this,null,function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,r))})}receiveMessage(){return Ke(this,null,function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection();const s=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!s)return this.receiveMessage();this.privServiceHasSentMessage=!0;const o=i.SpeechConnectionMessage.fromConnectionMessage(s);if(o.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(o.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const i=n.SpeechDetected.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset),s=new r.RecognitionEventArgs(i.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,s);break;case"speech.enddetected":let a;a=o.textBody.length>0?o.textBody:"{ Offset: 0 }";const l=n.SpeechDetected.fromJSON(a,this.privRequestSession.currentTurnAudioOffset),c=new r.RecognitionEventArgs(l.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,c);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const u=new r.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,u));e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(o))||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(o.path.toLowerCase(),o.textBody))}return this.receiveMessage()}catch(e){return null}})}updateSpeakerDiarizationAudioOffset(){const e=this.privRequestSession.recognitionBytesSent,t=0!==this.privAverageBytesPerMs?e/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(t)}sendSpeechContext(e,r){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const n=this.speechContext.toJSON();if(r&&this.privRequestSession.onSpeechContext(),n)return e.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",n))}setupTranslationWithLanguageId(){const e=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),t=void 0!==this.privRecognizerConfig.autoDetectSourceLanguages;if(void 0!==e&&t){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:p.ResultType.None},phraseResults:{resultType:h.PhraseResultOutputType.None}};const e=this.privSpeechContext.getContext().translation;if(e){const t=this.privRecognizerConfig.sourceLanguageModels;if(void 0!==t&&t.length>0){const e=this.privSpeechContext.getContext().phraseDetection||{};e.customModels=t,this.privSpeechContext.getContext().phraseDetection=e}void 0!==this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&(e.onSuccess={action:a.NextAction.Synthesize},e.onPassthrough={action:a.NextAction.Synthesize})}}}noOp(){}sendPrePayloadJSON(e,t=!0){return Ke(this,null,function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e,t),yield this.sendWaveHeader(e)})}sendWaveHeader(e){return Ke(this,null,function*(){const r=yield this.audioSource.format;return e.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",r.header))})}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then(e=>e.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(e,r,n){if(r.onSpeechContext(),!0!==m.telemetryDataEnabled){const e={context:{system:JSON.parse(n).context.system}};n=JSON.stringify(e)}if("true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){const e=JSON.parse(n);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",n=JSON.stringify(e)}if(n)return e.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.config",r.requestId,"application/json",n))}fetchConnection(){return Ke(this,null,function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(e=>e.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}sendAudio(e){return Ke(this,null,function*(){const r=yield this.audioSource.format;this.privAverageBytesPerMs=r.avgBytesPerSec/1e3;let n=Date.now();const s=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),o=r.avgBytesPerSec/1e3*parseInt(s,10),a=this.privRequestSession.recogNumber,l=()=>Ke(this,null,function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===a){const s=yield this.fetchConnection(),c=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let u,d;if(!c||c.isEnd?(u=null,d=0):(u=c.buffer,this.privRequestSession.onAudioSent(u.byteLength),d=o>=this.privRequestSession.bytesSent?0:Math.max(0,n-Date.now())),0!==d&&(yield this.delay(d)),null!==u&&(n=Date.now()+1e3*u.byteLength/(2*r.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===a){if(s.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,u)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),!(null==c?void 0:c.isEnd))return l();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}});return l()})}retryableConnect(){return Ke(this,null,function*(){let e=!1;this.privAuthFetchEventId=(0,t.createNoDashGuid)();const n=this.privRequestSession.sessionId;this.privConnectionId=void 0!==n?n:(0,t.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let i=0,s="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),r=yield t;yield this.privRequestSession.onAuthCompleted(!1);const n=yield this.privConnectionFactory.create(this.privRecognizerConfig,r,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(n.events),n.events.attach(e=>{this.connectionEvents.onEvent(e)});const o=yield n.open();if(200===o.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(o.statusCode),Promise.resolve(n);1006===o.statusCode&&(e=!0),i=o.statusCode,s=o.reason}return yield this.privRequestSession.onConnectionEstablishCompleted(i,s),Promise.reject(`Unable to contact server. StatusCode: ${i}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${s}`)})}delay(e){return new Promise(t=>this.privSetTimeout(t,e))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const r=new Uint8Array(e);t+=`${e.byteLength}\r\n`;for(let n=0;n<e.byteLength;n++)t+=r[n].toString(16).padStart(2,"0")+" ",(n+1)%16==0&&(console.info(t),t="")}console.info(t)}sendFinalAudio(){return Ke(this,null,function*(){const e=yield this.fetchConnection();yield e.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))})}configureConnection(){return Ke(this,null,function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e,!1),e)})}};return __.ServiceRecognizerBase=m,m.telemetryDataEnabled=!0,__}(),e),r(function(){if(q_)return G_;q_=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.ConversationServiceRecognizer=void 0;const e=g_(),t=NO();let r=class extends t.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.handleSpeechPhraseMessage=e=>Ke(this,null,function*(){return this.handleSpeechPhrase(e)}),this.handleSpeechHypothesisMessage=e=>this.handleSpeechHypothesis(e)}processTypeSpecificMessages(e){}handleRecognizedCallback(e,t,r){}handleRecognizingCallback(e,t,r){}processSpeechMessages(e){return Ke(this,null,function*(){let t=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),t=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&(yield this.handleSpeechPhraseMessage(e.textBody)),t=!0}return t})}cancelRecognition(e,t,r,n,i){}handleSpeechPhrase(r){return Ke(this,null,function*(){const n=t.SimpleSpeechPhrase.fromJSON(r,this.privRequestSession.currentTurnAudioOffset),i=t.EnumTranslation.implTranslateRecognitionResult(n.RecognitionStatus);let s;const o=new e.PropertyCollection;if(o.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,r),this.privRequestSession.onPhraseRecognized(n.Offset+n.Duration),e.ResultReason.Canceled===i){const e=t.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus),r=t.EnumTranslation.implTranslateCancelErrorCode(n.RecognitionStatus);yield this.cancelRecognitionLocal(e,r,t.EnumTranslation.implTranslateErrorDetails(r))}else if(n.RecognitionStatus!==t.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,i,n.DisplayText,n.Duration,n.Offset,n.Language,n.LanguageDetectionConfidence,n.SpeakerId,void 0,n.asJson(),o);else{const n=t.DetailedSpeechPhrase.fromJSON(r,this.privRequestSession.currentTurnAudioOffset);s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,i,n.Text,n.Duration,n.Offset,n.Language,n.LanguageDetectionConfidence,n.SpeakerId,void 0,n.asJson(),o)}this.handleRecognizedCallback(s,s.offset,this.privRequestSession.sessionId)}})}handleSpeechHypothesis(r){const n=t.SpeechHypothesis.fromJSON(r,this.privRequestSession.currentTurnAudioOffset),i=new e.PropertyCollection;i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,r);const s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,n.Text,n.Duration,n.Offset,n.Language,n.LanguageDetectionConfidence,n.SpeakerId,void 0,n.asJson(),i);this.privRequestSession.onHypothesis(n.Offset),this.handleRecognizingCallback(s,n.Duration,this.privRequestSession.sessionId)}};return G_.ConversationServiceRecognizer=r,G_}(),e),r((K_||(K_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerConfig=e.SpeechResultFormat=void 0;const t=g_(),r=NO(),n=hR;var i;(i=e.SpeechResultFormat||(e.SpeechResultFormat={}))[i.Simple=0]="Simple",i[i.Detailed=1]="Detailed",e.RecognizerConfig=class{constructor(e,n){this.privSpeechServiceConfig=e||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=n,this.privMaxRetryCount=parseInt(n.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=n.getProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===n.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n.RecognitionMode[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(e){this.parameters.setProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,e)}get sourceLanguageModels(){const e=[];let r=!1;if(void 0!==this.autoDetectSourceLanguages)for(const n of this.autoDetectSourceLanguages.split(",")){const i=n+t.PropertyId.SpeechServiceConnection_EndpointId.toString(),s=this.parameters.getProperty(i,void 0);void 0!==s?(e.push({language:n,endpoint:s}),r=!0):e.push({language:n,endpoint:""})}return r?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(e){this.privEnableSpeakerId=e}}}(J_)),J_),e),r(Y_,e),r(Z_,e),r(function(){if(X_)return eA;X_=1,Object.defineProperty(eA,"__esModule",{value:!0}),eA.SpeechConnectionFactory=void 0;const e=P_(),t=NO(),r=g_(),n=sI(),i=NO(),s=GT,o=nI,a=hR;let l=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}create(l,c,u){return Ke(this,null,function*(){let d=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const p=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),h=n.ConnectionFactoryBase.getHostSuffix(p),f=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+p+".stt.speech"+h),m={},v=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(v?d&&-1!==d.search(o.QueryParameterNames.CustomSpeechDeploymentId)||(m[o.QueryParameterNames.CustomSpeechDeploymentId]=v):g&&(d&&-1!==d.search(o.QueryParameterNames.Language)||(m[o.QueryParameterNames.Language]=g)),d&&-1!==d.search(o.QueryParameterNames.Format)||(m[o.QueryParameterNames.Format]=l.parameters.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),void 0!==l.autoDetectSourceLanguages&&(m[o.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(l,m,d),d){const e=new URL(d),t=e.pathname;""!==t&&"/"!==t||(e.pathname=this.universalUri+l.recognitionEndpointVersion,d=yield n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(e.toString()))}if(!d)switch(l.recognitionMode){case a.RecognitionMode.Conversation:d="true"===l.parameters.getProperty(t.ForceDictationPropertyName,"false")?f+this.dictationRelativeUri:void 0!==l.recognitionEndpointVersion&&parseInt(l.recognitionEndpointVersion,10)>1?`${f}${this.universalUri}${l.recognitionEndpointVersion}`:f+this.conversationRelativeUri;break;case a.RecognitionMode.Dictation:d=f+this.dictationRelativeUri;break;default:d=void 0!==l.recognitionEndpointVersion&&parseInt(l.recognitionEndpointVersion,10)>1?`${f}${this.universalUri}${l.recognitionEndpointVersion}`:f+this.interactiveRelativeUri}const y={};void 0!==c.token&&""!==c.token&&(y[c.headerName]=c.token),y[s.HeaderNames.ConnectionId]=u,y.connectionId=u;const b="true"===l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),x=new e.WebsocketConnection(d,m,y,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),b,u),w=x.uri;return l.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,w),x})}};return eA.SpeechConnectionFactory=l,eA}(),e),r(function(){if(tA)return rA;tA=1,Object.defineProperty(rA,"__esModule",{value:!0}),rA.ConversationTranscriberConnectionFactory=void 0;const e=P_(),t=g_(),r=NO(),n=sI(),i=NO(),s=GT,o=nI;let a=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.conversationRelativeUriV1="/speech/recognition/conversation/cognitiveservices/v1"}create(r,a,l){return Ke(this,null,function*(){let c=r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const u=r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),d=n.ConnectionFactoryBase.getHostSuffix(u),p=r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+u+".stt.speech"+d),h={},f=r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(f?c&&-1!==c.search(o.QueryParameterNames.CustomSpeechDeploymentId)||(h[o.QueryParameterNames.CustomSpeechDeploymentId]=f):m&&(c&&-1!==c.search(o.QueryParameterNames.Language)||(h[o.QueryParameterNames.Language]=m)),void 0!==r.autoDetectSourceLanguages&&(h[o.QueryParameterNames.EnableLanguageId]="true"),"1"===r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0))c=`${p}${this.universalUri}`;else{if(this.setV2UrlParams(r,h,c),c){const e=new URL(c),t=e.pathname;""!==t&&"/"!==t||(e.pathname=this.universalUri,c=yield n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(e.toString()))}c||(c=`${p}${this.conversationRelativeUriV1}`)}const v={};void 0!==a.token&&""!==a.token&&(v[a.headerName]=a.token),v[s.HeaderNames.ConnectionId]=l;const g="true"===r.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),y=new e.WebsocketConnection(c,h,v,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(r),g,l),b=y.uri;return r.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,b),y})}setV2UrlParams(e,n,i){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,o.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,o.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,o.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,o.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,o.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,o.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,o.QueryParameterNames.StableIntermediateThreshold]]).forEach((t,r)=>{this.setUrlParameter(r,t,e,n,i)});const s=JSON.parse(e.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach(e=>{n[e]=s[e]})}};return rA.ConversationTranscriberConnectionFactory=a,rA}(),e),r(function(){if(nA)return iA;nA=1,Object.defineProperty(iA,"__esModule",{value:!0}),iA.TranscriberConnectionFactory=void 0;const e=P_(),t=g_(),r=sI(),n=NO(),i=GT,s=nI;let o=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(s,o,a){let l=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const c=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"centralus"),u="wss://transcribe."+c+".cts.speech"+r.ConnectionFactoryBase.getHostSuffix(c)+this.multiaudioRelativeUri,d=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,u),p={};this.setQueryParams(p,s,l),l||(l=d);const h={};void 0!==o.token&&""!==o.token&&(h[o.headerName]=o.token),h[i.HeaderNames.ConnectionId]=a,s.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,l);const f="true"===s.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return Promise.resolve(new e.WebsocketConnection(l,p,h,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(s),f,a))}setQueryParams(e,r,i){const o=r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),a=r.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);o&&!(s.QueryParameterNames.CustomSpeechDeploymentId in e)&&(e[s.QueryParameterNames.CustomSpeechDeploymentId]=o),a&&!(s.QueryParameterNames.Language in e)&&(e[s.QueryParameterNames.Language]=a);const l="true"===r.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),c=r.parameters.getProperty(n.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple])!==t.OutputFormat[t.OutputFormat.Simple];(l||c)&&(e[s.QueryParameterNames.Format]=t.OutputFormat[t.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(r,e,i)}};return iA.TranscriberConnectionFactory=o,iA}(),e),r(function(){if(sA)return oA;sA=1,Object.defineProperty(oA,"__esModule",{value:!0}),oA.TranslationConnectionFactory=void 0;const e=P_(),t=lk,r=g_(),n=sI(),i=NO(),s=GT,o=nI,a=hR;let l=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}create(t,o,a){return Ke(this,null,function*(){let l=this.getEndpointUrl(t);const c={};if(this.setQueryParams(c,t,l),l){const e=new URL(l),t=e.pathname;""!==t&&"/"!==t||(e.pathname=this.universalUri,l=yield n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(e.toString()))}const u={};void 0!==o.token&&""!==o.token&&(u[o.headerName]=o.token),u[s.HeaderNames.ConnectionId]=a,t.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,l);const d="true"===t.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new e.WebsocketConnection(l,c,u,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(t),d,a)})}getEndpointUrl(e,i){const s=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),o=n.ConnectionFactoryBase.getHostSuffix(s);let a=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return a||(a="true"===e.parameters.getProperty("SPEECH-ForceV1Endpoint","false")?e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+o)+this.translationV1Uri:e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+o)+this.universalUri),!0===i?a:t.StringUtils.formatString(a,{region:s})}setQueryParams(e,t,n){e.from=t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),e.scenario=t.recognitionMode===a.RecognitionMode.Interactive?"interactive":t.recognitionMode===a.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(t,e,n),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,o.QueryParameterNames.StableTranslation,t,e,n);const i=t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);void 0!==i&&(e.voice=i,e.features="requireVoice")}};return oA.TranslationConnectionFactory=l,oA}(),e),r(c_(),e),r(function(){if(aA)return lA;aA=1,Object.defineProperty(lA,"__esModule",{value:!0}),lA.EnumTranslation=void 0;const e=g_(),t=NO();return lA.EnumTranslation=class{static implTranslateRecognitionResult(r,n=!1){let i=e.ResultReason.Canceled;switch(r){case t.RecognitionStatus.Success:i=e.ResultReason.RecognizedSpeech;break;case t.RecognitionStatus.EndOfDictation:i=n?e.ResultReason.RecognizedSpeech:e.ResultReason.NoMatch;break;case t.RecognitionStatus.NoMatch:case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:i=e.ResultReason.NoMatch;break;case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:i=e.ResultReason.Canceled}return i}static implTranslateCancelResult(r){let n=e.CancellationReason.EndOfStream;switch(r){case t.RecognitionStatus.Success:case t.RecognitionStatus.EndOfDictation:case t.RecognitionStatus.NoMatch:n=e.CancellationReason.EndOfStream;break;case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:n=e.CancellationReason.Error}return n}static implTranslateCancelErrorCode(r){let n=e.CancellationErrorCode.NoError;switch(r){case t.RecognitionStatus.Error:n=e.CancellationErrorCode.ServiceError;break;case t.RecognitionStatus.TooManyRequests:n=e.CancellationErrorCode.TooManyRequests;break;case t.RecognitionStatus.BadRequest:n=e.CancellationErrorCode.BadRequestParameters;break;case t.RecognitionStatus.Forbidden:n=e.CancellationErrorCode.Forbidden;break;default:n=e.CancellationErrorCode.NoError}return n}static implTranslateErrorDetails(t){let r="The speech service encountered an internal error and could not continue.";switch(t){case e.CancellationErrorCode.Forbidden:r="The recognizer is using a free subscription that ran out of quota.";break;case e.CancellationErrorCode.BadRequestParameters:r="Invalid parameter or unsupported audio format in the request.";break;case e.CancellationErrorCode.TooManyRequests:r="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return r}},lA}(),e),r(cA,e),r(function(){if(uA)return dA;uA=1,Object.defineProperty(dA,"__esModule",{value:!0}),dA.TranslationSynthesisEnd=void 0;const e=NO();return dA.TranslationSynthesisEnd=class t{constructor(t){this.privSynthesisEnd=JSON.parse(t),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(e){return new t(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}},dA}(),e),r(pA,e),r(function(){if(vA)return gA;vA=1,Object.defineProperty(gA,"__esModule",{value:!0}),gA.TranslationPhrase=void 0;const e=dN,t=NO(),r=OT;return gA.TranslationPhrase=class n{constructor(e,t){this.privTranslationPhrase=e,this.privTranslationPhrase.Offset+=t,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(e,t){return new n(JSON.parse(e),t)}static fromTranslationResponse(t,r){e.Contracts.throwIfNullOrUndefined(t,"translationResponse");const i=t.SpeechPhrase;return t.SpeechPhrase=void 0,i.Translation=t,i.Text=i.DisplayText,new n(i,r)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var e;return null==(e=this.privTranslationPhrase.PrimaryLanguage)?void 0:e.Language}get Confidence(){var e;return null==(e=this.privTranslationPhrase.PrimaryLanguage)?void 0:e.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const e=Le({},this.privTranslationPhrase),n=ze(Le({},e),{RecognitionStatus:t.RecognitionStatus[e.RecognitionStatus]});return e.Translation&&(n.Translation=ze(Le({},e.Translation),{TranslationStatus:r.TranslationStatus[e.Translation.TranslationStatus]})),JSON.stringify(n)}mapRecognitionStatus(e){return"string"==typeof e?t.RecognitionStatus[e]:"number"==typeof e?e:void 0}mapTranslationStatus(e){return"string"==typeof e?r.TranslationStatus[e]:"number"==typeof e?e:void 0}},gA}(),e),r(function(){if(yA)return bA;yA=1,Object.defineProperty(bA,"__esModule",{value:!0}),bA.TranslationServiceRecognizer=void 0;const e=qT(),t=g_(),r=NO();let n=class extends r.ConversationServiceRecognizer{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privTranslationRecognizer=i,this.connectionEvents.attach(e=>{"ConnectionEstablishedEvent"===e.name&&this.privTranslationRecognizer.onConnection()})}processTypeSpecificMessages(n){return Ke(this,null,function*(){const i=new t.PropertyCollection;let s=yield this.processSpeechMessages(n);if(s)return!0;const o=e=>Ke(this,null,function*(){if(i.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,e.asJson()),this.privRequestSession.onPhraseRecognized(e.Offset+e.Duration),e.RecognitionStatus===r.RecognitionStatus.Success){const t=this.fireEventForResult(e,i);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,t)}catch(n){}if(this.privSuccessCallback){try{this.privSuccessCallback(t.result)}catch(Nie){this.privErrorCallback&&this.privErrorCallback(Nie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const o=r.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),a=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,o,e.Text,e.Duration,e.Offset,e.Language,e.Confidence,void 0,e.asJson(),i);if(o===t.ResultReason.Canceled){const t=r.EnumTranslation.implTranslateCancelResult(e.RecognitionStatus),n=r.EnumTranslation.implTranslateCancelErrorCode(e.RecognitionStatus);yield this.cancelRecognitionLocal(t,n,r.EnumTranslation.implTranslateErrorDetails(n))}else if(e.RecognitionStatus!==r.RecognitionStatus.EndOfDictation){const e=new t.TranslationRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(n){}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(Nie){this.privErrorCallback&&this.privErrorCallback(Nie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0}}),a=e=>{i.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,e.asJson());const r=this.fireEventForResult(e,i);if(this.privRequestSession.onHypothesis(r.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,r)}catch(n){}s=!0};switch(n.messageType===e.MessageType.Text&&i.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,n.textBody),n.path.toLowerCase()){case"translation.hypothesis":a(r.TranslationHypothesis.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const e=JSON.parse(n.textBody);if(e.SpeechPhrase)yield o(r.TranslationPhrase.fromTranslationResponse(e,this.privRequestSession.currentTurnAudioOffset));else{const e=JSON.parse(n.textBody);e.SpeechHypothesis&&a(r.TranslationHypothesis.fromTranslationResponse(e,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":yield o(r.TranslationPhrase.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(n.binaryBody,this.privRequestSession.sessionId),s=!0;break;case"audio.end":case"translation.synthesis.end":const i=r.TranslationSynthesisEnd.fromJSON(n.textBody);switch(i.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const e=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),r=new t.TranslationSynthesisEventArgs(e,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,r)}catch(l){}}if(this.privTranslationRecognizer.canceled){const e=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,i.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,e)}catch(l){}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}s=!0}return s})}cancelRecognition(e,n,i,s,o){const a=new t.PropertyCollection;if(a.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[s]),this.privTranslationRecognizer.canceled){const r=new t.TranslationRecognitionCanceledEventArgs(e,i,o,s,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,r)}catch(Nie){}}if(this.privSuccessCallback){const e=new t.TranslationRecognitionResult(void 0,n,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(Nie){}}}handleRecognizingCallback(e,r,n){try{const i=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(e),r,n);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch(i){}}handleRecognizedCallback(e,r,n){try{const i=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(e),r,n);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,i)}catch(i){}}fireEventForResult(n,i){let s,o,a;if(void 0!==n.Translation.Translations){s=new t.Translations;for(const e of n.Translation.Translations)s.set(e.Language,e.Text||e.DisplayText)}n instanceof r.TranslationPhrase?(o=n.Translation&&n.Translation.TranslationStatus===e.TranslationStatus.Success?t.ResultReason.TranslatedSpeech:t.ResultReason.RecognizedSpeech,a=n.Confidence):o=t.ResultReason.TranslatingSpeech;const l=n.Language,c=new t.TranslationRecognitionResult(s,this.privRequestSession.requestId,o,n.Text,n.Duration,n.Offset,l,a,n.Translation.FailureReason,n.asJson(),i);return new t.TranslationRecognitionEventArgs(c,n.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(e,r){const n=void 0===e?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,i=new t.TranslationSynthesisResult(n,e),s=new t.TranslationSynthesisEventArgs(i,r);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,s)}catch(o){}}};return bA.TranslationServiceRecognizer=n,bA}(),e),r(xA,e),r(SA,e),r(EA,e),r(function(){if(NA)return PA;NA=1,Object.defineProperty(PA,"__esModule",{value:!0}),PA.SpeechServiceRecognizer=void 0;const e=g_(),t=NO();let r=class extends t.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privSpeechRecognizer=i}processTypeSpecificMessages(r){return Ke(this,null,function*(){let n;const i=new e.PropertyCollection;let s=!1;switch(r.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const a=t.SpeechHypothesis.fromJSON(r.textBody,this.privRequestSession.currentTurnAudioOffset);i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.asJson()),n=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,a.Text,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,void 0,void 0,a.asJson(),i),this.privRequestSession.onHypothesis(a.Offset);const l=new e.SpeechRecognitionEventArgs(n,a.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch(o){}s=!0;break;case"speech.phrase":const c=t.SimpleSpeechPhrase.fromJSON(r.textBody,this.privRequestSession.currentTurnAudioOffset);i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,c.asJson());const u=t.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(c.Offset+c.Duration),e.ResultReason.Canceled===u){const e=t.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),r=t.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(e,r,t.EnumTranslation.implTranslateErrorDetails(r))}else{if(c.RecognitionStatus===t.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])n=new e.SpeechRecognitionResult(this.privRequestSession.requestId,u,c.DisplayText,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,void 0,void 0,c.asJson(),i);else{const s=t.DetailedSpeechPhrase.fromJSON(r.textBody,this.privRequestSession.currentTurnAudioOffset);i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.asJson()),n=new e.SpeechRecognitionResult(this.privRequestSession.requestId,u,s.RecognitionStatus===t.RecognitionStatus.Success?s.NBest[0].Display:"",s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,void 0,void 0,s.asJson(),i)}const s=new e.SpeechRecognitionEventArgs(n,n.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,s)}catch(o){}if(this.privSuccessCallback){try{this.privSuccessCallback(n)}catch(Nie){this.privErrorCallback&&this.privErrorCallback(Nie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0}return s})}cancelRecognition(r,n,i,s,o){const a=new e.PropertyCollection;if(a.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[s]),this.privSpeechRecognizer.canceled){const t=new e.SpeechRecognitionCanceledEventArgs(i,o,s,void 0,r);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch(Nie){}}if(this.privSuccessCallback){const t=new e.SpeechRecognitionResult(n,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(t),this.privSuccessCallback=void 0}catch(Nie){}}}};return PA.SpeechServiceRecognizer=r,PA}(),e),r(function(){if(RA)return IA;RA=1,Object.defineProperty(IA,"__esModule",{value:!0}),IA.ConversationTranscriptionServiceRecognizer=void 0;const e=g_(),t=NO(),r=kA,n=hR;let i=class extends t.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privConversationTranscriber=i,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const t=this.privSpeechContext.getContext().phraseDetection||{};t.mode=n.RecognitionMode.Conversation;const i={};i.mode=r.SpeakerDiarizationMode.Anonymous,i.audioSessionId=this.privDiarizationSessionId,i.audioOffsetMs=0,i.diarizeIntermediates="true"===this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false"),t.speakerDiarization=i,this.privSpeechContext.getContext().phraseDetection=t}}processTypeSpecificMessages(r){return Ke(this,null,function*(){let n;const i=new e.PropertyCollection;i.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,r.textBody);let s=!1;switch(r.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const a=t.SpeechHypothesis.fromJSON(r.textBody,this.privRequestSession.currentTurnAudioOffset);n=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,a.Text,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,a.SpeakerId,void 0,a.asJson(),i),this.privRequestSession.onHypothesis(a.Offset);const l=new e.ConversationTranscriptionEventArgs(n,a.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch(o){}s=!0;break;case"speech.phrase":const c=t.SimpleSpeechPhrase.fromJSON(r.textBody,this.privRequestSession.currentTurnAudioOffset),u=t.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(c.Offset+c.Duration),e.ResultReason.Canceled===u){const e=t.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),r=t.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(e,r,t.EnumTranslation.implTranslateErrorDetails(r))}else if(!this.privRequestSession.isSpeechEnded||u!==e.ResultReason.NoMatch||c.RecognitionStatus===t.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])n=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,u,c.DisplayText,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,c.asJson(),i);else{const s=t.DetailedSpeechPhrase.fromJSON(r.textBody,this.privRequestSession.currentTurnAudioOffset);n=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,u,s.RecognitionStatus===t.RecognitionStatus.Success?s.NBest[0].Display:void 0,s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,c.SpeakerId,void 0,s.asJson(),i)}const s=new e.ConversationTranscriptionEventArgs(n,n.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,s)}catch(o){}}s=!0}return s})}cancelRecognition(r,n,i,s,o){if((new e.PropertyCollection).setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[s]),this.privConversationTranscriber.canceled){const t=new e.ConversationTranscriptionCanceledEventArgs(i,o,s,void 0,r);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,t)}catch(Nie){}}}};return IA.ConversationTranscriptionServiceRecognizer=i,IA}(),e),r(function(){if(_A)return AA;_A=1,Object.defineProperty(AA,"__esModule",{value:!0}),AA.TranscriptionServiceRecognizer=void 0;const e=qT(),t=g_(),r=NO(),n=A_;let i=class extends r.ConversationServiceRecognizer{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privTranscriberRecognizer=s,this.sendPrePayloadJSONOverride=e=>this.sendTranscriptionStartJSON(e),"true"===this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)&&this.privSpeechContext.setWordLevelTimings()}sendSpeechEventAsync(e,t){return Ke(this,null,function*(){if(this.privRequestSession.isRecognizing){const r=yield this.fetchConnection();yield this.sendSpeechEvent(r,this.createSpeechEventPayload(e,t))}})}sendMeetingSpeechEventAsync(e,t){return Ke(this,null,function*(){if(this.privRequestSession.isRecognizing){const r=yield this.fetchConnection();yield this.sendSpeechEvent(r,this.createMeetingSpeechEventPayload(e,t))}})}processTypeSpecificMessages(e){return this.processSpeechMessages(e)}handleRecognizedCallback(e,r,n){try{const i=new t.SpeechRecognitionEventArgs(e,r,n);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,i),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(Nie){this.privErrorCallback&&this.privErrorCallback(Nie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch(i){}}handleRecognizingCallback(e,r,n){try{const i=new t.SpeechRecognitionEventArgs(e,r,n);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,i)}catch(i){}}cancelRecognition(e,n,i,s,o){const a=new t.PropertyCollection;if(a.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[s]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const r=new t.MeetingTranscriptionCanceledEventArgs(i,o,s,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,r)}catch(Nie){}}}else if(this.privTranscriberRecognizer.canceled){const r=new t.ConversationTranscriptionCanceledEventArgs(i,o,s,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,r)}catch(Nie){}}if(this.privSuccessCallback){const e=new t.SpeechRecognitionResult(n,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(Nie){}}}sendTranscriptionStartJSON(e){return Ke(this,null,function*(){if(yield this.sendSpeechContext(e,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const t=this.privTranscriberRecognizer.getMeetingInfo(),r=this.createMeetingSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,r)}else{const t=this.privTranscriberRecognizer.getConversationInfo(),r=this.createSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,r)}yield this.sendWaveHeader(e)})}sendSpeechEvent(t,r){const i=JSON.stringify(r);if(i)return t.send(new n.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",i))}createSpeechEventPayload(e,t){const r={id:"meeting",name:t,meeting:e.conversationProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r}createMeetingSpeechEventPayload(e,t){const r={id:"meeting",name:t,meeting:e.meetingProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r}};return AA.TranscriptionServiceRecognizer=i,AA}(),e),r(function(){if(jA)return OA;jA=1,Object.defineProperty(OA,"__esModule",{value:!0}),OA.DetailedSpeechPhrase=void 0;const e=NO();return OA.DetailedSpeechPhrase=class t{constructor(e,t){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(t)}static fromJSON(e,r){return new t(e,r)}updateOffsets(e){if(this.privDetailedSpeechPhrase.Offset+=e,this.privDetailedSpeechPhrase.NBest)for(const t of this.privDetailedSpeechPhrase.NBest){if(t.Words)for(const r of t.Words)r.Offset+=e;if(t.DisplayWords)for(const r of t.DisplayWords)r.Offset+=e}}asJson(){const t=Le({},this.privDetailedSpeechPhrase);return JSON.stringify(ze(Le({},t),{RecognitionStatus:e.RecognitionStatus[t.RecognitionStatus]}))}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(t){return"string"==typeof t?e.RecognitionStatus[t]:"number"==typeof t?t:void 0}},OA}(),e),r(function(){if(DA)return MA;DA=1,Object.defineProperty(MA,"__esModule",{value:!0}),MA.SimpleSpeechPhrase=void 0;const e=NO();return MA.SimpleSpeechPhrase=class t{constructor(e,t=0){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(t)}static fromJSON(e,r){return new t(e,r)}updateOffset(e){this.privSimpleSpeechPhrase.Offset+=e}asJson(){const t=Le({},this.privSimpleSpeechPhrase);return JSON.stringify(ze(Le({},t),{RecognitionStatus:e.RecognitionStatus[t.RecognitionStatus]}))}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(t){return"string"==typeof t?e.RecognitionStatus[t]:"number"==typeof t?t:void 0}},MA}(),e),r(LA,e),r(function(){if(zA)return FA;zA=1,Object.defineProperty(FA,"__esModule",{value:!0}),FA.IntentServiceRecognizer=void 0;const e=qT(),t=g_(),r=NO();let n=class extends r.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privIntentRecognizer=i,this.privIntentDataSent=!1,n.recognitionEndpointVersion="1"}setIntents(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0}processTypeSpecificMessages(n){let i,s,o=!1;const a=new t.PropertyCollection;switch(n.messageType===e.MessageType.Text&&a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,n.textBody),n.path.toLowerCase()){case"speech.hypothesis":const e=r.SpeechHypothesis.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset);if(i=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.ResultReason.RecognizingIntent,e.Text,e.Duration,e.Offset,e.Language,e.LanguageDetectionConfidence,void 0,e.asJson(),a),this.privRequestSession.onHypothesis(i.offset),s=new t.IntentRecognitionEventArgs(i,e.Offset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,s)}catch(c){}o=!0;break;case"speech.phrase":const l=r.SimpleSpeechPhrase.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset);i=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),l.DisplayText,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,void 0,l.asJson(),a),s=new t.IntentRecognitionEventArgs(i,i.offset,this.privRequestSession.sessionId);const u=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch(c){}if(this.privSuccessCallback){try{this.privSuccessCallback(i)}catch(Nie){this.privErrorCallback&&this.privErrorCallback(Nie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||t.ResultReason.NoMatch===s.result.reason?(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),u()):this.privPendingIntentArgs=s,o=!0;break;case"response":if(s=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===s){if(""===n.textBody)return;s=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const d=r.IntentResponse.fromJSON(n.textBody);if(null!==d&&d.topScoringIntent&&d.topScoringIntent.intent){let e=this.privAddedLmIntents[d.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent),e){const r=void 0===e||void 0===e.intentName?d.topScoringIntent.intent:e.intentName;let i=s.result.reason;void 0!==r&&(i=t.ResultReason.RecognizedIntent);const o=void 0!==s.result.properties?s.result.properties:new t.PropertyCollection;o.setProperty(t.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,n.textBody),s=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult(r,s.result.resultId,i,s.result.text,s.result.duration,s.result.offset,void 0,void 0,s.result.errorDetails,s.result.json,o),s.offset,s.sessionId)}}if(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch(c){}if(this.privSuccessCallback){try{this.privSuccessCallback(s.result)}catch(Nie){this.privErrorCallback&&this.privErrorCallback(Nie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}o=!0}const l=new e.Deferred;return l.resolve(o),l.promise}cancelRecognition(e,n,i,s,o){const a=new t.PropertyCollection;if(a.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[s]),this.privIntentRecognizer.canceled){const r=new t.IntentRecognitionCanceledEventArgs(i,o,s,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,r)}catch(Nie){}}if(this.privSuccessCallback){const e=new t.IntentRecognitionResult(void 0,n,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(Nie){}}}};return FA.IntentServiceRecognizer=n,FA}(),e),r(BA,e),r(WA,e),r(HA,e),r(YA,e),r(ej,e),r(function(){if(hj)return nj;hj=1,Object.defineProperty(nj,"__esModule",{value:!0}),nj.DialogServiceAdapter=void 0;const e=P_(),t=KE,r=qT(),n=iP,i=g_(),s=ij,o=NO(),a=oj,l=pj,c=fj,u=A_;let d=class extends o.ServiceRecognizerBase{constructor(e,t,n,i,o){super(e,t,n,i,o),this.privEvents=new r.EventSource,this.privDialogServiceConnector=o,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new s.DialogServiceTurnStateManager,this.recognizeOverride=(e,t,r)=>this.listenOnce(e,t,r),this.postConnectImplOverride=e=>this.dialogConnectImpl(e),this.configConnectionOverride=e=>this.configConnection(e),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=n,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(e=>{"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0)})}sendMessage(e){return Ke(this,null,function*(){const t=(0,r.createGuid)(),n=(0,r.createNoDashGuid)(),i={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},s=JSON.stringify(i),o=yield this.fetchConnection();yield o.send(new u.SpeechConnectionMessage(r.MessageType.Text,"agent",n,"application/json",s))})}privDisconnect(){return Ke(this,null,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1})}processTypeSpecificMessages(e){const t=new i.PropertyCollection;let n,s;switch(e.messageType===r.MessageType.Text&&t.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":const r=o.SimpleSpeechPhrase.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(r.Offset+r.Duration),r.RecognitionStatus!==o.RecognitionStatus.TooManyRequests&&r.RecognitionStatus!==o.RecognitionStatus.Error){const e=this.fireEventForResult(r,t);if(this.privLastResult=e.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,e)}catch(l){}}s=!0;break;case"speech.hypothesis":const a=o.SpeechHypothesis.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);n=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,a.Text,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,void 0,void 0,a.asJson(),t),this.privRequestSession.onHypothesis(a.Offset);const c=new i.SpeechRecognitionEventArgs(n,a.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,c)}catch(l){}s=!0;break;case"speech.keyword":const u=o.SpeechKeyword.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);n=new i.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===u.Status?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,u.Text,u.Duration,u.Offset,void 0,void 0,void 0,void 0,u.asJson(),t),"Accepted"!==u.Status&&(this.privLastResult=n);const d=new i.SpeechRecognitionEventArgs(n,n.duration,n.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,d)}catch(l){}s=!0;break;case"audio":{const t=e.requestId.toUpperCase(),r=this.privTurnStateManager.GetTurn(t);try{e.binaryBody?r.audioStream.write(e.binaryBody):r.endAudioStream()}catch(l){}}s=!0;break;case"response":this.handleResponseMessage(e),s=!0}const a=new r.Deferred;return a.resolve(s),a.promise}cancelRecognition(e,t,r,n,s){return Ke(this,null,function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){const t=new i.PropertyCollection;t.setProperty(o.CancellationErrorCodePropertyName,i.CancellationErrorCode[n]);const a=new i.SpeechRecognitionCanceledEventArgs(r,s,n,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,a)}catch(Nie){}if(this.privSuccessCallback){const e=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,t);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(Nie){}}}})}listenOnce(t,r,n){return Ke(this,null,function*(){this.privRecognizerConfig.recognitionMode=t,this.privSuccessCallback=r,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const s=this.connectImpl(),o=this.sendPreAudioMessages(),a=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),l=yield this.privDialogAudioSource.format,c=yield this.privDialogAudioSource.deviceInfo,u=new e.ReplayableAudioNode(a,l.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield s,yield o}catch(p){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,p),Promise.resolve()}const d=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.sendAudio(u).then(()=>{},e=>Ke(this,null,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,e)}))})}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){const e=new r.Deferred,t=()=>Ke(this,null,function*(){try{const n=this.isDisposed(),s=!this.isDisposed()&&this.terminateMessageLoop;if(n||s)return void e.resolve(void 0);const a=yield this.fetchConnection(),l=yield a.read();if(!l)return t();const c=u.SpeechConnectionMessage.fromConnectionMessage(l);switch(c.path.toLowerCase()){case"turn.start":{const e=c.requestId.toUpperCase();e!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(e):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const e=o.SpeechDetected.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset),t=new i.RecognitionEventArgs(e.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,t);break;case"speech.enddetected":let n;n=c.textBody.length>0?c.textBody:"{ Offset: 0 }";const s=o.SpeechDetected.fromJSON(n,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(s.Offset);const a=new i.RecognitionEventArgs(s.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,a);break;case"turn.end":{const e=c.requestId.toUpperCase();if(e!==this.privRequestSession.requestId.toUpperCase())this.privTurnStateManager.CompleteTurn(e);else{const e=new i.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,e),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(Nie){this.privErrorCallback&&this.privErrorCallback(Nie)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{(yield this.processTypeSpecificMessages(c))||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(c.path.toLowerCase(),c.textBody))}catch(Nie){}}return t()}catch(n){this.terminateMessageLoop=!0,e.resolve()}});return t().catch(e=>{r.Events.instance.onEvent(new r.BackgroundEvent(e))}),e.promise}startMessageLoop(){return Ke(this,null,function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(e){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,e)}return Promise.resolve()})}configConnection(e){return Ke(this,null,function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(e),e)})}sendPreAudioMessages(){return Ke(this,null,function*(){const e=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(e,!0),yield this.sendAgentContext(e),yield this.sendWaveHeader(e)})}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const e=this.agentConfig.get();e.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(e)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const n=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new u.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",n))}}sendAgentContext(e){const t=(0,r.createGuid)(),n=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),s={channelData:"",context:{interactionId:t},messagePayload:void 0===typeof n?void 0:n,version:.5},o=JSON.stringify(s);return e.send(new u.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",o))}fireEventForResult(e,t){const r=o.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),n=new i.SpeechRecognitionResult(this.privRequestSession.requestId,r,e.DisplayText,e.Duration,e.Offset,e.Language,e.LanguageDetectionConfidence,void 0,void 0,e.asJson(),t);return new i.SpeechRecognitionEventArgs(n,e.Offset,this.privRequestSession.sessionId)}handleResponseMessage(e){const t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":const o=e.requestId.toUpperCase(),l=a.ActivityPayloadResponse.fromJSON(e.textBody),c=this.privTurnStateManager.GetTurn(o);if(l.conversationId){const e=this.agentConfig.get();e.botInfo.conversationId=l.conversationId,this.agentConfig.set(e)}const u=c.processActivityPayload(l,n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),d=new i.ActivityReceivedEventArgs(l.messagePayload,u);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,d)}catch(s){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(e.textBody))}catch(s){}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${t.messageType}. Ignoring.`))}}onEvent(e){this.privEvents.onEvent(e),r.Events.instance.onEvent(e)}addKeywordContextData(){const e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===e)return;const t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),r=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),n=e.split(";"),i=void 0===t?[]:t.split(";"),s=void 0===r?[]:r.split(";"),o=[];for(let a=0;a<n.length;a++){const e={text:n[a]};a<i.length&&(e.startOffset=Number(i[a])),a<s.length&&(e.duration=Number(s[a])),o.push(e)}this.speechContext.getContext().invocationSource=l.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:o,onReject:{action:c.OnRejectAction.EndOfTurn},type:c.KeywordDetectionType.StartTrigger}]}};return nj.DialogServiceAdapter=d,nj}(),e),r(mj,e),r(Xj(),e),r(eO,e),r(function(){if(sO)return tO;sO=1,Object.defineProperty(tO,"__esModule",{value:!0}),tO.SynthesisTurn=void 0;const e=qT(),t=nP,r=g_(),n=eO,i=rO;return tO.SynthesisTurn=class s{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,e.createNoDashGuid)(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const e=new r.PropertyCollection;return e.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),e}}getAllReceivedAudio(){return Ke(this,null,function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null})}getAllReceivedAudioWithHeader(){return Ke(this,null,function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(e),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()})}startNewSynthesis(e,r,n,s){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=r,this.privIsSSML=n,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",void 0!==s&&(this.privTurnAudioDestination=s,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,void 0===s?void 0:s.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(200===e)return this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()}onServiceResponseMessage(e){const t=JSON.parse(e);this.streamId=t.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(t){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const r=JSON.parse(t);r.webrtc&&(this.privWebRTCSDP=r.webrtc.connectionString)}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}constructSynthesisResult(){return Ke(this,null,function*(){const e=yield this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,e,void 0,this.extraProperties,this.audioDuration)})}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(t){e.Events.instance.onEvent(t)}static isXmlTag(e){return e.length>=2&&"<"===e[0]&&">"===e[e.length-1]}updateTextOffset(e,t){t===n.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!s.isXmlTag(e)&&this.updateTextOffset(e,t))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!s.isXmlTag(e)&&this.updateTextOffset(e,t)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return Ke(this,null,function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(Nie){this.privReceivedAudio=new ArrayBuffer(0)}}})}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}},tO}(),e),r(function(){if(oO)return aO;oO=1,Object.defineProperty(aO,"__esModule",{value:!0}),aO.SynthesisAdapterBase=void 0;const e=qT(),t=g_(),r=NO(),n=A_;let i=class{constructor(n,i,s,o){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!n)throw new e.ArgumentNullError("authentication");if(!i)throw new e.ArgumentNullError("connectionFactory");if(!s)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=n,this.privConnectionFactory=i,this.privSynthesizerConfig=s,this.privIsDisposed=!1,this.privSessionAudioDestination=o,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(e=>{if("ConnectionClosedEvent"===e.name){const r=e;1e3!==r.statusCode&&this.cancelSynthesisLocal(t.CancellationReason.Error,1007===r.statusCode?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${r.reason} websocket error code: ${r.statusCode}`)}})}get synthesizerConfig(){return this.privSynthesizerConfig}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}isDisposed(){return this.privIsDisposed}dispose(e){return Ke(this,null,function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}})}connect(){return Ke(this,null,function*(){yield this.connectImpl()})}sendNetworkMessage(t,r){return Ke(this,null,function*(){const i="string"==typeof r?e.MessageType.Text:e.MessageType.Binary,s="string"==typeof r?"application/json":"";return(yield this.fetchConnection()).send(new n.SpeechConnectionMessage(i,t,this.privSynthesisTurn.requestId,s,r))})}Speak(e,r,n,i,s,o){return Ke(this,null,function*(){let a;if(a=r?e:this.privSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(a,n,i,s);this.privSuccessCallback=i,this.privErrorCallback=s,this.privSynthesisTurn.startNewSynthesis(n,e,r,o);try{yield this.connectImpl();const e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,a,n),this.onSynthesisStarted(n),this.receiveMessage()}catch(Nie){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,Nie),Promise.reject(Nie)}})}stopSpeaking(){return Ke(this,null,function*(){return yield this.connectImpl(),(yield this.fetchConnection()).send(new n.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))})}cancelSynthesis(e,n,i,s){const o=new t.PropertyCollection;o.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[i]);const a=new t.SpeechSynthesisResult(e,t.ResultReason.Canceled,void 0,s,o);if(this.onSynthesisCancelled(a),this.privSuccessCallback)try{this.privSuccessCallback(a)}catch(Nie){}}cancelSynthesisLocal(e,t,r){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,r))}processTypeSpecificMessages(e){return!0}receiveMessage(){return Ke(this,null,function*(){try{const s=yield this.fetchConnection(),o=yield s.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!o)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const a=n.SpeechConnectionMessage.fromConnectionMessage(o);if(a.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(a.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(a.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(a.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===a.streamId.toLowerCase()&&a.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(a.binaryBody),this.onSynthesizing(a.binaryBody),void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(a.binaryBody));break;case"audio.metadata":const n=r.SynthesisAudioMetadata.fromJSON(a.textBody).Metadata;for(const e of n)switch(e.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(e);const n=new t.SpeechSynthesisWordBoundaryEventArgs(e.Data.Offset,e.Data.Duration,e.Data.text.Text,e.Data.text.Length,e.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,e.Data.text.BoundaryType);this.onWordBoundary(n);break;case r.MetadataType.Bookmark:const i=new t.SpeechSynthesisBookmarkEventArgs(e.Data.Offset,e.Data.Bookmark);this.onBookmarkReached(i);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(e),e.Data.IsLastAnimation){const r=new t.SpeechSynthesisVisemeEventArgs(e.Data.Offset,e.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(r)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(e);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(e)}break;case"turn.end":let s;this.privSynthesisTurn.onServiceTurnEndResponse();try{s=yield this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(s)}catch(i){this.privErrorCallback&&this.privErrorCallback(i)}this.onSynthesisCompleted(s);break;default:this.processTypeSpecificMessages(a)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(a.path.toLowerCase(),a.textBody))}return this.receiveMessage()}catch(Nie){}})}sendSynthesisContext(t){this.setSynthesisContextSynthesisSection();const r=this.synthesisContext.toJSON();if(r)return t.send(new n.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",r))}setSpeechConfigSynthesisSection(){}connectImpl(r=!1){if(null!=this.privConnectionPromise)return this.privConnectionPromise.then(t=>t.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,e.createNoDashGuid)(),this.privConnectionId=(0,e.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const n=r?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=n.then(e=>Ke(this,null,function*(){this.privSynthesisTurn.onAuthCompleted(!1);const n=yield this.privConnectionFactory.create(this.privSynthesizerConfig,e,this.privConnectionId);n.events.attach(e=>{this.connectionEvents.onEvent(e)});const i=yield n.open();return 200===i.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(i.statusCode),Promise.resolve(n)):403!==i.statusCode||r?(this.privSynthesisTurn.onConnectionEstablishCompleted(i.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${i.statusCode},\n                    ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Url)} Reason: ${i.reason}`)):this.connectImpl(!0)}),e=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(e)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(t,r){if(r)return t.send(new n.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",r))}sendSsmlMessage(t,r,i){return t.send(new n.SpeechConnectionMessage(e.MessageType.Text,"ssml",i,"application/ssml+xml",r))}fetchConnection(){return Ke(this,null,function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(t=>t.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}configureConnection(){return Ke(this,null,function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(this.setSpeechConfigSynthesisSection(),yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)})}onAvatarEvent(e){}onSynthesisStarted(e){}onSynthesizing(e){}onSynthesisCancelled(e){}onSynthesisCompleted(e){}onWordBoundary(e){}onVisemeReceived(e){}onBookmarkReached(e){}};return aO.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,aO}(),e);var n=function(){if(lO)return cO;lO=1,Object.defineProperty(cO,"__esModule",{value:!0}),cO.AvatarSynthesisAdapter=void 0;const e=g_(),t=NO();let r=class extends t.SynthesisAdapterBase{constructor(e,t,r,n,i){super(e,t,r,void 0),this.privAvatarSynthesizer=n,this.privSynthesizer=n,this.privAvatarConfig=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var t,r,n,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:null==(t=this.privAvatarConfig.videoFormat)?void 0:t.bitrate,codec:null==(r=this.privAvatarConfig.videoFormat)?void 0:r.codec,crop:{bottomRight:{x:null==(s=null==(i=null==(n=this.privAvatarConfig.videoFormat)?void 0:n.cropRange)?void 0:i.bottomRight)?void 0:s.x,y:null==(l=null==(a=null==(o=this.privAvatarConfig.videoFormat)?void 0:o.cropRange)?void 0:a.bottomRight)?void 0:l.y},topLeft:{x:null==(d=null==(u=null==(c=this.privAvatarConfig.videoFormat)?void 0:c.cropRange)?void 0:u.topLeft)?void 0:d.x,y:null==(f=null==(h=null==(p=this.privAvatarConfig.videoFormat)?void 0:p.cropRange)?void 0:h.topLeft)?void 0:f.y}},resolution:{height:null==(m=this.privAvatarConfig.videoFormat)?void 0:m.height,width:null==(v=this.privAvatarConfig.videoFormat)?void 0:v.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:null!=(g=this.privAvatarConfig.remoteIceServers)?g:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:null==(y=this.privAvatarConfig.backgroundImage)?void 0:y.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(t){if(this.privAvatarSynthesizer.avatarEventReceived){const n=new e.AvatarEventArgs(t.Data.Offset,t.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,n)}catch(r){}}}};return cO.AvatarSynthesisAdapter=r,cO}();Object.defineProperty(e,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return n.AvatarSynthesisAdapter}});var i=function(){if(uO)return dO;uO=1,Object.defineProperty(dO,"__esModule",{value:!0}),dO.SpeechSynthesisAdapter=void 0;const e=g_(),t=NO();let r=class extends t.SynthesisAdapterBase{constructor(e,t,r,n,i){super(e,t,r,i),this.privSpeechSynthesizer=n,this.privSynthesizer=n}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(t){const r=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(t,e.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,r)}onSynthesizing(t){if(this.privSpeechSynthesizer.synthesizing)try{const r=this.privSynthesisTurn.audioOutputFormat.addHeader(t),n=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(this.privSynthesisTurn.requestId,e.ResultReason.SynthesizingAudio,r));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,n)}catch(r){}}onSynthesisCancelled(t){if(this.privSpeechSynthesizer.SynthesisCanceled){const r=new e.SpeechSynthesisEventArgs(t);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,r)}catch(Nie){}}}onSynthesisCompleted(t){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new e.SpeechSynthesisEventArgs(t))}catch(Nie){}}onWordBoundary(e){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(t){}}onVisemeReceived(e){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(t){}}onBookmarkReached(e){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,e)}catch(t){}}};return dO.SpeechSynthesisAdapter=r,dO}();Object.defineProperty(e,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),r(function(){if(pO)return hO;pO=1,Object.defineProperty(hO,"__esModule",{value:!0}),hO.SynthesisRestAdapter=void 0;const e=P_(),t=g_(),r=sI(),n=GT;return hO.SynthesisRestAdapter=class{constructor(n,i){let s=n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!s){const e=n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"westus"),i=r.ConnectionFactoryBase.getHostSuffix(e);s=n.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`https://${e}.tts.speech${i}`)}this.privUri=`${s}/cognitiveservices/voices/list`;const o=e.RestConfigBase.requestOptions;this.privRestAdapter=new e.RestMessageAdapter(o),this.privAuthentication=i}getVoicesList(t){return this.privRestAdapter.setHeaders(n.HeaderNames.ConnectionId,t),this.privAuthentication.fetch(t).then(t=>(this.privRestAdapter.setHeaders(t.headerName,t.token),this.privRestAdapter.request(e.RestRequestType.Get,this.privUri)))}},hO}(),e),r((fO||(fO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesizerConfig=e.SynthesisServiceType=void 0;const t=NO();var r,n;(n=r=e.SynthesisServiceType||(e.SynthesisServiceType={}))[n.Standard=0]="Standard",n[n.Custom=1]="Custom",e.SynthesizerConfig=class{constructor(e,n){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=e||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=n}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}set synthesisVideoSection(e){this.privSpeechServiceConfig.Context.synthesis={video:e}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}setContextFromJson(e){const t=JSON.parse(e);t.system&&(this.privSpeechServiceConfig.Context.system=t.system),t.os&&(this.privSpeechServiceConfig.Context.os=t.os),t.audio&&(this.privSpeechServiceConfig.Context.audio=t.audio),t.synthesis&&(this.privSpeechServiceConfig.Context.synthesis=t.synthesis)}}}(mO)),mO),e),r(function(){if(vO)return gO;vO=1,Object.defineProperty(gO,"__esModule",{value:!0}),gO.SynthesisContext=void 0;const e=g_();return gO.SynthesisContext=class{constructor(){this.privContext={}}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(e){const t=this.buildSynthesisContext(e);this.setSection("synthesis",t)}buildSynthesisContext(t){return{audio:{metadataOptions:{bookmarkEnabled:!!(null==t?void 0:t.bookmarkReached),punctuationBoundaryEnabled:null==t?void 0:t.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(null==t?void 0:t.wordBoundary)),sentenceBoundaryEnabled:null==t?void 0:t.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(null==t?void 0:t.visemeReceived),wordBoundaryEnabled:null==t?void 0:t.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(null==t?void 0:t.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:null==t?void 0:t.autoDetectSourceLanguage}}}},gO}(),e),r(function(){if(yO)return bO;yO=1,Object.defineProperty(bO,"__esModule",{value:!0}),bO.SpeakerRecognitionConfig=void 0;const e=NO();return bO.SpeakerRecognitionConfig=class{constructor(t,r){this.privContext=t||new e.Context(null),this.privParameters=r}get parameters(){return this.privParameters}get Context(){return this.privContext}},bO}(),e),r(function(){if(xO)return wO;xO=1,Object.defineProperty(wO,"__esModule",{value:!0}),wO.SpeakerServiceRecognizer=void 0;const e=P_(),t=qT(),r=g_(),n=NO(),i=A_;let s=class extends n.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privSpeakerRecognizer=i,this.privSpeakerAudioSource=r,this.recognizeSpeaker=e=>this.recognizeSpeakerOnce(e),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(e){let n=!1;const i=new r.PropertyCollection;if(e.messageType===t.MessageType.Text&&i.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),"speaker.response"===e.path.toLowerCase()){const t=JSON.parse(e.textBody);let i;i="success"!==t.status.statusCode.toLowerCase()?new r.SpeakerRecognitionResult(t,r.ResultReason.Canceled,r.CancellationErrorCode.ServiceError,t.status.reason):new r.SpeakerRecognitionResult(t,r.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(i),n=!0}const s=new t.Deferred;return s.resolve(n),s.promise}cancelRecognition(e,t,i,s,o){if((new r.PropertyCollection).setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[s]),this.privResultDeferral){const e=new r.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:o,reason:o}},r.ResultReason.Canceled,s,o);try{this.privResultDeferral.resolve(e)}catch(a){this.privResultDeferral.reject(a)}}}recognizeSpeakerOnce(n){return Ke(this,null,function*(){this.privSpeakerModel=n,this.voiceProfileType=n.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const i=this.connectImpl(),s=this.sendPreAudioMessages(this.extractSpeakerContext(n)),o=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),a=yield this.privSpeakerAudioSource.format,l=yield this.privSpeakerAudioSource.deviceInfo,c=new e.ReplayableAudioNode(o,a.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(c,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l};try{yield i,yield s}catch(Pie){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,Pie)}const u=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,u),this.receiveMessage(),this.sendAudio(c).then(()=>{},e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,e)}),this.privResultDeferral.promise})}sendPreAudioMessages(e){return Ke(this,null,function*(){const t=yield this.fetchConnection();yield this.sendSpeakerRecognition(t,e)})}sendSpeakerRecognition(e,r){return Ke(this,null,function*(){const n=JSON.stringify(r);return e.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",n))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}};return wO.SpeakerServiceRecognizer=s,wO}(),e),r(function(){if(SO)return CO;SO=1,Object.defineProperty(CO,"__esModule",{value:!0}),CO.VoiceServiceRecognizer=void 0;const e=P_(),t=qT(),r=g_(),n=NO(),i=A_;let s=class extends n.ServiceRecognizerBase{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=n,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(e){this.privSpeakerAudioSource=e}processTypeSpecificMessages(e){let n=!1;const i=new r.PropertyCollection;switch(e.messageType===t.MessageType.Text&&i.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.profiles":const t=JSON.parse(e.textBody);switch(t.operation.toLowerCase()){case"create":this.handleCreateResponse(t,e.requestId);break;case"delete":case"reset":this.handleResultResponse(t,e.requestId);break;case"fetch":const r=JSON.parse(e.textBody);this.handleFetchResponse(r,e.requestId)}n=!0;break;case"speaker.phrases":const i=JSON.parse(e.textBody);this.handlePhrasesResponse(i,e.requestId),n=!0;break;case"speaker.profile.enrollment":const s=JSON.parse(e.textBody),o=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(s.enrollment?s.enrollment.enrollmentStatus:s.status.statusCode),s.enrollment?JSON.stringify(s.enrollment):void 0,s.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,o),this.privRequestSession.onSpeechEnded(),n=!0}const s=new t.Deferred;return s.resolve(n),s.promise}cancelRecognition(e,t,i,s,o){(new r.PropertyCollection).setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[s]);const a=new r.VoiceProfileEnrollmentResult(r.ResultReason.Canceled,o,o);this.privDeferralMap.getId(t)&&this.privDeferralMap.complete(t,a)}createProfile(e,r){return Ke(this,null,function*(){this.voiceProfileType=e.toString();const n=this.connectImpl();try{const i=new t.Deferred;return yield n,yield this.sendCreateProfile(i,e,r),this.receiveMessage(),i.promise}catch(Pie){throw Pie}})}resetProfile(e){return Ke(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("reset",e.profileType,e)})}deleteProfile(e){return Ke(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("delete",e.profileType,e)})}retrieveEnrollmentResult(e){return Ke(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,this.sendCommonRequest("fetch",e.profileType,e)})}getAllProfiles(e){return Ke(this,null,function*(){return this.voiceProfileType=e.toString(),this.sendCommonRequest("fetch",e)})}getActivationPhrases(e,r){return Ke(this,null,function*(){this.voiceProfileType=e.toString();const n=this.connectImpl();try{const i=new t.Deferred;return yield n,yield this.sendPhrasesRequest(i,e,r),this.receiveMessage(),i.promise}catch(Pie){throw Pie}})}enrollProfile(n){return Ke(this,null,function*(){this.voiceProfileType=n.profileType.toString();const i=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const s=this.connectImpl(),o=this.sendPreAudioMessages(n,i),a=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),l=yield this.privSpeakerAudioSource.format,c=yield this.privSpeakerAudioSource.deviceInfo,u=new e.ReplayableAudioNode(a,l.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield s,yield o}catch(Pie){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,Pie)}const d=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(u).then(()=>{},e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,e)}),i.promise})}sendPreAudioMessages(e,t){return Ke(this,null,function*(){const r=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,t),yield this.sendBaseRequest(r,"enroll",this.scenarioFrom(e.profileType),e)})}sendPhrasesRequest(e,r,n){return Ke(this,null,function*(){const s=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);const o=this.scenarioFrom(r),a={locale:n,scenario:o};return s.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(a)))})}sendCreateProfile(e,n,s){return Ke(this,null,function*(){const o=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);const a=n===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":n===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",l={locale:s,number:"1",scenario:a};return o.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(l)))})}sendCommonRequest(e,r,n=void 0){return Ke(this,null,function*(){const i=this.connectImpl();try{const s=new t.Deferred;this.privRequestSession.onSpeechContext(),yield i;const o=yield this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,s),yield this.sendBaseRequest(o,e,this.scenarioFrom(r),n),this.receiveMessage(),s.promise}catch(Pie){throw Pie}})}sendBaseRequest(e,r,n,s){return Ke(this,null,function*(){const o={scenario:n};return s?o.profileIds=[s.profileId]:o.maxPageSize=-1,e.send(new i.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${r}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}handlePhrasesResponse(e,t){if(!this.privDeferralMap.getId(t))throw new Error(`Voice Profile get activation phrases request for requestID ${t} not found`);if("success"!==e.status.statusCode.toLowerCase()){const n=r.ResultReason.Canceled,i=new r.VoiceProfilePhraseResult(n,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(t,i)}else{if(!(e.phrases&&e.phrases.length>0))throw new Error("Voice Profile get activation phrases failed, no phrases received");{const n=r.ResultReason.EnrollingVoiceProfile,i=new r.VoiceProfilePhraseResult(n,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(t,i)}}}handleCreateResponse(e,t){if(!(e.profiles&&e.profiles.length>0))throw new Error("Voice Profile create failed, no profile id received");if(!this.privDeferralMap.getId(t))throw new Error(`Voice Profile create request for requestID ${t} not found`);{const r=e.profiles.map(e=>e.profileId);this.privDeferralMap.complete(t,r)}}handleResultResponse(e,t){if(!this.privDeferralMap.getId(t))throw new Error(`Voice Profile create request for requestID ${t} not found`);{const n="delete"===e.operation.toLowerCase()?r.ResultReason.DeletedVoiceProfile:r.ResultReason.ResetVoiceProfile,i="success"===e.status.statusCode.toLowerCase()?n:r.ResultReason.Canceled,s=new r.VoiceProfileResult(i,`statusCode: ${e.status.statusCode}, errorDetails: ${e.status.reason}`);this.privDeferralMap.complete(t,s)}}handleFetchResponse(e,t){if(!this.privDeferralMap.getId(t)||!e.profiles[0])throw new Error(`Voice Profile fetch request for requestID ${t} not found`);if(this.privExpectedProfileId&&1===e.profiles.length&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const n=e.profiles[0],i=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(n.enrollmentStatus),JSON.stringify(n),e.status.reason);this.privDeferralMap.complete(t,i)}else if(e.profiles.length>0){const n=e.profiles,i=[];for(const t of n)i.push(new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(t.enrollmentStatus),JSON.stringify(t),e.status.reason));this.privDeferralMap.complete(t,i)}}enrollmentReasonFrom(e){switch(e.toLowerCase()){case"enrolled":return r.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return r.ResultReason.Canceled;default:return r.ResultReason.EnrollingVoiceProfile}}scenarioFrom(e){return e===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return CO.VoiceServiceRecognizer=s,CO}(),e),r(TO,e),e.OutputFormatPropertyName="OutputFormat",e.CancellationErrorCodePropertyName="CancellationErrorCode",e.ServicePropertiesPropertyName="ServiceProperties",e.ForceDictationPropertyName="ForceDictation",e.AutoDetectSourceLanguagesOpenRangeOptionName="UND"}(vC)),vC}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.type=e.connectivity=e.Device=e.OS=e.System=e.Context=e.SpeechServiceConfig=void 0;e.SpeechServiceConfig=class{constructor(e){this.context=e}serialize(){return JSON.stringify(this,(e,t)=>{if(t&&"object"==typeof t&&!Array.isArray(t)){const e={};for(const r in t)Object.hasOwnProperty.call(t,r)&&(e[r&&r.charAt(0).toLowerCase()+r.substring(1)]=t[r]);return e}return t})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}};e.Context=class{constructor(e){this.system=new t,this.os=e}};class t{constructor(){this.name="SpeechSDK",this.version="1.46.0",this.build="JavaScript",this.lang="JavaScript"}}e.System=t;e.OS=class{constructor(e,t,r){this.platform=e,this.name=t,this.version=r}};var r,n;e.Device=class{constructor(e,t,r){this.manufacturer=e,this.model=t,this.version=r}},(r=e.connectivity||(e.connectivity={})).Bluetooth="Bluetooth",r.Wired="Wired",r.WiFi="WiFi",r.Cellular="Cellular",r.InBuilt="InBuilt",r.Unknown="Unknown",(n=e.type||(e.type={})).Phone="Phone",n.Speaker="Speaker",n.Car="Car",n.Headset="Headset",n.Thermostat="Thermostat",n.Microphones="Microphones",n.Deskphone="Deskphone",n.RemoteControl="RemoteControl",n.Unknown="Unknown",n.File="File",n.Stream="Stream"}(TO),function(e){var t=Ye&&Ye.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Ye&&Ye.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0});new(NO().AgentConfig),r(g_(),e)}(mC);const PO=Je({__proto__:null,default:Ze(mC)},[mC]);var RO=e=>"checkbox"===e.type,IO=e=>e instanceof Date,kO=e=>null==e;const _O=e=>"object"==typeof e;var AO=e=>!kO(e)&&!Array.isArray(e)&&_O(e)&&!IO(e),jO="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function OO(e){let t;const r=Array.isArray(e),n="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(jO&&(e instanceof Blob||n)||!r&&!AO(e))return e;if(t=r?[]:Object.create(Object.getPrototypeOf(e)),r||(e=>{const t=e.constructor&&e.constructor.prototype;return AO(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=OO(e[r]));else t=e}return t}var DO=e=>/^\w*$/.test(e),MO=e=>void 0===e,LO=e=>Array.isArray(e)?e.filter(Boolean):[],zO=e=>LO(e.replace(/["|']|\]/g,"").split(/\.|\[/)),FO=(e,t,r)=>{if(!t||!AO(e))return r;const n=(DO(t)?[t]:zO(t)).reduce((e,t)=>kO(e)?e:e[t],e);return MO(n)||n===e?MO(e[t])?r:e[t]:n},BO=e=>"boolean"==typeof e,UO=(e,t,r)=>{let n=-1;const i=DO(t)?[t]:zO(t),s=i.length,o=s-1;for(;++n<s;){const t=i[n];let s=r;if(n!==o){const r=e[t];s=AO(r)||Array.isArray(r)?r:isNaN(+i[n+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}};const WO="blur",HO="focusout",$O="onBlur",VO="onChange",qO="onSubmit",GO="onTouched",KO="all",JO="max",YO="min",ZO="maxLength",QO="minLength",XO="pattern",eD="required",tD="validate",rD=zt.createContext(null);rD.displayName="HookFormContext";const nD="undefined"!=typeof window?zt.useLayoutEffect:zt.useEffect;var iD=e=>"string"==typeof e,sD=e=>kO(e)||!_O(e);function oD(e,t,r=new WeakSet){if(sD(e)||sD(t))return e===t;if(IO(e)&&IO(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const n=e[s];if(!i.includes(s))return!1;if("ref"!==s){const e=t[s];if(IO(n)&&IO(e)||AO(n)&&AO(e)||Array.isArray(n)&&Array.isArray(e)?!oD(n,e,r):n!==e)return!1}}return!0}var aD=(e,t,r,n,i)=>t?ze(Le({},r[e]),{types:ze(Le({},r[e]&&r[e].types?r[e].types:{}),{[n]:i||!0})}):{},lD=e=>Array.isArray(e)?e:[e],cD=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function uD(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],s=t[n];if(i&&AO(i)&&s){const e=uD(i,s);AO(e)&&(r[n]=e)}else e[n]&&(r[n]=s)}return r}var dD=e=>AO(e)&&!Object.keys(e).length,pD=e=>"file"===e.type,hD=e=>"function"==typeof e,fD=e=>{if(!jO)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},mD=e=>"select-multiple"===e.type,vD=e=>"radio"===e.type,gD=e=>fD(e)&&e.isConnected;function yD(e,t){const r=Array.isArray(t)?t:DO(t)?[t]:zO(t),n=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=MO(e)?n++:e[t[n++]];return e}(e,r),i=r.length-1,s=r[i];return n&&delete n[s],0!==i&&(AO(n)&&dD(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!MO(e[t]))return!1;return!0}(n))&&yD(e,r.slice(0,-1)),e}function bD(e){return Array.isArray(e)||AO(e)&&!(e=>{for(const t in e)if(hD(e[t]))return!0;return!1})(e)}function xD(e,t={}){for(const r in e)bD(e[r])?(t[r]=Array.isArray(e[r])?[]:{},xD(e[r],t[r])):MO(e[r])||(t[r]=!0);return t}function wD(e,t,r){r||(r=xD(t));for(const n in e)bD(e[n])?MO(t)||sD(r[n])?r[n]=xD(e[n],Array.isArray(e[n])?[]:{}):wD(e[n],kO(t)?{}:t[n],r[n]):r[n]=!oD(e[n],t[n]);return r}const SD={value:!1,isValid:!1},CD={value:!0,isValid:!0};var ED=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!MO(e[0].attributes.value)?MO(e[0].value)||""===e[0].value?CD:{value:e[0].value,isValid:!0}:CD:SD}return SD},TD=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>MO(e)?e:t?""===e?NaN:e?+e:e:r&&iD(e)?new Date(e):n?n(e):e;const ND={isValid:!1,value:null};var PD=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ND):ND;function RD(e){const t=e.ref;return pD(t)?t.files:vD(t)?PD(e.refs).value:mD(t)?[...t.selectedOptions].map(({value:e})=>e):RO(t)?ED(e.refs).value:TD(MO(t.value)?e.ref.value:t.value,e)}var ID=e=>e instanceof RegExp,kD=e=>MO(e)?e:ID(e)?e.source:AO(e)?ID(e.value)?e.value.source:e.value:e,_D=e=>({isOnSubmit:!e||e===qO,isOnBlur:e===$O,isOnChange:e===VO,isOnAll:e===KO,isOnTouch:e===GO});const AD="AsyncFunction";var jD=e=>!!e&&!!e.validate&&!!(hD(e.validate)&&e.validate.constructor.name===AD||AO(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===AD)),OD=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const DD=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const r=FO(e,i);if(r){const e=r,{_f:s}=e,o=Fe(e,["_f"]);if(s){if(s.refs&&s.refs[0]&&t(s.refs[0],i)&&!n)return!0;if(s.ref&&t(s.ref,s.name)&&!n)return!0;if(DD(o,t))break}else if(AO(o)&&DD(o,t))break}}};function MD(e,t,r){const n=FO(e,r);if(n||DO(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const n=i.join("."),s=FO(t,n),o=FO(e,n);if(s&&!Array.isArray(s)&&r!==n)return{name:r};if(o&&o.type)return{name:n,error:o};if(o&&o.root&&o.root.type)return{name:`${n}.root`,error:o.root};i.pop()}return{name:r}}var LD=(e,t,r)=>{const n=lD(FO(e,r));return UO(n,"root",t[r]),UO(e,r,n),e};function zD(e,t,r="validate"){if(iD(e)||Array.isArray(e)&&e.every(iD)||BO(e)&&!e)return{type:r,message:iD(e)?e:"",ref:t}}var FD=e=>AO(e)&&!ID(e)?e:{value:e,message:""},BD=(e,t,r,n,i,s)=>Ke(void 0,null,function*(){const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:d,max:p,pattern:h,validate:f,name:m,valueAsNumber:v,mount:g}=e._f,y=FO(r,m);if(!g||t.has(m))return{};const b=a?a[0]:o,x=e=>{i&&b.reportValidity&&(b.setCustomValidity(BO(e)?"":e||""),b.reportValidity())},w={},S=vD(o),C=RO(o),E=S||C,T=(v||pD(o))&&MO(o.value)&&MO(y)||fD(o)&&""===o.value||""===y||Array.isArray(y)&&!y.length,N=aD.bind(null,m,n,w),P=(e,t,r,n=ZO,i=QO)=>{const s=e?t:r;w[m]=Le({type:e?n:i,message:s,ref:o},N(e?n:i,s))};if(s?!Array.isArray(y)||!y.length:l&&(!E&&(T||kO(y))||BO(y)&&!y||C&&!ED(a).isValid||S&&!PD(a).isValid)){const{value:e,message:t}=iD(l)?{value:!!l,message:l}:FD(l);if(e&&(w[m]=Le({type:eD,message:t,ref:b},N(eD,t)),!n))return x(t),w}if(!(T||kO(d)&&kO(p))){let e,t;const r=FD(p),i=FD(d);if(kO(y)||isNaN(y)){const n=o.valueAsDate||new Date(y),s=e=>new Date((new Date).toDateString()+" "+e),a="time"==o.type,l="week"==o.type;iD(r.value)&&y&&(e=a?s(y)>s(r.value):l?y>r.value:n>new Date(r.value)),iD(i.value)&&y&&(t=a?s(y)<s(i.value):l?y<i.value:n<new Date(i.value))}else{const n=o.valueAsNumber||(y?+y:y);kO(r.value)||(e=n>r.value),kO(i.value)||(t=n<i.value)}if((e||t)&&(P(!!e,r.message,i.message,JO,YO),!n))return x(w[m].message),w}if((c||u)&&!T&&(iD(y)||s&&Array.isArray(y))){const e=FD(c),t=FD(u),r=!kO(e.value)&&y.length>+e.value,i=!kO(t.value)&&y.length<+t.value;if((r||i)&&(P(r,e.message,t.message),!n))return x(w[m].message),w}if(h&&!T&&iD(y)){const{value:e,message:t}=FD(h);if(ID(e)&&!y.match(e)&&(w[m]=Le({type:XO,message:t,ref:o},N(XO,t)),!n))return x(t),w}if(f)if(hD(f)){const e=zD(yield f(y,r),b);if(e&&(w[m]=Le(Le({},e),N(tD,e.message)),!n))return x(e.message),w}else if(AO(f)){let e={};for(const t in f){if(!dD(e)&&!n)break;const i=zD(yield f[t](y,r),b,t);i&&(e=Le(Le({},i),N(t,i.message)),x(i.message),n&&(w[m]=e))}if(!dD(e)&&(w[m]=Le({ref:b},e),!n))return w}return x(!0),w});const UD={mode:qO,reValidateMode:VO,shouldFocusError:!0};function WD(e={}){let t,r=Le(Le({},UD),e),n={submitCount:0,isDirty:!1,isReady:!1,isLoading:hD(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},s=(AO(r.defaultValues)||AO(r.values))&&OO(r.defaultValues||r.values)||{},o=r.shouldUnregister?{}:OO(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d=Le({},u);const p={array:cD(),state:cD()},h=r.criteriaMode===KO,f=e=>Ke(this,null,function*(){if(!r.disabled&&(u.isValid||d.isValid||e)){const e=r.resolver?dD((yield b()).errors):yield w(i,!0);e!==n.isValid&&p.state.next({isValid:e})}}),m=(e,t)=>{!r.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?UO(n.validatingFields,e,t):yD(n.validatingFields,e))}),p.state.next({validatingFields:n.validatingFields,isValidating:!dD(n.validatingFields)}))},v=(e,t,r,n)=>{const l=FO(i,e);if(l){const i=FO(o,e,MO(r)?FO(s,e):r);MO(i)||n&&n.defaultChecked||t?UO(o,e,t?i:RD(l._f)):E(e,i),a.mount&&f()}},g=(e,t,i,o,a)=>{let l=!1,c=!1;const h={name:e};if(!r.disabled){if(!i||o){(u.isDirty||d.isDirty)&&(c=n.isDirty,n.isDirty=h.isDirty=S(),l=c!==h.isDirty);const r=oD(FO(s,e),t);c=!!FO(n.dirtyFields,e),r?yD(n.dirtyFields,e):UO(n.dirtyFields,e,!0),h.dirtyFields=n.dirtyFields,l=l||(u.dirtyFields||d.dirtyFields)&&c!==!r}if(i){const t=FO(n.touchedFields,e);t||(UO(n.touchedFields,e,i),h.touchedFields=n.touchedFields,l=l||(u.touchedFields||d.touchedFields)&&t!==i)}l&&a&&p.state.next(h)}return l?h:{}},y=(e,i,s,o)=>{const a=FO(n.errors,e),l=(u.isValid||d.isValid)&&BO(i)&&n.isValid!==i;var h;if(r.delayError&&s?(h=()=>((e,t)=>{UO(n.errors,e,t),p.state.next({errors:n.errors})})(e,s),t=e=>{clearTimeout(c),c=setTimeout(h,e)},t(r.delayError)):(clearTimeout(c),t=null,s?UO(n.errors,e,s):yD(n.errors,e)),(s?!oD(a,s):a)||!dD(o)||l){const t=ze(Le(Le({},o),l&&BO(i)?{isValid:i}:{}),{errors:n.errors,name:e});n=Le(Le({},n),t),p.state.next(t)}},b=e=>Ke(this,null,function*(){m(e,!0);const t=yield r.resolver(o,r.context,((e,t,r,n)=>{const i={};for(const s of e){const e=FO(t,s);e&&UO(i,s,e._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}})(e||l.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return m(e),t}),x=e=>Ke(this,null,function*(){const{errors:t}=yield b(e);if(e)for(const r of e){const e=FO(t,r);e?UO(n.errors,r,e):yD(n.errors,r)}else n.errors=t;return t}),w=(e,t,...i)=>Ke(this,[e,t,...i],function*(e,t,i={valid:!0}){for(const s in e){const a=e[s];if(a){const e=a,{_f:s}=e,c=Fe(e,["_f"]);if(s){const e=l.array.has(s.name),c=a._f&&jD(a._f);c&&u.validatingFields&&m([s.name],!0);const d=yield BD(a,l.disabled,o,h,r.shouldUseNativeValidation&&!t,e);if(c&&u.validatingFields&&m([s.name]),d[s.name]&&(i.valid=!1,t))break;!t&&(FO(d,s.name)?e?LD(n.errors,d,s.name):UO(n.errors,s.name,d[s.name]):yD(n.errors,s.name))}!dD(c)&&(yield w(c,t,i))}}return i.valid}),S=(e,t)=>!r.disabled&&(e&&t&&UO(o,e,t),!oD(k(),s)),C=(e,t,r)=>((e,t,r,n,i)=>iD(e)?(n&&t.watch.add(e),FO(r,e,i)):Array.isArray(e)?e.map(e=>(n&&t.watch.add(e),FO(r,e))):(n&&(t.watchAll=!0),r))(e,l,Le({},a.mount?o:MO(t)?s:iD(e)?{[e]:t}:t),r,t),E=(e,t,r={})=>{const n=FO(i,e);let s=t;if(n){const r=n._f;r&&(!r.disabled&&UO(o,e,TD(t,r)),s=fD(r.ref)&&kO(t)?"":t,mD(r.ref)?[...r.ref.options].forEach(e=>e.selected=s.includes(e.value)):r.refs?RO(r.ref)?r.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(s)?e.checked=!!s.find(t=>t===e.value):e.checked=s===e.value||!!s)}):r.refs.forEach(e=>e.checked=e.value===s):pD(r.ref)?r.ref.value="":(r.ref.value=s,r.ref.type||p.state.next({name:e,values:OO(o)})))}(r.shouldDirty||r.shouldTouch)&&g(e,s,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&I(e)},T=(e,t,r)=>{for(const n in t){if(!t.hasOwnProperty(n))return;const s=t[n],o=e+"."+n,a=FO(i,o);(l.array.has(e)||AO(s)||a&&!a._f)&&!IO(s)?T(o,s,r):E(o,s,r)}},N=(e,t,r={})=>{const c=FO(i,e),h=l.array.has(e),f=OO(t);UO(o,e,f),h?(p.array.next({name:e,values:OO(o)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&r.shouldDirty&&p.state.next({name:e,dirtyFields:wD(s,o),isDirty:S(e,f)})):!c||c._f||kO(f)?E(e,f,r):T(e,f,r),OD(e,l)&&p.state.next(ze(Le({},n),{name:e})),p.state.next({name:a.mount?e:void 0,values:OO(o)})},P=e=>Ke(this,null,function*(){a.mount=!0;const s=e.target;let c=s.name,v=!0;const x=FO(i,c),S=e=>{v=Number.isNaN(e)||IO(e)&&isNaN(e.getTime())||oD(e,FO(o,c,e))},C=_D(r.mode),E=_D(r.reValidateMode);if(x){let a,T;const N=s.type?RD(x._f):(e=>AO(e)&&e.target?RO(e.target)?e.target.checked:e.target.value:e)(e),P=e.type===WO||e.type===HO,R=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(x._f)&&!r.resolver&&!FO(n.errors,c)&&!x._f.deps||((e,t,r,n,i)=>!i.isOnAll&&(!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:!(r?n.isOnChange:i.isOnChange)||e))(P,FO(n.touchedFields,c),n.isSubmitted,E,C),k=OD(c,l,P);UO(o,c,N),P?s&&s.readOnly||(x._f.onBlur&&x._f.onBlur(e),t&&t(0)):x._f.onChange&&x._f.onChange(e);const _=g(c,N,P),A=!dD(_)||k;if(!P&&p.state.next({name:c,type:e.type,values:OO(o)}),R)return(u.isValid||d.isValid)&&("onBlur"===r.mode?P&&f():P||f()),A&&p.state.next(Le({name:c},k?{}:_));if(!P&&k&&p.state.next(Le({},n)),r.resolver){const{errors:e}=yield b([c]);if(S(N),v){const t=MD(n.errors,i,c),r=MD(e,i,t.name||c);a=r.error,c=r.name,T=dD(e)}}else m([c],!0),a=(yield BD(x,l.disabled,o,h,r.shouldUseNativeValidation))[c],m([c]),S(N),v&&(a?T=!1:(u.isValid||d.isValid)&&(T=yield w(i,!0)));v&&(x._f.deps&&(!Array.isArray(x._f.deps)||x._f.deps.length>0)&&I(x._f.deps),y(c,T,a,_))}}),R=(e,t)=>{if(FO(n.errors,t)&&e.focus)return e.focus(),1},I=(e,...t)=>Ke(this,[e,...t],function*(e,t={}){let s,o;const a=lD(e);if(r.resolver){const t=yield x(MO(e)?e:a);s=dD(t),o=e?!a.some(e=>FO(t,e)):s}else e?(o=(yield Promise.all(a.map(e=>Ke(this,null,function*(){const t=FO(i,e);return yield w(t&&t._f?{[e]:t}:t)})))).every(Boolean),(o||n.isValid)&&f()):o=s=yield w(i);return p.state.next(ze(Le(Le({},!iD(e)||(u.isValid||d.isValid)&&s!==n.isValid?{}:{name:e}),r.resolver||!e?{isValid:s}:{}),{errors:n.errors})),t.shouldFocus&&!o&&DD(i,R,e?a:l.mount),o}),k=(e,t)=>{let r=Le({},a.mount?o:s);return t&&(r=uD(t.dirtyFields?n.dirtyFields:n.touchedFields,r)),MO(e)?r:iD(e)?FO(r,e):e.map(e=>FO(r,e))},_=(e,t)=>({invalid:!!FO((t||n).errors,e),isDirty:!!FO((t||n).dirtyFields,e),error:FO((t||n).errors,e),isValidating:!!FO(n.validatingFields,e),isTouched:!!FO((t||n).touchedFields,e)}),A=(e,t,r)=>{const s=(FO(i,e,{_f:{}})._f||{}).ref,o=FO(n.errors,e)||{},{ref:a,message:l,type:c}=o,u=Fe(o,["ref","message","type"]);UO(n.errors,e,ze(Le(Le({},u),t),{ref:s})),p.state.next({name:e,errors:n.errors,isValid:!1}),r&&r.shouldFocus&&s&&s.focus&&s.focus()},j=e=>p.state.subscribe({next:t=>{var r,i,a;r=e.name,i=t.name,a=e.exact,r&&i&&r!==i&&!lD(r).some(e=>e&&(a?e===i:e.startsWith(i)||i.startsWith(e)))||!((e,t,r,n)=>{r(e);const i=e,{name:s}=i,o=Fe(i,["name"]);return dD(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(e=>t[e]===(!n||KO))})(t,e.formState||u,U,e.reRenderRoot)||e.callback(ze(Le(Le({values:Le({},o)},n),t),{defaultValues:s}))}}).unsubscribe,O=(e,t={})=>{for(const a of e?lD(e):l.mount)l.mount.delete(a),l.array.delete(a),t.keepValue||(yD(i,a),yD(o,a)),!t.keepError&&yD(n.errors,a),!t.keepDirty&&yD(n.dirtyFields,a),!t.keepTouched&&yD(n.touchedFields,a),!t.keepIsValidating&&yD(n.validatingFields,a),!r.shouldUnregister&&!t.keepDefaultValue&&yD(s,a);p.state.next({values:OO(o)}),p.state.next(Le(Le({},n),t.keepDirty?{isDirty:S()}:{})),!t.keepIsValid&&f()},D=({disabled:e,name:t})=>{(BO(e)&&a.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},M=(e,t={})=>{let n=FO(i,e);const o=BO(t.disabled)||BO(r.disabled);return UO(i,e,ze(Le({},n||{}),{_f:Le(ze(Le({},n&&n._f?n._f:{ref:{name:e}}),{name:e,mount:!0}),t)})),l.mount.add(e),n?D({disabled:BO(t.disabled)?t.disabled:r.disabled,name:e}):v(e,!0,t.value),ze(Le(Le({},o?{disabled:t.disabled||r.disabled}:{}),r.progressive?{required:!!t.required,min:kD(t.min),max:kD(t.max),minLength:kD(t.minLength),maxLength:kD(t.maxLength),pattern:kD(t.pattern)}:{}),{name:e,onChange:P,onBlur:P,ref:o=>{if(o){M(e,t),n=FO(i,e);const r=MO(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,a=(e=>vD(e)||RO(e))(r),l=n._f.refs||[];if(a?l.find(e=>e===r):r===n._f.ref)return;UO(i,e,{_f:Le(Le({},n._f),a?{refs:[...l.filter(gD),r,...Array.isArray(FO(s,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r})}),v(e,!1,void 0,r)}else n=FO(i,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!((e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)))(l.array,e)||!a.action)&&l.unMount.add(e)}})},L=()=>r.shouldFocusError&&DD(i,R,l.mount),z=(e,t)=>s=>Ke(this,null,function*(){let a;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let c=OO(o);if(p.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=yield b();n.errors=e,c=OO(t)}else yield w(i);if(l.disabled.size)for(const e of l.disabled)yD(c,e);if(yD(n.errors,"root"),dD(n.errors)){p.state.next({errors:{}});try{yield e(c,s)}catch(u){a=u}}else t&&(yield t(Le({},n.errors),s)),L(),setTimeout(L);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:dD(n.errors)&&!a,submitCount:n.submitCount+1,errors:n.errors}),a)throw a}),F=(e,t={})=>{const c=e?OO(e):s,d=OO(c),h=dD(e),f=h?s:d;if(t.keepDefaultValues||(s=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(wD(s,o))]);for(const t of Array.from(e))FO(n.dirtyFields,t)?UO(f,t,FO(o,t)):N(t,FO(f,t))}else{if(jO&&MO(e))for(const e of l.mount){const t=FO(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(fD(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)N(e,FO(f,e));else i={}}o=r.shouldUnregister?t.keepDefaultValues?OO(s):{}:OO(f),p.array.next({values:Le({},f)}),p.state.next({values:Le({},f)})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!t.keepIsValid||!!t.keepDirtyValues||!r.shouldUnregister&&!dD(f),a.watch=!!r.shouldUnregister,p.state.next({submitCount:t.keepSubmitCount?n.submitCount:0,isDirty:!h&&(t.keepDirty?n.isDirty:!(!t.keepDefaultValues||oD(e,s))),isSubmitted:!!t.keepIsSubmitted&&n.isSubmitted,dirtyFields:h?{}:t.keepDirtyValues?t.keepDefaultValues&&o?wD(s,o):n.dirtyFields:t.keepDefaultValues&&e?wD(s,e):t.keepDirty?n.dirtyFields:{},touchedFields:t.keepTouched?n.touchedFields:{},errors:t.keepErrors?n.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1,defaultValues:s})},B=(e,t)=>F(hD(e)?e(o):e,t),U=e=>{n=Le(Le({},n),e)},W={control:{register:M,unregister:O,getFieldState:_,handleSubmit:z,setError:A,_subscribe:j,_runSchema:b,_focusError:L,_getWatch:C,_getDirty:S,_setValid:f,_setFieldArray:(e,t=[],l,c,h=!0,f=!0)=>{if(c&&l&&!r.disabled){if(a.action=!0,f&&Array.isArray(FO(i,e))){const t=l(FO(i,e),c.argA,c.argB);h&&UO(i,e,t)}if(f&&Array.isArray(FO(n.errors,e))){const t=l(FO(n.errors,e),c.argA,c.argB);h&&UO(n.errors,e,t),((e,t)=>{!LO(FO(e,t)).length&&yD(e,t)})(n.errors,e)}if((u.touchedFields||d.touchedFields)&&f&&Array.isArray(FO(n.touchedFields,e))){const t=l(FO(n.touchedFields,e),c.argA,c.argB);h&&UO(n.touchedFields,e,t)}(u.dirtyFields||d.dirtyFields)&&(n.dirtyFields=wD(s,o)),p.state.next({name:e,isDirty:S(e,t),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else UO(o,e,t)},_setDisabledField:D,_setErrors:e=>{n.errors=e,p.state.next({errors:n.errors,isValid:!1})},_getFieldArray:e=>LO(FO(a.mount?o:s,e,r.shouldUnregister?FO(s,e,[]):[])),_reset:F,_resetDefaultValues:()=>hD(r.defaultValues)&&r.defaultValues().then(e=>{B(e,r.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=FO(i,e);t&&(t._f.refs?t._f.refs.every(e=>!gD(e)):!gD(t._f.ref))&&O(e)}l.unMount=new Set},_disableForm:e=>{BO(e)&&(p.state.next({disabled:e}),DD(i,(t,r)=>{const n=FO(i,r);n&&(t.disabled=n._f.disabled||e,Array.isArray(n._f.refs)&&n._f.refs.forEach(t=>{t.disabled=n._f.disabled||e}))},0,!1))},_subjects:p,_proxyFormState:u,get _fields(){return i},get _formValues(){return o},get _state(){return a},set _state(e){a=e},get _defaultValues(){return s},get _names(){return l},set _names(e){l=e},get _formState(){return n},get _options(){return r},set _options(e){r=Le(Le({},r),e)}},subscribe:e=>(a.mount=!0,d=Le(Le({},d),e.formState),j(ze(Le({},e),{formState:d}))),trigger:I,register:M,handleSubmit:z,watch:(e,t)=>hD(e)?p.state.subscribe({next:r=>"values"in r&&e(C(void 0,t),r)}):C(e,t,!0),setValue:N,getValues:k,reset:B,resetField:(e,t={})=>{FO(i,e)&&(MO(t.defaultValue)?N(e,OO(FO(s,e))):(N(e,t.defaultValue),UO(s,e,OO(t.defaultValue))),t.keepTouched||yD(n.touchedFields,e),t.keepDirty||(yD(n.dirtyFields,e),n.isDirty=t.defaultValue?S(e,OO(FO(s,e))):S()),t.keepError||(yD(n.errors,e),u.isValid&&f()),p.state.next(Le({},n)))},clearErrors:e=>{e&&lD(e).forEach(e=>yD(n.errors,e)),p.state.next({errors:e?n.errors:{}})},unregister:O,setError:A,setFocus:(e,t={})=>{const r=FO(i,e),n=r&&r._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&hD(e.select)&&e.select())}},getFieldState:_};return ze(Le({},W),{formControl:W})}function HD(e={}){const t=zt.useRef(void 0),r=zt.useRef(void 0),[n,i]=zt.useState({isDirty:!1,isValidating:!1,isLoading:hD(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:hD(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current=ze(Le({},e.formControl),{formState:n}),e.defaultValues&&!hD(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const r=WD(e),{formControl:i}=r,s=Fe(r,["formControl"]);t.current=ze(Le({},s),{formState:n})}const s=t.current.control;return s._options=e,nD(()=>{const e=s._subscribe({formState:s._proxyFormState,callback:()=>i(Le({},s._formState)),reRenderRoot:!0});return i(e=>ze(Le({},e),{isReady:!0})),s._formState.isReady=!0,e},[s]),zt.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),zt.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),zt.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),zt.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),zt.useEffect(()=>{if(s._proxyFormState.isDirty){const e=s._getDirty();e!==n.isDirty&&s._subjects.state.next({isDirty:e})}},[s,n.isDirty]),zt.useEffect(()=>{e.values&&!oD(e.values,r.current)?(s._reset(e.values,Le({keepFieldsRef:!0},s._options.resetOptions)),r.current=e.values,i(e=>Le({},e))):s._resetDefaultValues()},[s,e.values]),zt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next(Le({},s._formState))),s._removeUnmounted()}),t.current.formState=((e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const r=s;return t._proxyFormState[r]!==KO&&(t._proxyFormState[r]=!n||KO),e[r]}});return i})(n,s),t.current}var $D,VD,qD,GD=function(e,t,r){if(e&&"reportValidity"in e){var n=FO(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},KD=function(e,t){var r=function(r){var n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?GD(n.ref,r,e):n.refs&&n.refs.forEach(function(t){return GD(t,r,e)})};for(var n in t.fields)r(n)},JD=function(e,t){t.shouldUseNativeValidation&&KD(e,t);var r={};for(var n in e){var i=FO(t.fields,n);UO(r,n,Object.assign(e[n],{ref:i&&i.ref}))}return r},YD=function(e,t){for(var r={};e.length;){var n=e[0],i=n.code,s=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var a=n.unionErrors[0].errors[0];r[o]={message:a.message,type:a.code}}else r[o]={message:s,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=r[o].types,c=l&&l[n.code];r[o]=aD(o,t,r,i,c?[].concat(c,n.message):n.message)}e.shift()}return r};(VD=$D||($D={})).assertEqual=e=>{},VD.assertIs=function(e){},VD.assertNever=function(e){throw new Error},VD.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},VD.getValidEnumValues=e=>{const t=VD.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(const n of t)r[n]=e[n];return VD.objectValues(r)},VD.objectValues=e=>VD.objectKeys(e).map(function(t){return e[t]}),VD.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},VD.find=(e,t)=>{for(const r of e)if(t(r))return r},VD.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,VD.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},VD.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(qD||(qD={})).mergeShapes=(e,t)=>Le(Le({},e),t);const ZD=$D.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),QD=e=>{switch(typeof e){case"undefined":return ZD.undefined;case"string":return ZD.string;case"number":return Number.isNaN(e)?ZD.nan:ZD.number;case"boolean":return ZD.boolean;case"function":return ZD.function;case"bigint":return ZD.bigint;case"symbol":return ZD.symbol;case"object":return Array.isArray(e)?ZD.array:null===e?ZD.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?ZD.promise:"undefined"!=typeof Map&&e instanceof Map?ZD.map:"undefined"!=typeof Set&&e instanceof Set?ZD.set:"undefined"!=typeof Date&&e instanceof Date?ZD.date:ZD.object;default:return ZD.unknown}},XD=$D.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class eM extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof eM))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$D.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const n of this.issues)if(n.path.length>0){const r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}eM.create=e=>new eM(e);const tM=(e,t)=>{let r;switch(e.code){case XD.invalid_type:r=e.received===ZD.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case XD.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,$D.jsonStringifyReplacer)}`;break;case XD.unrecognized_keys:r=`Unrecognized key(s) in object: ${$D.joinValues(e.keys,", ")}`;break;case XD.invalid_union:r="Invalid input";break;case XD.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${$D.joinValues(e.options)}`;break;case XD.invalid_enum_value:r=`Invalid enum value. Expected ${$D.joinValues(e.options)}, received '${e.received}'`;break;case XD.invalid_arguments:r="Invalid function arguments";break;case XD.invalid_return_type:r="Invalid function return type";break;case XD.invalid_date:r="Invalid date";break;case XD.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:$D.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case XD.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case XD.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case XD.custom:r="Invalid input";break;case XD.invalid_intersection_types:r="Intersection results could not be merged";break;case XD.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case XD.not_finite:r="Number must be finite";break;default:r=t.defaultError,$D.assertNever(e)}return{message:r}};let rM=tM;function nM(e,t){const r=rM,n=(e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o=ze(Le({},i),{path:s});if(void 0!==i.message)return ze(Le({},i),{path:s,message:i.message});let a="";const l=n.filter(e=>!!e).slice().reverse();for(const c of l)a=c(o,{data:t,defaultError:a}).message;return ze(Le({},i),{path:s,message:a})})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===tM?void 0:tM].filter(e=>!!e)});e.common.issues.push(n)}class iM{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return sM;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static mergeObjectAsync(e,t){return Ke(this,null,function*(){const r=[];for(const e of t){const t=yield e.key,n=yield e.value;r.push({key:t,value:n})}return iM.mergeObjectSync(e,r)})}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return sM;if("aborted"===i.status)return sM;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const sM=Object.freeze({status:"aborted"}),oM=e=>({status:"dirty",value:e}),aM=e=>({status:"valid",value:e}),lM=e=>"aborted"===e.status,cM=e=>"dirty"===e.status,uM=e=>"valid"===e.status,dM=e=>"undefined"!=typeof Promise&&e instanceof Promise;var pM,hM;(hM=pM||(pM={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},hM.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class fM{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const mM=(e,t)=>{if(uM(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new eM(e.common.issues);return this._error=t,this._error}}};function vM(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{var s,o;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:i.defaultError}:void 0===i.data?{message:null!=(s=null!=a?a:n)?s:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!=(o=null!=a?a:r)?o:i.defaultError}},description:i}}class gM{get description(){return this._def.description}_getType(e){return QD(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:QD(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new iM,ctx:{common:e.parent.common,data:e.data,parsedType:QD(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(dM(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:QD(e)},i=this._parseSync({data:e,path:n.path,parent:n});return mM(n,i)}"~validate"(e){var t,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:QD(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:n});return uM(t)?{value:t.value}:{issues:n.common.issues}}catch(Pie){(null==(r=null==(t=null==Pie?void 0:Pie.message)?void 0:t.toLowerCase())?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>uM(e)?{value:e.value}:{issues:n.common.issues})}parseAsync(e,t){return Ke(this,null,function*(){const r=yield this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error})}safeParseAsync(e,t){return Ke(this,null,function*(){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:QD(e)},n=this._parse({data:e,path:r.path,parent:r}),i=yield dM(n)?n:Promise.resolve(n);return mM(r,i)})}refine(e,t){return this._refinement((r,n)=>{const i=e(r),s=()=>n.addIssue(Le({code:XD.custom},(e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t)(r)));return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new mL({schema:this,typeName:EL.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return vL.create(this,this._def)}nullable(){return gL.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eL.create(this)}promise(){return fL.create(this,this._def)}or(e){return nL.create([this,e],this._def)}and(e){return sL.create(this,e,this._def)}transform(e){return new mL(ze(Le({},vM(this._def)),{schema:this,typeName:EL.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const t="function"==typeof e?e:()=>e;return new yL(ze(Le({},vM(this._def)),{innerType:this,defaultValue:t,typeName:EL.ZodDefault}))}brand(){return new wL(Le({typeName:EL.ZodBranded,type:this},vM(this._def)))}catch(e){const t="function"==typeof e?e:()=>e;return new bL(ze(Le({},vM(this._def)),{innerType:this,catchValue:t,typeName:EL.ZodCatch}))}describe(e){return new(0,this.constructor)(ze(Le({},this._def),{description:e}))}pipe(e){return SL.create(this,e)}readonly(){return CL.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yM=/^c[^\s-]{8,}$/i,bM=/^[0-9a-z]+$/,xM=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wM=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,SM=/^[a-z0-9_-]{21}$/i,CM=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,EM=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,TM=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let NM;const PM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,RM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,IM=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,kM=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,_M=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,AM=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",OM=new RegExp(`^${jM}$`);function DM(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function MM(e){return new RegExp(`^${DM(e)}$`)}function LM(e){let t=`${jM}T${DM(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function zM(e,t){return!("v4"!==t&&t||!PM.test(e))||!("v6"!==t&&t||!IM.test(e))}function FM(e,t){if(!CM.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return"object"==typeof i&&null!==i&&((!("typ"in i)||"JWT"===(null==i?void 0:i.typ))&&(!!i.alg&&(!t||i.alg===t)))}catch(Nie){return!1}}function BM(e,t){return!("v4"!==t&&t||!RM.test(e))||!("v6"!==t&&t||!kM.test(e))}class UM extends gM{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==ZD.string){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.string,received:t.parsedType}),sM}const t=new iM;let r;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),nM(r,{code:XD.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),nM(r,{code:XD.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const i=e.data.length>n.value,s=e.data.length<n.value;(i||s)&&(r=this._getOrReturnCtx(e,r),i?nM(r,{code:XD.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):s&&nM(r,{code:XD.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)TM.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"email",code:XD.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)NM||(NM=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),NM.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"emoji",code:XD.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)wM.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"uuid",code:XD.invalid_string,message:n.message}),t.dirty());else if("nanoid"===n.kind)SM.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"nanoid",code:XD.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)yM.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"cuid",code:XD.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)bM.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"cuid2",code:XD.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)xM.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"ulid",code:XD.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(Nie){r=this._getOrReturnCtx(e,r),nM(r,{validation:"url",code:XD.invalid_string,message:n.message}),t.dirty()}else if("regex"===n.kind){n.regex.lastIndex=0;n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"regex",code:XD.invalid_string,message:n.message}),t.dirty())}else if("trim"===n.kind)e.data=e.data.trim();else if("includes"===n.kind)e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),nM(r,{code:XD.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty());else if("toLowerCase"===n.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===n.kind)e.data=e.data.toUpperCase();else if("startsWith"===n.kind)e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),nM(r,{code:XD.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty());else if("endsWith"===n.kind)e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),nM(r,{code:XD.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty());else if("datetime"===n.kind){LM(n).test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{code:XD.invalid_string,validation:"datetime",message:n.message}),t.dirty())}else if("date"===n.kind){OM.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{code:XD.invalid_string,validation:"date",message:n.message}),t.dirty())}else if("time"===n.kind){MM(n).test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{code:XD.invalid_string,validation:"time",message:n.message}),t.dirty())}else"duration"===n.kind?EM.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"duration",code:XD.invalid_string,message:n.message}),t.dirty()):"ip"===n.kind?zM(e.data,n.version)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"ip",code:XD.invalid_string,message:n.message}),t.dirty()):"jwt"===n.kind?FM(e.data,n.alg)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"jwt",code:XD.invalid_string,message:n.message}),t.dirty()):"cidr"===n.kind?BM(e.data,n.version)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"cidr",code:XD.invalid_string,message:n.message}),t.dirty()):"base64"===n.kind?_M.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"base64",code:XD.invalid_string,message:n.message}),t.dirty()):"base64url"===n.kind?AM.test(e.data)||(r=this._getOrReturnCtx(e,r),nM(r,{validation:"base64url",code:XD.invalid_string,message:n.message}),t.dirty()):$D.assertNever(n);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),Le({validation:t,code:XD.invalid_string},pM.errToObj(r)))}_addCheck(e){return new UM(ze(Le({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(Le({kind:"email"},pM.errToObj(e)))}url(e){return this._addCheck(Le({kind:"url"},pM.errToObj(e)))}emoji(e){return this._addCheck(Le({kind:"emoji"},pM.errToObj(e)))}uuid(e){return this._addCheck(Le({kind:"uuid"},pM.errToObj(e)))}nanoid(e){return this._addCheck(Le({kind:"nanoid"},pM.errToObj(e)))}cuid(e){return this._addCheck(Le({kind:"cuid"},pM.errToObj(e)))}cuid2(e){return this._addCheck(Le({kind:"cuid2"},pM.errToObj(e)))}ulid(e){return this._addCheck(Le({kind:"ulid"},pM.errToObj(e)))}base64(e){return this._addCheck(Le({kind:"base64"},pM.errToObj(e)))}base64url(e){return this._addCheck(Le({kind:"base64url"},pM.errToObj(e)))}jwt(e){return this._addCheck(Le({kind:"jwt"},pM.errToObj(e)))}ip(e){return this._addCheck(Le({kind:"ip"},pM.errToObj(e)))}cidr(e){return this._addCheck(Le({kind:"cidr"},pM.errToObj(e)))}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(Le({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(r=null==e?void 0:e.local)&&r},pM.errToObj(null==e?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(Le({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision},pM.errToObj(null==e?void 0:e.message)))}duration(e){return this._addCheck(Le({kind:"duration"},pM.errToObj(e)))}regex(e,t){return this._addCheck(Le({kind:"regex",regex:e},pM.errToObj(t)))}includes(e,t){return this._addCheck(Le({kind:"includes",value:e,position:null==t?void 0:t.position},pM.errToObj(null==t?void 0:t.message)))}startsWith(e,t){return this._addCheck(Le({kind:"startsWith",value:e},pM.errToObj(t)))}endsWith(e,t){return this._addCheck(Le({kind:"endsWith",value:e},pM.errToObj(t)))}min(e,t){return this._addCheck(Le({kind:"min",value:e},pM.errToObj(t)))}max(e,t){return this._addCheck(Le({kind:"max",value:e},pM.errToObj(t)))}length(e,t){return this._addCheck(Le({kind:"length",value:e},pM.errToObj(t)))}nonempty(e){return this.min(1,pM.errToObj(e))}trim(){return new UM(ze(Le({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new UM(ze(Le({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new UM(ze(Le({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function WM(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/De(10,i)}UM.create=e=>{var t;return new UM(Le({checks:[],typeName:EL.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t},vM(e)))};class HM extends gM{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==ZD.number){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.number,received:t.parsedType}),sM}let t;const r=new iM;for(const n of this._def.checks)if("int"===n.kind)$D.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),nM(t,{code:XD.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:XD.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:XD.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==WM(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:XD.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),nM(t,{code:XD.not_finite,message:n.message}),r.dirty()):$D.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,pM.toString(t))}gt(e,t){return this.setLimit("min",e,!1,pM.toString(t))}lte(e,t){return this.setLimit("max",e,!0,pM.toString(t))}lt(e,t){return this.setLimit("max",e,!1,pM.toString(t))}setLimit(e,t,r,n){return new HM(ze(Le({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:pM.toString(n)}]}))}_addCheck(e){return new HM(ze(Le({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:pM.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pM.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pM.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pM.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pM.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:pM.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:pM.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pM.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pM.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&$D.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}HM.create=e=>new HM(Le({checks:[],typeName:EL.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1},vM(e)));class $M extends gM{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(Nie){return this._getInvalidInput(e)}if(this._getType(e)!==ZD.bigint)return this._getInvalidInput(e);let t;const r=new iM;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:XD.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:XD.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),nM(t,{code:XD.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):$D.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.bigint,received:t.parsedType}),sM}gte(e,t){return this.setLimit("min",e,!0,pM.toString(t))}gt(e,t){return this.setLimit("min",e,!1,pM.toString(t))}lte(e,t){return this.setLimit("max",e,!0,pM.toString(t))}lt(e,t){return this.setLimit("max",e,!1,pM.toString(t))}setLimit(e,t,r,n){return new $M(ze(Le({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:pM.toString(n)}]}))}_addCheck(e){return new $M(ze(Le({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pM.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pM.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pM.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pM.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:pM.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}$M.create=e=>{var t;return new $M(Le({checks:[],typeName:EL.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t},vM(e)))};class VM extends gM{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==ZD.boolean){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.boolean,received:t.parsedType}),sM}return aM(e.data)}}VM.create=e=>new VM(Le({typeName:EL.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1},vM(e)));class qM extends gM{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==ZD.date){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.date,received:t.parsedType}),sM}if(Number.isNaN(e.data.getTime())){return nM(this._getOrReturnCtx(e),{code:XD.invalid_date}),sM}const t=new iM;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),nM(r,{code:XD.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),nM(r,{code:XD.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):$D.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new qM(ze(Le({},this._def),{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:pM.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:pM.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}qM.create=e=>new qM(Le({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:EL.ZodDate},vM(e)));class GM extends gM{_parse(e){if(this._getType(e)!==ZD.symbol){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.symbol,received:t.parsedType}),sM}return aM(e.data)}}GM.create=e=>new GM(Le({typeName:EL.ZodSymbol},vM(e)));class KM extends gM{_parse(e){if(this._getType(e)!==ZD.undefined){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.undefined,received:t.parsedType}),sM}return aM(e.data)}}KM.create=e=>new KM(Le({typeName:EL.ZodUndefined},vM(e)));class JM extends gM{_parse(e){if(this._getType(e)!==ZD.null){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.null,received:t.parsedType}),sM}return aM(e.data)}}JM.create=e=>new JM(Le({typeName:EL.ZodNull},vM(e)));class YM extends gM{constructor(){super(...arguments),this._any=!0}_parse(e){return aM(e.data)}}YM.create=e=>new YM(Le({typeName:EL.ZodAny},vM(e)));class ZM extends gM{constructor(){super(...arguments),this._unknown=!0}_parse(e){return aM(e.data)}}ZM.create=e=>new ZM(Le({typeName:EL.ZodUnknown},vM(e)));class QM extends gM{_parse(e){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.never,received:t.parsedType}),sM}}QM.create=e=>new QM(Le({typeName:EL.ZodNever},vM(e)));class XM extends gM{_parse(e){if(this._getType(e)!==ZD.undefined){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.void,received:t.parsedType}),sM}return aM(e.data)}}XM.create=e=>new XM(Le({typeName:EL.ZodVoid},vM(e)));class eL extends gM{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==ZD.array)return nM(t,{code:XD.invalid_type,expected:ZD.array,received:t.parsedType}),sM;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(nM(t,{code:e?XD.too_big:XD.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(nM(t,{code:XD.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(nM(t,{code:XD.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new fM(t,e,t.path,r)))).then(e=>iM.mergeArray(r,e));const i=[...t.data].map((e,r)=>n.type._parseSync(new fM(t,e,t.path,r)));return iM.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new eL(ze(Le({},this._def),{minLength:{value:e,message:pM.toString(t)}}))}max(e,t){return new eL(ze(Le({},this._def),{maxLength:{value:e,message:pM.toString(t)}}))}length(e,t){return new eL(ze(Le({},this._def),{exactLength:{value:e,message:pM.toString(t)}}))}nonempty(e){return this.min(1,e)}}function tL(e){if(e instanceof rL){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=vL.create(tL(n))}return new rL(ze(Le({},e._def),{shape:()=>t}))}return e instanceof eL?new eL(ze(Le({},e._def),{type:tL(e.element)})):e instanceof vL?vL.create(tL(e.unwrap())):e instanceof gL?gL.create(tL(e.unwrap())):e instanceof oL?oL.create(e.items.map(e=>tL(e))):e}eL.create=(e,t)=>new eL(Le({type:e,minLength:null,maxLength:null,exactLength:null,typeName:EL.ZodArray},vM(t)));class rL extends gM{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=$D.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ZD.object){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.object,received:t.parsedType}),sM}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof QM&&"strip"===this._def.unknownKeys))for(const a in r.data)i.includes(a)||s.push(a);const o=[];for(const a of i){const e=n[a],t=r.data[a];o.push({key:{status:"valid",value:a},value:e._parse(new fM(r,t,r.path,a)),alwaysSet:a in r.data})}if(this._def.catchall instanceof QM){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of s)o.push({key:{status:"valid",value:t},value:{status:"valid",value:r.data[t]}});else if("strict"===e)s.length>0&&(nM(r,{code:XD.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new fM(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(()=>Ke(this,null,function*(){const e=[];for(const t of o){const r=yield t.key,n=yield t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e})).then(e=>iM.mergeObjectSync(t,e)):iM.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return pM.errToObj,new rL(Le(ze(Le({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:(t,r)=>{var n,i,s,o;const a=null!=(s=null==(i=(n=this._def).errorMap)?void 0:i.call(n,t,r).message)?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!=(o=pM.errToObj(e).message)?o:a}:{message:a}}}:{}))}strip(){return new rL(ze(Le({},this._def),{unknownKeys:"strip"}))}passthrough(){return new rL(ze(Le({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new rL(ze(Le({},this._def),{shape:()=>Le(Le({},this._def.shape()),e)}))}merge(e){return new rL({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Le(Le({},this._def.shape()),e._def.shape()),typeName:EL.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new rL(ze(Le({},this._def),{catchall:e}))}pick(e){const t={};for(const r of $D.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new rL(ze(Le({},this._def),{shape:()=>t}))}omit(e){const t={};for(const r of $D.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new rL(ze(Le({},this._def),{shape:()=>t}))}deepPartial(){return tL(this)}partial(e){const t={};for(const r of $D.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new rL(ze(Le({},this._def),{shape:()=>t}))}required(e){const t={};for(const r of $D.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof vL;)e=e._def.innerType;t[r]=e}return new rL(ze(Le({},this._def),{shape:()=>t}))}keyof(){return dL($D.objectKeys(this.shape))}}rL.create=(e,t)=>new rL(Le({shape:()=>e,unknownKeys:"strip",catchall:QM.create(),typeName:EL.ZodObject},vM(t))),rL.strictCreate=(e,t)=>new rL(Le({shape:()=>e,unknownKeys:"strict",catchall:QM.create(),typeName:EL.ZodObject},vM(t))),rL.lazycreate=(e,t)=>new rL(Le({shape:e,unknownKeys:"strip",catchall:QM.create(),typeName:EL.ZodObject},vM(t)));class nL extends gM{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(e=>Ke(this,null,function*(){const r=ze(Le({},t),{common:ze(Le({},t.common),{issues:[]}),parent:null});return{result:yield e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const r=e.map(e=>new eM(e.ctx.common.issues));return nM(t,{code:XD.invalid_union,unionErrors:r}),sM});{let e;const n=[];for(const s of r){const r=ze(Le({},t),{common:ze(Le({},t.common),{issues:[]}),parent:null}),i=s._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map(e=>new eM(e));return nM(t,{code:XD.invalid_union,unionErrors:i}),sM}}get options(){return this._def.options}}function iL(e,t){const r=QD(e),n=QD(t);if(e===t)return{valid:!0,data:e};if(r===ZD.object&&n===ZD.object){const r=$D.objectKeys(t),n=$D.objectKeys(e).filter(e=>-1!==r.indexOf(e)),i=Le(Le({},e),t);for(const s of n){const r=iL(e[s],t[s]);if(!r.valid)return{valid:!1};i[s]=r.data}return{valid:!0,data:i}}if(r===ZD.array&&n===ZD.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=iL(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===ZD.date&&n===ZD.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}nL.create=(e,t)=>new nL(Le({options:e,typeName:EL.ZodUnion},vM(t)));class sL extends gM{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(lM(e)||lM(n))return sM;const i=iL(e.value,n.value);return i.valid?((cM(e)||cM(n))&&t.dirty(),{status:t.value,value:i.data}):(nM(r,{code:XD.invalid_intersection_types}),sM)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}sL.create=(e,t,r)=>new sL(Le({left:e,right:t,typeName:EL.ZodIntersection},vM(r)));class oL extends gM{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZD.array)return nM(r,{code:XD.invalid_type,expected:ZD.array,received:r.parsedType}),sM;if(r.data.length<this._def.items.length)return nM(r,{code:XD.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),sM;!this._def.rest&&r.data.length>this._def.items.length&&(nM(r,{code:XD.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new fM(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>iM.mergeArray(t,e)):iM.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new oL(ze(Le({},this._def),{rest:e}))}}oL.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new oL(Le({items:e,typeName:EL.ZodTuple,rest:null},vM(t)))};class aL extends gM{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZD.map)return nM(r,{code:XD.invalid_type,expected:ZD.map,received:r.parsedType}),sM;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new fM(r,e,r.path,[s,"key"])),value:i._parse(new fM(r,t,r.path,[s,"value"]))}));if(r.common.async){const e=new Map;return Promise.resolve().then(()=>Ke(this,null,function*(){for(const r of s){const n=yield r.key,i=yield r.value;if("aborted"===n.status||"aborted"===i.status)return sM;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return sM;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}aL.create=(e,t,r)=>new aL(Le({valueType:t,keyType:e,typeName:EL.ZodMap},vM(r)));class lL extends gM{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZD.set)return nM(r,{code:XD.invalid_type,expected:ZD.set,received:r.parsedType}),sM;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(nM(r,{code:XD.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(nM(r,{code:XD.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return sM;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map((e,t)=>i._parse(new fM(r,e,r.path,t)));return r.common.async?Promise.all(o).then(e=>s(e)):s(o)}min(e,t){return new lL(ze(Le({},this._def),{minSize:{value:e,message:pM.toString(t)}}))}max(e,t){return new lL(ze(Le({},this._def),{maxSize:{value:e,message:pM.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}lL.create=(e,t)=>new lL(Le({valueType:e,minSize:null,maxSize:null,typeName:EL.ZodSet},vM(t)));class cL extends gM{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}cL.create=(e,t)=>new cL(Le({getter:e,typeName:EL.ZodLazy},vM(t)));class uL extends gM{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return nM(t,{received:t.data,code:XD.invalid_literal,expected:this._def.value}),sM}return{status:"valid",value:e.data}}get value(){return this._def.value}}function dL(e,t){return new pL(Le({values:e,typeName:EL.ZodEnum},vM(t)))}uL.create=(e,t)=>new uL(Le({value:e,typeName:EL.ZodLiteral},vM(t)));class pL extends gM{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return nM(t,{expected:$D.joinValues(r),received:t.parsedType,code:XD.invalid_type}),sM}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return nM(t,{received:t.data,code:XD.invalid_enum_value,options:r}),sM}return aM(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return pL.create(e,Le(Le({},this._def),t))}exclude(e,t=this._def){return pL.create(this.options.filter(t=>!e.includes(t)),Le(Le({},this._def),t))}}pL.create=dL;class hL extends gM{_parse(e){const t=$D.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ZD.string&&r.parsedType!==ZD.number){const e=$D.objectValues(t);return nM(r,{expected:$D.joinValues(e),received:r.parsedType,code:XD.invalid_type}),sM}if(this._cache||(this._cache=new Set($D.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=$D.objectValues(t);return nM(r,{received:r.data,code:XD.invalid_enum_value,options:e}),sM}return aM(e.data)}get enum(){return this._def.values}}hL.create=(e,t)=>new hL(Le({values:e,typeName:EL.ZodNativeEnum},vM(t)));class fL extends gM{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ZD.promise&&!1===t.common.async)return nM(t,{code:XD.invalid_type,expected:ZD.promise,received:t.parsedType}),sM;const r=t.parsedType===ZD.promise?t.data:Promise.resolve(t.data);return aM(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}fL.create=(e,t)=>new fL(Le({type:e,typeName:EL.ZodPromise},vM(t)));class mL extends gM{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===EL.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{nM(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(e=>Ke(this,null,function*(){if("aborted"===t.value)return sM;const n=yield this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?sM:"dirty"===n.status||"dirty"===t.value?oM(n.value):n}));{if("aborted"===t.value)return sM;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?sM:"dirty"===n.status||"dirty"===t.value?oM(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?sM:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?sM:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!uM(e))return sM;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>uM(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):sM)}$D.assertNever(n)}}mL.create=(e,t,r)=>new mL(Le({schema:e,typeName:EL.ZodEffects,effect:t},vM(r))),mL.createWithPreprocess=(e,t,r)=>new mL(Le({schema:t,effect:{type:"preprocess",transform:e},typeName:EL.ZodEffects},vM(r)));class vL extends gM{_parse(e){return this._getType(e)===ZD.undefined?aM(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vL.create=(e,t)=>new vL(Le({innerType:e,typeName:EL.ZodOptional},vM(t)));class gL extends gM{_parse(e){return this._getType(e)===ZD.null?aM(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gL.create=(e,t)=>new gL(Le({innerType:e,typeName:EL.ZodNullable},vM(t)));class yL extends gM{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===ZD.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}yL.create=(e,t)=>new yL(Le({innerType:e,typeName:EL.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default},vM(t)));class bL extends gM{_parse(e){const{ctx:t}=this._processInputParams(e),r=ze(Le({},t),{common:ze(Le({},t.common),{issues:[]})}),n=this._def.innerType._parse({data:r.data,path:r.path,parent:Le({},r)});return dM(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new eM(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new eM(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}bL.create=(e,t)=>new bL(Le({innerType:e,typeName:EL.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch},vM(t)));class xL extends gM{_parse(e){if(this._getType(e)!==ZD.nan){const t=this._getOrReturnCtx(e);return nM(t,{code:XD.invalid_type,expected:ZD.nan,received:t.parsedType}),sM}return{status:"valid",value:e.data}}}xL.create=e=>new xL(Le({typeName:EL.ZodNaN},vM(e)));class wL extends gM{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class SL extends gM{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(()=>Ke(this,null,function*(){const e=yield this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?sM:"dirty"===e.status?(t.dirty(),oM(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})}))()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?sM:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new SL({in:e,out:t,typeName:EL.ZodPipeline})}}class CL extends gM{_parse(e){const t=this._def.innerType._parse(e),r=e=>(uM(e)&&(e.value=Object.freeze(e.value)),e);return dM(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}var EL,TL;CL.create=(e,t)=>new CL(Le({innerType:e,typeName:EL.ZodReadonly},vM(t))),(TL=EL||(EL={})).ZodString="ZodString",TL.ZodNumber="ZodNumber",TL.ZodNaN="ZodNaN",TL.ZodBigInt="ZodBigInt",TL.ZodBoolean="ZodBoolean",TL.ZodDate="ZodDate",TL.ZodSymbol="ZodSymbol",TL.ZodUndefined="ZodUndefined",TL.ZodNull="ZodNull",TL.ZodAny="ZodAny",TL.ZodUnknown="ZodUnknown",TL.ZodNever="ZodNever",TL.ZodVoid="ZodVoid",TL.ZodArray="ZodArray",TL.ZodObject="ZodObject",TL.ZodUnion="ZodUnion",TL.ZodDiscriminatedUnion="ZodDiscriminatedUnion",TL.ZodIntersection="ZodIntersection",TL.ZodTuple="ZodTuple",TL.ZodRecord="ZodRecord",TL.ZodMap="ZodMap",TL.ZodSet="ZodSet",TL.ZodFunction="ZodFunction",TL.ZodLazy="ZodLazy",TL.ZodLiteral="ZodLiteral",TL.ZodEnum="ZodEnum",TL.ZodEffects="ZodEffects",TL.ZodNativeEnum="ZodNativeEnum",TL.ZodOptional="ZodOptional",TL.ZodNullable="ZodNullable",TL.ZodDefault="ZodDefault",TL.ZodCatch="ZodCatch",TL.ZodPromise="ZodPromise",TL.ZodBranded="ZodBranded",TL.ZodPipeline="ZodPipeline",TL.ZodReadonly="ZodReadonly";const NL=UM.create;QM.create,eL.create;const PL=rL.create;nL.create,sL.create,oL.create,pL.create,fL.create,vL.create,gL.create;const RL=PL({username:NL().min(1,""),password:NL().min(1,"")}),IL=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("div",Le({ref:t,className:zg("rounded-lg border bg-card text-card-foreground shadow-sm",n)},i))});IL.displayName="Card";const kL=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("div",Le({ref:t,className:zg("flex flex-col space-y-1.5 p-6",n)},i))});kL.displayName="CardHeader";const _L=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("h3",Le({ref:t,className:zg("text-2xl font-semibold leading-none tracking-tight",n)},i))});_L.displayName="CardTitle";const AL=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("p",Le({ref:t,className:zg("text-sm text-muted-foreground",n)},i))});AL.displayName="CardDescription";const jL=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("div",Le({ref:t,className:zg("p-6 pt-0",n)},i))});jL.displayName="CardContent";const OL=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("div",Le({ref:t,className:zg("flex items-center p-6 pt-0",n)},i))});OL.displayName="CardFooter";var DL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const r=_v(`Primitive.${t}`),n=Lt.forwardRef((e,n)=>{const i=e,{asChild:s}=i,o=Fe(i,["asChild"]),a=s?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Gt.jsx(a,ze(Le({},o),{ref:n}))});return n.displayName=`Primitive.${t}`,ze(Le({},e),{[t]:n})},{}),ML=Lt.forwardRef((e,t)=>Gt.jsx(DL.label,ze(Le({},e),{ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));ML.displayName="Label";var LL=ML;const zL=Bv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),FL=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(LL,Le({ref:t,className:zg(zL(),n)},i))});FL.displayName=LL.displayName;const BL=e=>{const t=e,{children:r}=t,n=Fe(t,["children"]);return zt.createElement(rD.Provider,{value:n},r)},UL=Lt.createContext({}),WL=()=>{const e=Lt.useContext(UL),t=Lt.useContext(HL),{getFieldState:r,formState:n}=zt.useContext(rD),i=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:s}=t;return Le({id:s,name:e.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`},i)},HL=Lt.createContext({}),$L=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);const s=Lt.useId();return Gt.jsx(HL.Provider,{value:{id:s},children:Gt.jsx("div",Le({ref:t,className:zg("space-y-2",n)},i))})});$L.displayName="FormItem";const VL=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);const{error:s,formItemId:o}=WL();return Gt.jsx(FL,Le({ref:t,className:zg(s&&"text-destructive",n),htmlFor:o},i))});VL.displayName="FormLabel";const qL=Lt.forwardRef((e,t)=>{var r=Fe(e,[]);const{error:n,formItemId:i,formDescriptionId:s,formMessageId:o}=WL();return Gt.jsx(Av,Le({ref:t,id:i,"aria-describedby":n?`${s} ${o}`:`${s}`,"aria-invalid":!!n},r))});qL.displayName="FormControl";Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);const{formDescriptionId:s}=WL();return Gt.jsx("p",Le({ref:t,id:s,className:zg("text-sm text-muted-foreground",n)},i))}).displayName="FormDescription";const GL=Lt.forwardRef((e,t)=>{var r=e,{className:n,children:i}=r,s=Fe(r,["className","children"]);const{error:o,formMessageId:a}=WL(),l=o?String(null==o?void 0:o.message):i;return l?Gt.jsx("p",ze(Le({ref:t,id:a,className:zg("text-sm font-medium text-destructive",n)},s),{children:l})):null});GL.displayName="FormMessage";const KL=Lt.forwardRef((e,t)=>{var r=e,{className:n,type:i}=r,s=Fe(r,["className","type"]);return Gt.jsx("input",Le({type:i,className:zg("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t},s))});KL.displayName="Input";const JL=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=Lt.useState(""),[r,n]=Lt.useState(""),[i,s]=Lt.useState(!1),[o,a]=Lt.useState(""),{login:l,user:c,isLoading:u}=sv(),d=im();tm(),console.log(" Login  :",{authLoading:u,hasUser:!!c,username:null==c?void 0:c.username,isLoading:i,errorMessage:o}),Lt.useEffect(()=>{console.log("  - :",{authLoading:u,hasUser:!!c,username:null==c?void 0:c.username}),!u&&c&&c.username?(console.log("  - "),d("/chat",{replace:!0})):u||c||console.log("  - ")},[c,u,d]);const p=HD({resolver:(h=RL,void 0===m&&(m={}),function(e,t,r){try{return Promise.resolve(function(t,n){try{var i=Promise.resolve(h["sync"===m.mode?"parse":"parseAsync"](e,f)).then(function(t){return r.shouldUseNativeValidation&&KD({},r),{errors:{},values:m.rawValues?e:t}})}catch(s){return n(s)}return i&&i.then?i.then(void 0,n):i}(0,function(e){return{values:{},errors:e.isEmpty?{}:JD(YD(e.errors,!r.shouldUseNativeValidation&&"all"===r.criteriaMode),r)}}))}catch(n){return Promise.reject(n)}}),defaultValues:{username:"",password:""}});var h,f,m;return Lt.useEffect(()=>{const e=e=>console.debug("[login] document submit caught",e);return document.addEventListener("submit",e,!0),()=>document.removeEventListener("submit",e,!0)},[]),Lt.useEffect(()=>{const e=p.watch(e=>{console.log(" :",e)});return()=>e.unsubscribe()},[p]),u?(console.log(" Login: "),Gt.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-b from-primary/10 to-primary/5 p-4",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-600",children:"..."})]})})):(console.log(" Login: "),Gt.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-b from-primary/10 to-primary/5 p-4",children:Gt.jsxs("div",{className:"w-full max-w-md",children:[Gt.jsxs("div",{className:"text-center mb-6",children:[Gt.jsx("h1",{className:"text-2xl font-bold text-primary",children:""}),Gt.jsx("p",{className:"text-neutral-600 mt-2",children:"Emergency Support System"})]}),Gt.jsxs(IL,{className:"w-full shadow-lg",children:[Gt.jsx(kL,{className:"text-center bg-primary text-white rounded-t-lg",children:Gt.jsx(_L,{className:"text-2xl font-bold",children:""})}),Gt.jsx(jL,{className:"pt-6",children:Gt.jsx(BL,ze(Le({},p),{children:Gt.jsxs("form",{id:"login-form",onSubmit:t=>Ke(this,null,function*(){if(t.preventDefault(),console.debug("[login] submit",{usernameLen:e.length}),console.trace("[login] submit trace"),a(""),!i)if(e.trim()&&r){s(!0);try{console.log(" :",{username:e.trim()}),yield l(e.trim(),r),console.log(" : "),d("/chat")}catch(n){console.warn("[login] :",n);let e="";(null==n?void 0:n.message)&&(e=n.message.includes("500")?"":n.message.includes("401")?"":n.message.includes("")?"":n.message.includes("")?"":n.message),a(e)}finally{s(!1)}}else a("/")}),className:"space-y-4",noValidate:!0,children:[Gt.jsxs($L,{children:[Gt.jsx(VL,{children:""}),Gt.jsx(qL,{children:Gt.jsx(KL,{name:"username",placeholder:"",autoComplete:"off",value:e,onChange:e=>t(e.target.value),disabled:i})}),Gt.jsx(GL,{})]}),Gt.jsxs($L,{children:[Gt.jsx(VL,{children:""}),Gt.jsx(qL,{children:Gt.jsx(KL,{name:"password",type:"password",placeholder:"",autoComplete:"new-password",value:r,onChange:e=>n(e.target.value),disabled:i})}),Gt.jsx(GL,{})]}),o&&Gt.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:o}),Gt.jsxs("div",{className:"p-3 text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-md",children:[Gt.jsx("p",{children:""}),Gt.jsx("p",{className:"mt-1",children:""})]}),Gt.jsx(Bg,{type:"submit",className:"w-full bg-primary",disabled:i,form:"login-form",children:i?"...":""}),Gt.jsx("button",{type:"button",onClick:()=>Ke(this,null,function*(){console.debug("[login] force send"),yield tv(e.trim());const t=yield rv();console.debug("[login] me after force",t)}),style:{display:"none"},"data-testid":"force-login",children:"force"})]})}))}),Gt.jsx(OL,{className:"flex flex-col space-y-2 text-center text-sm text-neutral-500 border-t pt-4 mt-2",children:Gt.jsx("p",{children:""})})]})]})}))}},Symbol.toStringTag,{value:"Module"})),YL=6048e5,ZL=Symbol.for("constructDateFrom");function QL(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&ZL in e?e[ZL](t):e instanceof Date?new e.constructor(t):new Date(t)}function XL(e,t){return QL(t||e,e)}let ez={};function tz(){return ez}function rz(e,t){var r,n,i,s,o,a,l,c;const u=tz(),d=null!=(c=null!=(l=null!=(s=null!=(i=null==t?void 0:t.weekStartsOn)?i:null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.weekStartsOn)?s:u.weekStartsOn)?l:null==(a=null==(o=u.locale)?void 0:o.options)?void 0:a.weekStartsOn)?c:0,p=XL(e,null==t?void 0:t.in),h=p.getDay(),f=(h<d?7:0)+h-d;return p.setDate(p.getDate()-f),p.setHours(0,0,0,0),p}function nz(e,t){return rz(e,ze(Le({},t),{weekStartsOn:1}))}function iz(e,t){const r=XL(e,null==t?void 0:t.in),n=r.getFullYear(),i=QL(r,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const s=nz(i),o=QL(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=nz(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=a.getTime()?n:n-1}function sz(e){const t=XL(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function oz(e,t){const r=XL(e,null==t?void 0:t.in);return r.setHours(0,0,0,0),r}function az(e,t,r){const[n,i]=function(e,...t){const r=QL.bind(null,t.find(e=>"object"==typeof e));return t.map(r)}(null==r||r.in,e,t),s=oz(n),o=oz(i),a=+s-sz(s),l=+o-sz(o);return Math.round((a-l)/864e5)}function lz(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+XL(e)));var t}const cz={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function uz(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const dz={date:uz({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:uz({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:uz({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},pz={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function hz(e){return(t,r)=>{let n;if("formatting"===((null==r?void 0:r.context)?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=(null==r?void 0:r.width)?String(r.width):t;n=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=(null==r?void 0:r.width)?String(r.width):e.defaultWidth;n=e.values[i]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function fz(e){return(t,r={})=>{const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const o=s[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(a,e=>e.test(o)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(a,e=>e.test(o));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(o.length)}}}function mz(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;return{value:o,rest:t.slice(i.length)}}}const vz={code:"en-US",formatDistance:(e,t,r)=>{let n;const i=cz[e];return n="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),(null==r?void 0:r.addSuffix)?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:dz,formatRelative:(e,t,r,n)=>pz[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:hz({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:hz({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:hz({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:hz({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:hz({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:mz({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:fz({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:fz({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:fz({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:fz({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:fz({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function gz(e,t){const r=XL(e,null==t?void 0:t.in),n=az(r,function(e,t){const r=XL(e,null==t?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}(r));return n+1}function yz(e,t){const r=XL(e,null==t?void 0:t.in),n=+nz(r)-+function(e,t){const r=iz(e,t),n=QL(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),nz(n)}(r);return Math.round(n/YL)+1}function bz(e,t){var r,n,i,s,o,a,l,c;const u=XL(e,null==t?void 0:t.in),d=u.getFullYear(),p=tz(),h=null!=(c=null!=(l=null!=(s=null!=(i=null==t?void 0:t.firstWeekContainsDate)?i:null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.firstWeekContainsDate)?s:p.firstWeekContainsDate)?l:null==(a=null==(o=p.locale)?void 0:o.options)?void 0:a.firstWeekContainsDate)?c:1,f=QL((null==t?void 0:t.in)||e,0);f.setFullYear(d+1,0,h),f.setHours(0,0,0,0);const m=rz(f,t),v=QL((null==t?void 0:t.in)||e,0);v.setFullYear(d,0,h),v.setHours(0,0,0,0);const g=rz(v,t);return+u>=+m?d+1:+u>=+g?d:d-1}function xz(e,t){const r=XL(e,null==t?void 0:t.in),n=+rz(r,t)-+function(e,t){var r,n,i,s,o,a,l,c;const u=tz(),d=null!=(c=null!=(l=null!=(s=null!=(i=null==t?void 0:t.firstWeekContainsDate)?i:null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.firstWeekContainsDate)?s:u.firstWeekContainsDate)?l:null==(a=null==(o=u.locale)?void 0:o.options)?void 0:a.firstWeekContainsDate)?c:1,p=bz(e,t),h=QL((null==t?void 0:t.in)||e,0);return h.setFullYear(p,0,d),h.setHours(0,0,0,0),rz(h,t)}(r,t);return Math.round(n/YL)+1}function wz(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Sz={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return wz("yy"===t?n%100:n,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):wz(r+1,2)},d:(e,t)=>wz(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>wz(e.getHours()%12||12,t.length),H:(e,t)=>wz(e.getHours(),t.length),m:(e,t)=>wz(e.getMinutes(),t.length),s:(e,t)=>wz(e.getSeconds(),t.length),S(e,t){const r=t.length,n=e.getMilliseconds();return wz(Math.trunc(n*Math.pow(10,r-3)),t.length)}},Cz="midnight",Ez="noon",Tz="morning",Nz="afternoon",Pz="evening",Rz="night",Iz={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return Sz.y(e,t)},Y:function(e,t,r,n){const i=bz(e,n),s=i>0?i:1-i;if("YY"===t){return wz(s%100,2)}return"Yo"===t?r.ordinalNumber(s,{unit:"year"}):wz(s,t.length)},R:function(e,t){return wz(iz(e),t.length)},u:function(e,t){return wz(e.getFullYear(),t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return wz(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return wz(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Sz.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return wz(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=xz(e,n);return"wo"===t?r.ordinalNumber(i,{unit:"week"}):wz(i,t.length)},I:function(e,t,r){const n=yz(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):wz(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):Sz.d(e,t)},D:function(e,t,r){const n=gz(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):wz(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return wz(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return wz(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=0===n?7:n;switch(t){case"i":return String(i);case"ii":return wz(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(i=12===n?Ez:0===n?Cz:n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(i=n>=17?Pz:n>=12?Nz:n>=4?Tz:Rz,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return Sz.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):Sz.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):wz(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):wz(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Sz.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Sz.s(e,t)},S:function(e,t){return Sz.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return _z(n);case"XXXX":case"XX":return Az(n);default:return Az(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return _z(n);case"xxxx":case"xx":return Az(n);default:return Az(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+kz(n,":");default:return"GMT"+Az(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+kz(n,":");default:return"GMT"+Az(n,":")}},t:function(e,t,r){return wz(Math.trunc(+e/1e3),t.length)},T:function(e,t,r){return wz(+e,t.length)}};function kz(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),s=n%60;return 0===s?r+String(i):r+String(i)+t+wz(s,2)}function _z(e,t){if(e%60==0){return(e>0?"-":"+")+wz(Math.abs(e)/60,2)}return Az(e,t)}function Az(e,t=""){const r=e>0?"-":"+",n=Math.abs(e);return r+wz(Math.trunc(n/60),2)+t+wz(n%60,2)}const jz=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Oz=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Dz={p:Oz,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return jz(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",jz(n,t)).replace("{{time}}",Oz(i,t))}},Mz=/^D+$/,Lz=/^Y+$/,zz=["D","DD","YY","YYYY"];const Fz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Bz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Uz=/^'([^]*?)'?$/,Wz=/''/g,Hz=/[a-zA-Z]/;function $z(e,t,r){var n,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y,b,x;const w=tz(),S=null!=(i=null!=(n=null==r?void 0:r.locale)?n:w.locale)?i:vz,C=null!=(p=null!=(d=null!=(l=null!=(a=null==r?void 0:r.firstWeekContainsDate)?a:null==(o=null==(s=null==r?void 0:r.locale)?void 0:s.options)?void 0:o.firstWeekContainsDate)?l:w.firstWeekContainsDate)?d:null==(u=null==(c=w.locale)?void 0:c.options)?void 0:u.firstWeekContainsDate)?p:1,E=null!=(x=null!=(b=null!=(v=null!=(m=null==r?void 0:r.weekStartsOn)?m:null==(f=null==(h=null==r?void 0:r.locale)?void 0:h.options)?void 0:f.weekStartsOn)?v:w.weekStartsOn)?b:null==(y=null==(g=w.locale)?void 0:g.options)?void 0:y.weekStartsOn)?x:0,T=XL(e,null==r?void 0:r.in);if(!lz(T))throw new RangeError("Invalid time value");let N=t.match(Bz).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,Dz[t])(e,S.formatLong)}return e}).join("").match(Fz).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Vz(e)};if(Iz[t])return{isToken:!0,value:e};if(t.match(Hz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});S.localize.preprocessor&&(N=S.localize.preprocessor(T,N));const P={firstWeekContainsDate:C,weekStartsOn:E,locale:S};return N.map(n=>{if(!n.isToken)return n.value;const i=n.value;(!(null==r?void 0:r.useAdditionalWeekYearTokens)&&function(e){return Lz.test(e)}(i)||!(null==r?void 0:r.useAdditionalDayOfYearTokens)&&function(e){return Mz.test(e)}(i))&&function(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(console.warn(n),zz.includes(e))throw new RangeError(n)}(i,t,String(e));return(0,Iz[i[0]])(T,i,S.localize,P)}).join("")}function Vz(e){const t=e.match(Uz);return t?t[1].replace(Wz,"'"):e}const qz={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},Gz={date:uz({formats:{full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},defaultWidth:"full"}),time:uz({formats:{full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:uz({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},Kz={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},Jz={ordinalNumber:(e,t)=>{const r=Number(e);switch(String(null==t?void 0:t.unit)){case"year":return`${r}`;case"quarter":return`${r}`;case"month":return`${r}`;case"week":return`${r}`;case"date":return`${r}`;case"hour":return`${r}`;case"minute":return`${r}`;case"second":return`${r}`;default:return`${r}`}},era:hz({values:{narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},defaultWidth:"wide"}),quarter:hz({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:hz({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},defaultWidth:"wide"}),day:hz({values:{narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},defaultWidth:"wide"}),dayPeriod:hz({values:{narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},defaultWidth:"wide",formattingValues:{narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},defaultFormattingWidth:"wide"})},Yz={code:"ja",formatDistance:(e,t,r)=>{let n;r=r||{};const i=qz[e];return n="string"==typeof i?i:1===t?r.addSuffix&&i.oneWithSuffix?i.oneWithSuffix:i.one:r.addSuffix&&i.otherWithSuffix?i.otherWithSuffix.replace("{{count}}",String(t)):i.other.replace("{{count}}",String(t)),r.addSuffix?r.comparison&&r.comparison>0?n+"":n+"":n},formatLong:Gz,formatRelative:(e,t,r,n)=>Kz[e],localize:Jz,match:{ordinalNumber:mz({matchPattern:/^?\d+(|||||||)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:fz({matchPatterns:{narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},defaultParseWidth:"any"}),quarter:fz({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:fz({matchPatterns:{narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:fz({matchPatterns:{narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},defaultMatchWidth:"wide",parsePatterns:{any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},defaultParseWidth:"any"}),dayPeriod:fz({matchPatterns:{any:/^(AM|PM|||||||)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Zz({message:e,isDraft:t=!1}){const{user:r}=sv(),[n,i]=Lt.useState(""),[s,o]=Lt.useState(!1),[a,l]=Lt.useState(!1),{toast:c}=fv(),u=!e.isAiResponse,d=e.content&&e.content.includes("");d&&console.log(" :",{id:e.id,isAiResponse:e.isAiResponse,contentStart:e.content.substring(0,50)+"...",timestamp:e.timestamp});let p="--:--";try{const t=e.timestamp||e.createdAt;if(t){const e=new Date(t);p=isNaN(e.getTime())?$z(new Date,"HH:mm",{locale:Yz}):$z(e,"HH:mm",{locale:Yz})}else p=$z(new Date,"HH:mm",{locale:Yz})}catch(f){console.error(":",f,"timestamp:",e.timestamp),p=$z(new Date,"HH:mm",{locale:Yz})}const h=t=>{var r;const n=(null==(r=e.media)?void 0:r.map(e=>e.url))||[];window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:t,all_slides:n.length>1?n:void 0,title:"",content:e.content}}))};return Gt.jsxs("div",{className:"flex items-end mb-4 w-full "+(t?"draft-message animate-pulse":""),onMouseUp:()=>{const e=window.getSelection(),t=null==e?void 0:e.toString();if(e&&t&&t.trim().length>0){const e=t.trim();i(e),o(!0)}else i(""),o(!1)},style:{justifyContent:u?"flex-end":"flex-start"},children:[!u&&Gt.jsx("div",{children:Gt.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-gray-500",children:Gt.jsx("span",{className:"text-white text-sm",children:""})})}),Gt.jsxs("div",{className:"mx-2 flex flex-col min-w-[200px]",style:{alignItems:u?"flex-end":"flex-start",maxWidth:"60%"},children:[Gt.jsx("div",{className:"flex items-center gap-2 mb-1",children:!u&&Gt.jsx("button",{onClick:()=>Ke(this,null,function*(){if(a)"speechSynthesis"in window&&window.speechSynthesis.cancel(),l(!1),c({title:"",duration:2e3});else{const t=e.content||e.text||"";if(!u&&t&&"string"==typeof t&&t.trim()){l(!0),c({title:"",duration:2e3});try{yield((e,t={})=>new Promise((r,n)=>{if(!("speechSynthesis"in window))return void n(new Error(""));const i=new SpeechSynthesisUtterance(e);i.rate=t.rate||1,i.pitch=t.pitch||1,i.volume=t.volume||1,i.lang=t.lang||"ja-JP",i.onend=()=>{r()},i.onerror=e=>{n(new Error(`: ${e.error}`))},window.speechSynthesis.cancel(),window.speechSynthesis.speak(i)}))(t,{rate:1,pitch:1,lang:"ja-JP"})}catch(f){c({title:"",description:f instanceof Error?f.message:"",variant:"destructive"})}finally{l(!1)}}}}),className:"w-8 h-8 flex items-center justify-center rounded-full shadow-sm\n                "+(a?"bg-indigo-600 text-white animate-pulse":"bg-blue-50 text-blue-600 hover:bg-blue-100"),title:a?"":"",children:Gt.jsx(rb,{size:16})})}),Gt.jsxs("div",{className:"px-4 py-3 mb-1 shadow-sm w-full "+(u?"chat-bubble-user bg-blue-500 text-white rounded-[18px_18px_4px_18px] border border-blue-500":"chat-bubble-ai bg-white rounded-[18px_18px_18px_4px] border border-gray-200"),children:[Gt.jsxs("div",{className:"relative",children:[(()=>{const t=e.content||"";return t.startsWith("data:image/")||t.includes(".jpg")||t.includes(".png")||t.includes("/knowledge-base/images/")?Gt.jsx("img",{src:t,alt:"",className:"rounded-lg max-w-xs cursor-pointer",style:{maxHeight:"300px",objectFit:"contain",marginLeft:u?"auto":"0",marginRight:u?"0":"auto"},onClick:()=>h(t)}):Gt.jsx("p",{className:u?"text-white":"text-gray-900",children:t})})(),s&&Gt.jsx("button",{onClick:()=>{n&&(c({title:"",description:""}),o(!1))},className:"absolute -top-2 -right-2 bg-blue-600 text-white p-1.5 rounded-full shadow-md hover:bg-blue-700 transition-colors",title:"",children:Gt.jsx(cy,{size:14})})]}),(e.media&&e.media.length>0&&console.log(":",{messageId:e.id,mediaCount:e.media.length,mediaDetails:e.media.map((e,t)=>({index:t,type:e.type,urlPrefix:e.url.substring(0,50)+"...",urlLength:e.url.length,isBase64:e.url.startsWith("data:"),title:e.title||"No title",fileName:e.fileName}))}),Gt.jsx(Gt.Fragment,{children:e.media&&e.media.length>0&&Gt.jsxs("div",{className:"mt-3",children:[d&&e.media.length>0&&Gt.jsxs("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[Gt.jsxs("div",{className:"text-sm text-blue-700 font-medium mb-2",children:["  (",e.media.length,")"]}),Gt.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:e.media.map((t,r)=>Gt.jsx("div",{className:"relative",children:"image"===t.type&&Gt.jsxs("div",{className:"group cursor-pointer",children:[Gt.jsx("img",{src:t.url,alt:t.title||`${r+1}`,className:"w-full h-20 object-cover rounded border border-blue-300 shadow-sm group-hover:shadow-md transition-shadow",onClick:()=>h(t.url),onLoad:n=>{console.log(":",{messageId:e.id,mediaIndex:r,title:t.title,fileName:t.fileName})},onError:n=>{var i;console.error(":",{messageId:e.id,mediaIndex:r,url:t.url.substring(0,100)+"...",title:t.title});const s=n.target;s.onerror=null,s.style.display="none";const o=document.createElement("div");o.className="w-full h-20 bg-gray-100 border border-gray-300 rounded flex items-center justify-center",o.innerHTML=`\n                                <div class="text-center text-gray-500 text-xs">\n                                  <div class="mb-1"></div>\n                                  <div>${t.fileName||""}</div>\n                                </div>\n                              `,null==(i=s.parentNode)||i.insertBefore(o,s)}}),Gt.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-20 rounded",children:Gt.jsx("div",{className:"bg-white bg-opacity-80 p-1 rounded",children:Gt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Gt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),t.fileName&&Gt.jsx("div",{className:"text-xs text-gray-600 mt-1 truncate",children:t.fileName})]})},`${e.id}-guide-media-${r}`))})]}),(!d||0===e.media.length)&&e.media&&e.media.length>0&&Gt.jsx(Gt.Fragment,{children:e.media.map((t,r)=>Gt.jsxs("div",{className:"mt-2",children:["image"===t.type&&Gt.jsxs("div",{className:"relative",children:[Gt.jsx("img",{src:t.url,alt:"",className:"rounded-lg w-full max-w-xs cursor-pointer border border-blue-200 shadow-md",style:{maxHeight:"300px",objectFit:"contain",marginLeft:u?"auto":"0",marginRight:u?"0":"auto"},onClick:()=>h(t.url),onLoad:n=>{console.log(":",{messageId:e.id,mediaIndex:r,width:n.target.naturalWidth,height:n.target.naturalHeight,urlType:t.url.startsWith("data:")?"base64":"url"})},onError:n=>{var i,s;console.warn(":",{messageId:e.id,mediaIndex:r,url:t.url.substring(0,100)+"...",isBase64:t.url.startsWith("data:"),error:n});const o=n.target;if(o.onerror=null,t.url.startsWith("data:image/")){o.style.display="none";const e=document.createElement("div");e.className="flex items-center justify-center bg-gray-100 border border-gray-300 rounded-lg p-4 max-w-xs",e.innerHTML='<span class="text-gray-500 text-sm"></span>',null==(i=o.parentNode)||i.insertBefore(e,o)}else if(t.url.includes("/api/")){o.style.display="none";const e=document.createElement("div");e.className="flex items-center justify-center bg-gray-100 border border-gray-300 rounded-lg p-4 max-w-xs",e.innerHTML='<span class="text-gray-500 text-sm"></span>',null==(s=o.parentNode)||s.insertBefore(e,o)}else o.src.includes("/placeholder-image.png")||(o.src="/placeholder-image.png")}}),Gt.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",onClick:()=>h(t.url),children:Gt.jsx("div",{className:"bg-blue-600 bg-opacity-70 p-2 rounded-full",children:Gt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Gt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})})]}),"video"===t.type&&Gt.jsxs("div",{className:"relative",children:[Gt.jsx("video",{src:t.url,controls:!0,className:"rounded-lg w-full max-w-xs border border-blue-200 shadow-md",style:{maxHeight:"300px"},onClick:e=>{e.stopPropagation()},onLoadedMetadata:n=>{console.log(":",{messageId:e.id,mediaIndex:r,duration:n.target.duration,urlType:t.url.startsWith("blob:")?"blob":"url"})},onError:n=>{console.error(":",{messageId:e.id,mediaIndex:r,url:t.url.substring(0,100)+"...",isBlob:t.url.startsWith("blob:")})}}),Gt.jsx("div",{className:"absolute top-2 right-2 flex items-center justify-center opacity-50 hover:opacity-100 transition-opacity",onClick:()=>h(t.url),children:Gt.jsx("div",{className:"bg-blue-600 bg-opacity-70 p-2 rounded-full",children:Gt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Gt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),Gt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]})]},`${e.id}-media-${r}`))})]})}))]}),Gt.jsx("span",{className:"text-xs "+(u?"text-blue-400":"text-gray-400"),children:p})]}),u&&Gt.jsx("div",{children:Gt.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-blue-500",children:Gt.jsx("span",{className:"text-white text-sm",children:""})})})]})}const Qz=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("textarea",Le({className:zg("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t},i))});Qz.displayName="Textarea";function Xz({onSendMessage:e,isLoading:t=!1,disabled:r=!1}){const[n,i]=Lt.useState(""),[s,o]=Lt.useState([]),{recordedText:a,selectedText:l,draftMessage:c,setDraftMessage:u}=wv(),d=function(){const[e,t]=Lt.useState(void 0);return Lt.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),r=()=>{t(window.innerWidth<768)};return e.addEventListener("change",r),t(window.innerWidth<768),()=>e.removeEventListener("change",r)},[]),{isMobile:!!e}}(),p=Lt.useRef(null),h=Lt.useRef(null);Lt.useEffect(()=>{l&&(i(l),d&&h.current?h.current.focus():p.current&&p.current.focus())},[l,d]);const f=e=>{i(e.target.value)},m=a=>Ke(this,null,function*(){if(a.preventDefault(),!n.trim()&&0===s.length)return;if(t||r)return;const l=n,c=[...s];i(""),o([]),yield e(l,c)}),v=()=>{window.dispatchEvent(new CustomEvent("open-camera"))},g=()=>{i(""),d&&h.current?h.current.focus():p.current&&p.current.focus()};return Gt.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-t border-blue-200 p-2 message-input-container",children:Gt.jsxs("form",{onSubmit:m,className:"flex items-center",children:[Gt.jsxs("div",{className:"flex-1 flex items-center bg-white border border-blue-200 rounded-full px-3 py-1 shadow-inner",children:[d?Gt.jsxs("div",{className:"flex-1 relative h-[48px]",children:[" ",Gt.jsx(Qz,{ref:h,className:"absolute inset-0 bg-transparent border-none focus-visible:ring-0 focus-visible:ring-offset-0 resize-none py-1 overflow-y-auto text-lg",placeholder:"...",value:n,onChange:f,disabled:t,rows:1,style:{lineHeight:"1.2"},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m(e))}}),n.trim()&&Gt.jsx("button",{type:"button",onClick:g,className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:Gt.jsx(ob,{size:16})})]}):Gt.jsxs("div",{className:"flex-1 h-[48px] flex items-center relative",children:[" ",Gt.jsx(KL,{ref:p,type:"text",className:"w-full h-full bg-transparent border-none focus-visible:ring-0 focus-visible:ring-offset-0 text-lg",placeholder:"...",value:n,onChange:f,disabled:t}),n.trim()&&Gt.jsx("button",{type:"button",onClick:g,className:"absolute right-1 text-gray-400 hover:text-gray-600",children:Gt.jsx(ob,{size:16})})]}),Gt.jsx(Bg,{type:"submit",disabled:t||!n.trim(),size:"icon",variant:"ghost",className:"ml-1 p-1 min-w-[28px] min-h-[28px] h-7 w-7 bg-gradient-to-r from-sky-100 to-blue-100 hover:from-sky-200 hover:to-blue-200 rounded-full border border-blue-300",children:Gt.jsx(zy,{className:"h-4 w-4 text-blue-600"})})]}),Gt.jsxs("div",{className:"md:hidden flex flex-col items-center ml-2",children:[Gt.jsx("span",{className:"text-xs font-medium text-indigo-700 mb-0.5",children:""}),Gt.jsx(Bg,{type:"button",onClick:v,size:"icon",variant:"ghost",className:"p-2 h-10 w-10 rounded-full bg-gradient-to-r from-indigo-100 to-cyan-100 hover:from-indigo-200 hover:to-cyan-200 border border-indigo-300",children:Gt.jsx(Zg,{className:"h-5 w-5 text-indigo-600"})})]}),Gt.jsxs("div",{className:"hidden md:flex md:flex-col md:items-center md:ml-2",children:[Gt.jsx("span",{className:"text-xs font-medium text-indigo-700 mb-0.5",children:""}),Gt.jsx(Bg,{type:"button",onClick:v,size:"icon",variant:"ghost",className:"p-2 h-10 w-10 rounded-full bg-gradient-to-r from-indigo-100 to-cyan-100 hover:from-indigo-200 hover:to-cyan-200 border border-indigo-300",children:Gt.jsx(Zg,{className:"h-5 w-5 text-indigo-600"})})]})]})})}const eF=Iw,tF=kw,rF=_w,nF=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(Aw,Le({ref:t,className:zg("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},i))});nF.displayName=Aw.displayName;const iF=Lt.forwardRef((e,t)=>{var r=e,{className:n,children:i,showCloseButton:s=!0}=r,o=Fe(r,["className","children","showCloseButton"]);return Gt.jsxs(rF,{children:[Gt.jsx(nF,{}),Gt.jsxs(jw,ze(Le({ref:t,className:zg("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},o),{children:[i,s&&Gt.jsxs(Mw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Gt.jsx(ob,{className:"h-4 w-4"}),Gt.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});iF.displayName=jw.displayName;const sF=e=>{var t=e,{className:r}=t,n=Fe(t,["className"]);return Gt.jsx("div",Le({className:zg("flex flex-col space-y-1.5 text-center sm:text-left",r)},n))};sF.displayName="DialogHeader";const oF=e=>{var t=e,{className:r}=t,n=Fe(t,["className"]);return Gt.jsx("div",Le({className:zg("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r)},n))};oF.displayName="DialogFooter";const aF=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(Ow,Le({ref:t,className:zg("text-lg font-semibold leading-none tracking-tight",n)},i))});aF.displayName=Ow.displayName;const lF=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(Dw,Le({ref:t,className:zg("text-sm text-muted-foreground",n)},i))});function cF(e){const t=Lt.useRef({value:e,previous:e});return Lt.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function uF(e){const[t,r]=Lt.useState(void 0);return db(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let i,s;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,s=t.blockSize}else i=e.offsetWidth,s=e.offsetHeight;r({width:i,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}lF.displayName=Dw.displayName;var dF="Switch",[pF]=cb(dF),[hF,fF]=pF(dF),mF=Lt.forwardRef((e,t)=>{const r=e,{__scopeSwitch:n,name:i,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d}=r,p=Fe(r,["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]),[h,f]=Lt.useState(null),m=Pv(t,e=>f(e)),v=Lt.useRef(!1),g=!h||(d||!!h.closest("form")),[y,b]=vb({prop:s,defaultProp:null!=o&&o,onChange:u,caller:dF});return Gt.jsxs(hF,{scope:n,checked:y,disabled:l,children:[Gt.jsx(wb.button,ze(Le({type:"button",role:"switch","aria-checked":y,"aria-required":a,"data-state":bF(y),"data-disabled":l?"":void 0,disabled:l,value:c},p),{ref:m,onClick:lb(e.onClick,e=>{b(e=>!e),g&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})),g&&Gt.jsx(yF,{control:h,bubbles:!v.current,name:i,value:c,checked:y,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});mF.displayName=dF;var vF="SwitchThumb",gF=Lt.forwardRef((e,t)=>{const r=e,{__scopeSwitch:n}=r,i=Fe(r,["__scopeSwitch"]),s=fF(vF,n);return Gt.jsx(wb.span,ze(Le({"data-state":bF(s.checked),"data-disabled":s.disabled?"":void 0},i),{ref:t}))});gF.displayName=vF;var yF=Lt.forwardRef((e,t)=>{var r=e,{__scopeSwitch:n,control:i,checked:s,bubbles:o=!0}=r,a=Fe(r,["__scopeSwitch","control","checked","bubbles"]);const l=Lt.useRef(null),c=Pv(l,t),u=cF(s),d=uF(i);return Lt.useEffect(()=>{const e=l.current;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(u!==s&&r){const t=new Event("click",{bubbles:o});r.call(e,s),e.dispatchEvent(t)}},[u,s,o]),Gt.jsx("input",ze(Le({type:"checkbox","aria-hidden":!0,defaultChecked:s},a),{tabIndex:-1,ref:c,style:ze(Le(Le({},a.style),d),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});function bF(e){return e?"checked":"unchecked"}yF.displayName="SwitchBubbleInput";var xF=mF,wF=gF;const SF=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(xF,ze(Le({className:zg("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n)},i),{ref:t,children:Gt.jsx(wF,{className:zg("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}))});function CF(){const[e,t]=Lt.useState(!1),[r,n]=Lt.useState(!1),[i,s]=Lt.useState(!1),[o,a]=Lt.useState(null),[l,c]=Lt.useState(null),[u]=Lt.useState(!0),d=Lt.useRef(null),p=Lt.useRef(null),h=Lt.useRef([]),{captureImage:f,sendMessage:m}=wv(),{toast:v}=fv(),g=function(){const[e,t]=Lt.useState(window.innerWidth>window.innerHeight?"landscape":"portrait");return Lt.useEffect(()=>{const e=()=>{t(window.innerWidth>window.innerHeight?"landscape":"portrait")};return window.addEventListener("resize",e),window.addEventListener("orientationchange",e),e(),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),e}();Lt.useEffect(()=>{const e=e=>{console.log(" CameraModal: open-camera ",e),t(!0)};return console.log(" CameraModal: open-camera "),window.addEventListener("open-camera",e),()=>{console.log(" CameraModal: open-camera "),window.removeEventListener("open-camera",e)}},[]),Lt.useEffect(()=>{if(e){(()=>Ke(this,null,function*(){try{const e=yield navigator.permissions.query({name:"camera"});if(console.log(" :",e.state),"denied"===e.state)return void v({title:"",description:"",variant:"destructive"})}catch(Pie){console.log(" API:",Pie)}setTimeout(()=>{y()},300)}))()}else b()},[e]);const y=()=>Ke(this,null,function*(){try{if(console.log(" "),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("");const e="https:"===location.protocol||"localhost"===location.hostname;if(console.log(" :",e,":",location.protocol,":",location.hostname),!e)throw new Error("HTTPS");l&&(console.log(" "),l.getTracks().forEach(e=>e.stop())),console.log(" :",{facingMode:u?"environment":"user",videoMode:r,constraints:{video:{facingMode:u?"environment":"user",width:{ideal:1280},height:{ideal:720}},audio:r}});const t={video:{facingMode:u?"environment":"user",width:{ideal:1280},height:{ideal:720}},audio:r};console.log(" getUserMedia");const n=yield navigator.mediaDevices.getUserMedia(t);console.log(" getUserMedia:",{streamActive:n.active,videoTracks:n.getVideoTracks().length,audioTracks:n.getAudioTracks().length}),c(n),d.current&&(console.log(" "),d.current.srcObject=n,d.current.onloadedmetadata=()=>{var e;console.log(" "),null==(e=d.current)||e.play().catch(e=>{console.error(" :",e)})})}catch(e){console.error(" :",e);let t="";e instanceof Error&&(t="NotAllowedError"===e.name?"":"NotFoundError"===e.name?"":"NotReadableError"===e.name?"":"OverconstrainedError"===e.name?"":"SecurityError"===e.name?"HTTPS":`: ${e.message}`),v({title:"",description:t,variant:"destructive"})}}),b=()=>{l&&(l.getTracks().forEach(e=>e.stop()),c(null)),i&&w(),a(null)},x=()=>{if(h.current=[],l){const e=new MediaRecorder(l);p.current=e,e.ondataavailable=e=>{e.data.size>0&&h.current.push(e.data)},e.onstop=()=>{const e=new Blob(h.current,{type:"video/mp4"}),t=URL.createObjectURL(e);a(t),s(!1)},e.start(),s(!0)}},w=()=>{p.current&&i&&p.current.stop()};return Gt.jsx(eF,{open:e,onOpenChange:t,children:Gt.jsxs(iF,{className:("landscape"===g?"max-w-3xl":"max-w-md")+" p-0 overflow-hidden bg-blue-50 border border-blue-200 camera-modal","aria-describedby":"camera-modal-desc",children:[Gt.jsx(aF,{className:"sr-only",children:""}),Gt.jsx("div",{id:"camera-modal-desc",className:"sr-only",children:""}),Gt.jsxs(sF,{className:"p-4 border-b border-blue-200 flex flex-row justify-between items-center bg-blue-100",children:[Gt.jsx(aF,{className:"text-indigo-600 text-lg font-bold",children:""}),Gt.jsxs("div",{className:"flex items-center space-x-4",children:[Gt.jsxs("div",{className:"flex items-center bg-white px-2 py-1 rounded-full",children:[Gt.jsx(qy,{className:"h-6 w-6 mr-2 text-indigo-600"}),Gt.jsx(SF,{id:"camera-mode",checked:r,onCheckedChange:()=>{i&&w(),n(!r),a(null),b(),setTimeout(()=>y(),300)}}),Gt.jsx(tb,{className:"h-6 w-6 ml-2 text-indigo-600"})]}),Gt.jsx(Bg,{variant:"ghost",size:"icon",className:"p-2 rounded-full hover:bg-blue-200 text-blue-700",onClick:()=>t(!1),children:Gt.jsx(ob,{})})]})]}),Gt.jsxs("div",{className:"relative bg-black",children:[o?r?Gt.jsx("video",{src:o,controls:!0,className:`w-full ${"landscape"===g?"h-64":"h-80"} bg-neutral-800 object-contain`,onClick:()=>window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:o}}))}):Gt.jsx("img",{src:o,alt:"Captured",className:`w-full ${"landscape"===g?"h-64":"h-80"} bg-neutral-800 object-contain`,onClick:()=>window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:o}}))}):Gt.jsx("video",{ref:d,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full ${"landscape"===g?"h-64":"h-80"} bg-neutral-800 object-cover`}),!o&&Gt.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center space-x-4",children:r?Gt.jsx(Gt.Fragment,{children:i?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Bg,{className:"bg-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg",variant:"outline",size:"icon",onClick:w,children:Gt.jsx(Ay,{className:"h-6 w-6 text-blue-600"})}),Gt.jsx(Bg,{className:"bg-red-500 rounded-full w-14 h-14 flex items-center justify-center shadow-lg",variant:"outline",size:"icon",onClick:w,children:Gt.jsx(Vy,{className:"h-6 w-6 text-white"})})]}):Gt.jsx(Bg,{className:"bg-blue-600 rounded-full w-16 h-16 flex items-center justify-center shadow-lg border-2 border-white",variant:"outline",size:"icon",onClick:x,children:Gt.jsx(ay,{className:"h-8 w-8 text-white"})})}):Gt.jsx(Bg,{className:"bg-blue-600 rounded-full w-16 h-16 flex items-center justify-center shadow-lg border-2 border-white",variant:"outline",size:"icon",onClick:()=>{if(d.current)if(r)i?w():x();else{const t=document.createElement("canvas"),r=d.current,n=874,i=1240;let{videoWidth:s,videoHeight:o}=r;if(s>n||o>i){const e=s/o;s>o?(s=n,o=n/e):(o=i,s=i*e)}t.width=s,t.height=o;const l=t.getContext("2d");if(l&&r){l.drawImage(r,0,0,s,o);try{const e=t.toDataURL("image/jpeg",.4);if(!e.startsWith("data:image/"))return console.error("Base64:",e.substring(0,50)),void console.error("canvas.toDataURL():",typeof e,e.length);console.log(" Base64:",{format:"image/jpeg",quality:.4,resolution:"150dpi",originalSize:`${r.videoWidth}x${r.videoHeight}`,compressedSize:`${s}x${o}`,maxResolution:`${n}x${i}`,dataLength:e.length,dataSizeMB:(e.length/1024/1024).toFixed(2),isValidBase64:e.startsWith("data:image/jpeg;base64,"),mimeType:e.split(";")[0],preview:e.substring(0,50)+"..."}),a(e)}catch(e){console.error("canvas.toDataURL():",e)}}}},children:Gt.jsx(ay,{className:"h-12 w-12 text-white"})})})]}),Gt.jsx("div",{className:"p-4 bg-blue-50",children:o?Gt.jsx(Bg,{className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium text-lg",onClick:()=>Ke(this,null,function*(){if(o)try{console.log("");let e=o;if(!o.startsWith("data:image/")){if(console.log("Base64:",typeof o),"object"==typeof o)return void console.error("Base64");e=`data:image/jpeg;base64,${o}`}console.log(":",{isBase64:e.startsWith("data:image/"),urlLength:e.length,mimeType:e.split(";")[0],preview:e.substring(0,50)+"..."}),yield m(e),t(!1),a(null)}catch(e){console.error(":",e)}}),children:""}):Gt.jsx("div",{className:"flex items-center justify-between",children:Gt.jsx("p",{className:"text-sm text-blue-700 font-medium",children:r?i?"... ":" ":" "})})})]})})}SF.displayName=xF.displayName;var EF=Lt.createContext(void 0);function TF(e){const t=Lt.useContext(EF);return e||t||"ltr"}var NF="rovingFocusGroup.onEntryFocus",PF={bubbles:!1,cancelable:!0},RF="RovingFocusGroup",[IF,kF,_F]=Jw(RF),[AF,jF]=cb(RF,[_F]),[OF,DF]=AF(RF),MF=Lt.forwardRef((e,t)=>Gt.jsx(IF.Provider,{scope:e.__scopeRovingFocusGroup,children:Gt.jsx(IF.Slot,{scope:e.__scopeRovingFocusGroup,children:Gt.jsx(LF,ze(Le({},e),{ref:t}))})}));MF.displayName=RF;var LF=Lt.forwardRef((e,t)=>{const r=e,{__scopeRovingFocusGroup:n,orientation:i,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1}=r,p=Fe(r,["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"]),h=Lt.useRef(null),f=Pv(t,h),m=TF(o),[v,g]=vb({prop:a,defaultProp:null!=l?l:null,onChange:c,caller:RF}),[y,b]=Lt.useState(!1),x=Cb(u),w=kF(n),S=Lt.useRef(!1),[C,E]=Lt.useState(0);return Lt.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(NF,x),()=>e.removeEventListener(NF,x)},[x]),Gt.jsx(OF,{scope:n,orientation:i,dir:m,loop:s,currentTabStopId:v,onItemFocus:Lt.useCallback(e=>g(e),[g]),onItemShiftTab:Lt.useCallback(()=>b(!0),[]),onFocusableItemAdd:Lt.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:Lt.useCallback(()=>E(e=>e-1),[]),children:Gt.jsx(wb.div,ze(Le({tabIndex:y||0===C?-1:0,"data-orientation":i},p),{ref:f,style:Le({outline:"none"},e.style),onMouseDown:lb(e.onMouseDown,()=>{S.current=!0}),onFocus:lb(e.onFocus,e=>{const t=!S.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(NF,PF);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter(e=>e.focusable);UF([e.find(e=>e.active),e.find(e=>e.id===v),...e].filter(Boolean).map(e=>e.ref.current),d)}}S.current=!1}),onBlur:lb(e.onBlur,()=>b(!1))}))})}),zF="RovingFocusGroupItem",FF=Lt.forwardRef((e,t)=>{const r=e,{__scopeRovingFocusGroup:n,focusable:i=!0,active:s=!1,tabStopId:o,children:a}=r,l=Fe(r,["__scopeRovingFocusGroup","focusable","active","tabStopId","children"]),c=fb(),u=o||c,d=DF(zF,n),p=d.currentTabStopId===u,h=kF(n),{onFocusableItemAdd:f,onFocusableItemRemove:m,currentTabStopId:v}=d;return Lt.useEffect(()=>{if(i)return f(),()=>m()},[i,f,m]),Gt.jsx(IF.ItemSlot,{scope:n,id:u,focusable:i,active:s,children:Gt.jsx(wb.span,ze(Le({tabIndex:p?0:-1,"data-orientation":d.orientation},l),{ref:t,onMouseDown:lb(e.onMouseDown,e=>{i?d.onItemFocus(u):e.preventDefault()}),onFocus:lb(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:lb(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,r){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:BF[n]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const s=i.indexOf(e.currentTarget);i=d.loop?(n=s+1,(r=i).map((e,t)=>r[(n+t)%r.length])):i.slice(s+1)}setTimeout(()=>UF(i))}var r,n}),children:"function"==typeof a?a({isCurrentTabStop:p,hasTabStop:null!=v}):a}))})});FF.displayName=zF;var BF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function UF(e,t=!1){const r=document.activeElement;for(const n of e){if(n===r)return;if(n.focus({preventScroll:t}),document.activeElement!==r)return}}var WF=MF,HF=FF,$F="Tabs",[VF]=cb($F,[jF]),qF=jF(),[GF,KF]=VF($F),JF=Lt.forwardRef((e,t)=>{const r=e,{__scopeTabs:n,value:i,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic"}=r,u=Fe(r,["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"]),d=TF(l),[p,h]=vb({prop:i,onChange:s,defaultProp:null!=o?o:"",caller:$F});return Gt.jsx(GF,{scope:n,baseId:fb(),value:p,onValueChange:h,orientation:a,dir:d,activationMode:c,children:Gt.jsx(wb.div,ze(Le({dir:d,"data-orientation":a},u),{ref:t}))})});JF.displayName=$F;var YF="TabsList",ZF=Lt.forwardRef((e,t)=>{const r=e,{__scopeTabs:n,loop:i=!0}=r,s=Fe(r,["__scopeTabs","loop"]),o=KF(YF,n),a=qF(n);return Gt.jsx(WF,ze(Le({asChild:!0},a),{orientation:o.orientation,dir:o.dir,loop:i,children:Gt.jsx(wb.div,ze(Le({role:"tablist","aria-orientation":o.orientation},s),{ref:t}))}))});ZF.displayName=YF;var QF="TabsTrigger",XF=Lt.forwardRef((e,t)=>{const r=e,{__scopeTabs:n,value:i,disabled:s=!1}=r,o=Fe(r,["__scopeTabs","value","disabled"]),a=KF(QF,n),l=qF(n),c=rB(a.baseId,i),u=nB(a.baseId,i),d=i===a.value;return Gt.jsx(HF,ze(Le({asChild:!0},l),{focusable:!s,active:d,children:Gt.jsx(wb.button,ze(Le({type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c},o),{ref:t,onMouseDown:lb(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():a.onValueChange(i)}),onKeyDown:lb(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&a.onValueChange(i)}),onFocus:lb(e.onFocus,()=>{const e="manual"!==a.activationMode;d||s||!e||a.onValueChange(i)})}))}))});XF.displayName=QF;var eB="TabsContent",tB=Lt.forwardRef((e,t)=>{const r=e,{__scopeTabs:n,value:i,forceMount:s,children:o}=r,a=Fe(r,["__scopeTabs","value","forceMount","children"]),l=KF(eB,n),c=rB(l.baseId,i),u=nB(l.baseId,i),d=i===l.value,p=Lt.useRef(d);return Lt.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),Gt.jsx(qb,{present:s||d,children:({present:r})=>Gt.jsx(wb.div,ze(Le({"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:u,tabIndex:0},a),{ref:t,style:ze(Le({},e.style),{animationDuration:p.current?"0s":void 0}),children:r&&o}))})});function rB(e,t){return`${e}-trigger-${t}`}function nB(e,t){return`${e}-content-${t}`}tB.displayName=eB;var iB=ZF,sB=XF,oB=tB;const aB=JF,lB=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(iB,Le({ref:t,className:zg("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n)},i))});lB.displayName=iB.displayName;const cB=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(sB,Le({ref:t,className:zg("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n)},i))});cB.displayName=sB.displayName;const uB=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(oB,Le({ref:t,className:zg("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},i))});function dB(e){if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;if(e.includes("/knowledge-base/images/"))return e;if(e.includes("/uploads/"))return e.replace("/uploads/","/knowledge-base/");if(e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".svg")){const t=e.split("/").pop();if(t){if(t.endsWith(".svg")){return`/knowledge-base/images/${t.replace(".svg",".png")}`}return`/knowledge-base/images/${t}`}}return e}function pB(){var e,t;const[r,n]=Lt.useState(!1),[i,s]=Lt.useState(""),[o,a]=Lt.useState(""),[l,c]=Lt.useState(""),[u,d]=Lt.useState([]),[p,h]=Lt.useState(0),[f,m]=Lt.useState(null),[v,g]=Lt.useState(!1),[y,b]=Lt.useState(""),[x,w]=Lt.useState(""),S=e=>Ke(this,null,function*(){try{g(!0);const t=yield fetch(e);if(!t.ok)throw new Error("Metadata fetch failed");const r=yield t.json();m(r)}catch(t){console.error("Failed to load metadata:",t),m(null)}finally{g(!1)}}),C=e=>{if(!u.length)return;let t;t="next"===e?(p+1)%u.length:(p-1+u.length)%u.length,h(t);const r=u[t];s(r),a("")};Lt.useEffect(()=>{const e=e=>{const t=e;if(t.detail){if(t.detail.url&&s(t.detail.url),t.detail.pngFallbackUrl?a(t.detail.pngFallbackUrl):a(""),t.detail.title?b(t.detail.title):b(""),t.detail.content?w(t.detail.content):w(""),t.detail.metadata_json?(c(t.detail.metadata_json),S(t.detail.metadata_json)):(c(""),m(null)),t.detail.all_slides&&Array.isArray(t.detail.all_slides)){d(t.detail.all_slides);const e=t.detail.all_slides.findIndex(e=>e===t.detail.url);h(e>=0?e:0)}else d([]),h(0);n(!0)}};return window.addEventListener("preview-image",e),()=>{window.removeEventListener("preview-image",e)}},[]);const E=(()=>{if(!f||!f.slides)return null;const e=p+1;return f.slides.find(t=>t.===e)})();return Gt.jsx(eF,{open:r,onOpenChange:n,children:Gt.jsxs(iF,{className:"max-w-5xl bg-black bg-opacity-90 border border-blue-400 flex flex-col items-center justify-center p-0 rounded-xl","aria-labelledby":"dialog-title","aria-describedby":"dialog-description image-preview-description",children:[Gt.jsxs("div",{className:"sr-only",children:[Gt.jsx("h2",{id:"dialog-title",children:(null==(e=null==f?void 0:f.metadata)?void 0:e.)||y}),Gt.jsx("p",{id:"dialog-description",children:""}),Gt.jsx("p",{id:"image-preview-description",children:""})]}),Gt.jsxs("div",{className:"w-full flex justify-between items-center p-2 bg-blue-700 text-white",children:[Gt.jsxs("h3",{className:"text-sm font-medium ml-2",children:[(null==(t=null==f?void 0:f.metadata)?void 0:t.)||y,u.length>1&&` -  ${p+1}/${u.length}`]}),Gt.jsx("div",{className:"flex items-center",children:Gt.jsx(Bg,{className:"text-white hover:bg-blue-600 rounded-full",variant:"ghost",size:"icon",onClick:()=>n(!1),children:Gt.jsx(ob,{className:"h-5 w-5"})})})]}),Gt.jsxs("div",{className:"relative w-full max-h-[70vh] flex items-center justify-center p-2",children:[u.length>1&&Gt.jsx(Bg,{className:"absolute left-2 z-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full opacity-75 hover:opacity-100",size:"icon",onClick:()=>C("prev"),children:Gt.jsx(ey,{className:"h-5 w-5"})}),Gt.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-0 bg-gray-50",children:Gt.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-blue-600 border-t-transparent animate-spin"})}),Gt.jsx("img",{src:dB(i||""),alt:(null==E?void 0:E.)||y||"",className:"max-w-full max-h-[70vh] object-contain rounded-lg border border-blue-500 z-10 relative",loading:"eager",decoding:"async",onLoad:e=>{const t=e.currentTarget;t.classList.add("loaded");const r=t.parentElement;if(r){r.querySelectorAll(".animate-spin").forEach(e=>{e.parentElement&&(e.parentElement.style.display="none")})}},onError:e=>{const t=e.currentTarget,r=t.src||"";console.log(":",r);try{if(o&&""!==o.trim())return console.log("URL:",o),void(t.src=dB(o));if(r.endsWith(".svg")){console.log("SVG->PNG");const e=r.replace(".svg",".png");return void(t.src=e)}if(r.endsWith(".jpeg")||r.endsWith(".jpg")){console.log("JPEG->PNG");const e=r.replace(/\.(jpeg|jpg)$/,".png");return void(t.src=e)}if(!r.includes("/knowledge-base/")){const e=r.split("/").pop();if(e)return console.log("knowledge-base"),void(t.src=`/knowledge-base/images/${e}`)}if(u.length>1){const e=(p+1)%u.length;return console.log(`(${e})`),void C("next")}console.log("");const e=t.parentElement;if(e&&(t.style.opacity="0.2",!e.querySelector(".error-message"))){const t=document.createElement("div");t.className="error-message absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 text-white p-4 rounded-lg z-20";const n=document.createElement("p");n.className="text-xl mb-2",n.textContent="";const i=document.createElement("p");i.className="text-sm",i.textContent=r.split("/").pop()||"",t.appendChild(n),t.appendChild(i),e.appendChild(t)}}catch(n){console.error(":",n)}}}),u.length>1&&Gt.jsx(Bg,{className:"absolute right-2 z-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full opacity-75 hover:opacity-100",size:"icon",onClick:()=>C("next"),children:Gt.jsx(ty,{className:"h-5 w-5"})})]}),!1,u.length>1&&Gt.jsx("div",{className:"w-full px-2 py-3 border-t border-blue-500 overflow-x-auto flex bg-gray-800",children:u.map((e,t)=>Gt.jsx("div",{className:"flex-shrink-0 mx-1 cursor-pointer transition-all "+(t===p?"border-2 border-blue-500 scale-105":"border border-gray-600 hover:border-blue-400"),onClick:()=>{h(t),s(e),a("")},children:Gt.jsxs("div",{className:"relative h-16 w-24",children:[Gt.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-700 z-0",children:Gt.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-blue-500 border-t-transparent animate-spin"})}),Gt.jsx("img",{src:dB(e),alt:` ${t+1}`,className:"h-16 w-24 object-cover relative z-10",loading:"eager",decoding:"async",onLoad:e=>{const t=e.currentTarget.parentElement;if(t){t.querySelectorAll(".animate-spin").forEach(e=>{e.parentElement&&(e.parentElement.style.display="none")})}},onError:e=>{console.log(`(${t})`);const r=e.currentTarget;r.style.opacity="0.3";const n=r.parentElement;if(n){const e=document.createElement("div");e.className="absolute inset-0 flex items-center justify-center z-20 bg-black bg-opacity-50 text-white text-xs",e.textContent="",n.appendChild(e)}}})]})},t))})]})})}function hB({guideId:e,onExit:t,isPreview:r=!1,onSendToChat:n,backButtonText:i=""}){const[s,o]=Lt.useState(null),[a,l]=Lt.useState(0),[c,u]=Lt.useState(!0),[d,p]=Lt.useState(""),[h,f]=Lt.useState(null),[m,v]=Lt.useState([]),[g,y]=Lt.useState(!1),[b,x]=Lt.useState(!1);Lt.useEffect(()=>{e&&(()=>{Ke(this,null,function*(){try{u(!0),console.log(" ",e);const t=Date.now(),r=`?ts=${t}&r=${Math.random().toString(36).substring(2)}`,{buildApiUrl:n}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),i=n(`/emergency-flow/${e}${r}`);console.log(" API URL:",i);const s=yield fetch(i,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate, max-age=0",Pragma:"no-cache",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","X-Requested-With":"XMLHttpRequest"}});if(console.log(" ",s.status,s.statusText),!s.ok){const e=yield s.text();throw console.error(" API :",e),new Error(`Failed to fetch guide data: ${s.status} - ${e}`)}const a=yield s.json();console.log(" :",a);const l=a.success&&a.data?a.data:a;if(console.log(" :",l),o(l),l.steps&&l.steps.length>0){const e=l.steps[0];v([{stepId:e.id,title:e.title,message:e.message,type:e.type,imageUrl:e.imageUrl,images:e.images,timestamp:new Date}])}}catch(Pie){console.error("Guide data fetch error:",Pie),p("")}finally{u(!1)}})})()},[e]);const w=e=>{if(s)if(e){const t=s.steps.findIndex(t=>t.id===e);if(-1!==t){l(t),f(null);const e=s.steps[t],r={stepId:e.id,title:e.title,message:e.message,type:e.type,imageUrl:e.imageUrl,images:e.images,selectedCondition:h,timestamp:new Date};v(e=>[...e,r])}}else if(a<s.steps.length-1){const e=a+1;l(e),f(null);const t=s.steps[e],r={stepId:t.id,title:t.title,message:t.message,type:t.type,imageUrl:t.imageUrl,images:t.images,timestamp:new Date};v(e=>[...e,r])}},S=()=>{if(!s||0===m.length)return;const e={title:s.title,description:s.description,executedSteps:m.filter(e=>"start"!==e.type&&"end"!==e.type),totalSteps:m.length,completedAt:new Date,isPartial:!g};window.dispatchEvent(new CustomEvent("emergency-guide-completed",{detail:e})),n&&n(),g?t():(console.log("",e),x(!0),setTimeout(()=>{x(!1)},3e3))};if(c)return Gt.jsx(IL,{className:"w-full max-w-4xl mx-auto",children:Gt.jsx(jL,{className:"flex justify-center items-center py-12",children:Gt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})});if(d||!s)return Gt.jsxs(IL,{className:"w-full max-w-4xl mx-auto",children:[Gt.jsx(kL,{children:Gt.jsx(_L,{className:"text-red-600",children:""})}),Gt.jsxs(jL,{children:[Gt.jsx("p",{className:"mb-4",children:d||""}),Gt.jsx(Bg,{onClick:t,children:""})]})]});const C=s&&s.steps&&0!==s.steps.length&&s.steps[a]||null,E=a===s.steps.length-1,T=0===a;return C?Gt.jsxs(IL,{className:"w-full max-w-4xl mx-auto",children:[Gt.jsx(kL,{children:Gt.jsxs("div",{className:"flex items-start justify-between",children:[Gt.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[Gt.jsxs(Bg,{variant:"ghost",size:"sm",onClick:t,className:"flex-shrink-0",children:[Gt.jsx(qg,{className:"h-4 w-4"}),i]}),Gt.jsxs(_L,{className:"text-xl break-words leading-tight",children:[s.title,r&&" ()"]})]}),Gt.jsxs("div",{className:"text-sm text-gray-500 flex-shrink-0 ml-4",children:[" ",a+1," / ",s.steps.length]})]})}),Gt.jsx(jL,{children:Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[Gt.jsx("h3",{className:"font-semibold text-blue-900 mb-2 text-lg",children:C.title}),C.description&&Gt.jsx("p",{className:"text-blue-800 text-sm mb-3",children:C.description}),Gt.jsx("div",{className:"text-blue-800 whitespace-pre-line",children:C.message})]}),"decision"===C.type&&C.conditions&&C.conditions.length>0&&Gt.jsxs("div",{className:"space-y-3",children:[Gt.jsx("h4",{className:"font-medium text-gray-900",children:r?"":""}),r?Gt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:C.conditions.map((e,t)=>Gt.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg bg-gray-50",children:[Gt.jsx("div",{className:"font-medium text-sm",children:e.label}),Gt.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[":"," ",(()=>{const t=s.steps.find(t=>t.id===e.nextId),r=s.steps.findIndex(t=>t.id===e.nextId);return t?`${t.title||`${r+1}`}`:""})()]})]},t))}):Gt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:C.conditions.map((e,t)=>Gt.jsx(Bg,{variant:"outline",className:"h-auto p-4 text-left justify-start",onClick:()=>(e=>{f(e.nextId),w(e.nextId)})(e),children:Gt.jsx("div",{className:"flex flex-col items-start",children:Gt.jsx("span",{className:"font-medium",children:e.label})})},t))})]}),C.images&&C.images.length>0?Gt.jsx("div",{className:"mt-4",children:Gt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.images.map((e,t)=>Gt.jsx("div",{className:"relative",children:Gt.jsx("img",{src:Dg(e.url),alt:`${C.title} - ${e.fileName||""}`,className:"w-full h-auto rounded-lg shadow-md",crossOrigin:"anonymous",onError:r=>{console.error("  (emergency-guide-display):",{imageUrl:e.url,builtUrl:Dg(e.url),fileName:e.fileName,stepTitle:C.title,index:t}),Lg(r,e.url)},onLoad:()=>{console.log("E (emergency-guide-display):",{imageUrl:e.url,builtUrl:Dg(e.url),fileName:e.fileName,stepTitle:C.title,index:t})}})},t))})}):C.imageUrl?Gt.jsx("div",{className:"mt-4",children:Gt.jsx("img",{src:Dg(C.imageUrl),alt:C.title,className:"w-full h-auto rounded-lg shadow-md",crossOrigin:"anonymous",onError:e=>{console.error("E (legacy imageUrl):",{imageUrl:C.imageUrl,builtUrl:Dg(C.imageUrl),stepTitle:C.title}),Lg(e,C.imageUrl)},onLoad:()=>{console.log("E (legacy imageUrl):",{imageUrl:C.imageUrl,builtUrl:Dg(C.imageUrl),stepTitle:C.title})}})}):Gt.jsxs("div",{className:"mt-4 text-center py-4 bg-gray-50 rounded-lg",children:[Gt.jsx(Sy,{className:"mx-auto h-8 w-8 text-gray-400"}),Gt.jsx("p",{className:"mt-2 text-sm text-gray-600",children:""})]}),Gt.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[Gt.jsxs(Bg,{variant:"outline",onClick:()=>{a>0&&(l(a-1),f(null),v(e=>e.slice(0,-1)))},disabled:T,children:[Gt.jsx(qg,{className:"h-4 w-4 mr-2"}),""]}),Gt.jsxs("div",{className:"flex gap-2",children:[a>=1&&!g&&!r&&Gt.jsxs(Bg,{onClick:S,variant:"outline",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-300",children:[Gt.jsx(zy,{className:"h-4 w-4 mr-2"}),""]}),(r||"decision"!==C.type)&&Gt.jsx(Bg,{onClick:E?()=>{y(!0)}:()=>w(),className:"flex items-center gap-2",children:E?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(iy,{className:"h-4 w-4"}),""]}):Gt.jsxs(Gt.Fragment,{children:["",Gt.jsx(Gg,{className:"h-4 w-4"})]})})]})]}),g&&!r&&Gt.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(iy,{className:"h-5 w-5 text-green-600"}),Gt.jsx("span",{className:"text-green-800 font-medium",children:""})]}),Gt.jsxs(Bg,{onClick:S,className:"bg-green-600 hover:bg-green-700 text-white",children:[Gt.jsx(zy,{className:"h-4 w-4 mr-2"}),""]})]}),Gt.jsx("p",{className:"text-green-700 text-sm mt-2",children:""})]}),g&&r&&Gt.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(iy,{className:"h-5 w-5 text-blue-600"}),Gt.jsx("span",{className:"text-blue-800 font-medium",children:""})]}),Gt.jsx("p",{className:"text-blue-700 text-sm mt-2",children:""})]}),b&&!r&&Gt.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg animate-pulse",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(iy,{className:"h-5 w-5 text-blue-600"}),Gt.jsx("span",{className:"text-blue-800 font-medium",children:""})]}),Gt.jsx("p",{className:"text-blue-700 text-sm mt-2",children:""})]})]})},C.id)]}):Gt.jsx(IL,{className:"w-full max-w-4xl mx-auto",children:Gt.jsxs(jL,{children:[Gt.jsx("p",{className:"text-center py-8",children:""}),Gt.jsx(Bg,{onClick:t,className:"w-full",children:"E          "})]})})}uB.displayName=oB.displayName;const fB=({onKeywordClick:e})=>Gt.jsxs("div",{className:"flex flex-wrap gap-2 my-3",children:[Gt.jsx("span",{className:"text-sm text-gray-600 self-center mr-1",children:":"}),["","","",""].map(t=>Gt.jsx(Bg,{variant:"outline",size:"sm",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200",onClick:()=>e(t),children:t},t))]}),mB=Bv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function vB(e){var t=e,{className:r,variant:n}=t,i=Fe(t,["className","variant"]);return Gt.jsx("div",Le({className:zg(mB({variant:n}),r)},i))}function gB({question:e,options:t=[],reasoning:r,onAnswer:n,isLoading:i=!1}){const[s,o]=Lt.useState(null);return Gt.jsx(IL,{className:"w-full max-w-2xl mx-auto border-blue-200 bg-blue-50",children:Gt.jsxs(jL,{className:"p-6",children:[Gt.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[Gt.jsx("div",{className:"flex-shrink-0",children:Gt.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:Gt.jsx(sy,{className:"w-4 h-4 text-white"})})}),Gt.jsxs("div",{className:"flex-1",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(vB,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:""}),r&&Gt.jsx(vB,{variant:"outline",className:"text-xs",children:""})]}),Gt.jsx("div",{className:"text-gray-900 font-medium mb-3",children:e}),r&&Gt.jsxs("div",{className:"text-sm text-gray-600 mb-4 p-3 bg-blue-100 rounded-lg",children:[Gt.jsx("strong",{children:":"})," ",r]})]})]}),t&&t.length>0&&Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),Gt.jsx("div",{className:"grid gap-2",children:t.map((e,t)=>Gt.jsx(Bg,{variant:"outline",className:"h-auto p-4 text-left justify-start border-2 transition-all "+(s===e?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"),onClick:()=>(e=>{o(e),n(e)})(e),disabled:i,children:Gt.jsxs("div",{className:"flex items-center gap-3",children:[Gt.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full border-2 border-gray-300 flex items-center justify-center",children:s===e&&Gt.jsx(iy,{className:"w-4 h-4 text-blue-500"})}),Gt.jsx("span",{className:"font-medium",children:e})]})},t))}),Gt.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:Gt.jsxs(Bg,{variant:"ghost",size:"sm",onClick:()=>{const e=prompt(":");e&&e.trim()&&n(e.trim())},disabled:i,className:"text-blue-600 hover:text-blue-700",children:[Gt.jsx(Gg,{className:"w-4 h-4 mr-2"}),""]})})]}),i&&Gt.jsxs("div",{className:"mt-4 flex items-center gap-2 text-blue-600",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),Gt.jsx("span",{className:"text-sm",children:"..."})]})]})})}function yB({solution:e,problemDescription:t,reasoning:r,isEmergency:n=!1}){const i=(e=>{const t={problem:"",cause:"",steps:[],safety:"",expert:""},r=e.split("\n");let n="";for(const i of r){const e=i.trim();e&&(e.includes("")||e.includes(":")?(n="problem",t.problem=e.replace(/^.*?[:]\s*/,"")):e.includes("")||e.includes(":")?(n="cause",t.cause=e.replace(/^.*?[:]\s*/,"")):e.includes("")||e.includes(":")?n="steps":e.includes("")||e.includes(":")?(n="safety",t.safety=e.replace(/^.*?[:]\s*/,"")):e.includes("")||e.includes(":")?(n="expert",t.expert=e.replace(/^.*?[:]\s*/,"")):"steps"===n&&(e.startsWith("")||e.startsWith("-")||e.match(/^\d+\./))?t.steps.push(e.replace(/^[\-\d\.\s]+/,"")):n&&""===t[n]&&"string"==typeof t[n]&&(t[n]=e))}return t})(e);return Gt.jsx(IL,{className:"w-full max-w-2xl mx-auto "+(n?"border-red-200 bg-red-50":"border-green-200 bg-green-50"),children:Gt.jsxs(jL,{className:"p-6",children:[Gt.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[Gt.jsx("div",{className:"flex-shrink-0",children:Gt.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(n?"bg-red-500":"bg-green-500"),children:n?Gt.jsx(Yy,{className:"w-4 h-4 text-white"}):Gt.jsx(iy,{className:"w-4 h-4 text-white"})})}),Gt.jsxs("div",{className:"flex-1",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(vB,{variant:"secondary",className:n?"bg-red-100 text-red-800":"bg-green-100 text-green-800",children:n?"":""}),r&&Gt.jsx(vB,{variant:"outline",className:"text-xs",children:""})]}),t&&Gt.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[Gt.jsx("strong",{children:":"})," ",t]})]})]}),Gt.jsxs("div",{className:"space-y-4",children:[i.problem&&Gt.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(Yy,{className:"w-4 h-4 text-orange-500"}),Gt.jsx("h4",{className:"font-medium text-gray-900",children:""})]}),Gt.jsx("p",{className:"text-gray-700",children:i.problem})]}),i.cause&&Gt.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(sb,{className:"w-4 h-4 text-blue-500"}),Gt.jsx("h4",{className:"font-medium text-gray-900",children:""})]}),Gt.jsx("p",{className:"text-gray-700",children:i.cause})]}),i.steps.length>0&&Gt.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Gt.jsx(iy,{className:"w-4 h-4 text-green-500"}),Gt.jsx("h4",{className:"font-medium text-gray-900",children:""})]}),Gt.jsx("ol",{className:"list-decimal list-inside space-y-2",children:i.steps.map((e,t)=>Gt.jsx("li",{className:"text-gray-700",children:e},t))})]}),i.safety&&Gt.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(Uy,{className:"w-4 h-4 text-yellow-600"}),Gt.jsx("h4",{className:"font-medium text-yellow-800",children:""})]}),Gt.jsx("p",{className:"text-yellow-700",children:i.safety})]}),i.expert&&Gt.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(Yy,{className:"w-4 h-4 text-blue-500"}),Gt.jsx("h4",{className:"font-medium text-blue-800",children:""})]}),Gt.jsx("p",{className:"text-blue-700",children:i.expert})]}),!i.problem&&!i.cause&&0===i.steps.length&&Gt.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(iy,{className:"w-4 h-4 text-green-500"}),Gt.jsx("h4",{className:"font-medium text-gray-900",children:""})]}),Gt.jsx("div",{className:"text-gray-700 whitespace-pre-line",children:e})]})]}),r&&Gt.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-lg",children:Gt.jsxs("div",{className:"text-sm text-gray-600",children:[Gt.jsx("strong",{children:":"})," ",r]})})]})})}const bB=["top","right","bottom","left"],xB=Math.min,wB=Math.max,SB=Math.round,CB=Math.floor,EB=e=>({x:e,y:e}),TB={left:"right",right:"left",bottom:"top",top:"bottom"},NB={start:"end",end:"start"};function PB(e,t,r){return wB(e,xB(t,r))}function RB(e,t){return"function"==typeof e?e(t):e}function IB(e){return e.split("-")[0]}function kB(e){return e.split("-")[1]}function _B(e){return"x"===e?"y":"x"}function AB(e){return"y"===e?"height":"width"}const jB=new Set(["top","bottom"]);function OB(e){return jB.has(IB(e))?"y":"x"}function DB(e){return _B(OB(e))}function MB(e){return e.replace(/start|end/g,e=>NB[e])}const LB=["left","right"],zB=["right","left"],FB=["top","bottom"],BB=["bottom","top"];function UB(e,t,r,n){const i=kB(e);let s=function(e,t,r){switch(e){case"top":case"bottom":return r?t?zB:LB:t?LB:zB;case"left":case"right":return t?FB:BB;default:return[]}}(IB(e),"start"===r,n);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(MB)))),s}function WB(e){return e.replace(/left|right|bottom|top/g,e=>TB[e])}function HB(e){return"number"!=typeof e?function(e){return Le({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function $B(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function VB(e,t,r){let{reference:n,floating:i}=e;const s=OB(t),o=DB(t),a=AB(o),l=IB(t),c="y"===s,u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,p=n[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:n.y-i.height};break;case"bottom":h={x:u,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:d};break;case"left":h={x:n.x-i.width,y:d};break;default:h={x:n.x,y:n.y}}switch(kB(t)){case"start":h[o]-=p*(r&&c?-1:1);break;case"end":h[o]+=p*(r&&c?-1:1)}return h}function qB(e,t){return Ke(this,null,function*(){var r;void 0===t&&(t={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=RB(t,e),f=HB(h),m=a[p?"floating"===d?"reference":"floating":d],v=$B(yield s.getClippingRect({element:null==(r=yield null==s.isElement?void 0:s.isElement(m))||r?m:m.contextElement||(yield null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),g="floating"===d?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=yield null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating),b=(yield null==s.isElement?void 0:s.isElement(y))&&(yield null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},x=$B(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:g,offsetParent:y,strategy:l}):g);return{top:(v.top-x.top+f.top)/b.y,bottom:(x.bottom-v.bottom+f.bottom)/b.y,left:(v.left-x.left+f.left)/b.x,right:(x.right-v.right+f.right)/b.x}})}function GB(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function KB(e){return bB.some(t=>e[t]>=0)}const JB=new Set(["left","top"]);function YB(){return"undefined"!=typeof window}function ZB(e){return eU(e)?(e.nodeName||"").toLowerCase():"#document"}function QB(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function XB(e){var t;return null==(t=(eU(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function eU(e){return!!YB()&&(e instanceof Node||e instanceof QB(e).Node)}function tU(e){return!!YB()&&(e instanceof Element||e instanceof QB(e).Element)}function rU(e){return!!YB()&&(e instanceof HTMLElement||e instanceof QB(e).HTMLElement)}function nU(e){return!(!YB()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof QB(e).ShadowRoot)}const iU=new Set(["inline","contents"]);function sU(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=gU(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!iU.has(i)}const oU=new Set(["table","td","th"]);function aU(e){return oU.has(ZB(e))}const lU=[":popover-open",":modal"];function cU(e){return lU.some(t=>{try{return e.matches(t)}catch(r){return!1}})}const uU=["transform","translate","scale","rotate","perspective"],dU=["transform","translate","scale","rotate","perspective","filter"],pU=["paint","layout","strict","content"];function hU(e){const t=fU(),r=tU(e)?gU(e):e;return uU.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||dU.some(e=>(r.willChange||"").includes(e))||pU.some(e=>(r.contain||"").includes(e))}function fU(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const mU=new Set(["html","body","#document"]);function vU(e){return mU.has(ZB(e))}function gU(e){return QB(e).getComputedStyle(e)}function yU(e){return tU(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function bU(e){if("html"===ZB(e))return e;const t=e.assignedSlot||e.parentNode||nU(e)&&e.host||XB(e);return nU(t)?t.host:t}function xU(e){const t=bU(e);return vU(t)?e.ownerDocument?e.ownerDocument.body:e.body:rU(t)&&sU(t)?t:xU(t)}function wU(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const i=xU(e),s=i===(null==(n=e.ownerDocument)?void 0:n.body),o=QB(i);if(s){const e=SU(o);return t.concat(o,o.visualViewport||[],sU(i)?i:[],e&&r?wU(e):[])}return t.concat(i,wU(i,[],r))}function SU(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function CU(e){const t=gU(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=rU(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=SB(r)!==s||SB(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function EU(e){return tU(e)?e:e.contextElement}function TU(e){const t=EU(e);if(!rU(t))return EB(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=CU(t);let o=(s?SB(r.width):r.width)/n,a=(s?SB(r.height):r.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const NU=EB(0);function PU(e){const t=QB(e);return fU()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:NU}function RU(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const i=e.getBoundingClientRect(),s=EU(e);let o=EB(1);t&&(n?tU(n)&&(o=TU(n)):o=TU(e));const a=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==QB(e))&&t}(s,r,n)?PU(s):EB(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const e=QB(s),t=n&&tU(n)?QB(n):n;let r=e,i=SU(r);for(;i&&n&&t!==r;){const e=TU(i),t=i.getBoundingClientRect(),n=gU(i),s=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=s,c+=o,r=QB(i),i=SU(r)}}return $B({width:u,height:d,x:l,y:c})}function IU(e,t){const r=yU(e).scrollLeft;return t?t.left+r:RU(XB(e)).left+r}function kU(e,t){const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-IU(e,r),y:r.top+t.scrollTop}}const _U=new Set(["absolute","fixed"]);function AU(e,t,r){let n;if("viewport"===t)n=function(e,t){const r=QB(e),n=XB(e),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const e=fU();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}const c=IU(n);if(c<=0){const e=n.ownerDocument,t=e.body,r=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(r.marginLeft)+parseFloat(r.marginRight)||0,o=Math.abs(n.clientWidth-t.clientWidth-i);o<=25&&(s-=o)}else c<=25&&(s+=c);return{width:s,height:o,x:a,y:l}}(e,r);else if("document"===t)n=function(e){const t=XB(e),r=yU(e),n=e.ownerDocument.body,i=wB(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=wB(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+IU(e);const a=-r.scrollTop;return"rtl"===gU(n).direction&&(o+=wB(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}(XB(e));else if(tU(t))n=function(e,t){const r=RU(e,!0,"fixed"===t),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=rU(e)?TU(e):EB(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:n*s.y}}(t,r);else{const r=PU(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return $B(n)}function jU(e,t){const r=bU(e);return!(r===t||!tU(r)||vU(r))&&("fixed"===gU(r).position||jU(r,t))}function OU(e,t,r){const n=rU(t),i=XB(t),s="fixed"===r,o=RU(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=EB(0);function c(){l.x=IU(i)}if(n||!n&&!s)if(("body"!==ZB(t)||sU(i))&&(a=yU(t)),n){const e=RU(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();s&&!n&&i&&c();const u=!i||n||s?EB(0):kU(i,a);return{x:o.left+a.scrollLeft-l.x-u.x,y:o.top+a.scrollTop-l.y-u.y,width:o.width,height:o.height}}function DU(e){return"static"===gU(e).position}function MU(e,t){if(!rU(e)||"fixed"===gU(e).position)return null;if(t)return t(e);let r=e.offsetParent;return XB(e)===r&&(r=r.ownerDocument.body),r}function LU(e,t){const r=QB(e);if(cU(e))return r;if(!rU(e)){let t=bU(e);for(;t&&!vU(t);){if(tU(t)&&!DU(t))return t;t=bU(t)}return r}let n=MU(e,t);for(;n&&aU(n)&&DU(n);)n=MU(n,t);return n&&vU(n)&&DU(n)&&!hU(n)?r:n||function(e){let t=bU(e);for(;rU(t)&&!vU(t);){if(hU(t))return t;if(cU(t))return null;t=bU(t)}return null}(e)||r}const zU={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const s="fixed"===i,o=XB(n),a=!!t&&cU(t.floating);if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},c=EB(1);const u=EB(0),d=rU(n);if((d||!d&&!s)&&(("body"!==ZB(n)||sU(o))&&(l=yU(n)),rU(n))){const e=RU(n);c=TU(n),u.x=e.x+n.clientLeft,u.y=e.y+n.clientTop}const p=!o||d||s?EB(0):kU(o,l);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:r.y*c.y-l.scrollTop*c.y+u.y+p.y}},getDocumentElement:XB,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const s=[..."clippingAncestors"===r?cU(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let n=wU(e,[],!1).filter(e=>tU(e)&&"body"!==ZB(e)),i=null;const s="fixed"===gU(e).position;let o=s?bU(e):e;for(;tU(o)&&!vU(o);){const t=gU(o),r=hU(o);r||"fixed"!==t.position||(i=null),(s?!r&&!i:!r&&"static"===t.position&&i&&_U.has(i.position)||sU(o)&&!r&&jU(e,o))?n=n.filter(e=>e!==o):i=t,o=bU(o)}return t.set(e,n),n}(t,this._c):[].concat(r),n],o=s[0],a=s.reduce((e,r)=>{const n=AU(t,r,i);return e.top=wB(n.top,e.top),e.right=xB(n.right,e.right),e.bottom=xB(n.bottom,e.bottom),e.left=wB(n.left,e.left),e},AU(t,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:LU,getElementRects:function(e){return Ke(this,null,function*(){const t=this.getOffsetParent||LU,r=this.getDimensions,n=yield r(e.floating);return{reference:OU(e.reference,yield t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}})},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=CU(e);return{width:t,height:r}},getScale:TU,isElement:tU,isRTL:function(e){return"rtl"===gU(e).direction}};function FU(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function BU(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=EU(e),u=i||s?[...c?wU(c):[],...wU(t)]:[];u.forEach(e=>{i&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)});const d=c&&a?function(e,t){let r,n=null;const i=XB(e);function s(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:p,height:h}=c;if(a||t(),!p||!h)return;const f={rootMargin:-CB(d)+"px "+-CB(i.clientWidth-(u+p))+"px "+-CB(i.clientHeight-(d+h))+"px "+-CB(u)+"px",threshold:wB(0,xB(1,l))||1};let m=!0;function v(t){const n=t[0].intersectionRatio;if(n!==l){if(!m)return o();n?o(!1,n):r=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==n||FU(c,e.getBoundingClientRect())||o(),m=!1}try{n=new IntersectionObserver(v,ze(Le({},f),{root:i.ownerDocument}))}catch(g){n=new IntersectionObserver(v,f)}n.observe(e)}(!0),s}(c,r):null;let p,h=-1,f=null;o&&(f=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),r()}),c&&!l&&f.observe(c),f.observe(t));let m=l?RU(e):null;return l&&function t(){const n=RU(e);m&&!FU(m,n)&&r();m=n,p=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)}),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const UU=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn(t){return Ke(this,null,function*(){var r,n;const{x:i,y:s,placement:o,middlewareData:a}=t,l=yield function(e,t){return Ke(this,null,function*(){const{placement:r,platform:n,elements:i}=e,s=yield null==n.isRTL?void 0:n.isRTL(i.floating),o=IB(r),a=kB(r),l="y"===OB(r),c=JB.has(o)?-1:1,u=s&&l?-1:1,d=RB(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof f&&(h="end"===a?-1*f:f),l?{x:h*u,y:p*c}:{x:p*c,y:h*u}})}(t,e);return o===(null==(r=a.offset)?void 0:r.placement)&&null!=(n=a.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:ze(Le({},l),{placement:o})}})}}},WU=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn(t){return Ke(this,null,function*(){const{x:r,y:n,placement:i}=t,s=RB(e,t),{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}}}=s,c=Fe(s,["mainAxis","crossAxis","limiter"]),u={x:r,y:n},d=yield qB(t,c),p=OB(IB(i)),h=_B(p);let f=u[h],m=u[p];if(o){const e="y"===h?"bottom":"right";f=PB(f+d["y"===h?"top":"left"],f,f-d[e])}if(a){const e="y"===p?"bottom":"right";m=PB(m+d["y"===p?"top":"left"],m,m-d[e])}const v=l.fn(ze(Le({},t),{[h]:f,[p]:m}));return ze(Le({},v),{data:{x:v.x-r,y:v.y-n,enabled:{[h]:o,[p]:a}}})})}}},HU=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn(t){return Ke(this,null,function*(){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,u=RB(e,t),{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0}=u,g=Fe(u,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if(null!=(r=s.arrow)&&r.alignmentOffset)return{};const y=IB(i),b=OB(a),x=IB(a)===a,w=yield null==l.isRTL?void 0:l.isRTL(c.floating),S=h||(x||!v?[WB(a)]:function(e){const t=WB(e);return[MB(e),t,MB(t)]}(a)),C="none"!==m;!h&&C&&S.push(...UB(a,v,m,w));const E=[a,...S],T=yield qB(t,g),N=[];let P=(null==(n=s.flip)?void 0:n.overflows)||[];if(d&&N.push(T[y]),p){const e=function(e,t,r){void 0===r&&(r=!1);const n=kB(e),i=DB(e),s=AB(i);let o="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=WB(o)),[o,WB(o)]}(i,o,w);N.push(T[e[0]],T[e[1]])}if(P=[...P,{placement:i,overflows:N}],!N.every(e=>e<=0)){var R,I;const e=((null==(R=s.flip)?void 0:R.index)||0)+1,t=E[e];if(t){if(!("alignment"===p&&b!==OB(t))||P.every(e=>OB(e.placement)!==b||e.overflows[0]>0))return{data:{index:e,overflows:P},reset:{placement:t}}}let r=null==(I=P.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:I.placement;if(!r)switch(f){case"bestFit":{var k;const e=null==(k=P.filter(e=>{if(C){const t=OB(e.placement);return t===b||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:k[0];e&&(r=e);break}case"initialPlacement":r=a}if(i!==r)return{reset:{placement:r}}}return{}})}}},$U=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn(t){return Ke(this,null,function*(){var r,n;const{placement:i,rects:s,platform:o,elements:a}=t,l=RB(e,t),{apply:c=()=>{}}=l,u=Fe(l,["apply"]),d=yield qB(t,u),p=IB(i),h=kB(i),f="y"===OB(i),{width:m,height:v}=s.floating;let g,y;"top"===p||"bottom"===p?(g=p,y=h===((yield null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=p,g="end"===h?"top":"bottom");const b=v-d.top-d.bottom,x=m-d.left-d.right,w=xB(v-d[g],b),S=xB(m-d[y],x),C=!t.middlewareData.shift;let E=w,T=S;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(T=x),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(E=b),C&&!h){const e=wB(d.left,0),t=wB(d.right,0),r=wB(d.top,0),n=wB(d.bottom,0);f?T=m-2*(0!==e||0!==t?e+t:wB(d.left,d.right)):E=v-2*(0!==r||0!==n?r+n:wB(d.top,d.bottom))}yield c(ze(Le({},t),{availableWidth:T,availableHeight:E}));const N=yield o.getDimensions(a.floating);return m!==N.width||v!==N.height?{reset:{rects:!0}}:{}})}}},VU=function(e){return void 0===e&&(e={}),{name:"hide",options:e,fn(t){return Ke(this,null,function*(){const{rects:r}=t,n=RB(e,t),{strategy:i="referenceHidden"}=n,s=Fe(n,["strategy"]);switch(i){case"referenceHidden":{const e=GB(yield qB(t,ze(Le({},s),{elementContext:"reference"})),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:KB(e)}}}case"escaped":{const e=GB(yield qB(t,ze(Le({},s),{altBoundary:!0})),r.floating);return{data:{escapedOffsets:e,escaped:KB(e)}}}default:return{}}})}}},qU=e=>({name:"arrow",options:e,fn(t){return Ke(this,null,function*(){const{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=RB(e,t)||{};if(null==c)return{};const d=HB(u),p={x:r,y:n},h=DB(i),f=AB(h),m=yield o.getDimensions(c),v="y"===h,g=v?"top":"left",y=v?"bottom":"right",b=v?"clientHeight":"clientWidth",x=s.reference[f]+s.reference[h]-p[h]-s.floating[f],w=p[h]-s.reference[h],S=yield null==o.getOffsetParent?void 0:o.getOffsetParent(c);let C=S?S[b]:0;C&&(yield null==o.isElement?void 0:o.isElement(S))||(C=a.floating[b]||s.floating[f]);const E=x/2-w/2,T=C/2-m[f]/2-1,N=xB(d[g],T),P=xB(d[y],T),R=N,I=C-m[f]-P,k=C/2-m[f]/2+E,_=PB(R,k,I),A=!l.arrow&&null!=kB(i)&&k!==_&&s.reference[f]/2-(k<R?N:P)-m[f]/2<0,j=A?k<R?k-R:k-I:0;return{[h]:p[h]+j,data:Le({[h]:_,centerOffset:k-_-j},A&&{alignmentOffset:j}),reset:A}})}}),GU=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=RB(e,t),u={x:r,y:n},d=OB(i),p=_B(d);let h=u[p],f=u[d];const m=RB(a,t),v="number"==typeof m?{mainAxis:m,crossAxis:0}:Le({mainAxis:0,crossAxis:0},m);if(l){const e="y"===p?"height":"width",t=s.reference[p]-s.floating[e]+v.mainAxis,r=s.reference[p]+s.reference[e]-v.mainAxis;h<t?h=t:h>r&&(h=r)}if(c){var g,y;const e="y"===p?"width":"height",t=JB.has(IB(i)),r=s.reference[d]-s.floating[e]+(t&&(null==(g=o.offset)?void 0:g[d])||0)+(t?0:v.crossAxis),n=s.reference[d]+s.reference[e]+(t?0:(null==(y=o.offset)?void 0:y[d])||0)-(t?v.crossAxis:0);f<r?f=r:f>n&&(f=n)}return{[p]:h,[d]:f}}}},KU=(e,t,r)=>{const n=new Map,i=Le({platform:zU},r),s=ze(Le({},i.platform),{_c:n});return((e,t,r)=>Ke(void 0,null,function*(){const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=yield null==o.isRTL?void 0:o.isRTL(t);let c=yield o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=VB(c,n,l),p=n,h={},f=0;for(let r=0;r<a.length;r++){const{name:s,fn:m}=a[r],{x:v,y:g,data:y,reset:b}=yield m({x:u,y:d,initialPlacement:n,placement:p,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});u=null!=v?v:u,d=null!=g?g:d,h=ze(Le({},h),{[s]:Le(Le({},h[s]),y)}),b&&f<=50&&(f++,"object"==typeof b&&(b.placement&&(p=b.placement),b.rects&&(c=!0===b.rects?yield o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:d}=VB(c,p,l))),r=-1)}return{x:u,y:d,placement:p,strategy:i,middlewareData:h}}))(e,t,ze(Le({},i),{platform:s}))};var JU="undefined"!=typeof document?Lt.useLayoutEffect:function(){};function YU(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!==n--;)if(!YU(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!==n--;){const r=i[n];if(("_owner"!==r||!e.$$typeof)&&!YU(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function ZU(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function QU(e,t){const r=ZU(e);return Math.round(t*r)/r}function XU(e){const t=Lt.useRef(e);return JU(()=>{t.current=e}),t}const eW=(e,t)=>ze(Le({},UU(e)),{options:[e,t]}),tW=(e,t)=>ze(Le({},WU(e)),{options:[e,t]}),rW=(e,t)=>ze(Le({},GU(e)),{options:[e,t]}),nW=(e,t)=>ze(Le({},HU(e)),{options:[e,t]}),iW=(e,t)=>ze(Le({},$U(e)),{options:[e,t]}),sW=(e,t)=>ze(Le({},VU(e)),{options:[e,t]}),oW=(e,t)=>ze(Le({},(e=>({name:"arrow",options:e,fn(t){const{element:r,padding:n}="function"==typeof e?e(t):e;return r&&(i=r,{}.hasOwnProperty.call(i,"current"))?null!=r.current?qU({element:r.current,padding:n}).fn(t):{}:r?qU({element:r,padding:n}).fn(t):{};var i}}))(e)),{options:[e,t]});var aW=Lt.forwardRef((e,t)=>{const r=e,{children:n,width:i=10,height:s=5}=r,o=Fe(r,["children","width","height"]);return Gt.jsx(wb.svg,ze(Le({},o),{ref:t,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:Gt.jsx("polygon",{points:"0,0 30,0 15,10"})}))});aW.displayName="Arrow";var lW=aW,cW="Popper",[uW,dW]=cb(cW),[pW,hW]=uW(cW),fW=e=>{const{__scopePopper:t,children:r}=e,[n,i]=Lt.useState(null);return Gt.jsx(pW,{scope:t,anchor:n,onAnchorChange:i,children:r})};fW.displayName=cW;var mW="PopperAnchor",vW=Lt.forwardRef((e,t)=>{const r=e,{__scopePopper:n,virtualRef:i}=r,s=Fe(r,["__scopePopper","virtualRef"]),o=hW(mW,n),a=Lt.useRef(null),l=Pv(t,a),c=Lt.useRef(null);return Lt.useEffect(()=>{const e=c.current;c.current=(null==i?void 0:i.current)||a.current,e!==c.current&&o.onAnchorChange(c.current)}),i?null:Gt.jsx(wb.div,ze(Le({},s),{ref:l}))});vW.displayName=mW;var gW="PopperContent",[yW,bW]=uW(gW),xW=Lt.forwardRef((e,t)=>{var r,n,i,s,o,a,l,c;const u=e,{__scopePopper:d,side:p="bottom",sideOffset:h=0,align:f="center",alignOffset:m=0,arrowPadding:v=0,avoidCollisions:g=!0,collisionBoundary:y=[],collisionPadding:b=0,sticky:x="partial",hideWhenDetached:w=!1,updatePositionStrategy:S="optimized",onPlaced:C}=u,E=Fe(u,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),T=hW(gW,d),[N,P]=Lt.useState(null),R=Pv(t,e=>P(e)),[I,k]=Lt.useState(null),_=uF(I),A=null!=(r=null==_?void 0:_.width)?r:0,j=null!=(n=null==_?void 0:_.height)?n:0,O=p+("center"!==f?"-"+f:""),D="number"==typeof b?b:Le({top:0,right:0,bottom:0,left:0},b),M=Array.isArray(y)?y:[y],L=M.length>0,z={padding:D,boundary:M.filter(EW),altBoundary:L},{refs:F,floatingStyles:B,placement:U,isPositioned:W,middlewareData:H}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=Lt.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=Lt.useState(n);YU(p,n)||h(n);const[f,m]=Lt.useState(null),[v,g]=Lt.useState(null),y=Lt.useCallback(e=>{e!==S.current&&(S.current=e,m(e))},[]),b=Lt.useCallback(e=>{e!==C.current&&(C.current=e,g(e))},[]),x=s||f,w=o||v,S=Lt.useRef(null),C=Lt.useRef(null),E=Lt.useRef(u),T=null!=l,N=XU(l),P=XU(i),R=XU(c),I=Lt.useCallback(()=>{if(!S.current||!C.current)return;const e={placement:t,strategy:r,middleware:p};P.current&&(e.platform=P.current),KU(S.current,C.current,e).then(e=>{const t=ze(Le({},e),{isPositioned:!1!==R.current});k.current&&!YU(E.current,t)&&(E.current=t,eh.flushSync(()=>{d(t)}))})},[p,t,r,P,R]);JU(()=>{!1===c&&E.current.isPositioned&&(E.current.isPositioned=!1,d(e=>ze(Le({},e),{isPositioned:!1})))},[c]);const k=Lt.useRef(!1);JU(()=>(k.current=!0,()=>{k.current=!1}),[]),JU(()=>{if(x&&(S.current=x),w&&(C.current=w),x&&w){if(N.current)return N.current(x,w,I);I()}},[x,w,I,N,T]);const _=Lt.useMemo(()=>({reference:S,floating:C,setReference:y,setFloating:b}),[y,b]),A=Lt.useMemo(()=>({reference:x,floating:w}),[x,w]),j=Lt.useMemo(()=>{const e={position:r,left:0,top:0};if(!A.floating)return e;const t=QU(A.floating,u.x),n=QU(A.floating,u.y);return a?Le(ze(Le({},e),{transform:"translate("+t+"px, "+n+"px)"}),ZU(A.floating)>=1.5&&{willChange:"transform"}):{position:r,left:t,top:n}},[r,a,A.floating,u.x,u.y]);return Lt.useMemo(()=>ze(Le({},u),{update:I,refs:_,elements:A,floatingStyles:j}),[u,I,_,A,j])}({strategy:"fixed",placement:O,whileElementsMounted:(...e)=>BU(...e,{animationFrame:"always"===S}),elements:{reference:T.anchor},middleware:[eW({mainAxis:h+j,alignmentAxis:m}),g&&tW(Le({mainAxis:!0,crossAxis:!1,limiter:"partial"===x?rW():void 0},z)),g&&nW(Le({},z)),iW(ze(Le({},z),{apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{const{width:i,height:s}=t.reference,o=e.floating.style;o.setProperty("--radix-popper-available-width",`${r}px`),o.setProperty("--radix-popper-available-height",`${n}px`),o.setProperty("--radix-popper-anchor-width",`${i}px`),o.setProperty("--radix-popper-anchor-height",`${s}px`)}})),I&&oW({element:I,padding:v}),TW({arrowWidth:A,arrowHeight:j}),w&&sW(Le({strategy:"referenceHidden"},z))]}),[$,V]=NW(U),q=Cb(C);db(()=>{W&&(null==q||q())},[W,q]);const G=null==(i=H.arrow)?void 0:i.x,K=null==(s=H.arrow)?void 0:s.y,J=0!==(null==(o=H.arrow)?void 0:o.centerOffset),[Y,Z]=Lt.useState();return db(()=>{N&&Z(window.getComputedStyle(N).zIndex)},[N]),Gt.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:Le(ze(Le({},B),{transform:W?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[null==(a=H.transformOrigin)?void 0:a.x,null==(l=H.transformOrigin)?void 0:l.y].join(" ")}),(null==(c=H.hide)?void 0:c.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:e.dir,children:Gt.jsx(yW,{scope:d,placedSide:$,onArrowChange:k,arrowX:G,arrowY:K,shouldHideArrow:J,children:Gt.jsx(wb.div,ze(Le({"data-side":$,"data-align":V},E),{ref:R,style:ze(Le({},E.style),{animation:W?void 0:"none"})}))})})});xW.displayName=gW;var wW="PopperArrow",SW={top:"bottom",right:"left",bottom:"top",left:"right"},CW=Lt.forwardRef(function(e,t){const r=e,{__scopePopper:n}=r,i=Fe(r,["__scopePopper"]),s=bW(wW,n),o=SW[s.placedSide];return Gt.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:Gt.jsx(lW,ze(Le({},i),{ref:t,style:ze(Le({},i.style),{display:"block"})}))})});function EW(e){return null!==e}CW.displayName=wW;var TW=e=>({name:"transformOrigin",options:e,fn(t){var r,n,i,s,o;const{placement:a,rects:l,middlewareData:c}=t,u=0!==(null==(r=c.arrow)?void 0:r.centerOffset),d=u?0:e.arrowWidth,p=u?0:e.arrowHeight,[h,f]=NW(a),m={start:"0%",center:"50%",end:"100%"}[f],v=(null!=(i=null==(n=c.arrow)?void 0:n.x)?i:0)+d/2,g=(null!=(o=null==(s=c.arrow)?void 0:s.y)?o:0)+p/2;let y="",b="";return"bottom"===h?(y=u?m:`${v}px`,b=-p+"px"):"top"===h?(y=u?m:`${v}px`,b=`${l.floating.height+p}px`):"right"===h?(y=-p+"px",b=u?m:`${g}px`):"left"===h&&(y=`${l.floating.width+p}px`,b=u?m:`${g}px`),{data:{x:y,y:b}}}});function NW(e){const[t,r="center"]=e.split("-");return[t,r]}var PW=fW,RW=vW,IW=xW,kW=CW,_W=Symbol("radix.slottable");function AW(e){const t=({children:e})=>Gt.jsx(Gt.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=_W,t}var[jW]=cb("Tooltip",[dW]),OW=dW(),DW="TooltipProvider",MW=700,LW="tooltip.open",[zW,FW]=jW(DW),BW=e=>{const{__scopeTooltip:t,delayDuration:r=MW,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=e,o=Lt.useRef(!0),a=Lt.useRef(!1),l=Lt.useRef(0);return Lt.useEffect(()=>{const e=l.current;return()=>window.clearTimeout(e)},[]),Gt.jsx(zW,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:Lt.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:Lt.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:Lt.useCallback(e=>{a.current=e},[]),disableHoverableContent:i,children:s})};BW.displayName=DW;var UW="Tooltip",[WW,HW]=jW(UW),$W=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=e,l=FW(UW,e.__scopeTooltip),c=OW(t),[u,d]=Lt.useState(null),p=fb(),h=Lt.useRef(0),f=null!=o?o:l.disableHoverableContent,m=null!=a?a:l.delayDuration,v=Lt.useRef(!1),[g,y]=vb({prop:n,defaultProp:null!=i&&i,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(LW))):l.onClose(),null==s||s(e)},caller:UW}),b=Lt.useMemo(()=>g?v.current?"delayed-open":"instant-open":"closed",[g]),x=Lt.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v.current=!1,y(!0)},[y]),w=Lt.useCallback(()=>{window.clearTimeout(h.current),h.current=0,y(!1)},[y]),S=Lt.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,y(!0),h.current=0},m)},[m,y]);return Lt.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),Gt.jsx(PW,ze(Le({},c),{children:Gt.jsx(WW,{scope:t,contentId:p,open:g,stateAttribute:b,trigger:u,onTriggerChange:d,onTriggerEnter:Lt.useCallback(()=>{l.isOpenDelayedRef.current?S():x()},[l.isOpenDelayedRef,S,x]),onTriggerLeave:Lt.useCallback(()=>{f?w():(window.clearTimeout(h.current),h.current=0)},[w,f]),onOpen:x,onClose:w,disableHoverableContent:f,children:r})}))};$W.displayName=UW;var VW="TooltipTrigger",qW=Lt.forwardRef((e,t)=>{const r=e,{__scopeTooltip:n}=r,i=Fe(r,["__scopeTooltip"]),s=HW(VW,n),o=FW(VW,n),a=OW(n),l=Pv(t,Lt.useRef(null),s.onTriggerChange),c=Lt.useRef(!1),u=Lt.useRef(!1),d=Lt.useCallback(()=>c.current=!1,[]);return Lt.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),Gt.jsx(RW,ze(Le({asChild:!0},a),{children:Gt.jsx(wb.button,ze(Le({"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute},i),{ref:l,onPointerMove:lb(e.onPointerMove,e=>{"touch"!==e.pointerType&&(u.current||o.isPointerInTransitRef.current||(s.onTriggerEnter(),u.current=!0))}),onPointerLeave:lb(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:lb(e.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:lb(e.onFocus,()=>{c.current||s.onOpen()}),onBlur:lb(e.onBlur,s.onClose),onClick:lb(e.onClick,s.onClose)}))}))});qW.displayName=VW;var[GW,KW]=jW("TooltipPortal",{forceMount:void 0}),JW="TooltipContent",YW=Lt.forwardRef((e,t)=>{const r=KW(JW,e.__scopeTooltip),n=e,{forceMount:i=r.forceMount,side:s="top"}=n,o=Fe(n,["forceMount","side"]),a=HW(JW,e.__scopeTooltip);return Gt.jsx(qb,{present:i||a.open,children:a.disableHoverableContent?Gt.jsx(tH,ze(Le({side:s},o),{ref:t})):Gt.jsx(ZW,ze(Le({side:s},o),{ref:t}))})}),ZW=Lt.forwardRef((e,t)=>{const r=HW(JW,e.__scopeTooltip),n=FW(JW,e.__scopeTooltip),i=Lt.useRef(null),s=Pv(t,i),[o,a]=Lt.useState(null),{trigger:l,onClose:c}=r,u=i.current,{onPointerInTransitChange:d}=n,p=Lt.useCallback(()=>{a(null),d(!1)},[d]),h=Lt.useCallback((e,t)=>{const r=e.currentTarget,n={x:e.clientX,y:e.clientY},i=function(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,function(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,r.getBoundingClientRect())),s=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const r=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x)))break;t.pop()}t.push(r)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;r.length>=2;){const e=r[r.length-1],n=r[r.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;r.pop()}r.push(t)}return r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}(t)}([...i,...function(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}(t.getBoundingClientRect())]);a(s),d(!0)},[d]);return Lt.useEffect(()=>()=>p(),[p]),Lt.useEffect(()=>{if(l&&u){const e=e=>h(e,u),t=e=>h(e,l);return l.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[l,u,h,p]),Lt.useEffect(()=>{if(o){const e=e=>{const t=e.target,r={x:e.clientX,y:e.clientY},n=(null==l?void 0:l.contains(t))||(null==u?void 0:u.contains(t)),i=!function(e,t){const{x:r,y:n}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const e=t[s],a=t[o],l=e.x,c=e.y,u=a.x,d=a.y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(i=!i)}return i}(r,o);n?p():i&&(p(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,u,o,c,p]),Gt.jsx(tH,ze(Le({},e),{ref:s}))}),[QW,XW]=jW(UW,{isInside:!1}),eH=AW("TooltipContent"),tH=Lt.forwardRef((e,t)=>{const r=e,{__scopeTooltip:n,children:i,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a}=r,l=Fe(r,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),c=HW(JW,n),u=OW(n),{onClose:d}=c;return Lt.useEffect(()=>(document.addEventListener(LW,d),()=>document.removeEventListener(LW,d)),[d]),Lt.useEffect(()=>{if(c.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(c.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,d]),Gt.jsx(Ib,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:Gt.jsxs(IW,ze(Le(Le({"data-state":c.stateAttribute},u),l),{ref:t,style:Le(Le({},l.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}),children:[Gt.jsx(eH,{children:i}),Gt.jsx(QW,{scope:n,isInside:!0,children:Gt.jsx(Qw,{id:c.contentId,role:"tooltip",children:s||i})})]}))})});YW.displayName=JW;var rH="TooltipArrow";Lt.forwardRef((e,t)=>{const r=e,{__scopeTooltip:n}=r,i=Fe(r,["__scopeTooltip"]),s=OW(n);return XW(rH,n).isInside?null:Gt.jsx(kW,ze(Le(Le({},s),i),{ref:t}))}).displayName=rH;var nH=YW;const iH=BW,sH=$W,oH=qW,aH=Lt.forwardRef((e,t)=>{var r=e,{className:n,sideOffset:i=4}=r,s=Fe(r,["className","sideOffset"]);return Gt.jsx(nH,Le({ref:t,sideOffset:i,className:zg("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n)},s))});function lH(){const[e,t]=Lt.useState([]),[r,n]=Lt.useState(""),[i,s]=Lt.useState(!1),[o,a]=Lt.useState(null),[l,c]=Lt.useState(null),[u,d]=Lt.useState(null),p=Lt.useRef(null),h=Lt.useRef(!1);Lt.useEffect(()=>{var e;null==(e=p.current)||e.scrollIntoView({behavior:"smooth"})},[e]);const f=()=>Ke(this,null,function*(){s(!0);try{const e=yield fetch("/api/interactive-diagnosis/start",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("");const r=yield e.json();a(r.diagnosisState),c(r.interactiveResponse),d(r.sessionId),r.interactiveResponse.nextQuestion?t([{id:Date.now(),content:r.interactiveResponse.nextQuestion,isAiResponse:!0,timestamp:new Date,type:"question"}]):t([{id:Date.now(),content:r.interactiveResponse.message,isAiResponse:!0,timestamp:new Date,type:"message"}])}catch(e){console.error(":",e)}finally{s(!1)}});Lt.useEffect(()=>{h.current||(h.current=!0,f())},[]);const m=e=>Ke(this,null,function*(){if(!e.trim()||!o)return;s(!0);const r={id:Date.now(),content:e,isAiResponse:!1,timestamp:new Date,type:"message"};t(e=>[...e,r]),n("");try{const r=yield fetch("/api/interactive-diagnosis",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userResponse:e,currentState:o})});if(!r.ok)throw new Error("");const n=yield r.json();a(n.updatedState),c(n.interactiveResponse),n.interactiveResponse.nextQuestion?t(e=>[...e,{id:Date.now()+1,content:n.interactiveResponse.nextQuestion,isAiResponse:!0,timestamp:new Date,type:"question"}]):t(e=>[...e,{id:Date.now()+1,content:n.interactiveResponse.message,isAiResponse:!0,timestamp:new Date,type:g(n.interactiveResponse.priority)}])}catch(i){console.error(":",i);const e={id:Date.now()+1,content:"",isAiResponse:!0,timestamp:new Date,type:"message"};t(t=>[...t,e])}finally{s(!1)}}),v=e=>{m(e)},g=e=>{switch(e){case"safety":return"safety";case"action":return"action";case"diagnosis":return"question";default:return"message"}},y=e=>{switch(e){case"safety":return Gt.jsx(Yy,{className:"w-4 h-4 text-red-500"});case"action":return Gt.jsx(sb,{className:"w-4 h-4 text-blue-500"});case"question":return Gt.jsx(Iy,{className:"w-4 h-4 text-purple-500"});default:return null}};return Gt.jsx("div",{className:"max-w-4xl mx-auto p-4",children:Gt.jsxs(IL,{className:"h-[700px] flex flex-col",children:[Gt.jsx(kL,{className:"py-2 border-b",children:Gt.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Gt.jsxs(_L,{className:"flex items-center gap-2 text-base font-semibold",children:[Gt.jsx(sb,{className:"w-4 h-4"})," AI"]}),o&&Gt.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Gt.jsx(vB,{variant:"outline",className:(e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}})(o.collectedInfo.urgency),children:o.collectedInfo.urgency}),Gt.jsxs(vB,{variant:"outline",children:[Gt.jsx(ly,{className:"w-3 h-3 mr-1"})," ",Math.round(100*o.confidence),"%"]}),Gt.jsx(vB,{variant:"outline",children:o.phase})]})]})}),Gt.jsx(jL,{className:"flex-1 flex flex-col",children:Gt.jsxs(Gt.Fragment,{children:[Gt.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[!o&&Gt.jsx("div",{className:"flex justify-center py-8",children:Gt.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[Gt.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}),"..."]})}),e.map(e=>Gt.jsx("div",{className:"flex "+(e.isAiResponse?"justify-end":"justify-start"),children:Gt.jsxs("div",{className:"max-w-[80%] p-3 rounded-lg shadow-sm "+(e.isAiResponse?"bg-white border border-gray-200 text-gray-800 rounded-[18px_18px_4px_18px]":"bg-blue-600 text-white rounded-[18px_18px_18px_4px]"),children:[e.isAiResponse&&Gt.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y(e.type),Gt.jsx("span",{className:"text-[11px] font-medium text-gray-500 tracking-wide",children:"GPT"})]}),Gt.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:e.content}),Gt.jsx("div",{className:"text-[10px] opacity-60 mt-1 text-right",children:e.timestamp.toLocaleTimeString()})]})},e.id)),i&&Gt.jsx("div",{className:"flex justify-start",children:Gt.jsx("div",{className:"bg-white border border-gray-200 p-3 rounded-lg",children:Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}),Gt.jsx("span",{className:"text-sm text-gray-600",children:"..."})]})})}),Gt.jsx("div",{ref:p})]}),o&&(null==l?void 0:l.options)&&l.options.length>0&&Gt.jsxs("div",{className:"mb-4",children:[Gt.jsx("p",{className:"text-sm text-gray-600 mb-2",children:":"}),Gt.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.options.map((e,t)=>Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>v(e),disabled:i,className:"text-sm",children:e},t)),l.details&&!e.some(e=>e.content.includes(l.details))&&Gt.jsx(Bg,{variant:"secondary",size:"sm",onClick:()=>v(""),disabled:i,className:"text-sm",children:""})]})]}),o&&(null==l?void 0:l.requiresInput)&&"completed"!==o.phase&&Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsx(KL,{value:r,onChange:e=>n(e.target.value),placeholder:"...",onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m(r))},disabled:i,className:"flex-1"}),Gt.jsx(Bg,{onClick:()=>m(r),disabled:i||!r.trim(),className:"bg-blue-600 hover:bg-blue-700",children:""})]}),"completed"===(null==o?void 0:o.phase)&&Gt.jsxs("div",{className:"text-center p-4 bg-green-50 border border-green-200 rounded-lg",children:[Gt.jsx(iy,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),Gt.jsx("p",{className:"text-green-800 font-medium",children:""}),Gt.jsx(Bg,{onClick:()=>window.location.reload(),className:"mt-2",variant:"outline",children:""})]})]})})]})})}aH.displayName=nH.displayName;const cH=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e}=sv(),{messages:t,setMessages:r,sendMessage:n,isLoading:i,clearChatHistory:s,isClearing:o,chatId:a,initializeChat:l,exportChatHistory:c}=wv();null==e||e.role;const{toast:u}=fv();im();const d=Lt.useRef(null);Lt.useRef(null);const[p,h]=Lt.useState(!1),[f,m]=Lt.useState([]),[v,g]=Lt.useState([]),[y,b]=Lt.useState(null),[x,w]=Lt.useState(""),[S,C]=Lt.useState(!1),[E,T]=Lt.useState(!1),[N,P]=Lt.useState(!1),[R,I]=Lt.useState(null),[k,_]=Lt.useState(0),[A,j]=Lt.useState(0),[O,D]=Lt.useState(""),[M,L]=Lt.useState([]),[z,F]=Lt.useState([]),[B,U]=Lt.useState(""),[W,H]=Lt.useState(""),[$,V]=Lt.useState(!1),[q,G]=Lt.useState(!1),[K,J]=Lt.useState(""),[Y,Z]=Lt.useState(""),[Q,X]=Lt.useState(!1),[ee,te]=Lt.useState(!1),[re,ne]=Lt.useState([]),[ie,se]=Lt.useState([]),[oe,ae]=Lt.useState(!1),[le,ce]=Lt.useState(null),[ue,de]=Lt.useState([]),[pe,he]=Lt.useState(!1);Lt.useEffect(()=>{xe(),fe(),be().catch(e=>{console.error("AI:",e)})},[]),Lt.useEffect(()=>{console.log(" :",{machineTypesCount:M.length,machineTypes:M,filteredMachineTypesCount:re.length}),ne(M)},[M]),Lt.useEffect(()=>{console.log(" :",{machinesCount:z.length,machines:z,filteredMachinesCount:ie.length}),se(z)},[z]);const fe=()=>Ke(this,null,function*(){try{he(!0);const{buildApiUrl:e}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),t=e("/knowledge-base"),r=yield fetch(t);if(!r.ok)throw new Error(`Failed to fetch knowledge data: ${r.statusText}`);{const e=yield r.json();e.success?(de(e.data),console.log(" ",e.data.length+"")):(console.error(" ",e.message),de([]))}}catch(e){console.error(" :",e),u({title:"",description:e instanceof Error?e.message:"",variant:"destructive"}),de([])}finally{he(!1)}});Lt.useEffect(()=>{const e=e=>{const t=e.target;t.closest("#machine-type")||t.closest("#machine-number")||t.closest("#machine-type-menu")||t.closest("#machine-number-menu")||(X(!1),te(!1))};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]);const[me,ve]=Lt.useState(null),[ge,ye]=Lt.useState({initialPrompt:"",conversationStyle:"frank",questionFlow:{step1:"",step2:"",step3:"",step4:"",step5:""},branchingConditions:{timeCheck:!0,detailsCheck:!0,toolsCheck:!0,safetyCheck:!0},responsePattern:"step_by_step",escalationTime:20,customInstructions:"",enableEmergencyContact:!0}),be=()=>Ke(this,null,function*(){try{const e=yield fetch("/api/ai-assist/settings",{credentials:"include"});if(e.ok){const t=yield e.json(),r=t.success?t.data:t;if(r)return ye(e=>ze(Le(Le({},e),r),{questionFlow:Le(Le({},e.questionFlow),r.questionFlow),branchingConditions:Le(Le({},e.branchingConditions),r.branchingConditions)})),localStorage.setItem("aiAssistSettings",JSON.stringify(r)),console.log(" AI:",r),r}else{const e=localStorage.getItem("aiAssistSettings");if(e){const t=JSON.parse(e);return ye(t),console.log("EAI:",t),t}}}catch(e){console.warn("AI",e);try{const e=localStorage.getItem("aiAssistSettings");if(e){const t=JSON.parse(e);return ye(t),console.log(" AI",t),t}}catch(t){console.error(" AI:",t)}}return null});Lt.useEffect(()=>{const e=e=>{if("aiAssistSettings"===e.key&&e.newValue)try{const t=JSON.parse(e.newValue);ye(t),console.log("ElocalStorageAI:",t)}catch(t){console.error(" AI:",t)}},t=()=>Ke(this,null,function*(){const e=yield be();e&&(console.log("EAI:",e),N&&Ne.current&&e.initialPrompt&&r(t=>{const r=t.findIndex(e=>"ai_support"===e.type);if(-1!==r){const n=[...t];return n[r]=ze(Le({},n[r]),{content:e.initialPrompt}),n}return t}))});return window.addEventListener("storage",e),window.addEventListener("aiAssistSettingsChanged",t),()=>{window.removeEventListener("storage",e),window.removeEventListener("aiAssistSettingsChanged",t)}},[]);const xe=Lt.useCallback(()=>Ke(this,null,function*(){try{V(!0),console.log(" ");const{buildApiUrl:e}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),t=e("/machines/machine-types");console.log(" URL:",t),console.log(" URL:",window.location.href),console.log(" :",{VITE_API_BASE_URL:"",NODE_ENV:void 0,MODE:"production"});const r=yield fetch(t,{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},credentials:"include"});if(console.log(" :",r.status),console.log(" :",Object.fromEntries(r.headers.entries())),r.ok){const e=yield r.json();if(console.log("E:",e),e.success){const t=e.machineTypes||e.data||[];console.log("EE",t.length,""),console.log(" :",t);const r=t.map(e=>({id:e.id,machine_type_name:e.name||e.machine_type_name||e.category}));L(r),ne(r),0===r.length&&console.log(" 0")}else console.error("EE:",e),L([]),ne([])}else{const e=yield r.text();console.error("E:",r.status,e),401===r.status&&console.log(" "),L([]),ne([])}}catch(e){console.error("E:",e),L([]),ne([])}finally{V(!1),console.log("  - ",{machineTypesCount:M.length,filteredMachineTypesCount:re.length})}}),[]),we=e=>{if(console.log(" E",e,":",M.length),!e.trim())return console.log("E:",M.length,""),void ne(M);const t=M.filter(t=>t.machine_type_name.toLowerCase().includes(e.toLowerCase()));console.log("E:",t.length,""),ne(t)},Se=e=>{if(console.log(" E",e,":",z.length),!e.trim())return console.log("E:",z.length,""),void se(z);const t=z.filter(t=>t.machine_number.toLowerCase().includes(e.toLowerCase()));console.log("E:",t.length,""),se(t)},Ce=Lt.useCallback(e=>Ke(this,null,function*(){try{G(!0),console.log(" E ID:",e);const{buildApiUrl:t}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),r=t(`/machines?type_id=${e}`);console.log(" URL:",r);const n=yield fetch(r,{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},credentials:"include"});if(console.log(" EE:",n.status),n.ok){const e=yield n.json();if(console.log("E:",e),e.success){const t=e.machines||e.data||[];console.log("EE",t.length,""),console.log("EEE:",t);const r=t.map(e=>({id:e.id,machine_number:e.machine_number}));F(r),se(r),console.log(" ",{machinesCount:r.length,machines:r,machineNumberInput:Y,selectedMachineNumber:W,showMachineNumberSuggestions:ee})}else console.error("EEsuccess=false:",e),F([]),se([])}else{const e=yield n.text();console.error("E:",n.status,e),F([]),se([])}}catch(t){console.error("E:",t),F([]),se([])}finally{G(!1),console.log("  - ",{machinesCount:z.length,filteredMachinesCount:ie.length})}}),[z.length,ie.length,Y,W,ee]);Lt.useEffect(()=>{var e;null==(e=d.current)||e.scrollIntoView({behavior:"smooth"})},[t]);const Ee=Lt.useRef(!1),Te=Lt.useRef(!1),Ne=Lt.useRef(!1),Pe=Lt.useRef(null),Re=Lt.useRef(""),Ie=Lt.useRef("");Lt.useEffect(()=>{Re.current=B,B&&W&&(Pe.current=null)},[B]),Lt.useEffect(()=>{Ie.current=W,B&&W&&(Pe.current=null)},[W]),Lt.useEffect(()=>{if(console.log("  - "),!a){console.log(" ID");try{l()}catch(e){console.error("EEID:",e)}}xe().catch(e=>{console.error("EEEEE",e)})},[a,l,xe]),Lt.useEffect(()=>{N||Ee.current||(console.log(" AI"),Ee.current=!0,(()=>{Ke(this,null,function*(){try{const e=yield be();if(P(!0),I(new Date),_(0),!Ne.current){Ne.current=!0;const t=(null==e?void 0:e.initialPrompt)||ge.initialPrompt,n={id:Date.now().toString(),content:t,isAiResponse:!0,timestamp:new Date,type:"ai_support"};r(e=>[...e,n]),console.log("EE:",t)}}catch(e){console.error("EAIE:",e)}})})())},[N,be,ge,r]),Lt.useEffect(()=>{N&&B&&W&&Te.current&&console.log("EE")},[N,B,W]),Lt.useEffect(()=>{console.log(" EE:",{machineTypesCount:M.length,selectedMachineType:B,machineTypeInput:K,isLoadingMachineTypes:$}),M.length>0&&we(K)},[M,K]),Lt.useEffect(()=>{console.log(" :",{machineTypeInput:K,selectedMachineType:B})},[K,B]),Lt.useEffect(()=>{console.log(" machineTypeInputE:",{currentValue:K,length:K.length,timestamp:(new Date).toISOString()})},[K]),Lt.useEffect(()=>{console.log(" EE:",{machinesCount:z.length,selectedMachineNumber:W,machineNumberInput:Y,isLoadingMachines:q}),z.length>0&&Se(Y)},[z,Y]),Lt.useEffect(()=>{console.log(" :",{machineNumberInput:Y,selectedMachineNumber:W})},[Y,W]),Lt.useEffect(()=>{let e;return N&&R&&(e=setInterval(()=>{const e=new Date,t=Math.floor((e.getTime()-R.getTime())/1e3);_(t);const n=Math.floor(t/60);if(ge.enableEmergencyContact&&n>=ge.escalationTime&&n%5==0){const e={id:Date.now().toString(),content:" **EE*\n\nAIE{elapsedMinutes}EEn\n**:**\n 0123-456-789\n\n**E**\nEn\nE",isAiResponse:!0,timestamp:new Date,type:"escalation_notice"};r(t=>[...t,e])}},1e3)),()=>{e&&clearInterval(e)}},[N,R,ge]);const ke=()=>Ke(this,null,function*(){try{console.log(" EE",{chatId:a,messagesLength:t.length,hasChatId:!!a,hasMessages:t.length>0,messagesWithContent:t.filter(e=>e.content&&e.content.trim()).length,machineInfo:{selectedMachineType:B,selectedMachineNumber:W,machineTypeInput:K,machineNumberInput:Y}});const n=!!a,i=t.length>0,o=t.some(e=>e.content&&e.content.trim());if(console.log(" E:",{hasValidChatId:n,hasMessages:i,hasValidMessages:o,messagesCount:t.length,messagesWithContent:t.filter(e=>e.content&&e.content.trim()).length}),!n){console.log(" : ID - ");try{return yield l(),console.log(" ID"),void setTimeout(()=>{ke()},100)}catch(e){return console.error(" ID:",e),void u({title:"",description:"ID",variant:"destructive"})}}if(!o)return console.log(" : "),void u({title:"",description:"",variant:"destructive"});const c={chatId:a,timestamp:(new Date).toISOString(),machineInfo:{selectedMachineType:B,selectedMachineNumber:W,machineTypeName:K,machineNumber:Y},messages:t.map(e=>{var t;return{id:e.id,content:e.content,isAiResponse:e.isAiResponse,timestamp:e.timestamp,media:(null==(t=e.media)?void 0:t.map(e=>({id:e.id,type:e.type,url:e.url,title:e.title,fileName:e.fileName||""})))||[]}})};console.log(" EE:",{chatId:c.chatId,messageCount:c.messages.length,machineInfo:c.machineInfo,totalDataSize:JSON.stringify(c).length});const{buildApiUrl:d}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),p="localhost"===window.location.hostname,h=d(p?`/chats/${a}/send-test`:`/chats/${a}/send`);console.log(" URL:",h),console.log("EEE",p),console.log(" :",window.location.hostname),console.log(" E:",{NODE_ENV:"production",DEV:!1,PROD:!0,VITE_API_BASE_URL:""});const f=yield fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({chatData:c,exportType:"manual_send"})});if(console.log(" :",{status:f.status,statusText:f.statusText,ok:f.ok,headers:Object.fromEntries(f.headers.entries())}),!f.ok){let e=`E ${f.status} ${f.statusText}`,t="";try{const r=yield f.json();e=r.error||r.message||e,t=r.details||r.error||"",console.error("EE:",r)}catch(r){console.warn("EEE",r)}const n=t?`${e}\n: ${t}`:e;throw new Error(n)}{const e=yield f.json(),r=B&&W?` (: ${K}, : ${Y})`:"";console.log(" :",e);const n=e.knowledgeUpdateScheduled?" ":"";u({title:"",description:` (${t.filter(e=>e.content&&e.content.trim()).length})${r}${n}`}),e.knowledgeUpdateScheduled&&setTimeout(()=>{u({title:" AI",description:"AI",duration:6e3})},2e3),yield s(),U(""),Re.current="",H(""),Ie.current="",J(""),Z(""),F([]),se([]),Pe.current=null,u({title:"",description:""}),console.log(" EE")}}catch(n){console.error(" :",n),u({title:"",description:n instanceof Error?n.message:"",variant:"destructive"})}}),_e=()=>Ke(this,null,function*(){try{C(!0),console.log(" ");const e=Date.now(),t=`?ts=${e}&r=${Math.random().toString(36).substring(2)}`,{buildApiUrl:r}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),n=r(`/emergency-flow/list${t}`);console.log(" API URL:",n);const i=yield fetch(n,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate, max-age=0",Pragma:"no-cache",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","X-Requested-With":"XMLHttpRequest"}});if(console.log(" ",i.status,i.statusText),!i.ok){const e=yield i.text();throw console.error("EAPI :",e),new Error(`Failed to fetch emergency guides: ${i.status} - ${e}`)}{const e=yield i.json();if(console.log(" :",e),e.success){const t=e.data||[];m(t),g(t),console.log("EEE",t.length+""),t.forEach((e,t)=>{var r;console.log(` E${t+1}:`,{id:e.id,title:e.title,fileName:e.fileName,description:(null==(r=e.description)?void 0:r.substring(0,50))+"..."})})}else console.error("EE",e.message),m([]),g([])}}catch(e){console.error("E",e),u({title:"",description:"EE",variant:"destructive"}),m([]),g([])}finally{C(!1)}}),Ae=e=>Ke(this,null,function*(){if(w(e),e.trim())try{const t=f.filter(t=>`${t.title} ${t.description} ${t.keyword||""}`.toLowerCase().includes(e.toLowerCase()));g(t),console.log(` : "${e}" -> ${t.length}`)}catch(t){console.error("E:",t),g(f)}else g(f)}),je=e=>Ke(this,null,function*(){if(le)try{const t=ze(Le({},le),{answers:[...le.answers,{stepId:`step_${Date.now()}`,answer:e,timestamp:new Date}]});ce(t),n(e,[],!1);const{buildApiUrl:r}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),i=r("/troubleshooting-qa/answer"),s=yield fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({problemDescription:le.problemDescription,previousAnswers:t.answers.slice(0,-1),currentAnswer:e})});if(!s.ok)throw new Error("EE");{const e=(yield s.json()).data;"complete"===e.status?(ce(e=>ze(Le({},e),{currentQuestion:void 0,currentOptions:void 0})),n(e.solution,[],!0),ae(!1)):"emergency"===e.status?(ce(e=>ze(Le({},e),{currentQuestion:void 0,currentOptions:void 0})),n(e.emergencyAction,[],!0),ae(!1)):(ce(t=>ze(Le({},t),{currentQuestion:e.question,currentOptions:e.options||[],reasoning:e.reasoning})),n(e.question,[],!0))}}catch(t){console.error("EEQAEE:",t),u({title:"",description:"EE",variant:"destructive"})}}),Oe=(e,...t)=>Ke(this,[e,...t],function*(e,t=[]){try{const n=Re.current,i=Ie.current,s=B,o=W,a=n&&""!==n.trim()&&"null"!==n&&"undefined"!==n?n:s&&""!==s.trim()&&"null"!==s&&"undefined"!==s?s:K&&""!==K.trim()?K.trim():"",l=i&&""!==i.trim()&&"null"!==i&&"undefined"!==i?i:o&&""!==o.trim()&&"null"!==o&&"undefined"!==o?o:Y&&""!==Y.trim()?Y.trim():"",c=""!==a,u=""!==l;console.log(" E:",{refMachineType:n,refMachineNumber:i,stateMachineType:s,stateMachineNumber:o,machineTypeInput:K,machineNumberInput:Y,currentMachineType:a,currentMachineNumber:l,hasMachineType:c,hasMachineNumber:u});const d={id:Date.now().toString(),content:e,isAiResponse:!1,timestamp:new Date,type:"user_message",media:t};let p=[];if(r(e=>(p=[...e,d],p)),!c||!u){const e="",t=Date.now(),n=t-(Pe.current?parseInt(Pe.current):0);if(n>5e3){Pe.current=t.toString();const n={id:(Date.now()+1).toString(),content:e,isAiResponse:!0,timestamp:new Date,type:"ai_support"};r(e=>[...e,n]),console.log("EEE:",e)}else console.log("EEEEEEEEE",n);return}Pe.current=null,console.log(" GPT");const h=p.filter(e=>"ai_support"===e.type||"ai_support_response"===e.type||"user_message"===e.type).map(e=>({content:e.content,isAiResponse:e.isAiResponse,timestamp:e.timestamp,type:e.type})),f=yield De(e,h),m={id:(Date.now()+1).toString(),content:f,isAiResponse:!0,timestamp:new Date,type:"ai_support_response"};r(e=>[...e,m])}catch(n){console.error("AIEE:",n);const e={id:(Date.now()+1).toString(),content:"AI",isAiResponse:!0,timestamp:new Date,type:"ai_support_response"};r(t=>[...t,e]),u({title:"",description:"AI",variant:"destructive"})}}),De=(e,...t)=>Ke(this,[e,...t],function*(e,t=[]){var r;try{const{buildApiUrl:n}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),i=n("/chatgpt"),s=null==(r=t.find(e=>"ai_support"===e.type))?void 0:r.timestamp,o=s?Math.floor((Date.now()-new Date(s).getTime())/6e4):0;if(o>=20)return" E0EEEn\n\n : 0123-456-789\n\nEEE";const a=t.slice(-6).map(e=>`${e.isAiResponse?"AI":""}: ${e.content}`).join("\n"),l=a?`\n${a}\n\n\n${e}`:e,c=yield fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({text:l,useOnlyKnowledgeBase:!0,conversationHistory:t.slice(-4),elapsedMinutes:o,aiSupportMode:!0,aiAssistSettings:{responsePattern:ge.responsePattern,customInstructions:ge.customInstructions,conversationStyle:ge.conversationStyle,questionFlow:ge.questionFlow,branchingConditions:ge.branchingConditions}})});if(!c.ok)throw new Error("AIE");let u=(yield c.json()).response||"AI";if(u=(e=>{switch(ge.conversationStyle){case"frank":return e.replace(//g,"").replace(//g,"");case"business":return`${e}`;case"technical":return`${e}`;default:return e}})(u),"minimal"===ge.responsePattern){const e=u.split(/[\n]/).filter(e=>e.trim());u=e.slice(0,2).join("")+(e.length>2?"...":"")}else ge.responsePattern;return ge.customInstructions,u=Me(u),o>=15&&o<20&&(u+="\n\n E{elapsedMinutes}EE5E"),u}catch(n){return console.error("AI:",n),"AI"}}),Me=e=>{let t=e.trim();const r=t.split("");r.length>1&&(t=r[0]+"");const n=t.split("\n");for(const s of n){const e=s.trim();if(e&&(e.includes("")||e.includes("")||e.includes("")||e.includes("")||e.includes(""))){t=e;break}}t.length>100&&(t=t.substring(0,100));let i=t;return[{from://g,to:""},{from://g,to:""},{from://g,to:""},{from://g,to:""},{from://g,to:""},{from://g,to:""},{from://g,to:""},{from://g,to:""}].forEach(({from:e,to:t})=>{i=i.replace(e,t)}),i},Fe=e=>{const t=Math.floor(e/60);return t>=20?"critical":t>=15?"warning":"normal"},[Be,Ue]=Lt.useState(!1),[We,He]=Lt.useState(null),[$e,Ve]=Lt.useState(!1);return Gt.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[Gt.jsxs("div",{className:"sticky top-0 z-50 bg-white border-b px-4 py-3 flex items-center justify-between shadow-sm",children:[Gt.jsxs("div",{className:"flex items-center gap-4",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(FL,{htmlFor:"machine-type",className:"text-sm font-medium text-gray-700",children:":"}),Gt.jsxs("div",{className:"relative",children:[Gt.jsx(iH,{children:Gt.jsxs(sH,{open:N&&!Re.current&&!B&&!K.trim(),children:[Gt.jsx(oH,{asChild:!0,children:Gt.jsx("div",{className:"w-48",children:Gt.jsx(KL,{id:"machine-type",type:"text",placeholder:$?"...":"...",value:K,onChange:e=>{const t=e.target.value;console.log(" :",t),J(t),we(t),X(!0)},onFocus:()=>{console.log(" :",{machineTypesCount:M.length,machineTypes:M,filteredMachineTypesCount:re.length,showMachineTypeSuggestions:Q}),X(!0),M.length>0&&ne(M)},onBlur:e=>{const t=e.relatedTarget;t&&t.closest(".machine-type-dropdown")||setTimeout(()=>{X(!1)},150)},disabled:$,className:"w-48"})})}),Gt.jsx(aH,{side:"bottom",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:Gt.jsx("p",{children:""})})]})}),(console.log(" :",{showMachineTypeSuggestions:Q,filteredMachineTypesCount:re.length,filteredMachineTypes:re,machineTypesCount:M.length,machineTypes:M,isLoadingMachineTypes:$}),null),Q&&Gt.jsx("div",{id:"machine-type-menu",className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto machine-type-dropdown",children:$?Gt.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"..."}):re.length>0?re.map(e=>Gt.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{console.log("  ==========================="),console.log(" :",e);try{J(e.machine_type_name),U(e.id),Re.current=e.id,X(!1),H(""),Ie.current="",Z(""),F([]),se([]),Pe.current=null,console.log("EE",e.machine_type_name),Ce(e.id)}catch(t){console.error(" :",t)}})(e)},onMouseDown:e=>{e.preventDefault()},tabIndex:0,children:e.machine_type_name},e.id)):Gt.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:K.trim()?"":0===M.length?"EE...":"E"})})]})]}),Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(FL,{htmlFor:"machine-number",className:"text-sm font-medium text-gray-700",children:":"}),Gt.jsxs("div",{className:"relative",children:[Gt.jsx(iH,{children:Gt.jsxs(sH,{open:N&&(Re.current||B)&&!Ie.current&&!W&&!Y.trim(),children:[Gt.jsx(oH,{asChild:!0,children:Gt.jsx("div",{className:"w-48",children:Gt.jsx(KL,{id:"machine-number",type:"text",placeholder:q?"...":"...",value:Y,onChange:e=>{const t=e.target.value;console.log(" :",t),Z(t),Se(t),te(!0)},onFocus:()=>{console.log(" "),console.log(" ",{selectedMachineType:B,machinesCount:z.length,machines:z,filteredMachinesCount:ie.length,filteredMachines:ie,isLoadingMachines:q,machineNumberInput:Y,showMachineNumberSuggestions:ee}),te(!0),z.length>0?(se(z),console.log("EE",z.length,"")):console.log("EE")},onBlur:e=>{const t=e.relatedTarget;t&&t.closest(".machine-number-dropdown")||setTimeout(()=>{te(!1)},150)},disabled:!B||q,className:"w-48"})})}),Gt.jsx(aH,{side:"bottom",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:Gt.jsx("p",{children:""})})]})}),(console.log(" :",{showMachineNumberSuggestions:ee,filteredMachinesCount:ie.length,filteredMachines:ie,selectedMachineType:B,machineNumberInput:Y,isLoadingMachines:q}),null),ee&&Gt.jsx("div",{id:"machine-number-menu",className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto machine-number-dropdown",children:ie.length>0?ie.map(e=>Gt.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{console.log(" E",e);try{H(e.id),Ie.current=e.id,Z(e.machine_number),te(!1);const t=Re.current&&""!==Re.current.trim()||B&&""!==B.trim(),r=e.id&&""!==e.id.trim();t&&r&&(Pe.current=null,console.log(" ",{machineType:Re.current||B,machineNumber:e.id})),console.log(" ",e.machine_number)}catch(t){console.error(" :",t)}})(e)},onMouseDown:e=>{e.preventDefault()},tabIndex:0,children:e.machine_number},e.id)):Gt.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:Y.trim()?"":B?"EE":""})})]})]})]}),Gt.jsxs("div",{className:"flex items-center gap-6",children:[Gt.jsxs(Bg,{variant:"outline",size:"lg",onClick:()=>Ke(this,null,function*(){yield _e(),h(!0)}),disabled:S,className:"bg-blue-50 text-blue-600 hover:bg-blue-100 border-4 border-blue-600 px-8 py-3 text-lg font-bold",children:[Gt.jsx(Vg,{className:"w-6 h-6 mr-3"}),""]}),Gt.jsx("div",{className:"w-16"}),Gt.jsxs(Bg,{variant:"outline",size:"sm",onClick:()=>{console.log(" E"),window.dispatchEvent(new CustomEvent("open-camera")),console.log(" open-camera ")},className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",children:[Gt.jsx(Zg,{className:"w-4 h-4 mr-2"}),""]}),N&&Gt.jsx("div",{className:"px-4 py-2 rounded-lg border text-sm font-medium "+("critical"===Fe(k)?"bg-red-100 text-red-800 border-red-200":"warning"===Fe(k)?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200"),children:Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx("span",{children:""}),Gt.jsx("span",{children:(qe=k,`${Math.floor(qe/60)}:${(qe%60).toString().padStart(2,"0")}`)}),"warning"===Fe(k)&&Gt.jsx("span",{className:"text-xs",children:"(5E"}),"critical"===Fe(k)&&Gt.jsx("span",{className:"text-xs",children:"()"})]})}),Gt.jsxs(Bg,{variant:"outline",size:"lg",onClick:()=>{const e={id:Date.now().toString(),content:"AI",isAiResponse:!0,timestamp:new Date,type:"ai_support_end"};r(t=>[...t,e]),P(!1),I(null),_(0),j(0),D(""),u({title:"",description:"AI"})},disabled:!N||i,className:"px-8 py-3 text-base font-semibold mr-6 "+(N?"critical"===Fe(k)?"bg-red-50 border-red-200 text-red-700 hover:bg-red-100":"warning"===Fe(k)?"bg-yellow-50 border-yellow-200 text-yellow-700 hover:bg-yellow-100":"bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100":"bg-gray-50 border-gray-200 text-gray-500 cursor-not-allowed"),children:[Gt.jsx(ob,{className:"w-6 h-6 mr-3"}),""]})]}),Gt.jsxs("div",{className:"flex items-center gap-4",children:[Gt.jsxs(Bg,{variant:"outline",size:"sm",onClick:ke,disabled:i||0===t.length,className:"border-2 border-blue-500 bg-blue-50 hover:bg-blue-100 text-blue-700",children:[Gt.jsx(Zy,{className:"w-4 h-4 mr-2"}),""]}),Gt.jsxs(Bg,{variant:"outline",size:"sm",onClick:()=>Ke(this,null,function*(){try{yield s(),ae(!1),ce(null),P(!1),U(""),Re.current="",H(""),Ie.current="",J(""),Z(""),F([]),se([]),Ee.current=!1,Te.current=!1,Ne.current=!1,Pe.current=null,u({title:"",description:""})}catch(e){u({title:"",description:"",variant:"destructive"})}}),disabled:i||o||0===t.length,children:[Gt.jsx(Ky,{className:"w-4 h-4 mr-2"}),""]})]})]}),E?Gt.jsx("div",{className:"flex-1",children:Gt.jsx(lH,{})}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scroll-smooth",children:[t.map(e=>Gt.jsx("div",{className:"w-full",children:Gt.jsx("div",{className:"w-full",children:e.isAiResponse&&oe&&(null==le?void 0:le.currentQuestion)===e.content?Gt.jsx(gB,{question:e.content,options:(null==le?void 0:le.currentOptions)||[],reasoning:null==le?void 0:le.reasoning,onAnswer:je,isLoading:i}):e.isAiResponse&&(e.content.includes("")||e.content.includes(""))?Gt.jsx(yB,{solution:e.content,problemDescription:null==le?void 0:le.problemDescription,isEmergency:e.content.includes("")}):Gt.jsx(Zz,{message:e})})},e.id)),i&&Gt.jsx("div",{className:"flex justify-end",children:Gt.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),Gt.jsx("span",{className:"text-gray-600",children:"AIE..."})]})})}),Gt.jsx("div",{ref:d,className:"h-4"})]}),Gt.jsx("div",{className:"border-t bg-white p-4",children:Gt.jsx(Xz,{onSendMessage:(e,...t)=>Ke(this,[e,...t],function*(e,t=[]){(e.trim()||0!==t.length)&&(oe&&le?yield je(e):N?yield Oe(e,t):n(e,t,!1))}),isLoading:i,disabled:oe&&!(null==le?void 0:le.currentQuestion)})})]}),Gt.jsx(CF,{}),$e&&We&&Gt.jsx(pB,{}),p&&Gt.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Gt.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[Gt.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Gt.jsx("h2",{className:"text-xl font-semibold",children:""}),Gt.jsxs(Bg,{variant:"ghost",size:"sm",onClick:()=>{h(!1),b(null),w("")},className:"text-gray-500 hover:text-gray-700",children:[Gt.jsx(ob,{className:"w-4 h-4 mr-2"}),"E"]})]}),Gt.jsx("div",{className:"mb-4",children:Gt.jsx(KL,{type:"text",placeholder:"...",value:x,onChange:e=>Ae(e.target.value),className:"w-full"})}),Gt.jsx("div",{className:"mb-4",children:Gt.jsx(fB,{onKeywordClick:e=>{Ae(e)}})}),!y&&Gt.jsx("div",{className:"overflow-auto",children:Gt.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-sm",children:[Gt.jsx("thead",{children:Gt.jsxs("tr",{className:"bg-gray-100",children:[Gt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:"E"})]})}),Gt.jsx("tbody",{children:0===v.length?Gt.jsx("tr",{children:Gt.jsx("td",{colSpan:2,className:"border border-gray-300 p-4 text-center text-gray-500",children:""})}):v.map(e=>Gt.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer "+(y===e.id?"bg-blue-50 ring-2 ring-blue-500":""),onClick:()=>{return t=e.id,void b(t);var t},children:[Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsx("div",{className:"break-words leading-tight text-sm font-semibold hover:text-blue-600",children:e.title})}),Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsx("div",{className:"break-words leading-tight text-sm text-gray-600",children:e.description})})]},e.id))})]})}),y&&Gt.jsx("div",{className:"mt-6",children:Gt.jsx(hB,{guideId:y,onExit:()=>b(null),backButtonText:"",onSendToChat:()=>{console.log(""),h(!1)}})})]})})]});var qe}},Symbol.toStringTag,{value:"Module"}));function uH(e,[t,r]){return Math.min(r,Math.max(t,e))}var dH=["PageUp","PageDown"],pH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hH={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},fH="Slider",[mH,vH,gH]=Jw(fH),[yH]=cb(fH,[gH]),[bH,xH]=yH(fH),wH=Lt.forwardRef((e,t)=>{const r=e,{name:n,min:i=0,max:s=100,step:o=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[i],value:d,onValueChange:p=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:m}=r,v=Fe(r,["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"]),g=Lt.useRef(new Set),y=Lt.useRef(0),b="horizontal"===a?EH:TH,[x=[],w]=vb({prop:d,defaultProp:u,onChange:e=>{var t;null==(t=[...g.current][y.current])||t.focus(),p(e)}}),S=Lt.useRef(x);function C(e,t,{commit:r}={commit:!1}){const n=function(e){return(String(e).split(".")[1]||"").length}(o),a=function(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}(Math.round((e-i)/o)*o+i,n),l=uH(a,[i,s]);w((e=[])=>{const n=function(e=[],t,r){const n=[...e];return n[r]=t,n.sort((e,t)=>e-t)}(e,l,t);if(function(e,t){if(t>0){const r=function(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}(e);return Math.min(...r)>=t}return!0}(n,c*o)){y.current=n.indexOf(l);const t=String(n)!==String(e);return t&&r&&h(n),t?n:e}return e})}return Gt.jsx(bH,{scope:e.__scopeSlider,name:n,disabled:l,min:i,max:s,valueIndexToChangeRef:y,thumbs:g.current,values:x,orientation:a,form:m,children:Gt.jsx(mH.Provider,{scope:e.__scopeSlider,children:Gt.jsx(mH.Slot,{scope:e.__scopeSlider,children:Gt.jsx(b,ze(Le({"aria-disabled":l,"data-disabled":l?"":void 0},v),{ref:t,onPointerDown:lb(v.onPointerDown,()=>{l||(S.current=x)}),min:i,max:s,inverted:f,onSlideStart:l?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const r=e.map(e=>Math.abs(e-t)),n=Math.min(...r);return r.indexOf(n)}(x,e);C(e,t)},onSlideMove:l?void 0:function(e){C(e,y.current)},onSlideEnd:l?void 0:function(){const e=S.current[y.current];x[y.current]!==e&&h(x)},onHomeKeyDown:()=>!l&&C(i,0,{commit:!0}),onEndKeyDown:()=>!l&&C(s,x.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!l){const r=dH.includes(e.key)||e.shiftKey&&pH.includes(e.key)?10:1,n=y.current;C(x[n]+o*r*t,n,{commit:!0})}}}))})})})});wH.displayName=fH;var[SH,CH]=yH(fH,{startEdge:"left",endEdge:"right",size:"width",direction:1}),EH=Lt.forwardRef((e,t)=>{const r=e,{min:n,max:i,dir:s,inverted:o,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u}=r,d=Fe(r,["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),[p,h]=Lt.useState(null),f=Pv(t,e=>h(e)),m=Lt.useRef(void 0),v=TF(s),g="ltr"===v,y=g&&!o||!g&&o;function b(e){const t=m.current||p.getBoundingClientRect(),r=MH([0,t.width],y?[n,i]:[i,n]);return m.current=t,r(e-t.left)}return Gt.jsx(SH,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:Gt.jsx(NH,ze(Le({dir:v,"data-orientation":"horizontal"},d),{ref:f,style:ze(Le({},d.style),{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:e=>{const t=b(e.clientX);null==a||a(t)},onSlideMove:e=>{const t=b(e.clientX);null==l||l(t)},onSlideEnd:()=>{m.current=void 0,null==c||c()},onStepKeyDown:e=>{const t=hH[y?"from-left":"from-right"].includes(e.key);null==u||u({event:e,direction:t?-1:1})}}))})}),TH=Lt.forwardRef((e,t)=>{const r=e,{min:n,max:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c}=r,u=Fe(r,["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),d=Lt.useRef(null),p=Pv(t,d),h=Lt.useRef(void 0),f=!s;function m(e){const t=h.current||d.current.getBoundingClientRect(),r=MH([0,t.height],f?[i,n]:[n,i]);return h.current=t,r(e-t.top)}return Gt.jsx(SH,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:Gt.jsx(NH,ze(Le({"data-orientation":"vertical"},u),{ref:p,style:ze(Le({},u.style),{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:e=>{const t=m(e.clientY);null==o||o(t)},onSlideMove:e=>{const t=m(e.clientY);null==a||a(t)},onSlideEnd:()=>{h.current=void 0,null==l||l()},onStepKeyDown:e=>{const t=hH[f?"from-bottom":"from-top"].includes(e.key);null==c||c({event:e,direction:t?-1:1})}}))})}),NH=Lt.forwardRef((e,t)=>{const r=e,{__scopeSlider:n,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c}=r,u=Fe(r,["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"]),d=xH(fH,n);return Gt.jsx(wb.span,ze(Le({},u),{ref:t,onKeyDown:lb(e.onKeyDown,e=>{"Home"===e.key?(a(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):dH.concat(pH).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:lb(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():i(e)}),onPointerMove:lb(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:lb(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),o(e))})}))}),PH="SliderTrack",RH=Lt.forwardRef((e,t)=>{const r=e,{__scopeSlider:n}=r,i=Fe(r,["__scopeSlider"]),s=xH(PH,n);return Gt.jsx(wb.span,ze(Le({"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation},i),{ref:t}))});RH.displayName=PH;var IH="SliderRange",kH=Lt.forwardRef((e,t)=>{const r=e,{__scopeSlider:n}=r,i=Fe(r,["__scopeSlider"]),s=xH(IH,n),o=CH(IH,n),a=Pv(t,Lt.useRef(null)),l=s.values.length,c=s.values.map(e=>DH(e,s.min,s.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return Gt.jsx(wb.span,ze(Le({"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0},i),{ref:a,style:ze(Le({},e.style),{[o.startEdge]:u+"%",[o.endEdge]:d+"%"})}))});kH.displayName=IH;var _H="SliderThumb",AH=Lt.forwardRef((e,t)=>{const r=vH(e.__scopeSlider),[n,i]=Lt.useState(null),s=Pv(t,e=>i(e)),o=Lt.useMemo(()=>n?r().findIndex(e=>e.ref.current===n):-1,[r,n]);return Gt.jsx(jH,ze(Le({},e),{ref:s,index:o}))}),jH=Lt.forwardRef((e,t)=>{const r=e,{__scopeSlider:n,index:i,name:s}=r,o=Fe(r,["__scopeSlider","index","name"]),a=xH(_H,n),l=CH(_H,n),[c,u]=Lt.useState(null),d=Pv(t,e=>u(e)),p=!c||(a.form||!!c.closest("form")),h=uF(c),f=a.values[i],m=void 0===f?0:DH(f,a.min,a.max),v=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(i,a.values.length),g=null==h?void 0:h[l.size],y=g?function(e,t,r){const n=e/2,i=MH([0,50],[0,n]);return(n-i(t)*r)*r}(g,m,l.direction):0;return Lt.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),Gt.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${m}% + ${y}px)`},children:[Gt.jsx(mH.ItemSlot,{scope:e.__scopeSlider,children:Gt.jsx(wb.span,ze(Le({role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":a.min,"aria-valuenow":f,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0},o),{ref:d,style:void 0===f?{display:"none"}:e.style,onFocus:lb(e.onFocus,()=>{a.valueIndexToChangeRef.current=i})}))}),p&&Gt.jsx(OH,{name:null!=s?s:a.name?a.name+(a.values.length>1?"[]":""):void 0,form:a.form,value:f},i)]})});AH.displayName=_H;var OH=Lt.forwardRef((e,t)=>{var r=e,{__scopeSlider:n,value:i}=r,s=Fe(r,["__scopeSlider","value"]);const o=Lt.useRef(null),a=Pv(o,t),l=cF(i);return Lt.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(l!==i&&r){const t=new Event("input",{bubbles:!0});r.call(e,i),e.dispatchEvent(t)}},[l,i]),Gt.jsx(wb.input,ze(Le({style:{display:"none"}},s),{ref:a,defaultValue:i}))});function DH(e,t,r){return uH(100/(r-t)*(e-t),[0,100])}function MH(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}OH.displayName="RadioBubbleInput";var LH=wH,zH=RH,FH=kH,BH=AH;const UH=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsxs(LH,ze(Le({ref:t,className:zg("relative flex w-full touch-none select-none items-center",n)},i),{children:[Gt.jsx(zH,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:Gt.jsx(FH,{className:"absolute h-full bg-primary"})}),Gt.jsx(BH,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}))});function WH({open:e,title:t,message:r,onCancel:n,onConfirm:i}){return Gt.jsx(eF,{open:e,onOpenChange:n,children:Gt.jsxs(iF,{className:"sm:max-w-md",children:[Gt.jsxs(sF,{children:[Gt.jsx("div",{className:"text-orange-500 mb-2",children:Gt.jsx(Yy,{className:"h-8 w-8"})}),Gt.jsx(aF,{className:"text-lg font-semibold",children:t}),Gt.jsx(lF,{className:"mt-2 text-sm",children:r})]}),Gt.jsxs(oF,{className:"flex justify-end space-x-2 pt-2",children:[Gt.jsx(Bg,{variant:"outline",onClick:n,children:""}),Gt.jsx(Bg,{variant:"default",className:"bg-red-500 hover:bg-red-600 text-white",onClick:i,children:"OK"})]})]})})}UH.displayName=LH.displayName;const HH=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,logout:t}=sv(),{toast:r}=fv(),[n,i]=Lt.useState(!1),[s,o]=Lt.useState(!0),[a,l]=Lt.useState(!0),[c,u]=Lt.useState([80]),[d,p]=Lt.useState(!1),[h,f]=Lt.useState(!0),[m,v]=Lt.useState(!0);Lt.useEffect(()=>{(()=>{try{const e=localStorage.getItem("emergencyRecoverySettings");if(e){const t=JSON.parse(e);void 0!==t.notifications&&o(t.notifications),void 0!==t.textToSpeech&&l(t.textToSpeech),void 0!==t.speechVolume&&u(t.speechVolume),void 0!==t.darkMode&&p(t.darkMode),void 0!==t.autoSave&&f(t.autoSave),void 0!==t.useOnlyKnowledgeBase&&v(t.useOnlyKnowledgeBase)}}catch(e){console.error(":",e)}})()},[]);const g=()=>{try{const e={notifications:s,textToSpeech:a,speechVolume:c,darkMode:d,autoSave:h,useOnlyKnowledgeBase:m};localStorage.setItem("emergencyRecoverySettings",JSON.stringify(e)),localStorage.setItem("useOnlyKnowledgeBase",m.toString()),window.dispatchEvent(new CustomEvent("settingsChanged",{detail:e}))}catch(e){console.error(":",e)}};return Lt.useEffect(()=>{g()},[s,a,c,d,h,m]),Gt.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-5xl mx-auto w-full bg-gradient-to-br from-blue-50 to-indigo-50",children:[Gt.jsxs("div",{className:"mb-6",children:[Gt.jsxs("h1",{className:"text-2xl font-bold flex items-center bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:[Gt.jsx(By,{className:"mr-2 h-6 w-6 text-indigo-500"}),""]}),Gt.jsx("p",{className:"text-blue-400",children:""})]}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Gt.jsxs(IL,{className:"border border-blue-200 shadow-md overflow-hidden",children:[Gt.jsx(kL,{className:"pb-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:Gt.jsxs(_L,{className:"text-lg flex items-center",children:[Gt.jsx(Xy,{className:"mr-2 h-5 w-5"}),""]})}),Gt.jsx(jL,{className:"bg-white",children:Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between py-2",children:[Gt.jsxs("div",{children:[Gt.jsx("p",{className:"font-medium text-blue-800",children:null==e?void 0:e.displayName}),Gt.jsx("p",{className:"text-sm text-blue-400",children:null==e?void 0:e.username}),Gt.jsx("p",{className:"text-sm text-blue-400",children:(null==e?void 0:e.department)||""})]}),Gt.jsx("div",{className:"text-white text-xs px-3 py-1 rounded-full "+("admin"===(null==e?void 0:e.role)?"bg-gradient-to-r from-purple-500 to-indigo-500":"bg-gradient-to-r from-blue-500 to-green-500"),children:"admin"===(null==e?void 0:e.role)?"":""})]}),Gt.jsx("div",{className:"border-t border-blue-100 pt-3",children:Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Emergency Recovery Chat"}),Gt.jsx("p",{className:"text-sm text-blue-500",children:" 1.0.0"}),Gt.jsx("p",{className:"text-sm text-blue-500",children:" 2024 All Rights Reserved"}),Gt.jsx("p",{className:"text-xs text-blue-400",children:""})]})})]})})]}),("admin"===(null==e?void 0:e.role)||"employee"===(null==e?void 0:e.role))&&Gt.jsxs(IL,{className:"border border-blue-200 shadow-md overflow-hidden",children:[Gt.jsx(kL,{className:"pb-2 bg-gradient-to-r from-blue-700 to-indigo-700 text-white",children:Gt.jsxs(_L,{className:"text-lg flex items-center",children:[Gt.jsx(Uy,{className:"mr-2 h-5 w-5"}),""]})}),Gt.jsx(jL,{className:"bg-white",children:Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Gt.jsxs("div",{children:[Gt.jsx("p",{className:"font-medium text-blue-800",children:""}),Gt.jsx("p",{className:"text-sm text-blue-400",children:""})]}),Gt.jsx(Wm,{to:"/users",children:Gt.jsxs(Bg,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[Gt.jsx(Qy,{className:"mr-2 h-4 w-4 text-blue-500"}),""]})})]}),Gt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Gt.jsxs("div",{children:[Gt.jsx("p",{className:"font-medium text-blue-800",children:""}),Gt.jsx("p",{className:"text-sm text-blue-400",children:"DBGPT"})]}),Gt.jsx(Wm,{to:"/system-diagnostic",children:Gt.jsxs(Bg,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[Gt.jsx(iy,{className:"mr-2 h-4 w-4 text-blue-500"}),""]})})]}),Gt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Gt.jsxs("div",{children:[Gt.jsx("p",{className:"font-medium text-blue-800",children:""}),Gt.jsx("p",{className:"text-sm text-blue-400",children:""})]}),Gt.jsx(Wm,{to:"/machine-management",children:Gt.jsxs(Bg,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[Gt.jsx(sb,{className:"mr-2 h-4 w-4 text-blue-500"}),""]})})]}),Gt.jsxs("div",{className:"border-t border-blue-100 pt-4 space-y-3",children:[Gt.jsx("div",{className:"text-sm font-medium text-blue-800 mb-3",children:""}),Gt.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[Gt.jsxs(Bg,{onClick:()=>Ke(this,null,function*(){try{const e=yield fetch("/api/tech-support/cleanup-uploads",{method:"POST"});if(!e.ok)throw new Error("");yield e.json();r({title:"",description:""})}catch(e){r({title:"",description:"",variant:"destructive"})}}),variant:"destructive",className:"w-full",children:[Gt.jsx(Ky,{className:"mr-2 h-4 w-4"}),""]}),Gt.jsxs(Bg,{onClick:()=>Ke(this,null,function*(){try{r({title:"",description:"..."});const e=yield fetch("/api/tech-support/backup-logs",{method:"POST"});if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}const t=yield e.json();if(!t.success)throw new Error(t.message||"");{const e=t.totalSize?(t.totalSize/1024/1024).toFixed(2):"0";r({title:"",description:`${t.fileCount} (${e} MB)`})}}catch(e){console.error(":",e),r({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}}),variant:"outline",className:"w-full",children:[Gt.jsx(vy,{className:"mr-2 h-4 w-4"}),""]})]})]})]})})]}),Gt.jsxs(IL,{className:"border border-blue-200 shadow-md overflow-hidden",children:[Gt.jsx(kL,{className:"pb-2 bg-gradient-to-r from-blue-400 to-sky-500 text-white",children:Gt.jsxs(_L,{className:"text-lg flex items-center",children:[Gt.jsx(_y,{className:"mr-2 h-5 w-5"}),""]})}),Gt.jsx(jL,{className:"bg-white",children:Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between py-2",children:[Gt.jsxs("div",{children:[Gt.jsx("p",{className:"font-medium text-blue-700",children:""}),Gt.jsx("p",{className:"text-sm text-blue-400",children:""})]}),Gt.jsx(SF,{checked:s,onCheckedChange:o,className:"data-[state=checked]:bg-blue-500"})]}),Gt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Gt.jsxs("div",{children:[Gt.jsx("p",{className:"font-medium text-blue-700",children:""}),Gt.jsx("p",{className:"text-sm text-blue-400",children:"AI"})]}),Gt.jsx(SF,{checked:a,onCheckedChange:l,className:"data-[state=checked]:bg-blue-500"})]}),a&&Gt.jsxs("div",{className:"py-2 border-t border-blue-100 pt-3",children:[Gt.jsx("p",{className:"font-medium mb-2 text-blue-700",children:""}),Gt.jsx(UH,{value:c,onValueChange:u,max:100,step:1,className:"data-[state=checked]:bg-blue-500"}),Gt.jsxs("div",{className:"flex justify-between mt-1",children:[Gt.jsx(rb,{className:"h-4 w-4 text-blue-400"}),Gt.jsxs("span",{className:"text-sm text-blue-500 font-medium",children:[c[0],"%"]})]})]})]})})]}),Gt.jsxs(IL,{className:"border border-blue-200 shadow-md overflow-hidden",children:[Gt.jsx(kL,{className:"pb-2 bg-gradient-to-r from-indigo-500 to-blue-600 text-white",children:Gt.jsxs(_L,{className:"text-lg flex items-center",children:[Gt.jsx(By,{className:"mr-2 h-5 w-5"}),""]})}),Gt.jsx(jL,{className:"bg-white",children:Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between py-2",children:[Gt.jsxs("div",{children:[Gt.jsx("p",{className:"font-medium text-indigo-700",children:""}),Gt.jsx("p",{className:"text-sm text-indigo-400",children:""})]}),Gt.jsx(SF,{checked:d,onCheckedChange:p,className:"data-[state=checked]:bg-indigo-500"})]}),Gt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Gt.jsxs("div",{children:[Gt.jsx("p",{className:"font-medium text-indigo-700",children:""}),Gt.jsx("p",{className:"text-sm text-indigo-400",children:""})]}),Gt.jsx(SF,{checked:h,onCheckedChange:f,className:"data-[state=checked]:bg-indigo-500"})]}),Gt.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[Gt.jsxs("div",{children:[Gt.jsx("p",{className:"font-medium text-indigo-700",children:""}),Gt.jsx("p",{className:"text-sm text-indigo-400",children:"AI"})]}),Gt.jsx(SF,{checked:m,onCheckedChange:v,className:"data-[state=checked]:bg-indigo-500"})]}),Gt.jsx("div",{className:"py-2 border-t border-blue-100 pt-3 flex justify-end",children:Gt.jsxs(Bg,{onClick:g,className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white hover:from-blue-600 hover:to-indigo-600",children:[Gt.jsx(My,{className:"mr-2 h-4 w-4"}),""]})})]})})]})]}),Gt.jsx(WH,{open:n,title:"",message:"",onCancel:()=>i(!1),onConfirm:()=>Ke(this,null,function*(){try{yield t()}catch(e){r({title:"",description:"",variant:"destructive"})}finally{i(!1)}})})]})}},Symbol.toStringTag,{value:"Module"}));var $H=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const r=_v(`Primitive.${t}`),n=Lt.forwardRef((e,n)=>{const i=e,{asChild:s}=i,o=Fe(i,["asChild"]),a=s?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Gt.jsx(a,ze(Le({},o),{ref:n}))});return n.displayName=`Primitive.${t}`,ze(Le({},e),{[t]:n})},{}),VH="horizontal",qH=["horizontal","vertical"],GH=Lt.forwardRef((e,t)=>{const r=e,{decorative:n,orientation:i=VH}=r,s=Fe(r,["decorative","orientation"]),o=function(e){return qH.includes(e)}(i)?i:VH,a=n?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"};return Gt.jsx($H.div,ze(Le(Le({"data-orientation":o},a),s),{ref:t}))});GH.displayName="Separator";var KH=GH;const JH=Lt.forwardRef((e,t)=>{var r=e,{className:n,orientation:i="horizontal",decorative:s=!0}=r,o=Fe(r,["className","orientation","decorative"]);return Gt.jsx(KH,Le({ref:t,decorative:s,orientation:i,className:zg("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",n)},o))});JH.displayName=KH.displayName;const YH=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{toast:e}=fv(),[t,r]=Lt.useState(null),[n,i]=Lt.useState(null),[s,o]=Lt.useState(!1),[a,l]=Lt.useState(!1),c=e=>{const t="http://localhost:8080".replace(/\/$/,""),r=e.startsWith("/")?e:`/${e}`;return t.endsWith("/api")?`${t}${r}`:`${t}/api${r}`},u=()=>Ke(this,null,function*(){o(!0),r(null);try{const t=yield fetch(c("/system-check/db-check")),n=yield t.json(),i={success:"OK"===n.status,status:n.status||"ERROR",message:n.message||"",error:"ERROR"===n.status?n.message:void 0,current_time:n.db_time,version:n.version,timestamp:n.timestamp||(new Date).toISOString()};r(i),"OK"===i.status?e({title:"DB",description:"",variant:"default"}):e({title:"DB",description:i.error||i.message||"",variant:"destructive"})}catch(t){const n=t instanceof Error?t.message:"";r({status:"ERROR",error:n}),e({title:"DB",description:n,variant:"destructive"})}finally{o(!1)}}),d=()=>Ke(this,null,function*(){l(!0),i(null);try{const t=yield fetch(c("/system-check/gpt-check"),{method:"POST",headers:{"Content-Type":"application/json"}}),r=yield t.json(),n={success:r.success,status:r.success?"OK":"ERROR",message:r.message,error:r.error,details:r.details,timestamp:r.timestamp};i(n),"OK"===n.status?e({title:"GPT",description:"GPT",variant:"default"}):e({title:"GPT",description:n.error||n.message||"GPT",variant:"destructive"})}catch(t){const r=t instanceof Error?t.message:"";i({status:"ERROR",error:r}),e({title:"GPT",description:r,variant:"destructive"})}finally{l(!1)}});return Gt.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[Gt.jsxs("div",{className:"mb-8",children:[Gt.jsx("h1",{className:"text-3xl font-bold mb-2",children:""}),Gt.jsx("p",{className:"text-muted-foreground",children:"GPT"})]}),Gt.jsx(IL,{className:"mb-6",children:Gt.jsx(jL,{className:"pt-6",children:Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsxs("div",{children:[Gt.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),Gt.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),Gt.jsxs(Bg,{onClick:()=>Ke(this,null,function*(){yield u(),yield d()}),disabled:s||a,className:"flex items-center gap-2",children:[s||a?Gt.jsx(Ty,{className:"h-4 w-4 animate-spin"}):Gt.jsx(Dy,{className:"h-4 w-4"}),""]})]})})}),Gt.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[Gt.jsxs(IL,{children:[Gt.jsx(kL,{children:Gt.jsxs(_L,{className:"flex items-center gap-2",children:[Gt.jsx(dy,{className:"h-5 w-5"}),"PostgreSQL"]})}),Gt.jsxs(jL,{className:"space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsx("p",{className:"text-sm text-muted-foreground",children:""}),Gt.jsxs(Bg,{onClick:u,disabled:s,size:"sm",variant:"outline",children:[s?Gt.jsx(Ty,{className:"h-4 w-4 animate-spin"}):Gt.jsx(iy,{className:"h-4 w-4"}),""]})]}),t&&Gt.jsxs("div",{className:"space-y-3",children:[Gt.jsx(JH,{}),Gt.jsxs("div",{className:"flex items-center gap-2",children:["OK"===t.status?Gt.jsx(iy,{className:"h-4 w-4 text-green-500"}):Gt.jsx(oy,{className:"h-4 w-4 text-red-500"}),Gt.jsx(vB,{variant:"OK"===t.status?"default":"destructive",children:"OK"===t.status?"":""})]}),"OK"===t.status&&t.current_time&&Gt.jsxs("div",{className:"text-sm",children:[Gt.jsx("span",{className:"font-medium",children:"DB:"})," ",new Date(t.current_time).toLocaleString("ja-JP")]}),"ERROR"===t.status&&(t.error||t.message)&&Gt.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md",children:Gt.jsxs("div",{className:"flex items-start gap-2",children:[Gt.jsx(ny,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),Gt.jsx("span",{children:t.error||t.message})]})})]})]})]}),Gt.jsxs(IL,{children:[Gt.jsx(kL,{children:Gt.jsxs(_L,{className:"flex items-center gap-2",children:[Gt.jsx(ky,{className:"h-5 w-5"}),"GPT"]})}),Gt.jsxs(jL,{className:"space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsx("p",{className:"text-sm text-muted-foreground",children:"OpenAI API"}),Gt.jsxs(Bg,{onClick:d,disabled:a,size:"sm",variant:"outline",children:[a?Gt.jsx(Ty,{className:"h-4 w-4 animate-spin"}):Gt.jsx(iy,{className:"h-4 w-4"}),""]})]}),n&&Gt.jsxs("div",{className:"space-y-3",children:[Gt.jsx(JH,{}),Gt.jsxs("div",{className:"flex items-center gap-2",children:["OK"===n.status?Gt.jsx(iy,{className:"h-4 w-4 text-green-500"}):Gt.jsx(oy,{className:"h-4 w-4 text-red-500"}),Gt.jsx(vB,{variant:"OK"===n.status?"default":"destructive",children:"OK"===n.status?"":""})]}),"OK"===n.status&&n.message&&Gt.jsxs("div",{className:"text-sm",children:[Gt.jsx("span",{className:"font-medium",children:"GPT:"}),Gt.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded text-xs max-h-20 overflow-y-auto",children:n.message})]}),"ERROR"===n.status&&(n.error||n.message)&&Gt.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md",children:Gt.jsxs("div",{className:"flex items-start gap-2",children:[Gt.jsx(ny,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),Gt.jsxs("div",{className:"flex-1",children:[Gt.jsx("div",{className:"font-medium",children:n.error}),Gt.jsx("div",{className:"text-red-500 mt-1",children:n.message}),n.details&&Gt.jsx("div",{className:"text-xs text-red-400 mt-1 font-mono",children:n.details})]})]})})]})]})]})]}),t&&n&&Gt.jsxs(IL,{className:"mt-6",children:[Gt.jsx(kL,{children:Gt.jsx(_L,{children:""})}),Gt.jsxs(jL,{children:[Gt.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(dy,{className:"h-4 w-4"}),Gt.jsx("span",{children:"PostgreSQL:"}),Gt.jsx(vB,{variant:"OK"===t.status?"default":"destructive",children:"OK"===t.status?"":""})]}),Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(ky,{className:"h-4 w-4"}),Gt.jsx("span",{children:"GPT:"}),Gt.jsx(vB,{variant:"OK"===n.status?"default":"destructive",children:"OK"===n.status?"":""})]})]}),"OK"===t.status&&"OK"===n.status&&Gt.jsx("div",{className:"mt-4 p-3 bg-green-50 text-green-700 rounded-md",children:Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(iy,{className:"h-4 w-4"}),Gt.jsx("span",{className:"font-medium",children:""})]})}),("ERROR"===t.status||"ERROR"===n.status)&&Gt.jsx("div",{className:"mt-4 p-3 bg-yellow-50 text-yellow-700 rounded-md",children:Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(ny,{className:"h-4 w-4"}),Gt.jsx("span",{className:"font-medium",children:""})]})})]})]})]})}},Symbol.toStringTag,{value:"Module"}));function ZH(e){const t=QH(e),r=Lt.forwardRef((e,r)=>{const n=e,{children:i}=n,s=Fe(n,["children"]),o=Lt.Children.toArray(i),a=o.find(e$);if(a){const e=a.props.children,n=o.map(t=>t===a?Lt.Children.count(e)>1?Lt.Children.only(null):Lt.isValidElement(e)?e.props.children:null:t);return Gt.jsx(t,ze(Le({},s),{ref:r,children:Lt.isValidElement(e)?Lt.cloneElement(e,void 0,n):null}))}return Gt.jsx(t,ze(Le({},s),{ref:r,children:i}))});return r.displayName=`${e}.Slot`,r}function QH(e){const t=Lt.forwardRef((e,t)=>{const r=e,{children:n}=r,i=Fe(r,["children"]);if(Lt.isValidElement(n)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const r=Le({},t);for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]=Le(Le({},i),s):"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return Le(Le({},e),r)}(i,n.props);return n.type!==Lt.Fragment&&(r.ref=t?Nv(t,e):e),Lt.cloneElement(n,r)}return Lt.Children.count(n)>1?Lt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var XH=Symbol("radix.slottable");function e$(e){return Lt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===XH}var t$=[" ","Enter","ArrowUp","ArrowDown"],r$=[" ","Enter"],n$="Select",[i$,s$,o$]=Jw(n$),[a$]=cb(n$,[o$,dW]),l$=dW(),[c$,u$]=a$(n$),[d$,p$]=a$(n$),h$=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:p,required:h,form:f}=e,m=l$(t),[v,g]=Lt.useState(null),[y,b]=Lt.useState(null),[x,w]=Lt.useState(!1),S=TF(c),[C,E]=vb({prop:n,defaultProp:null!=i&&i,onChange:s,caller:n$}),[T,N]=vb({prop:o,defaultProp:a,onChange:l,caller:n$}),P=Lt.useRef(null),R=!v||(f||!!v.closest("form")),[I,k]=Lt.useState(new Set),_=Array.from(I).map(e=>e.props.value).join(";");return Gt.jsx(PW,ze(Le({},m),{children:Gt.jsxs(c$,{required:h,scope:t,trigger:v,onTriggerChange:g,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:x,onValueNodeHasChildrenChange:w,contentId:fb(),value:T,onValueChange:N,open:C,onOpenChange:E,dir:S,triggerPointerDownPosRef:P,disabled:p,children:[Gt.jsx(i$.Provider,{scope:t,children:Gt.jsx(d$,{scope:e.__scopeSelect,onNativeOptionAdd:Lt.useCallback(e=>{k(t=>new Set(t).add(e))},[]),onNativeOptionRemove:Lt.useCallback(e=>{k(t=>{const r=new Set(t);return r.delete(e),r})},[]),children:r})}),R?Gt.jsxs(X$,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:T,onChange:e=>N(e.target.value),disabled:p,form:f,children:[void 0===T?Gt.jsx("option",{value:""}):null,Array.from(I)]},_):null]})}))};h$.displayName=n$;var f$="SelectTrigger",m$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n,disabled:i=!1}=r,s=Fe(r,["__scopeSelect","disabled"]),o=l$(n),a=u$(f$,n),l=a.disabled||i,c=Pv(t,a.onTriggerChange),u=s$(n),d=Lt.useRef("touch"),[p,h,f]=tV(e=>{const t=u().filter(e=>!e.disabled),r=t.find(e=>e.value===a.value),n=rV(t,e,r);void 0!==n&&a.onValueChange(n.value)}),m=e=>{l||(a.onOpenChange(!0),f()),e&&(a.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return Gt.jsx(RW,ze(Le({asChild:!0},o),{children:Gt.jsx(wb.button,ze(Le({type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":eV(a.value)?"":void 0},s),{ref:c,onClick:lb(s.onClick,e=>{e.currentTarget.focus(),"mouse"!==d.current&&m(e)}),onPointerDown:lb(s.onPointerDown,e=>{d.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(m(e),e.preventDefault())}),onKeyDown:lb(s.onKeyDown,e=>{const t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||t$.includes(e.key)&&(m(),e.preventDefault())})}))}))});m$.displayName=f$;var v$="SelectValue",g$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n,className:i,style:s,children:o,placeholder:a=""}=r,l=Fe(r,["__scopeSelect","className","style","children","placeholder"]),c=u$(v$,n),{onValueNodeHasChildrenChange:u}=c,d=void 0!==o,p=Pv(t,c.onValueNodeChange);return db(()=>{u(d)},[u,d]),Gt.jsx(wb.span,ze(Le({},l),{ref:p,style:{pointerEvents:"none"},children:eV(c.value)?Gt.jsx(Gt.Fragment,{children:a}):o}))});g$.displayName=v$;var y$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n,children:i}=r,s=Fe(r,["__scopeSelect","children"]);return Gt.jsx(wb.span,ze(Le({"aria-hidden":!0},s),{ref:t,children:i||""}))});y$.displayName="SelectIcon";var b$=e=>Gt.jsx(Vb,Le({asChild:!0},e));b$.displayName="SelectPortal";var x$="SelectContent",w$=Lt.forwardRef((e,t)=>{const r=u$(x$,e.__scopeSelect),[n,i]=Lt.useState();if(db(()=>{i(new DocumentFragment)},[]),!r.open){const t=n;return t?eh.createPortal(Gt.jsx(C$,{scope:e.__scopeSelect,children:Gt.jsx(i$.Slot,{scope:e.__scopeSelect,children:Gt.jsx("div",{children:e.children})})}),t):null}return Gt.jsx(N$,ze(Le({},e),{ref:t}))});w$.displayName=x$;var S$=10,[C$,E$]=a$(x$),T$=ZH("SelectContent.RemoveScroll"),N$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:p,collisionBoundary:h,collisionPadding:f,sticky:m,hideWhenDetached:v,avoidCollisions:g}=r,y=Fe(r,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),b=u$(x$,n),[x,w]=Lt.useState(null),[S,C]=Lt.useState(null),E=Pv(t,e=>w(e)),[T,N]=Lt.useState(null),[P,R]=Lt.useState(null),I=s$(n),[k,_]=Lt.useState(!1),A=Lt.useRef(!1);Lt.useEffect(()=>{if(x)return Vx(x)},[x]),Jb();const j=Lt.useCallback(e=>{const[t,...r]=I().map(e=>e.ref.current),[n]=r.slice(-1),i=document.activeElement;for(const s of e){if(s===i)return;if(null==s||s.scrollIntoView({block:"nearest"}),s===t&&S&&(S.scrollTop=0),s===n&&S&&(S.scrollTop=S.scrollHeight),null==s||s.focus(),document.activeElement!==i)return}},[I,S]),O=Lt.useCallback(()=>j([T,x]),[j,T,x]);Lt.useEffect(()=>{k&&O()},[k,O]);const{onOpenChange:D,triggerPointerDownPosRef:M}=b;Lt.useEffect(()=>{if(x){let e={x:0,y:0};const t=t=>{var r,n,i,s;e={x:Math.abs(Math.round(t.pageX)-(null!=(n=null==(r=M.current)?void 0:r.x)?n:0)),y:Math.abs(Math.round(t.pageY)-(null!=(s=null==(i=M.current)?void 0:i.y)?s:0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():x.contains(r.target)||D(!1),document.removeEventListener("pointermove",t),M.current=null};return null!==M.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[x,D,M]),Lt.useEffect(()=>{const e=()=>D(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[D]);const[L,z]=tV(e=>{const t=I().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=rV(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),F=Lt.useCallback((e,t,r)=>{const n=!A.current&&!r;(void 0!==b.value&&b.value===t||n)&&(N(e),n&&(A.current=!0))},[b.value]),B=Lt.useCallback(()=>null==x?void 0:x.focus(),[x]),U=Lt.useCallback((e,t,r)=>{const n=!A.current&&!r;(void 0!==b.value&&b.value===t||n)&&R(e)},[b.value]),W="popper"===i?R$:P$,H=W===R$?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:p,collisionBoundary:h,collisionPadding:f,sticky:m,hideWhenDetached:v,avoidCollisions:g}:{};return Gt.jsx(C$,{scope:n,content:x,viewport:S,onViewportChange:C,itemRefCallback:F,selectedItem:T,onItemLeave:B,itemTextRefCallback:U,focusSelectedItem:O,selectedItemText:P,position:i,isPositioned:k,searchRef:L,children:Gt.jsx(zx,{as:T$,allowPinchZoom:!0,children:Gt.jsx(zb,{asChild:!0,trapped:b.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:lb(s,e=>{var t;null==(t=b.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:Gt.jsx(Ib,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:Gt.jsx(W,ze(Le(Le({role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:e=>e.preventDefault()},y),H),{onPlaced:()=>_(!0),ref:E,style:Le({display:"flex",flexDirection:"column",outline:"none"},y.style),onKeyDown:lb(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||z(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=I().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>j(t)),e.preventDefault()}})}))})})})})});N$.displayName="SelectContentImpl";var P$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n,onPlaced:i}=r,s=Fe(r,["__scopeSelect","onPlaced"]),o=u$(x$,n),a=E$(x$,n),[l,c]=Lt.useState(null),[u,d]=Lt.useState(null),p=Pv(t,e=>d(e)),h=s$(n),f=Lt.useRef(!1),m=Lt.useRef(!0),{viewport:v,selectedItem:g,selectedItemText:y,focusSelectedItem:b}=a,x=Lt.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&v&&g&&y){const e=o.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),r=o.valueNode.getBoundingClientRect(),n=y.getBoundingClientRect();if("rtl"!==o.dir){const i=n.left-t.left,s=r.left-i,o=e.left-s,a=e.width+o,c=Math.max(a,t.width),u=window.innerWidth-S$,d=uH(s,[S$,Math.max(S$,u-c)]);l.style.minWidth=a+"px",l.style.left=d+"px"}else{const i=t.right-n.right,s=window.innerWidth-r.right-i,o=window.innerWidth-e.right-s,a=e.width+o,c=Math.max(a,t.width),u=window.innerWidth-S$,d=uH(s,[S$,Math.max(S$,u-c)]);l.style.minWidth=a+"px",l.style.right=d+"px"}const s=h(),a=window.innerHeight-2*S$,c=v.scrollHeight,d=window.getComputedStyle(u),p=parseInt(d.borderTopWidth,10),m=parseInt(d.paddingTop,10),b=parseInt(d.borderBottomWidth,10),x=p+m+c+parseInt(d.paddingBottom,10)+b,w=Math.min(5*g.offsetHeight,x),S=window.getComputedStyle(v),C=parseInt(S.paddingTop,10),E=parseInt(S.paddingBottom,10),T=e.top+e.height/2-S$,N=a-T,P=g.offsetHeight/2,R=p+m+(g.offsetTop+P),I=x-R;if(R<=T){const e=s.length>0&&g===s[s.length-1].ref.current;l.style.bottom="0px";const t=u.clientHeight-v.offsetTop-v.offsetHeight,r=R+Math.max(N,P+(e?E:0)+t+b);l.style.height=r+"px"}else{const e=s.length>0&&g===s[0].ref.current;l.style.top="0px";const t=Math.max(T,p+v.offsetTop+(e?C:0)+P)+I;l.style.height=t+"px",v.scrollTop=R-T+v.offsetTop}l.style.margin=`${S$}px 0`,l.style.minHeight=w+"px",l.style.maxHeight=a+"px",null==i||i(),requestAnimationFrame(()=>f.current=!0)}},[h,o.trigger,o.valueNode,l,u,v,g,y,o.dir,i]);db(()=>x(),[x]);const[w,S]=Lt.useState();db(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const C=Lt.useCallback(e=>{e&&!0===m.current&&(x(),null==b||b(),m.current=!1)},[x,b]);return Gt.jsx(I$,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:C,children:Gt.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:Gt.jsx(wb.div,ze(Le({},s),{ref:p,style:Le({boxSizing:"border-box",maxHeight:"100%"},s.style)}))})})});P$.displayName="SelectItemAlignedPosition";var R$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n,align:i="start",collisionPadding:s=S$}=r,o=Fe(r,["__scopeSelect","align","collisionPadding"]),a=l$(n);return Gt.jsx(IW,ze(Le(Le({},a),o),{ref:t,align:i,collisionPadding:s,style:Le(Le({boxSizing:"border-box"},o.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});R$.displayName="SelectPopperPosition";var[I$,k$]=a$(x$,{}),_$="SelectViewport",A$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n,nonce:i}=r,s=Fe(r,["__scopeSelect","nonce"]),o=E$(_$,n),a=k$(_$,n),l=Pv(t,o.onViewportChange),c=Lt.useRef(0);return Gt.jsxs(Gt.Fragment,{children:[Gt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),Gt.jsx(i$.Slot,{scope:n,children:Gt.jsx(wb.div,ze(Le({"data-radix-select-viewport":"",role:"presentation"},s),{ref:l,style:Le({position:"relative",flex:1,overflow:"hidden auto"},s.style),onScroll:lb(s.onScroll,e=>{const t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=a;if((null==n?void 0:n.current)&&r){const e=Math.abs(c.current-t.scrollTop);if(e>0){const n=window.innerHeight-2*S$,i=parseFloat(r.style.minHeight),s=parseFloat(r.style.height),o=Math.max(i,s);if(o<n){const i=o+e,s=Math.min(n,i),a=i-s;r.style.height=s+"px","0px"===r.style.bottom&&(t.scrollTop=a>0?a:0,r.style.justifyContent="flex-end")}}}c.current=t.scrollTop})}))})]})});A$.displayName=_$;var j$="SelectGroup",[O$,D$]=a$(j$);Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n}=r,i=Fe(r,["__scopeSelect"]),s=fb();return Gt.jsx(O$,{scope:n,id:s,children:Gt.jsx(wb.div,ze(Le({role:"group","aria-labelledby":s},i),{ref:t}))})}).displayName=j$;var M$="SelectLabel",L$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n}=r,i=Fe(r,["__scopeSelect"]),s=D$(M$,n);return Gt.jsx(wb.div,ze(Le({id:s.id},i),{ref:t}))});L$.displayName=M$;var z$="SelectItem",[F$,B$]=a$(z$),U$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n,value:i,disabled:s=!1,textValue:o}=r,a=Fe(r,["__scopeSelect","value","disabled","textValue"]),l=u$(z$,n),c=E$(z$,n),u=l.value===i,[d,p]=Lt.useState(null!=o?o:""),[h,f]=Lt.useState(!1),m=Pv(t,e=>{var t;return null==(t=c.itemRefCallback)?void 0:t.call(c,e,i,s)}),v=fb(),g=Lt.useRef("touch"),y=()=>{s||(l.onValueChange(i),l.onOpenChange(!1))};if(""===i)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Gt.jsx(F$,{scope:n,value:i,disabled:s,textId:v,isSelected:u,onItemTextChange:Lt.useCallback(e=>{p(t=>{var r;return t||(null!=(r=null==e?void 0:e.textContent)?r:"").trim()})},[]),children:Gt.jsx(i$.ItemSlot,{scope:n,value:i,disabled:s,textValue:d,children:Gt.jsx(wb.div,ze(Le({role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},a),{ref:m,onFocus:lb(a.onFocus,()=>f(!0)),onBlur:lb(a.onBlur,()=>f(!1)),onClick:lb(a.onClick,()=>{"mouse"!==g.current&&y()}),onPointerUp:lb(a.onPointerUp,()=>{"mouse"===g.current&&y()}),onPointerDown:lb(a.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:lb(a.onPointerMove,e=>{var t;g.current=e.pointerType,s?null==(t=c.onItemLeave)||t.call(c):"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:lb(a.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=c.onItemLeave)||t.call(c))}),onKeyDown:lb(a.onKeyDown,e=>{var t;""!==(null==(t=c.searchRef)?void 0:t.current)&&" "===e.key||(r$.includes(e.key)&&y()," "===e.key&&e.preventDefault())})}))})})});U$.displayName=z$;var W$="SelectItemText",H$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n,className:i,style:s}=r,o=Fe(r,["__scopeSelect","className","style"]),a=u$(W$,n),l=E$(W$,n),c=B$(W$,n),u=p$(W$,n),[d,p]=Lt.useState(null),h=Pv(t,e=>p(e),c.onItemTextChange,e=>{var t;return null==(t=l.itemTextRefCallback)?void 0:t.call(l,e,c.value,c.disabled)}),f=null==d?void 0:d.textContent,m=Lt.useMemo(()=>Gt.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:v,onNativeOptionRemove:g}=u;return db(()=>(v(m),()=>g(m)),[v,g,m]),Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(wb.span,ze(Le({id:c.textId},o),{ref:h})),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?eh.createPortal(o.children,a.valueNode):null]})});H$.displayName=W$;var $$="SelectItemIndicator",V$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n}=r,i=Fe(r,["__scopeSelect"]);return B$($$,n).isSelected?Gt.jsx(wb.span,ze(Le({"aria-hidden":!0},i),{ref:t})):null});V$.displayName=$$;var q$="SelectScrollUpButton",G$=Lt.forwardRef((e,t)=>{const r=E$(q$,e.__scopeSelect),n=k$(q$,e.__scopeSelect),[i,s]=Lt.useState(!1),o=Pv(t,n.onScrollButtonChange);return db(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?Gt.jsx(Y$,ze(Le({},e),{ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});G$.displayName=q$;var K$="SelectScrollDownButton",J$=Lt.forwardRef((e,t)=>{const r=E$(K$,e.__scopeSelect),n=k$(K$,e.__scopeSelect),[i,s]=Lt.useState(!1),o=Pv(t,n.onScrollButtonChange);return db(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,r=Math.ceil(t.scrollTop)<e;s(r)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?Gt.jsx(Y$,ze(Le({},e),{ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});J$.displayName=K$;var Y$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n,onAutoScroll:i}=r,s=Fe(r,["__scopeSelect","onAutoScroll"]),o=E$("SelectScrollButton",n),a=Lt.useRef(null),l=s$(n),c=Lt.useCallback(()=>{null!==a.current&&(window.clearInterval(a.current),a.current=null)},[]);return Lt.useEffect(()=>()=>c(),[c]),db(()=>{var e;const t=l().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[l]),Gt.jsx(wb.div,ze(Le({"aria-hidden":!0},s),{ref:t,style:Le({flexShrink:0},s.style),onPointerDown:lb(s.onPointerDown,()=>{null===a.current&&(a.current=window.setInterval(i,50))}),onPointerMove:lb(s.onPointerMove,()=>{var e;null==(e=o.onItemLeave)||e.call(o),null===a.current&&(a.current=window.setInterval(i,50))}),onPointerLeave:lb(s.onPointerLeave,()=>{c()})}))}),Z$=Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n}=r,i=Fe(r,["__scopeSelect"]);return Gt.jsx(wb.div,ze(Le({"aria-hidden":!0},i),{ref:t}))});Z$.displayName="SelectSeparator";var Q$="SelectArrow";Lt.forwardRef((e,t)=>{const r=e,{__scopeSelect:n}=r,i=Fe(r,["__scopeSelect"]),s=l$(n),o=u$(Q$,n),a=E$(Q$,n);return o.open&&"popper"===a.position?Gt.jsx(kW,ze(Le(Le({},s),i),{ref:t})):null}).displayName=Q$;var X$=Lt.forwardRef((e,t)=>{var r=e,{__scopeSelect:n,value:i}=r,s=Fe(r,["__scopeSelect","value"]);const o=Lt.useRef(null),a=Pv(t,o),l=cF(i);return Lt.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(l!==i&&r){const t=new Event("change",{bubbles:!0});r.call(e,i),e.dispatchEvent(t)}},[l,i]),Gt.jsx(wb.select,ze(Le({},s),{style:Le(Le({},Yw),s.style),ref:a,defaultValue:i}))});function eV(e){return""===e||void 0===e}function tV(e){const t=Cb(e),r=Lt.useRef(""),n=Lt.useRef(0),i=Lt.useCallback(e=>{const i=r.current+e;t(i),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),s=Lt.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return Lt.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function rV(e,t,r){const n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let s=(o=e,a=Math.max(i,0),o.map((e,t)=>o[(a+t)%o.length]));var o,a;1===n.length&&(s=s.filter(e=>e!==r));const l=s.find(e=>e.textValue.toLowerCase().startsWith(n.toLowerCase()));return l!==r?l:void 0}X$.displayName="SelectBubbleInput";var nV=m$,iV=y$,sV=b$,oV=w$,aV=A$,lV=L$,cV=U$,uV=H$,dV=V$,pV=G$,hV=J$,fV=Z$;const mV=h$,vV=g$,gV=Lt.forwardRef((e,t)=>{var r=e,{className:n,children:i}=r,s=Fe(r,["className","children"]);return Gt.jsxs(nV,ze(Le({ref:t,className:zg("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n)},s),{children:[i,Gt.jsx(iV,{asChild:!0,children:Gt.jsx(Xg,{className:"h-4 w-4 opacity-50"})})]}))});gV.displayName=nV.displayName;const yV=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(pV,ze(Le({ref:t,className:zg("flex cursor-default items-center justify-center py-1",n)},i),{children:Gt.jsx(ry,{className:"h-4 w-4"})}))});yV.displayName=pV.displayName;const bV=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(hV,ze(Le({ref:t,className:zg("flex cursor-default items-center justify-center py-1",n)},i),{children:Gt.jsx(Xg,{className:"h-4 w-4"})}))});bV.displayName=hV.displayName;const xV=Lt.forwardRef((e,t)=>{var r=e,{className:n,children:i,position:s="popper"}=r,o=Fe(r,["className","children","position"]);return Gt.jsx(sV,{children:Gt.jsxs(oV,ze(Le({ref:t,className:zg("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:s},o),{children:[Gt.jsx(yV,{}),Gt.jsx(aV,{className:zg("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),Gt.jsx(bV,{})]}))})});xV.displayName=oV.displayName;Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(lV,Le({ref:t,className:zg("py-1.5 pl-8 pr-2 text-sm font-semibold",n)},i))}).displayName=lV.displayName;const wV=Lt.forwardRef((e,t)=>{var r=e,{className:n,children:i}=r,s=Fe(r,["className","children"]);return Gt.jsxs(cV,ze(Le({ref:t,className:zg("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n)},s),{children:[Gt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Gt.jsx(dV,{children:Gt.jsx(Qg,{className:"h-4 w-4"})})}),Gt.jsx(uV,{children:i})]}))});wV.displayName=cV.displayName;Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(fV,Le({ref:t,className:zg("-mx-1 my-1 h-px bg-muted",n)},i))}).displayName=fV.displayName;const SV=Object.freeze(Object.defineProperty({__proto__:null,default:function(){var e,t,r,n,i,s,o,a,l,c,u,d,p,h,f,m;const{user:v}=sv(),[g,y]=Lt.useState(!1),[b,x]=Lt.useState(!1),[w,S]=Lt.useState(!1),[C,E]=Lt.useState([]),[T,N]=Lt.useState([]),[P,R]=Lt.useState(1),[I,k]=Lt.useState(1),[_,A]=Lt.useState({machineTypes:[],machines:[]}),[j,O]=Lt.useState({machineType:"",machineNumber:"",searchText:"",searchDate:""}),[D,M]=Lt.useState(new Set),[L,z]=Lt.useState(null),[F,B]=Lt.useState(null),[U,W]=Lt.useState(!1),H=()=>Ke(this,null,function*(){try{console.log(" "),y(!0),yield Promise.all([q().catch(e=>{console.error(":",e)}),$().catch(e=>{console.error(":",e)})])}catch(e){console.error(":",e)}finally{y(!1)}}),$=()=>Ke(this,null,function*(){try{x(!0),console.log(" ");const{buildApiUrl:e}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),t=yield fetch(e("/history/machine-data"));console.log(" API:",t.status,t.statusText);const r=yield t.json();if(console.log(" API:",r),r.success&&r.machineTypes&&r.machines){const e=new Set,t=[],n=new Set,i=[];r.machines.forEach(r=>{r.machineTypeName&&!e.has(r.machineTypeName)&&(e.add(r.machineTypeName),t.push({id:r.machineTypeName,machineTypeName:r.machineTypeName})),r.machineNumber&&!n.has(r.machineNumber)&&(n.add(r.machineNumber),i.push({id:r.machineNumber,machineNumber:r.machineNumber,machineTypeName:r.machineTypeName}))}),t.sort((e,t)=>e.machineTypeName.localeCompare(t.machineTypeName)),i.sort((e,t)=>e.machineNumber.localeCompare(t.machineNumber)),A({machineTypes:t,machines:i}),console.log(" setMachineData")}else console.warn(":",r),A({machineTypes:[],machines:[]})}catch(e){console.error(":",e),A({machineTypes:[],machines:[]})}finally{x(!1)}}),V=()=>Ke(this,null,function*(){try{S(!0),console.log(" jsonData");const e=new Set,t=new Set;C.forEach(r=>{var n,i;const s=r.machineType||(null==(n=r.jsonData)?void 0:n.machineType)||"";s&&e.add(s);const o=r.machineNumber||(null==(i=r.jsonData)?void 0:i.machineNumber)||"";o&&t.add(o)});const r=Array.from(e).sort(),n=Array.from(t).sort();A({machineTypes:r.map((e,t)=>({id:`json-${t}`,machineTypeName:e})),machines:n.map((e,t)=>({id:`json-${t}`,machineNumber:e,machineTypeName:""}))}),console.log(" jsonData:",{machineTypes:r.length,machineNumbers:n.length})}catch(e){console.error(":",e)}finally{S(!1)}}),q=(e=1)=>Ke(this,null,function*(){var t,r;try{y(!0),console.log(" ");const{buildApiUrl:n}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),i=n("/history");console.log(" APIURL:",i);const s=yield fetch(i);if(console.log(" :",s.status,s.statusText),!s.ok){const e=yield s.text();throw console.error(" API:",s.status,e),new Error(`API: ${s.status} ${s.statusText}`)}const o=yield s.json();console.log(" :",o),console.log(" :",{success:o.success,hasItems:!!o.items,hasData:!!o.data,itemsLength:null==(t=o.items)?void 0:t.length,dataLength:null==(r=o.data)?void 0:r.length,total:o.total});let a=[];Array.isArray(o)?(a=o,console.log(" :",a.length,"")):o&&o.success&&Array.isArray(o.data)?(a=o.data,console.log(" success:",a.length,"")):o&&Array.isArray(o.data)?(a=o.data,console.log(" data:",a.length,"")):o&&o.items&&Array.isArray(o.items)?(a=o.items,console.log(" items:",a.length,"")):(console.warn(" :",o),a=[]),console.log(" :",a.length),console.log(" :",a[0]);const l=a.map(e=>{var t,r;return{id:e.id||e.chatId,chatId:e.chatId||e.id,fileName:e.fileName||e.name||`${e.title}_${e.id}.json`,title:e.title||"",machineType:e.machineType||(null==(t=e.machineInfo)?void 0:t.machineTypeName)||"Unknown",machineNumber:e.machineNumber||(null==(r=e.machineInfo)?void 0:r.machineNumber)||"Unknown",createdAt:e.createdAt||e.exportTimestamp||(new Date).toISOString(),lastModified:e.updatedAt||e.createdAt||e.exportTimestamp||(new Date).toISOString(),extractedComponents:e.extractedComponents||e.keywords||[],extractedSymptoms:e.extractedSymptoms||[],possibleModels:e.possibleModels||[],machineInfo:e.machineInfo||{machineTypeName:e.machineType,machineNumber:e.machineNumber},description:e.description||e.problemDescription||"",userId:e.userId||"system",sessionId:e.chatId||e.id,conversationData:e.conversationHistory||[],tags:e.tags||[],images:e.images||e.savedImages||[],jsonData:e.jsonData||{title:e.title,problemDescription:e.description||e.problemDescription,machineType:e.machineType,machineNumber:e.machineNumber,conversationHistory:e.conversationHistory||[],savedImages:e.savedImages||e.images||[],metadata:e.metadata||{}},metadata:Le({source:"history-file",originalFile:e.fileName||e.name},e.metadata)}});E(l),N(l),R(e),k(Math.max(1,Math.ceil(l.length/20))),console.log(" :",{totalItems:l.length,currentPage:e,totalPages:Math.max(1,Math.ceil(l.length/20)),firstItem:l[0]})}catch(n){console.error(" :",n),E([]),N([]),k(1)}finally{y(!1)}});Lt.useEffect(()=>{console.log("  - "),H()},[]),Lt.useEffect(()=>{C.length>0&&V()},[C]),Lt.useEffect(()=>{if(!C.length)return;let e=[...C];if(j.machineType&&"all"!==j.machineType&&(e=e.filter(e=>{var t;return(e.machineType||(null==(t=e.jsonData)?void 0:t.machineType)||"")===j.machineType})),j.machineNumber&&"all"!==j.machineNumber&&(e=e.filter(e=>{var t;return(e.machineNumber||(null==(t=e.jsonData)?void 0:t.machineNumber)||"")===j.machineNumber})),j.searchText){const t=j.searchText.toLowerCase().split(" ").filter(e=>e.trim());e=e.filter(e=>{const r=e.jsonData||{},n=[e.title,r.title,r.question,r.problemDescription,r.answer,r.remarks,r.location,r.status,...Array.isArray(r.extractedComponents)?r.extractedComponents:[],...Array.isArray(r.extractedSymptoms)?r.extractedSymptoms:[],...Array.isArray(r.possibleModels)?r.possibleModels:[],...Array.isArray(e.extractedComponents)?e.extractedComponents:[],...Array.isArray(e.extractedSymptoms)?e.extractedSymptoms:[],...Array.isArray(e.possibleModels)?e.possibleModels:[],e.machineType,e.machineNumber,r.machineType,r.machineNumber].filter(Boolean).map(e=>String(e)).join(" ").toLowerCase();return t.every(e=>n.includes(e))})}j.searchDate&&(e=e.filter(e=>{const t=new Date(e.createdAt),r=new Date(j.searchDate);return t.toDateString()===r.toDateString()})),N(e),R(1),k(Math.ceil(e.length/20))},[j,C]);const G=(e,t)=>{O(r=>ze(Le({},r),{[e]:t}))},K=(e,t)=>Ke(this,null,function*(){const r=t||e;if(window.confirm(`${r}\n\n`))try{console.log(" :",e);const{buildApiUrl:t}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),r=yield fetch(t(`/history/${e}`),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"}),n=yield r.json();if(!n.success)throw new Error(n.error||"");console.log(" :",n),alert(`\nJSON: ${n.deletedFile}\n: ${n.deletedImages}`),yield q(P)}catch(n){console.error(" :",n),alert(`: ${n.message||n}`)}}),J=(e,t)=>{if(t)return t;if(!e)return"";const r=e.match(/^([^_]+)/);return r?r[1]:e},Y=e=>Ke(this,null,function*(){var t,r,n,i,s,o,a,l,c,u,d,p,h,f,m,v;try{console.log("",e);let g=e.id||e.chatId;if(!g)return void alert("ID");if(g.startsWith("export_")){g=g.replace("export_",""),g.endsWith(".json")&&(g=g.replace(".json",""));const e=g.split("_");e.length>=2&&e[1].match(/^[a-f0-9-]+$/)&&(g=e[1])}const y={updatedData:ze(Le(Le(Le(Le(Le(Le(Le(Le(Le(Le(Le(Le(Le({},(null==(t=e.jsonData)?void 0:t.title)&&{title:e.jsonData.title}),(null==(r=e.jsonData)?void 0:r.problemDescription)&&{problemDescription:e.jsonData.problemDescription}),(null==(n=e.jsonData)?void 0:n.answer)&&{answer:e.jsonData.answer}),(null==(i=e.jsonData)?void 0:i.machineType)&&{machineType:e.jsonData.machineType}),(null==(s=e.jsonData)?void 0:s.machineNumber)&&{machineNumber:e.jsonData.machineNumber}),(null==(o=e.jsonData)?void 0:o.repairSchedule)&&{repairSchedule:e.jsonData.repairSchedule}),(null==(a=e.jsonData)?void 0:a.location)&&{location:e.jsonData.location}),(null==(l=e.jsonData)?void 0:l.status)&&{status:e.jsonData.status}),(null==(c=e.jsonData)?void 0:c.remarks)&&{remarks:e.jsonData.remarks}),(null==(u=e.jsonData)?void 0:u.savedImages)&&{savedImages:e.jsonData.savedImages}),e.machineType&&{machineType:e.machineType}),e.machineNumber&&{machineNumber:e.machineNumber}),(null==(d=e.jsonData)?void 0:d.title)&&{title:e.jsonData.title}),{lastModified:(new Date).toISOString()}),updatedBy:"user"},b=yield fetch(`/api/history/update-item/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!b.ok){const e=yield b.text();let t=` (${b.status})`;try{t=JSON.parse(e).error||t}catch(Nie){t+=": "+e}return void alert(t)}const x=yield b.json();console.log("",x);const w=ze(Le({},e),{jsonData:e.jsonData,lastModified:(new Date).toISOString(),machineType:(null==(p=e.jsonData)?void 0:p.machineType)||e.machineType,machineNumber:(null==(h=e.jsonData)?void 0:h.machineNumber)||e.machineNumber,title:(null==(f=e.jsonData)?void 0:f.title)||e.title,incidentTitle:(null==(m=e.jsonData)?void 0:m.title)||e.incidentTitle,savedImages:(null==(v=e.jsonData)?void 0:v.savedImages)||[]});E(e=>e.map(e=>e.id===g||e.chatId===g?w:e)),N(e=>e.map(e=>e.id===g||e.chatId===g?w:e)),alert(""),W(!1),z(null),B(null),q(P)}catch(g){console.error(":",g);const e=g instanceof Error?g.message:"Unknown error";alert(": "+e)}}),Z=()=>{((e,t)=>{if(!e||!t)return!1;if(e.machineType!==t.machineType)return!0;if(e.machineNumber!==t.machineNumber)return!0;const r=e.jsonData||{},n=t.jsonData||{};if(r.title!==n.title)return!0;if(r.question!==n.question)return!0;if(r.problemDescription!==n.problemDescription)return!0;if(r.answer!==n.answer)return!0;if(r.location!==n.location)return!0;if(r.repairSchedule!==n.repairSchedule)return!0;if(r.remarks!==n.remarks)return!0;const i=r.savedImages||[],s=n.savedImages||[];if(i.length!==s.length)return!0;const o=i.map(e=>"string"==typeof e?e:e.fileName||e.url||e.path||"").sort(),a=s.map(e=>"string"==typeof e?e:e.fileName||e.url||e.path||"").sort();return JSON.stringify(o)!==JSON.stringify(a)})(L,F)?window.confirm("")&&(W(!1),z(null),B(null)):(W(!1),z(null),B(null))};return Gt.jsxs("div",{className:"mx-auto p-6",style:{maxWidth:"2168px",width:"100%"},children:[Gt.jsxs("div",{className:"mb-6",children:[Gt.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:""}),Gt.jsx("p",{className:"text-gray-600 mt-2",children:""})]}),Gt.jsxs(IL,{className:"mb-6",children:[Gt.jsx(kL,{children:Gt.jsx(_L,{children:""})}),Gt.jsxs(jL,{className:"space-y-4",children:[Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Gt.jsxs(mV,{value:j.machineType,onValueChange:e=>G("machineType",e),children:[Gt.jsx(gV,{children:Gt.jsx(vV,{placeholder:""})}),Gt.jsxs(xV,{children:[Gt.jsx(wV,{value:"all",children:""}),(null==(t=null==(e=null==_?void 0:_.machineTypes)?void 0:e.map)?void 0:t.call(e,e=>Gt.jsx(wV,{value:e.machineTypeName,children:e.machineTypeName},e.id)))||[]]})]})]}),Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Gt.jsxs(mV,{value:j.machineNumber,onValueChange:e=>G("machineNumber",e),children:[Gt.jsx(gV,{children:Gt.jsx(vV,{placeholder:""})}),Gt.jsxs(xV,{children:[Gt.jsx(wV,{value:"all",children:""}),(null==(n=null==(r=null==_?void 0:_.machines)?void 0:r.map)?void 0:n.call(r,e=>Gt.jsx(wV,{value:e.machineNumber,children:e.machineNumber},e.id)))||[]]})]})]}),Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Gt.jsx(KL,{type:"date",value:j.searchDate,onChange:e=>G("searchDate",e.target.value)})]})]}),Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Gt.jsx("textarea",{placeholder:"jsonData",value:j.searchText,onChange:e=>G("searchText",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md resize-none",style:{width:"98ch",minHeight:"4.5rem",maxHeight:"4.5rem",lineHeight:"1.25rem",fontFamily:"inherit",fontSize:"0.875rem"},rows:2})]}),Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsx(Bg,{onClick:()=>{console.log(" :",j)},className:"bg-blue-600 hover:bg-blue-700",children:" "}),Gt.jsx(Bg,{variant:"outline",onClick:()=>{O({machineType:"",machineNumber:"",searchText:"",searchDate:""})},children:""})]})]})]}),Gt.jsxs(IL,{children:[Gt.jsx(kL,{children:Gt.jsxs(_L,{children:[" (",T.length,")"]})}),Gt.jsx(jL,{children:g?Gt.jsxs("div",{className:"flex justify-center items-center p-8",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),Gt.jsx("span",{className:"ml-2",children:"..."})]}):0===T.length?Gt.jsxs("div",{className:"text-center p-8 text-gray-500",children:[Gt.jsx("p",{children:""}),Gt.jsx("p",{className:"text-sm mt-2",children:""})]}):Gt.jsx("div",{className:"overflow-auto",children:Gt.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-sm",children:[Gt.jsx("thead",{children:Gt.jsxs("tr",{className:"bg-gray-100",children:[Gt.jsx("th",{className:"border border-gray-300 p-3 text-center text-sm font-medium",style:{width:"50px"},children:Gt.jsx("input",{type:"checkbox",checked:T.length>0&&T.slice(20*(P-1),20*P).every(e=>D.has(e.id)),onChange:e=>(e=>{if(e){const e=T.slice(20*(P-1),20*P).map(e=>e.id);M(new Set(e))}else M(new Set)})(e.target.checked),className:"cursor-pointer",style:{width:"25px",height:"25px"}})}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-center text-sm font-medium",children:""}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-center text-sm font-medium",children:""})]})}),Gt.jsx("tbody",{children:T.slice(20*(P-1),20*P).map(e=>Gt.jsxs("tr",{className:"hover:bg-gray-50",children:[Gt.jsx("td",{className:"border border-gray-300 p-3 text-center",children:Gt.jsx("input",{type:"checkbox",checked:D.has(e.id),onChange:t=>{return r=e.id,n=t.target.checked,void M(e=>{const t=new Set(e);return n?t.add(r):t.delete(r),t});var r,n},className:"cursor-pointer",style:{width:"25px",height:"25px"}})}),Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsx("div",{className:"font-medium text-gray-900",children:J(e.fileName,e.title)})}),Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsx(vB,{variant:"outline",className:"text-xs",children:e.machineType||"Unknown"})}),Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsx(vB,{variant:"outline",className:"text-xs",children:e.machineNumber||"Unknown"})}),Gt.jsxs("td",{className:"border border-gray-300 p-3",children:[Gt.jsx("div",{className:"text-sm text-gray-700",children:new Date(e.createdAt).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"})}),Gt.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})})]}),Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsx("div",{className:"flex justify-center gap-1 flex-wrap",children:e.images&&e.images.length>0?Gt.jsxs(Gt.Fragment,{children:[e.images.slice(0,3).map((e,t)=>{let r="",n="";if(e.fileName){n=e.fileName;const t=n.includes("/")?n.split("/").pop():n.includes("\\")?n.split("\\").pop():n;r=`/api/images/chat-exports/${t}`}else if(e.url)r=e.url,n=e.originalFileName||`${t+1}`;else{if(!e.path)return null;{const i=e.path.split(/[/\\]/);n=i[i.length-1]||`${t+1}`,r=`/api/images/chat-exports/${n}`}}return r?Gt.jsx("img",{src:r,alt:n,className:"w-12 h-12 object-cover rounded border border-gray-300 cursor-pointer hover:opacity-80",onError:e=>{const t=`/api/fault-history/images/${n}`;e.target.src=t},onClick:()=>{window.open(r,"_blank")},title:n},t):null}),e.images.length>3&&Gt.jsxs("div",{className:"w-12 h-12 flex items-center justify-center bg-gray-100 rounded border border-gray-300 text-xs text-gray-500",children:["+",e.images.length-3]})]}):Gt.jsx("span",{className:"text-xs text-gray-400",children:""})})}),Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsxs("div",{className:"flex justify-center gap-1",children:[Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>{const t=JSON.parse(JSON.stringify(e));z(e),B(t),W(!0)},className:"px-3 text-sm text-blue-600 hover:text-blue-700 hover:bg-blue-50",style:{height:"42px"},children:""}),Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>K(e.id,e.title),className:"px-3 text-sm text-red-600 hover:text-red-700 hover:bg-red-50",style:{height:"42px"},children:""})]})})]},e.id))})]})})})]}),Gt.jsxs(IL,{className:"mt-6",children:[Gt.jsx(kL,{children:Gt.jsx(_L,{children:""})}),Gt.jsx(jL,{children:Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsxs(Bg,{variant:"outline",disabled:0===D.size,onClick:()=>Ke(this,null,function*(){if(0===D.size)return void alert("");const e=Array.from(D);console.log(":",e),alert(`${e.length}`)}),children:[" (",D.size,")"]}),Gt.jsxs(Bg,{variant:"outline",disabled:0===T.length,onClick:()=>Ke(this,null,function*(){0!==T.length?(console.log(":",T.length,""),alert(`${T.length}`)):alert("")}),children:[" (",T.length,")"]})]})})]}),I>1&&Gt.jsx("div",{className:"mt-6 flex justify-center",children:Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsx(Bg,{variant:"outline",disabled:1===P,onClick:()=>R(P-1),children:""}),Gt.jsxs("span",{className:"px-3 py-2 text-sm",children:[P," / ",I]}),Gt.jsx(Bg,{variant:"outline",disabled:P===I,onClick:()=>R(P+1),children:""})]})}),U&&L&&Gt.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Gt.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:Gt.jsxs("div",{className:"p-6",children:[Gt.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Gt.jsx("h2",{className:"text-xl font-bold",children:""}),Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsxs(Bg,{onClick:()=>{console.log("",L),Y(L)},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",children:[Gt.jsx(My,{className:"h-4 w-4"}),""]}),Gt.jsxs(Bg,{onClick:()=>{L&&(e=>{var t,r,n,i,s,o,a,l,c,u,d,p,h;console.log(" ",e);const f=window.open("","_blank");if(!f)return console.error(" "),void alert("");let m=e.jsonData;if("string"==typeof m)try{m=JSON.parse(m)}catch(Nie){console.error("JSON",Nie),m={}}let v=(null==(t=e.jsonData)?void 0:t.title)||(null==(r=e.jsonData)?void 0:r.question)||"";if((!v||""===v.trim())&&e.fileName){const t=e.fileName.indexOf("_");v=t>0?e.fileName.substring(0,t):e.fileName.replace(/\.json$/,"")}let g=(null==(n=e.jsonData)?void 0:n.problemDescription)||(null==(i=e.jsonData)?void 0:i.answer)||"";if(!g&&(null==(s=null==m?void 0:m.chatData)?void 0:s.messages)){const e=m.chatData.messages.filter(e=>!e.isAiResponse&&e.content&&!e.content.startsWith("data:image/")&&!e.content.startsWith("/api/images/")).map(e=>e.content).join("\n");e&&(g=e)}g||(g="");const y=(null==(o=e.jsonData)?void 0:o.machineType)||(null==m?void 0:m.machineType)||e.machineType||"",b=(null==(a=e.jsonData)?void 0:a.machineNumber)||(null==m?void 0:m.machineNumber)||e.machineNumber||"",x=(null==(l=e.jsonData)?void 0:l.location)||(null==m?void 0:m.location)||"";let w="";if((null==m?void 0:m.savedImages)&&Array.isArray(m.savedImages)&&m.savedImages.length>0){const t=m.savedImages[0],r="string"==typeof t?t:t.url||t.path||t.fileName;if(r&&!r.startsWith("data:image/")){if(r.startsWith("http"))w=r;else if(r.startsWith("/")){let e=window.location.origin;e=e.replace(/\/api\/?$/,"").replace(/\/$/,""),w=`${e}${r.startsWith("/api")?r:`/api${r}`}`}else{const e=`/api/images/chat-exports/${r}`;let t=window.location.origin;t=t.replace(/\/api\/?$/,"").replace(/\/$/,""),w=`${t}${e}`}"object"==typeof t&&t.fileName||e.id}}if(!w&&e.images&&Array.isArray(e.images)&&e.images.length>0){const t=e.images[0],r="string"==typeof t?t:t.url||t.path||t.fileName;if(r&&!r.startsWith("data:image/")){if(r.startsWith("http"))w=r;else{const e=`/api/images/chat-exports/${r}`;let t=window.location.origin;t=t.replace(/\/api\/?$/,"").replace(/\/$/,""),w=`${t}${e}`}e.id}}const S=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title> - </title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }\n          .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }\n          .header h1 { margin: 0; color: #333; font-size: 24px; }\n          .header p { margin: 5px 0; color: #666; }\n          .section { margin-bottom: 25px; }\n          .section h2 { color: #333; border-bottom: 1px solid #ddd; padding-bottom: 5px; }\n          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }\n          .info-item { padding: 10px; background-color: #f9f9f9; border-radius: 5px; }\n          .info-item strong { display: block; margin-bottom: 5px; color: #333; }\n          .content-box { background-color: #f9f9f9; padding: 15px; border-radius: 5px; margin-top: 10px; }\n          .image-section { text-align: center; margin: 20px 0; }\n          .image-section img { max-width: 100%; max-height: 300px; border: 1px solid #ddd; border-radius: 5px; }\n          @media print {\n            .no-print { display: none; }\n            body {\n              margin: 0;\n              font-size: 10px;\n              line-height: 1.2;\n            }\n            .header h1 {\n              font-size: 16px;\n              margin: 5px 0;\n            }\n            .header p {\n              font-size: 8px;\n              margin: 2px 0;\n            }\n            .section {\n              margin: 8px 0;\n              page-break-inside: avoid;\n            }\n            .section h2 {\n              font-size: 12px;\n              margin: 5px 0;\n            }\n            .info-grid {\n              gap: 4px;\n            }\n            .info-item {\n              font-size: 9px;\n              padding: 2px;\n            }\n            .content-box {\n              font-size: 9px;\n              line-height: 1.1;\n            }\n            .image-section {\n              margin: 8px 0;\n            }\n            .image-section img {\n              max-height: 150px;\n            }\n            @page {\n              size: A4;\n              margin: 10mm;\n            }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1></h1>\n          <p>: ${(new Date).toLocaleString("ja-JP")}</p>\n        </div>\n\n        <div class="section">\n          <h2></h2>\n          <div class="info-grid">\n            <div class="info-item">\n              <strong>ID</strong>\n              R${e.id.slice(-5).toUpperCase()}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${y||"-"}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${b||"-"}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${e.createdAt?new Date(e.createdAt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0]}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${x}\n            </div>\n          </div>\n        </div>\n\n        <div class="section">\n          <h2></h2>\n          <div class="info-grid">\n            <div class="info-item">\n              <strong></strong>\n              ${v||"-"}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${(null==(c=e.jsonData)?void 0:c.status)||"-"}\n            </div>\n          </div>\n          <div class="content-box">\n            <strong></strong>\n            <p>${g||""}</p>\n          </div>\n          <div class="content-box">\n            <strong></strong>\n            <p>${(null==(u=e.jsonData)?void 0:u.remarks)||(null==m?void 0:m.remarks)||"-"}</p>\n          </div>\n        </div>\n\n        ${w?`\n        <div class="section">\n          <h2></h2>\n          <div class="image-section">\n            <p></p>\n            <img src="${w}" alt="" />\n            <p style="font-size: 12px; color: #666;"></p>\n          </div>\n        </div>\n        `:""}\n\n        <div class="section">\n          <h2></h2>\n          <div class="info-grid">\n            <div class="info-item">\n              <strong></strong>\n              ${(null==(d=e.jsonData)?void 0:d.repairSchedule)||(null==m?void 0:m.repairSchedule)||"-"}\n            </div>\n            <div class="info-item">\n              <strong></strong>\n              ${(null==(p=e.jsonData)?void 0:p.location)||(null==m?void 0:m.location)||"-"}\n            </div>\n          </div>\n        </div>\n\n        <div class="section">\n          <h2></h2>\n          <div class="content-box">\n            <p>${(null==(h=e.jsonData)?void 0:h.remarks)||(null==m?void 0:m.remarks)||""}</p>\n          </div>\n        </div>\n\n        <div class="section">\n          <p style="text-align: center; color: #666; font-size: 12px;">\n             2025 . All rights reserved.\n          </p>\n        </div>\n\n        <div class="no-print" style="margin-top: 30px; text-align: center;">\n          <button onclick="window.print()" style="padding: 10px 20px; margin: 5px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;"></button>\n          <button onclick="window.close()" style="padding: 10px 20px; margin: 5px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;"></button>\n        </div>\n      </body>\n      </html>\n    `;try{f.document.write(S),f.document.close()}catch(C){console.error(" document.write():",C);try{f.document.open(),f.document.write(S),f.document.close()}catch(E){return console.error(" :",E),void alert("")}}f.onload=()=>{f.focus(),setTimeout(()=>{f.print()},1e3)},setTimeout(()=>{f&&!f.closed&&(f.focus(),f.print())},2e3)})(L)},className:"flex items-center gap-2",children:[Gt.jsx(Oy,{className:"h-4 w-4"}),""]}),Gt.jsx(Bg,{variant:"outline",onClick:Z,children:""}),Gt.jsx(Bg,{variant:"ghost",size:"sm",onClick:Z,children:Gt.jsx(ob,{className:"h-4 w-4"})})]})]}),Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[Gt.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[Gt.jsx(By,{className:"h-5 w-5"}),""]}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Gt.jsxs(mV,{value:L.machineType||"",onValueChange:e=>{z(ze(Le({},L),{machineType:e,jsonData:ze(Le({},L.jsonData),{machineType:e})}))},children:[Gt.jsx(gV,{children:Gt.jsx(vV,{placeholder:L.machineType?L.machineType:""})}),Gt.jsxs(xV,{children:[L.machineType&&Gt.jsxs(wV,{value:L.machineType,children:[L.machineType," ()"]}),(null==(s=null==(i=_.machineTypes)?void 0:i.filter(e=>(null==e?void 0:e.machineTypeName)&&e.machineTypeName!==L.machineType))?void 0:s.map(e=>Gt.jsx(wV,{value:e.machineTypeName||"",children:e.machineTypeName||""},e.id||`machine-type-${Date.now()}-${Math.random()}`)))||[]]})]})]}),Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Gt.jsxs(mV,{value:L.machineNumber||"",onValueChange:e=>{z(ze(Le({},L),{machineNumber:e,jsonData:ze(Le({},L.jsonData),{machineNumber:e})}))},children:[Gt.jsx(gV,{children:Gt.jsx(vV,{placeholder:L.machineNumber?L.machineNumber:""})}),Gt.jsxs(xV,{children:[L.machineNumber&&Gt.jsxs(wV,{value:L.machineNumber,children:[L.machineNumber," ()"]}),(null==(a=null==(o=_.machines)?void 0:o.filter(e=>(null==e?void 0:e.machineNumber)&&(null==e?void 0:e.machineTypeName)&&(!L.machineType||e.machineTypeName===L.machineType)&&e.machineNumber!==L.machineNumber))?void 0:a.map(e=>Gt.jsxs(wV,{value:e.machineNumber||"",children:[e.machineNumber||""," (",e.machineTypeName||"",")"]},e.id||`machine-${Date.now()}-${Math.random()}`)))||[]]})]})]}),Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Gt.jsx(KL,{value:L.fileName||"",onChange:e=>{z(ze(Le({},L),{fileName:e.target.value}))},placeholder:"",disabled:!0})]})]})]}),Gt.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[Gt.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[Gt.jsx(my,{className:"h-5 w-5"}),Gt.jsx("span",{children:""}),Gt.jsx("span",{className:"text-xs font-normal text-gray-600 ml-auto",children:""})]}),Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Gt.jsx(KL,{value:(()=>{var e,t;if(L.fileName){const e=L.fileName.indexOf("_");return e>0?L.fileName.substring(0,e):L.fileName.replace(/\.json$/,"")}return(null==(e=L.jsonData)?void 0:e.title)||(null==(t=L.jsonData)?void 0:t.question)||""})(),onChange:e=>{z(ze(Le({},L),{jsonData:ze(Le({},L.jsonData),{title:e.target.value,question:e.target.value})}))},placeholder:""})]}),Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Gt.jsx("textarea",{value:(null==(l=L.jsonData)?void 0:l.problemDescription)||(null==(c=L.jsonData)?void 0:c.answer)||"",onChange:e=>{z(ze(Le({},L),{jsonData:ze(Le({},L.jsonData),{problemDescription:e.target.value,answer:e.target.value})}))},className:"w-full h-32 p-3 border border-gray-300 rounded-md",placeholder:""})]}),Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Gt.jsx(KL,{value:(null==(u=L.jsonData)?void 0:u.location)||"",onChange:e=>{z(ze(Le({},L),{jsonData:ze(Le({},L.jsonData),{location:e.target.value})}))},placeholder:""})]})]})]}),Gt.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Gt.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[Gt.jsx(Sy,{className:"h-5 w-5"}),""]}),Gt.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",id:"image-upload-input",onChange:e=>Ke(this,null,function*(){var t;const r=e.target.files;if(!r||0===r.length)return;const n=[];for(let e=0;e<r.length;e++){const t=r[e],s=new FormData;s.append("image",t);try{const e=yield fetch("/api/history/upload-image",{method:"POST",body:s});if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}const t=yield e.json();n.push({fileName:t.fileName,url:t.imageUrl||t.url})}catch(i){console.error(":",i),alert(`: ${i instanceof Error?i.message:"Unknown error"}`)}}if(n.length>0){const e=(null==(t=L.jsonData)?void 0:t.savedImages)||[];z(ze(Le({},L),{jsonData:ze(Le({},L.jsonData),{savedImages:[...n,...e]})}))}e.target.value=""})}),Gt.jsxs(Bg,{type:"button",onClick:()=>{var e;null==(e=document.getElementById("image-upload-input"))||e.click()},className:"text-sm",variant:"outline",children:[Gt.jsx(Zy,{className:"h-4 w-4 mr-1"}),""]})]}),(()=>{const e=(e=>{var t;const r=[];Array.isArray(null==e?void 0:e.savedImages)&&e.savedImages.length>0&&e.savedImages.forEach((e,t)=>{if("string"!=typeof e||e.startsWith("data:image/")){if(e&&"object"==typeof e)if(e.fileName){const n=`/api/images/chat-exports/${e.fileName}`;let i=window.location.origin;i=i.replace(/\/api\/?$/,"").replace(/\/$/,""),r.push({url:`${i}${n}`,fileName:e.fileName,index:t})}else if(e.url){const n=e.url.startsWith("http")?e.url:`http://localhost:8080${e.url}`;r.push({url:n,fileName:e.fileName,index:t})}else if(e.path){const n=e.path.startsWith("http")?e.path:`http://localhost:8080${e.path}`;r.push({url:n,fileName:e.fileName,index:t})}}else r.push({url:e,index:t})}),Array.isArray(null==e?void 0:e.images)&&e.images.length>0&&e.images.forEach((e,t)=>{if("string"==typeof e)r.push({url:e,index:t+1e3});else if(e&&"object"==typeof e){const n=e.url||e.path||e.fileName;if(n&&!n.startsWith("data:image/")){const i=n.startsWith("http")?n:`http://localhost:8080${n}`;r.push({url:i,fileName:e.fileName,index:t+1e3})}}}),Array.isArray(null==(t=null==e?void 0:e.jsonData)?void 0:t.savedImages)&&e.jsonData.savedImages.length>0&&e.jsonData.savedImages.forEach((e,t)=>{if("string"!=typeof e||e.startsWith("data:image/")){if(e&&"object"==typeof e)if(e.fileName){const n=`/api/images/chat-exports/${e.fileName}`;let i=window.location.origin;i=i.replace(/\/api\/?$/,"").replace(/\/$/,""),r.push({url:`${i}${n}`,fileName:e.fileName,index:t+2e3})}else if(e.url){const n=e.url.startsWith("http")?e.url:`http://localhost:8080${e.url}`;r.push({url:n,fileName:e.fileName,index:t+2e3})}}else r.push({url:e,index:t+2e3})});const n=[],i=new Set;return r.forEach(e=>{i.has(e.url)||(i.add(e.url),n.push(e))}),n})(L);return e.length>0?Gt.jsx("div",{className:"grid grid-cols-3 gap-4",children:e.map((e,t)=>Gt.jsxs("div",{className:"relative group",children:[Gt.jsx("img",{src:e.url,alt:`${t+1}`,className:"w-full h-auto max-h-48 object-contain border border-gray-300 rounded-md shadow-sm",onError:t=>{console.error("  ():",e.url),t.target.style.display="none"}}),Gt.jsx(Bg,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{var t;const r=((null==(t=L.jsonData)?void 0:t.savedImages)||[]).filter((t,r)=>(!e.fileName||t.fileName!==e.fileName)&&(t.url!==e.url&&t.path!==e.url));z(ze(Le({},L),{jsonData:ze(Le({},L.jsonData),{savedImages:r})}))},children:Gt.jsx(ob,{className:"h-4 w-4"})})]},t))}):Gt.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:""})})()]}),Gt.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[Gt.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[Gt.jsx(Py,{className:"h-5 w-5"}),""]}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Gt.jsx(KL,{type:"date",value:(null==(d=L.jsonData)?void 0:d.repairSchedule)||"",onChange:e=>{z(ze(Le({},L),{jsonData:ze(Le({},L.jsonData),{repairSchedule:e.target.value})}))},placeholder:""})]}),Gt.jsxs("div",{children:[Gt.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),Gt.jsx(KL,{value:(null==(p=L.jsonData)?void 0:p.location)||"",onChange:e=>{z(ze(Le({},L),{jsonData:ze(Le({},L.jsonData),{location:e.target.value})}))},placeholder:""})]})]})]}),Gt.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[Gt.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[Gt.jsx(my,{className:"h-5 w-5"}),Gt.jsx("span",{children:""}),Gt.jsx("span",{className:"text-xs font-normal text-gray-600 ml-auto",children:"200"})]}),Gt.jsxs("div",{children:[Gt.jsx("textarea",{value:(null==(h=L.jsonData)?void 0:h.remarks)||"",onChange:e=>{e.target.value.length<=200&&z(ze(Le({},L),{jsonData:ze(Le({},L.jsonData),{remarks:e.target.value})}))},className:"w-full h-24 p-3 border border-gray-300 rounded-md",placeholder:"",maxLength:200}),Gt.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(null==(m=null==(f=L.jsonData)?void 0:f.remarks)?void 0:m.length)||0,"/200"]})]})]}),Gt.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[Gt.jsx(Bg,{variant:"outline",onClick:Z,children:""}),Gt.jsx(Bg,{onClick:()=>{console.log("",L),Y(L)},className:"bg-green-600 hover:bg-green-700 text-white",children:""})]})]})]})})})]})}},Symbol.toStringTag,{value:"Module"}));var CV="Checkbox",[EV]=cb(CV),[TV,NV]=EV(CV);function PV(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:i,disabled:s,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=e,[p,h]=vb({prop:r,defaultProp:null!=i&&i,onChange:l,caller:CV}),[f,m]=Lt.useState(null),[v,g]=Lt.useState(null),y=Lt.useRef(!1),b=!f||(!!o||!!f.closest("form")),x={checked:p,disabled:s,setChecked:h,control:f,setControl:m,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:!MV(i)&&i,isFormControl:b,bubbleInput:v,setBubbleInput:g};return Gt.jsx(TV,ze(Le({scope:t},x),{children:DV(d)?d(x):n}))}var RV="CheckboxTrigger",IV=Lt.forwardRef((e,t)=>{var r=e,{__scopeCheckbox:n,onKeyDown:i,onClick:s}=r,o=Fe(r,["__scopeCheckbox","onKeyDown","onClick"]);const{control:a,value:l,disabled:c,checked:u,required:d,setControl:p,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:v}=NV(RV,n),g=Pv(t,p),y=Lt.useRef(u);return Lt.useEffect(()=>{const e=null==a?void 0:a.form;if(e){const t=()=>h(y.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[a,h]),Gt.jsx(wb.button,ze(Le({type:"button",role:"checkbox","aria-checked":MV(u)?"mixed":u,"aria-required":d,"data-state":LV(u),"data-disabled":c?"":void 0,disabled:c,value:l},o),{ref:g,onKeyDown:lb(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:lb(s,e=>{h(e=>!!MV(e)||!e),v&&m&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}))});IV.displayName=RV;var kV=Lt.forwardRef((e,t)=>{const r=e,{__scopeCheckbox:n,name:i,checked:s,defaultChecked:o,required:a,disabled:l,value:c,onCheckedChange:u,form:d}=r,p=Fe(r,["__scopeCheckbox","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]);return Gt.jsx(PV,{__scopeCheckbox:n,checked:s,defaultChecked:o,disabled:l,required:a,onCheckedChange:u,name:i,form:d,value:c,internal_do_not_use_render:({isFormControl:e})=>Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(IV,ze(Le({},p),{ref:t,__scopeCheckbox:n})),e&&Gt.jsx(OV,{__scopeCheckbox:n})]})})});kV.displayName=CV;var _V="CheckboxIndicator",AV=Lt.forwardRef((e,t)=>{const r=e,{__scopeCheckbox:n,forceMount:i}=r,s=Fe(r,["__scopeCheckbox","forceMount"]),o=NV(_V,n);return Gt.jsx(qb,{present:i||MV(o.checked)||!0===o.checked,children:Gt.jsx(wb.span,ze(Le({"data-state":LV(o.checked),"data-disabled":o.disabled?"":void 0},s),{ref:t,style:Le({pointerEvents:"none"},e.style)}))})});AV.displayName=_V;var jV="CheckboxBubbleInput",OV=Lt.forwardRef((e,t)=>{var r=e,{__scopeCheckbox:n}=r,i=Fe(r,["__scopeCheckbox"]);const{control:s,hasConsumerStoppedPropagationRef:o,checked:a,defaultChecked:l,required:c,disabled:u,name:d,value:p,form:h,bubbleInput:f,setBubbleInput:m}=NV(jV,n),v=Pv(t,m),g=cF(a),y=uF(s);Lt.useEffect(()=>{const e=f;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set,n=!o.current;if(g!==a&&r){const t=new Event("click",{bubbles:n});e.indeterminate=MV(a),r.call(e,!MV(a)&&a),e.dispatchEvent(t)}},[f,g,a,o]);const b=Lt.useRef(!MV(a)&&a);return Gt.jsx(wb.input,ze(Le({type:"checkbox","aria-hidden":!0,defaultChecked:null!=l?l:b.current,required:c,disabled:u,name:d,value:p,form:h},i),{tabIndex:-1,ref:v,style:ze(Le(Le({},i.style),y),{position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"})}))});function DV(e){return"function"==typeof e}function MV(e){return"indeterminate"===e}function LV(e){return MV(e)?"indeterminate":e?"checked":"unchecked"}OV.displayName=jV;const zV=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(kV,ze(Le({ref:t,className:zg("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n)},i),{children:Gt.jsx(AV,{className:zg("flex items-center justify-center text-current"),children:Gt.jsx(Qg,{className:"h-4 w-4"})})}))});function FV(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}zV.displayName=kV.displayName;!function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){if(!a&&FV)return FV(o);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){return i(t[o][1][e]||e)},c,c.exports,e,t,r,n)}return r[o].exports}for(var s=FV,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){var n=e("./utils"),i=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,i,o,a,l,c,u=[],d=0,p=e.length,h=p,f="string"!==n.getTypeOf(e);d<e.length;)h=p-d,i=f?(t=e[d++],r=d<p?e[d++]:0,d<p?e[d++]:0):(t=e.charCodeAt(d++),r=d<p?e.charCodeAt(d++):0,d<p?e.charCodeAt(d++):0),o=t>>2,a=(3&t)<<4|r>>4,l=1<h?(15&r)<<2|i>>6:64,c=2<h?63&i:64,u.push(s.charAt(o)+s.charAt(a)+s.charAt(l)+s.charAt(c));return u.join("")},r.decode=function(e){var t,r,n,o,a,l,c=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var p,h=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&h--,e.charAt(e.length-2)===s.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=i.uint8array?new Uint8Array(0|h):new Array(0|h);c<e.length;)t=s.indexOf(e.charAt(c++))<<2|(o=s.indexOf(e.charAt(c++)))>>4,r=(15&o)<<4|(a=s.indexOf(e.charAt(c++)))>>2,n=(3&a)<<6|(l=s.indexOf(e.charAt(c++))),p[u++]=t,64!==a&&(p[u++]=r),64!==l&&(p[u++]=n);return p}},{"./support":30,"./utils":32}],2:[function(e,t,r){var n=e("./external"),i=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function a(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,r){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){var n=e("./utils"),i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var s=i,o=n+r;e^=-1;for(var a=n;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}(0|t,e,e.length,0):function(e,t,r,n){var s=i,o=n+r;e^=-1;for(var a=n;a<o;a++)e=e>>>8^s[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){var n=null;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),a=n?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",s.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new l("Deflate",e)},r.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){function n(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function i(e,t,r,i,o,u){var d,p,h=e.file,f=e.compression,m=u!==a.utf8encode,v=s.transformTo("string",u(h.name)),g=s.transformTo("string",a.utf8encode(h.name)),y=h.comment,b=s.transformTo("string",u(y)),x=s.transformTo("string",a.utf8encode(y)),w=g.length!==h.name.length,S=x.length!==y.length,C="",E="",T="",N=h.dir,P=h.date,R={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(R.crc32=e.crc32,R.compressedSize=e.compressedSize,R.uncompressedSize=e.uncompressedSize);var I=0;t&&(I|=8),m||!w&&!S||(I|=2048);var k,_,A,j=0,O=0;N&&(j|=16),"UNIX"===o?(O=798,j|=(k=h.unixPermissions,_=N,A=k,k||(A=_?16893:33204),(65535&A)<<16)):(O=20,j|=function(e){return 63&(e||0)}(h.dosPermissions)),d=P.getUTCHours(),d<<=6,d|=P.getUTCMinutes(),d<<=5,d|=P.getUTCSeconds()/2,p=P.getUTCFullYear()-1980,p<<=4,p|=P.getUTCMonth()+1,p<<=5,p|=P.getUTCDate(),w&&(E=n(1,1)+n(l(v),4)+g,C+="up"+n(E.length,2)+E),S&&(T=n(1,1)+n(l(b),4)+x,C+="uc"+n(T.length,2)+T);var D="";return D+="\n\0",D+=n(I,2),D+=f.magic,D+=n(d,2),D+=n(p,2),D+=n(R.crc32,4),D+=n(R.compressedSize,4),D+=n(R.uncompressedSize,4),D+=n(v.length,2),D+=n(C.length,2),{fileRecord:c.LOCAL_FILE_HEADER+D+v+C,dirRecord:c.CENTRAL_FILE_HEADER+n(O,2)+D+n(b.length,2)+"\0\0\0\0"+n(j,4)+n(i,4)+v+C+b}}var s=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,r,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(u,o),u.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t,r=this.streamFiles&&!e.file.dir,s=i(e,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),r)this.push({data:(t=e,c.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r,i,o,a,l,u,d=this.bytesWritten-e,p=(r=this.dirRecords.length,i=d,o=e,a=this.zipComment,l=this.encodeFileName,u=s.transformTo("string",l(a)),c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(r,2)+n(r,2)+n(i,4)+n(o,4)+n(u.length,2)+u);this.push({data:p,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(n){}return!0},u.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){var n=e("../compressions"),i=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var s=new i(t.streamFiles,r,t.platform,t.encodeFileName),o=0;try{e.forEach(function(e,r){o++;var i=function(e,t){var r=e||t,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,t.compression),a=r.options.compressionOptions||t.compressionOptions||{},l=r.dir,c=r.date;r._compressWorker(i,a).withStreamInfo("file",{name:e,dir:l,date:c,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(s)}),s.entriesCount=o}catch(a){s.error(a)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){var n=e("./utils"),i=e("./external"),s=e("./utf8"),o=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new i.Promise(function(t,r){var n=e.decompressed.getContentWorker().pipe(new a);n.on("error",function(e){r(e)}).on("end",function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var r=new o(t);return r.load(e),r}).then(function(e){var r=[i.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var s=0;s<n.length;s++)r.push(c(n[s]));return i.Promise.all(r)}).then(function(e){for(var i=e.shift(),s=i.files,o=0;o<s.length;o++){var a=s[o],l=a.fileNameStr,c=n.resolve(a.fileNameStr);r.file(c,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(r.file(c).unsafeOriginalName=l)}return i.zipComment.length&&(r.comment=i.zipComment),r})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){var n=e("../utils"),i=e("../stream/GenericWorker");function s(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(s,i),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){var n=e("readable-stream").Readable;function i(e,t,r){n.call(this,t),this._helper=e;var i=this;e.on("data",function(e,t){i.push(e)||i._helper.pause(),r&&r(t)}).on("error",function(e){i.emit("error",e)}).on("end",function(){i.push(null)})}e("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){function n(e,t,r){var n,i=s.getTypeOf(t),a=s.extend(r||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=m(e)),a.createFolders&&(n=f(e))&&v.call(this,n,!0);var d="string"===i&&!1===a.binary&&!1===a.base64;r&&void 0!==r.binary||(a.binary=!d),(t instanceof c&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var g=null;g=t instanceof c||t instanceof o?t:p.isNode&&p.isStream(t)?new h(e,t):s.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var y=new u(e,g,a);this.files[e]=y}var i=e("./utf8"),s=e("./utils"),o=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),p=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(e){var t=[];return this.forEach(function(r,n){e(r,n)&&t.push(n)}),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,n.call(this,e,t,r),this;if(g(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(g(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=this.root+e,r=v.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");s.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=d.generateWorker(this,r,n)}catch(l){(t=new o("error")).error(l)}return new a(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===r&&this.data[s+2]===n&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&r===s[1]&&n===s[2]&&i===s[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,r){var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){var n=e("../utils"),i=e("../support"),s=e("./ArrayReader"),o=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new l(n.transformTo("uint8array",e)):new s(n.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){var n=e("./GenericWorker"),i=e("../utils");function s(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(s,n),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){var n=e("./GenericWorker"),i=e("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,n),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){var n=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(s,i),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){var n=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){var n=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),a=e("../support"),l=e("../external"),c=null;if(a.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(p){}function u(e,t){return new l.Promise(function(r,i){var s=[],a=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",function(e,r){s.push(e),t&&t(r)}).on("error",function(e){s=[],i(e)}).on("end",function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return o.encode(t);default:return n.transformTo(e,t)}}(l,function(e,t){var r,n=0,i=null,s=0;for(r=0;r<t.length;r++)s+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(s),r=0;r<t.length;r++)i.set(t[r],n),n+=t[r].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,s),c);r(e)}catch(t){i(t)}s=[]}).resume()})}function d(e,t,r){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=r,n.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(a){this._worker=new s("error"),this._worker.error(a)}}d.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,function(e){t.call(r,e.data,e.meta)}):this._worker.on(e,function(){n.delay(t,arguments,r)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(s){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(o){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(s){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){for(var n=e("./utils"),i=e("./support"),s=e("./nodejsUtils"),o=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function u(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,r.utf8encode=function(e){return i.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,r,n,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),s=o=0;o<l;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t}(e)},r.utf8decode=function(e){return i.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,i,s,o=e.length,l=new Array(2*o);for(t=r=0;t<o;)if((i=e[t++])<128)l[r++]=i;else if(4<(s=a[i]))l[r++]=65533,t+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&t<o;)i=i<<6|63&e[t++],s--;1<s?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),n.applyFromCharCode(l)}(e=n.transformTo(i.uint8array?"uint8array":"array",e))},n.inherits(c,o),c.prototype.processChunk=function(e){var t=n.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=t;(t=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),t.set(s,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}(t),l=t;o!==t.length&&(i.uint8array?(l=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(l=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:r.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=c,n.inherits(u,o),u.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){var n=e("./support"),i=e("./base64"),s=e("./nodejsUtils"),o=e("./external");function a(e){return e}function l(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),r.newBlob=function(e,t){r.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(s){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,r){var n=[],i=0,s=e.length;if(s<=r)return String.fromCharCode.apply(null,e);for(;i<s;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,s)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,s)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,n=r.getTypeOf(e),i=!0;if("uint8array"===n?i=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,n,t)}catch(s){t=Math.floor(t/2)}return c.stringifyByChar(e)}function d(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=u;var p={};p.string={string:a,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,s.allocBuffer(e.length))}},p.array={string:u,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},p.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return s.newBufferFrom(e)}},p.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:a},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return p[n][e](t)},r.resolve=function(e){for(var t=e.split("/"),r=[],n=0;n<t.length;n++){var i=t[n];"."===i||""===i&&0!==n&&n!==t.length-1||(".."===i?r.pop():r.push(i))}return r.join("/")},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&s.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){setImmediate(function(){e.apply(r||null,t||[])})},r.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,s,a,c){return o.Promise.resolve(t).then(function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise(function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)}):e}).then(function(t){var u,d=r.getTypeOf(t);return d?("arraybuffer"===d?t=r.transformTo("uint8array",t):"string"===d&&(c?t=i.decode(t):s&&!0!==a&&(t=l(u=t,n.uint8array?new Uint8Array(u.length):new Array(u.length)))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){var n=e("./reader/readerFor"),i=e("./utils"),s=e("./signature"),o=e("./zipEntry"),a=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){var n=e("./reader/readerFor"),i=e("./utils"),s=e("./compressedObject"),o=e("./crc32"),a=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var i=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),l=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!n&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&n&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(a){(t=new l("error")).error(a)}return new i(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new s(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)n.prototype[c[d]]=u;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var s=0,o=new i(u),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),r=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,r=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;n=!0;for(var r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}n=!1}t.exports=function(e){1!==c.push(e)||n||r()}}).call(this,void 0!==Ye?Ye:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){var n=e("immediate");function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function u(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(e,t,r){n(function(){var n;try{n=t(r)}catch(i){return s.reject(e,i)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)})}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function i(t){r||(r=!0,s.resolve(e,t))}var o=f(function(){t(i,n)});"error"===o.status&&n(o.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){throw r})})},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var r=new this.constructor(i);return this.state!==l?d(r,this.state===a?e:t,this.outcome):this.queue.push(new u(r,e,t)),r},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=f(p,t);if("error"===r.status)return s.reject(e,r.value);var n=r.value;if(n)h(e,n);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:s.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return s.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var o=new Array(r),a=0,l=-1,c=new this(i);++l<r;)u(e[l],l);return c;function u(e,i){t.resolve(e).then(function(e){o[i]=e,++a!==r||n||(n=!0,s.resolve(c,o))},function(e){n||(n=!0,s.reject(c,e))})}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var o,a=-1,l=new this(i);++a<r;)o=e[a],t.resolve(o).then(function(e){n||(n=!0,s.resolve(l,e))},function(e){n||(n=!0,s.reject(l,e))});return l}},{immediate:36}],38:[function(e,t,r){var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){var n=e("./zlib/deflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,p=8;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({level:u,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==c)throw new Error(o[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,f))!==c)throw new Error(o[r]);this._dict_set=!0}}function f(e,t){var r=new h(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}h.prototype.push=function(e,t){var r,o,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=s.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(u),a.next_out=0,a.avail_out=u),1!==(r=n.deflate(a,o))&&r!==c)return this.onEnd(r),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==r);return 4===o?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c):2!==o||(this.onEnd(c),!(a.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=h,r.deflate=f,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){var n=e("./zlib/inflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==o.Z_OK)throw new Error(a[r]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function p(e,t){var r=new d(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}d.prototype.push=function(e,t){var r,a,l,c,d,p,h=this.strm,f=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?h.input=s.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(f),h.next_out=0,h.avail_out=f),(r=n.inflate(h,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(p="string"==typeof m?s.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,r=n.inflateSetDictionary(this.strm,p)),r===o.Z_BUF_ERROR&&!0===v&&(r=o.Z_OK,v=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==o.Z_STREAM_END&&(0!==h.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=s.utf8border(h.output,h.next_out),c=h.next_out-l,d=s.buf2string(h.output,l),h.next_out=c,h.avail_out=f-c,c&&i.arraySet(h.output,h.output,l,c,0),this.onData(d)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(v=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(h.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=d,r.inflate=p,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},r.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){var t,r,n,i,s,o;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(o=new Uint8Array(n),t=i=0,r=e.length;t<r;t++)s=e[t],o.set(s,i),i+=s.length;return o}},s={arraySet:function(e,t,r,n,i){for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(e,t,r){var n=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(c){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(c){s=!1}for(var o=new n.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",o=0;o<t;o++)r+=String.fromCharCode(e[o]);return r}o[254]=o[254]=1,r.string2buf=function(e){var t,r,i,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(i-56320),s++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(l),s=o=0;o<l;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(i-56320),s++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t},r.buf2binstring=function(e){return l(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,s,a=t||e.length,c=new Array(2*a);for(r=n=0;r<a;)if((i=e[r++])<128)c[n++]=i;else if(4<(s=o[i]))c[n++]=65533,r+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&r<a;)i=i<<6|63&e[r++],s--;1<s?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return l(c,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){t.exports=function(e,t,r,n){for(var i=65535&e,s=e>>>16&65535,o=0;0!==r;){for(r-=o=2e3<r?2e3:r;s=s+(i=i+t[n++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16}},{}],44:[function(e,t,r){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var s=n,o=i+r;e^=-1;for(var a=i;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,r){var n,i=e("../utils/common"),s=e("./trees"),o=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=0,u=4,d=0,p=-2,h=-1,f=4,m=2,v=8,g=9,y=286,b=30,x=19,w=2*y+1,S=15,C=3,E=258,T=E+C+1,N=42,P=113,R=1,I=2,k=3,_=4;function A(e,t){return e.msg=l[t],t}function j(e){return(e<<1)-(4<e?9:0)}function O(e){for(var t=e.length;0<=--t;)e[t]=0}function D(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function M(e,t){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,D(e.strm)}function L(e,t){e.pending_buf[e.pending++]=t}function z(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function F(e,t){var r,n,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-T?e.strstart-(e.w_size-T):0,c=e.window,u=e.w_mask,d=e.prev,p=e.strstart+E,h=c[s+o-1],f=c[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(r=t)+o]===f&&c[r+o-1]===h&&c[r]===c[s]&&c[++r]===c[s+1]){s+=2,r++;do{}while(c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&s<p);if(n=E-(p-s),s=p-E,o<n){if(e.match_start=t,a<=(o=n))break;h=c[s+o-1],f=c[s+o]}}}while((t=d[t&u])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead}function B(e){var t,r,n,s,l,c,u,d,p,h,f=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-T)){for(i.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=r=e.hash_size;n=e.head[--t],e.head[t]=f<=n?n-f:0,--r;);for(t=r=f;n=e.prev[--t],e.prev[t]=f<=n?n-f:0,--r;);s+=f}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,d=e.strstart+e.lookahead,h=void 0,(p=s)<(h=c.avail_in)&&(h=p),r=0===h?0:(c.avail_in-=h,i.arraySet(u,c.input,c.next_in,h,d),1===c.state.wrap?c.adler=o(c.adler,u,h,d):2===c.state.wrap&&(c.adler=a(c.adler,u,h,d)),c.next_in+=h,c.total_in+=h,h),e.lookahead+=r,e.lookahead+e.insert>=C)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+C-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<C)););}while(e.lookahead<T&&0!==e.strm.avail_in)}function U(e,t){for(var r,n;;){if(e.lookahead<T){if(B(e),e.lookahead<T&&t===c)return R;if(0===e.lookahead)break}if(r=0,e.lookahead>=C&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-T&&(e.match_length=F(e,r)),e.match_length>=C)if(n=s._tr_tally(e,e.strstart-e.match_start,e.match_length-C),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=C){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(M(e,!1),0===e.strm.avail_out))return R}return e.insert=e.strstart<C-1?e.strstart:C-1,t===u?(M(e,!0),0===e.strm.avail_out?k:_):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?R:I}function W(e,t){for(var r,n,i;;){if(e.lookahead<T){if(B(e),e.lookahead<T&&t===c)return R;if(0===e.lookahead)break}if(r=0,e.lookahead>=C&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=C-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-T&&(e.match_length=F(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===C&&4096<e.strstart-e.match_start)&&(e.match_length=C-1)),e.prev_length>=C&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-C,n=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-C),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=C-1,e.strstart++,n&&(M(e,!1),0===e.strm.avail_out))return R}else if(e.match_available){if((n=s._tr_tally(e,0,e.window[e.strstart-1]))&&M(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return R}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<C-1?e.strstart:C-1,t===u?(M(e,!0),0===e.strm.avail_out?k:_):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?R:I}function H(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function $(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*w),this.dyn_dtree=new i.Buf16(2*(2*b+1)),this.bl_tree=new i.Buf16(2*(2*x+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(S+1),this.heap=new i.Buf16(2*y+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?N:P,e.adler=2===t.wrap?0:1,t.last_flush=c,s._tr_init(t),d):A(e,p)}function q(e){var t,r=V(e);return r===d&&((t=e.state).window_size=2*t.w_size,O(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=C-1,t.match_available=0,t.ins_h=0),r}function G(e,t,r,n,s,o){if(!e)return p;var a=1;if(t===h&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),s<1||g<s||r!==v||n<8||15<n||t<0||9<t||o<0||f<o)return A(e,p);8===n&&(n=9);var l=new $;return(e.state=l).strm=e,l.wrap=a,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+C-1)/C),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=r,q(e)}n=[new H(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(B(e),0===e.lookahead&&t===c)return R;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,M(e,!1),0===e.strm.avail_out))return R;if(e.strstart-e.block_start>=e.w_size-T&&(M(e,!1),0===e.strm.avail_out))return R}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?k:_):(e.strstart>e.block_start&&(M(e,!1),e.strm.avail_out),R)}),new H(4,4,8,4,U),new H(4,5,16,8,U),new H(4,6,32,32,U),new H(4,4,16,16,W),new H(8,16,32,32,W),new H(8,16,128,128,W),new H(8,32,128,256,W),new H(32,128,258,1024,W),new H(32,258,258,4096,W)],r.deflateInit=function(e,t){return G(e,t,v,15,8,0)},r.deflateInit2=G,r.deflateReset=q,r.deflateResetKeep=V,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?p:(e.state.gzhead=t,d):p},r.deflate=function(e,t){var r,i,o,l;if(!e||!e.state||5<t||t<0)return e?A(e,p):p;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==u)return A(e,0===e.avail_out?-5:p);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===N)if(2===i.wrap)e.adler=0,L(i,31),L(i,139),L(i,8),i.gzhead?(L(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),L(i,255&i.gzhead.time),L(i,i.gzhead.time>>8&255),L(i,i.gzhead.time>>16&255),L(i,i.gzhead.time>>24&255),L(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),L(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(L(i,255&i.gzhead.extra.length),L(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(L(i,0),L(i,0),L(i,0),L(i,0),L(i,0),L(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),L(i,3),i.status=P);else{var h=v+(i.w_bits-8<<4)<<8;h|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=P,z(i,h),0!==i.strstart&&(z(i,e.adler>>>16),z(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),D(e),o=i.pending,i.pending!==i.pending_buf_size));)L(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),D(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,L(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),D(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,L(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&D(e),i.pending+2<=i.pending_buf_size&&(L(i,255&e.adler),L(i,e.adler>>8&255),e.adler=0,i.status=P)):i.status=P),0!==i.pending){if(D(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&j(t)<=j(r)&&t!==u)return A(e,-5);if(666===i.status&&0!==e.avail_in)return A(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==c&&666!==i.status){var f=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(B(e),0===e.lookahead)){if(t===c)return R;break}if(e.match_length=0,r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(M(e,!1),0===e.strm.avail_out))return R}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?k:_):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?R:I}(i,t):3===i.strategy?function(e,t){for(var r,n,i,o,a=e.window;;){if(e.lookahead<=E){if(B(e),e.lookahead<=E&&t===c)return R;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=C&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){o=e.strstart+E;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=E-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=C?(r=s._tr_tally(e,1,e.match_length-C),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(M(e,!1),0===e.strm.avail_out))return R}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?k:_):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?R:I}(i,t):n[i.level].func(i,t);if(f!==k&&f!==_||(i.status=666),f===R||f===k)return 0===e.avail_out&&(i.last_flush=-1),d;if(f===I&&(1===t?s._tr_align(i):5!==t&&(s._tr_stored_block(i,0,0,!1),3===t&&(O(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),D(e),0===e.avail_out))return i.last_flush=-1,d}return t!==u?d:i.wrap<=0?1:(2===i.wrap?(L(i,255&e.adler),L(i,e.adler>>8&255),L(i,e.adler>>16&255),L(i,e.adler>>24&255),L(i,255&e.total_in),L(i,e.total_in>>8&255),L(i,e.total_in>>16&255),L(i,e.total_in>>24&255)):(z(i,e.adler>>>16),z(i,65535&e.adler)),D(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?d:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==N&&69!==t&&73!==t&&91!==t&&103!==t&&t!==P&&666!==t?A(e,p):(e.state=null,t===P?A(e,-3):d):p},r.deflateSetDictionary=function(e,t){var r,n,s,a,l,c,u,h,f=t.length;if(!e||!e.state)return p;if(2===(a=(r=e.state).wrap)||1===a&&r.status!==N||r.lookahead)return p;for(1===a&&(e.adler=o(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===a&&(O(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new i.Buf8(r.w_size),i.arraySet(h,t,f-r.w_size,r.w_size,0),t=h,f=r.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,B(r);r.lookahead>=C;){for(n=r.strstart,s=r.lookahead-(C-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+C-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--s;);r.strstart=n,r.lookahead=C-1,B(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=C-1,r.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,r.wrap=a,d},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){t.exports=function(e,t){var r,n,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y,b,x,w,S,C,E,T,N;r=e.state,n=e.next_in,T=e.input,i=n+(e.avail_in-5),s=e.next_out,N=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),l=r.dmax,c=r.wsize,u=r.whave,d=r.wnext,p=r.window,h=r.hold,f=r.bits,m=r.lencode,v=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{f<15&&(h+=T[n++]<<f,f+=8,h+=T[n++]<<f,f+=8),b=m[h&g];t:for(;;){if(h>>>=x=b>>>24,f-=x,0==(x=b>>>16&255))N[s++]=65535&b;else{if(!(16&x)){if(!(64&x)){b=m[(65535&b)+(h&(1<<x)-1)];continue t}if(32&x){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&b,(x&=15)&&(f<x&&(h+=T[n++]<<f,f+=8),w+=h&(1<<x)-1,h>>>=x,f-=x),f<15&&(h+=T[n++]<<f,f+=8,h+=T[n++]<<f,f+=8),b=v[h&y];r:for(;;){if(h>>>=x=b>>>24,f-=x,!(16&(x=b>>>16&255))){if(!(64&x)){b=v[(65535&b)+(h&(1<<x)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(S=65535&b,f<(x&=15)&&(h+=T[n++]<<f,(f+=8)<x&&(h+=T[n++]<<f,f+=8)),l<(S+=h&(1<<x)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(h>>>=x,f-=x,(x=s-o)<S){if(u<(x=S-x)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(E=p,(C=0)===d){if(C+=c-x,x<w){for(w-=x;N[s++]=p[C++],--x;);C=s-S,E=N}}else if(d<x){if(C+=c+d-x,(x-=d)<w){for(w-=x;N[s++]=p[C++],--x;);if(C=0,d<w){for(w-=x=d;N[s++]=p[C++],--x;);C=s-S,E=N}}}else if(C+=d-x,x<w){for(w-=x;N[s++]=p[C++],--x;);C=s-S,E=N}for(;2<w;)N[s++]=E[C++],N[s++]=E[C++],N[s++]=E[C++],w-=3;w&&(N[s++]=E[C++],1<w&&(N[s++]=E[C++]))}else{for(C=s-S;N[s++]=N[C++],N[s++]=N[C++],N[s++]=N[C++],2<(w-=3););w&&(N[s++]=N[C++],1<w&&(N[s++]=N[C++]))}break}}break}}while(n<i&&s<a);n-=w=f>>3,h&=(1<<(f-=w<<3))-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=s<a?a-s+257:257-(s-a),r.hold=h,r.bits=f}},{}],49:[function(e,t,r){var n=e("../utils/common"),i=e("./adler32"),s=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),l=1,c=2,u=0,d=-2,p=1,h=852,f=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=p,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(h),t.distcode=t.distdyn=new n.Buf32(f),t.sane=1,t.back=-1,u):d}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,g(e)):d}function b(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,y(e))):d}function x(e,t){var r,n;return e?(n=new v,(e.state=n).window=null,(r=b(e,t))!==u&&(e.state=null),r):d}var w,S,C=!0;function E(e){if(C){var t;for(w=new n.Buf32(512),S=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(l,e.lens,0,288,w,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(c,e.lens,0,32,S,0,e.work,{bits:5}),C=!1}e.lencode=w,e.lenbits=9,e.distcode=S,e.distbits=5}function T(e,t,r,i){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(s=o.wsize-o.wnext)&&(s=i),n.arraySet(o.window,t,r-i,s,o.wnext),(i-=s)?(n.arraySet(o.window,t,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}r.inflateReset=y,r.inflateReset2=b,r.inflateResetKeep=g,r.inflateInit=function(e){return x(e,15)},r.inflateInit2=x,r.inflate=function(e,t){var r,h,f,v,g,y,b,x,w,S,C,N,P,R,I,k,_,A,j,O,D,M,L,z,F=0,B=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(r=e.state).mode&&(r.mode=13),g=e.next_out,f=e.output,b=e.avail_out,v=e.next_in,h=e.input,y=e.avail_in,x=r.hold,w=r.bits,S=y,C=b,M=u;e:for(;;)switch(r.mode){case p:if(0===r.wrap){r.mode=13;break}for(;w<16;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(2&r.wrap&&35615===x){B[r.check=0]=255&x,B[1]=x>>>8&255,r.check=s(r.check,B,2,0),w=x=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&x)<<8)+(x>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&x)){e.msg="unknown compression method",r.mode=30;break}if(w-=4,D=8+(15&(x>>>=4)),0===r.wbits)r.wbits=D;else if(D>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<D,e.adler=r.check=1,r.mode=512&x?10:12,w=x=0;break;case 2:for(;w<16;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(r.flags=x,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=x>>8&1),512&r.flags&&(B[0]=255&x,B[1]=x>>>8&255,r.check=s(r.check,B,2,0)),w=x=0,r.mode=3;case 3:for(;w<32;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}r.head&&(r.head.time=x),512&r.flags&&(B[0]=255&x,B[1]=x>>>8&255,B[2]=x>>>16&255,B[3]=x>>>24&255,r.check=s(r.check,B,4,0)),w=x=0,r.mode=4;case 4:for(;w<16;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}r.head&&(r.head.xflags=255&x,r.head.os=x>>8),512&r.flags&&(B[0]=255&x,B[1]=x>>>8&255,r.check=s(r.check,B,2,0)),w=x=0,r.mode=5;case 5:if(1024&r.flags){for(;w<16;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}r.length=x,r.head&&(r.head.extra_len=x),512&r.flags&&(B[0]=255&x,B[1]=x>>>8&255,r.check=s(r.check,B,2,0)),w=x=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(y<(N=r.length)&&(N=y),N&&(r.head&&(D=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,h,v,N,D)),512&r.flags&&(r.check=s(r.check,h,N,v)),y-=N,v+=N,r.length-=N),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===y)break e;for(N=0;D=h[v+N++],r.head&&D&&r.length<65536&&(r.head.name+=String.fromCharCode(D)),D&&N<y;);if(512&r.flags&&(r.check=s(r.check,h,N,v)),y-=N,v+=N,D)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===y)break e;for(N=0;D=h[v+N++],r.head&&D&&r.length<65536&&(r.head.comment+=String.fromCharCode(D)),D&&N<y;);if(512&r.flags&&(r.check=s(r.check,h,N,v)),y-=N,v+=N,D)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;w<16;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(x!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}w=x=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;w<32;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}e.adler=r.check=m(x),w=x=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=g,e.avail_out=b,e.next_in=v,e.avail_in=y,r.hold=x,r.bits=w,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){x>>>=7&w,w-=7&w,r.mode=27;break}for(;w<3;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}switch(r.last=1&x,w-=1,3&(x>>>=1)){case 0:r.mode=14;break;case 1:if(E(r),r.mode=20,6!==t)break;x>>>=2,w-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}x>>>=2,w-=2;break;case 14:for(x>>>=7&w,w-=7&w;w<32;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if((65535&x)!=(x>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&x,w=x=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(N=r.length){if(y<N&&(N=y),b<N&&(N=b),0===N)break e;n.arraySet(f,h,v,N,g),y-=N,v+=N,b-=N,g+=N,r.length-=N;break}r.mode=12;break;case 17:for(;w<14;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(r.nlen=257+(31&x),x>>>=5,w-=5,r.ndist=1+(31&x),x>>>=5,w-=5,r.ncode=4+(15&x),x>>>=4,w-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;w<3;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}r.lens[U[r.have++]]=7&x,x>>>=3,w-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},M=a(0,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,M){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;k=(F=r.lencode[x&(1<<r.lenbits)-1])>>>16&255,_=65535&F,!((I=F>>>24)<=w);){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(_<16)x>>>=I,w-=I,r.lens[r.have++]=_;else{if(16===_){for(z=I+2;w<z;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(x>>>=I,w-=I,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}D=r.lens[r.have-1],N=3+(3&x),x>>>=2,w-=2}else if(17===_){for(z=I+3;w<z;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}w-=I,D=0,N=3+(7&(x>>>=I)),x>>>=3,w-=3}else{for(z=I+7;w<z;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}w-=I,D=0,N=11+(127&(x>>>=I)),x>>>=7,w-=7}if(r.have+N>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;N--;)r.lens[r.have++]=D}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,L={bits:r.lenbits},M=a(l,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,M){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},M=a(c,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,M){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=y&&258<=b){e.next_out=g,e.avail_out=b,e.next_in=v,e.avail_in=y,r.hold=x,r.bits=w,o(e,C),g=e.next_out,f=e.output,b=e.avail_out,v=e.next_in,h=e.input,y=e.avail_in,x=r.hold,w=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;k=(F=r.lencode[x&(1<<r.lenbits)-1])>>>16&255,_=65535&F,!((I=F>>>24)<=w);){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(k&&!(240&k)){for(A=I,j=k,O=_;k=(F=r.lencode[O+((x&(1<<A+j)-1)>>A)])>>>16&255,_=65535&F,!(A+(I=F>>>24)<=w);){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}x>>>=A,w-=A,r.back+=A}if(x>>>=I,w-=I,r.back+=I,r.length=_,0===k){r.mode=26;break}if(32&k){r.back=-1,r.mode=12;break}if(64&k){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&k,r.mode=22;case 22:if(r.extra){for(z=r.extra;w<z;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}r.length+=x&(1<<r.extra)-1,x>>>=r.extra,w-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;k=(F=r.distcode[x&(1<<r.distbits)-1])>>>16&255,_=65535&F,!((I=F>>>24)<=w);){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(!(240&k)){for(A=I,j=k,O=_;k=(F=r.distcode[O+((x&(1<<A+j)-1)>>A)])>>>16&255,_=65535&F,!(A+(I=F>>>24)<=w);){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}x>>>=A,w-=A,r.back+=A}if(x>>>=I,w-=I,r.back+=I,64&k){e.msg="invalid distance code",r.mode=30;break}r.offset=_,r.extra=15&k,r.mode=24;case 24:if(r.extra){for(z=r.extra;w<z;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}r.offset+=x&(1<<r.extra)-1,x>>>=r.extra,w-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===b)break e;if(N=C-b,r.offset>N){if((N=r.offset-N)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}P=N>r.wnext?(N-=r.wnext,r.wsize-N):r.wnext-N,N>r.length&&(N=r.length),R=r.window}else R=f,P=g-r.offset,N=r.length;for(b<N&&(N=b),b-=N,r.length-=N;f[g++]=R[P++],--N;);0===r.length&&(r.mode=21);break;case 26:if(0===b)break e;f[g++]=r.length,b--,r.mode=21;break;case 27:if(r.wrap){for(;w<32;){if(0===y)break e;y--,x|=h[v++]<<w,w+=8}if(C-=b,e.total_out+=C,r.total+=C,C&&(e.adler=r.check=r.flags?s(r.check,f,C,g-C):i(r.check,f,C,g-C)),C=b,(r.flags?x:m(x))!==r.check){e.msg="incorrect data check",r.mode=30;break}w=x=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;w<32;){if(0===y)break e;y--,x+=h[v++]<<w,w+=8}if(x!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}w=x=0}r.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;default:return d}return e.next_out=g,e.avail_out=b,e.next_in=v,e.avail_in=y,r.hold=x,r.bits=w,(r.wsize||C!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&T(e,e.output,e.next_out,C-e.avail_out)?(r.mode=31,-4):(S-=e.avail_in,C-=e.avail_out,e.total_in+=S,e.total_out+=C,r.total+=C,r.wrap&&C&&(e.adler=r.check=r.flags?s(r.check,f,C,e.next_out-C):i(r.check,f,C,e.next_out-C)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==S&&0===C||4===t)&&M===u&&(M=-5),M)},r.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,u},r.inflateGetHeader=function(e,t){var r;return e&&e.state&&2&(r=e.state).wrap?((r.head=t).done=!1,u):d},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?d:11===r.mode&&i(1,t,n,0)!==r.check?-3:T(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,u):d},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){var n=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,l,c,u,d,p){var h,f,m,v,g,y,b,x,w,S=p.bits,C=0,E=0,T=0,N=0,P=0,R=0,I=0,k=0,_=0,A=0,j=null,O=0,D=new n.Buf16(16),M=new n.Buf16(16),L=null,z=0;for(C=0;C<=15;C++)D[C]=0;for(E=0;E<l;E++)D[t[r+E]]++;for(P=S,N=15;1<=N&&0===D[N];N--);if(N<P&&(P=N),0===N)return c[u++]=20971520,c[u++]=20971520,p.bits=1,0;for(T=1;T<N&&0===D[T];T++);for(P<T&&(P=T),C=k=1;C<=15;C++)if(k<<=1,(k-=D[C])<0)return-1;if(0<k&&(0===e||1!==N))return-1;for(M[1]=0,C=1;C<15;C++)M[C+1]=M[C]+D[C];for(E=0;E<l;E++)0!==t[r+E]&&(d[M[t[r+E]]++]=E);if(y=0===e?(j=L=d,19):1===e?(j=i,O-=257,L=s,z-=257,256):(j=o,L=a,-1),C=T,g=u,I=E=A=0,m=-1,v=(_=1<<(R=P))-1,1===e&&852<_||2===e&&592<_)return 1;for(;;){for(b=C-I,w=d[E]<y?(x=0,d[E]):d[E]>y?(x=L[z+d[E]],j[O+d[E]]):(x=96,0),h=1<<C-I,T=f=1<<R;c[g+(A>>I)+(f-=h)]=b<<24|x<<16|w,0!==f;);for(h=1<<C-1;A&h;)h>>=1;if(0!==h?(A&=h-1,A+=h):A=0,E++,0==--D[C]){if(C===N)break;C=t[r+d[E]]}if(P<C&&(A&v)!==m){for(0===I&&(I=P),g+=T,k=1<<(R=C-I);R+I<N&&!((k-=D[R+I])<=0);)R++,k<<=1;if(_+=1<<R,1===e&&852<_||2===e&&592<_)return 1;c[m=A&v]=P<<24|R<<16|g-u}}return 0!==A&&(c[g+A]=C-I<<24|64<<16),p.bits=P,0}},{"../utils/common":41}],51:[function(e,t,r){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){var n=e("../utils/common"),i=0,s=1;function o(e){for(var t=e.length;0<=--t;)e[t]=0}var a=0,l=29,c=256,u=c+1+l,d=30,p=19,h=2*u+1,f=15,m=16,v=7,g=256,y=16,b=17,x=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(u+2));o(T);var N=new Array(2*d);o(N);var P=new Array(512);o(P);var R=new Array(256);o(R);var I=new Array(l);o(I);var k,_,A,j=new Array(d);function O(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function D(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function M(e){return e<256?P[e]:P[256+(e>>>7)]}function L(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function z(e,t,r){e.bi_valid>m-r?(e.bi_buf|=t<<e.bi_valid&65535,L(e,e.bi_buf),e.bi_buf=t>>m-e.bi_valid,e.bi_valid+=r-m):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function F(e,t,r){z(e,r[2*t],r[2*t+1])}function B(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function U(e,t,r){var n,i,s=new Array(f+1),o=0;for(n=1;n<=f;n++)s[n]=o=o+r[n-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=B(s[a]++,a))}}function W(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<p;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*g]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function H(e){8<e.bi_valid?L(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function $(e,t,r,n){var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function V(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&$(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!$(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function q(e,t,r){var n,i,s,o,a=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===n?F(e,i,t):(F(e,(s=R[i])+c+1,t),0!==(o=w[s])&&z(e,i-=I[s],o),F(e,s=M(--n),r),0!==(o=S[s])&&z(e,n-=j[s],o)),a<e.last_lit;);F(e,g,t)}function G(e,t){var r,n,i,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=h,r=0;r<l;r++)0!==s[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=o[2*i+1]);for(t.max_code=c,r=e.heap_len>>1;1<=r;r--)V(e,s,r);for(i=l;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],V(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*i]=s[2*r]+s[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=i,e.heap[1]=i++,V(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,s,o,a,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,v=t.stat_desc.max_length,g=0;for(s=0;s<=f;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<h;r++)v<(s=l[2*l[2*(n=e.heap[r])+1]+1]+1)&&(s=v,g++),l[2*n+1]=s,c<n||(e.bl_count[s]++,o=0,m<=n&&(o=p[n-m]),a=l[2*n],e.opt_len+=a*(s+o),d&&(e.static_len+=a*(u[2*n+1]+o)));if(0!==g){do{for(s=v-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[v]--,g-=2}while(0<g);for(s=v;0!==s;s--)for(n=e.bl_count[s];0!==n;)c<(i=e.heap[--r])||(l[2*i+1]!==s&&(e.opt_len+=(s-l[2*i+1])*l[2*i],l[2*i+1]=s),n--)}}(e,t),U(s,c,e.bl_count)}function K(e,t,r){var n,i,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++a<l&&i===o||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*y]++):a<=10?e.bl_tree[2*b]++:e.bl_tree[2*x]++,s=i,c=(a=0)===o?(l=138,3):i===o?(l=6,3):(l=7,4))}function J(e,t,r){var n,i,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++a<l&&i===o)){if(a<c)for(;F(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==s&&(F(e,i,e.bl_tree),a--),F(e,y,e.bl_tree),z(e,a-3,2)):a<=10?(F(e,b,e.bl_tree),z(e,a-3,3)):(F(e,x,e.bl_tree),z(e,a-11,7));s=i,c=(a=0)===o?(l=138,3):i===o?(l=6,3):(l=7,4)}}o(j);var Y=!1;function Z(e,t,r,i){var s,o,l;z(e,(a<<1)+(i?1:0),3),o=t,l=r,H(s=e),L(s,l),L(s,~l),n.arraySet(s.pending_buf,s.window,o,l,s.pending),s.pending+=l}r._tr_init=function(e){Y||(function(){var e,t,r,n,i,s=new Array(f+1);for(n=r=0;n<l-1;n++)for(I[n]=r,e=0;e<1<<w[n];e++)R[r++]=n;for(R[r-1]=n,n=i=0;n<16;n++)for(j[n]=i,e=0;e<1<<S[n];e++)P[i++]=n;for(i>>=7;n<d;n++)for(j[n]=i<<7,e=0;e<1<<S[n]-7;e++)P[256+i++]=n;for(t=0;t<=f;t++)s[t]=0;for(e=0;e<=143;)T[2*e+1]=8,e++,s[8]++;for(;e<=255;)T[2*e+1]=9,e++,s[9]++;for(;e<=279;)T[2*e+1]=7,e++,s[7]++;for(;e<=287;)T[2*e+1]=8,e++,s[8]++;for(U(T,u+1,s),e=0;e<d;e++)N[2*e+1]=5,N[2*e]=B(e,5);k=new O(T,w,c+1,u,f),_=new O(N,S,0,d,f),A=new O(new Array(0),C,0,p,v)}(),Y=!0),e.l_desc=new D(e.dyn_ltree,k),e.d_desc=new D(e.dyn_dtree,_),e.bl_desc=new D(e.bl_tree,A),e.bi_buf=0,e.bi_valid=0,W(e)},r._tr_stored_block=Z,r._tr_flush_block=function(e,t,r,n){var o,a,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return s;return i}(e)),G(e,e.l_desc),G(e,e.d_desc),l=function(e){var t;for(K(e,e.dyn_ltree,e.l_desc.max_code),K(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=p-1;3<=t&&0===e.bl_tree[2*E[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=o&&(o=a)):o=a=r+5,r+4<=o&&-1!==t?Z(e,t,r,n):4===e.strategy||a===o?(z(e,2+(n?1:0),3),q(e,T,N)):(z(e,4+(n?1:0),3),function(e,t,r,n){var i;for(z(e,t-257,5),z(e,r-1,5),z(e,n-4,4),i=0;i<n;i++)z(e,e.bl_tree[2*E[i]+1],3);J(e,e.dyn_ltree,t-1),J(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),q(e,e.dyn_ltree,e.dyn_dtree)),W(e),n&&H(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(R[r]+c+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){var t;z(e,2,3),F(e,g,T),16===(t=e).bi_valid?(L(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,r){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){if(!e.setImmediate){var r,n,i,s,o=1,a={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,r="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick(function(){p(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",h,!1):e.attachEvent("onmessage",h),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(p,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return a[o]=i,r(o),o++},u.clearImmediate=d}function d(e){delete a[e]}function p(e){if(l)setTimeout(p,0,e);else{var r=a[e];if(r){l=!0;try{!function(e){var r=e.callback,n=e.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(t,n)}}(r)}finally{d(e),l=!1}}}}function h(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==Ye?Ye:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10);function BV(){const[e,t]=Lt.useState(""),[r,n]=Lt.useState("");return Gt.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm",children:[Gt.jsx("div",{className:"text-xl font-semibold text-blue-800 mb-3",children:""}),Gt.jsx("div",{className:"mb-6",children:Gt.jsx("p",{className:"text-base font-semibold text-gray-700",children:""})}),Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[Gt.jsxs("div",{className:"space-y-3 mb-6",children:[Gt.jsx("div",{className:"flex items-center space-x-2",children:Gt.jsx("input",{type:"file",accept:".json",onChange:e=>function(r){return Ke(this,null,function*(){if(!r||!r.length)return;const i=r[0];try{t(`JSON: ${i.name}`);const e=yield i.text();n(e),t(`JSON: ${i.name}`)}catch(e){t(`JSON: ${i.name} (${e.message||e})`)}})}(e.target.files),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"})}),Gt.jsx("div",{className:"text-xs text-gray-500",children:"UIJSON"})]}),Gt.jsxs("div",{className:"space-y-3 mb-6",children:[Gt.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"JSON"}),Gt.jsx("textarea",{value:r,onChange:e=>n(e.target.value),placeholder:"JSON...",className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),Gt.jsx("div",{className:"pt-2 mb-6",children:Gt.jsx("button",{onClick:function(){return Ke(this,null,function*(){if(r.trim())try{let e;t("JSON...");try{e=JSON.parse(r)}catch(Nie){return void t(": JSON")}let i="";if(i=e.messages&&Array.isArray(e.messages)?e.messages.map(e=>e.content||e.text||"").filter(e=>e.trim()).join("\n\n---\n\n"):e.content?e.content:"string"==typeof e?e:JSON.stringify(e,null,2),!i.trim())return void t(": ");const s=yield fetch("/api/ingest",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({filename:`chat_export_${(new Date).toISOString().slice(0,19).replace(/:/g,"-")}.json`,text:i,tags:["chat_export","json"]})});if(!s.ok)throw new Error("ingest failed");const o=yield s.json();t(`JSON  doc_id=${o.doc_id}, chunks=${o.chunks}`),n("")}catch(Nie){t(`JSON: ${Nie.message||Nie}`)}else t(": JSON")})},disabled:!r.trim(),className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:""})})]}),Gt.jsx("div",{className:"text-sm mt-2 p-2 bg-gray-50 rounded border min-h-[2rem]",children:e})]})]})}const UV=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("div",{className:"relative w-full overflow-auto",children:Gt.jsx("table",Le({ref:t,className:zg("w-full caption-bottom text-sm",n)},i))})});UV.displayName="Table";const WV=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("thead",Le({ref:t,className:zg("[&_tr]:border-b",n)},i))});WV.displayName="TableHeader";const HV=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("tbody",Le({ref:t,className:zg("[&_tr:last-child]:border-0",n)},i))});HV.displayName="TableBody";Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("tfoot",Le({ref:t,className:zg("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n)},i))}).displayName="TableFooter";const $V=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("tr",Le({ref:t,className:zg("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n)},i))});$V.displayName="TableRow";const VV=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("th",Le({ref:t,className:zg("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n)},i))});VV.displayName="TableHead";const qV=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("td",Le({ref:t,className:zg("p-4 align-middle [&:has([role=checkbox])]:pr-0",n)},i))});qV.displayName="TableCell";Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx("caption",Le({ref:t,className:zg("mt-4 text-sm text-muted-foreground",n)},i))}).displayName="TableCaption";const GV=!window.location.hostname.includes("localhost"),KV=window.location.hostname.includes("localhost"),JV=window.location.hostname.includes("azurewebsites.net")||window.location.hostname.includes("azurestaticapps.net")||window.location.hostname.includes("azure.com"),YV=GV?"":"http://localhost:8080";console.log(" API:",{isAzureEnvironment:JV,isProduction:GV,isDevelopment:KV,currentHostname:window.location.hostname,currentProtocol:window.location.protocol,finalApiBaseUrl:YV,envVars:{VITE_API_BASE_URL:"",NODE_ENV:void 0,MODE:"production"}});const ZV=e=>{let t=e.startsWith("/")?e:`/${e}`;const r=YV.endsWith("/")?YV.slice(0,-1):YV;if("/api"===r&&t.startsWith("/api/")){const r=t;return console.log(` API URL (): ${e} -> ${r}`),r}if("/api"===r){const r=`/api${t}`;return console.log(` API URL (): ${e} -> ${r}`),r}if(t.startsWith("/api/")&&!r.endsWith("/api")){const n=`${r}${t}`;return console.log(` API URL (URL): ${e} -> ${n}`),n}{const n=t.startsWith("/api/")?`${r}${t}`:`${r}/api${t}`;return console.log(` API URL (): ${e} -> ${n}`),n}};console.log(" :",{VITE_API_BASE_URL:"",VITE_API_BASE_URL_TYPE:"string",VITE_API_BASE_URL_LENGTH:0,isProduction:GV,isDevelopment:KV,NODE_ENV:void 0,MODE:"production",BASE_URL:"/",finalApiBaseUrl:YV,location:window.location.href,origin:window.location.origin,hostname:window.location.hostname}),console.log(" API:",{isProduction:GV,isDevelopment:KV,API_BASE_URL:YV,sampleAuthUrl:ZV("/api/login"),location:window.location.href,origin:window.location.origin,hostname:window.location.hostname,protocol:window.location.protocol,actualAuthUrl:ZV("/api/login"),actualMeUrl:ZV("/api/auth/me"),envVars:{VITE_API_BASE_URL:"",NODE_ENV:void 0,MODE:"production"}});const QV="/chatgpt",XV="/healthz",eq=()=>{const[e,t]=Lt.useState(null),[r,n]=Lt.useState(!1),[i,s]=Lt.useState([]),[o,a]=Lt.useState(!1),{toast:l}=fv(),c=Lt.useRef(null),[u,d]=Lt.useState({keepOriginalFile:!1,extractKnowledgeBase:!0,extractImageSearch:!0,createQA:!0});Lt.useEffect(()=>{p()},[]);const p=()=>Ke(void 0,null,function*(){a(!0);try{const e=yield fetch(ZV("/api/knowledge"));if(!e.ok)throw new Error("");const t=yield e.json();let r=[];t.success&&t.data?r=t.data:Array.isArray(t)?r=t:(console.warn("Unexpected API response structure:",t),r=[]);const n=r.map((e,t)=>({id:e.id||`doc-${t}`,title:e.title||e.name||"",type:e.type||e.category||"",addedAt:e.addedAt||e.createdAt||(new Date).toISOString()}));s(n)}catch(e){console.error("Fetch documents error:",e),l({title:"",description:"",variant:"destructive"})}finally{a(!1)}}),h=e=>{try{const t=new Date(e);return new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)}catch(Nie){return e||""}};return Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-blue-100",children:[Gt.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:""}),Gt.jsx("div",{className:"mb-4",children:Gt.jsx("p",{className:"text-base font-semibold text-gray-700",children:"PPTX, PDF, DOCXPDFAI"})}),Gt.jsxs("div",{className:"border-2 border-dashed border-blue-300 rounded-lg p-8 mb-4 text-center cursor-pointer bg-blue-50 hover:bg-blue-100 transition-colors "+(e?"border-blue-600 bg-blue-100":""),onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&e.dataTransfer.files.length>0){const r=e.dataTransfer.files[0];t(r)}},onClick:()=>{c.current&&c.current.click()},children:[Gt.jsx("input",{ref:c,type:"file",className:"hidden",accept:".pdf,.docx,.doc,.txt,.xlsx,.xls,.pptx,.ppt",onChange:e=>{e.target.files&&e.target.files.length>0&&(t(e.target.files[0]),e.target.value="")}}),Gt.jsxs("div",{className:"flex flex-col items-center justify-center",children:[Gt.jsx(my,{className:"w-12 h-12 text-blue-700 mb-2"}),e?Gt.jsxs("div",{children:[Gt.jsx("p",{className:"text-lg font-medium text-blue-700",children:e.name}),Gt.jsxs("p",{className:"text-sm text-blue-600",children:["(",(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(e.size),")"]})]}):Gt.jsxs("div",{children:[Gt.jsx("p",{className:"text-lg font-medium text-blue-700",children:"&"}),Gt.jsxs("p",{className:"text-sm text-gray-500",children:["",Gt.jsx("span",{className:"text-blue-600 font-medium",children:""})]})]})]})]}),Gt.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Gt.jsx(zV,{id:"keepOriginalFile",checked:u.keepOriginalFile,onCheckedChange:()=>{return e="keepOriginalFile",void d(t=>ze(Le({},t),{[e]:!t[e]}));var e}}),Gt.jsx(FL,{htmlFor:"keepOriginalFile",className:"cursor-pointer",children:""})]}),Gt.jsx("div",{className:"flex justify-center mb-6",children:Gt.jsx(Bg,{onClick:()=>Ke(void 0,null,function*(){if(!e)return void l({title:"",description:"",variant:"destructive"});const r=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();if([".pdf",".docx",".txt",".xlsx",".pptx",".ppt",".doc"].includes(r)){n(!0);try{const r=new FormData;r.append("file",e),r.append("keepOriginalFile",u.keepOriginalFile.toString()),r.append("extractKnowledgeBase",u.extractKnowledgeBase.toString()),r.append("extractImageSearch",u.extractImageSearch.toString()),r.append("createQA",u.createQA.toString());const n=yield fetch("/api/data-processor/process",{method:"POST",body:r});if(!n.ok){const e=yield n.text();throw new Error(e||"")}const i=yield n.json();l({title:"",description:`${e.name} ${i.message||""}`}),window.dispatchEvent(new CustomEvent("image-search-data-updated")),p(),t(null)}catch(i){console.error("Processing error:",i),l({title:"",description:i instanceof Error?i.message:"",variant:"destructive"})}finally{n(!1)}}else l({title:"",description:"PDF, Word, Excel, PowerPoint, ",variant:"destructive"})}),disabled:!e||r,className:"w-full max-w-md bg-blue-600 hover:bg-blue-700 text-white py-2 rounded",children:r?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Ty,{className:"mr-2 h-5 w-5 animate-spin"}),"..."]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(dy,{className:"mr-2 h-5 w-5"}),""]})})}),Gt.jsx(BV,{})]}),Gt.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-blue-100",children:[Gt.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Gt.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:""}),Gt.jsx(Bg,{onClick:p,variant:"outline",className:"text-blue-600 border-blue-600",disabled:o,children:o?Gt.jsx(Ty,{className:"h-4 w-4 animate-spin"}):Gt.jsx(Dy,{className:"h-4 w-4"})})]}),o?Gt.jsxs("div",{className:"flex items-center justify-center py-8",children:[Gt.jsx(Ty,{className:"h-8 w-8 animate-spin text-blue-600"}),Gt.jsx("span",{className:"ml-2 text-blue-600",children:"..."})]}):i.length>0?Gt.jsx("div",{className:"overflow-x-auto",children:Gt.jsxs(UV,{children:[Gt.jsx(WV,{children:Gt.jsxs($V,{children:[Gt.jsx(VV,{children:""}),Gt.jsx(VV,{children:""}),Gt.jsx(VV,{children:""}),Gt.jsx(VV,{className:"text-right",children:""})]})}),Gt.jsx(HV,{children:i.map(e=>Gt.jsxs($V,{children:[Gt.jsx(qV,{className:"font-medium",children:e.title||""}),Gt.jsx(qV,{children:e.type||""}),Gt.jsx(qV,{children:h(e.addedAt)}),Gt.jsx(qV,{className:"text-right",children:Gt.jsx(Bg,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,r=e.title,Ke(void 0,null,function*(){try{const e=yield fetch(`/api/knowledge/${t}`,{method:"DELETE"});if(!e.ok){const t=yield e.text();throw new Error(t||"")}l({title:"",description:`${r} `}),p(),window.dispatchEvent(new CustomEvent("image-search-data-updated"))}catch(e){console.error("Delete error:",e),l({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}});var t,r},className:"text-red-600 hover:text-red-800 hover:bg-red-100",children:Gt.jsx(Ky,{className:"h-4 w-4"})})})]},e.id))})]})}):Gt.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Gt.jsx(dy,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),Gt.jsx("p",{children:""})]})]})]})},tq={embedDim:1536,chunkSize:800,chunkOverlap:80,retrieveK:8,rerankTop:3,rerankMin:.25};function rq(){const[e,t]=Lt.useState(tq),[r,n]=Lt.useState("");Lt.useEffect(()=>{(()=>{Ke(this,null,function*(){const e=yield fetch("/api/config/rag",{credentials:"include"});e.ok&&t(yield e.json())})})()},[]);const i=r=>n=>t(ze(Le({},e),{[r]:Number(n.target.value)}));return Gt.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm",children:[Gt.jsx("div",{className:"font-semibold text-lg mb-3 text-gray-800",children:"RAG"}),Gt.jsx("p",{className:"text-sm text-gray-600 mb-4 font-semibold",children:"RAGRetrieval-Augmented GenerationAI"}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" (500800)",Gt.jsx("input",{type:"number",min:"500",max:"800",value:e.chunkSize,onChange:i("chunkSize"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Gt.jsx("p",{className:"text-xs text-gray-500",children:"1"})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" (50100)",Gt.jsx("input",{type:"number",min:"50",max:"100",value:e.chunkOverlap,onChange:i("chunkOverlap"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Gt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["k (116)",Gt.jsx("input",{type:"number",min:"1",max:"16",value:e.retrieveK,onChange:i("retrieveK"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Gt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" (15)",Gt.jsx("input",{type:"number",min:"1",max:"5",value:e.rerankTop,onChange:i("rerankTop"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Gt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" (01)",Gt.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:e.rerankMin,onChange:i("rerankMin"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Gt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["",Gt.jsx("input",{type:"number",value:e.embedDim,onChange:i("embedDim"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),Gt.jsx("p",{className:"text-xs text-gray-500",children:""})]})]}),Gt.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:function(){return Ke(this,null,function*(){const t=(r=e).chunkSize<500||r.chunkSize>800?"500800":r.chunkOverlap<50||r.chunkOverlap>100?"50100":r.chunkOverlap>=r.chunkSize?"":r.retrieveK<1||r.retrieveK>16?"k116":r.rerankTop<1||r.rerankTop>5?"15":r.rerankTop>r.retrieveK?"k":r.rerankMin<0||r.rerankMin>1?"01":null;var r;if(t)return n(": "+t);const i=yield fetch("/api/config/rag",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});n(i.ok?"":"")})},children:""}),Gt.jsx("div",{className:"text-sm mt-3 p-2 bg-gray-50 rounded border min-h-[2rem] text-center",children:r||""})]})}const nq=(...e)=>Ke(void 0,[...e],function*(e={}){try{const[t,r]=yield Promise.allSettled([iq(e),sq(e)]);let n=[];if("fulfilled"===t.status&&t.value.items&&(n=[...n,...t.value.items]),"fulfilled"===r.status&&r.value.data){const e=r.value.data.map(oq);n=[...n,...e]}n.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());const i=e.limit||20,s=e.offset||0;return{items:n.slice(s,s+i),total:n.length,hasMore:s+i<n.length}}catch(t){return console.error(":",t),{items:[],total:0,hasMore:!1}}}),iq=(...e)=>Ke(void 0,[...e],function*(e={}){const t=new URLSearchParams;e.machineType&&t.append("machineType",e.machineType),e.machineNumber&&t.append("machineNumber",e.machineNumber),e.searchText&&t.append("searchText",e.searchText),e.searchDate&&t.append("searchDate",e.searchDate),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());const r=yield Km(`/history?${t.toString()}`);return r.ok?r.json():{items:[],total:0,hasMore:!1}}),sq=e=>Ke(void 0,null,function*(){return yield((...e)=>Ke(void 0,[...e],function*(e={}){const t=new URLSearchParams;e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),e.machineType&&t.append("machineType",e.machineType),e.machineNumber&&t.append("machineNumber",e.machineNumber),e.category&&t.append("category",e.category),e.office&&t.append("office",e.office),e.keyword&&t.append("keyword",e.keyword);const r=yield Km(`/fault-history?${t.toString()}`);if(!r.success)throw new Error(r.error||"E");return r}))({machineType:e.machineType,machineNumber:e.machineNumber,keyword:e.searchText,limit:e.limit,offset:e.offset})}),oq=e=>{const t=e.images&&e.images.length>0?(r=e.images[0].fileName,`${window.location.origin}/api/fault-history/images/${r}`):void 0;var r;return{id:e.id,machineType:e.machineType||"",machineNumber:e.machineNumber||"",title:e.title,jsonData:ze(Le({},e.jsonData),{title:e.title,problemDescription:e.description,machineType:e.machineType,machineNumber:e.machineNumber,metadata:{office:e.office,category:e.category,keywords:e.keywords,source:"fault-history-db"}}),imagePath:t,imageUrl:t,createdAt:e.createdAt,source:"fault-history-db"}};const aq=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,isLoading:t}=sv(),{toast:r}=fv();im();const[n,i]=Lt.useState("processor"),[s,o]=Lt.useState([]),[a,l]=Lt.useState([]),[c,u]=Lt.useState([]),[d,p]=Lt.useState(!0);return console.log("  - "),Lt.useEffect(()=>{(()=>{Ke(this,null,function*(){try{p(!0),console.log(" ");const[e,t,r]=yield Promise.all([Ke(void 0,null,function*(){return yield Km("/base-data")}),nq({limit:10}),Ke(void 0,null,function*(){return yield Km("/files/processed")})]);console.log(" :",e),console.log(" :",t),console.log(" :",r),e.success&&e.data?(console.log(" :",e.data.length+""),o(e.data)):Array.isArray(e)?(console.log(" :",e.length+""),o(e)):(console.log(" :",e),o([])),t.items?(console.log(" :",t.items.length+""),l(t.items)):(console.log(" "),l([])),r.success&&r.data?(console.log(" :",r.data.length+""),u(r.data)):(console.log(" "),u([]))}catch(e){console.error(" :",e),r({title:"",description:e instanceof Error?e.message:"",variant:"destructive"}),o([]),l([])}finally{p(!1)}})})()},[r]),Gt.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8 bg-gray-50",children:Gt.jsxs("div",{className:"max-w-7xl mx-auto",children:[Gt.jsx("div",{className:"flex items-center justify-between mb-6",children:Gt.jsxs("div",{className:"flex items-center gap-3",children:[Gt.jsx("div",{className:"bg-blue-600 p-3 rounded-full",children:Gt.jsx(Jg,{className:"h-8 w-8 text-white"})}),Gt.jsxs("div",{children:[Gt.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:""}),Gt.jsx("p",{className:"text-gray-500",children:"GPT"})]})]})}),Gt.jsxs("div",{className:"flex space-x-1 mb-6 bg-white rounded-lg p-1 shadow-sm",children:[Gt.jsxs("button",{onClick:()=>i("processor"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("processor"===n?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"),children:[Gt.jsx(Jg,{className:"h-4 w-4 inline mr-2"}),""]}),Gt.jsxs("button",{onClick:()=>i("knowledge"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("knowledge"===n?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"),children:[Gt.jsx(sb,{className:"h-4 w-4 inline mr-2"}),"AI"]})]}),"processor"===n&&Gt.jsx(eq,{}),"knowledge"===n&&Gt.jsx("div",{className:"space-y-6",children:Gt.jsx(rq,{})})]})})}},Symbol.toStringTag,{value:"Module"}));function lq(e){return Ke(this,arguments,function*(e,t={}){var r,n,i,s,o,a,l;try{console.log(" ",{id:e.id,title:e.title,stepsCount:(null==(r=e.steps)?void 0:r.length)||0});const c=function(e,t={}){var r,n;const{validateImages:i=!0,logDetails:s=!0}=t;s&&console.log(" ",{id:e.id,title:e.title,stepsCount:(null==(r=e.steps)?void 0:r.length)||0,stepsWithImages:(null==(n=e.steps)?void 0:n.filter(e=>e.images&&e.images.length>0).length)||0});const o=e.steps.map(e=>{var t;s&&console.log(" ",{stepId:e.id,stepTitle:e.title,originalImages:e.images,hasImages:!!e.images,imagesLength:(null==(t=e.images)?void 0:t.length)||0});let r=[];e.images&&Array.isArray(e.images)&&(r=e.images.map(e=>(s&&console.log(" ",{originalImg:e,url:e.url,fileName:e.fileName,urlValid:e.url&&""!==e.url.trim(),fileNameValid:e.fileName&&""!==e.fileName.trim()}),e.url&&""!==e.url.trim()?{url:e.url,fileName:e.fileName&&""!==e.fileName.trim()?e.fileName:e.url.split("/").pop()||""}:null)).filter(e=>null!==e)),s&&(r.length>0?console.log(" :",{stepId:e.id,stepTitle:e.title,imagesCount:r.length,images:r}):console.log(" ",{stepId:e.id,stepTitle:e.title,originalImages:e.images,processedImages:r}));const n=e,{imageUrl:i,imageFileName:o}=n,a=Fe(n,["imageUrl","imageFileName"]);return ze(Le({},a),{images:r})}),a=ze(Le({},e),{steps:o,updatedAt:(new Date).toISOString()});return s&&console.log(" ",{id:a.id,title:a.title,stepsCount:a.steps.length,stepsWithImages:a.steps.filter(e=>e.images&&e.images.length>0).length,allStepsImages:a.steps.map(e=>{var t,r;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(r=e.images)?void 0:r.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}})}),a}(e,t),u=c.id?Gm(`/emergency-flow/${c.id}`):Gm("/emergency-flow"),d=c.id?"PUT":"POST";console.log(" :",{url:u,method:d,flowId:c.id,stepsCount:c.steps.length,stepsWithImages:c.steps.filter(e=>e.images&&e.images.length>0).length,allStepsImages:c.steps.map(e=>{var t,r;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(r=e.images)?void 0:r.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}})});const p=yield fetch(u,{method:d,headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!p.ok){const e=yield p.json().catch(()=>({}));throw new Error(e.error||` (${p.status}: ${p.statusText})`)}const h=yield p.json();return console.log(" ",{id:(null==(n=h.data)?void 0:n.id)||c.id,title:(null==(i=h.data)?void 0:i.title)||c.title,stepsCount:(null==(o=null==(s=h.data)?void 0:s.steps)?void 0:o.length)||c.steps.length,stepsWithImages:(null==(l=null==(a=h.data)?void 0:a.steps)?void 0:l.filter(e=>e.images&&e.images.length>0).length)||0}),{success:!0,data:h.data||c}}catch(c){return console.error(" :",c),{success:!1,error:c instanceof Error?c.message:""}}})}function cq(e,t){return(cq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uq(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,cq(e,t)}function dq(){return dq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dq.apply(null,arguments)}function pq(e){return(pq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hq(e){var t=function(e,t){if("object"!=pq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=pq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pq(t)?t:t+""}function fq(e,t,r){return(t=hq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mq(Object(r),!0).forEach(function(t){fq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gq(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var yq="function"==typeof Symbol&&Symbol.observable||"@@observable",bq=function(){return Math.random().toString(36).substring(7).split("").join(".")},xq={INIT:"@@redux/INIT"+bq(),REPLACE:"@@redux/REPLACE"+bq()};function wq(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(gq(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(gq(1));return r(wq)(e,t)}if("function"!=typeof e)throw new Error(gq(2));var i=e,s=t,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(gq(3));return s}function d(e){if("function"!=typeof e)throw new Error(gq(4));if(l)throw new Error(gq(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(gq(6));t=!1,c();var r=a.indexOf(e);a.splice(r,1),o=null}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(gq(7));if(void 0===e.type)throw new Error(gq(8));if(l)throw new Error(gq(9));try{l=!0,s=i(s,e)}finally{l=!1}for(var t=o=a,r=0;r<t.length;r++){(0,t[r])()}return e}return p({type:xq.INIT}),(n={dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(gq(10));i=e,p({type:xq.REPLACE})}})[yq]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(gq(11));function r(){e.next&&e.next(u())}return r(),{unsubscribe:t(r)}}})[yq]=function(){return this},e},n}function Sq(e,t){return function(){return t(e.apply(this,arguments))}}function Cq(e,t){if("function"==typeof e)return Sq(e,t);if("object"!=typeof e||null===e)throw new Error(gq(16));var r={};for(var n in e){var i=e[n];"function"==typeof i&&(r[n]=Sq(i,t))}return r}function Eq(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var Tq={exports:{}};function Nq(){}function Pq(){}Pq.resetWarningCache=Nq;Tq.exports=function(){function e(e,t,r,n,i,s){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Pq,resetWarningCache:Nq};return r.PropTypes=r,r}();const Rq=Ze(Tq.exports);var Iq=zt.createContext(null);var kq=function(e){e()};function _q(){var e=kq,t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],r=t;r;)e.push(r),r=r.next;return e},subscribe:function(e){var n=!0,i=r={callback:e,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){n&&null!==t&&(n=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Aq={notify:function(){},get:function(){return[]}};function jq(e,t){var r,n=Aq;function i(){o.onStateChange&&o.onStateChange()}function s(){r||(r=t?t.addNestedSub(i):e.subscribe(i),n=_q())}var o={addNestedSub:function(e){return s(),n.subscribe(e)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(r)},trySubscribe:s,tryUnsubscribe:function(){r&&(r(),r=void 0,n.clear(),n=Aq)},getListeners:function(){return n}};return o}var Oq="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Lt.useLayoutEffect:Lt.useEffect;function Dq(e){var t=e.store,r=e.context,n=e.children,i=Lt.useMemo(function(){var e=jq(t);return{store:t,subscription:e}},[t]),s=Lt.useMemo(function(){return t.getState()},[t]);Oq(function(){var e=i.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[i,s]);var o=r||Iq;return zt.createElement(o.Provider,{value:i},n)}function Mq(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var Lq={exports:{}},zq={},Fq="function"==typeof Symbol&&Symbol.for,Bq=Fq?Symbol.for("react.element"):60103,Uq=Fq?Symbol.for("react.portal"):60106,Wq=Fq?Symbol.for("react.fragment"):60107,Hq=Fq?Symbol.for("react.strict_mode"):60108,$q=Fq?Symbol.for("react.profiler"):60114,Vq=Fq?Symbol.for("react.provider"):60109,qq=Fq?Symbol.for("react.context"):60110,Gq=Fq?Symbol.for("react.async_mode"):60111,Kq=Fq?Symbol.for("react.concurrent_mode"):60111,Jq=Fq?Symbol.for("react.forward_ref"):60112,Yq=Fq?Symbol.for("react.suspense"):60113,Zq=Fq?Symbol.for("react.suspense_list"):60120,Qq=Fq?Symbol.for("react.memo"):60115,Xq=Fq?Symbol.for("react.lazy"):60116,eG=Fq?Symbol.for("react.block"):60121,tG=Fq?Symbol.for("react.fundamental"):60117,rG=Fq?Symbol.for("react.responder"):60118,nG=Fq?Symbol.for("react.scope"):60119;function iG(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Bq:switch(e=e.type){case Gq:case Kq:case Wq:case $q:case Hq:case Yq:return e;default:switch(e=e&&e.$$typeof){case qq:case Jq:case Xq:case Qq:case Vq:return e;default:return t}}case Uq:return t}}}function sG(e){return iG(e)===Kq}zq.AsyncMode=Gq,zq.ConcurrentMode=Kq,zq.ContextConsumer=qq,zq.ContextProvider=Vq,zq.Element=Bq,zq.ForwardRef=Jq,zq.Fragment=Wq,zq.Lazy=Xq,zq.Memo=Qq,zq.Portal=Uq,zq.Profiler=$q,zq.StrictMode=Hq,zq.Suspense=Yq,zq.isAsyncMode=function(e){return sG(e)||iG(e)===Gq},zq.isConcurrentMode=sG,zq.isContextConsumer=function(e){return iG(e)===qq},zq.isContextProvider=function(e){return iG(e)===Vq},zq.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Bq},zq.isForwardRef=function(e){return iG(e)===Jq},zq.isFragment=function(e){return iG(e)===Wq},zq.isLazy=function(e){return iG(e)===Xq},zq.isMemo=function(e){return iG(e)===Qq},zq.isPortal=function(e){return iG(e)===Uq},zq.isProfiler=function(e){return iG(e)===$q},zq.isStrictMode=function(e){return iG(e)===Hq},zq.isSuspense=function(e){return iG(e)===Yq},zq.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Wq||e===Kq||e===$q||e===Hq||e===Yq||e===Zq||"object"==typeof e&&null!==e&&(e.$$typeof===Xq||e.$$typeof===Qq||e.$$typeof===Vq||e.$$typeof===qq||e.$$typeof===Jq||e.$$typeof===tG||e.$$typeof===rG||e.$$typeof===nG||e.$$typeof===eG)},zq.typeOf=iG,Lq.exports=zq;var oG=Lq.exports,aG={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},lG={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},cG={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},uG={};function dG(e){return oG.isMemo(e)?cG:uG[e.$$typeof]||aG}uG[oG.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},uG[oG.Memo]=cG;var pG=Object.defineProperty,hG=Object.getOwnPropertyNames,fG=Object.getOwnPropertySymbols,mG=Object.getOwnPropertyDescriptor,vG=Object.getPrototypeOf,gG=Object.prototype;var yG=function e(t,r,n){if("string"!=typeof r){if(gG){var i=vG(r);i&&i!==gG&&e(t,i,n)}var s=hG(r);fG&&(s=s.concat(fG(r)));for(var o=dG(t),a=dG(r),l=0;l<s.length;++l){var c=s[l];if(!(lG[c]||n&&n[c]||a&&a[c]||o&&o[c])){var u=mG(r,c);try{pG(t,c,u)}catch(Nie){}}}}return t};const bG=Ze(yG);var xG={exports:{}},wG={},SG=60103,CG=60106,EG=60107,TG=60108,NG=60114,PG=60109,RG=60110,IG=60112,kG=60113,_G=60120,AG=60115,jG=60116,OG=60121,DG=60122,MG=60117,LG=60129,zG=60131;if("function"==typeof Symbol&&Symbol.for){var FG=Symbol.for;SG=FG("react.element"),CG=FG("react.portal"),EG=FG("react.fragment"),TG=FG("react.strict_mode"),NG=FG("react.profiler"),PG=FG("react.provider"),RG=FG("react.context"),IG=FG("react.forward_ref"),kG=FG("react.suspense"),_G=FG("react.suspense_list"),AG=FG("react.memo"),jG=FG("react.lazy"),OG=FG("react.block"),DG=FG("react.server.block"),MG=FG("react.fundamental"),LG=FG("react.debug_trace_mode"),zG=FG("react.legacy_hidden")}function BG(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case SG:switch(e=e.type){case EG:case NG:case TG:case kG:case _G:return e;default:switch(e=e&&e.$$typeof){case RG:case IG:case jG:case AG:case PG:return e;default:return t}}case CG:return t}}}var UG=PG,WG=SG,HG=IG,$G=EG,VG=jG,qG=AG,GG=CG,KG=NG,JG=TG,YG=kG;wG.ContextConsumer=RG,wG.ContextProvider=UG,wG.Element=WG,wG.ForwardRef=HG,wG.Fragment=$G,wG.Lazy=VG,wG.Memo=qG,wG.Portal=GG,wG.Profiler=KG,wG.StrictMode=JG,wG.Suspense=YG,wG.isAsyncMode=function(){return!1},wG.isConcurrentMode=function(){return!1},wG.isContextConsumer=function(e){return BG(e)===RG},wG.isContextProvider=function(e){return BG(e)===PG},wG.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===SG},wG.isForwardRef=function(e){return BG(e)===IG},wG.isFragment=function(e){return BG(e)===EG},wG.isLazy=function(e){return BG(e)===jG},wG.isMemo=function(e){return BG(e)===AG},wG.isPortal=function(e){return BG(e)===CG},wG.isProfiler=function(e){return BG(e)===NG},wG.isStrictMode=function(e){return BG(e)===TG},wG.isSuspense=function(e){return BG(e)===kG},wG.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===EG||e===NG||e===LG||e===TG||e===kG||e===_G||e===zG||"object"==typeof e&&null!==e&&(e.$$typeof===jG||e.$$typeof===AG||e.$$typeof===PG||e.$$typeof===RG||e.$$typeof===IG||e.$$typeof===MG||e.$$typeof===OG||e[0]===DG)},wG.typeOf=BG,xG.exports=wG;var ZG=xG.exports,QG=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],XG=["reactReduxForwardedRef"],eK=[],tK=[null,null];function rK(e,t){var r=e[1];return[t.payload,r+1]}function nK(e,t,r){Oq(function(){return e.apply(void 0,t)},r)}function iK(e,t,r,n,i,s,o){e.current=n,t.current=i,r.current=!1,s.current&&(s.current=null,o())}function sK(e,t,r,n,i,s,o,a,l,c){if(e){var u=!1,d=null,p=function(){if(!u){var e,r,p=t.getState();try{e=n(p,i.current)}catch(Nie){r=Nie,d=Nie}r||(d=null),e===s.current?o.current||l():(s.current=e,a.current=e,o.current=!0,c({type:"STORE_UPDATED",payload:{error:r}}))}};r.onStateChange=p,r.trySubscribe(),p();return function(){if(u=!0,r.tryUnsubscribe(),r.onStateChange=null,d)throw d}}}var oK=function(){return[null,0]};function aK(e,t){void 0===t&&(t={});var r=t,n=r.getDisplayName,i=void 0===n?function(e){return"ConnectAdvanced("+e+")"}:n,s=r.methodName,o=void 0===s?"connectAdvanced":s,a=r.renderCountProp,l=void 0===a?void 0:a,c=r.shouldHandleStateChanges,u=void 0===c||c,d=r.storeKey,p=void 0===d?"store":d;r.withRef;var h=r.forwardRef,f=void 0!==h&&h,m=r.context,v=void 0===m?Iq:m,g=Mq(r,QG),y=v;return function(t){var r=t.displayName||t.name||"Component",n=i(r),s=dq({},g,{getDisplayName:i,methodName:o,renderCountProp:l,shouldHandleStateChanges:u,storeKey:p,displayName:n,wrappedComponentName:r,WrappedComponent:t}),a=g.pure;var c=a?Lt.useMemo:function(e){return e()};function d(r){var n=Lt.useMemo(function(){var e=r.reactReduxForwardedRef,t=Mq(r,XG);return[r.context,e,t]},[r]),i=n[0],o=n[1],a=n[2],l=Lt.useMemo(function(){return i&&i.Consumer&&ZG.isContextConsumer(zt.createElement(i.Consumer,null))?i:y},[i,y]),d=Lt.useContext(l),p=Boolean(r.store)&&Boolean(r.store.getState)&&Boolean(r.store.dispatch);Boolean(d)&&Boolean(d.store);var h=p?r.store:d.store,f=Lt.useMemo(function(){return function(t){return e(t.dispatch,s)}(h)},[h]),m=Lt.useMemo(function(){if(!u)return tK;var e=jq(h,p?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[h,p,d]),v=m[0],g=m[1],b=Lt.useMemo(function(){return p?d:dq({},d,{subscription:v})},[p,d,v]),x=Lt.useReducer(rK,eK,oK),w=x[0][0],S=x[1];if(w&&w.error)throw w.error;var C=Lt.useRef(),E=Lt.useRef(a),T=Lt.useRef(),N=Lt.useRef(!1),P=c(function(){return T.current&&a===E.current?T.current:f(h.getState(),a)},[h,w,a]);nK(iK,[E,C,N,a,P,T,g]),nK(sK,[u,h,v,f,E,C,N,T,g,S],[h,v,f]);var R=Lt.useMemo(function(){return zt.createElement(t,dq({},P,{ref:o}))},[o,t,P]);return Lt.useMemo(function(){return u?zt.createElement(l.Provider,{value:b},R):R},[l,R,b])}var h=a?zt.memo(d):d;if(h.WrappedComponent=t,h.displayName=d.displayName=n,f){var m=zt.forwardRef(function(e,t){return zt.createElement(h,dq({},e,{reactReduxForwardedRef:t}))});return m.displayName=n,m.WrappedComponent=t,bG(m,t)}return bG(h,t)}}function lK(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function cK(e,t){if(lK(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!lK(e[r[i]],t[r[i]]))return!1;return!0}function uK(e){return function(t,r){var n=e(t,r);function i(){return n}return i.dependsOnOwnProps=!1,i}}function dK(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function pK(e,t){return function(t,r){r.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=dK(e);var i=n(t,r);return"function"==typeof i&&(n.mapToProps=i,n.dependsOnOwnProps=dK(i),i=n(t,r)),i},n}}const hK=[function(e){return"function"==typeof e?pK(e):void 0},function(e){return e?void 0:uK(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?uK(function(t){return function(e,t){var r={},n=function(n){var i=e[n];"function"==typeof i&&(r[n]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)n(i);return r}(e,t)}):void 0}];const fK=[function(e){return"function"==typeof e?pK(e):void 0},function(e){return e?void 0:uK(function(){return{}})}];function mK(e,t,r){return dq({},r,e,t)}const vK=[function(e){return"function"==typeof e?function(e){return function(t,r){r.displayName;var n,i=r.pure,s=r.areMergedPropsEqual,o=!1;return function(t,r,a){var l=e(t,r,a);return o?i&&s(l,n)||(n=l):(o=!0,n=l),n}}}(e):void 0},function(e){return e?void 0:function(){return mK}}];var gK=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function yK(e,t,r,n){return function(i,s){return r(e(i,s),t(n,s),s)}}function bK(e,t,r,n,i){var s,o,a,l,c,u=i.areStatesEqual,d=i.areOwnPropsEqual,p=i.areStatePropsEqual,h=!1;function f(i,h){var f,m,v=!d(h,o),g=!u(i,s,h,o);return s=i,o=h,v&&g?(a=e(s,o),t.dependsOnOwnProps&&(l=t(n,o)),c=r(a,l,o)):v?(e.dependsOnOwnProps&&(a=e(s,o)),t.dependsOnOwnProps&&(l=t(n,o)),c=r(a,l,o)):g?(f=e(s,o),m=!p(f,a),a=f,m&&(c=r(a,l,o)),c):c}return function(i,u){return h?f(i,u):(a=e(s=i,o=u),l=t(n,o),c=r(a,l,o),h=!0,c)}}function xK(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,i=t.initMergeProps,s=Mq(t,gK),o=r(e,s),a=n(e,s),l=i(e,s);return(s.pure?bK:yK)(o,a,l,e,s)}var wK=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function SK(e,t,r){for(var n=t.length-1;n>=0;n--){var i=t[n](e);if(i)return i}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+n.wrappedComponentName+".")}}function CK(e,t){return e===t}function EK(e){var t=void 0===e?{}:e,r=t.connectHOC,n=void 0===r?aK:r,i=t.mapStateToPropsFactories,s=void 0===i?fK:i,o=t.mapDispatchToPropsFactories,a=void 0===o?hK:o,l=t.mergePropsFactories,c=void 0===l?vK:l,u=t.selectorFactory,d=void 0===u?xK:u;return function(e,t,r,i){void 0===i&&(i={});var o=i,l=o.pure,u=void 0===l||l,p=o.areStatesEqual,h=void 0===p?CK:p,f=o.areOwnPropsEqual,m=void 0===f?cK:f,v=o.areStatePropsEqual,g=void 0===v?cK:v,y=o.areMergedPropsEqual,b=void 0===y?cK:y,x=Mq(o,wK),w=SK(e,s,"mapStateToProps"),S=SK(t,a,"mapDispatchToProps"),C=SK(r,c,"mergeProps");return n(d,dq({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:S,initMergeProps:C,pure:u,areStatesEqual:h,areOwnPropsEqual:m,areStatePropsEqual:g,areMergedPropsEqual:b},x))}}const TK=EK();var NK;function PK(e,t){var r=Lt.useState(function(){return{inputs:t,result:e()}})[0],n=Lt.useRef(!0),i=Lt.useRef(r),s=n.current||Boolean(t&&i.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,i.current.inputs))?i.current:{inputs:t,result:e()};return Lt.useEffect(function(){n.current=!1,i.current=s},[s]),s.result}NK=eh.unstable_batchedUpdates,kq=NK;var RK=PK,IK=function(e,t){return PK(function(){return e},t)};var kK=function(e){var t=e.top,r=e.right,n=e.bottom,i=e.left;return{top:t,right:r,bottom:n,left:i,width:r-i,height:n-t,x:i,y:t,center:{x:(r+i)/2,y:(n+t)/2}}},_K=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},AK=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},jK={top:0,right:0,bottom:0,left:0},OK=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?jK:r,i=e.border,s=void 0===i?jK:i,o=e.padding,a=void 0===o?jK:o,l=kK(_K(t,n)),c=kK(AK(t,s)),u=kK(AK(c,a));return{marginBox:l,borderBox:kK(t),paddingBox:c,contentBox:u,margin:n,border:s,padding:a}},DK=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&function(){throw new Error("Invariant failed")}(),r},MK=function(e,t){var r,n,i=e.borderBox,s=e.border,o=e.margin,a=e.padding,l=(n=t,{top:(r=i).top+n.y,left:r.left+n.x,bottom:r.bottom+n.y,right:r.right+n.x});return OK({borderBox:l,border:s,margin:o,padding:a})},LK=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),MK(e,t)},zK=function(e,t){var r={top:DK(t.marginTop),right:DK(t.marginRight),bottom:DK(t.marginBottom),left:DK(t.marginLeft)},n={top:DK(t.paddingTop),right:DK(t.paddingRight),bottom:DK(t.paddingBottom),left:DK(t.paddingLeft)},i={top:DK(t.borderTopWidth),right:DK(t.borderRightWidth),bottom:DK(t.borderBottomWidth),left:DK(t.borderLeftWidth)};return OK({borderBox:e,margin:r,padding:n,border:i})},FK=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return zK(t,r)},BK=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function UK(e,t){return e===t||!(!BK(e)||!BK(t))}function WK(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!UK(e[r],t[r]))return!1;return!0}function HK(e,t){var r;void 0===t&&(t=WK);var n,i=[],s=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return s&&r===this&&t(o,i)||(n=e.apply(this,o),s=!0,r=this,i=o),n}}var $K=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];t=i,r||(r=requestAnimationFrame(function(){r=null,e.apply(void 0,t)}))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n};function VK(e,t){}function qK(){}function GK(e,t,r){var n=t.map(function(t){var n,i,s=(n=r,i=t.options,dq({},n,{},i));return e.addEventListener(t.eventName,t.fn,s),function(){e.removeEventListener(t.eventName,t.fn,s)}});return function(){n.forEach(function(e){e()})}}VK.bind(null,"warn"),VK.bind(null,"error");function KK(e){this.message=e}function JK(e,t){throw new KK("Invariant failed")}KK.prototype.toString=function(){return this.message};var YK=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).callbacks=null,t.unbind=qK,t.onWindowError=function(e){var r=t.getCallbacks();r.isDragging()&&r.tryAbort(),e.error instanceof KK&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}uq(t,e);var r=t.prototype;return r.componentDidMount=function(){this.unbind=GK(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(e){if(!(e instanceof KK))throw e;this.setState({})},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(zt.Component),ZK=function(e){return e+1},QK=function(e,t){var r=e.droppableId===t.droppableId,n=ZK(e.index),i=ZK(t.index);return r?"\n      You have moved the item from position "+n+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+n+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},XK=function(e,t,r){return t.droppableId===r.droppableId?"\n      The item "+e+"\n      has been combined with "+r.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+r.draggableId+"\n      in list "+r.droppableId+"\n    "},eJ=function(e){return"\n  The item has returned to its starting position\n  of "+ZK(e.index)+"\n"},tJ="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",rJ=function(e){return"\n  You have lifted an item in position "+ZK(e.source.index)+"\n"},nJ=function(e){var t=e.destination;if(t)return QK(e.source,t);var r=e.combine;return r?XK(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},iJ=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+eJ(e.source)+"\n    ";var t=e.destination,r=e.combine;return t?"\n      You have dropped the item.\n      "+QK(e.source,t)+"\n    ":r?"\n      You have dropped the item.\n      "+XK(e.draggableId,e.source,r)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+eJ(e.source)+"\n  "},sJ={x:0,y:0},oJ=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},aJ=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},lJ=function(e,t){return e.x===t.x&&e.y===t.y},cJ=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},uJ=function(e,t,r){var n;return void 0===r&&(r=0),(n={})[e]=t,n["x"===e?"y":"x"]=r,n},dJ=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},pJ=function(e,t){return Math.min.apply(Math,t.map(function(t){return dJ(e,t)}))},hJ=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},fJ=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},mJ=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},vJ=function(e,t){return t&&t.shouldClipSubject?function(e,t){var r=kK({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r}(t.pageMarginBox,e):kK(e)},gJ=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,i=e.frame,s=function(e,t){return t?fJ(e,t.scroll.diff.displacement):e}(t.marginBox,i),o=function(e,t,r){var n;return r&&r.increasedBy?dq({},e,((n={})[t.end]=e[t.end]+r.increasedBy[t.line],n)):e}(s,n,r);return{page:t,withPlaceholder:r,active:vJ(o,i)}},yJ=function(e,t){e.frame||JK();var r=e.frame,n=aJ(t,r.scroll.initial),i=cJ(n),s=dq({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:i},max:r.scroll.max}});return dq({},e,{frame:s,subject:gJ({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s})})};function bJ(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function xJ(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function wJ(e,t){if(e.find)return e.find(t);var r=xJ(e,t);return-1!==r?e[r]:void 0}function SJ(e){return Array.prototype.slice.call(e)}var CJ=HK(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),EJ=HK(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),TJ=HK(function(e){return bJ(e)}),NJ=HK(function(e){return bJ(e)}),PJ=HK(function(e,t){var r=NJ(t).filter(function(t){return e===t.descriptor.droppableId}).sort(function(e,t){return e.descriptor.index-t.descriptor.index});return r});function RJ(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function IJ(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var kJ=HK(function(e,t){return t.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),_J=function(e,t){return e.descriptor.droppableId===t.descriptor.id},AJ={point:sJ,value:0},jJ={invisible:{},visible:{},all:[]},OJ={displaced:jJ,displacedBy:AJ,at:null},DJ=function(e,t){return function(r){return e<=r&&r<=t}},MJ=function(e){var t=DJ(e.top,e.bottom),r=DJ(e.left,e.right);return function(n){if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;var i=t(n.top)||t(n.bottom),s=r(n.left)||r(n.right);if(i&&s)return!0;var o=n.top<e.top&&n.bottom>e.bottom,a=n.left<e.left&&n.right>e.right;return!(!o||!a)||(o&&s||a&&i)}},LJ=function(e){var t=DJ(e.top,e.bottom),r=DJ(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&r(e.left)&&r(e.right)}},zJ={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},FJ={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},BJ=function(e){var t=e.target,r=e.destination,n=e.viewport,i=e.withDroppableDisplacement,s=e.isVisibleThroughFrameFn,o=i?function(e,t){var r=t.frame?t.frame.scroll.diff.displacement:sJ;return fJ(e,r)}(t,r):t;return function(e,t,r){return!!t.subject.active&&r(t.subject.active)(e)}(o,r,s)&&function(e,t,r){return r(t)(e)}(o,n,s)},UJ=function(e){return BJ(dq({},e,{isVisibleThroughFrameFn:LJ}))};function WJ(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,i=e.viewport,s=e.forceShouldAnimate,o=e.last;return t.reduce(function(e,t){var a=function(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return kK(_K(r,n))}(t,n),l=t.descriptor.id;if(e.all.push(l),!BJ(dq({},{target:a,destination:r,viewport:i,withDroppableDisplacement:!0},{isVisibleThroughFrameFn:MJ})))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,r){if("boolean"==typeof r)return r;if(!t)return!0;var n=t.invisible,i=t.visible;if(n[e])return!1;var s=i[e];return!s||s.shouldAnimate}(l,o,s),u={draggableId:l,shouldAnimate:c};return e.visible[l]=u,e},{all:[],visible:{},invisible:{}})}function HJ(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,i=e.destination,s=function(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}(t,{inHomeList:r});return{displaced:jJ,displacedBy:n,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:s}}}}function $J(e){var t=e.draggable,r=e.insideDestination,n=e.destination,i=e.viewport,s=e.displacedBy,o=e.last,a=e.index,l=e.forceShouldAnimate,c=_J(t,n);if(null==a)return HJ({insideDestination:r,inHomeList:c,displacedBy:s,destination:n});var u=wJ(r,function(e){return e.descriptor.index===a});if(!u)return HJ({insideDestination:r,inHomeList:c,displacedBy:s,destination:n});var d=kJ(t,r),p=r.indexOf(u);return{displaced:WJ({afterDragging:d.slice(p),destination:n,displacedBy:s,last:o,viewport:i.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:a}}}}function VJ(e,t){return Boolean(t.effected[e])}var qJ=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,i=e.draggables,s=e.destination,o=e.insideDestination,a=e.previousImpact,l=e.viewport,c=e.afterCritical,u=a.at;if(u||JK(),"REORDER"===u.type){var d=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,i=e.location;if(!n.length)return null;var s=i.index,o=t?s+1:s-1,a=n[0].descriptor.index,l=n[n.length-1].descriptor.index;return o<a||o>(r?l:l+1)?null:o}({isMovingForward:t,isInHomeList:r,location:u.destination,insideDestination:o});return null==d?null:$J({draggable:n,insideDestination:o,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})}var p=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,i=e.combine,s=e.afterCritical;if(!r.isCombineEnabled)return null;var o=i.draggableId,a=n[o].descriptor.index;return VJ(o,s)?t?a:a-1:t?a+1:a}({isMovingForward:t,destination:s,displaced:a.displaced,draggables:i,combine:u.combine,afterCritical:c});return null==p?null:$J({draggable:n,insideDestination:o,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:p})},GJ=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,i=IJ(r);i||JK();var s=i.draggableId,o=n[s].page.borderBox.center,a=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,i=e.displacedBy,s=Boolean(t.visible[n]||t.invisible[n]);return VJ(n,r)?s?sJ:cJ(i.point):s?i.point:sJ}({displaced:r.displaced,afterCritical:t,combineWith:s,displacedBy:r.displacedBy});return oJ(o,a)},KJ=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},JJ=function(e,t,r){return t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2},YJ=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return uJ(t.line,r.marginBox[t.end]+KJ(t,n),JJ(t,r.marginBox,n))},ZJ=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return uJ(t.line,r.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,n),JJ(t,r.marginBox,n))},QJ=function(e){var t=e.impact,r=e.draggable,n=e.draggables,i=e.droppable,s=e.afterCritical,o=PJ(i.descriptor.id,n),a=r.page,l=i.axis;if(!o.length)return function(e){var t=e.axis,r=e.moveInto,n=e.isMoving;return uJ(t.line,r.contentBox[t.start]+KJ(t,n),JJ(t,r.contentBox,n))}({axis:l,moveInto:i.page,isMoving:a});var c=t.displaced,u=t.displacedBy,d=c.all[0];if(d){var p=n[d];if(VJ(d,s))return ZJ({axis:l,moveRelativeTo:p.page,isMoving:a});var h=MK(p.page,u.point);return ZJ({axis:l,moveRelativeTo:h,isMoving:a})}var f=o[o.length-1];if(f.descriptor.id===r.descriptor.id)return a.borderBox.center;if(VJ(f.descriptor.id,s)){var m=MK(f.page,cJ(s.displacedBy.point));return YJ({axis:l,moveRelativeTo:m,isMoving:a})}return YJ({axis:l,moveRelativeTo:f.page,isMoving:a})},XJ=function(e,t){var r=e.frame;return r?oJ(t,r.scroll.diff.displacement):t},eY=function(e){var t=function(e){var t=e.impact,r=e.draggable,n=e.droppable,i=e.draggables,s=e.afterCritical,o=r.page.borderBox.center,a=t.at;return n&&a?"REORDER"===a.type?QJ({impact:t,draggable:r,draggables:i,droppable:n,afterCritical:s}):GJ({impact:t,draggables:i,afterCritical:s}):o}(e),r=e.droppable;return r?XJ(r,t):t},tY=function(e,t){var r=aJ(t,e.scroll.initial),n=cJ(r);return{frame:kK({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function rY(e,t){return e.map(function(e){return t[e]})}var nY=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=function(e,t){return oJ(e.scroll.diff.displacement,t)}(e.viewport,t),i=aJ(n,r.page.borderBox.center);return oJ(r.client.borderBox.center,i)},iY=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,i=e.viewport,s=e.withDroppableDisplacement,o=e.onlyOnMainAxis,a=void 0!==o&&o,l=aJ(n,t.page.borderBox.center),c={target:fJ(t.page.borderBox,l),destination:r,withDroppableDisplacement:s,viewport:i};return a?function(e){return BJ(dq({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var r=DJ(e.top,e.bottom),n=DJ(e.left,e.right);return function(e){return t===zJ?r(e.top)&&r(e.bottom):n(e.left)&&n(e.right)}})}));var t}(c):UJ(c)},sY=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,i=e.draggables,s=e.previousImpact,o=e.viewport,a=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!n.isEnabled)return null;var u=PJ(n.descriptor.id,i),d=_J(r,n),p=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,i=e.insideDestination,s=e.previousImpact;if(!n.isCombineEnabled)return null;if(!RJ(s))return null;function o(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:n.descriptor.id}};return dq({},s,{at:t})}var a=s.displaced.all,l=a.length?a[0]:null;if(t)return l?o(l):null;var c=kJ(r,i);if(!l)return c.length?o(c[c.length-1].descriptor.id):null;var u=xJ(c,function(e){return e.descriptor.id===l});-1===u&&JK();var d=u-1;return d<0?null:o(c[d].descriptor.id)}({isMovingForward:t,draggable:r,destination:n,insideDestination:u,previousImpact:s})||qJ({isMovingForward:t,isInHomeList:d,draggable:r,draggables:i,destination:n,insideDestination:u,previousImpact:s,viewport:o,afterCritical:c});if(!p)return null;var h=eY({impact:p,draggable:r,droppable:n,draggables:i,afterCritical:c});if(iY({draggable:r,destination:n,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:nY({pageBorderBoxCenter:h,draggable:r,viewport:o}),impact:p,scrollJumpRequest:null};var f=aJ(h,a),m=function(e){var t=e.impact,r=e.viewport,n=e.destination,i=e.draggables,s=e.maxScrollChange,o=tY(r,oJ(r.scroll.current,s)),a=n.frame?yJ(n,oJ(n.frame.scroll.current,s)):n,l=t.displaced,c=WJ({afterDragging:rY(l.all,i),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),u=WJ({afterDragging:rY(l.all,i),destination:a,displacedBy:t.displacedBy,viewport:r.frame,last:l,forceShouldAnimate:!1}),d={},p={},h=[l,c,u];return l.all.forEach(function(e){var t=function(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}(e,h);t?p[e]=t:d[e]=!0}),dq({},t,{displaced:{all:l.all,invisible:d,visible:p}})}({impact:p,viewport:o,destination:n,draggables:i,maxScrollChange:f});return{clientSelection:l,impact:m,scrollJumpRequest:f}},oY=function(e){var t=e.subject.active;return t||JK(),t},aY=function(e,t){var r=e.page.borderBox.center;return VJ(e.descriptor.id,t)?aJ(r,t.displacedBy.point):r},lY=function(e,t){var r=e.page.borderBox;return VJ(e.descriptor.id,t)?fJ(r,cJ(t.displacedBy.point)):r},cY=HK(function(e,t){var r=t[e.line];return{value:r,point:uJ(e.line,r)}}),uY=function(e,t){return dq({},e,{scroll:dq({},e.scroll,{max:t})})},dY=function(e,t,r){var n=e.frame;_J(t,e)&&JK(),e.subject.withPlaceholder&&JK();var i=cY(e.axis,t.displaceBy).point,s=function(e,t,r){var n=e.axis;if("virtual"===e.descriptor.mode)return uJ(n.line,t[n.line]);var i=e.subject.page.contentBox[n.size],s=PJ(e.descriptor.id,r).reduce(function(e,t){return e+t.client.marginBox[n.size]},0)+t[n.line]-i;return s<=0?null:uJ(n.line,s)}(e,i,r),o={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n)return dq({},e,{subject:gJ({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame})});var a=s?oJ(n.scroll.max,s):n.scroll.max,l=uY(n,a);return dq({},e,{subject:gJ({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:l}),frame:l})},pY=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,i=e.isOver,s=e.draggables,o=e.droppables,a=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,i=e.droppables,s=e.viewport,o=n.subject.active;if(!o)return null;var a=n.axis,l=DJ(o[a.start],o[a.end]),c=TJ(i).filter(function(e){return e!==n}).filter(function(e){return e.isEnabled}).filter(function(e){return Boolean(e.subject.active)}).filter(function(e){return MJ(s.frame)(oY(e))}).filter(function(e){var r=oY(e);return t?o[a.crossAxisEnd]<r[a.crossAxisEnd]:r[a.crossAxisStart]<o[a.crossAxisStart]}).filter(function(e){var t=oY(e),r=DJ(t[a.start],t[a.end]);return l(t[a.start])||l(t[a.end])||r(o[a.start])||r(o[a.end])}).sort(function(e,r){var n=oY(e)[a.crossAxisStart],i=oY(r)[a.crossAxisStart];return t?n-i:i-n}).filter(function(e,t,r){return oY(e)[a.crossAxisStart]===oY(r[0])[a.crossAxisStart]});if(!c.length)return null;if(1===c.length)return c[0];var u=c.filter(function(e){return DJ(oY(e)[a.start],oY(e)[a.end])(r[a.line])});return 1===u.length?u[0]:u.length>1?u.sort(function(e,t){return oY(e)[a.start]-oY(t)[a.start]})[0]:c.sort(function(e,t){var n=pJ(r,mJ(oY(e))),i=pJ(r,mJ(oY(t)));return n!==i?n-i:oY(e)[a.start]-oY(t)[a.start]})[0]}({isMovingForward:t,pageBorderBoxCenter:r,source:i,droppables:o,viewport:a});if(!c)return null;var u=PJ(c.descriptor.id,s),d=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,i=e.insideDestination,s=e.afterCritical,o=i.filter(function(e){return UJ({target:lY(e,s),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(e,r){var i=dJ(t,XJ(n,aY(e,s))),o=dJ(t,XJ(n,aY(r,s)));return i<o?-1:o<i?1:e.descriptor.index-r.descriptor.index});return o[0]||null}({pageBorderBoxCenter:r,viewport:a,destination:c,insideDestination:u,afterCritical:l}),p=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,i=e.draggable,s=e.draggables,o=e.destination,a=e.viewport,l=e.afterCritical;if(!r){if(n.length)return null;var c={displaced:jJ,displacedBy:AJ,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},u=eY({impact:c,draggable:i,droppable:o,draggables:s,afterCritical:l}),d=_J(i,o)?o:dY(o,i,s);return iY({draggable:i,destination:d,newPageBorderBoxCenter:u,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var p,h=Boolean(t[o.axis.line]<=r.page.borderBox.center[o.axis.line]),f=(p=r.descriptor.index,r.descriptor.id===i.descriptor.id||h?p:p+1),m=cY(o.axis,i.displaceBy);return $J({draggable:i,insideDestination:n,destination:o,viewport:a,displacedBy:m,last:jJ,index:f})}({previousPageBorderBoxCenter:r,destination:c,draggable:n,draggables:s,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:l});if(!p)return null;var h=eY({impact:p,draggable:n,droppable:c,draggables:s,afterCritical:l});return{clientSelection:nY({pageBorderBoxCenter:h,draggable:n,viewport:a}),impact:p,scrollJumpRequest:null}},hY=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},fY=function(e){var t=e.state,r=e.type,n=function(e,t){var r=hY(e);return r?t[r]:null}(t.impact,t.dimensions.droppables),i=Boolean(n),s=t.dimensions.droppables[t.critical.droppable.id],o=n||s,a=o.axis.direction,l="vertical"===a&&("MOVE_UP"===r||"MOVE_DOWN"===r)||"horizontal"===a&&("MOVE_LEFT"===r||"MOVE_RIGHT"===r);if(l&&!i)return null;var c="MOVE_DOWN"===r||"MOVE_RIGHT"===r,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,p=t.dimensions,h=p.draggables,f=p.droppables;return l?sY({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:o,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):pY({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:o,draggables:h,droppables:f,viewport:t.viewport,afterCritical:t.afterCritical})};function mY(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function vY(e){var t=DJ(e.top,e.bottom),r=DJ(e.left,e.right);return function(e){return t(e.y)&&r(e.x)}}function gY(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,i=TJ(n).filter(function(e){if(!e.isEnabled)return!1;var r,n,i=e.subject.active;if(!i)return!1;if(n=i,!((r=t).left<n.right&&r.right>n.left&&r.top<n.bottom&&r.bottom>n.top))return!1;if(vY(i)(t.center))return!0;var s=e.axis,o=i.center[s.crossAxisLine],a=t[s.crossAxisStart],l=t[s.crossAxisEnd],c=DJ(i[s.crossAxisStart],i[s.crossAxisEnd]),u=c(a),d=c(l);return!u&&!d||(u?a<o:l>o)});return i.length?1===i.length?i[0].descriptor.id:function(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,i=r.page.borderBox.center,s=n.map(function(e){var r=e.axis,n=uJ(e.axis.line,t.center[r.line],e.page.borderBox.center[r.crossAxisLine]);return{id:e.descriptor.id,distance:dJ(i,n)}}).sort(function(e,t){return t.distance-e.distance});return s[0]?s[0].id:null}({pageBorderBox:t,draggable:r,candidates:i}):null}var yY=function(e,t){return kK(fJ(e,t))};function bY(e){var t=e.displaced,r=e.id;return Boolean(t.visible[r]||t.invisible[r])}var xY=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,i=e.droppables,s=e.previousImpact,o=e.viewport,a=e.afterCritical,l=yY(r.page.borderBox,t),c=gY({pageBorderBox:l,draggable:r,droppables:i});if(!c)return OJ;var u,d,p=i[c],h=PJ(p.descriptor.id,n),f=(u=l,(d=p.frame)?yY(u,d.scroll.diff.value):u);return function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,i=e.destination,s=e.insideDestination,o=e.afterCritical;if(!i.isCombineEnabled)return null;var a=i.axis,l=cY(i.axis,t.displaceBy),c=l.value,u=r[a.start],d=r[a.end],p=wJ(kJ(t,s),function(e){var t=e.descriptor.id,r=e.page.borderBox,i=r[a.size]/4,s=VJ(t,o),l=bY({displaced:n.displaced,id:t});return s?l?d>r[a.start]+i&&d<r[a.end]-i:u>r[a.start]-c+i&&u<r[a.end]-c-i:l?d>r[a.start]+c+i&&d<r[a.end]+c-i:u>r[a.start]+i&&u<r[a.end]-i});return p?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:f,draggable:r,previousImpact:s,destination:p,insideDestination:h,afterCritical:a})||function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,i=e.insideDestination,s=e.last,o=e.viewport,a=e.afterCritical,l=n.axis,c=cY(n.axis,r.displaceBy),u=c.value,d=t[l.start],p=t[l.end],h=function(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}({draggable:r,closest:wJ(kJ(r,i),function(e){var t=e.descriptor.id,r=e.page.borderBox.center[l.line],n=VJ(t,a),i=bY({displaced:s,id:t});return n?i?p<=r:d<r-u:i?p<=r+u:d<r}),inHomeList:_J(r,n)});return $J({draggable:r,insideDestination:i,destination:n,viewport:o,last:s,displacedBy:c,index:h})}({pageBorderBoxWithDroppableScroll:f,draggable:r,destination:p,insideDestination:h,last:s.displaced,viewport:o,afterCritical:a})},wY=function(e,t){var r;return dq({},e,((r={})[t.descriptor.id]=t,r))},SY=function(e){var t=e.previousImpact,r=e.impact,n=e.droppables,i=hY(t),s=hY(r);if(!i)return n;if(i===s)return n;var o=n[i];if(!o.subject.withPlaceholder)return n;var a=function(e){var t=e.subject.withPlaceholder;t||JK();var r=e.frame;if(!r)return dq({},e,{subject:gJ({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var n=t.oldFrameMaxScroll;n||JK();var i=uY(r,n);return dq({},e,{subject:gJ({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null}),frame:i})}(o);return wY(n,a)},CY=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,i=e.viewport,s=e.impact,o=e.scrollJumpRequest,a=i||t.viewport,l=n||t.dimensions,c=r||t.current.client.selection,u=aJ(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:oJ(t.initial.client.borderBoxCenter,u)},p={selection:oJ(d.selection,a.scroll.current),borderBoxCenter:oJ(d.borderBoxCenter,a.scroll.current),offset:oJ(d.offset,a.scroll.diff.value)},h={client:d,page:p};if("COLLECTING"===t.phase)return dq({phase:"COLLECTING"},t,{dimensions:l,viewport:a,current:h});var f=l.draggables[t.critical.draggable.id],m=s||xY({pageOffset:p.offset,draggable:f,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:a,afterCritical:t.afterCritical}),v=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,i=e.previousImpact,s=e.impact,o=SY({previousImpact:i,impact:s,droppables:n}),a=hY(s);if(!a)return o;var l=n[a];if(_J(t,l))return o;if(l.subject.withPlaceholder)return o;var c=dY(l,t,r);return wY(o,c)}({draggable:f,impact:m,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return dq({},t,{current:h,dimensions:{draggables:l.draggables,droppables:v},impact:m,viewport:a,scrollJumpRequest:o||null,forceShouldAnimate:!o&&null})};var EY=function(e){var t=e.impact,r=e.viewport,n=e.draggables,i=e.destination,s=e.forceShouldAnimate,o=t.displaced,a=function(e,t){return e.map(function(e){return t[e]})}(o.all,n);return dq({},t,{displaced:WJ({afterDragging:a,destination:i,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:s,last:o})})},TY=function(e){var t=e.impact,r=e.draggable,n=e.droppable,i=e.draggables,s=e.viewport,o=e.afterCritical,a=eY({impact:t,draggable:r,draggables:i,droppable:n,afterCritical:o});return nY({pageBorderBoxCenter:a,draggable:r,viewport:s})},NY=function(e){var t=e.state,r=e.dimensions,n=e.viewport;"SNAP"!==t.movementMode&&JK();var i=t.impact,s=n||t.viewport,o=r||t.dimensions,a=o.draggables,l=o.droppables,c=a[t.critical.draggable.id],u=hY(i);u||JK();var d=l[u],p=EY({impact:i,viewport:s,destination:d,draggables:a}),h=TY({impact:p,draggable:c,droppable:d,draggables:a,viewport:s,afterCritical:t.afterCritical});return CY({impact:p,clientSelection:h,state:t,dimensions:o,viewport:s})},PY=function(e){var t=e.draggable,r=e.home,n=e.draggables,i=e.viewport,s=cY(r.axis,t.displaceBy),o=PJ(r.descriptor.id,n),a=o.indexOf(t);-1===a&&JK();var l,c=o.slice(a+1),u=c.reduce(function(e,t){return e[t.descriptor.id]=!0,e},{}),d={inVirtualList:"virtual"===r.descriptor.mode,displacedBy:s,effected:u};return{impact:{displaced:WJ({afterDragging:c,destination:r,displacedBy:s,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:d}},RY=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,i=n.scroll.diff.value;return t.map(function(e){var t=e.descriptor.droppableId,s=function(e){var t=e.frame;return t||JK(),t}(r[t]).scroll.diff.value,o=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,i=MK(t.client,r),s=LK(i,n);return dq({},t,{placeholder:dq({},t.placeholder,{client:i}),client:i,page:s})}({draggable:e,offset:oJ(i,s),initialWindowScroll:n.scroll.initial});return o})},IY=function(e){return"SNAP"===e.movementMode},kY=function(e,t,r){var n=function(e,t){return{draggables:e.draggables,droppables:wY(e.droppables,t)}}(e.dimensions,t);return!IY(e)||r?CY({state:e,dimensions:n}):NY({state:e,dimensions:n})};function _Y(e){return e.isDragging&&"SNAP"===e.movementMode?dq({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var AY={phase:"IDLE",completed:null,shouldFlush:!1},jY=function(e,t){if(void 0===e&&(e=AY),"FLUSH"===t.type)return dq({},AY,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&JK();var r=t.payload,n=r.critical,i=r.clientSelection,s=r.viewport,o=r.dimensions,a=r.movementMode,l=o.draggables[n.draggable.id],c=o.droppables[n.droppable.id],u={selection:i,borderBoxCenter:l.client.borderBox.center,offset:sJ},d={client:u,page:{selection:oJ(u.selection,s.scroll.initial),borderBoxCenter:oJ(u.selection,s.scroll.initial),offset:oJ(u.selection,s.scroll.diff.value)}},p=TJ(o.droppables).every(function(e){return!e.isFixedOnPage}),h=PY({draggable:l,home:c,draggables:o.draggables,viewport:s}),f=h.impact;return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:a,dimensions:o,initial:d,current:d,isWindowScrollAllowed:p,impact:f,afterCritical:h.afterCritical,onLiftImpact:f,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&JK(),dq({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&JK(),function(e){var t=e.state,r=e.published,n=r.modified.map(function(e){var r=t.dimensions.droppables[e.droppableId];return yJ(r,e.scroll)}),i=dq({},t.dimensions.droppables,{},CJ(n)),s=EJ(RY({additions:r.additions,updatedDroppables:i,viewport:t.viewport})),o=dq({},t.dimensions.draggables,{},s);r.removals.forEach(function(e){delete o[e]});var a={droppables:i,draggables:o},l=hY(t.impact),c=l?a.droppables[l]:null,u=a.draggables[t.critical.draggable.id],d=a.droppables[t.critical.droppable.id],p=PY({draggable:u,home:d,draggables:o,viewport:t.viewport}),h=p.impact,f=p.afterCritical,m=c&&c.isCombineEnabled?t.impact:h,v=xY({pageOffset:t.current.page.offset,draggable:a.draggables[t.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:t.viewport,afterCritical:f}),g=dq({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:h,dimensions:a,afterCritical:f,forceShouldAnimate:!1});return"COLLECTING"===t.phase?g:dq({phase:"DROP_PENDING"},g,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;mY(e)||JK();var m=t.payload.client;return lJ(m,e.current.client.selection)?e:CY({state:e,clientSelection:m,impact:IY(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return _Y(e);if("COLLECTING"===e.phase)return _Y(e);mY(e)||JK();var v=t.payload,g=v.id,y=v.newScroll,b=e.dimensions.droppables[g];if(!b)return e;var x=yJ(b,y);return kY(e,x,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;mY(e)||JK();var w=t.payload,S=w.id,C=w.isEnabled,E=e.dimensions.droppables[S];E||JK(),E.isEnabled===C&&JK();var T=dq({},E,{isEnabled:C});return kY(e,T,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;mY(e)||JK();var N=t.payload,P=N.id,R=N.isCombineEnabled,I=e.dimensions.droppables[P];I||JK(),I.isCombineEnabled===R&&JK();var k=dq({},I,{isCombineEnabled:R});return kY(e,k,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;mY(e)||JK(),e.isWindowScrollAllowed||JK();var _=t.payload.newScroll;if(lJ(e.viewport.scroll.current,_))return _Y(e);var A=tY(e.viewport,_);return IY(e)?NY({state:e,viewport:A}):CY({state:e,viewport:A})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!mY(e))return e;var j=t.payload.maxScroll;if(lJ(j,e.viewport.scroll.max))return e;var O=dq({},e.viewport,{scroll:dq({},e.viewport.scroll,{max:j})});return dq({phase:"DRAGGING"},e,{viewport:O})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&JK();var D=fY({state:e,type:t.type});return D?CY({state:e,impact:D.impact,clientSelection:D.clientSelection,scrollJumpRequest:D.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var M=t.payload.reason;return"COLLECTING"!==e.phase&&JK(),dq({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:M})}if("DROP_ANIMATE"===t.type){var L=t.payload,z=L.completed,F=L.dropDuration,B=L.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&JK(),{phase:"DROP_ANIMATING",completed:z,dropDuration:F,newHomeClientOffset:B,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},OY=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},DY=function(){return{type:"COLLECTION_STARTING",payload:null}},MY=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},LY=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},zY=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},FY=function(e){return{type:"MOVE",payload:e}},BY=function(){return{type:"MOVE_UP",payload:null}},UY=function(){return{type:"MOVE_DOWN",payload:null}},WY=function(){return{type:"MOVE_RIGHT",payload:null}},HY=function(){return{type:"MOVE_LEFT",payload:null}},$Y=function(e){return{type:"DROP_COMPLETE",payload:e}},VY=function(e){return{type:"DROP",payload:e}},qY=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},GY="cubic-bezier(.2,1,.1,1)",KY={drop:0,combining:.7},JY={drop:.75},YY=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",ZY={fluid:"opacity "+YY,snap:"transform "+YY+", opacity "+YY,drop:function(e){var t=e+"s "+GY;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+YY,placeholder:"height "+YY+", width "+YY+", margin "+YY},QY=function(e){return lJ(e,sJ)?null:"translate("+e.x+"px, "+e.y+"px)"},XY=QY,eZ=function(e,t){var r=QY(e);return r?t?r+" scale("+JY.drop+")":r:null},tZ=.33,rZ=.55,nZ=rZ-tZ,iZ=function(e){var t=e.getState,r=e.dispatch;return function(e){return function(n){if("DROP"===n.type){var i=t(),s=n.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&JK(),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&JK();var o=i.critical,a=i.dimensions,l=a.draggables[i.critical.draggable.id],c=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,i=e.home,s=e.viewport,o=e.onLiftImpact;return n.at&&"DROP"===r?"REORDER"===n.at.type?{impact:n,didDropInsideDroppable:!0}:{impact:dq({},n,{displaced:jJ}),didDropInsideDroppable:!0}:{impact:EY({draggables:t,impact:o,destination:i,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=c.impact,d=c.didDropInsideDroppable,p=d?RJ(u):null,h=d?IJ(u):null,f={index:o.draggable.index,droppableId:o.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:f,reason:s,mode:i.movementMode,destination:p,combine:h},v=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,i=e.viewport,s=e.afterCritical,o=n.draggables,a=n.droppables,l=hY(t),c=l?a[l]:null,u=a[r.descriptor.droppableId],d=TY({impact:t,draggable:r,draggables:o,afterCritical:s,droppable:c||u,viewport:i});return aJ(d,r.client.borderBox.center)}({impact:u,draggable:l,dimensions:a,viewport:i.viewport,afterCritical:i.afterCritical}),g={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:u};if(!lJ(i.current.client.offset,v)||Boolean(m.combine)){var y=function(e){var t=e.current,r=e.destination,n=e.reason,i=dJ(t,r);if(i<=0)return tZ;if(i>=1500)return rZ;var s=tZ+nZ*(i/1500);return Number(("CANCEL"===n?.6*s:s).toFixed(2))}({current:i.current.client.offset,destination:v,reason:s});r(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:v,dropDuration:y,completed:g}))}else r($Y({completed:g}))}}else r(function(e){return{type:"DROP_PENDING",payload:e}}({reason:s}))}else e(n)}}},sZ=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function oZ(e){var t=e.onWindowScroll;var r,n=$K(function(){t(sZ())}),i=(r=n,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||r()}}),s=qK;function o(){return s!==qK}return{start:function(){o()&&JK(),s=GK(window,[i])},stop:function(){o()||JK(),n.cancel(),s(),s=qK},isActive:o}}var aZ=function(e){var t=oZ({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(r){t.isActive()||"INITIAL_PUBLISH"!==r.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r)&&t.stop(),e(r)}}},lZ=function(){var e=[];return{add:function(t){var r=setTimeout(function(){return function(t){var r=xJ(e,function(e){return e.timerId===t});-1===r&&JK(),e.splice(r,1)[0].callback()}(r)}),n={timerId:r,callback:t};e.push(n)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach(function(e){clearTimeout(e.timerId),e.callback()})}}}},cZ=function(e,t){t()},uZ=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},dZ=function(e,t,r,n){if(e){var i=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),i=function(i){t||r||(t=!0,e(i),clearTimeout(n))};return i.wasCalled=function(){return t},i}(r);e(t,{announce:i}),i.wasCalled()||r(n(t))}else r(n(t))},pZ=function(e,t){var r=function(e,t){var r=lZ(),n=null,i=function(r){n||JK(),n=null,cZ(0,function(){return dZ(e().onDragEnd,r,t,iJ)})};return{beforeCapture:function(t,r){n&&JK(),cZ(0,function(){var n=e().onBeforeCapture;n&&n({draggableId:t,mode:r})})},beforeStart:function(t,r){n&&JK(),cZ(0,function(){var n=e().onBeforeDragStart;n&&n(uZ(t,r))})},start:function(i,s){n&&JK();var o=uZ(i,s);n={mode:s,lastCritical:i,lastLocation:o.source,lastCombine:null},r.add(function(){cZ(0,function(){return dZ(e().onDragStart,o,t,rJ)})})},update:function(i,s){var o=RJ(s),a=IJ(s);n||JK();var l=!function(e,t){if(e===t)return!0;var r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n}(i,n.lastCritical);l&&(n.lastCritical=i);var c,u,d=(u=o,!(null==(c=n.lastLocation)&&null==u||null!=c&&null!=u&&c.droppableId===u.droppableId&&c.index===u.index));d&&(n.lastLocation=o);var p=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(n.lastCombine,a);if(p&&(n.lastCombine=a),l||d||p){var h=dq({},uZ(i,n.mode),{combine:a,destination:o});r.add(function(){cZ(0,function(){return dZ(e().onDragUpdate,h,t,nJ)})})}},flush:function(){n||JK(),r.flush()},drop:i,abort:function(){if(n){var e=dq({},uZ(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(n){if("BEFORE_INITIAL_CAPTURE"!==n.type){if("INITIAL_PUBLISH"===n.type){var i=n.payload.critical;return r.beforeStart(i,n.payload.movementMode),t(n),void r.start(i,n.payload.movementMode)}if("DROP_COMPLETE"===n.type){var s=n.payload.completed.result;return r.flush(),t(n),void r.drop(s)}if(t(n),"FLUSH"!==n.type){var o=e.getState();"DRAGGING"===o.phase&&r.update(o.critical,o.impact)}else r.abort()}else r.beforeCapture(n.payload.draggableId,n.payload.movementMode)}}}},hZ=function(e){return function(t){return function(r){if("DROP_ANIMATION_FINISHED"===r.type){var n=e.getState();"DROP_ANIMATING"!==n.phase&&JK(),e.dispatch($Y({completed:n.completed}))}else t(r)}}},fZ=function(e){var t=null,r=null;return function(n){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)),n(i),"DROP_ANIMATE"===i.type){var s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};r=requestAnimationFrame(function(){r=null,t=GK(window,[s])})}}}},mZ=function(e){return function(t){return function(r){if(t(r),"PUBLISH_WHILE_DRAGGING"===r.type){var n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(VY({reason:n.reason})))}}}},vZ=Eq,gZ=function(e){var t,r=e.dimensionMarshal,n=e.focusMarshal,i=e.styleMarshal,s=e.getResponders,o=e.announce,a=e.autoScroller;return wq(jY,vZ(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(gq(15))},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},s=t.map(function(e){return e(i)});return n=Eq.apply(void 0,s)(r.dispatch),vq(vq({},r),{},{dispatch:n})}}}((t=i,function(){return function(e){return function(r){"INITIAL_PUBLISH"===r.type&&t.dragging(),"DROP_ANIMATE"===r.type&&t.dropping(r.payload.completed.result.reason),"FLUSH"!==r.type&&"DROP_COMPLETE"!==r.type||t.resting(),e(r)}}}),function(e){return function(){return function(t){return function(r){"DROP_COMPLETE"!==r.type&&"FLUSH"!==r.type&&"DROP_ANIMATE"!==r.type||e.stopPublishing(),t(r)}}}}(r),function(e){return function(t){var r=t.getState,n=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var s=i.payload,o=s.id,a=s.clientSelection,l=s.movementMode,c=r();"DROP_ANIMATING"===c.phase&&n($Y({completed:c.completed})),"IDLE"!==r().phase&&JK(),n({type:"FLUSH",payload:null}),n({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:o,movementMode:l}});var u={draggableId:o,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},d=e.startPublishing(u),p=d.critical,h=d.dimensions,f=d.viewport;n({type:"INITIAL_PUBLISH",payload:{critical:p,dimensions:h,clientSelection:a,movementMode:l,viewport:f}})}else t(i)}}}}(r),iZ,hZ,fZ,mZ,function(e){return function(t){return function(r){return function(n){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n))return e.stop(),void r(n);if("INITIAL_PUBLISH"===n.type){r(n);var i=t.getState();return"DRAGGING"!==i.phase&&JK(),void e.start(i)}r(n),e.scroll(t.getState())}}}}(a),aZ,function(e){var t=!1;return function(){return function(r){return function(n){if("INITIAL_PUBLISH"===n.type)return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),void e.tryRestoreFocusRecorded();if(r(n),t){if("FLUSH"===n.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===n.type){t=!1;var i=n.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(n),pZ(s,o))))};var yZ=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,i=e.width,s=aJ({x:r,y:t},{x:i,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},bZ=function(){var e=document.documentElement;return e||JK(),e},xZ=function(){var e=bZ();return yZ({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},wZ=function(e){var t,r,n,i,s,o,a,l=e.critical,c=e.scrollOptions,u=e.registry,d=(t=sZ(),r=xZ(),n=t.y,i=t.x,s=bZ(),o=s.clientWidth,a=s.clientHeight,{frame:kK({top:n,left:i,right:i+o,bottom:n+a}),scroll:{initial:t,current:t,max:r,diff:{value:sJ,displacement:sJ}}}),p=d.scroll.current,h=l.droppable,f=u.droppable.getAllByType(h.type).map(function(e){return e.callbacks.getDimensionAndWatchScroll(p,c)}),m=u.draggable.getAllByType(l.draggable.type).map(function(e){return e.getDimension(p)});return{dimensions:{draggables:EJ(m),droppables:CJ(f)},critical:l,viewport:d}};function SZ(e,t,r){return r.descriptor.id!==t.id&&(r.descriptor.type===t.type&&"virtual"===e.droppable.getById(r.descriptor.droppableId).descriptor.mode)}var CZ,EZ=function(e,t){var r=null,n=function(e){var t=e.registry,r=e.callbacks,n={additions:{},removals:{},modified:{}},i=null,s=function(){i||(r.collectionStarting(),i=requestAnimationFrame(function(){i=null;var e=n,s=e.additions,o=e.removals,a=e.modified,l=Object.keys(s).map(function(e){return t.draggable.getById(e).getDimension(sJ)}).sort(function(e,t){return e.descriptor.index-t.descriptor.index}),c=Object.keys(a).map(function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}}),u={additions:l,removals:Object.keys(o),modified:c};n={additions:{},removals:{},modified:{}},r.publish(u)}))};return{add:function(e){var t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],s()},remove:function(e){var t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],s()},stop:function(){i&&(cancelAnimationFrame(i),i=null,n={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){r||JK();var i=r.critical.draggable;"ADDITION"===t.type&&SZ(e,i,t.value)&&n.add(t.value),"REMOVAL"===t.type&&SZ(e,i,t.value)&&n.remove(t.value)};return{updateDroppableIsEnabled:function(n,i){e.droppable.exists(n)||JK(),r&&t.updateDroppableIsEnabled({id:n,isEnabled:i})},updateDroppableIsCombineEnabled:function(n,i){r&&(e.droppable.exists(n)||JK(),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:i}))},scrollDroppable:function(t,n){r&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:function(n,i){r&&(e.droppable.exists(n)||JK(),t.updateDroppableScroll({id:n,newScroll:i}))},startPublishing:function(t){r&&JK();var n=e.draggable.getById(t.draggableId),s=e.droppable.getById(n.descriptor.droppableId),o={draggable:n.descriptor,droppable:s.descriptor},a=e.subscribe(i);return r={critical:o,unsubscribe:a},wZ({critical:o,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(r){n.stop();var t=r.critical.droppable;e.droppable.getAllByType(t.type).forEach(function(e){return e.callbacks.dragStopped()}),r.unsubscribe(),r=null}}}},TZ=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},NZ=function(e){window.scrollBy(e.x,e.y)},PZ=HK(function(e){return TJ(e).filter(function(e){return!!e.isEnabled&&!!e.frame})}),RZ=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var i=n[r];return i.frame?i:null}var s=function(e,t){return wJ(PZ(t),function(t){return t.frame||JK(),vY(t.frame.pageMarginBox)(e)})}(t,n);return s},IZ=.25,kZ=.05,_Z=28,AZ=function(e){return Math.pow(e,2)},jZ={stopDampeningAt:1200,accelerateAt:360},OZ=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,i=r-t;return 0===i?0:(n-t)/i},DZ=jZ.accelerateAt,MZ=jZ.stopDampeningAt,LZ=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,i=e.shouldUseTimeDampening,s=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return _Z;if(e===t.startScrollingFrom)return 1;var r=OZ({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=_Z*AZ(1-r);return Math.ceil(n)}(t,r);return 0===s?0:i?Math.max(function(e,t){var r=t,n=MZ,i=Date.now()-r;if(i>=MZ)return e;if(i<DZ)return 1;var s=OZ({startOfRange:DZ,endOfRange:n,current:i}),o=e*AZ(s);return Math.ceil(o)}(s,n),1):s},zZ=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,i=e.axis,s=e.shouldUseTimeDampening,o=function(e,t){return{startScrollingFrom:e[t.size]*IZ,maxScrollValueAt:e[t.size]*kZ}}(t,i);return r[i.end]<r[i.start]?LZ({distanceToEdge:r[i.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s}):-1*LZ({distanceToEdge:r[i.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s})},FZ=hJ(function(e){return 0===e?0:e}),BZ=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,i=e.center,s=e.shouldUseTimeDampening,o={top:i.y-r.top,right:r.right-i.x,bottom:r.bottom-i.y,left:i.x-r.left},a=zZ({container:r,distanceToEdges:o,dragStartTime:t,axis:zJ,shouldUseTimeDampening:s}),l=zZ({container:r,distanceToEdges:o,dragStartTime:t,axis:FJ,shouldUseTimeDampening:s}),c=FZ({x:l,y:a});if(lJ(c,sJ))return null;var u=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,i=r.height>t.height,s=r.width>t.width;return s||i?s&&i?null:{x:s?0:n.x,y:i?0:n.y}:n}({container:r,subject:n,proposedScroll:c});return u?lJ(u,sJ)?null:u:null},UZ=hJ(function(e){return 0===e?0:e>0?1:-1}),WZ=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var r=t.current,n=t.max,i=t.change,s=oJ(r,i),o={x:e(s.x,n.x),y:e(s.y,n.y)};return lJ(o,sJ)?null:o}}(),HZ=function(e){var t=e.max,r=e.current,n=e.change,i={x:Math.max(r.x,t.x),y:Math.max(r.y,t.y)},s=UZ(n),o=WZ({max:i,current:r,change:s});return!o||(0!==s.x&&0===o.x||0!==s.y&&0===o.y)},$Z=function(e,t){return HZ({current:e.scroll.current,max:e.scroll.max,change:t})},VZ=function(e,t){var r=e.frame;return!!r&&HZ({current:r.scroll.current,max:r.scroll.max,change:t})},qZ=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,i=e.scrollWindow,s=e.scrollDroppable,o=t.current.page.borderBoxCenter,a=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,r=e.subject,n=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,o=BZ({dragStartTime:i,container:t.frame,subject:r,center:n,shouldUseTimeDampening:s});return o&&$Z(t,o)?o:null}({dragStartTime:r,viewport:t.viewport,subject:a,center:o,shouldUseTimeDampening:n});if(l)return void i(l)}var c=RZ({center:o,destination:hY(t.impact),droppables:t.dimensions.droppables});if(c){var u=function(e){var t=e.droppable,r=e.subject,n=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var a=BZ({dragStartTime:i,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:s});return a&&VZ(t,a)?a:null}({dragStartTime:r,droppable:c,subject:a,center:o,shouldUseTimeDampening:n});u&&s(c.descriptor.id,u)}},GZ=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,i=function(e,t){if(!VZ(e,t))return t;var n=function(e,t){var r=e.frame;return r&&VZ(e,t)?WZ({current:r.scroll.current,max:r.scroll.max,change:t}):null}(e,t);if(!n)return r(e.descriptor.id,t),null;var i=aJ(t,n);return r(e.descriptor.id,i),aJ(t,i)},s=function(e,t,r){if(!e)return r;if(!$Z(t,r))return r;var i=function(e,t){if(!$Z(e,t))return null;var r=e.scroll.max,n=e.scroll.current;return WZ({current:n,max:r,change:t})}(t,r);if(!i)return n(r),null;var s=aJ(r,i);return n(s),aJ(r,s)};return function(e){var r=e.scrollJumpRequest;if(r){var n=hY(e.impact);n||JK();var o=i(e.dimensions.droppables[n],r);if(o){var a=e.viewport,l=s(e.isWindowScrollAllowed,a,o);l&&function(e,r){var n=oJ(e.current.client.selection,r);t({client:n})}(e,l)}}}},KZ=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,i=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=$K(t),i=$K(r),s=null,o=function(e){s||JK();var t=s,r=t.shouldUseTimeDampening,o=t.dragStartTime;qZ({state:e,scrollWindow:n,scrollDroppable:i,dragStartTime:o,shouldUseTimeDampening:r})};return{start:function(e){s&&JK();var t=Date.now(),r=!1,n=function(){r=!0};qZ({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:n,scrollDroppable:n}),s={dragStartTime:t,shouldUseTimeDampening:r},r&&o(e)},stop:function(){s&&(n.cancel(),i.cancel(),s=null)},scroll:o}}({scrollWindow:r,scrollDroppable:t}),s=GZ({move:n,scrollWindow:r,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&s(e):i.scroll(e))},start:i.start,stop:i.stop}},JZ="data-rbd",YZ={base:CZ=JZ+"-drag-handle",draggableId:CZ+"-draggable-id",contextId:CZ+"-context-id"},ZZ=function(){var e=JZ+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),QZ=function(){var e=JZ+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),XZ={contextId:JZ+"-scroll-container-context-id"},eQ=function(e,t){return e.map(function(e){var r=e.styles[t];return r?e.selector+" { "+r+" }":""}).join(" ")},tQ="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Lt.useLayoutEffect:Lt.useEffect,rQ=function(){var e=document.querySelector("head");return e||JK(),e},nQ=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function iQ(e,t){var r=RK(function(){return function(e){var t,r,n,i=(t=e,function(e){return"["+e+'="'+t+'"]'}),s=(r="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:i(YZ.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:r,dragging:"pointer-events: none;",dropAnimating:r}}),o=[(n="\n      transition: "+ZY.outOfTheWay+";\n    ",{selector:i(ZZ.contextId),styles:{dragging:n,dropAnimating:n,userCancel:n}}),s,{selector:i(QZ.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:eQ(o,"always"),resting:eQ(o,"resting"),dragging:eQ(o,"dragging"),dropAnimating:eQ(o,"dropAnimating"),userCancel:eQ(o,"userCancel")}}(e)},[e]),n=Lt.useRef(null),i=Lt.useRef(null),s=IK(HK(function(e){var t=i.current;t||JK(),t.textContent=e}),[]),o=IK(function(e){var t=n.current;t||JK(),t.textContent=e},[]);tQ(function(){(n.current||i.current)&&JK();var a=nQ(t),l=nQ(t);return n.current=a,i.current=l,a.setAttribute(JZ+"-always",e),l.setAttribute(JZ+"-dynamic",e),rQ().appendChild(a),rQ().appendChild(l),o(r.always),s(r.resting),function(){var e=function(e){var t=e.current;t||JK(),rQ().removeChild(t),e.current=null};e(n),e(i)}},[t,o,s,r.always,r.resting,e]);var a=IK(function(){return s(r.dragging)},[s,r.dragging]),l=IK(function(e){s("DROP"!==e?r.userCancel:r.dropAnimating)},[s,r.dropAnimating,r.userCancel]),c=IK(function(){i.current&&s(r.resting)},[s,r.resting]);return RK(function(){return{dragging:a,dropping:l,resting:c}},[a,l,c])}var sQ=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function oQ(e){return e instanceof sQ(e).HTMLElement}function aQ(e){var t=Lt.useRef({}),r=Lt.useRef(null),n=Lt.useRef(null),i=Lt.useRef(!1),s=IK(function(e,r){var n={id:e,focus:r};return t.current[e]=n,function(){var r=t.current;r[e]!==n&&delete r[e]}},[]),o=IK(function(t){var r=function(e,t){var r="["+YZ.contextId+'="'+e+'"]',n=SJ(document.querySelectorAll(r));if(!n.length)return null;var i=wJ(n,function(e){return e.getAttribute(YZ.draggableId)===t});return i&&oQ(i)?i:null}(e,t);r&&r!==document.activeElement&&r.focus()},[e]),a=IK(function(e,t){r.current===e&&(r.current=t)},[]),l=IK(function(){n.current||i.current&&(n.current=requestAnimationFrame(function(){n.current=null;var e=r.current;e&&o(e)}))},[o]),c=IK(function(e){r.current=null;var t=document.activeElement;t&&t.getAttribute(YZ.draggableId)===e&&(r.current=e)},[]);return tQ(function(){return i.current=!0,function(){i.current=!1;var e=n.current;e&&cancelAnimationFrame(e)}},[]),RK(function(){return{register:s,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}},[s,c,l,a])}function lQ(){var e={draggables:{},droppables:{}},t=[];function r(e){t.length&&t.forEach(function(t){return t(e)})}function n(t){return e.draggables[t]||null}function i(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,r({type:"ADDITION",value:t})},update:function(t,r){var n=e.draggables[r.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[r.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var i=t.descriptor.id,s=n(i);s&&t.uniqueId===s.uniqueId&&(delete e.draggables[i],r({type:"REMOVAL",value:t}))},getById:function(e){var t=n(e);return t||JK(),t},findById:n,exists:function(e){return Boolean(n(e))},getAllByType:function(t){return bJ(e.draggables).filter(function(e){return e.descriptor.type===t})}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var r=i(t.descriptor.id);r&&t.uniqueId===r.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=i(e);return t||JK(),t},findById:i,exists:function(e){return Boolean(i(e))},getAllByType:function(t){return bJ(e.droppables).filter(function(e){return e.descriptor.type===t})}},subscribe:function(e){return t.push(e),function(){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var cQ=zt.createContext(null),uQ=function(){var e=document.body;return e||JK(),e},dQ={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var pQ=0,hQ={separator:"::"};function fQ(e,t){return void 0===t&&(t=hQ),RK(function(){return""+e+t.separator+pQ++},[t.separator,e])}var mQ=zt.createContext(null);function vQ(e){var t=Lt.useRef(e);return Lt.useEffect(function(){t.current=e}),t}var gQ,yQ=((gQ={})[13]=!0,gQ[9]=!0,gQ),bQ=function(e){yQ[e.keyCode]&&e.preventDefault()},xQ=function(){var e="visibilitychange";return"undefined"==typeof document?e:wJ([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],function(e){return"on"+e in document})||e}();var wQ,SQ={type:"IDLE"};function CQ(e){var t=e.cancel,r=e.completed,n=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,r=e.clientX,s=e.clientY;if(0===t){var o={x:r,y:s},a=n();if("DRAGGING"===a.type)return e.preventDefault(),void a.actions.move(o);"PENDING"!==a.type&&JK();var l=a.point;if(c=l,u=o,Math.abs(u.x-c.x)>=5||Math.abs(u.y-c.y)>=5){var c,u;e.preventDefault();var d=a.actions.fluidLift(o);i({type:"DRAGGING",actions:d})}}}},{eventName:"mouseup",fn:function(e){var i=n();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===n().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==n().type)return 27===e.keyCode?(e.preventDefault(),void t()):void bQ(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===n().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var r=n();"IDLE"===r.type&&JK(),r.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:xQ,fn:t}]}function EQ(){}var TQ=((wQ={})[34]=!0,wQ[33]=!0,wQ[36]=!0,wQ[35]=!0,wQ);function NQ(e,t){function r(){t(),e.cancel()}return[{eventName:"keydown",fn:function(n){return 27===n.keyCode?(n.preventDefault(),void r()):32===n.keyCode?(n.preventDefault(),t(),void e.drop()):40===n.keyCode?(n.preventDefault(),void e.moveDown()):38===n.keyCode?(n.preventDefault(),void e.moveUp()):39===n.keyCode?(n.preventDefault(),void e.moveRight()):37===n.keyCode?(n.preventDefault(),void e.moveLeft()):void(TQ[n.keyCode]?n.preventDefault():bQ(n))}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:xQ,fn:r}]}var PQ={type:"IDLE"};var RQ={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function IQ(e,t){if(null==t)return!1;if(Boolean(RQ[t.tagName.toLowerCase()]))return!0;var r=t.getAttribute("contenteditable");return"true"===r||""===r||t!==e&&IQ(e,t.parentElement)}function kQ(e,t){var r=t.target;return!!oQ(r)&&IQ(e,r)}var _Q=function(e){return kK(e.getBoundingClientRect()).center};var AQ=function(){var e="matches";return"undefined"==typeof document?e:wJ([e,"msMatchesSelector","webkitMatchesSelector"],function(e){return e in Element.prototype})||e}();function jQ(e,t){return null==e?null:e[AQ](t)?e:jQ(e.parentElement,t)}function OQ(e,t){return e.closest?e.closest(t):jQ(e,t)}function DQ(e,t){var r,n=t.target;if(!((r=n)instanceof sQ(r).Element))return null;var i=function(e){return"["+YZ.contextId+'="'+e+'"]'}(e),s=OQ(n,i);return s&&oQ(s)?s:null}function MQ(e){e.preventDefault()}function LQ(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!!n()&&t===r}function zQ(e){var t=e.lockAPI,r=e.store,n=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var s=n.draggable.findById(i);return!!s&&(!!s.options.isEnabled&&!!TZ(r.getState(),i))}function FQ(e){var t=e.lockAPI,r=e.contextId,n=e.store,i=e.registry,s=e.draggableId,o=e.forceSensorStop,a=e.sourceEvent;if(!zQ({lockAPI:t,store:n,registry:i,draggableId:s}))return null;var l=i.draggable.getById(s),c=function(e,t){var r="["+ZZ.contextId+'="'+e+'"]',n=wJ(SJ(document.querySelectorAll(r)),function(e){return e.getAttribute(ZZ.id)===t});return n&&oQ(n)?n:null}(r,l.descriptor.id);if(!c)return null;if(a&&!l.options.canDragInteractiveElements&&kQ(c,a))return null;var u=t.claim(o||qK),d="PRE_DRAG";function p(){return l.options.shouldRespectForcePress}function h(){return t.isActive(u)}var f=function(e,t){LQ({expected:e,phase:d,isLockActive:h,shouldWarn:!0})&&n.dispatch(t())}.bind(null,"DRAGGING");function m(e){function r(){t.release(),d="COMPLETED"}function i(t,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),e.cleanup(),i.shouldBlockNextClick){var s=GK(window,[{eventName:"click",fn:MQ,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(s)}r(),n.dispatch(VY({reason:t}))}return"PRE_DRAG"!==d&&(r(),"PRE_DRAG"!==d&&JK()),n.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),d="DRAGGING",dq({isActive:function(){return LQ({expected:"DRAGGING",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}return{isActive:function(){return LQ({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var t=$K(function(e){f(function(){return FY({client:e})})});return dq({},m({liftActionArgs:{id:s,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return f(BY)},moveRight:function(){return f(WY)},moveDown:function(){return f(UY)},moveLeft:function(){return f(HY)}};return m({liftActionArgs:{id:s,clientSelection:_Q(c),movementMode:"SNAP"},cleanup:qK,actions:e})},abort:function(){LQ({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!0})&&t.release()}}}var BQ=[function(e){var t=Lt.useRef(SQ),r=Lt.useRef(qK),n=RK(function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var n=e.findClosestDraggableId(t);if(n){var i=e.tryGetLock(n,o,{sourceEvent:t});if(i){t.preventDefault();var s={x:t.clientX,y:t.clientY};r.current(),c(i,s)}}}}}},[e]),i=RK(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var n=e.findOptionsForDraggable(r);n&&(n.shouldRespectForcePress||e.canGetLock(r)&&t.preventDefault())}}}}},[e]),s=IK(function(){r.current=GK(window,[i,n],{passive:!1,capture:!0})},[i,n]),o=IK(function(){"IDLE"!==t.current.type&&(t.current=SQ,r.current(),s())},[s]),a=IK(function(){var e=t.current;o(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[o]),l=IK(function(){var e=CQ({cancel:a,completed:o,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});r.current=GK(window,e,{capture:!0,passive:!1})},[a,o]),c=IK(function(e,r){"IDLE"!==t.current.type&&JK(),t.current={type:"PENDING",point:r,actions:e},l()},[l]);tQ(function(){return s(),function(){r.current()}},[s])},function(e){var t=Lt.useRef(EQ),r=RK(function(){return{eventName:"keydown",fn:function(r){if(!r.defaultPrevented&&32===r.keyCode){var i=e.findClosestDraggableId(r);if(i){var s=e.tryGetLock(i,l,{sourceEvent:r});if(s){r.preventDefault();var o=!0,a=s.snapLift();t.current(),t.current=GK(window,NQ(a,l),{capture:!0,passive:!1})}}}function l(){o||JK(),o=!1,t.current(),n()}}}},[e]),n=IK(function(){t.current=GK(window,[r],{passive:!1,capture:!0})},[r]);tQ(function(){return n(),function(){t.current()}},[n])},function(e){var t=Lt.useRef(PQ),r=Lt.useRef(qK),n=IK(function(){return t.current},[]),i=IK(function(e){t.current=e},[]),s=RK(function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var i=e.tryGetLock(n,a,{sourceEvent:t});if(i){var s=t.touches[0],o={x:s.clientX,y:s.clientY};r.current(),d(i,o)}}}}}},[e]),o=IK(function(){r.current=GK(window,[s],{capture:!0,passive:!1})},[s]),a=IK(function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),i(PQ),r.current(),o())},[o,i]),l=IK(function(){var e=t.current;a(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[a]),c=IK(function(){var e={capture:!0,passive:!1},t={cancel:l,completed:a,getPhase:n},i=GK(window,function(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var r=n();if("DRAGGING"===r.type){r.hasMoved=!0;var i=e.touches[0],s={x:i.clientX,y:i.clientY};e.preventDefault(),r.actions.move(s)}else t()}},{eventName:"touchend",fn:function(e){var i=n();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===n().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var r=n();"IDLE"===r.type&&JK();var i=e.touches[0];if(i&&i.force>=.15){var s=r.actions.shouldRespectForcePress();if("PENDING"!==r.type)return s?r.hasMoved?void e.preventDefault():void t():void e.preventDefault();s&&t()}}},{eventName:xQ,fn:t}]}(t),e),s=GK(window,function(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===r().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:xQ,fn:t}]}(t),e);r.current=function(){i(),s()}},[l,n,a]),u=IK(function(){var e=n();"PENDING"!==e.type&&JK();var t=e.actions.fluidLift(e.point);i({type:"DRAGGING",actions:t,hasMoved:!1})},[n,i]),d=IK(function(e,t){"IDLE"!==n().type&&JK();var r=setTimeout(u,120);i({type:"PENDING",point:t,actions:e,longPressTimerId:r}),c()},[c,n,i,u]);tQ(function(){return o(),function(){r.current();var e=n();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),i(PQ))}},[n,o,i]),tQ(function(){return GK(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])},[])}];function UQ(e){var t=e.contextId,r=e.store,n=e.registry,i=e.customSensors,s=e.enableDefaultSensors,o=[].concat(s?BQ:[],i||[]),a=Lt.useState(function(){return function(){var e=null;function t(){e||JK(),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&JK();var r={abandon:t};return e=r,r},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()})[0],l=IK(function(e,t){e.isDragging&&!t.isDragging&&a.tryAbandon()},[a]);tQ(function(){var e=r.getState();return r.subscribe(function(){var t=r.getState();l(e,t),e=t})},[a,r,l]),tQ(function(){return a.tryAbandon},[a.tryAbandon]);for(var c=IK(function(e){return zQ({lockAPI:a,registry:n,store:r,draggableId:e})},[a,n,r]),u=IK(function(e,i,s){return FQ({lockAPI:a,registry:n,contextId:t,store:r,draggableId:e,forceSensorStop:i,sourceEvent:s&&s.sourceEvent?s.sourceEvent:null})},[t,a,n,r]),d=IK(function(e){return function(e,t){var r=DQ(e,t);return r?r.getAttribute(YZ.draggableId):null}(t,e)},[t]),p=IK(function(e){var t=n.draggable.findById(e);return t?t.options:null},[n.draggable]),h=IK(function(){a.isClaimed()&&(a.tryAbandon(),"IDLE"!==r.getState().phase&&r.dispatch({type:"FLUSH",payload:null}))},[a,r]),f=IK(a.isClaimed,[a]),m=RK(function(){return{canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:p,tryReleaseLock:h,isLockClaimed:f}},[c,u,d,p,h,f]),v=0;v<o.length;v++)o[v](m)}function WQ(e){return e.current||JK(),e.current}function HQ(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,i=e.nonce,s=e.dragHandleUsageInstructions,o=Lt.useRef(null),a=vQ(e),l=IK(function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(a.current)},[a]),c=function(e){var t=RK(function(){return function(e){return"rbd-announcement-"+e}(e)},[e]),r=Lt.useRef(null);return Lt.useEffect(function(){var e=document.createElement("div");return r.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),dq(e.style,dQ),uQ().appendChild(e),function(){setTimeout(function(){var t=uQ();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)})}},[t]),IK(function(e){var t=r.current;t&&(t.textContent=e)},[])}(t),u=function(e){var t=e.contextId,r=e.text,n=fQ("hidden-text",{separator:"-"}),i=RK(function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:n}).contextId+"-"+e.uniqueId;var e},[n,t]);return Lt.useEffect(function(){var e=document.createElement("div");return e.id=i,e.textContent=r,e.style.display="none",uQ().appendChild(e),function(){var t=uQ();t.contains(e)&&t.removeChild(e)}},[i,r]),i}({contextId:t,text:s}),d=iQ(t,i),p=IK(function(e){WQ(o).dispatch(e)},[]),h=RK(function(){return Cq({publishWhileDragging:OY,updateDroppableScroll:MY,updateDroppableIsEnabled:LY,updateDroppableIsCombineEnabled:zY,collectionStarting:DY},p)},[p]),f=function(){var e=RK(lQ,[]);return Lt.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}(),m=RK(function(){return EZ(f,h)},[f,h]),v=RK(function(){return KZ(dq({scrollWindow:NZ,scrollDroppable:m.scrollDroppable},Cq({move:FY},p)))},[m.scrollDroppable,p]),g=aQ(t),y=RK(function(){return gZ({announce:c,autoScroller:v,dimensionMarshal:m,focusMarshal:g,getResponders:l,styleMarshal:d})},[c,v,m,g,l,d]);o.current=y;var b=IK(function(){var e=WQ(o);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})},[]),x=IK(function(){var e=WQ(o).getState();return e.isDragging||"DROP_ANIMATING"===e.phase},[]);r(RK(function(){return{isDragging:x,tryAbort:b}},[x,b]));var w=IK(function(e){return TZ(WQ(o).getState(),e)},[]),S=IK(function(){return mY(WQ(o).getState())},[]),C=RK(function(){return{marshal:m,focus:g,contextId:t,canLift:w,isMovementAllowed:S,dragHandleUsageInstructionsId:u,registry:f}},[t,m,u,g,w,S,f]);return UQ({contextId:t,store:y,registry:f,customSensors:n,enableDefaultSensors:!1!==e.enableDefaultSensors}),Lt.useEffect(function(){return b},[b]),zt.createElement(mQ.Provider,{value:C},zt.createElement(Dq,{context:cQ,store:y},e.children))}var $Q=0;function VQ(e){var t=RK(function(){return""+$Q++},[]),r=e.dragHandleUsageInstructions||tJ;return zt.createElement(YK,null,function(n){return zt.createElement(HQ,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var qQ=function(e){return function(t){return e===t}},GQ=qQ("scroll"),KQ=qQ("auto"),JQ=function(e,t){return t(e.overflowX)||t(e.overflowY)},YQ=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return JQ(r,GQ)||JQ(r,KQ)}(t)?t:e(t.parentElement)},ZQ=function(e){return{x:e.scrollLeft,y:e.scrollTop}},QQ=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},XQ=function(e){return{closestScrollable:YQ(e),isFixedOnPage:QQ(e)}},eX=function(e){var t=e.ref,r=e.descriptor,n=e.env,i=e.windowScroll,s=e.direction,o=e.isDropDisabled,a=e.isCombineEnabled,l=e.shouldClipSubject,c=n.closestScrollable,u=function(e,t){var r=FK(e);if(!t)return r;if(e!==t)return r;var n=r.paddingBox.top-t.scrollTop,i=r.paddingBox.left-t.scrollLeft,s=n+t.scrollHeight,o=i+t.scrollWidth,a=_K({top:n,right:o,bottom:s,left:i},r.border);return OK({borderBox:a,margin:r.margin,border:r.border,padding:r.padding})}(t,c),d=LK(u,i),p=function(){if(!c)return null;var e=FK(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:LK(e,i),scroll:ZQ(c),scrollSize:t,shouldClipSubject:l}}(),h=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,i=e.isFixedOnPage,s=e.direction,o=e.client,a=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,r=yZ({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:r,diff:{value:sJ,displacement:sJ}}}}(),u="vertical"===s?zJ:FJ;return{descriptor:t,isCombineEnabled:n,isFixedOnPage:i,axis:u,isEnabled:r,client:o,page:a,frame:c,subject:gJ({page:a,withPlaceholder:null,axis:u,frame:c})}}({descriptor:r,isEnabled:!o,isCombineEnabled:a,isFixedOnPage:n.isFixedOnPage,direction:s,client:u,page:d,closest:p});return h},tX={passive:!1},rX={passive:!0},nX=function(e){return e.shouldPublishImmediately?tX:rX};function iX(e){var t=Lt.useContext(e);return t||JK(),t}var sX=function(e){return e&&e.env.closestScrollable||null};function oX(){}var aX={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},lX=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate,i=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate;return t||"close"===n?aX:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}}({isAnimatingOpenOnMount:t,placeholder:r,animate:n});return{display:r.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==n?ZY.placeholder:null}};var cX=zt.memo(function(e){var t=Lt.useRef(null),r=IK(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,i=e.onTransitionEnd,s=e.onClose,o=e.contextId,a=Lt.useState("open"===e.animate),l=a[0],c=a[1];Lt.useEffect(function(){return l?"open"!==n?(r(),c(!1),oX):t.current?oX:(t.current=setTimeout(function(){t.current=null,c(!1)}),r):oX},[n,l,r]);var u=IK(function(e){"height"===e.propertyName&&(i(),"close"===n&&s())},[n,s,i]),d=lX({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return zt.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})}),uX=zt.createContext(null),dX=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return uq(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(zt.PureComponent),pX=5e3,hX=4500,fX=function(e,t){return t?ZY.drop(t.duration):e?ZY.snap:ZY.fluid},mX=function(e,t){return e?t?KY.drop:KY.combining:null};function vX(e){return"DRAGGING"===e.type?(n=(r=e).dimension.client,i=r.offset,s=r.combineWith,o=r.dropping,a=Boolean(s),l=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(r),c=Boolean(o),u=c?eZ(i,a):XY(i),{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:fX(l,o),transform:u,opacity:mX(a,c),zIndex:c?hX:pX,pointerEvents:"none"}):{transform:XY((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t,r,n,i,s,o,a,l,c,u}function gX(e){var t=fQ("draggable"),r=e.descriptor,n=e.registry,i=e.getDraggableRef,s=e.canDragInteractiveElements,o=e.shouldRespectForcePress,a=e.isEnabled,l=RK(function(){return{canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:a}},[s,a,o]),c=IK(function(e){var t=i();return t||JK(),function(e,t,r){void 0===r&&(r=sJ);var n=window.getComputedStyle(t),i=t.getBoundingClientRect(),s=zK(i,n),o=LK(s,r);return{descriptor:e,placeholder:{client:s,tagName:t.tagName.toLowerCase(),display:n.display},displaceBy:{x:s.marginBox.width,y:s.marginBox.height},client:s,page:o}}(r,t,e)},[r,i]),u=RK(function(){return{uniqueId:t,descriptor:r,options:l,getDimension:c}},[r,c,l,t]),d=Lt.useRef(u),p=Lt.useRef(!0);tQ(function(){return n.draggable.register(d.current),function(){return n.draggable.unregister(d.current)}},[n.draggable]),tQ(function(){if(p.current)p.current=!1;else{var e=d.current;d.current=u,n.draggable.update(u,e)}},[u,n.draggable])}function yX(e){e.preventDefault()}var bX=function(e,t){return e===t},xX=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null};function wX(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var SX={mapped:{type:"SECONDARY",offset:sJ,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:wX(null)}};var CX=TK(function(){var e,t,r,n=(e=HK(function(e,t){return{x:e,y:t}}),t=HK(function(e,t,r,n,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:r,combineWith:n,combineTargetFor:null}}),r=HK(function(e,r,n,i,s,o,a){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:o,mode:r,offset:e,dimension:n,forceShouldAnimate:a,snapshot:t(r,i,s,o,null)}}}),function(n,i){if(n.isDragging){if(n.critical.draggable.id!==i.draggableId)return null;var s=n.current.client.offset,o=n.dimensions.draggables[i.draggableId],a=hY(n.impact),l=(u=n.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,c=n.forceShouldAnimate;return r(e(s.x,s.y),n.movementMode,o,i.isClone,a,l,c)}var u;if("DROP_ANIMATING"===n.phase){var d=n.completed;if(d.result.draggableId!==i.draggableId)return null;var p=i.isClone,h=n.dimensions.draggables[i.draggableId],f=d.result,m=f.mode,v=xX(f),g=function(e){return e.combine?e.combine.draggableId:null}(f),y={duration:n.dropDuration,curve:GY,moveTo:n.newHomeClientOffset,opacity:g?KY.drop:null,scale:g?JY.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:h,dropping:y,draggingOver:v,combineWith:g,mode:m,forceShouldAnimate:null,snapshot:t(m,p,v,g,y)}}}return null}),i=function(){var e=HK(function(e,t){return{x:e,y:t}}),t=HK(wX),r=HK(function(e,r,n){return void 0===r&&(r=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:r,shouldAnimateDisplacement:n,snapshot:t(r)}}}),n=function(e){return e?r(sJ,e,!0):null},i=function(t,i,s,o){var a=s.displaced.visible[t],l=Boolean(o.inVirtualList&&o.effected[t]),c=IJ(s),u=c&&c.draggableId===t?i:null;if(!a){if(!l)return n(u);if(s.displaced.invisible[t])return null;var d=cJ(o.displacedBy.point),p=e(d.x,d.y);return r(p,u,!0)}if(l)return n(u);var h=s.displacedBy.point,f=e(h.x,h.y);return r(f,u,a.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var r=e.completed;return r.result.draggableId===t.draggableId?null:i(t.draggableId,r.result.draggableId,r.impact,r.afterCritical)}return null}}();return function(e,t){return n(e,t)||i(e,t)||SX}},{dropAnimationFinished:qY},null,{context:cQ,pure:!0,areStatePropsEqual:bX})(function(e){var t=Lt.useRef(null),r=IK(function(e){t.current=e},[]),n=IK(function(){return t.current},[]),i=iX(mQ),s=i.contextId,o=i.dragHandleUsageInstructionsId,a=i.registry,l=iX(uX),c=l.type,u=l.droppableId,d=RK(function(){return{id:e.draggableId,index:e.index,type:c,droppableId:u}},[e.draggableId,e.index,c,u]),p=e.children,h=e.draggableId,f=e.isEnabled,m=e.shouldRespectForcePress,v=e.canDragInteractiveElements,g=e.isClone,y=e.mapped,b=e.dropAnimationFinished;g||gX(RK(function(){return{descriptor:d,registry:a,getDraggableRef:n,canDragInteractiveElements:v,shouldRespectForcePress:m,isEnabled:f}},[d,a,n,v,m,f]));var x=RK(function(){return f?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":s,draggable:!1,onDragStart:yX}:null},[s,o,h,f]),w=IK(function(e){"DRAGGING"===y.type&&y.dropping&&"transform"===e.propertyName&&b()},[b,y]),S=RK(function(){var e=vX(y),t="DRAGGING"===y.type&&y.dropping?w:null;return{innerRef:r,draggableProps:{"data-rbd-draggable-context-id":s,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:x}},[s,x,h,y,w,r]),C=RK(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return p(S,y.snapshot,C)});function EX(e){return iX(uX).isUsingCloneFor!==e.draggableId||e.isClone?zt.createElement(CX,e):null}function TX(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return zt.createElement(EX,dq({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}var NX=function(e,t){return e===t.droppable.type},PX=function(e,t){return t.draggables[e.draggable.id]};var RX={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||JK(),document.body}},IX=TK(function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=dq({},e,{shouldAnimatePlaceholder:!1}),r=HK(function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}}),n=HK(function(n,i,s,o,a,l){var c=a.descriptor.id;if(a.descriptor.droppableId===n){var u=l?{render:l,dragging:r(a.descriptor)}:null,d={isDraggingOver:s,draggingOverWith:s?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:a.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!i)return t;if(!o)return e;var p={isDraggingOver:s,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:a.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return function(r,i){var s=i.droppableId,o=i.type,a=!i.isDropDisabled,l=i.renderClone;if(r.isDragging){var c=r.critical;if(!NX(o,c))return t;var u=PX(c,r.dimensions),d=hY(r.impact)===s;return n(s,a,d,d,u,l)}if("DROP_ANIMATING"===r.phase){var p=r.completed;if(!NX(o,p.critical))return t;var h=PX(p.critical,r.dimensions);return n(s,a,xX(p.result)===s,hY(p.impact)===s,h,l)}if("IDLE"===r.phase&&r.completed&&!r.shouldFlush){var f=r.completed;if(!NX(o,f.critical))return t;var m=hY(f.impact)===s,v=Boolean(f.impact.at&&"COMBINE"===f.impact.at.type),g=f.critical.droppable.id===s;return m?v?e:t:g?e:t}return t}},{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:cQ,pure:!0,areStatePropsEqual:bX})(function(e){var t=Lt.useContext(mQ);t||JK();var r=t.contextId,n=t.isMovementAllowed,i=Lt.useRef(null),s=Lt.useRef(null),o=e.children,a=e.droppableId,l=e.type,c=e.mode,u=e.direction,d=e.ignoreContainerClipping,p=e.isDropDisabled,h=e.isCombineEnabled,f=e.snapshot,m=e.useClone,v=e.updateViewportMaxScroll,g=e.getContainerForClone,y=IK(function(){return i.current},[]),b=IK(function(e){i.current=e},[]);IK(function(){return s.current},[]);var x=IK(function(e){s.current=e},[]),w=IK(function(){n()&&v({maxScroll:xZ()})},[n,v]);!function(e){var t=Lt.useRef(null),r=iX(mQ),n=fQ("droppable"),i=r.registry,s=r.marshal,o=vQ(e),a=RK(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),l=Lt.useRef(a),c=RK(function(){return HK(function(e,r){t.current||JK();var n={x:e,y:r};s.updateDroppableScroll(a.id,n)})},[a.id,s]),u=IK(function(){var e=t.current;return e&&e.env.closestScrollable?ZQ(e.env.closestScrollable):sJ},[]),d=IK(function(){var e=u();c(e.x,e.y)},[u,c]),p=RK(function(){return $K(d)},[d]),h=IK(function(){var e=t.current,r=sX(e);e&&r||JK(),e.scrollOptions.shouldPublishImmediately?d():p()},[p,d]),f=IK(function(e,n){t.current&&JK();var i=o.current,s=i.getDroppableRef();s||JK();var l=XQ(s),c={ref:s,descriptor:a,env:l,scrollOptions:n};t.current=c;var u=eX({ref:s,descriptor:a,env:l,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=l.closestScrollable;return d&&(d.setAttribute(XZ.contextId,r.contextId),d.addEventListener("scroll",h,nX(c.scrollOptions))),u},[r.contextId,a,h,o]),m=IK(function(){var e=t.current,r=sX(e);return e&&r||JK(),ZQ(r)},[]),v=IK(function(){var e=t.current;e||JK();var r=sX(e);t.current=null,r&&(p.cancel(),r.removeAttribute(XZ.contextId),r.removeEventListener("scroll",h,nX(e.scrollOptions)))},[h,p]),g=IK(function(e){var r=t.current;r||JK();var n=sX(r);n||JK(),n.scrollTop+=e.y,n.scrollLeft+=e.x},[]),y=RK(function(){return{getDimensionAndWatchScroll:f,getScrollWhileDragging:m,dragStopped:v,scroll:g}},[v,f,m,g]),b=RK(function(){return{uniqueId:n,descriptor:a,callbacks:y}},[y,a,n]);tQ(function(){return l.current=b.descriptor,i.droppable.register(b),function(){t.current&&v(),i.droppable.unregister(b)}},[y,a,v,b,s,i.droppable]),tQ(function(){t.current&&s.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),tQ(function(){t.current&&s.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:p,isCombineEnabled:h,ignoreContainerClipping:d,getDroppableRef:y});var S=zt.createElement(dX,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(e){var t=e.onClose,n=e.data,i=e.animate;return zt.createElement(cX,{placeholder:n,onClose:t,innerRef:x,animate:i,contextId:r,onTransitionEnd:w})}),C=RK(function(){return{innerRef:b,placeholder:S,droppableProps:{"data-rbd-droppable-id":a,"data-rbd-droppable-context-id":r}}},[r,a,S,b]),E=m?m.dragging.draggableId:null,T=RK(function(){return{droppableId:a,type:l,isUsingCloneFor:E}},[a,E,l]);return zt.createElement(uX.Provider,{value:T},o(C,f),function(){if(!m)return null;var e=m.dragging,t=m.render,r=zt.createElement(EX,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(r,n){return t(r,n,e)});return th.createPortal(r,g())}())});IX.defaultProps=RX;const kX=({steps:e,onStepUpdate:t,onStepsReorder:r,onStepDelete:n,onConditionAdd:i,onConditionDelete:s,onConditionEdit:o,onSave:a,onCancel:l,flowId:c,onAddStepBetween:u})=>{console.log(" StepEditor ",{stepsLength:e.length,flowId:c,steps:e.map(e=>({id:e.id,title:e.title,type:e.type}))});const[d,p]=Lt.useState({}),h=Lt.useRef({}),[f,m]=Lt.useState({}),[v,g]=Lt.useState({}),[y,b]=Lt.useState({});Lt.useEffect(()=>{const t=e.reduce((e,t)=>(e[t.id]=!0,e),{});g(t)},[e]),Lt.useEffect(()=>{const e=document.createElement("style");return e.textContent="\n  .step-editor-scrollbar::-webkit-scrollbar {\n    width: 20px !important;\n    height: 20px !important;\n  }\n\n  .step-editor-scrollbar::-webkit-scrollbar-track {\n    background: #f1f1f1 !important;\n    border-radius: 10px !important;\n    margin: 2px !important;\n  }\n\n  .step-editor-scrollbar::-webkit-scrollbar-thumb {\n    background: #c1c1c1 !important;\n    border-radius: 10px !important;\n    border: 2px solid #f1f1f1 !important;\n  }\n\n  .step-editor-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: #a8a8a8 !important;\n  }\n\n  .step-editor-scrollbar::-webkit-scrollbar-corner {\n    background: #f1f1f1 !important;\n  }\n\n  .step-editor-scrollbar {\n    scrollbar-width: auto !important;\n    scrollbar-color: #c1c1c1 #f1f1f1 !important;\n  }\n\n  /*  */\n  div.step-editor-scrollbar::-webkit-scrollbar {\n    width: 20px !important;\n    height: 20px !important;\n  }\n\n  div.step-editor-scrollbar::-webkit-scrollbar-track {\n    background: #f1f1f1 !important;\n    border-radius: 10px !important;\n    margin: 2px !important;\n  }\n\n  div.step-editor-scrollbar::-webkit-scrollbar-thumb {\n    background: #c1c1c1 !important;\n    border-radius: 10px !important;\n    border: 2px solid #f1f1f1 !important;\n  }\n",e.id="step-editor-scrollbar-styles",document.head.appendChild(e),()=>{const e=document.getElementById("step-editor-scrollbar-styles");e&&document.head.removeChild(e)}},[]);const x=(e,r,n)=>{t(e,{[r]:n})},w=e=>{g(t=>ze(Le({},t),{[e]:!t[e]}))},S=(r,n)=>Ke(void 0,null,function*(){var i,s;if(!n)return;if(n.size>10485760)alert(` "${n.name}" 10MB`);else{p(e=>ze(Le({},e),{[r]:!0}));try{console.log(" ",{stepId:r,fileName:n.name,fileSize:n.size});const o=e.find(e=>e.id===r);if(o&&o.images){const e=(null!=(i=o.images)?i:[]).find(e=>e.fileName===n.name||e.fileName===n.name.replace(/\.[^/.]+$/,""));if(e){if(!window.confirm(`"${n.name}" \n`))return void p(e=>ze(Le({},e),{[r]:!1}));const i=o.images.filter(t=>t.fileName!==e.fileName);t(r,{images:i})}}const l=new FormData;l.append("image",n),l.append("stepId",r),c&&l.append("flowId",c);const{buildApiUrl:u}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),d=u("/emergency-flow/upload-image");console.log(" URL:",d);const h=yield fetch(d,{method:"POST",body:l});if(!h.ok){const e=yield h.json().catch(()=>({}));throw new Error(e.error||"")}const f=yield h.json();if(!f.success||!f.imageUrl)throw new Error("URL");const m={url:f.imageUrl,fileName:f.imageFileName||f.fileName};f.isDuplicate&&console.log(" :",f.fileName);const v=e.find(e=>e.id===r);if(v){const e=null!=(s=v.images)?s:[];if(!(e.length<3))throw new Error("3");{const n=[...e,m];console.log(" UI:",{stepId:r,currentImagesCount:e.length,newImagesCount:n.length,newImage:m}),t(r,{images:n}),a&&setTimeout(()=>{a()},100);const i=f.isDuplicate?`"${f.fileName}" `:"";console.log(" ",i)}}}catch(o){console.error(" ",o),alert(`: ${o instanceof Error?o.message:"Unknown error"}`)}finally{p(e=>ze(Le({},e),{[r]:!1}))}}}),C=e=>{e.preventDefault(),e.stopPropagation()},E=r=>{var n,a,l,c,u,p;return v[r.id]?Gt.jsxs("div",{className:"space-y-4",style:{minHeight:"0px"},children:[Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsx("div",{className:"flex items-center space-x-2",children:Gt.jsx("span",{className:"font-medium text-sm text-gray-600",children:""})}),Gt.jsx("div",{className:"flex items-center space-x-2",children:Gt.jsx(Bg,{variant:"ghost",size:"sm",onClick:()=>w(r.id),children:Gt.jsx(ry,{className:"h-4 w-4"})})})]}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:`title-${r.id}`,className:"text-base-2x",children:""}),Gt.jsx(KL,{id:`title-${r.id}`,value:r.title,onChange:e=>x(r.id,"title",e.target.value),placeholder:"",className:"text-base-2x h-12"})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:`description-${r.id}`,className:"text-base-2x",children:""}),Gt.jsx(KL,{id:`description-${r.id}`,value:r.description,onChange:e=>x(r.id,"description",e.target.value),placeholder:"",className:"text-base-2x h-12"})]})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:`message-${r.id}`,className:"text-base-2x",children:""}),Gt.jsx(Qz,{id:`message-${r.id}`,value:r.message,onChange:e=>x(r.id,"message",e.target.value),placeholder:"",rows:3,className:"text-base-2x min-h-24"})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{className:"text-base-2x",children:"3"}),Gt.jsx("p",{className:"text-base-2x text-muted-foreground mt-2",children:": JPG, PNG, GIF"}),Gt.jsxs("div",{className:"mt-2 p-4 border-2 border-dashed rounded-lg",onDragOver:C,onDrop:e=>((e,t)=>{t.preventDefault(),t.stopPropagation();const r=Array.from(t.dataTransfer.files).find(e=>e.type.startsWith("image/"));r?(console.log(" &",{stepId:e,fileName:r.name}),S(e,r)):console.warn(" ")})(r.id,e),children:[Gt.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[(null!=(n=r.images)?n:[]).filter(e=>e&&e.url&&""!==e.url.trim()).map((n,i)=>{var s;return Gt.jsxs("div",{className:"relative group aspect-video",children:[(()=>{var e;const t=Dg(n.url);return console.log(" StepEditor:",{stepId:r.id,imageIndex:i,originalUrl:n.url,convertedUrl:t,fileName:n.fileName}),Gt.jsx("img",{src:t,alt:n.fileName,className:"w-full h-full object-cover rounded-lg border shadow-sm",crossOrigin:(null==(e=n.url)?void 0:e.startsWith("data:"))?void 0:"anonymous",onError:e=>{console.error(" StepEditor:",{originalUrl:n.url,convertedUrl:t,fileName:n.fileName,stepId:r.id,imageIndex:i,timestamp:(new Date).toISOString()}),e.currentTarget.style.display="none"},onLoad:()=>{console.log(" StepEditor:",{originalUrl:n.url,convertedUrl:t,fileName:n.fileName,stepId:r.id,imageIndex:i,timestamp:(new Date).toISOString()}),m(e=>ze(Le({},e),{[n.url]:!1}))}},`${r.id}-${i}-${n.fileName}`)})(),f[n.url]&&Gt.jsx("div",{className:"absolute inset-0 bg-red-500 bg-opacity-50 flex items-center justify-center rounded-lg",children:Gt.jsxs("div",{className:"text-center text-white p-2",children:[Gt.jsx(ob,{className:"h-8 w-8 mx-auto"}),Gt.jsx("p",{className:"text-xs font-bold mt-1",children:""}),Gt.jsx("p",{className:"text-xs mt-1",children:n.fileName})]})}),Gt.jsx("div",{className:"absolute top-1 right-1 flex gap-1",children:Gt.jsx(Bg,{type:"button",variant:"destructive",size:"sm",onClick:()=>{return n=r.id,s=i,Ke(void 0,null,function*(){console.log(" :",{stepId:n,imageIndex:s});const r=e.find(e=>e.id===n);if(r){const e=[...r.images||[]];if(s>=0&&s<e.length){const r=e[s];if(window.confirm(`"${r.fileName}" \n`))try{const{buildApiUrl:i}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),o=i(`/emergency-flow/image/${r.fileName}`);console.log(" URL:",o);const a=yield fetch(o,{method:"DELETE"});if(!a.ok){const e=yield a.json().catch(()=>({}));throw new Error(e.error||"")}e.splice(s,1),t(n,{images:e}),console.log(" ",r.fileName),alert(`"${r.fileName}" `)}catch(i){console.error(" :",i),alert(`: ${i instanceof Error?i.message:""}`)}}}});var n,s},className:"h-7 w-7 p-0 rounded-full opacity-80 group-hover:opacity-100 transition-opacity",title:"",children:Gt.jsx(ob,{className:"h-4 w-4"})})}),Gt.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate rounded-b-lg",children:n.fileName}),(null!=(s=r.images)?s:[]).filter(e=>e.fileName===n.fileName).length>1&&Gt.jsx("div",{className:"absolute top-1 left-1",children:Gt.jsx("div",{className:"bg-yellow-500 text-white text-xs px-1 py-0.5 rounded",children:""})})]},i)}),(!r.images||(null!=(a=r.images)?a:[]).filter(e=>e&&e.url&&""!==e.url.trim()).length<3)&&Gt.jsxs("div",{className:"flex items-center justify-center aspect-video border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{var e;return null==(e=h.current[r.id])?void 0:e.click()},children:[Gt.jsxs("div",{className:"text-center",children:[d[r.id]?Gt.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 mx-auto"}):Gt.jsx(Zy,{className:"mx-auto h-8 w-8 text-gray-400"}),Gt.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-600",children:d[r.id]?"...":""}),Gt.jsxs("p",{className:"text-xs text-gray-500",children:[(null!=(l=r.images)?l:[]).filter(e=>e&&e.url&&""!==e.url.trim()).length," / 3"]}),Gt.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"&"})]}),Gt.jsx("input",{ref:e=>h.current[r.id]=e,type:"file",accept:"image/*",onChange:e=>((e,t)=>{var r;const n=null==(r=t.target.files)?void 0:r[0];n&&S(e,n)})(r.id,e),className:"hidden"})]})]}),r.images&&r.images.length>0&&Gt.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded text-base-2x text-blue-700",children:[Gt.jsx("p",{className:"font-medium",children:""}),Gt.jsxs("ul",{className:"mt-2 space-y-2",children:[Gt.jsx("li",{children:" "}),Gt.jsx("li",{children:" "}),Gt.jsx("li",{children:" 3"}),Gt.jsx("li",{children:" "})]})]})]})]}),"decision"===r.type&&Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsx(FL,{children:""}),Gt.jsxs("div",{className:"text-sm text-gray-500",children:[": ",(null==(c=r.conditions)?void 0:c.length)||0,"/4"]})]}),Gt.jsxs("div",{className:"space-y-2",children:[null==(u=r.conditions)?void 0:u.map((t,n)=>Gt.jsxs("div",{className:"flex items-center space-x-2 p-2 border rounded",children:[Gt.jsxs("div",{className:"flex-1",children:[Gt.jsx(KL,{value:t.label,onChange:e=>o(r.id,n,"label",e.target.value),placeholder:"",className:"mb-2"}),Gt.jsxs(mV,{value:t.nextId,onValueChange:e=>o(r.id,n,"nextId",e),children:[Gt.jsx(gV,{children:Gt.jsx(vV,{placeholder:""})}),Gt.jsx(xV,{children:e.filter(e=>e.id!==r.id).map(e=>Gt.jsx(wV,{value:e.id,children:e.title||`${e.id}`},e.id))})]})]}),Gt.jsx(Bg,{type:"button",variant:"outline",size:"sm",onClick:()=>s(r.id,n),children:Gt.jsx(Ky,{className:"h-4 w-4"})})]},n)),(!r.conditions||(null!=(p=r.conditions)?p:[]).length<4)&&Gt.jsxs(Bg,{type:"button",variant:"outline",size:"sm",onClick:()=>i(r.id),className:"w-full",children:[Gt.jsx(jy,{className:"h-4 w-4 mr-2"}),""]})]})]})]}):Gt.jsxs("div",{className:"flex items-center justify-between p-2",children:[Gt.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[Gt.jsxs("div",{className:"flex items-center space-x-2",children:[Gt.jsx("span",{className:"font-medium",children:r.title||`${r.id}`}),Gt.jsxs("span",{className:"text-xs text-gray-500",children:["(",r.type,")"]})]}),r.description&&Gt.jsx("span",{className:"text-xs text-gray-600 truncate max-w-32",children:r.description}),r.images&&r.images.length>0&&Gt.jsxs("div",{className:"flex items-center space-x-1",children:[Gt.jsx(Sy,{className:"w-3 h-3 text-blue-500"}),Gt.jsxs("span",{className:"text-xs text-blue-600",children:[r.images.length,""]})]}),"decision"===r.type&&r.conditions&&r.conditions.length>0&&Gt.jsx("div",{className:"flex items-center space-x-1",children:Gt.jsxs("span",{className:"text-xs text-orange-600 bg-orange-100 px-1 rounded",children:[r.conditions.length,""]})})]}),Gt.jsx(Bg,{variant:"ghost",size:"sm",onClick:()=>w(r.id),children:Gt.jsx(Xg,{className:"h-4 w-4"})})]})},T=e=>u?Gt.jsx("div",{className:"flex justify-center my-2",children:Gt.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 rounded-lg p-2 border",children:[Gt.jsxs(Bg,{size:"sm",variant:"outline",onClick:()=>u(e,"step"),className:"h-6 px-2 text-xs",children:[Gt.jsx(jy,{className:"w-3 h-3 mr-1"}),""]}),Gt.jsxs(Bg,{size:"sm",variant:"outline",onClick:()=>u(e,"decision"),className:"h-6 px-2 text-xs",children:[Gt.jsx(jy,{className:"w-3 h-3 mr-1"}),""]})]})}):null;return Gt.jsxs("div",{className:"h-full flex flex-col",children:[Gt.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded mb-4 flex-shrink-0",children:[Gt.jsx("p",{className:"text-yellow-800 font-medium",children:"StepEditor :"}),Gt.jsxs("p",{className:"text-yellow-700 text-sm",children:["steps.length: ",e.length]}),Gt.jsxs("p",{className:"text-yellow-700 text-sm",children:["steps: ",e.map(e=>`${e.id}:${e.title}`).join(", ")]}),Gt.jsxs("p",{className:"text-yellow-700 text-sm",children:["expandedSteps: ",Object.keys(v).length,""]})]}),Gt.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border mb-4 flex-shrink-0",children:[Gt.jsxs("div",{className:"flex items-center space-x-2",children:[Gt.jsx("span",{className:"text-sm font-medium text-blue-700",children:""}),Gt.jsxs("span",{className:"text-xs text-blue-600",children:["(",e.length,")"]})]}),Gt.jsxs("div",{className:"flex items-center space-x-2",children:[Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>{const t=e.reduce((e,t)=>(e[t.id]=!0,e),{});g(t)},className:"h-7 px-2 text-xs",children:""}),Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>g({}),className:"h-7 px-2 text-xs",children:""})]})]}),Gt.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 flex-shrink-0",children:[Gt.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),Gt.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((e,t)=>Gt.jsxs("div",{className:"px-3 py-1 rounded-full text-xs cursor-pointer transition-colors "+(v[e.id]?"bg-blue-500 text-white":"bg-white text-gray-600 border border-gray-300 hover:bg-gray-100"),onClick:()=>w(e.id),children:[t+1,". ",e.title||`${t+1}`]},e.id))})]}),Gt.jsx("div",{className:"flex-1 overflow-y-auto step-editor-scrollbar",style:{minHeight:"0px",flex:"1 1 auto",display:"flex",flexDirection:"column"},"data-updated":"2024-01-XX",children:Gt.jsx(VQ,{onDragEnd:t=>{if(!t.destination)return;const n=Array.from(e),[i]=n.splice(t.source.index,1);n.splice(t.destination.index,0,i),r(n)},children:Gt.jsx(IX,{droppableId:"steps",children:t=>Gt.jsxs("div",ze(Le({},t.droppableProps),{ref:t.innerRef,className:"space-y-4 pb-4",style:{flex:"1 1 auto"},children:[0===e.length?Gt.jsxs("div",{className:"p-8 text-center bg-red-50 border border-red-200 rounded",children:[Gt.jsx("p",{className:"text-red-800 font-medium",children:" "}),Gt.jsx("p",{className:"text-red-700 text-sm",children:"steps"})]}):e.map((t,r)=>Gt.jsxs("div",{style:{minHeight:"0px"},children:[Gt.jsx(TX,{draggableId:t.id,index:r,children:(e,r)=>Gt.jsx("div",ze(Le({ref:e.innerRef},e.draggableProps),{className:"relative",style:{minHeight:"0px"},children:Gt.jsxs(IL,{className:"transition-shadow duration-200 border-4 border-blue-500 "+(r.isDragging?"shadow-lg":""),style:{minHeight:"0px"},children:[Gt.jsx("div",ze(Le({},e.dragHandleProps),{className:"absolute top-1/2 -left-8 -translate-y-1/2 p-2 cursor-grab text-gray-400 hover:text-gray-600",children:Gt.jsx(by,{})})),Gt.jsx(jL,{className:"p-4 md:p-6",style:{minHeight:"0px"},children:E(t)}),Gt.jsx("div",{className:"absolute top-2 right-2 flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:Gt.jsxs(Bg,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>n(t.id),children:[Gt.jsx(Ky,{className:"h-4 w-4 mr-2"}),""]})})]})}))},t.id),r<e.length-1&&T(r)]},t.id)),t.placeholder]}))})})}),a&&l&&Gt.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t bg-white mt-4 flex-shrink-0",children:[Gt.jsx(Bg,{variant:"outline",onClick:l,children:""}),Gt.jsx(Bg,{onClick:a,children:""})]})]})},_X=({flowData:e,currentTab:t,onSave:r,onTabChange:n,selectedFilePath:i})=>{var s;const[o,a]=Lt.useState((null==e?void 0:e.title)||""),[l,c]=Lt.useState((null==e?void 0:e.description)||""),[u,d]=Lt.useState([]),[p,h]=Lt.useState((null==e?void 0:e.title)||""),[f,m]=Lt.useState((null==e?void 0:e.description)||""),[v,g]=Lt.useState([]),[y,b]=Lt.useState(!1),[x,w]=Lt.useState(!1),S=Lt.useRef(null),C=Lt.useRef(u);Lt.useEffect(()=>{C.current=u},[u]);const E=Lt.useRef(e);Lt.useEffect(()=>{E.current=e},[e]),Lt.useEffect(()=>{var r,n,s;console.log(" EmergencyFlowEditor useEffect :",{flowDataId:(null==e?void 0:e.id)||"null",flowDataTitle:(null==e?void 0:e.title)||"null",isInitialized:x,currentTab:t,selectedFilePath:i});const o=!S.current||S.current.id!==(null==e?void 0:e.id)||JSON.stringify(S.current)!==JSON.stringify(e);if(console.log(" flowData:",{hasPreviousData:!!S.current,previousId:null==(r=S.current)?void 0:r.id,currentId:null==e?void 0:e.id,idsMatch:(null==(n=S.current)?void 0:n.id)===(null==e?void 0:e.id),dataChanged:JSON.stringify(S.current)!==JSON.stringify(e),flowDataChanged:o}),!o&&x)return void console.log(" flowData");if(!e)return console.log(" flowDatanull - "),a(""),c(""),d([]),g([]),h(""),m(""),w(!0),void(S.current=e);if(console.log(" /:",e.id||"ID"),console.log(" flowData:",{id:e.id,title:e.title,description:e.description,hasSteps:!!e.steps,stepsType:typeof e.steps,stepsLength:(null==(s=e.steps)?void 0:s.length)||0,stepsIsArray:Array.isArray(e.steps),stepsContent:e.steps}),a(e.title||""),c(e.description||""),h(e.title||""),m(e.description||""),!e.steps||!Array.isArray(e.steps)||0===e.steps.length)return console.warn(" flowData.steps:",e.steps),console.log(" flowData:",JSON.stringify(e,null,2)),console.log(" flowData:",Object.keys(e)),d([]),g([]),w(!0),void(S.current=e);console.log(" :",{totalSteps:e.steps.length,stepDetails:e.steps.map((e,t)=>({index:t,id:e.id,title:e.title,type:e.type}))});const l=e.steps.map((t,r)=>{var n;try{console.log(`[${r+1}/${e.steps.length}] [${t.id}]:`,{step:t,hasImages:!!t.images,imagesLength:(null==(n=t.images)?void 0:n.length)||0,hasImageUrl:!!t.imageUrl,hasImageFileName:!!t.imageFileName,stepKeys:Object.keys(t)});let i=[];if(t.images&&Array.isArray(t.images)&&t.images.length>0)console.log(` [${t.id}] 'images' :`,t.images),i=t.images.map(e=>{var r,n,i,s,o;if(!e.url||""===e.url.trim())return console.log(" URL:",e),null;const a=(null==(r=e.url)?void 0:r.startsWith("http://"))||(null==(n=e.url)?void 0:n.startsWith("https://"))||(null==(i=e.url)?void 0:i.startsWith("data:"))?e.url:Og(e.url);return console.log(" EmergencyFlowEditor URL:",{stepId:t.id,originalUrl:e.url,convertedUrl:a,fileName:e.fileName,isAlreadyConverted:(null==(s=e.url)?void 0:s.startsWith("http://"))||(null==(o=e.url)?void 0:o.startsWith("https://"))}),{url:a,fileName:e.fileName}}).filter(e=>null!==e);else if(t.imageUrl&&t.imageFileName){console.log(` [${t.id}]:`,{imageUrl:t.imageUrl,imageFileName:t.imageFileName});const e=Og(t.imageUrl);console.log(" EmergencyFlowEditor URL:",{stepId:t.id,originalUrl:t.imageUrl,convertedUrl:e,fileName:t.imageFileName}),i=[{url:e,fileName:t.imageFileName}]}else if(t.imageUrl){console.log(` [${t.id}]imageUrl:`,{imageUrl:t.imageUrl});const e=t.imageUrl.split("/").pop()||"unknown.jpg",r=Og(t.imageUrl);console.log(" EmergencyFlowEditor imageUrlURL:",{stepId:t.id,originalUrl:t.imageUrl,convertedUrl:r,fileName:e}),i=[{url:r,fileName:e}]}else console.log(` [${t.id}]`),i=[];i&&0!==i.length||(i=[]),console.log(` [${t.id}]:`,{processedImages:i,processedCount:i.length});const s=t,{imageUrl:o,imageFileName:a,options:l}=s,c=Fe(s,["imageUrl","imageFileName","options"]),u=ze(Le({},c),{images:i});return console.log(` [${t.id}]:`,u),u}catch(i){return console.error(` [${t.id}]:`,i),{id:t.id||`step_${r}`,title:t.title||` ${r+1}`,description:t.description||"",message:t.message||"",type:t.type||"step",images:[],options:t.options||[],conditions:t.conditions||[]}}});console.log(" :",{totalSteps:l.length,stepsWithImages:l.filter(e=>e.images&&e.images.length>0).length,totalImages:l.reduce((e,t)=>{var r;return e+((null==(r=t.images)?void 0:r.length)||0)},0),stepDetails:l.map(e=>({id:e.id,title:e.title,type:e.type}))}),console.log(" setSteps:",{initialStepsLength:l.length}),d(l),h(e.title||""),m(e.description||""),g(JSON.parse(JSON.stringify(l))),w(!0),S.current=e,console.log(" "),setTimeout(()=>{console.log(" :",{stepsLength:u.length,initialStepsLength:l.length,isInitialized:x})},100)},[e,i,x]),Lt.useEffect(()=>{if(!x)return void console.log(" ");const e=o!==p,t=l!==f,r=JSON.stringify(u)!==JSON.stringify(v),n=e||t||r;n&&console.log(" :",{titleChanged:e,descriptionChanged:t,stepsChanged:r}),b(n)},[o,l,u,p,f,v,x]);const T=Lt.useCallback((e,t)=>{const r=C.current,n={id:`step_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"step"===e?"":"",description:"",message:"",type:e,images:[],options:[],conditions:[]};let i;i=void 0!==t?[...r.slice(0,t),n,...r.slice(t)]:[...r,n],console.log(" :",{type:e,index:t,newStepId:n.id,totalSteps:i.length}),d(i)},[]),N=Lt.useCallback((e,t)=>{const r=C.current.findIndex(t=>t.id===e);-1!==r?T(t,r+1):console.error(" :",e)},[T]),P=Lt.useCallback((e,t)=>{var r,n;const i=C.current,s=i.findIndex(t=>t.id===e);if(-1===s)return void console.error(" :",e);const o=[...i];o[s]=Le(Le({},o[s]),t),console.log(" :",{stepId:e,updatedStep:t,stepIndex:s,isImageUpdate:"images"in t,imageCount:(null==(r=t.images)?void 0:r.length)||0,previousImageCount:(null==(n=i[s].images)?void 0:n.length)||0}),d(o),"images"in t&&console.log("  - UI:",{stepId:e,newImages:t.images,stepTitle:o[s].title})},[]),R=Lt.useCallback(e=>{console.log(" :",{oldLength:C.current.length,newLength:e.length,newOrder:e.map(e=>({id:e.id,title:e.title}))}),d(e)},[]),I=Lt.useCallback(e=>{const t=C.current,r=t.filter(t=>t.id!==e);console.log(" :",{stepId:e,oldLength:t.length,newLength:r.length}),d(r)},[]),k=Lt.useCallback(e=>{const t=C.current,r=t.findIndex(t=>t.id===e);if(-1===r)return void console.error(" :",e);const n=t[r],i={label:"",nextId:""},s=ze(Le({},n),{conditions:[...n.conditions||[],i]}),o=[...t];o[r]=s,console.log(" :",{stepId:e,newCondition:i}),d(o)},[]),_=Lt.useCallback((e,t)=>{const r=C.current,n=r.findIndex(t=>t.id===e);if(-1===n)return void console.error(" :",e);const i=r[n],s=(i.conditions||[]).filter((e,r)=>r!==t),o=ze(Le({},i),{conditions:s}),a=[...r];a[n]=o,console.log(" :",{stepId:e,conditionIndex:t}),d(a)},[]),A=Lt.useCallback((e,t,r)=>{const n=C.current,i=n.findIndex(t=>t.id===e);if(-1===i)return void console.error(" :",e);const s=n[i],o=[...s.conditions||[]];o[t]=Le(Le({},o[t]),r);const a=ze(Le({},s),{conditions:o}),l=[...n];l[i]=a,console.log(" :",{stepId:e,conditionIndex:t,updatedCondition:r}),d(l)},[]);Lt.useEffect(()=>{if(y&&x){console.log(" `steps`");const e=setTimeout(()=>{j()},3e3);return()=>{console.log(" "),clearTimeout(e)}}},[u,y,x]);const j=Lt.useCallback(()=>Ke(void 0,null,function*(){var t,r,n,i,s,a,c,u;const d=C.current;if(!y||!e)return void console.log("  ( or )");console.log(" ...");const p=d.map(e=>{var t,r,n;console.log(" EmergencyFlowEditor :",{stepId:e.id,stepTitle:e.title,originalImages:e.images,hasImages:!!e.images,imagesLength:(null==(t=e.images)?void 0:t.length)||0});const i=(null==(r=e.images)?void 0:r.map(e=>(console.log(" EmergencyFlowEditor :",{originalImg:e,url:e.url,fileName:e.fileName,urlValid:e.url&&""!==e.url.trim(),fileNameValid:e.fileName&&""!==e.fileName.trim()}),e.url&&""!==e.url.trim()?{url:e.url,fileName:e.fileName&&""!==e.fileName.trim()?e.fileName:e.url.split("/").pop()||""}:null)).filter(e=>null!==e))||[];i&&i.length>0?console.log(" EmergencyFlowEditor :",{stepId:e.id,stepTitle:e.title,imagesCount:i.length,images:i}):console.log(" EmergencyFlowEditor :",{stepId:e.id,stepTitle:e.title,originalImages:e.images,processedImages:i});const s=e,{imageUrl:o,imageFileName:a,options:l}=s,c=Fe(s,["imageUrl","imageFileName","options"]),u=ze(Le({},c),{images:i&&i.length>0?i:[]});return console.log(" EmergencyFlowEditor :",{stepId:u.id,stepTitle:u.title,finalImages:u.images,hasFinalImages:!!u.images,finalImagesLength:(null==(n=u.images)?void 0:n.length)||0}),u}),h=e,{slides:f}=h,m=Fe(h,["slides"]),v=ze(Le({},m),{title:o,description:l,steps:p,updatedAt:(new Date).toISOString()}),x=Le({filePath:`knowledge-base/troubleshooting/${e.id}.json`},v);console.log(" [AutoSave] :",{id:x.id,title:x.title,stepsCount:(null==(t=x.steps)?void 0:t.length)||0,stepsWithImages:(null==(r=x.steps)?void 0:r.filter(e=>e.images&&e.images.length>0).length)||0,allStepsImages:(null==(n=x.steps)?void 0:n.map(e=>{var t,r;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(r=e.images)?void 0:r.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}}))||[]});try{const e=yield lq(v,{validateImages:!0,logDetails:!0});e.success?(console.log(" EmergencyFlowEditor :",{flowId:(null==(i=e.data)?void 0:i.id)||v.id,title:(null==(s=e.data)?void 0:s.title)||v.title,stepsCount:(null==(c=null==(a=e.data)?void 0:a.steps)?void 0:c.length)||v.steps.length}),console.log("EmergencyFlowEditor "),b(!1),g((null==(u=e.data)?void 0:u.steps)||v.steps)):(console.error(" EmergencyFlowEditor :",e.error),alert(`: ${e.error}`))}catch(w){console.error(" EmergencyFlowEditor :",w)}}),[e,o,l,y]);Lt.useCallback(e=>{a(e),b(!0)},[]),Lt.useCallback(e=>{c(e),b(!0)},[]);const O=(...t)=>Ke(void 0,[...t],function*(t=u){try{console.log(" :",{flowId:null==e?void 0:e.id,title:o,description:l,stepsCount:t.length,hasChanges:y});const n={id:null==e?void 0:e.id,title:o,description:l,triggerKeywords:(null==e?void 0:e.triggerKeywords)||[],steps:t,updatedAt:(new Date).toISOString()};console.log(" :",{id:n.id,title:n.title,stepsCount:n.steps.length,stepsWithImages:n.steps.filter(e=>e.images&&e.images.length>0).length,allStepsImages:n.steps.map(e=>{var t,r;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(r=e.images)?void 0:r.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}})}),r(n)}catch(n){console.error(" :",n)}}),D=()=>{console.log(" "),a(p),c(f),d(v),b(!1),console.log(" ")};return console.log(" EmergencyFlowEditor :",{flowDataId:null==e?void 0:e.id,flowDataTitle:null==e?void 0:e.title,hasFlowData:!!e,stepsLength:u.length,isInitialized:x,currentTab:t,hasChanges:y,title:o,description:l,selectedFilePath:i}),"slides"===t?Gt.jsxs("div",{className:"h-full flex flex-col",children:[Gt.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded mb-4",children:[Gt.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),Gt.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[Gt.jsxs("p",{children:["flowData.id: ",(null==e?void 0:e.id)||""]}),Gt.jsxs("p",{children:["flowData.title: ",(null==e?void 0:e.title)||""]}),Gt.jsxs("p",{children:["flowData.steps: ",(null==(s=null==e?void 0:e.steps)?void 0:s.length)||0]}),Gt.jsxs("p",{children:["steps:"," ",JSON.stringify(u.map(e=>({id:e.id,title:e.title,type:e.type})))]}),Gt.jsxs("p",{children:["isInitialized: ",x.toString()]}),Gt.jsxs("p",{children:["currentTab: ",t]}),Gt.jsxs("p",{children:["hasChanges: ",y.toString()]}),Gt.jsxs("p",{children:["selectedFilePath: ",i||""]})]})]}),Gt.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Gt.jsx("h2",{className:"text-2xl font-bold",children:""}),Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsxs(Bg,{onClick:D,variant:"outline",size:"sm",children:[Gt.jsx(ob,{className:"w-4 h-4 mr-2"}),""]}),Gt.jsx(Bg,{onClick:()=>O(),disabled:!y,size:"sm",children:""})]})]}),Gt.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:0===u.length?Gt.jsxs("div",{className:"text-center py-8",children:[Gt.jsx("p",{className:"text-gray-500 mb-4",children:""}),Gt.jsxs("div",{className:"flex justify-center gap-4",children:[Gt.jsxs(Bg,{size:"sm",variant:"outline",onClick:()=>T("step"),className:"h-10 px-4",children:[Gt.jsx(jy,{className:"w-4 h-4 mr-2"}),""]}),Gt.jsxs(Bg,{size:"sm",variant:"outline",onClick:()=>T("decision"),className:"h-10 px-4",children:[Gt.jsx(jy,{className:"w-4 h-4 mr-2"}),""]})]})]}):Gt.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[Gt.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded mb-4",children:[Gt.jsx("p",{className:"text-blue-800 font-medium",children:"StepEditor :"}),Gt.jsxs("p",{className:"text-blue-700 text-sm",children:["steps.length: ",u.length]}),Gt.jsxs("p",{className:"text-blue-700 text-sm",children:["flowId: ",null==e?void 0:e.id]}),Gt.jsxs("p",{className:"text-blue-700 text-sm",children:["steps: ",u.map(e=>e.title).join(", ")]})]}),Gt.jsx("div",{className:"flex-1 min-h-0",children:Gt.jsx(kX,{steps:u,onStepUpdate:P,onStepsReorder:R,onStepDelete:I,onConditionAdd:k,onConditionDelete:_,onConditionEdit:A,flowId:null==e?void 0:e.id,onAddStepBetween:N})})]})}),Gt.jsxs("div",{className:"flex justify-center gap-4 mt-4 p-6 bg-gray-50 rounded-lg border",children:[Gt.jsxs(Bg,{size:"sm",variant:"outline",onClick:()=>T("step"),className:"h-12 px-6 text-base-2x",children:[Gt.jsx(jy,{className:"w-6 h-6 mr-2"}),""]}),Gt.jsxs(Bg,{size:"sm",variant:"outline",onClick:()=>T("decision"),className:"h-12 px-6 text-base-2x",children:[Gt.jsx(jy,{className:"w-6 h-6 mr-2"}),""]})]}),y&&Gt.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg mt-4",children:Gt.jsx("p",{className:"text-base-2x text-yellow-800",children:" "})})]}):Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"title",className:"text-base-2x",children:""}),Gt.jsx(KL,{id:"title",value:o,onChange:e=>a(e.target.value),placeholder:"",className:"text-base-2x h-12"})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"description",className:"text-base-2x",children:""}),Gt.jsx(Qz,{id:"description",value:l,onChange:e=>c(e.target.value),placeholder:"",rows:3,className:"text-base-2x min-h-24"})]}),y&&Gt.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:Gt.jsx("p",{className:"text-base-2x text-yellow-800",children:" "})}),Gt.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[Gt.jsx(Bg,{variant:"outline",onClick:D,disabled:!y,className:"text-base-2x h-12 px-6",children:""}),Gt.jsx(Bg,{onClick:()=>O(),disabled:!y,className:"text-base-2x h-12 px-6",children:""})]})]})},AX=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function jX(e,t,r){const n=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const r=t.split(".").pop().toLowerCase(),n=AX.get(r);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:i}=e,s="string"==typeof t?t:"string"==typeof i&&i.length>0?i:`./${e.name}`;return"string"!=typeof n.path&&OX(n,"path",s),OX(n,"relativePath",s),n}function OX(e,t,r){Object.defineProperty(e,t,{value:r,writable:!1,configurable:!1,enumerable:!0})}const DX=[".DS_Store","Thumbs.db"];function MX(e){return"object"==typeof e&&null!==e}function LX(e){return e.filter(e=>-1===DX.indexOf(e.name))}function zX(e){if(null===e)return[];const t=[];for(let r=0;r<e.length;r++){const n=e[r];t.push(n)}return t}function FX(e){if("function"!=typeof e.webkitGetAsEntry)return UX(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?HX(t):UX(e,t)}function BX(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?BX(t):[t]],[])}function UX(e,t){return Xb(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error(`${e} is not a File`);if(void 0!==t){const e=yield t.getFile();return e.handle=t,jX(e)}}const n=e.getAsFile();if(!n)throw new Error(`${e} is not a File`);return jX(n,null!==(r=null==t?void 0:t.fullPath)&&void 0!==r?r:void 0)})}function WX(e){return Xb(this,void 0,void 0,function*(){return e.isDirectory?HX(e):function(e){return Xb(this,void 0,void 0,function*(){return new Promise((t,r)=>{e.file(r=>{const n=jX(r,e.fullPath);t(n)},e=>{r(e)})})})}(e)})}function HX(e){const t=e.createReader();return new Promise((e,r)=>{const n=[];!function i(){t.readEntries(t=>Xb(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(WX));n.push(e),i()}else try{const t=yield Promise.all(n);e(t)}catch(Pie){r(Pie)}}),e=>{r(e)})}()})}var $X=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(",");if(0===r.length)return!0;var n=e.name||"",i=(e.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return r.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?n.toLowerCase().endsWith(t):t.endsWith("/*")?s===t.replace(/\/.*$/,""):i===t})}return!0};function VX(e){return function(e){if(Array.isArray(e))return ZX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||YX(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function GX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qX(Object(r),!0).forEach(function(t){KX(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function KX(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,s=[],o=!0,a=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(Pie){a=!0,i=Pie}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return s}(e,t)||YX(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YX(e,t){if(e){if("string"==typeof e)return ZX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ZX(e,t):void 0}}function ZX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var QX=$X,XX=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:"file-invalid-type",message:"File type must be ".concat(t)}},e0=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},t0=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},r0={code:"too-many-files",message:"Too many files"};function n0(e,t){var r="application/x-moz-file"===e.type||QX(e,t);return[r,r?null:XX(t)]}function i0(e,t,r){if(s0(e.size))if(s0(t)&&s0(r)){if(e.size>r)return[!1,e0(r)];if(e.size<t)return[!1,t0(t)]}else{if(s0(t)&&e.size<t)return[!1,t0(t)];if(s0(r)&&e.size>r)return[!1,e0(r)]}return[!0,null]}function s0(e){return null!=e}function o0(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function a0(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function l0(e){e.preventDefault()}function c0(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return t.some(function(t){return!o0(e)&&t&&t.apply(void 0,[e].concat(n)),o0(e)})}}function u0(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function d0(e){return/^.*\.[\w]+$/.test(e)}var p0=["children"],h0=["open"],f0=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],m0=["refKey","onChange","onClick"];function v0(e){return function(e){if(Array.isArray(e))return b0(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y0(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,s=[],o=!0,a=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(Pie){a=!0,i=Pie}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return s}(e,t)||y0(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y0(e,t){if(e){if("string"==typeof e)return b0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b0(e,t):void 0}}function b0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x0(Object(r),!0).forEach(function(t){S0(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x0(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C0(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var E0=Lt.forwardRef(function(e,t){var r=e.children,n=P0(C0(e,p0)),i=n.open,s=C0(n,h0);return Lt.useImperativeHandle(t,function(){return{open:i}},[i]),zt.createElement(Lt.Fragment,null,r(w0(w0({},s),{},{open:i})))});E0.displayName="Dropzone";var T0={disabled:!1,getFilesFromEvent:function(e){return Xb(this,void 0,void 0,function*(){return MX(e)&&MX(e.dataTransfer)?function(e,t){return Xb(this,void 0,void 0,function*(){if(e.items){const r=zX(e.items).filter(e=>"file"===e.kind);if("drop"!==t)return r;return LX(BX(yield Promise.all(r.map(FX))))}return LX(zX(e.files).map(e=>jX(e)))})}(e.dataTransfer,e.type):function(e){return MX(e)&&MX(e.target)}(e)?function(e){return zX(e.target.files).map(e=>jX(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return Xb(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>jX(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};E0.defaultProps=T0,E0.propTypes={children:Rq.func,accept:Rq.objectOf(Rq.arrayOf(Rq.string)),multiple:Rq.bool,preventDropOnDocument:Rq.bool,noClick:Rq.bool,noKeyboard:Rq.bool,noDrag:Rq.bool,noDragEventsBubbling:Rq.bool,minSize:Rq.number,maxSize:Rq.number,maxFiles:Rq.number,disabled:Rq.bool,getFilesFromEvent:Rq.func,onFileDialogCancel:Rq.func,onFileDialogOpen:Rq.func,useFsAccessApi:Rq.bool,autoFocus:Rq.bool,onDragEnter:Rq.func,onDragLeave:Rq.func,onDragOver:Rq.func,onDrop:Rq.func,onDropAccepted:Rq.func,onDropRejected:Rq.func,onError:Rq.func,validator:Rq.func};var N0={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function P0(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=w0(w0({},T0),e),r=t.accept,n=t.disabled,i=t.getFilesFromEvent,s=t.maxSize,o=t.minSize,a=t.multiple,l=t.maxFiles,c=t.onDragEnter,u=t.onDragLeave,d=t.onDragOver,p=t.onDrop,h=t.onDropAccepted,f=t.onDropRejected,m=t.onFileDialogCancel,v=t.onFileDialogOpen,g=t.useFsAccessApi,y=t.autoFocus,b=t.preventDropOnDocument,x=t.noClick,w=t.noKeyboard,S=t.noDrag,C=t.noDragEventsBubbling,E=t.onError,T=t.validator,N=Lt.useMemo(function(){return function(e){if(s0(e))return Object.entries(e).reduce(function(e,t){var r=JX(t,2),n=r[0],i=r[1];return[].concat(VX(e),[n],VX(i))},[]).filter(function(e){return u0(e)||d0(e)}).join(",")}(r)},[r]),P=Lt.useMemo(function(){return function(e){return s0(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=JX(e,2),r=t[0],n=t[1],i=!0;return u0(r)||(console.warn('Skipped "'.concat(r,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),Array.isArray(n)&&n.every(d0)||(console.warn('Skipped "'.concat(r,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(e,t){var r=JX(t,2),n=r[0],i=r[1];return GX(GX({},e),{},KX({},n,i))},{})}]:e}(r)},[r]),R=Lt.useMemo(function(){return"function"==typeof v?v:I0},[v]),I=Lt.useMemo(function(){return"function"==typeof m?m:I0},[m]),k=Lt.useRef(null),_=Lt.useRef(null),A=g0(Lt.useReducer(R0,N0),2),j=A[0],O=A[1],D=j.isFocused,M=j.isFileDialogActive,L=Lt.useRef("undefined"!=typeof window&&window.isSecureContext&&g&&"showOpenFilePicker"in window),z=function(){!L.current&&M&&setTimeout(function(){_.current&&(_.current.files.length||(O({type:"closeDialog"}),I()))},300)};Lt.useEffect(function(){return window.addEventListener("focus",z,!1),function(){window.removeEventListener("focus",z,!1)}},[_,M,I,L]);var F=Lt.useRef([]),B=function(e){k.current&&k.current.contains(e.target)||(e.preventDefault(),F.current=[])};Lt.useEffect(function(){return b&&(document.addEventListener("dragover",l0,!1),document.addEventListener("drop",B,!1)),function(){b&&(document.removeEventListener("dragover",l0),document.removeEventListener("drop",B))}},[k,b]),Lt.useEffect(function(){return!n&&y&&k.current&&k.current.focus(),function(){}},[k,y,n]);var U=Lt.useCallback(function(e){E?E(e):console.error(e)},[E]),W=Lt.useCallback(function(e){e.preventDefault(),e.persist(),te(e),F.current=[].concat(v0(F.current),[e.target]),a0(e)&&Promise.resolve(i(e)).then(function(t){if(!o0(e)||C){var r=t.length,n=r>0&&function(e){var t=e.files,r=e.accept,n=e.minSize,i=e.maxSize,s=e.multiple,o=e.maxFiles,a=e.validator;return!(!s&&t.length>1||s&&o>=1&&t.length>o)&&t.every(function(e){var t=JX(n0(e,r),1)[0],s=JX(i0(e,n,i),1)[0],o=a?a(e):null;return t&&s&&!o})}({files:t,accept:N,minSize:o,maxSize:s,multiple:a,maxFiles:l,validator:T});O({isDragAccept:n,isDragReject:r>0&&!n,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e)}}).catch(function(e){return U(e)})},[i,c,U,C,N,o,s,a,l,T]),H=Lt.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=a0(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(r){}return t&&d&&d(e),!1},[d,C]),$=Lt.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=F.current.filter(function(e){return k.current&&k.current.contains(e)}),r=t.indexOf(e.target);-1!==r&&t.splice(r,1),F.current=t,t.length>0||(O({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),a0(e)&&u&&u(e))},[k,u,C]),V=Lt.useCallback(function(e,t){var r=[],n=[];e.forEach(function(e){var t=g0(n0(e,N),2),i=t[0],a=t[1],l=g0(i0(e,o,s),2),c=l[0],u=l[1],d=T?T(e):null;if(i&&c&&!d)r.push(e);else{var p=[a,u];d&&(p=p.concat(d)),n.push({file:e,errors:p.filter(function(e){return e})})}}),(!a&&r.length>1||a&&l>=1&&r.length>l)&&(r.forEach(function(e){n.push({file:e,errors:[r0]})}),r.splice(0)),O({acceptedFiles:r,fileRejections:n,isDragReject:n.length>0,type:"setFiles"}),p&&p(r,n,t),n.length>0&&f&&f(n,t),r.length>0&&h&&h(r,t)},[O,a,N,o,s,l,p,h,f,T]),q=Lt.useCallback(function(e){e.preventDefault(),e.persist(),te(e),F.current=[],a0(e)&&Promise.resolve(i(e)).then(function(t){o0(e)&&!C||V(t,e)}).catch(function(e){return U(e)}),O({type:"reset"})},[i,V,U,C]),G=Lt.useCallback(function(){if(L.current){O({type:"openDialog"}),R();var e={multiple:a,types:P};window.showOpenFilePicker(e).then(function(e){return i(e)}).then(function(e){V(e,null),O({type:"closeDialog"})}).catch(function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(I(e),O({type:"closeDialog"})):!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?U(e):(L.current=!1,_.current?(_.current.value=null,_.current.click()):U(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.")))})}else _.current&&(O({type:"openDialog"}),R(),_.current.value=null,_.current.click())},[O,R,I,g,V,U,P,a]),K=Lt.useCallback(function(e){k.current&&k.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),G()))},[k,G]),J=Lt.useCallback(function(){O({type:"focus"})},[]),Y=Lt.useCallback(function(){O({type:"blur"})},[]),Z=Lt.useCallback(function(){x||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?G():setTimeout(G,0))},[x,G]),Q=function(e){return n?null:e},X=function(e){return w?null:Q(e)},ee=function(e){return S?null:Q(e)},te=function(e){C&&e.stopPropagation()},re=Lt.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,i=e.role,s=e.onKeyDown,o=e.onFocus,a=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,d=e.onDragLeave,p=e.onDrop,h=C0(e,f0);return w0(w0(S0({onKeyDown:X(c0(s,K)),onFocus:X(c0(o,J)),onBlur:X(c0(a,Y)),onClick:Q(c0(l,Z)),onDragEnter:ee(c0(c,W)),onDragOver:ee(c0(u,H)),onDragLeave:ee(c0(d,$)),onDrop:ee(c0(p,q)),role:"string"==typeof i&&""!==i?i:"presentation"},r,k),n||w?{}:{tabIndex:0}),h)}},[k,K,J,Y,Z,W,H,$,q,w,S,n]),ne=Lt.useCallback(function(e){e.stopPropagation()},[]),ie=Lt.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,n=e.onChange,i=e.onClick,s=C0(e,m0);return w0(w0({},S0({accept:N,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Q(c0(n,q)),onClick:Q(c0(i,ne)),tabIndex:-1},r,_)),s)}},[_,r,a,q,n]);return w0(w0({},j),{},{isFocused:D&&!n,getRootProps:re,getInputProps:ie,rootRef:k,inputRef:_,open:Q(G)})}function R0(e,t){switch(t.type){case"focus":return w0(w0({},e),{},{isFocused:!0});case"blur":return w0(w0({},e),{},{isFocused:!1});case"openDialog":return w0(w0({},N0),{},{isFileDialogActive:!0});case"closeDialog":return w0(w0({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return w0(w0({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return w0(w0({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return w0({},N0);default:return e}}function I0(){}function k0({onFlowGenerated:e}){const[t,r]=Lt.useState(null),[n,i]=Lt.useState(""),[s,o]=Lt.useState(!1),{toast:a}=fv(),l=Lt.useCallback(e=>{e.length>0&&r(e[0])},[]),{getRootProps:c,getInputProps:u,isDragActive:d}=P0({onDrop:l,accept:{"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"application/pdf":[".pdf"],"text/plain":[".txt"]},maxFiles:1}),p=()=>Ke(this,null,function*(){if(t||n){o(!0);try{let r;if(t){const e=new FormData;e.append("file",t);const{buildApiUrl:n}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),i=n("/flow-generator/file"),s=yield fetch(i,{method:"POST",body:e,credentials:"include"});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);r=yield s.json(),a({title:"",description:""})}else{const{buildApiUrl:e}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),t=e("/emergency-flow/generate"),i=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:n}),credentials:"include"});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);r=yield i.json(),r.success&&r.flowData?r=r.flowData:r.success&&r.response&&(r={id:`flow_${Date.now()}`,title:n,description:`${n}`,triggerKeywords:[n],steps:[{id:"step1",title:"",description:`${n}`,message:`${n}`,type:"step",options:[]},{id:"step2",title:"",description:r.response,message:r.response,type:"step",options:[]}],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}),a({title:"",description:""})}e(r)}catch(r){console.error(":",r),a({title:"",description:r.message||"",variant:"destructive"})}finally{o(!1)}}else a({title:"",description:"",variant:"destructive"})});return Gt.jsxs(IL,{children:[Gt.jsxs(kL,{children:[Gt.jsxs(_L,{className:"flex items-center gap-2",children:[Gt.jsx(uy,{className:"w-6 h-6 text-blue-600"}),"AI"]}),Gt.jsx(AL,{children:""})]}),Gt.jsxs(jL,{className:"space-y-6",children:[Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{htmlFor:"keywords",className:"text-lg font-semibold",children:""}),Gt.jsx("p",{className:"text-sm text-gray-500",children:""}),Gt.jsx("textarea",{id:"keywords",placeholder:": , , ",value:n,onChange:e=>i(e.target.value),disabled:!!t,rows:3,className:"w-full px-3 py-2 border-2 border-blue-800 rounded-md text-base resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-800",style:{fontSize:"120%"}}),Gt.jsx("div",{className:"flex justify-center mt-3",children:Gt.jsx(Bg,{onClick:p,disabled:s||!n.trim()||!!t,size:"lg",className:"px-6 py-3 text-base font-medium",children:s?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Ty,{className:"mr-2 h-4 w-4 animate-spin"}),"..."]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(zy,{className:"mr-2 h-4 w-4"}),""]})})})]}),Gt.jsxs("div",{className:"relative flex items-center justify-center",children:[Gt.jsx("div",{className:"flex-grow border-t border-gray-300"}),Gt.jsx("span",{className:"flex-shrink mx-4 text-gray-500 font-semibold",children:""}),Gt.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),Gt.jsxs("div",ze(Le({},c()),{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors "+(d?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[Gt.jsx("input",Le({},u())),Gt.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-gray-500",children:[Gt.jsx(gy,{className:"w-10 h-10"}),d?Gt.jsx("p",{children:""}):Gt.jsx("p",{children:""}),Gt.jsx("p",{className:"text-xs",children:"(.pptx, .pdf, .txt )"})]})]})),t&&Gt.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-gray-50",children:[Gt.jsx(my,{className:"w-5 h-5 text-gray-600"}),Gt.jsx("span",{className:"font-medium",children:t.name}),Gt.jsx(Bg,{variant:"ghost",size:"sm",onClick:()=>r(null),className:"ml-auto",children:"X"})]}),Gt.jsx("div",{className:"flex justify-center",children:Gt.jsx(Bg,{onClick:p,disabled:s||!!n.trim(),size:"sm",className:"px-4 py-2 text-sm font-medium",style:{fontSize:"80%"},children:s?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Ty,{className:"mr-2 h-3 w-3 animate-spin"}),"..."]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(zy,{className:"mr-2 h-3 w-3"}),""]})})})]})]})}var _0=Symbol("radix.slottable");function A0(e){const t=({children:e})=>Gt.jsx(Gt.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=_0,t}var j0="AlertDialog",[O0]=cb(j0,[Qx]),D0=Qx(),M0=e=>{const t=e,{__scopeAlertDialog:r}=t,n=Fe(t,["__scopeAlertDialog"]),i=D0(r);return Gt.jsx(Iw,ze(Le(Le({},i),n),{modal:!0}))};M0.displayName=j0;Lt.forwardRef((e,t)=>{const r=e,{__scopeAlertDialog:n}=r,i=Fe(r,["__scopeAlertDialog"]),s=D0(n);return Gt.jsx(kw,ze(Le(Le({},s),i),{ref:t}))}).displayName="AlertDialogTrigger";var L0=e=>{const t=e,{__scopeAlertDialog:r}=t,n=Fe(t,["__scopeAlertDialog"]),i=D0(r);return Gt.jsx(_w,Le(Le({},i),n))};L0.displayName="AlertDialogPortal";var z0=Lt.forwardRef((e,t)=>{const r=e,{__scopeAlertDialog:n}=r,i=Fe(r,["__scopeAlertDialog"]),s=D0(n);return Gt.jsx(Aw,ze(Le(Le({},s),i),{ref:t}))});z0.displayName="AlertDialogOverlay";var F0="AlertDialogContent",[B0,U0]=O0(F0),W0=A0("AlertDialogContent"),H0=Lt.forwardRef((e,t)=>{const r=e,{__scopeAlertDialog:n,children:i}=r,s=Fe(r,["__scopeAlertDialog","children"]),o=D0(n),a=Lt.useRef(null),l=Pv(t,a),c=Lt.useRef(null);return Gt.jsx(Tw,{contentName:F0,titleName:$0,docsSlug:"alert-dialog",children:Gt.jsx(B0,{scope:n,cancelRef:c,children:Gt.jsxs(jw,ze(Le(Le({role:"alertdialog"},o),s),{ref:l,onOpenAutoFocus:lb(s.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=c.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[Gt.jsx(W0,{children:i}),Gt.jsx(Z0,{contentRef:a})]}))})})});H0.displayName=F0;var $0="AlertDialogTitle",V0=Lt.forwardRef((e,t)=>{const r=e,{__scopeAlertDialog:n}=r,i=Fe(r,["__scopeAlertDialog"]),s=D0(n);return Gt.jsx(Ow,ze(Le(Le({},s),i),{ref:t}))});V0.displayName=$0;var q0="AlertDialogDescription",G0=Lt.forwardRef((e,t)=>{const r=e,{__scopeAlertDialog:n}=r,i=Fe(r,["__scopeAlertDialog"]),s=D0(n);return Gt.jsx(Dw,ze(Le(Le({},s),i),{ref:t}))});G0.displayName=q0;var K0=Lt.forwardRef((e,t)=>{const r=e,{__scopeAlertDialog:n}=r,i=Fe(r,["__scopeAlertDialog"]),s=D0(n);return Gt.jsx(Mw,ze(Le(Le({},s),i),{ref:t}))});K0.displayName="AlertDialogAction";var J0="AlertDialogCancel",Y0=Lt.forwardRef((e,t)=>{const r=e,{__scopeAlertDialog:n}=r,i=Fe(r,["__scopeAlertDialog"]),{cancelRef:s}=U0(J0,n),o=D0(n),a=Pv(t,s);return Gt.jsx(Mw,ze(Le(Le({},o),i),{ref:a}))});Y0.displayName=J0;var Z0=({contentRef:e})=>{const t=`\`${F0}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${F0}\` by passing a \`${q0}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${F0}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return Lt.useEffect(()=>{var r;document.getElementById(null==(r=e.current)?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Q0=z0,X0=H0,e1=K0,t1=Y0,r1=V0,n1=G0;const i1=M0,s1=L0,o1=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(Q0,ze(Le({className:zg("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},i),{ref:t}))});o1.displayName=Q0.displayName;const a1=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsxs(s1,{children:[Gt.jsx(o1,{}),Gt.jsx(X0,Le({ref:t,className:zg("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n)},i))]})});a1.displayName=X0.displayName;const l1=e=>{var t=e,{className:r}=t,n=Fe(t,["className"]);return Gt.jsx("div",Le({className:zg("flex flex-col space-y-2 text-center sm:text-left",r)},n))};l1.displayName="AlertDialogHeader";const c1=e=>{var t=e,{className:r}=t,n=Fe(t,["className"]);return Gt.jsx("div",Le({className:zg("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r)},n))};c1.displayName="AlertDialogFooter";const u1=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(r1,Le({ref:t,className:zg("text-lg font-semibold",n)},i))});u1.displayName=r1.displayName;const d1=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(n1,Le({ref:t,className:zg("text-sm text-muted-foreground",n)},i))});d1.displayName=n1.displayName;const p1=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(e1,Le({ref:t,className:zg(Fg(),n)},i))});p1.displayName=e1.displayName;const h1=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(t1,Le({ref:t,className:zg(Fg({variant:"outline"}),"mt-2 sm:mt-0",n)},i))});h1.displayName=t1.displayName;const f1=({onEdit:e,onPreview:t})=>{const{toast:r}=fv(),{user:n}=sv(),[i,s]=Lt.useState([]),[o,a]=Lt.useState(!1),[l,c]=Lt.useState(!1),[u,d]=Lt.useState(null);Lt.useEffect(()=>{console.log(" FlowListManager "),console.log(" :",{user:!!n,userId:null==n?void 0:n.id}),p();const e=()=>{console.log(" "),p()},t=()=>{console.log(" "),p()};return window.addEventListener("flowGenerated",e),window.addEventListener("flowDeleted",t),()=>{window.removeEventListener("flowGenerated",e),window.removeEventListener("flowDeleted",t)}},[n]);const p=()=>Ke(void 0,null,function*(){if(console.log(" fetchFlowList"),!n)return console.log(" "),void r({title:"",description:"",variant:"destructive"});try{a(!0),console.log(" ...");const e=ZV("/emergency-flow/list");console.log(" API URL:",e);const t=Date.now(),r=`${e}${`?t=${t}`}`;console.log(" URL:",r);const n=yield fetch(r,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(console.log(" :",n.status,n.statusText),!n.ok){const e=yield n.text();throw console.error(" API:",e),new Error(`API: ${n.status} ${n.statusText} - ${e}`)}const i=yield n.json();console.log(" :",i);let o=[];if(i.success&&i.data)console.log(" data"),o=i.data.map(e=>{var t,r,n,i,s;return{id:(null==(t=e.content)?void 0:t.id)||e.id,title:(null==(r=e.content)?void 0:r.title)||e.title||e.name||"",description:(null==(n=e.content)?void 0:n.description)||e.description,fileName:e.filename||e.fileName,createdAt:(null==(i=e.content)?void 0:i.createdAt)||e.createdAt||(new Date).toISOString(),updatedAt:(null==(s=e.content)?void 0:s.updatedAt)||e.updatedAt,steps:e.steps}});else if(i.success&&i.flows)console.log(" flows"),o=i.flows.map(e=>{var t,r,n,i,s;return{id:(null==(t=e.content)?void 0:t.id)||e.id,title:(null==(r=e.content)?void 0:r.title)||e.title||e.name||"",description:(null==(n=e.content)?void 0:n.description)||e.description,fileName:e.filename||e.fileName,createdAt:(null==(i=e.content)?void 0:i.createdAt)||e.createdAt||(new Date).toISOString(),updatedAt:(null==(s=e.content)?void 0:s.updatedAt)||e.updatedAt,steps:e.steps}});else{if(!Array.isArray(i))throw console.error(" :",i),new Error("");console.log(" "),o=i}console.log(" flows:",o),console.log(" flows:",{length:o.length,isArray:Array.isArray(o),firstItem:o[0]}),o=o.map(e=>ze(Le({},e),{createdAt:e.createdAt||e.updatedAt||e.savedAt||(new Date).toISOString()})),console.log(" :",o.length+""),s(o)}catch(e){console.error(" fetchFlowList:",e),r({title:"",description:e instanceof Error?e.message:"",variant:"destructive"}),s([])}finally{a(!1),console.log(" fetchFlowList")}}),h=e=>{try{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleString("ja-JP")}catch(t){return""}};return Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs(IL,{children:[Gt.jsxs(kL,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Gt.jsx("div",{children:Gt.jsx(_L,{className:"text-xl",children:""})}),Gt.jsx("div",{className:"flex items-center gap-2",children:Gt.jsx(Bg,{variant:"outline",onClick:()=>{console.log(" "),p()},disabled:o,children:o?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Ty,{className:"mr-2 h-4 w-4 animate-spin"}),"..."]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Dy,{className:"mr-2 h-4 w-4"}),""]})})})]}),Gt.jsx(jL,{children:o?Gt.jsx("div",{className:"flex items-center justify-center h-64",children:Gt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):Gt.jsx("div",{className:"overflow-auto",children:Gt.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-sm",children:[Gt.jsx("thead",{children:Gt.jsxs("tr",{className:"bg-gray-100",children:[Gt.jsx("th",{className:"border border-gray-300 p-2 text-left text-sm font-medium",children:""}),Gt.jsx("th",{className:"border border-gray-300 p-2 text-left text-sm font-medium",children:""}),Gt.jsx("th",{className:"border border-gray-300 p-2 text-left text-sm font-medium",children:""})]})}),Gt.jsx("tbody",{children:0===i.length?Gt.jsx("tr",{children:Gt.jsx("td",{colSpan:3,className:"border border-gray-300 p-4 text-center text-gray-500",children:""})}):i.map(r=>{var n;return Gt.jsxs("tr",{className:"hover:bg-gray-50",children:[Gt.jsx("td",{className:"border border-gray-300 p-2",children:Gt.jsx("div",{className:"break-words leading-tight text-sm",children:r.title||(null==(n=r.description)?void 0:n.substring(0,30))+"..."||r.fileName||r.id||""})}),Gt.jsx("td",{className:"border border-gray-300 p-2 text-xs text-gray-500",children:h(r.createdAt)}),Gt.jsx("td",{className:"border border-gray-300 p-2",children:Gt.jsxs("div",{className:"flex gap-1",children:[Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>t(r.id),title:"",className:"h-7 px-2 text-xs",children:Gt.jsx(hy,{className:"h-3 w-3"})}),Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>e(r.id),title:"",className:"h-7 px-2 text-xs",children:Gt.jsx($y,{className:"h-3 w-3"})}),Gt.jsx(Bg,{variant:"destructive",size:"sm",onClick:()=>{return e=r.id,d(e),void c(!0);var e},title:"",className:"h-7 px-2 text-xs",children:Gt.jsx(Ky,{className:"h-3 w-3"})})]})})]},r.id)})})]})})})]}),Gt.jsx(i1,{open:l,onOpenChange:c,children:Gt.jsxs(a1,{children:[Gt.jsxs(l1,{children:[Gt.jsx(u1,{children:""}),Gt.jsx(d1,{children:""})]}),Gt.jsxs(c1,{children:[Gt.jsx(h1,{children:""}),Gt.jsx(p1,{onClick:()=>Ke(void 0,null,function*(){if(u)try{console.log(" :",u);const t=yield fetch(`/api/emergency-flow/${u}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(console.log(" :",{status:t.status,statusText:t.statusText,ok:t.ok}),!t.ok){let r=`: ${t.status} - ${t.statusText}`;try{const e=yield t.json();console.log(" :",e),r=e.error||e.details||r}catch(e){console.warn(" :",e)}throw new Error(r)}const n=yield t.json();console.log(" :",n),r({title:"",description:""}),s(e=>{const t=e.filter(e=>e.id!==u);return console.log(" : "+u+" (: "+t.length+")"),t}),console.log(" ..."),yield p()}catch(t){console.error(" :",t);const e=t instanceof Error?t.message:"";r({title:"",description:e,variant:"destructive"})}finally{c(!1),d(null)}}),className:"bg-red-600 hover:bg-red-700",children:""})]})]})})]})};var m1="ScrollArea",[v1]=cb(m1),[g1,y1]=v1(m1),b1=Lt.forwardRef((e,t)=>{const r=e,{__scopeScrollArea:n,type:i="hover",dir:s,scrollHideDelay:o=600}=r,a=Fe(r,["__scopeScrollArea","type","dir","scrollHideDelay"]),[l,c]=Lt.useState(null),[u,d]=Lt.useState(null),[p,h]=Lt.useState(null),[f,m]=Lt.useState(null),[v,g]=Lt.useState(null),[y,b]=Lt.useState(0),[x,w]=Lt.useState(0),[S,C]=Lt.useState(!1),[E,T]=Lt.useState(!1),N=Pv(t,e=>c(e)),P=TF(s);return Gt.jsx(g1,{scope:n,type:i,dir:P,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:d,content:p,onContentChange:h,scrollbarX:f,onScrollbarXChange:m,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:v,onScrollbarYChange:g,scrollbarYEnabled:E,onScrollbarYEnabledChange:T,onCornerWidthChange:b,onCornerHeightChange:w,children:Gt.jsx(wb.div,ze(Le({dir:P},a),{ref:N,style:Le({position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":x+"px"},e.style)}))})});b1.displayName=m1;var x1="ScrollAreaViewport",w1=Lt.forwardRef((e,t)=>{const r=e,{__scopeScrollArea:n,children:i,nonce:s}=r,o=Fe(r,["__scopeScrollArea","children","nonce"]),a=y1(x1,n),l=Pv(t,Lt.useRef(null),a.onViewportChange);return Gt.jsxs(Gt.Fragment,{children:[Gt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),Gt.jsx(wb.div,ze(Le({"data-radix-scroll-area-viewport":""},o),{ref:l,style:Le({overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden"},e.style),children:Gt.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:i})}))]})});w1.displayName=x1;var S1="ScrollAreaScrollbar",C1=Lt.forwardRef((e,t)=>{const r=e,{forceMount:n}=r,i=Fe(r,["forceMount"]),s=y1(S1,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,l="horizontal"===e.orientation;return Lt.useEffect(()=>(l?o(!0):a(!0),()=>{l?o(!1):a(!1)}),[l,o,a]),"hover"===s.type?Gt.jsx(E1,ze(Le({},i),{ref:t,forceMount:n})):"scroll"===s.type?Gt.jsx(T1,ze(Le({},i),{ref:t,forceMount:n})):"auto"===s.type?Gt.jsx(N1,ze(Le({},i),{ref:t,forceMount:n})):"always"===s.type?Gt.jsx(P1,ze(Le({},i),{ref:t})):null});C1.displayName=S1;var E1=Lt.forwardRef((e,t)=>{const r=e,{forceMount:n}=r,i=Fe(r,["forceMount"]),s=y1(S1,e.__scopeScrollArea),[o,a]=Lt.useState(!1);return Lt.useEffect(()=>{const e=s.scrollArea;let t=0;if(e){const r=()=>{window.clearTimeout(t),a(!0)},n=()=>{t=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[s.scrollArea,s.scrollHideDelay]),Gt.jsx(qb,{present:n||o,children:Gt.jsx(N1,ze(Le({"data-state":o?"visible":"hidden"},i),{ref:t}))})}),T1=Lt.forwardRef((e,t)=>{const r=e,{forceMount:n}=r,i=Fe(r,["forceMount"]),s=y1(S1,e.__scopeScrollArea),o="horizontal"===e.orientation,a=q1(()=>c("SCROLL_END"),100),[l,c]=(u="hidden",d={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},Lt.useReducer((e,t)=>{const r=d[e][t];return null!=r?r:e},u));var u,d;return Lt.useEffect(()=>{if("idle"===l){const e=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(e)}},[l,s.scrollHideDelay,c]),Lt.useEffect(()=>{const e=s.viewport,t=o?"scrollLeft":"scrollTop";if(e){let r=e[t];const n=()=>{const n=e[t];r!==n&&(c("SCROLL"),a()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[s.viewport,o,c,a]),Gt.jsx(qb,{present:n||"hidden"!==l,children:Gt.jsx(P1,ze(Le({"data-state":"hidden"===l?"hidden":"visible"},i),{ref:t,onPointerEnter:lb(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:lb(e.onPointerLeave,()=>c("POINTER_LEAVE"))}))})}),N1=Lt.forwardRef((e,t)=>{const r=y1(S1,e.__scopeScrollArea),n=e,{forceMount:i}=n,s=Fe(n,["forceMount"]),[o,a]=Lt.useState(!1),l="horizontal"===e.orientation,c=q1(()=>{if(r.viewport){const e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;a(l?e:t)}},10);return G1(r.viewport,c),G1(r.content,c),Gt.jsx(qb,{present:i||o,children:Gt.jsx(P1,ze(Le({"data-state":o?"visible":"hidden"},s),{ref:t}))})}),P1=Lt.forwardRef((e,t)=>{const r=e,{orientation:n="vertical"}=r,i=Fe(r,["orientation"]),s=y1(S1,e.__scopeScrollArea),o=Lt.useRef(null),a=Lt.useRef(0),[l,c]=Lt.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=B1(l.viewport,l.content),d=ze(Le({},i),{sizes:l,onSizesChange:c,hasThumb:Boolean(u>0&&u<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:e=>a.current=e});function p(e,t){return function(e,t,r,n="ltr"){const i=U1(r),s=i/2,o=t||s,a=i-o,l=r.scrollbar.paddingStart+o,c=r.scrollbar.size-r.scrollbar.paddingEnd-a,u=r.content-r.viewport,d="ltr"===n?[0,u]:[-1*u,0];return H1([l,c],d)(e)}(e,a.current,l,t)}return"horizontal"===n?Gt.jsx(R1,ze(Le({},d),{ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const e=W1(s.viewport.scrollLeft,l,s.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollLeft=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollLeft=p(e,s.dir))}})):"vertical"===n?Gt.jsx(I1,ze(Le({},d),{ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const e=W1(s.viewport.scrollTop,l);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollTop=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollTop=p(e))}})):null}),R1=Lt.forwardRef((e,t)=>{const r=e,{sizes:n,onSizesChange:i}=r,s=Fe(r,["sizes","onSizesChange"]),o=y1(S1,e.__scopeScrollArea),[a,l]=Lt.useState(),c=Lt.useRef(null),u=Pv(t,c,o.onScrollbarXChange);return Lt.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),Gt.jsx(A1,ze(Le({"data-orientation":"horizontal"},s),{ref:u,sizes:n,style:Le({bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":U1(n)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(o.viewport){const n=o.viewport.scrollLeft+t.deltaX;e.onWheelScroll(n),$1(n,r)&&t.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&i({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:F1(a.paddingLeft),paddingEnd:F1(a.paddingRight)}})}}))}),I1=Lt.forwardRef((e,t)=>{const r=e,{sizes:n,onSizesChange:i}=r,s=Fe(r,["sizes","onSizesChange"]),o=y1(S1,e.__scopeScrollArea),[a,l]=Lt.useState(),c=Lt.useRef(null),u=Pv(t,c,o.onScrollbarYChange);return Lt.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),Gt.jsx(A1,ze(Le({"data-orientation":"vertical"},s),{ref:u,sizes:n,style:Le({top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":U1(n)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(o.viewport){const n=o.viewport.scrollTop+t.deltaY;e.onWheelScroll(n),$1(n,r)&&t.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&i({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:F1(a.paddingTop),paddingEnd:F1(a.paddingBottom)}})}}))}),[k1,_1]=v1(S1),A1=Lt.forwardRef((e,t)=>{const r=e,{__scopeScrollArea:n,sizes:i,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:p}=r,h=Fe(r,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),f=y1(S1,n),[m,v]=Lt.useState(null),g=Pv(t,e=>v(e)),y=Lt.useRef(null),b=Lt.useRef(""),x=f.viewport,w=i.content-i.viewport,S=Cb(d),C=Cb(c),E=q1(p,10);function T(e){if(y.current){const t=e.clientX-y.current.left,r=e.clientY-y.current.top;u({x:t,y:r})}}return Lt.useEffect(()=>{const e=e=>{const t=e.target;(null==m?void 0:m.contains(t))&&S(e,w)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[x,m,w,S]),Lt.useEffect(C,[i,C]),G1(m,E),G1(f.content,E),Gt.jsx(k1,{scope:n,scrollbar:m,hasThumb:s,onThumbChange:Cb(o),onThumbPointerUp:Cb(a),onThumbPositionChange:C,onThumbPointerDown:Cb(l),children:Gt.jsx(wb.div,ze(Le({},h),{ref:g,style:Le({position:"absolute"},h.style),onPointerDown:lb(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),y.current=m.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),T(e)}}),onPointerMove:lb(e.onPointerMove,T),onPointerUp:lb(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,f.viewport&&(f.viewport.style.scrollBehavior=""),y.current=null})}))})}),j1="ScrollAreaThumb",O1=Lt.forwardRef((e,t)=>{const r=e,{forceMount:n}=r,i=Fe(r,["forceMount"]),s=_1(j1,e.__scopeScrollArea);return Gt.jsx(qb,{present:n||s.hasThumb,children:Gt.jsx(D1,Le({ref:t},i))})}),D1=Lt.forwardRef((e,t)=>{const r=e,{__scopeScrollArea:n,style:i}=r,s=Fe(r,["__scopeScrollArea","style"]),o=y1(j1,n),a=_1(j1,n),{onThumbPositionChange:l}=a,c=Pv(t,e=>a.onThumbChange(e)),u=Lt.useRef(void 0),d=q1(()=>{u.current&&(u.current(),u.current=void 0)},100);return Lt.useEffect(()=>{const e=o.viewport;if(e){const t=()=>{if(d(),!u.current){const t=V1(e,l);u.current=t,l()}};return l(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[o.viewport,d,l]),Gt.jsx(wb.div,ze(Le({"data-state":a.hasThumb?"visible":"hidden"},s),{ref:c,style:Le({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},i),onPointerDownCapture:lb(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;a.onThumbPointerDown({x:r,y:n})}),onPointerUp:lb(e.onPointerUp,a.onThumbPointerUp)}))});O1.displayName=j1;var M1="ScrollAreaCorner",L1=Lt.forwardRef((e,t)=>{const r=y1(M1,e.__scopeScrollArea),n=Boolean(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&n?Gt.jsx(z1,ze(Le({},e),{ref:t})):null});L1.displayName=M1;var z1=Lt.forwardRef((e,t)=>{const r=e,{__scopeScrollArea:n}=r,i=Fe(r,["__scopeScrollArea"]),s=y1(M1,n),[o,a]=Lt.useState(0),[l,c]=Lt.useState(0),u=Boolean(o&&l);return G1(s.scrollbarX,()=>{var e;const t=(null==(e=s.scrollbarX)?void 0:e.offsetHeight)||0;s.onCornerHeightChange(t),c(t)}),G1(s.scrollbarY,()=>{var e;const t=(null==(e=s.scrollbarY)?void 0:e.offsetWidth)||0;s.onCornerWidthChange(t),a(t)}),u?Gt.jsx(wb.div,ze(Le({},i),{ref:t,style:Le({width:o,height:l,position:"absolute",right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:0},e.style)})):null});function F1(e){return e?parseInt(e,10):0}function B1(e,t){const r=e/t;return isNaN(r)?0:r}function U1(e){const t=B1(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function W1(e,t,r="ltr"){const n=U1(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-n,l=uH(e,"ltr"===r?[0,o]:[-1*o,0]);return H1([0,o],[0,a])(l)}function H1(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function $1(e,t){return e>0&&e<t}var V1=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=r.left!==s.left,a=r.top!==s.top;(o||a)&&t(),r=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function q1(e,t){const r=Cb(e),n=Lt.useRef(0);return Lt.useEffect(()=>()=>window.clearTimeout(n.current),[]),Lt.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function G1(e,t){const r=Cb(t);db(()=>{let t=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}var K1=b1,J1=w1,Y1=L1;const Z1=Lt.forwardRef((e,t)=>{var r=e,{className:n,children:i}=r,s=Fe(r,["className","children"]);return Gt.jsxs(K1,ze(Le({ref:t,className:zg("relative overflow-hidden",n)},s),{children:[Gt.jsx(J1,{className:"h-full w-full rounded-[inherit]",children:i}),Gt.jsx(Q1,{}),Gt.jsx(Y1,{})]}))});Z1.displayName=K1.displayName;const Q1=Lt.forwardRef((e,t)=>{var r=e,{className:n,orientation:i="vertical"}=r,s=Fe(r,["className","orientation"]);return Gt.jsx(C1,ze(Le({ref:t,orientation:i,className:zg("flex touch-none select-none transition-colors","vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n)},s),{children:Gt.jsx(O1,{className:"relative flex-1 rounded-full bg-border"})}))});Q1.displayName=C1.displayName;const X1=[];for(let $=0;$<256;++$)X1.push(($+256).toString(16).slice(1));let e2;const t2=new Uint8Array(16);const r2={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function n2(e,t,r){var n,i,s;if(r2.randomUUID&&!e)return r2.randomUUID();const o=null!=(s=null!=(i=(e=e||{}).random)?i:null==(n=e.rng)?void 0:n.call(e))?s:function(){if(!e2){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");e2=crypto.getRandomValues.bind(crypto)}return e2(t2)}();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=15&o[6]|64,o[8]=63&o[8]|128,function(e,t=0){return(X1[e[t+0]]+X1[e[t+1]]+X1[e[t+2]]+X1[e[t+3]]+"-"+X1[e[t+4]]+X1[e[t+5]]+"-"+X1[e[t+6]]+X1[e[t+7]]+"-"+X1[e[t+8]]+X1[e[t+9]]+"-"+X1[e[t+10]]+X1[e[t+11]]+X1[e[t+12]]+X1[e[t+13]]+X1[e[t+14]]+X1[e[t+15]]).toLowerCase()}(o)}function i2(e){const t=s2(e),r=Lt.forwardRef((e,r)=>{const n=e,{children:i}=n,s=Fe(n,["children"]),o=Lt.Children.toArray(i),a=o.find(a2);if(a){const e=a.props.children,n=o.map(t=>t===a?Lt.Children.count(e)>1?Lt.Children.only(null):Lt.isValidElement(e)?e.props.children:null:t);return Gt.jsx(t,ze(Le({},s),{ref:r,children:Lt.isValidElement(e)?Lt.cloneElement(e,void 0,n):null}))}return Gt.jsx(t,ze(Le({},s),{ref:r,children:i}))});return r.displayName=`${e}.Slot`,r}function s2(e){const t=Lt.forwardRef((e,t)=>{const r=e,{children:n}=r,i=Fe(r,["children"]);if(Lt.isValidElement(n)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(n),r=function(e,t){const r=Le({},t);for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]=Le(Le({},i),s):"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return Le(Le({},e),r)}(i,n.props);return n.type!==Lt.Fragment&&(r.ref=t?Nv(t,e):e),Lt.cloneElement(n,r)}return Lt.Children.count(n)>1?Lt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var o2=Symbol("radix.slottable");function a2(e){return Lt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o2}var l2=["Enter"," "],c2=["ArrowUp","PageDown","End"],u2=["ArrowDown","PageUp","Home",...c2],d2={ltr:[...l2,"ArrowRight"],rtl:[...l2,"ArrowLeft"]},p2={ltr:["ArrowLeft"],rtl:["ArrowRight"]},h2="Menu",[f2,m2,v2]=Jw(h2),[g2,y2]=cb(h2,[v2,dW,jF]),b2=dW(),x2=jF(),[w2,S2]=g2(h2),[C2,E2]=g2(h2),T2=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:i,onOpenChange:s,modal:o=!0}=e,a=b2(t),[l,c]=Lt.useState(null),u=Lt.useRef(!1),d=Cb(s),p=TF(i);return Lt.useEffect(()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),Gt.jsx(PW,ze(Le({},a),{children:Gt.jsx(w2,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:c,children:Gt.jsx(C2,{scope:t,onClose:Lt.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:p,modal:o,children:n})})}))};T2.displayName=h2;var N2=Lt.forwardRef((e,t)=>{const r=e,{__scopeMenu:n}=r,i=Fe(r,["__scopeMenu"]),s=b2(n);return Gt.jsx(RW,ze(Le(Le({},s),i),{ref:t}))});N2.displayName="MenuAnchor";var P2="MenuPortal",[R2,I2]=g2(P2,{forceMount:void 0}),k2=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:i}=e,s=S2(P2,t);return Gt.jsx(R2,{scope:t,forceMount:r,children:Gt.jsx(qb,{present:r||s.open,children:Gt.jsx(Vb,{asChild:!0,container:i,children:n})})})};k2.displayName=P2;var _2="MenuContent",[A2,j2]=g2(_2),O2=Lt.forwardRef((e,t)=>{const r=I2(_2,e.__scopeMenu),n=e,{forceMount:i=r.forceMount}=n,s=Fe(n,["forceMount"]),o=S2(_2,e.__scopeMenu),a=E2(_2,e.__scopeMenu);return Gt.jsx(f2.Provider,{scope:e.__scopeMenu,children:Gt.jsx(qb,{present:i||o.open,children:Gt.jsx(f2.Slot,{scope:e.__scopeMenu,children:a.modal?Gt.jsx(D2,ze(Le({},s),{ref:t})):Gt.jsx(M2,ze(Le({},s),{ref:t}))})})})}),D2=Lt.forwardRef((e,t)=>{const r=S2(_2,e.__scopeMenu),n=Lt.useRef(null),i=Pv(t,n);return Lt.useEffect(()=>{const e=n.current;if(e)return Vx(e)},[]),Gt.jsx(z2,ze(Le({},e),{ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:lb(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)}))}),M2=Lt.forwardRef((e,t)=>{const r=S2(_2,e.__scopeMenu);return Gt.jsx(z2,ze(Le({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)}))}),L2=i2("MenuContent.ScrollLock"),z2=Lt.forwardRef((e,t)=>{const r=e,{__scopeMenu:n,loop:i=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:h,onDismiss:f,disableOutsideScroll:m}=r,v=Fe(r,["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"]),g=S2(_2,n),y=E2(_2,n),b=b2(n),x=x2(n),w=m2(n),[S,C]=Lt.useState(null),E=Lt.useRef(null),T=Pv(t,E,g.onContentChange),N=Lt.useRef(0),P=Lt.useRef(""),R=Lt.useRef(0),I=Lt.useRef(null),k=Lt.useRef("right"),_=Lt.useRef(0),A=m?zx:Lt.Fragment,j=m?{as:L2,allowPinchZoom:!0}:void 0,O=e=>{var t,r;const n=P.current+e,i=w().filter(e=>!e.disabled),s=document.activeElement,o=null==(t=i.find(e=>e.ref.current===s))?void 0:t.textValue,a=function(e,t,r){const n=t.length>1&&Array.from(t).every(e=>e===t[0]),i=n?t[0]:t,s=r?e.indexOf(r):-1;let o=(a=e,l=Math.max(s,0),a.map((e,t)=>a[(l+t)%a.length]));var a,l;1===i.length&&(o=o.filter(e=>e!==r));const c=o.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}(i.map(e=>e.textValue),n,o),l=null==(r=i.find(e=>e.textValue===a))?void 0:r.ref.current;!function e(t){P.current=t,window.clearTimeout(N.current),""!==t&&(N.current=window.setTimeout(()=>e(""),1e3))}(n),l&&setTimeout(()=>l.focus())};Lt.useEffect(()=>()=>window.clearTimeout(N.current),[]),Jb();const D=Lt.useCallback(e=>{var t,r;return k.current===(null==(t=I.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return function(e,t){const{x:r,y:n}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const e=t[s],a=t[o],l=e.x,c=e.y,u=a.x,d=a.y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(i=!i)}return i}(r,t)}(e,null==(r=I.current)?void 0:r.area)},[]);return Gt.jsx(A2,{scope:n,searchRef:P,onItemEnter:Lt.useCallback(e=>{D(e)&&e.preventDefault()},[D]),onItemLeave:Lt.useCallback(e=>{var t;D(e)||(null==(t=E.current)||t.focus(),C(null))},[D]),onTriggerLeave:Lt.useCallback(e=>{D(e)&&e.preventDefault()},[D]),pointerGraceTimerRef:R,onPointerGraceIntentChange:Lt.useCallback(e=>{I.current=e},[]),children:Gt.jsx(A,ze(Le({},j),{children:Gt.jsx(zb,{asChild:!0,trapped:s,onMountAutoFocus:lb(o,e=>{var t;e.preventDefault(),null==(t=E.current)||t.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:Gt.jsx(Ib,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:h,onDismiss:f,children:Gt.jsx(WF,ze(Le({asChild:!0},x),{dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:S,onCurrentTabStopIdChange:C,onEntryFocus:lb(c,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:Gt.jsx(IW,ze(Le(Le({role:"menu","aria-orientation":"vertical","data-state":u4(g.open),"data-radix-menu-content":"",dir:y.dir},b),v),{ref:T,style:Le({outline:"none"},v.style),onKeyDown:lb(v.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&n&&O(e.key));const i=E.current;if(e.target!==i)return;if(!u2.includes(e.key))return;e.preventDefault();const s=w().filter(e=>!e.disabled).map(e=>e.ref.current);c2.includes(e.key)&&s.reverse(),function(e){const t=document.activeElement;for(const r of e){if(r===t)return;if(r.focus(),document.activeElement!==t)return}}(s)}),onBlur:lb(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(N.current),P.current="")}),onPointerMove:lb(e.onPointerMove,h4(e=>{const t=e.target,r=_.current!==e.clientX;if(e.currentTarget.contains(t)&&r){const t=e.clientX>_.current?"right":"left";k.current=t,_.current=e.clientX}}))}))}))})})}))})});O2.displayName=_2;var F2=Lt.forwardRef((e,t)=>{const r=e,{__scopeMenu:n}=r,i=Fe(r,["__scopeMenu"]);return Gt.jsx(wb.div,ze(Le({role:"group"},i),{ref:t}))});F2.displayName="MenuGroup";var B2=Lt.forwardRef((e,t)=>{const r=e,{__scopeMenu:n}=r,i=Fe(r,["__scopeMenu"]);return Gt.jsx(wb.div,ze(Le({},i),{ref:t}))});B2.displayName="MenuLabel";var U2="MenuItem",W2="menu.itemSelect",H2=Lt.forwardRef((e,t)=>{const r=e,{disabled:n=!1,onSelect:i}=r,s=Fe(r,["disabled","onSelect"]),o=Lt.useRef(null),a=E2(U2,e.__scopeMenu),l=j2(U2,e.__scopeMenu),c=Pv(t,o),u=Lt.useRef(!1);return Gt.jsx($2,ze(Le({},s),{ref:c,disabled:n,onClick:lb(e.onClick,()=>{const e=o.current;if(!n&&e){const t=new CustomEvent(W2,{bubbles:!0,cancelable:!0});e.addEventListener(W2,e=>null==i?void 0:i(e),{once:!0}),Sb(e,t),t.defaultPrevented?u.current=!1:a.onClose()}}),onPointerDown:t=>{var r;null==(r=e.onPointerDown)||r.call(e,t),u.current=!0},onPointerUp:lb(e.onPointerUp,e=>{var t;u.current||null==(t=e.currentTarget)||t.click()}),onKeyDown:lb(e.onKeyDown,e=>{const t=""!==l.searchRef.current;n||t&&" "===e.key||l2.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})}))});H2.displayName=U2;var $2=Lt.forwardRef((e,t)=>{const r=e,{__scopeMenu:n,disabled:i=!1,textValue:s}=r,o=Fe(r,["__scopeMenu","disabled","textValue"]),a=j2(U2,n),l=x2(n),c=Lt.useRef(null),u=Pv(t,c),[d,p]=Lt.useState(!1),[h,f]=Lt.useState("");return Lt.useEffect(()=>{var e;const t=c.current;t&&f((null!=(e=t.textContent)?e:"").trim())},[o.children]),Gt.jsx(f2.ItemSlot,{scope:n,disabled:i,textValue:null!=s?s:h,children:Gt.jsx(HF,ze(Le({asChild:!0},l),{focusable:!i,children:Gt.jsx(wb.div,ze(Le({role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0},o),{ref:u,onPointerMove:lb(e.onPointerMove,h4(e=>{if(i)a.onItemLeave(e);else if(a.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:lb(e.onPointerLeave,h4(e=>a.onItemLeave(e))),onFocus:lb(e.onFocus,()=>p(!0)),onBlur:lb(e.onBlur,()=>p(!1))}))}))})}),V2=Lt.forwardRef((e,t)=>{const r=e,{checked:n=!1,onCheckedChange:i}=r,s=Fe(r,["checked","onCheckedChange"]);return Gt.jsx(X2,{scope:e.__scopeMenu,checked:n,children:Gt.jsx(H2,ze(Le({role:"menuitemcheckbox","aria-checked":d4(n)?"mixed":n},s),{ref:t,"data-state":p4(n),onSelect:lb(s.onSelect,()=>null==i?void 0:i(!!d4(n)||!n),{checkForDefaultPrevented:!1})}))})});V2.displayName="MenuCheckboxItem";var q2="MenuRadioGroup",[G2,K2]=g2(q2,{value:void 0,onValueChange:()=>{}}),J2=Lt.forwardRef((e,t)=>{const r=e,{value:n,onValueChange:i}=r,s=Fe(r,["value","onValueChange"]),o=Cb(i);return Gt.jsx(G2,{scope:e.__scopeMenu,value:n,onValueChange:o,children:Gt.jsx(F2,ze(Le({},s),{ref:t}))})});J2.displayName=q2;var Y2="MenuRadioItem",Z2=Lt.forwardRef((e,t)=>{const r=e,{value:n}=r,i=Fe(r,["value"]),s=K2(Y2,e.__scopeMenu),o=n===s.value;return Gt.jsx(X2,{scope:e.__scopeMenu,checked:o,children:Gt.jsx(H2,ze(Le({role:"menuitemradio","aria-checked":o},i),{ref:t,"data-state":p4(o),onSelect:lb(i.onSelect,()=>{var e;return null==(e=s.onValueChange)?void 0:e.call(s,n)},{checkForDefaultPrevented:!1})}))})});Z2.displayName=Y2;var Q2="MenuItemIndicator",[X2,e4]=g2(Q2,{checked:!1}),t4=Lt.forwardRef((e,t)=>{const r=e,{__scopeMenu:n,forceMount:i}=r,s=Fe(r,["__scopeMenu","forceMount"]),o=e4(Q2,n);return Gt.jsx(qb,{present:i||d4(o.checked)||!0===o.checked,children:Gt.jsx(wb.span,ze(Le({},s),{ref:t,"data-state":p4(o.checked)}))})});t4.displayName=Q2;var r4=Lt.forwardRef((e,t)=>{const r=e,{__scopeMenu:n}=r,i=Fe(r,["__scopeMenu"]);return Gt.jsx(wb.div,ze(Le({role:"separator","aria-orientation":"horizontal"},i),{ref:t}))});r4.displayName="MenuSeparator";var n4=Lt.forwardRef((e,t)=>{const r=e,{__scopeMenu:n}=r,i=Fe(r,["__scopeMenu"]),s=b2(n);return Gt.jsx(kW,ze(Le(Le({},s),i),{ref:t}))});n4.displayName="MenuArrow";var[i4,s4]=g2("MenuSub"),o4="MenuSubTrigger",a4=Lt.forwardRef((e,t)=>{const r=S2(o4,e.__scopeMenu),n=E2(o4,e.__scopeMenu),i=s4(o4,e.__scopeMenu),s=j2(o4,e.__scopeMenu),o=Lt.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},u=Lt.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return Lt.useEffect(()=>u,[u]),Lt.useEffect(()=>{const e=a.current;return()=>{window.clearTimeout(e),l(null)}},[a,l]),Gt.jsx(N2,ze(Le({asChild:!0},c),{children:Gt.jsx($2,ze(Le({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":u4(r.open)},e),{ref:Nv(t,i.onTriggerChange),onClick:t=>{var n;null==(n=e.onClick)||n.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:lb(e.onPointerMove,h4(t=>{s.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||o.current||(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:lb(e.onPointerLeave,h4(e=>{var t,n;u();const i=null==(t=r.content)?void 0:t.getBoundingClientRect();if(i){const t=null==(n=r.content)?void 0:n.dataset.side,o="right"===t,l=o?-5:5,c=i[o?"left":"right"],u=i[o?"right":"left"];s.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:i.top},{x:u,y:i.top},{x:u,y:i.bottom},{x:c,y:i.bottom}],side:t}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(e),e.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:lb(e.onKeyDown,t=>{var i;const o=""!==s.searchRef.current;e.disabled||o&&" "===t.key||d2[n.dir].includes(t.key)&&(r.onOpenChange(!0),null==(i=r.content)||i.focus(),t.preventDefault())})}))}))});a4.displayName=o4;var l4="MenuSubContent",c4=Lt.forwardRef((e,t)=>{const r=I2(_2,e.__scopeMenu),n=e,{forceMount:i=r.forceMount}=n,s=Fe(n,["forceMount"]),o=S2(_2,e.__scopeMenu),a=E2(_2,e.__scopeMenu),l=s4(l4,e.__scopeMenu),c=Lt.useRef(null),u=Pv(t,c);return Gt.jsx(f2.Provider,{scope:e.__scopeMenu,children:Gt.jsx(qb,{present:i||o.open,children:Gt.jsx(f2.Slot,{scope:e.__scopeMenu,children:Gt.jsx(z2,ze(Le({id:l.contentId,"aria-labelledby":l.triggerId},s),{ref:u,align:"start",side:"rtl"===a.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;a.isUsingKeyboardRef.current&&(null==(t=c.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:lb(e.onFocusOutside,e=>{e.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:lb(e.onEscapeKeyDown,e=>{a.onClose(),e.preventDefault()}),onKeyDown:lb(e.onKeyDown,e=>{var t;const r=e.currentTarget.contains(e.target),n=p2[a.dir].includes(e.key);r&&n&&(o.onOpenChange(!1),null==(t=l.trigger)||t.focus(),e.preventDefault())})}))})})})});function u4(e){return e?"open":"closed"}function d4(e){return"indeterminate"===e}function p4(e){return d4(e)?"indeterminate":e?"checked":"unchecked"}function h4(e){return t=>"mouse"===t.pointerType?e(t):void 0}c4.displayName=l4;var f4=T2,m4=N2,v4=k2,g4=O2,y4=F2,b4=B2,x4=H2,w4=V2,S4=J2,C4=Z2,E4=t4,T4=r4,N4=n4,P4=a4,R4=c4,I4="ContextMenu",[k4]=cb(I4,[y2]),_4=y2(),[A4,j4]=k4(I4),O4=e=>{const{__scopeContextMenu:t,children:r,onOpenChange:n,dir:i,modal:s=!0}=e,[o,a]=Lt.useState(!1),l=_4(t),c=Cb(n),u=Lt.useCallback(e=>{a(e),c(e)},[c]);return Gt.jsx(A4,{scope:t,open:o,onOpenChange:u,modal:s,children:Gt.jsx(f4,ze(Le({},l),{dir:i,open:o,onOpenChange:u,modal:s,children:r}))})};O4.displayName=I4;var D4="ContextMenuTrigger",M4=Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n,disabled:i=!1}=r,s=Fe(r,["__scopeContextMenu","disabled"]),o=j4(D4,n),a=_4(n),l=Lt.useRef({x:0,y:0}),c=Lt.useRef({getBoundingClientRect:()=>DOMRect.fromRect(Le({width:0,height:0},l.current))}),u=Lt.useRef(0),d=Lt.useCallback(()=>window.clearTimeout(u.current),[]),p=e=>{l.current={x:e.clientX,y:e.clientY},o.onOpenChange(!0)};return Lt.useEffect(()=>d,[d]),Lt.useEffect(()=>{i&&d()},[i,d]),Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(m4,ze(Le({},a),{virtualRef:c})),Gt.jsx(wb.span,ze(Le({"data-state":o.open?"open":"closed","data-disabled":i?"":void 0},s),{ref:t,style:Le({WebkitTouchCallout:"none"},e.style),onContextMenu:i?e.onContextMenu:lb(e.onContextMenu,e=>{d(),p(e),e.preventDefault()}),onPointerDown:i?e.onPointerDown:lb(e.onPointerDown,K4(e=>{d(),u.current=window.setTimeout(()=>p(e),700)})),onPointerMove:i?e.onPointerMove:lb(e.onPointerMove,K4(d)),onPointerCancel:i?e.onPointerCancel:lb(e.onPointerCancel,K4(d)),onPointerUp:i?e.onPointerUp:lb(e.onPointerUp,K4(d))}))]})});M4.displayName=D4;var L4=e=>{const t=e,{__scopeContextMenu:r}=t,n=Fe(t,["__scopeContextMenu"]),i=_4(r);return Gt.jsx(v4,Le(Le({},i),n))};L4.displayName="ContextMenuPortal";var z4="ContextMenuContent",F4=Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=j4(z4,n),o=_4(n),a=Lt.useRef(!1);return Gt.jsx(g4,ze(Le(Le({},o),i),{ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{var r;null==(r=e.onCloseAutoFocus)||r.call(e,t),!t.defaultPrevented&&a.current&&t.preventDefault(),a.current=!1},onInteractOutside:t=>{var r;null==(r=e.onInteractOutside)||r.call(e,t),t.defaultPrevented||s.modal||(a.current=!0)},style:Le(Le({},e.style),{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});F4.displayName=z4;Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(y4,ze(Le(Le({},s),i),{ref:t}))}).displayName="ContextMenuGroup";var B4=Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(b4,ze(Le(Le({},s),i),{ref:t}))});B4.displayName="ContextMenuLabel";var U4=Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(x4,ze(Le(Le({},s),i),{ref:t}))});U4.displayName="ContextMenuItem";var W4=Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(w4,ze(Le(Le({},s),i),{ref:t}))});W4.displayName="ContextMenuCheckboxItem";Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(S4,ze(Le(Le({},s),i),{ref:t}))}).displayName="ContextMenuRadioGroup";var H4=Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(C4,ze(Le(Le({},s),i),{ref:t}))});H4.displayName="ContextMenuRadioItem";var $4=Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(E4,ze(Le(Le({},s),i),{ref:t}))});$4.displayName="ContextMenuItemIndicator";var V4=Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(T4,ze(Le(Le({},s),i),{ref:t}))});V4.displayName="ContextMenuSeparator";Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(N4,ze(Le(Le({},s),i),{ref:t}))}).displayName="ContextMenuArrow";var q4=Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(P4,ze(Le(Le({},s),i),{ref:t}))});q4.displayName="ContextMenuSubTrigger";var G4=Lt.forwardRef((e,t)=>{const r=e,{__scopeContextMenu:n}=r,i=Fe(r,["__scopeContextMenu"]),s=_4(n);return Gt.jsx(R4,ze(Le(Le({},s),i),{ref:t,style:Le(Le({},e.style),{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});function K4(e){return t=>"mouse"!==t.pointerType?e(t):void 0}G4.displayName="ContextMenuSubContent";var J4=L4,Y4=F4,Z4=B4,Q4=U4,X4=W4,e3=H4,t3=$4,r3=V4,n3=q4,i3=G4;const s3=O4,o3=M4;Lt.forwardRef((e,t)=>{var r=e,{className:n,inset:i,children:s}=r,o=Fe(r,["className","inset","children"]);return Gt.jsxs(n3,ze(Le({ref:t,className:zg("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",i&&"pl-8",n)},o),{children:[s,Gt.jsx(ty,{className:"ml-auto h-4 w-4"})]}))}).displayName=n3.displayName;Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(i3,Le({ref:t,className:zg("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n)},i))}).displayName=i3.displayName;const a3=Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(J4,{children:Gt.jsx(Y4,Le({ref:t,className:zg("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n)},i))})});a3.displayName=Y4.displayName;const l3=Lt.forwardRef((e,t)=>{var r=e,{className:n,inset:i}=r,s=Fe(r,["className","inset"]);return Gt.jsx(Q4,Le({ref:t,className:zg("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i&&"pl-8",n)},s))});l3.displayName=Q4.displayName;Lt.forwardRef((e,t)=>{var r=e,{className:n,children:i,checked:s}=r,o=Fe(r,["className","children","checked"]);return Gt.jsxs(X4,ze(Le({ref:t,className:zg("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:s},o),{children:[Gt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Gt.jsx(t3,{children:Gt.jsx(Qg,{className:"h-4 w-4"})})}),i]}))}).displayName=X4.displayName;Lt.forwardRef((e,t)=>{var r=e,{className:n,children:i}=r,s=Fe(r,["className","children"]);return Gt.jsxs(e3,ze(Le({ref:t,className:zg("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n)},s),{children:[Gt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Gt.jsx(t3,{children:Gt.jsx(ay,{className:"h-2 w-2 fill-current"})})}),i]}))}).displayName=e3.displayName;Lt.forwardRef((e,t)=>{var r=e,{className:n,inset:i}=r,s=Fe(r,["className","inset"]);return Gt.jsx(Z4,Le({ref:t,className:zg("px-2 py-1.5 text-sm font-semibold text-foreground",i&&"pl-8",n)},s))}).displayName=Z4.displayName;Lt.forwardRef((e,t)=>{var r=e,{className:n}=r,i=Fe(r,["className"]);return Gt.jsx(r3,Le({ref:t,className:zg("-mx-1 my-1 h-px bg-border",n)},i))}).displayName=r3.displayName;const c3=({flowId:e,onSave:t,onCancel:r})=>{const{toast:n}=fv(),[i,s]=Lt.useState({id:e||n2(),title:e?"":"",description:"",triggerKeywords:[],steps:[]}),[o,a]=Lt.useState(!1),[l,c]=Lt.useState(null);Lt.useEffect(()=>{e&&u()},[e]);const u=()=>Ke(void 0,null,function*(){var t;try{a(!0),console.log(" ",e);const{buildApiUrl:r}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),n=r(`/emergency-flow/detail/${e}`);console.log(" API URL:",n);const i=yield fetch(n,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate, max-age=0",Pragma:"no-cache",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","X-Requested-With":"XMLHttpRequest"}});if(!i.ok){const e=yield i.text();throw console.error(" emergency-flow API :",{status:i.status,statusText:i.statusText,body:e}),new Error(`: ${i.status} - ${e}`)}const o=yield i.json();console.log(" emergency-flow API:",o);const l=o.success&&o.data?o.data:o;if(!l||!l.id)throw new Error("");console.log(" :",{hasId:!!l.id,hasTitle:!!l.title,hasDescription:!!l.description,hasSteps:!!l.steps,stepsType:Array.isArray(l.steps)?"array":typeof l.steps,stepsLength:null==(t=l.steps)?void 0:t.length,dataKeys:Object.keys(l)}),l.steps&&Array.isArray(l.steps)?l.steps=l.steps.map(e=>ze(Le({},e),{images:e.images||[],conditions:e.conditions||[]})):(console.warn(" steps"),l.steps=[]),console.log(" ",{id:l.id,title:l.title,stepsCount:l.steps.length,stepsWithImages:l.steps.filter(e=>e.images&&e.images.length>0).length}),l.steps.forEach((e,t)=>{e.images&&e.images.length>0&&console.log(` [${t}]:`,{stepId:e.id,stepTitle:e.title,imagesCount:e.images.length,images:e.images.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}})})}),s(l)}catch(r){console.error(" :",r),n({title:"",description:"",variant:"destructive"})}finally{a(!1)}}),d=(e,t)=>{const r=Le({id:n2(),type:e,title:""+("step"===e?"":""),description:"",message:"",images:[]},"decision"===e&&{conditions:[{label:"",nextId:""}]});s(e=>{const n=[...e.steps];return void 0!==t?n.splice(t,0,r):n.push(r),ze(Le({},e),{steps:n})})},p=e=>{s(t=>ze(Le({},t),{steps:t.steps.filter(t=>t.id!==e)}))},h=(e,t)=>{var r;console.log(" updateStep ",{stepId:e,updates:t,isImageUpdate:"images"in t,imageCount:(null==(r=t.images)?void 0:r.length)||0,currentFlowData:{id:i.id,stepsCount:i.steps.length,stepsWithImages:i.steps.filter(e=>e.images&&e.images.length>0).length}}),s(r=>{var n,i;const s=ze(Le({},r),{steps:r.steps.map(r=>{var n,i,s,o;if(r.id===e){const a=Le(Le({},r),t);return console.log(" :",{stepId:e,beforeUpdate:{id:r.id,title:r.title,hasImages:!!r.images,imagesCount:(null==(n=r.images)?void 0:n.length)||0,images:(null==(i=r.images)?void 0:i.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}}))||[]},afterUpdate:{id:a.id,title:a.title,hasImages:!!a.images,imagesCount:(null==(s=a.images)?void 0:s.length)||0,images:(null==(o=a.images)?void 0:o.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}}))||[]}}),a}return r})}),o=s.steps.find(t=>t.id===e);return console.log(" updateStep ",{stepId:e,updatedStep:o?{id:o.id,title:o.title,hasImages:!!o.images,imagesCount:(null==(n=o.images)?void 0:n.length)||0,images:(null==(i=o.images)?void 0:i.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}}))||[]}:null,allStepsImages:s.steps.map(e=>{var t,r;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(r=e.images)?void 0:r.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}}))||[]}})}),s}),console.log(" updateStep ",{stepId:e,updatedFlowData:{id:i.id,stepsCount:i.steps.length,stepsWithImages:i.steps.filter(e=>e.images&&e.images.length>0).length,allStepsImages:i.steps.map(e=>{var t,r;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(r=e.images)?void 0:r.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}}))||[]}})}})},f=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},m=(e,t,r,n)=>{s(i=>ze(Le({},i),{steps:i.steps.map(i=>{if(i.id===e&&i.conditions){const e=[...i.conditions];return e[t]=ze(Le({},e[t]),{[r]:n}),ze(Le({},i),{conditions:e})}return i})}))},v=()=>Ke(void 0,null,function*(){var e;console.log(" handleSave ");try{a(!0),console.log(" isLoading true "),console.log(" ",{id:i.id,title:i.title,stepsCount:i.steps.length});const r=ze(Le({},i),{triggerKeywords:i.triggerKeywords||[i.title]}),s=yield lq(r,{validateImages:!0,logDetails:!0});if(!s.success)throw new Error(s.error||"");console.log(" ",null==(e=s.data)?void 0:e.title),t(s.data||i),n({title:"",description:""})}catch(r){console.error(" :",r),n({title:"",description:`: ${r instanceof Error?r.message:"Unknown error"}`,variant:"destructive"})}finally{a(!1)}});return o&&e?Gt.jsx("div",{className:"flex items-center justify-center h-64",children:Gt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):Gt.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[Gt.jsxs(IL,{className:"flex-shrink-0",children:[Gt.jsx(kL,{children:Gt.jsxs(_L,{className:"flex items-center justify-between",children:[Gt.jsx("span",{children:e?"":""}),Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsxs(Bg,{variant:"outline",onClick:r,children:[Gt.jsx(ob,{className:"h-4 w-4 mr-1"}),""]}),Gt.jsxs(Bg,{onClick:()=>{console.log(" "),v()},disabled:o,children:[Gt.jsx(My,{className:"h-4 w-4 mr-1"}),""]})]})]})}),Gt.jsx(jL,{className:"space-y-6",children:Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"title",children:""}),Gt.jsx(KL,{id:"title",value:i.title,onChange:e=>s(t=>ze(Le({},t),{title:e.target.value})),placeholder:""})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"description",children:""}),Gt.jsx(KL,{id:"description",value:i.description,onChange:e=>s(t=>ze(Le({},t),{description:e.target.value})),placeholder:""})]})]})})]}),Gt.jsxs(IL,{className:"flex-1 flex flex-col min-h-0",children:[Gt.jsx(kL,{children:Gt.jsxs(_L,{className:"flex items-center justify-between",children:[Gt.jsx("span",{children:""}),Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsxs(Bg,{variant:"outline",size:"sm",onClick:()=>d("step"),children:[Gt.jsx(jy,{className:"h-4 w-4 mr-1"}),""]}),Gt.jsxs(Bg,{variant:"outline",size:"sm",onClick:()=>d("decision"),children:[Gt.jsx(jy,{className:"h-4 w-4 mr-1"}),""]})]})]})}),Gt.jsx(jL,{className:"flex-1 overflow-hidden",children:Gt.jsx(Z1,{className:"h-full",children:Gt.jsx("div",{className:"space-y-4 pr-4",children:i.steps&&i.steps.map((e,t)=>Gt.jsxs(zt.Fragment,{children:[Gt.jsxs(s3,{children:[Gt.jsx(o3,{children:Gt.jsx(IL,{className:"cursor-move transition-all border-4 border-blue-500 "+(l===e.id?"opacity-50":""),draggable:!0,onDragStart:t=>((e,t)=>{c(t),e.dataTransfer.effectAllowed="move"})(t,e.id),onDragOver:f,onDrop:t=>((e,t)=>{e.preventDefault(),l&&l!==t&&(s(e=>{const r=[...e.steps],n=r.findIndex(e=>e.id===l),i=r.findIndex(e=>e.id===t);if(-1===n||-1===i)return e;const[s]=r.splice(n,1);return r.splice(i,0,s),ze(Le({},e),{steps:r})}),c(null))})(t,e.id),children:Gt.jsx(jL,{className:"p-4",children:Gt.jsxs("div",{className:"flex items-start gap-3",children:[Gt.jsx(by,{className:"h-5 w-5 text-gray-400 mt-1 flex-shrink-0"}),Gt.jsxs("div",{className:"flex-1 space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx("span",{className:"text-sm font-medium text-gray-500",children:t+1}),Gt.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-800",children:"step"===e.type?"":""})]}),Gt.jsx(Bg,{variant:"ghost",size:"sm",onClick:()=>p(e.id),className:"text-red-600 hover:text-red-700",children:Gt.jsx(Ky,{className:"h-4 w-4"})})]}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Gt.jsxs("div",{children:[Gt.jsx(FL,{children:""}),Gt.jsx(KL,{value:e.title,onChange:t=>h(e.id,{title:t.target.value}),placeholder:""})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{children:""}),Gt.jsx(KL,{value:e.description,onChange:t=>h(e.id,{description:t.target.value}),placeholder:""})]})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{children:""}),Gt.jsx(Qz,{value:e.message,onChange:t=>h(e.id,{message:t.target.value}),placeholder:"",rows:3})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{children:""}),Gt.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(e.images||[]).filter(e=>e&&e.url&&""!==e.url.trim()).map((t,r)=>{const n=Dg(t.url);return Gt.jsxs("div",{className:"relative",children:[Gt.jsx("img",{src:n,alt:t.fileName||"",className:"w-20 h-20 object-cover rounded border",crossOrigin:"anonymous",onError:i=>{console.error("  (flow-editor-advanced):",{originalUrl:t.url,convertedUrl:n,fileName:t.fileName,stepId:e.id,imageIndex:r}),Lg(i,t.url)},onLoad:()=>{console.log("  (flow-editor-advanced):",{fileName:t.fileName,convertedUrl:n})}}),Gt.jsx(Bg,{variant:"ghost",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0 bg-red-500 text-white hover:bg-red-600",onClick:()=>((e,t)=>Ke(void 0,null,function*(){const r=i.steps.find(t=>t.id===e);if(!r||!r.images||t>=r.images.length)return;const n=r.images[t];if(window.confirm(`"${n.fileName}" \n`))try{if(n.fileName&&!n.fileName.startsWith("blob:")){const{buildApiUrl:e}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),t=e(`/emergency-flow/image/${n.fileName}`);console.log(" flow-editor-advanced URL:",t),(yield fetch(t,{method:"DELETE"})).ok?console.log(" ",n.fileName):console.warn("")}s(r=>ze(Le({},r),{steps:r.steps.map(r=>{if(r.id===e){const e=[...r.images];return e.splice(t,1),ze(Le({},r),{images:e})}return r})})),console.log(" ",n.fileName)}catch(o){console.error(" :",o),alert(`: ${o instanceof Error?o.message:"Unknown error"}`)}}))(e.id,r),children:Gt.jsx(ob,{className:"h-3 w-3"})})]},`${e.id}-${r}`)}),(e.images||[]).filter(e=>e&&e.url&&""!==e.url.trim()).length<3&&Gt.jsxs(Bg,{variant:"outline",size:"sm",onClick:()=>{const t=document.createElement("input");t.type="file",t.multiple=!0,t.accept="image/*",t.onchange=t=>{const r=t.target.files;r&&((e,t)=>{Ke(void 0,null,function*(){const r=i.steps.find(t=>t.id===e),n=(null==r?void 0:r.images)||[];if(n.length+t.length>3)return void alert("3");const o=[];for(const e of Array.from(t))try{const t=new FormData;t.append("image",e);const{buildApiUrl:r}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),n=r("/emergency-flow/upload-image"),i=yield fetch(n,{method:"POST",body:t});if(!i.ok)throw new Error(` ${i.status}`);const s=yield i.json();s.success&&s.imageUrl&&o.push({url:s.imageUrl,fileName:s.fileName||s.imageFileName})}catch(l){console.error(":",l),alert(`${e.name} `)}if(0===o.length)return;const a=ze(Le({},i),{steps:i.steps.map(t=>t.id===e?ze(Le({},t),{images:[...n,...o]}):t)});s(a),setTimeout(()=>Ke(void 0,null,function*(){try{(yield lq(a)).success&&console.log("")}catch(l){console.error(":",l)}}),100)})})(e.id,r)},t.click()},className:"w-20 h-20 flex flex-col items-center justify-center",children:[Gt.jsx(Zy,{className:"h-4 w-4"}),Gt.jsx("span",{className:"text-xs",children:""})]})]})]}),"decision"===e.type&&Gt.jsxs("div",{children:[Gt.jsx(FL,{children:""}),Gt.jsxs("div",{className:"space-y-2",children:[(e.conditions||[]).map((t,r)=>Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsx(KL,{value:t.label,onChange:t=>m(e.id,r,"label",t.target.value),placeholder:"",className:"flex-1"}),Gt.jsx(KL,{value:t.nextId,onChange:t=>m(e.id,r,"nextId",t.target.value),placeholder:"ID",className:"flex-1"}),Gt.jsx(Bg,{variant:"ghost",size:"sm",onClick:()=>((e,t)=>{s(r=>ze(Le({},r),{steps:r.steps.map(r=>r.id===e&&r.conditions?ze(Le({},r),{conditions:r.conditions.filter((e,r)=>r!==t)}):r)}))})(e.id,r),className:"text-red-600 hover:text-red-700",children:Gt.jsx(Ky,{className:"h-4 w-4"})})]},r)),Gt.jsxs(Bg,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,void s(e=>ze(Le({},e),{steps:e.steps.map(e=>e.id===t&&"decision"===e.type?ze(Le({},e),{conditions:[...e.conditions||[],{label:"",nextId:""}]}):e)}));var t},children:[Gt.jsx(jy,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]})})})}),Gt.jsxs(a3,{children:[Gt.jsx(l3,{onClick:()=>d("step",t+1),children:""}),Gt.jsx(l3,{onClick:()=>d("decision",t+1),children:""}),Gt.jsx(l3,{onClick:()=>p(e.id),className:"text-red-600",children:""})]})]}),Gt.jsxs("div",{className:"flex items-center justify-center gap-4 my-2",children:[Gt.jsxs(Bg,{variant:"outline",size:"sm",className:"w-1/2",onClick:()=>d("step",t+1),children:[Gt.jsx(jy,{className:"h-4 w-4 mr-1"}),""]}),Gt.jsxs(Bg,{variant:"outline",size:"sm",className:"w-1/2",onClick:()=>d("decision",t+1),children:[Gt.jsx(jy,{className:"h-4 w-4 mr-1"}),""]})]})]},e.id))})})})]}),Gt.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4 border-t",children:[Gt.jsx(Bg,{variant:"outline",onClick:r,className:"h-12 px-6",children:""}),Gt.jsxs(Bg,{onClick:()=>{console.log(" "),v()},className:"h-12 px-6",children:[Gt.jsx(My,{className:"w-4 h-4 mr-2"}),""]})]})]})},u3=({flowId:e,onClose:t})=>{const[r,n]=Lt.useState(null),[i,s]=Lt.useState(0),[o,a]=Lt.useState(!0),[l,c]=Lt.useState("");Lt.useEffect(()=>{e&&Ke(void 0,null,function*(){try{a(!0);const{buildApiUrl:t}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),r=t(`/emergency-flow/detail/${e}`);console.log(" API URL:",r);const i=yield fetch(r,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!i.ok){const e=yield i.text();throw console.error(" API :",{status:i.status,statusText:i.statusText,body:e}),new Error(`Failed to fetch flow data: ${i.status} - ${e}`)}const s=yield i.json();console.log(" API:",s);const o=s.success&&s.data?s.data:s;console.log(" :",o);const l={id:o.id.toString(),title:o.title||o.name,description:o.description||"",steps:o.steps||[]};console.log(" :",l),n(l)}catch(Pie){console.error("Flow data fetch error:",Pie),c("")}finally{a(!1)}})},[e]);if(o)return Gt.jsx(IL,{className:"w-full max-w-4xl mx-auto",children:Gt.jsx(jL,{className:"flex items-center justify-center h-64",children:Gt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})});if(l||!r)return Gt.jsxs(IL,{className:"w-full max-w-4xl mx-auto",children:[Gt.jsx(kL,{children:Gt.jsx(_L,{className:"text-red-600",children:""})}),Gt.jsxs(jL,{children:[Gt.jsx("p",{className:"mb-4",children:l||""}),Gt.jsx(Bg,{onClick:t,children:""})]})]});if(!r.steps||!Array.isArray(r.steps)||0===r.steps.length)return Gt.jsxs(IL,{className:"w-full max-w-4xl mx-auto",children:[Gt.jsx(kL,{children:Gt.jsx(_L,{className:"text-red-600",children:""})}),Gt.jsxs(jL,{children:[Gt.jsx("p",{className:"mb-4",children:""}),Gt.jsx(Bg,{onClick:t,children:""})]})]});const u=r&&r.steps&&r.steps[i]?r.steps[i]:null,d=i===r.steps.length-1,p=0===i;return u?Gt.jsxs(IL,{className:"w-full max-w-4xl mx-auto",children:[Gt.jsx(kL,{children:Gt.jsxs("div",{className:"flex items-start justify-between",children:[Gt.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[Gt.jsxs(Bg,{variant:"ghost",size:"sm",onClick:t,className:"flex-shrink-0",children:[Gt.jsx(qg,{className:"h-4 w-4"}),""]}),Gt.jsxs(_L,{className:"text-xl break-words leading-tight",children:[r.title," ()"]})]}),Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsxs("div",{className:"text-sm text-gray-500 flex-shrink-0 ml-4",children:[" ",i+1," / ",r.steps.length]}),Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:t,className:"h-8 px-3 border-gray-300 hover:bg-gray-100",children:""})]})]})}),Gt.jsx(jL,{children:Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[Gt.jsx("h3",{className:"font-semibold text-blue-900 mb-2 text-lg",children:u.title}),u.description&&Gt.jsx("p",{className:"text-blue-800 text-sm mb-3",children:u.description}),Gt.jsx("div",{className:"text-blue-800 whitespace-pre-line",children:u.message})]}),"decision"===u.type&&u.conditions&&u.conditions.length>0&&Gt.jsxs("div",{className:"space-y-3",children:[Gt.jsx("h4",{className:"font-medium text-gray-900",children:""}),Gt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:u.conditions.map((e,t)=>Gt.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg bg-gray-50",children:[Gt.jsx("div",{className:"font-medium text-sm",children:e.label}),Gt.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[""," ",(()=>{const t=r.steps.find(t=>t.id===e.nextId),n=r.steps.findIndex(t=>t.id===e.nextId);return t?`${t.title||`${n+1}`}`:""})()]})]},t))})]}),u.images&&u.images.length>0&&Gt.jsxs("div",{className:"space-y-3",children:[Gt.jsx("h4",{className:"font-medium text-gray-900",children:""}),Gt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.images.map((e,t)=>{const r=Dg("object"==typeof e&&null!==e?e.url:e),n="object"==typeof e&&null!==e?e.fileName:String(e);return console.log(" [FlowPreview] :",{index:t,fileName:n,convertedUrl:r,originalImg:e,imgType:typeof e,hasUrl:"object"==typeof e&&null!==e&&!!e.url,urlValue:"object"==typeof e&&null!==e?e.url:e}),Gt.jsx("div",{className:"relative",children:Gt.jsx("img",{src:r,alt:n,className:"w-full h-48 object-cover rounded-lg border",crossOrigin:"anonymous",onLoad:()=>{console.log(" :",{fileName:n,imageUrl:(null==r?void 0:r.substring(0,100))+"..."})},onError:t=>{const i="object"==typeof e&&null!==e?e.url:String(e);console.error("  (flow-preview):",{fileName:n,convertedUrl:(null==r?void 0:r.substring(0,100))+"...",originalImg:e,originalUrl:i,error:t}),Lg(t,i)}})},t)})})]}),Gt.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[Gt.jsxs(Bg,{variant:"outline",onClick:()=>{i>0&&s(i-1)},disabled:p,children:[Gt.jsx(qg,{className:"h-4 w-4 mr-1"}),""]}),Gt.jsxs("div",{className:"text-sm text-gray-500",children:[i+1," / ",r.steps.length]}),Gt.jsxs(Bg,{variant:"outline",onClick:()=>{r&&r.steps&&i<r.steps.length-1&&s(i+1)},disabled:d,children:["",Gt.jsx(Gg,{className:"h-4 w-4 ml-1"})]})]})]})})]}):Gt.jsx(IL,{className:"w-full max-w-4xl mx-auto",children:Gt.jsxs(jL,{children:[Gt.jsx("p",{className:"text-center py-8",children:""}),Gt.jsx(Bg,{onClick:t,className:"w-full",children:""})]})})};const d3=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=Lt.useState("generator"),[r,n]=Lt.useState({view:"list"}),[i,s]=Lt.useState(!1),[o,a]=Lt.useState(!1),[l,c]=Lt.useState(!1),[u,d]=Lt.useState(null),[p,h]=Lt.useState(null),[f,m]=Lt.useState(null),{toast:v}=fv(),{data:g,isLoading:y}=function(e){return df(e,$h)}({queryKey:["/api/emergency-flow/list"],queryFn:()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),t=yield fetch(e("/emergency-flow/list")),r=yield t.json();if(console.log(" :",r),r.success){const e=r.flows||r.data||[];console.log(" :",e);const t=e.map(e=>({id:e.id.toString(),title:e.name||e.title,description:e.description||"",category:e.category||"",keywords:e.triggerKeywords||[],steps:e.steps||[],createdAt:e.createdAt||(new Date).toISOString(),updatedAt:e.updatedAt||(new Date).toISOString()}));return console.log(" :",t),t}return[]})}),b=pf({mutationFn:e=>Ke(this,null,function*(){var t,r,n,i,s,o,a,l;console.log(" saveMutation ",{flowDataId:e.id,stepsCount:(null==(t=e.steps)?void 0:t.length)||0,stepsWithImages:(null==(r=e.steps)?void 0:r.filter(e=>e.images&&e.images.length>0).length)||0,allStepsImages:(null==(n=e.steps)?void 0:n.map(e=>{var t,r;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(r=e.images)?void 0:r.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}}))||[]});const c=yield lq(e,{validateImages:!0,logDetails:!0});if(c.success)return console.log(" saveMutation ",{flowId:(null==(i=c.data)?void 0:i.id)||e.id,title:(null==(s=c.data)?void 0:s.title)||e.title,stepsCount:(null==(a=null==(o=c.data)?void 0:o.steps)?void 0:a.length)||(null==(l=e.steps)?void 0:l.length)||0}),c.data||e;throw new Error(c.error||"")}),onSuccess:()=>{v({title:"",description:""}),s(!1),d(null),n({view:"list"})},onError:e=>v({title:"",description:`: ${e.message}`,variant:"destructive"})}),x=pf({mutationFn:e=>Ke(this,null,function*(){console.log(" ",e);const t=yield fetch(`http://localhost:8080/api/emergency-flow/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(console.log(" :",{status:t.status,statusText:t.statusText,ok:t.ok}),!t.ok){let e=`: ${t.status} - ${t.statusText}`;try{const r=yield t.json();console.log(" :",r),e=r.error||r.details||e}catch(n){console.warn(" ",n)}throw new Error(e)}const r=yield t.json();return console.log(" :",r),r}),onSuccess:()=>{window.dispatchEvent(new CustomEvent("flowDeleted")),v({title:"",description:""}),h(null),c(!1)},onError:e=>{console.error(" :",e),v({title:"",description:`: ${e.message}`,variant:"destructive"})}}),w=()=>{m(null)};return f?Gt.jsx("div",{className:"container mx-auto p-4 sm:p-6 bg-gray-50 min-h-screen",children:Gt.jsx(u3,{flowId:f,onClose:w})}):Gt.jsxs("div",{className:"container mx-auto p-4 sm:p-6 bg-gray-50 min-h-screen max-w-7xl",children:[Gt.jsx("div",{className:"flex justify-between items-start mb-6",children:Gt.jsxs("div",{children:[Gt.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 flex items-center gap-3",children:[Gt.jsx(ib,{className:"w-8 h-8 text-blue-600"}),""]}),Gt.jsx("p",{className:"text-gray-500 mt-1",children:""})]})}),Gt.jsxs(aB,{value:e,onValueChange:t,className:"w-full",children:[Gt.jsxs(lB,{className:"grid w-full grid-cols-2 bg-gray-200 p-1 rounded-lg",children:[Gt.jsxs(cB,{value:"generator",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:shadow-md",children:[Gt.jsx(Jg,{className:"h-5 w-5"}),""]}),Gt.jsxs(cB,{value:"editor",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:shadow-md",children:[Gt.jsx(Ey,{className:"h-5 w-5"}),""]})]}),Gt.jsx(uB,{value:"generator",className:"mt-4",children:Gt.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:Gt.jsx(k0,{onFlowGenerated:e=>{t("editor"),n({view:"list"}),window.dispatchEvent(new CustomEvent("flowGenerated",{detail:{generatedFlow:e}})),console.log("Generated Flow, showing in list:",e),v({title:"",description:`${e.title||""}`})}})})}),Gt.jsxs(uB,{value:"editor",className:"mt-4",children:["list"===r.view&&Gt.jsx(f1,{onEdit:e=>{n({view:"edit",flowId:e})},onPreview:e=>{m(e)},onNew:()=>{n({view:"edit",flowId:null})}}),"edit"===r.view&&Gt.jsx(c3,{flowId:r.flowId||void 0,onSave:e=>{var t,r,n;console.log(" handleSaveFlow ",{flowId:e.id,title:e.title,stepsCount:(null==(t=e.steps)?void 0:t.length)||0,stepsWithImages:(null==(r=e.steps)?void 0:r.filter(e=>e.images&&e.images.length>0).length)||0,allStepsImages:(null==(n=e.steps)?void 0:n.map(e=>{var t,r;return{stepId:e.id,stepTitle:e.title,imagesCount:(null==(t=e.images)?void 0:t.length)||0,images:(null==(r=e.images)?void 0:r.map(e=>{var t;return{fileName:e.fileName,url:(null==(t=e.url)?void 0:t.substring(0,100))+"..."}}))||[]}}))||[]}),b.mutate(e)},onCancel:()=>{n({view:"list"})}})]})]}),Gt.jsx(eF,{open:i,onOpenChange:s,children:Gt.jsx(iF,{className:"max-w-full w-full h-full flex flex-col p-0",children:u&&Gt.jsx(_X,{flowData:u,onSave:e=>b.mutate(e),onClose:()=>s(!1)},u.id)})}),Gt.jsx(eF,{open:o,onOpenChange:a,children:Gt.jsxs(iF,{className:"max-w-4xl w-full",children:[Gt.jsxs(sF,{children:[Gt.jsx(aF,{children:null==u?void 0:u.title}),Gt.jsx(lF,{children:null==u?void 0:u.description})]}),Gt.jsx("div",{className:"max-h-[80vh] overflow-y-auto p-4",children:u&&Gt.jsx(hB,{flowId:u.id})})]})}),Gt.jsx(WH,{isOpen:l,onOpenChange:c,onConfirm:()=>{p&&x.mutate(p)},title:"",description:""})]})}},Symbol.toStringTag,{value:"Module"}));function p3(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>{const i=r(e)[`__scope${n}`];return Le(Le({},t),i)},{});return Lt.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}var h3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const r=_v(`Primitive.${t}`),n=Lt.forwardRef((e,n)=>{const i=e,{asChild:s}=i,o=Fe(i,["asChild"]),a=s?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Gt.jsx(a,ze(Le({},o),{ref:n}))});return n.displayName=`Primitive.${t}`,ze(Le({},e),{[t]:n})},{}),f3="Progress",m3=100,[v3]=function(e,t=[]){let r=[];const n=()=>{const t=r.map(e=>Lt.createContext(e));return function(r){const n=(null==r?void 0:r[e])||t;return Lt.useMemo(()=>({[`__scope${e}`]:ze(Le({},r),{[e]:n})}),[r,n])}};return n.scopeName=e,[function(t,n){const i=Lt.createContext(n);i.displayName=t+"Context";const s=r.length;r=[...r,n];const o=t=>{var r;const n=t,{scope:o,children:a}=n,l=Fe(n,["scope","children"]),c=(null==(r=null==o?void 0:o[e])?void 0:r[s])||i,u=Lt.useMemo(()=>l,Object.values(l));return Gt.jsx(c.Provider,{value:u,children:a})};return o.displayName=t+"Provider",[o,function(r,o){var a;const l=(null==(a=null==o?void 0:o[e])?void 0:a[s])||i,c=Lt.useContext(l);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},p3(n,...t)]}(f3),[g3,y3]=v3(f3),b3=Lt.forwardRef((e,t)=>{const r=e,{__scopeProgress:n,value:i=null,max:s,getValueLabel:o=S3}=r,a=Fe(r,["__scopeProgress","value","max","getValueLabel"]);!s&&0!==s||T3(s)||console.error(`Invalid prop \`max\` of value \`${`${s}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const l=T3(s)?s:m3;null===i||N3(i,l)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${i}`,"Progress"));const c=N3(i,l)?i:null,u=E3(c)?o(c,l):void 0;return Gt.jsx(g3,{scope:n,value:c,max:l,children:Gt.jsx(h3.div,ze(Le({"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":E3(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":C3(c,l),"data-value":null!=c?c:void 0,"data-max":l},a),{ref:t}))})});b3.displayName=f3;var x3="ProgressIndicator",w3=Lt.forwardRef((e,t)=>{var r;const n=e,{__scopeProgress:i}=n,s=Fe(n,["__scopeProgress"]),o=y3(x3,i);return Gt.jsx(h3.div,ze(Le({"data-state":C3(o.value,o.max),"data-value":null!=(r=o.value)?r:void 0,"data-max":o.max},s),{ref:t}))});function S3(e,t){return`${Math.round(e/t*100)}%`}function C3(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function E3(e){return"number"==typeof e}function T3(e){return E3(e)&&!isNaN(e)&&e>0}function N3(e,t){return E3(e)&&!isNaN(e)&&e<=t&&e>=0}w3.displayName=x3;var P3=b3,R3=w3;const I3=Lt.forwardRef((e,t)=>{var r=e,{className:n,value:i}=r,s=Fe(r,["className","value"]);return Gt.jsx(P3,ze(Le({ref:t,className:zg("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n)},s),{children:Gt.jsx(R3,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(i||0)}%)`}})}))});I3.displayName=P3.displayName;const k3=({onUploadSuccess:e})=>{const{toast:t}=fv(),r=Lt.useRef(null),[n,i]=Lt.useState(null),[s,o]=Lt.useState(!1),[a,l]=Lt.useState(0),[c,u]=Lt.useState(!1),[d,p]=Lt.useState(!1),[h,f]=Lt.useState(""),[m,v]=Lt.useState(!1);return Gt.jsxs(IL,{className:"w-full",children:[Gt.jsxs(kL,{children:[Gt.jsx(_L,{children:""}),Gt.jsx(AL,{children:""})]}),Gt.jsx(jL,{children:Gt.jsxs(aB,{defaultValue:"keywords",className:"w-full",children:[Gt.jsxs(lB,{className:"grid w-full grid-cols-2 mb-6",children:[Gt.jsx(cB,{value:"keywords",children:""}),Gt.jsx(cB,{value:"file",children:""})]}),Gt.jsx(uB,{value:"keywords",className:"space-y-4",children:Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{children:[Gt.jsx("h3",{className:"text-lg font-medium mb-2",children:""}),Gt.jsx(Qz,{placeholder:"",value:h,onChange:e=>f(e.target.value),className:"min-h-[100px]"}),Gt.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:Gt.jsxs("span",{children:[h.length,"/100"]})})]}),Gt.jsx(Bg,{className:"w-full",variant:"default",onClick:()=>Ke(void 0,null,function*(){if(h.trim())try{let i;v(!0),t({title:"",description:`${h}...`});try{i=yield fetch("/api/chatgpt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`${h}`,type:"flow-generation"})})}catch(r){console.log(""),i=yield fetch("/api/flow-generator/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:h})})}const s=yield i.json();if(console.log("API:",s),!i.ok){const r=s.error||"",o=s.details||"";if(r.includes("OpenAI API")||r.includes("API")){t({title:"OpenAI API",description:"",variant:"destructive"});try{const r=yield fetch("/api/chatgpt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`${h}`,type:"troubleshooting"})}),n=yield r.json();if(n.success&&n.flowData)return t({title:"",description:`${n.flowData.title||""}`}),e&&e(n.flowData.id),void f("")}catch(n){console.error(":",n)}}return t({title:"",description:r,variant:"destructive"}),void console.error(":",{error:r,details:o,status:i.status})}if(!s.success||!s.flowData)throw new Error("");t({title:"",description:`${s.flowData.title||""}`}),e&&e(s.flowData.id),f("")}catch(r){console.error(":",r),t({title:"",description:r instanceof Error?r.message:"",variant:"destructive"})}finally{v(!1)}else t({title:"",description:"",variant:"destructive"})}),disabled:m||!h.trim(),children:m?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Ty,{className:"mr-2 h-4 w-4 animate-spin"}),"..."]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(nb,{className:"mr-2 h-4 w-4"}),"GPT"]})}),Gt.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 rounded-md border border-blue-200",children:[Gt.jsx(Hy,{className:"h-5 w-5 text-blue-500 flex-shrink-0"}),Gt.jsxs("div",{className:"text-sm text-gray-700",children:[Gt.jsx("p",{className:"font-medium mb-1",children:":"}),Gt.jsxs("ol",{className:"list-decimal list-inside space-y-1 pl-1",children:[Gt.jsx("li",{children:"GPT"}),Gt.jsx("li",{children:""}),Gt.jsx("li",{children:""}),Gt.jsxs("ul",{className:"list-disc list-inside pl-6 space-y-1",children:[Gt.jsx("li",{children:""}),Gt.jsx("li",{children:""})]})]})]})]})]})}),Gt.jsx(uB,{value:"file",className:"space-y-4",children:Gt.jsxs("div",{children:[Gt.jsx("input",{type:"file",ref:r,onChange:e=>{if(e.target.files&&e.target.files.length>0){const r=e.target.files[0],n=r.name.toLowerCase().split(".").pop()||"";if(!["pptx","ppt","xlsx","xls","pdf","json"].includes(n))return void t({title:"",description:"PowerPoint(.pptx, .ppt)Excel(.xlsx, .xls)PDF(.pdf)JSON(.json)",variant:"destructive"});i(r)}},accept:".pptx,.ppt,.xlsx,.xls,.pdf,.json",className:"hidden"}),Gt.jsxs("div",{className:"mb-4",children:[Gt.jsx("h3",{className:"text-lg font-medium mb-2",children:""}),Gt.jsx(Bg,{variant:"outline",className:"w-full h-24 border-dashed",onClick:()=>{r.current&&r.current.click()},children:Gt.jsxs("div",{className:"flex flex-col items-center",children:[Gt.jsx(my,{className:"h-8 w-8 text-gray-400 mb-2"}),Gt.jsx("p",{className:"text-gray-700 font-medium",children:""}),Gt.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PowerPointExcelPDFJSON"})]})})]}),n&&Gt.jsx("div",{className:"mb-4 p-3 bg-indigo-50 rounded-md border border-indigo-200",children:Gt.jsxs("div",{className:"flex items-center",children:[Gt.jsx(my,{className:"h-5 w-5 text-indigo-600 mr-2"}),Gt.jsxs("div",{children:[Gt.jsx("p",{className:"font-medium text-indigo-700",children:n.name}),Gt.jsxs("p",{className:"text-xs text-gray-500",children:[(n.size/1024/1024).toFixed(2)," MB"]})]})]})}),(s||c)&&Gt.jsxs("div",{className:"mb-4",children:[Gt.jsxs("div",{className:"flex justify-between items-center mb-1",children:[Gt.jsx("span",{className:"text-sm font-medium text-gray-700",children:c?"":"..."}),Gt.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[a,"%"]})]}),Gt.jsx(I3,{value:a,className:"h-2"})]}),Gt.jsx("div",{className:"flex mb-4",children:Gt.jsxs("div",{className:"flex items-center space-x-2",children:[Gt.jsx(zV,{id:"saveOriginalFile",checked:d,onCheckedChange:e=>p(!0===e)}),Gt.jsx(FL,{htmlFor:"saveOriginalFile",className:"text-sm text-gray-700",children:""})]})}),Gt.jsxs("div",{className:"flex items-center space-x-2 mb-4 bg-amber-50 p-2 rounded-md border border-amber-200",children:[Gt.jsx(Hy,{className:"h-4 w-4 text-amber-500 flex-shrink-0"}),Gt.jsx("p",{className:"text-sm text-gray-700",children:""})]}),Gt.jsx(Bg,{className:"w-full",onClick:()=>Ke(void 0,null,function*(){if(n){o(!0),l(0);try{const r=new FormData;r.append("file",n),r.append("saveOriginalFile",d.toString()),r.append("autoGenerateFlow",true.toString());const s=setInterval(()=>{l(e=>e>=90?(clearInterval(s),90):e+10)},500),o=yield fetch("/api/emergency-guide/process",{method:"POST",body:r});if(clearInterval(s),!o.ok)throw new Error("");const a=yield o.json();if(!a.success)throw new Error(a.error||"");l(100),u(!0),t({title:"",description:""}),e&&e(a.guideId),setTimeout(()=>{i(null),u(!1),l(0)},3e3)}catch(r){console.error("Upload error:",r),t({title:"",description:r instanceof Error?r.message:"",variant:"destructive"})}finally{o(!1)}}else t({title:"",description:"",variant:"destructive"})}),disabled:!n||s||c,children:s?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Ty,{className:"mr-2 h-4 w-4 animate-spin"}),"..."]}):c?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(iy,{className:"mr-2 h-4 w-4"}),""]}):""})]})})]})})]})};function _3(e){try{const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(t){return""}}const A3=({flows:e,onSelectFlow:t,onDeleteFlow:r,onPreviewFlow:n,isLoading:i})=>(console.log(" FlowList :",{flowsLength:e.length,isLoading:i,flows:e}),i?Gt.jsxs("div",{className:"flex justify-center items-center p-8",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),Gt.jsx("p",{className:"ml-3 text-gray-600",children:"..."})]}):0===e.length?Gt.jsx("div",{className:"text-center p-8",children:Gt.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[Gt.jsx(my,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Gt.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),Gt.jsx("p",{className:"text-gray-600 mb-4",children:""}),Gt.jsxs("div",{className:"flex justify-center space-x-2",children:[Gt.jsx(Bg,{variant:"outline",onClick:()=>window.dispatchEvent(new CustomEvent("switchToGenerator")),children:"E"}),Gt.jsx(Bg,{variant:"outline",onClick:()=>window.location.reload(),children:""})]})]})}):Gt.jsx("div",{className:"space-y-4",children:Gt.jsx("div",{className:"overflow-auto",children:Gt.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-sm",children:[Gt.jsx("thead",{children:Gt.jsxs("tr",{className:"bg-gray-100",children:[Gt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:""}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:"E"}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:"E"}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:"E"}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-center text-sm font-medium",children:"E"}),Gt.jsx("th",{className:"border border-gray-300 p-3 text-center text-sm font-medium",children:"E"})]})}),Gt.jsx("tbody",{children:e.map(e=>{var i;return Gt.jsxs("tr",{className:"hover:bg-gray-50",children:[Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsx("div",{className:"break-words leading-tight text-sm font-semibold cursor-pointer hover:text-blue-600",onClick:()=>t(e),children:e.title})}),Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsx("div",{className:"break-words leading-tight text-sm text-gray-600",children:e.description||""})}),Gt.jsx("td",{className:"border border-gray-300 p-3 text-center",children:Gt.jsx("span",{className:"text-sm",children:(null==(i=e.steps)?void 0:i.length)||0})}),Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsx("span",{className:"text-xs text-gray-500",children:_3(e.updatedAt)})}),Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsx("div",{className:"flex justify-center",children:e.steps&&e.steps.length>0&&e.steps.some(e=>e.imageUrl||e.images&&e.images.length>0)?Gt.jsxs("div",{className:"flex gap-1",children:[e.steps.slice(0,3).map((e,t)=>{if(e.images&&e.images.length>0)return e.images.slice(0,1).map((r,n)=>{const i=Og(r);return console.log("EE:",{stepId:e.id,imageIndex:n,originalImage:r,convertedUrl:i}),Gt.jsx("img",{src:i,alt:`${e.title} - `,className:"w-8 h-8 object-cover rounded border",onError:t=>{console.error(":",{imageUrl:i,originalImage:r,stepId:e.id}),t.currentTarget.style.display="none"},onLoad:()=>{console.log(":",i)}},`${t}-${n}`)});if(e.imageUrl){const r=Og(e.imageUrl);return console.log("EEEEE",{stepId:e.id,originalImageUrl:e.imageUrl,convertedUrl:r}),Gt.jsx("img",{src:r,alt:`${e.title} - `,className:"w-8 h-8 object-cover rounded border",onError:t=>{console.error("EEE",{imageUrl:r,originalImageUrl:e.imageUrl,stepId:e.id}),t.currentTarget.style.display="none"},onLoad:()=>{console.log("EEE",r)}},t)}return null}),e.steps.filter(e=>e.imageUrl||e.images&&e.images.length>0).length>3&&Gt.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.steps.filter(e=>e.imageUrl||e.images&&e.images.length>0).length-3]})]}):Gt.jsx("span",{className:"text-xs text-gray-400",children:""})})}),Gt.jsx("td",{className:"border border-gray-300 p-3",children:Gt.jsxs("div",{className:"flex justify-center gap-1",children:[Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>t(e),title:"",className:"h-7 px-2 text-xs",children:Gt.jsx($y,{className:"h-3 w-3"})}),Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>n(e),title:"",className:"h-7 px-2 text-xs",children:Gt.jsx(hy,{className:"h-3 w-3"})}),Gt.jsx(Bg,{variant:"destructive",size:"sm",onClick:()=>r(e.id,e.filePath),title:"",className:"h-7 px-2 text-xs",children:Gt.jsx(Ky,{className:"h-3 w-3"})})]})})]},e.id)})})]})})})),j3=()=>{const{toast:e}=fv(),[t,r]=Lt.useState([]),[n,i]=Lt.useState(null),[s,o]=Lt.useState(null),[a,l]=Lt.useState(!0),[c,u]=Lt.useState(null),[d,p]=Lt.useState("list"),[h,f]=Lt.useState(null),m=Lt.useCallback((t=!1)=>Ke(void 0,null,function*(){try{l(!0),console.log(" ");const e=Date.now(),t=`?ts=${e}&r=${Math.random().toString(36).substring(2)}`,{buildApiUrl:n}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),i=n(`/emergency-flow/list${t}`);console.log(" API URL:",i);const s=yield fetch(i,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate, max-age=0",Pragma:"no-cache",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","X-Requested-With":"XMLHttpRequest"}});if(console.log(" E",s.status,s.statusText),!s.ok){const e=yield s.text();throw console.error("EAPI :",e),new Error(`HTTP ${s.status}:  - ${e}`)}const o=yield s.json();console.log(" :",o);const a=o.success&&o.flows?o.flows:o.success&&o.data?o.data:Array.isArray(o)?o:[];console.log(" E:",a.length);const c=a.map(e=>{var t,r;return{id:e.id||(null==(t=e.fileName)?void 0:t.replace(".json",""))||"",title:e.title||(null==(r=e.fileName)?void 0:r.replace(".json",""))||"",description:e.description||"",triggerKeywords:e.triggerKeywords||e.trigger||[],steps:e.steps||[],updatedAt:e.createdAt||e.updatedAt||e.savedAt||(new Date).toISOString(),filePath:e.filePath||`knowledge-base/troubleshooting/${e.fileName||e.id+".json"}`,fileName:e.fileName||e.id+".json"}});console.log("EE",c.length+""),console.log(" :",c),r(c)}catch(t){console.error("E:",t),e({title:"",description:t instanceof Error?t.message:"",variant:"destructive"}),r([])}finally{l(!1)}}),[e]);Lt.useEffect(()=>{m();const e=e=>{console.log(" :",e.detail),m(!0)},t=()=>m(!0);return window.addEventListener("forceRefreshFlowList",e),window.addEventListener("fileSystemUpdated",t),()=>{window.removeEventListener("forceRefreshFlowList",e),window.removeEventListener("fileSystemUpdated",t)}},[m]);const v=t=>Ke(void 0,null,function*(){try{console.log(" :",{id:t.id,title:t.title,stepsCount:t.steps.length,filePath:t.filePath});const{buildApiUrl:r}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),n=yield fetch(r(`/emergency-flow/${t.id}`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const e=yield n.json();throw new Error(e.error||"")}const s=yield n.json();console.log("EEE",s),e({title:"",description:""}),yield m(!0),i(e=>t)}catch(r){console.error("E:",r),e({title:"",description:`: ${r instanceof Error?r.message:""}`,variant:"destructive"})}}),g=()=>{i(null),f(null)};return a?Gt.jsx("div",{className:"flex justify-center items-center h-64",children:Gt.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}):Gt.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:n?Gt.jsxs(IL,{className:"h-full flex flex-col",children:[Gt.jsx(kL,{children:Gt.jsxs("div",{className:"flex justify-between items-center",children:[Gt.jsx(_L,{children:n.title}),Gt.jsxs(Bg,{variant:"ghost",onClick:g,children:[Gt.jsx(ob,{className:"h-4 w-4 mr-2"}),"E"]})]})}),Gt.jsx(jL,{className:"flex-1 flex flex-col min-h-0",children:Gt.jsxs(aB,{value:c||"metadata",onValueChange:e=>{console.log(" EE",{from:c,to:e}),u(e)},className:"w-full h-full flex flex-col",children:[Gt.jsxs(lB,{className:"w-full grid grid-cols-2 mb-4",children:[Gt.jsx(cB,{value:"metadata",children:"EE"}),Gt.jsx(cB,{value:"slides",children:"E"})]}),Gt.jsx(uB,{value:"metadata",className:"flex-1 flex flex-col min-h-0",children:Gt.jsx(_X,{flowData:n,onSave:v,onTabChange:u,currentTab:"metadata",selectedFilePath:null==n?void 0:n.filePath})}),Gt.jsx(uB,{value:"slides",className:"flex-1 flex flex-col min-h-0",children:Gt.jsx(_X,{flowData:n,onSave:v,onTabChange:u,currentTab:"slides",selectedFilePath:null==n?void 0:n.filePath})})]})})]}):h?Gt.jsx(hB,{guideId:h.id,onExit:g,isPreview:!0,onSendToChat:()=>{}}):Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"flex justify-between items-center",children:[Gt.jsx("h2",{className:"text-lg font-semibold",children:""}),Gt.jsx(Bg,{variant:"outline",onClick:()=>Ke(void 0,null,function*(){try{if(console.log(" "),"caches"in window){const e=yield caches.keys();yield Promise.all(e.map(e=>caches.delete(e))),console.log(" ")}yield m(!0),e({title:"",description:"EE"})}catch(t){console.error("EE:",t),e({title:"",description:"E",variant:"destructive"})}}),className:"text-sm",children:" E"})]}),Gt.jsx(A3,{flows:t,onSelectFlow:t=>Ke(void 0,null,function*(){var r,n,s;console.log(" E",{flowId:t.id,flowTitle:t.title,flowKeys:Object.keys(t),hasSteps:!!t.steps,stepsLength:(null==(r=t.steps)?void 0:r.length)||0});try{i(t),u("metadata"),f(null),console.log(" EE:",t.id),console.log(" :",t);const e=Date.now(),{buildApiUrl:r}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),o=r(`/emergency-flow/detail/${t.id}?_t=${e}`);console.log(" APIE",o);const a=yield fetch(o,{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" APIE",a.status,a.statusText),!a.ok){const e=yield a.text();throw console.error("EAPI :",e),new Error(`: ${a.status} - ${e}`)}const l=yield a.json();console.log(" API:",l),console.log("EEEE",l),console.log(" API:",{hasSuccess:"success"in l,hasData:"data"in l,hasSteps:"steps"in l,stepsType:typeof l.steps,stepsIsArray:Array.isArray(l.steps),stepsLength:(null==(n=l.steps)?void 0:n.length)||0,allKeys:Object.keys(l)});const c=l.success&&l.data?l.data:l;console.log(" EE:",c);const d=ze(Le(Le({},t),c),{steps:c.steps||t.steps||[]});console.log(" EEEE:",d),console.log("EE",{flowId:d.id,stepsLength:(null==(s=d.steps)?void 0:s.length)||0,title:d.title,hasSteps:!!d.steps,stepsType:typeof d.steps,stepsIsArray:Array.isArray(d.steps),stepsContent:d.steps}),i(d),u("metadata"),f(null),console.log(" E",{selectedFlow:d,editorTab:"metadata",previewFlow:null})}catch(o){console.error("E:",o),e({title:"",description:`: ${o instanceof Error?o.message:""}`,variant:"destructive"}),console.log(" "),i(t),u("metadata"),f(null)}}),onDeleteFlow:(t,r)=>Ke(void 0,null,function*(){try{console.log("EE:",{id:t,filePath:r});const{buildApiUrl:n}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),s=yield fetch(n(`/emergency-flow/${t}`),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!s.ok){const e=yield s.json();throw new Error(e.error||"")}const o=yield s.json();console.log("E:",o),e({title:"",description:""}),yield m(!0),i(null)}catch(n){console.error("E:",n),e({title:"",description:`: ${n instanceof Error?n.message:""}`,variant:"destructive"})}}),onPreviewFlow:t=>Ke(void 0,null,function*(){try{console.log(" EE:",t.id);const e=Date.now(),{buildApiUrl:r}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),n=r(`/emergency-flow/detail/${t.id}?_t=${e}`);console.log(" API URL:",n);const s=yield fetch(n,{credentials:"include",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache","X-Force-Fresh":"true","Content-Type":"application/json"}});if(!s.ok)throw new Error(`: ${s.status}`);const o=yield s.json();console.log("EEEE",o);const a=ze(Le(Le({},t),o),{steps:o.steps||t.steps||[]});f(a),i(null)}catch(r){console.error("E:",r),e({title:"",description:`: ${r instanceof Error?r.message:""}`,variant:"destructive"}),f(t),i(null)}}),isLoading:a}),Gt.jsxs("div",{className:"mt-4 p-4 bg-gray-100 rounded text-xs",children:[Gt.jsx("h4",{children:"EEE:"}),Gt.jsxs("p",{children:["flowList.length: ",t.length]}),Gt.jsxs("p",{children:["isLoading: ",a.toString()]}),Gt.jsxs("p",{children:["selectedFlow: ",n?n.id:"null"]}),Gt.jsxs("p",{children:["previewFlow: ",h?h.id:"null"]})]})]})})};var O3,D3=Lt,M3=(O3=D3)&&"object"==typeof O3&&"default"in O3?O3.default:O3;function L3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z3=!("undefined"==typeof window||!window.document||!window.document.createElement);const F3=Ze(function(e,t,r){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==r&&"function"!=typeof r)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!=typeof n)throw new Error("Expected WrappedComponent to be a React component.");var i,s=[];function o(){i=e(s.map(function(e){return e.props})),a.canUseDOM?t(i):r&&(i=r(i))}var a=function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a.peek=function(){return i},a.rewind=function(){if(a.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=i;return i=void 0,s=[],e};var l=a.prototype;return l.UNSAFE_componentWillMount=function(){s.push(this),o()},l.componentDidUpdate=function(){o()},l.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),o()},l.render=function(){return M3.createElement(n,this.props)},a}(D3.PureComponent);return L3(a,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),L3(a,"canUseDOM",z3),a}});var B3="undefined"!=typeof Element,U3="function"==typeof Map,W3="function"==typeof Set,H3="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function $3(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var r,n,i,s;if(Array.isArray(e)){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(!$3(e[n],t[n]))return!1;return!0}if(U3&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!$3(n.value[1],t.get(n.value[0])))return!1;return!0}if(W3&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(H3&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(B3&&e instanceof Element)return!1;for(n=r;0!==n--;)if(("_owner"!==i[n]&&"__v"!==i[n]&&"__o"!==i[n]||!e.$$typeof)&&!$3(e[i[n]],t[i[n]]))return!1;return!0}return e!=e&&t!=t}var V3=function(e,t){try{return $3(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const q3=Ze(V3);
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var G3=Object.getOwnPropertySymbols,K3=Object.prototype.hasOwnProperty,J3=Object.prototype.propertyIsEnumerable;const Y3=Ze(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(Pie){return!1}}()?Object.assign:function(e,t){for(var r,n,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var o in r=Object(arguments[s]))K3.call(r,o)&&(i[o]=r[o]);if(G3){n=G3(r);for(var a=0;a<n.length;a++)J3.call(r,n[a])&&(i[n[a]]=r[n[a]])}}return i});var Z3="bodyAttributes",Q3="htmlAttributes",X3="titleAttributes",e5={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(e5).map(function(e){return e5[e]});var t5,r5,n5,i5,s5="charset",o5="cssText",a5="href",l5="http-equiv",c5="innerHTML",u5="itemprop",d5="name",p5="property",h5="rel",f5="src",m5="target",v5={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},g5="defaultTitle",y5="defer",b5="encodeSpecialCharacters",x5="onChangeClientState",w5="titleTemplate",S5=Object.keys(v5).reduce(function(e,t){return e[v5[t]]=t,e},{}),C5=[e5.NOSCRIPT,e5.SCRIPT,e5.STYLE],E5="data-react-helmet",T5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N5=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),P5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R5=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},I5=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},k5=function(e){var t=D5(e,e5.TITLE),r=D5(e,w5);if(r&&t)return r.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var n=D5(e,g5);return t||n||void 0},_5=function(e){return D5(e,x5)||function(){}},A5=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return P5({},e,t)},{})},j5=function(e,t){return t.filter(function(e){return void 0!==e[e5.BASE]}).map(function(e){return e[e5.BASE]}).reverse().reduce(function(t,r){if(!t.length)for(var n=Object.keys(r),i=0;i<n.length;i++){var s=n[i].toLowerCase();if(-1!==e.indexOf(s)&&r[s])return t.concat(r)}return t},[])},O5=function(e,t,r){var n={};return r.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&B5("Helmet: "+e+' should be of type "Array". Instead found type "'+T5(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,r){var i={};r.filter(function(e){for(var r=void 0,s=Object.keys(e),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();-1===t.indexOf(l)||r===h5&&"canonical"===e[r].toLowerCase()||l===h5&&"stylesheet"===e[l].toLowerCase()||(r=l),-1===t.indexOf(a)||a!==c5&&a!==o5&&a!==u5||(r=a)}if(!r||!e[r])return!1;var c=e[r].toLowerCase();return n[r]||(n[r]={}),i[r]||(i[r]={}),!n[r][c]&&(i[r][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=Y3({},n[a],i[a]);n[a]=l}return e},[]).reverse()},D5=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.hasOwnProperty(t))return n[t]}return null},M5=(t5=Date.now(),function(e){var t=Date.now();t-t5>16?(t5=t,e(t)):setTimeout(function(){M5(e)},0)}),L5=function(e){return clearTimeout(e)},z5="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||M5:global.requestAnimationFrame||M5,F5="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||L5:global.cancelAnimationFrame||L5,B5=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},U5=null,W5=function(e,t){var r=e.baseTag,n=e.bodyAttributes,i=e.htmlAttributes,s=e.linkTags,o=e.metaTags,a=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,d=e.title,p=e.titleAttributes;V5(e5.BODY,n),V5(e5.HTML,i),$5(d,p);var h={baseTag:q5(e5.BASE,r),linkTags:q5(e5.LINK,s),metaTags:q5(e5.META,o),noscriptTags:q5(e5.NOSCRIPT,a),scriptTags:q5(e5.SCRIPT,c),styleTags:q5(e5.STYLE,u)},f={},m={};Object.keys(h).forEach(function(e){var t=h[e],r=t.newTags,n=t.oldTags;r.length&&(f[e]=r),n.length&&(m[e]=h[e].oldTags)}),t&&t(),l(e,f,m)},H5=function(e){return Array.isArray(e)?e.join(""):e},$5=function(e,t){void 0!==e&&document.title!==e&&(document.title=H5(e)),V5(e5.TITLE,t)},V5=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var n=r.getAttribute(E5),i=n?n.split(","):[],s=[].concat(i),o=Object.keys(t),a=0;a<o.length;a++){var l=o[a],c=t[l]||"";r.getAttribute(l)!==c&&r.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=s.indexOf(l);-1!==u&&s.splice(u,1)}for(var d=s.length-1;d>=0;d--)r.removeAttribute(s[d]);i.length===s.length?r.removeAttribute(E5):r.getAttribute(E5)!==o.join(",")&&r.setAttribute(E5,o.join(","))}},q5=function(e,t){var r=document.head||document.querySelector(e5.HEAD),n=r.querySelectorAll(e+"["+E5+"]"),i=Array.prototype.slice.call(n),s=[],o=void 0;return t&&t.length&&t.forEach(function(t){var r=document.createElement(e);for(var n in t)if(t.hasOwnProperty(n))if(n===c5)r.innerHTML=t.innerHTML;else if(n===o5)r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText));else{var a=void 0===t[n]?"":t[n];r.setAttribute(n,a)}r.setAttribute(E5,"true"),i.some(function(e,t){return o=t,r.isEqualNode(e)})?i.splice(o,1):s.push(r)}),i.forEach(function(e){return e.parentNode.removeChild(e)}),s.forEach(function(e){return r.appendChild(e)}),{oldTags:i,newTags:s}},G5=function(e){return Object.keys(e).reduce(function(t,r){var n=void 0!==e[r]?r+'="'+e[r]+'"':""+r;return t?t+" "+n:n},"")},K5=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,r){return t[v5[r]||r]=e[r],t},t)},J5=function(e,t,r){switch(e){case e5.TITLE:return{toComponent:function(){return e=t.title,r=t.titleAttributes,(n={key:e})[E5]=!0,i=K5(r,n),[zt.createElement(e5.TITLE,i,e)];var e,r,n,i},toString:function(){return function(e,t,r,n){var i=G5(r),s=H5(t);return i?"<"+e+" "+E5+'="true" '+i+">"+I5(s,n)+"</"+e+">":"<"+e+" "+E5+'="true">'+I5(s,n)+"</"+e+">"}(e,t.title,t.titleAttributes,r)}};case Z3:case Q3:return{toComponent:function(){return K5(t)},toString:function(){return G5(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,r){var n,i=((n={key:r})[E5]=!0,n);return Object.keys(t).forEach(function(e){var r=v5[e]||e;if(r===c5||r===o5){var n=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:n}}else i[r]=t[e]}),zt.createElement(e,i)})}(e,t)},toString:function(){return function(e,t,r){return t.reduce(function(t,n){var i=Object.keys(n).filter(function(e){return!(e===c5||e===o5)}).reduce(function(e,t){var i=void 0===n[t]?t:t+'="'+I5(n[t],r)+'"';return e?e+" "+i:i},""),s=n.innerHTML||n.cssText||"",o=-1===C5.indexOf(e);return t+"<"+e+" "+E5+'="true" '+i+(o?"/>":">"+s+"</"+e+">")},"")}(e,t,r)}}}},Y5=function(e){var t=e.baseTag,r=e.bodyAttributes,n=e.encode,i=e.htmlAttributes,s=e.linkTags,o=e.metaTags,a=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,d=void 0===u?"":u,p=e.titleAttributes;return{base:J5(e5.BASE,t,n),bodyAttributes:J5(Z3,r,n),htmlAttributes:J5(Q3,i,n),link:J5(e5.LINK,s,n),meta:J5(e5.META,o,n),noscript:J5(e5.NOSCRIPT,a,n),script:J5(e5.SCRIPT,l,n),style:J5(e5.STYLE,c,n),title:J5(e5.TITLE,{title:d,titleAttributes:p},n)}},Z5=F3(function(e){return{baseTag:j5([a5,m5],e),bodyAttributes:A5(Z3,e),defer:D5(e,y5),encode:D5(e,b5),htmlAttributes:A5(Q3,e),linkTags:O5(e5.LINK,[h5,a5],e),metaTags:O5(e5.META,[d5,s5,l5,p5,u5],e),noscriptTags:O5(e5.NOSCRIPT,[c5],e),onChangeClientState:_5(e),scriptTags:O5(e5.SCRIPT,[f5,c5],e),styleTags:O5(e5.STYLE,[o5],e),title:k5(e),titleAttributes:A5(X3,e)}},function(e){U5&&F5(U5),e.defer?U5=z5(function(){W5(e,function(){U5=null})}):(W5(e),U5=null)},Y5)(function(){return null}),Q5=(r5=Z5,i5=n5=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!q3(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case e5.SCRIPT:case e5.NOSCRIPT:return{innerHTML:t};case e5.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,r=e.child,n=e.arrayTypeChildren,i=e.newChildProps,s=e.nestedChildren;return P5({},n,((t={})[r.type]=[].concat(n[r.type]||[],[P5({},i,this.mapNestedChildrenToProps(r,s))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,r,n=e.child,i=e.newProps,s=e.newChildProps,o=e.nestedChildren;switch(n.type){case e5.TITLE:return P5({},i,((t={})[n.type]=o,t.titleAttributes=P5({},s),t));case e5.BODY:return P5({},i,{bodyAttributes:P5({},s)});case e5.HTML:return P5({},i,{htmlAttributes:P5({},s)})}return P5({},i,((r={})[n.type]=P5({},s),r))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var r=P5({},t);return Object.keys(e).forEach(function(t){var n;r=P5({},r,((n={})[t]=e[t],n))}),r},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var r=this,n={};return zt.Children.forEach(e,function(e){if(e&&e.props){var i=e.props,s=i.children,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,r){return t[S5[r]||r]=e[r],t},t)}(R5(i,["children"]));switch(r.warnOnInvalidChildren(e,s),e.type){case e5.LINK:case e5.META:case e5.NOSCRIPT:case e5.SCRIPT:case e5.STYLE:n=r.flattenArrayTypeChildren({child:e,arrayTypeChildren:n,newChildProps:o,nestedChildren:s});break;default:t=r.mapObjectTypeChildren({child:e,newProps:t,newChildProps:o,nestedChildren:s})}}}),t=this.mapArrayTypeChildrenToProps(n,t)},t.prototype.render=function(){var e=this.props,t=e.children,r=R5(e,["children"]),n=P5({},r);return t&&(n=this.mapChildrenToProps(t,n)),zt.createElement(r5,n)},N5(t,null,[{key:"canUseDOM",set:function(e){r5.canUseDOM=e}}]),t}(zt.Component),n5.propTypes={base:Rq.object,bodyAttributes:Rq.object,children:Rq.oneOfType([Rq.arrayOf(Rq.node),Rq.node]),defaultTitle:Rq.string,defer:Rq.bool,encodeSpecialCharacters:Rq.bool,htmlAttributes:Rq.object,link:Rq.arrayOf(Rq.object),meta:Rq.arrayOf(Rq.object),noscript:Rq.arrayOf(Rq.object),onChangeClientState:Rq.func,script:Rq.arrayOf(Rq.object),style:Rq.arrayOf(Rq.object),title:Rq.string,titleAttributes:Rq.object,titleTemplate:Rq.string},n5.defaultProps={defer:!0,encodeSpecialCharacters:!0},n5.peek=r5.peek,n5.rewind=function(){var e=r5.rewind();return e||(e=Y5({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},i5);Q5.renderStatic=Q5.rewind;const X5=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,t]=Lt.useState([]),[r,n]=Lt.useState(!1);Lt.useEffect(()=>{Ke(void 0,null,function*(){n(!0);try{const e="http://localhost:8080",r=yield fetch(`${e}/api/blob/list?container=knowledge`),n=yield r.json();n.success&&t(n.data)}catch(Nie){t([])}finally{n(!1)}})},[]);const i=e=>new URLSearchParams(window.location.search).get(e),s=i("tab")||"edit",[o,a]=Lt.useState(s),[l,c]=Lt.useState(i("guideId")),[u,d]=Lt.useState(i("display")),[p,h]=Lt.useState(null),[f,m]=Lt.useState("");Lt.useEffect(()=>{const e=e=>{const t=e;t.detail&&t.detail.guideId&&(c(t.detail.guideId),a("flow"))},t=e=>{const t=e;t.detail&&t.detail.guideId&&(d(t.detail.guideId),a("display"))};return window.addEventListener("switch-to-flow-tab",e),window.addEventListener("display-emergency-guide",t),()=>{window.removeEventListener("switch-to-flow-tab",e),window.removeEventListener("display-emergency-guide",t)}},[]),Lt.useEffect(()=>{const e=()=>Ke(void 0,null,function*(){try{const{buildApiUrl:e}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),t=yield fetch(e(`/troubleshooting/list?ts=${Date.now()}`),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("");const r=yield t.json(),n=r.success&&r.data?r.data:Array.isArray(r)?r:[];"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("forceRefreshFlowList",{detail:{flowList:n}}))}catch(Pie){console.error("",Pie)}});return window.addEventListener("flowDataUpdated",e),window.addEventListener("troubleshootingDataUpdated",e),window.addEventListener("emergencyFlowSaved",e),()=>{window.removeEventListener("flowDataUpdated",e),window.removeEventListener("troubleshootingDataUpdated",e),window.removeEventListener("emergencyFlowSaved",e)}},[]),Lt.useEffect(()=>{const e=e=>{console.log(" :",e.detail),w(!0)},t=["flowDataUpdated","troubleshootingDataUpdated","emergencyFlowSaved","fileSystemUpdated"];return t.forEach(t=>{window.addEventListener(t,e)}),()=>{t.forEach(t=>{window.removeEventListener(t,e)})}},[]);const[v,g]=Lt.useState(!1),[y,b]=Lt.useState([]),{toast:x}=fv(),w=(e=!1)=>Ke(void 0,null,function*(){try{g(!0),console.log(`  (forceRefresh: ${e})`),e&&"undefined"!=typeof window&&(localStorage.clear(),sessionStorage.clear(),console.log(" "));const t=Date.now(),r=`?_t=${t}&_r=${Math.random().toString(36).substring(2)}&no_cache=true&source=troubleshooting`,{buildApiUrl:n}=yield ff(()=>Ke(void 0,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),i=n(`/emergency-flow/list${r}`),s=yield fetch(i,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`: ${s.status}`);const o=yield s.json(),a=o.success&&o.data?o.data:Array.isArray(o)?o:[];console.log(` : ${a.length}`),b(a),"undefined"!=typeof window&&localStorage.setItem("emergencyFlowList",JSON.stringify({data:a,timestamp:t,version:"3.0",source:"knowledge-base/troubleshooting"}))}catch(t){console.error(" :",t),x({title:"",description:"",variant:"destructive"}),b([])}finally{g(!1)}}),S=()=>{d(null),a("edit")};return u&&"display"===o?Gt.jsx("div",{className:"container mx-auto px-4 py-8",children:Gt.jsx(hB,{guideId:u,onExit:S,onSendToChat:()=>{}})}):Gt.jsxs("div",{className:"h-screen flex flex-col",children:[r&&Gt.jsx("div",{children:"..."}),e.length>0&&Gt.jsxs("div",{style:{marginBottom:16},children:[Gt.jsx("h3",{children:" BLOB"}),Gt.jsx("ul",{children:e.map((e,t)=>Gt.jsx("li",{children:e},t))})]}),Gt.jsxs(Q5,{children:[Gt.jsx("title",{children:" - Emergency Assistance"}),Gt.jsx("meta",{name:"description",content:""})]}),Gt.jsxs(aB,{value:o,onValueChange:a,className:"flex-1 flex flex-col min-h-0",children:[Gt.jsx("div",{className:"px-4 pt-8",children:Gt.jsxs(lB,{className:"grid w-full grid-cols-2",children:[Gt.jsx(cB,{value:"upload",children:""}),Gt.jsx(cB,{value:"edit",children:""})]})}),"            ",Gt.jsx(uB,{value:"upload",className:"flex-1 flex flex-col min-h-0 px-4 pb-8",children:Gt.jsx(k3,{onUploadSuccess:e=>{h(e),a("edit")}})}),Gt.jsx(uB,{value:"edit",className:"flex-1 flex flex-col min-h-0 px-4 pb-8",children:Gt.jsx(j3,{})})]})]})}},Symbol.toStringTag,{value:"Module"}));
/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */
var e6={version:"0.18.5"},t6=1252,r6=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],n6=function(e){-1!=r6.indexOf(e)&&(t6=e)};var i6=function(e){n6(e)};function s6(){i6(1200),n6(1252)}var o6,a6=function(e){return String.fromCharCode(e)},l6=function(e){return String.fromCharCode(e)},c6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function u6(e){for(var t="",r=0,n=0,i=0,s=0,o=0,a=0,l=0,c=0;c<e.length;)s=(r=e.charCodeAt(c++))>>2,o=(3&r)<<4|(n=e.charCodeAt(c++))>>4,a=(15&n)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(n)?a=l=64:isNaN(i)&&(l=64),t+=c6.charAt(s)+c6.charAt(o)+c6.charAt(a)+c6.charAt(l);return t}function d6(e){var t="",r=0,n=0,i=0,s=0,o=0,a=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)r=c6.indexOf(e.charAt(l++))<<2|(s=c6.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(r),n=(15&s)<<4|(o=c6.indexOf(e.charAt(l++)))>>2,64!==o&&(t+=String.fromCharCode(n)),i=(3&o)<<6|(a=c6.indexOf(e.charAt(l++))),64!==a&&(t+=String.fromCharCode(i));return t}var p6=function(){return"undefined"!=typeof Buffer&&"undefined"!=typeof process&&void 0!==process.versions&&!!process.versions.node}(),h6=function(){if("undefined"!=typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(Nie){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function f6(e){return p6?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function m6(e){return p6?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var v6=function(e){return p6?h6(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function g6(e){if("undefined"==typeof ArrayBuffer)return v6(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=255&e.charCodeAt(n);return t}function y6(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}var b6=p6?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:h6(e)}))}:function(e){if("undefined"!=typeof Uint8Array){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),i=0;for(t=0,r=0;t<e.length;r+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if("string"==typeof e[t])throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var x6=/\u0000/g,w6=/[\u0001-\u0006]/g;function S6(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function C6(e,t){var r=""+e;return r.length>=t?r:O8("0",t-r.length)+r}function E6(e,t){var r=""+e;return r.length>=t?r:O8(" ",t-r.length)+r}function T6(e,t){var r=""+e;return r.length>=t?r:r+O8(" ",t-r.length)}var N6=Math.pow(2,32);function P6(e,t){return e>N6||e<-N6?function(e,t){var r=""+Math.round(e);return r.length>=t?r:O8("0",t-r.length)+r}(e,t):function(e,t){var r=""+e;return r.length>=t?r:O8("0",t-r.length)+r}(Math.round(e),t)}function R6(e,t){return t=t||0,e.length>=7+t&&103==(32|e.charCodeAt(t))&&101==(32|e.charCodeAt(t+1))&&110==(32|e.charCodeAt(t+2))&&101==(32|e.charCodeAt(t+3))&&114==(32|e.charCodeAt(t+4))&&97==(32|e.charCodeAt(t+5))&&108==(32|e.charCodeAt(t+6))}var I6=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],k6=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var _6={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},A6={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},j6={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function O6(e,t,r){for(var n=e<0?-1:1,i=e*n,s=0,o=1,a=0,l=1,c=0,u=0,d=Math.floor(i);c<t&&(a=(d=Math.floor(i))*o+s,u=d*c+l,!(i-d<5e-8));)i=1/(i-d),s=o,o=a,l=c,c=u;if(u>t&&(c>t?(u=l,a=s):(u=c,a=o)),!r)return[0,n*a,u];var p=Math.floor(n*a/u);return[p,n*a-p*u,u]}function D6(e,t,r){if(e>2958465||e<0)return null;var n=0|e,i=Math.floor(86400*(e-n)),s=0,o=[],a={D:n,T:i,u:86400*(e-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),t&&t.date1904&&(n+=1462),a.u>.9999&&(a.u=0,86400==++i&&(a.T=i=0,++n,++a.D)),60===n)o=r?[1317,10,29]:[1900,2,29],s=3;else if(0===n)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=function(e,t){t[0]-=581;var r=e.getDay();e<60&&(r=(r+6)%7);return r}(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}var M6=new Date(1899,11,31,0,0,0),L6=M6.getTime(),z6=new Date(1900,2,1,0,0,0);function F6(e,t){var r=e.getTime();return t?r-=1262304e5:e>=z6&&(r+=864e5),(r-(L6+6e4*(e.getTimezoneOffset()-M6.getTimezoneOffset())))/864e5}function B6(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function U6(e){var t,r=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=r>=-4&&r<=-1?e.toPrecision(10+r):Math.abs(r)<=9?function(e){var t=e<0?12:11,r=B6(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10)).length<=t?r:e.toExponential(5)}(e):10===r?e.toFixed(10).substr(0,12):function(e){var t=B6(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),B6(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function W6(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):U6(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return c8(14,F6(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function H6(e,t,r,n){var i,s="",o=0,a=0,l=r.y,c=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:i=l%100,c=2;break;default:i=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:i=r.m,c=t.length;break;case 3:return k6[r.m-1][1];case 5:return k6[r.m-1][0];default:return k6[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:i=r.d,c=t.length;break;case 3:return I6[r.q][0];default:return I6[r.q][1]}break;case 104:switch(t.length){case 1:case 2:i=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:i=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:i=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==r.u||"s"!=t&&"ss"!=t?(a=n>=2?3===n?1e3:100:1===n?10:1,(o=Math.round(a*(r.S+r.u)))>=60*a&&(o=0),"s"===t?0===o?"0":""+o/a:(s=C6(o,2+n),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):C6(r.S,t.length);case 90:switch(t){case"[h]":case"[hh]":i=24*r.D+r.H;break;case"[m]":case"[mm]":i=60*(24*r.D+r.H)+r.M;break;case"[s]":case"[ss]":i=60*(60*(24*r.D+r.H)+r.M)+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:i=l,c=1}return c>0?C6(i,c):""}function $6(e){if(e.length<=3)return e;for(var t=e.length%3,r=e.substr(0,t);t!=e.length;t+=3)r+=(r.length>0?",":"")+e.substr(t,3);return r}var V6=/%/g;function q6(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+q6(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),-1===(r=(t/Math.pow(10,s)).toPrecision(n+1+(i+s)%i)).indexOf("e")){var o=Math.floor(Math.log(t)*Math.LOG10E);for(-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);"0."===r.substr(0,2);)r=(r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,r,n){return t+r+n.substr(0,(i+s)%i)+"."+n.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var G6=/# (\?+)( ?)\/( ?)(\d+)/;var K6=/^#*0*\.([0#]+)/,J6=/\).*[0#]/,Y6=/\(###\) ###\\?-####/;function Z6(e){for(var t,r="",n=0;n!=e.length;++n)switch(t=e.charCodeAt(n)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(t)}return r}function Q6(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function X6(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function e8(e,t,r){if(40===e.charCodeAt(0)&&!t.match(J6)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?e8("n",n,r):"("+e8("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return n8(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(V6,""),i=t.length-n.length;return n8(e,n,r*Math.pow(10,2*i))+O8("%",i)}(e,t,r);if(-1!==t.indexOf("E"))return q6(t,r);if(36===t.charCodeAt(0))return"$"+e8(e,t.substr(" "==t.charAt(1)?2:1),r);var i,s,o,a,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+P6(l,t.length);if(t.match(/^[#?]+$/))return"0"===(i=P6(r,0))&&(i=""),i.length>t.length?i:Z6(t.substr(0,t.length-i.length))+i;if(s=t.match(G6))return function(e,t,r){var n=parseInt(e[4],10),i=Math.round(t*n),s=Math.floor(i/n),o=i-s*n,a=n;return r+(0===s?"":""+s)+" "+(0===o?O8(" ",e[1].length+1+e[4].length):E6(o,e[1].length)+e[2]+"/"+e[3]+C6(a,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+P6(l,t.length-t.indexOf("0"));if(s=t.match(K6))return i=Q6(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Z6(s[1])).replace(/\.$/,"."+Z6(s[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+O8("0",Z6(s[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+Q6(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+$6(P6(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+e8(e,t,-r):$6(""+(Math.floor(r)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(r,s[1].length)))+"."+C6(X6(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return e8(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=S6(e8(e,t.replace(/[\\-]/g,""),r)),o=0,S6(S6(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return o<i.length?i.charAt(o++):"0"===e?"0":""}));if(t.match(Y6))return"("+(i=e8(e,"##########",r)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=O6(l,Math.pow(10,o)-1,!1),i=""+c," "==(u=n8("n",s[1],a[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=T6(a[2],o)).length<s[4].length&&(u=Z6(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),c+((a=O6(l,Math.pow(10,o)-1,!0))[0]||(a[1]?"":"0"))+" "+(a[1]?E6(a[1],o)+s[2]+"/"+s[3]+T6(a[2],o):O8(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=P6(r,0),t.length<=i.length?i:Z6(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=t.indexOf(".")-o,p=t.length-i.length-d;return Z6(t.substr(0,d)+i+t.substr(t.length-p))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=X6(r,s[1].length),r<0?"-"+e8(e,t,-r):$6(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?C6(0,3-e.length):"")+e})+"."+C6(o,s[1].length);switch(t){case"###,##0.00":return e8(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=$6(P6(l,0));return"0"!==h?c+h:"";case"###,###.00":return e8(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return e8(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function t8(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+t8(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),!(r=(t/Math.pow(10,s)).toPrecision(n+1+(i+s)%i)).match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,r,n){return t+r+n.substr(0,(i+s)%i)+"."+n.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function r8(e,t,r){if(40===e.charCodeAt(0)&&!t.match(J6)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?r8("n",n,r):"("+r8("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return n8(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(V6,""),i=t.length-n.length;return n8(e,n,r*Math.pow(10,2*i))+O8("%",i)}(e,t,r);if(-1!==t.indexOf("E"))return t8(t,r);if(36===t.charCodeAt(0))return"$"+r8(e,t.substr(" "==t.charAt(1)?2:1),r);var i,s,o,a,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+C6(l,t.length);if(t.match(/^[#?]+$/))return i=""+r,0===r&&(i=""),i.length>t.length?i:Z6(t.substr(0,t.length-i.length))+i;if(s=t.match(G6))return function(e,t,r){return r+(0===t?"":""+t)+O8(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+C6(l,t.length-t.indexOf("0"));if(s=t.match(K6))return i=(i=(""+r).replace(/^([^\.]+)$/,"$1."+Z6(s[1])).replace(/\.$/,"."+Z6(s[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+O8("0",Z6(s[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+$6(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+r8(e,t,-r):$6(""+r)+"."+O8("0",s[1].length);if(s=t.match(/^#,#*,#0/))return r8(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=S6(r8(e,t.replace(/[\\-]/g,""),r)),o=0,S6(S6(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return o<i.length?i.charAt(o++):"0"===e?"0":""}));if(t.match(Y6))return"("+(i=r8(e,"##########",r)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=O6(l,Math.pow(10,o)-1,!1),i=""+c," "==(u=n8("n",s[1],a[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=T6(a[2],o)).length<s[4].length&&(u=Z6(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),c+((a=O6(l,Math.pow(10,o)-1,!0))[0]||(a[1]?"":"0"))+" "+(a[1]?E6(a[1],o)+s[2]+"/"+s[3]+T6(a[2],o):O8(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=""+r,t.length<=i.length?i:Z6(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=t.indexOf(".")-o,p=t.length-i.length-d;return Z6(t.substr(0,d)+i+t.substr(t.length-p))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+r8(e,t,-r):$6(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?C6(0,3-e.length):"")+e})+"."+C6(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=$6(""+l);return"0"!==h?c+h:"";default:if(t.match(/\.[0#?]*$/))return r8(e,t.slice(0,t.lastIndexOf(".")),r)+Z6(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function n8(e,t,r){return(0|r)===r?r8(e,t,r):e8(e,t,r)}var i8=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function s8(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":R6(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("/"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(n=r;"]"!==e.charAt(t++)&&t<e.length;)n+=e.charAt(t);if(n.match(i8))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||"\\"==r&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var o8=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function a8(e,t){if(null==t)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0}return!1}function l8(e,t){var r=function(e){for(var t=[],r=!1,n=0,i=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(i,n-i),i=n+1}if(t[t.length]=e.substr(i),!0===r)throw new Error("Format |"+e+"| unterminated string ");return t}(e),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if("number"!=typeof t)return[4,4===r.length||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"]}var s=t>0?r[0]:t<0?r[1]:r[2];if(-1===r[0].indexOf("[")&&-1===r[1].indexOf("["))return[n,s];if(null!=r[0].match(/\[[=<>]/)||null!=r[1].match(/\[[=<>]/)){var o=r[0].match(o8),a=r[1].match(o8);return a8(t,o)?[n,r[0]]:a8(t,a)?[n,r[1]]:[n,r[null!=o&&null!=a?2:1]]}return[n,s]}function c8(e,t,r){null==r&&(r={});var n="";switch(typeof e){case"string":n="m/d/yy"==e&&r.dateNF?r.dateNF:e;break;case"number":null==(n=14==e&&r.dateNF?r.dateNF:(null!=r.table?r.table:_6)[e])&&(n=r.table&&r.table[A6[e]]||_6[A6[e]]),null==n&&(n=j6[e]||"General")}if(R6(n,0))return W6(t,r);t instanceof Date&&(t=F6(t,r.date1904));var i=l8(n,t);if(R6(i[1]))return W6(t,r);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,r,n){for(var i,s,o,a=[],l="",c=0,u="",d="t",p="H";c<e.length;)switch(u=e.charAt(c)){case"G":if(!R6(e,c))throw new Error("unrecognized character "+u+" in "+e);a[a.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(o=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(o);a[a.length]={t:"t",v:l},++c;break;case"\\":var h=e.charAt(++c),f="("===h||")"===h?h:"t";a[a.length]={t:f,v:h},++c;break;case"_":a[a.length]={t:"t",v:" "},c+=2;break;case"@":a[a.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==i&&null==(i=D6(t,r,"2"===e.charAt(c+1))))return"";a[a.length]={t:"X",v:e.substr(c,2)},d=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==i&&null==(i=D6(t,r)))return"";for(l=u;++c<e.length&&e.charAt(c).toLowerCase()===u;)l+=u;"m"===u&&"h"===d.toLowerCase()&&(u="M"),"h"===u&&(u=p),a[a.length]={t:u,v:l},d=u;break;case"A":case"a":case"":var m={t:u,v:u};if(null==i&&(i=D6(t,r)),"A/P"===e.substr(c,3).toUpperCase()?(null!=i&&(m.v=i.H>=12?"P":"A"),m.t="T",p="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"PM":"AM"),m.t="T",c+=5,p="h"):"/"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"":""),m.t="T",c+=5,p="h"):(m.t="t",++c),null==i&&"T"===m.t)return"";a[a.length]=m,d=u;break;case"[":for(l=u;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(i8)){if(null==i&&null==(i=D6(t,r)))return"";a[a.length]={t:"Z",v:l.toLowerCase()},d=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",s8(e)||(a[a.length]={t:"t",v:l}));break;case".":if(null!=i){for(l=u;++c<e.length&&"0"===(u=e.charAt(c));)l+=u;a[a.length]={t:"s",v:l};break}case"0":case"#":for(l=u;++c<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(c))>-1;)l+=u;a[a.length]={t:"n",v:l};break;case"?":for(l=u;e.charAt(++c)===u;)l+=u;a[a.length]={t:u,v:l},d=u;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":a[a.length]={t:1===n?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=u;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);a[a.length]={t:"D",v:l};break;case" ":a[a.length]={t:u,v:u},++c;break;case"$":a[a.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);a[a.length]={t:"t",v:u},++c}var v,g=0,y=0;for(c=a.length-1,d="t";c>=0;--c)switch(a[c].t){case"h":case"H":a[c].t=p,d="h",g<1&&(g=1);break;case"s":(v=a[c].v.match(/\.0+$/))&&(y=Math.max(y,v[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":d=a[c].t;break;case"m":"s"===d&&(a[c].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[c].v.match(/[Hh]/)&&(g=1),g<2&&a[c].v.match(/[Mm]/)&&(g=2),g<3&&a[c].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M)}var b,x="";for(c=0;c<a.length;++c)switch(a[c].t){case"t":case"T":case" ":case"D":break;case"X":a[c].v="",a[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[c].v=H6(a[c].t.charCodeAt(0),a[c].v,i,y),a[c].t="t";break;case"n":case"?":for(b=c+1;null!=a[b]&&("?"===(u=a[b].t)||"D"===u||(" "===u||"t"===u)&&null!=a[b+1]&&("?"===a[b+1].t||"t"===a[b+1].t&&"/"===a[b+1].v)||"("===a[c].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===a[b].v||" "===a[b].v&&null!=a[b+1]&&"?"==a[b+1].t));)a[c].v+=a[b].v,a[b]={v:"",t:";"},++b;x+=a[c].v,c=b-1;break;case"G":a[c].t="t",a[c].v=W6(t,r)}var w,S,C="";if(x.length>0){40==x.charCodeAt(0)?(w=t<0&&45===x.charCodeAt(0)?-t:t,S=n8("n",x,w)):(S=n8("n",x,w=t<0&&n>1?-t:t),w<0&&a[0]&&"t"==a[0].t&&(S=S.substr(1),a[0].v="-"+a[0].v)),b=S.length-1;var E=a.length;for(c=0;c<a.length;++c)if(null!=a[c]&&"t"!=a[c].t&&a[c].v.indexOf(".")>-1){E=c;break}var T=a.length;if(E===a.length&&-1===S.indexOf("E")){for(c=a.length-1;c>=0;--c)null!=a[c]&&-1!=="n?".indexOf(a[c].t)&&(b>=a[c].v.length-1?(b-=a[c].v.length,a[c].v=S.substr(b+1,a[c].v.length)):b<0?a[c].v="":(a[c].v=S.substr(0,b+1),b=-1),a[c].t="t",T=c);b>=0&&T<a.length&&(a[T].v=S.substr(0,b+1)+a[T].v)}else if(E!==a.length&&-1===S.indexOf("E")){for(b=S.indexOf(".")-1,c=E;c>=0;--c)if(null!=a[c]&&-1!=="n?".indexOf(a[c].t)){for(s=a[c].v.indexOf(".")>-1&&c===E?a[c].v.indexOf(".")-1:a[c].v.length-1,C=a[c].v.substr(s+1);s>=0;--s)b>=0&&("0"===a[c].v.charAt(s)||"#"===a[c].v.charAt(s))&&(C=S.charAt(b--)+C);a[c].v=C,a[c].t="t",T=c}for(b>=0&&T<a.length&&(a[T].v=S.substr(0,b+1)+a[T].v),b=S.indexOf(".")+1,c=E;c<a.length;++c)if(null!=a[c]&&(-1!=="n?(".indexOf(a[c].t)||c===E)){for(s=a[c].v.indexOf(".")>-1&&c===E?a[c].v.indexOf(".")+1:0,C=a[c].v.substr(0,s);s<a[c].v.length;++s)b<S.length&&(C+=S.charAt(b++));a[c].v=C,a[c].t="t",T=c}}}for(c=0;c<a.length;++c)null!=a[c]&&"n?".indexOf(a[c].t)>-1&&(w=n>1&&t<0&&c>0&&"-"===a[c-1].v?-t:t,a[c].v=n8(a[c].t,a[c].v,w),a[c].t="t");var N="";for(c=0;c!==a.length;++c)null!=a[c]&&(N+=a[c].v);return N}(i[1],t,r,i[0])}function u8(e,t){if("number"!=typeof t){t=+t||-1;for(var r=0;r<392;++r)if(null!=_6[r]){if(_6[r]==e){t=r;break}}else t<0&&(t=r);t<0&&(t=391)}return _6[t]=e,t}function d8(e){for(var t=0;392!=t;++t)void 0!==e[t]&&u8(e[t],t)}function p8(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',_6=e}var h8=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var f8=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();var r=function(e){var t=0,r=0,n=0,i="undefined"!=typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)i[n]=e[n];for(n=0;256!=n;++n)for(r=e[n],t=256+n;t<4096;t+=256)r=i[t]=r>>>8^e[255&r];var s=[];for(n=1;16!=n;++n)s[n-1]="undefined"!=typeof Int32Array?i.subarray(256*n,256*n+256):i.slice(256*n,256*n+256);return s}(t),n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],l=r[5],c=r[6],u=r[7],d=r[8],p=r[9],h=r[10],f=r[11],m=r[12],v=r[13],g=r[14];return e.table=t,e.bstr=function(e,r){for(var n=-1^r,i=0,s=e.length;i<s;)n=n>>>8^t[255&(n^e.charCodeAt(i++))];return~n},e.buf=function(e,r){for(var y=-1^r,b=e.length-15,x=0;x<b;)y=g[e[x++]^255&y]^v[e[x++]^y>>8&255]^m[e[x++]^y>>16&255]^f[e[x++]^y>>>24]^h[e[x++]]^p[e[x++]]^d[e[x++]]^u[e[x++]]^c[e[x++]]^l[e[x++]]^a[e[x++]]^o[e[x++]]^s[e[x++]]^i[e[x++]]^n[e[x++]]^t[e[x++]];for(b+=15;x<b;)y=y>>>8^t[255&(y^e[x++])];return~y},e.str=function(e,r){for(var n=-1^r,i=0,s=e.length,o=0,a=0;i<s;)(o=e.charCodeAt(i++))<128?n=n>>>8^t[255&(n^o)]:o<2048?n=(n=n>>>8^t[255&(n^(192|o>>6&31))])>>>8^t[255&(n^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),a=1023&e.charCodeAt(i++),n=(n=(n=(n=n>>>8^t[255&(n^(240|o>>8&7))])>>>8^t[255&(n^(128|o>>2&63))])>>>8^t[255&(n^(128|a>>6&15|(3&o)<<4))])>>>8^t[255&(n^(128|63&a))]):n=(n=(n=n>>>8^t[255&(n^(224|o>>12&15))])>>>8^t[255&(n^(128|o>>6&63))])>>>8^t[255&(n^(128|63&o))];return~n},e}(),m8=function(){var e,t={};function r(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function n(e){if("/"==e.charAt(e.length-1))return n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function i(e,t){"string"==typeof t&&(t=new Date(t));var r=t.getHours();r=(r=r<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,r);var n=t.getFullYear()-1980;n=(n=n<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,n)}function s(e){o9(e,0);for(var t={},r=0;e.l<=e.length-4;){var n=e.read_shift(2),i=e.read_shift(2),s=e.l+i,o={};if(21589===n)1&(r=e.read_shift(1))&&(o.mtime=e.read_shift(4)),i>5&&(2&r&&(o.atime=e.read_shift(4)),4&r&&(o.ctime=e.read_shift(4))),o.mtime&&(o.mt=new Date(1e3*o.mtime));e.l=s,t[n]=o}return t}function o(){return e||(e={})}function a(e,t){if(80==e[0]&&75==e[1])return ne(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=S(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var r=t&&t.root||"",n=(p6&&Buffer.isBuffer(e)?e.toString("binary"):S(e)).split("\r\n"),i=0,s="";for(i=0;i<n.length;++i)if(s=n[i],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),r||(r=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,r.length)!=r))for(;r.length>0&&(r=(r=r.slice(0,r.length-1)).slice(0,r.lastIndexOf("/")+1),s.slice(0,r.length)!=r););var o=(n[1]||"").match(/boundary="(.*?)"/);if(!o)throw new Error("MAD cannot find boundary");var a="--"+(o[1]||""),l=[],c=[],u={FileIndex:l,FullPaths:c};p(u);var d,h=0;for(i=0;i<n.length;++i){var f=n[i];f!==a&&f!==a+"--"||(h++&&ce(u,n.slice(d,i),r),d=i)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var r,n,i,s,o,a,h=512,f=[],m=e.slice(0,512);o9(m,0);var v=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(y,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(r=v[0]){case 3:h=512;break;case 4:h=4096;break;case 0:if(0==v[1])return ne(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+r)}512!==h&&o9(m=e.slice(0,h),28);var b=e.slice(0,h);!function(e,t){var r=9;switch(e.l+=2,r=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+r);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+r);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+r)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,r);var x=m.read_shift(4,"i");if(3===r&&0!==x)throw new Error("# Directory Sectors: Expected 0 saw "+x);m.l+=4,s=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),o=m.read_shift(4,"i"),n=m.read_shift(4,"i"),a=m.read_shift(4,"i"),i=m.read_shift(4,"i");for(var w=-1,C=0;C<109&&!((w=m.read_shift(4,"i"))<0);++C)f[C]=w;var E=function(e,t){for(var r=Math.ceil(e.length/t)-1,n=[],i=1;i<r;++i)n[i-1]=e.slice(i*t,(i+1)*t);return n[r-1]=e.slice(r*t),n}(e,h);c(a,i,E,h,f);var T=function(e,t,r,n){var i=e.length,s=[],o=[],a=[],l=[],c=n-1,u=0,d=0,p=0,h=0;for(u=0;u<i;++u)if(a=[],(p=u+t)>=i&&(p-=i),!o[p]){l=[];var f=[];for(d=p;d>=0;){f[d]=!0,o[d]=!0,a[a.length]=d,l.push(e[d]);var m=r[Math.floor(4*d/n)];if(n<4+(h=4*d&c))throw new Error("FAT boundary crossed: "+d+" 4 "+n);if(!e[m])break;if(f[d=Q7(e[m],h)])break}s[p]={nodes:a,data:R7([l])}}return s}(E,s,f,h);T[s].name="!Directory",n>0&&o!==g&&(T[o].name="!MiniFAT"),T[f[0]].name="!FAT",T.fat_addrs=f,T.ssz=h;var N=[],P=[],R=[];!function(e,t,r,n,i,s,o,a){for(var c,p=0,h=n.length?2:0,f=t[e].data,m=0,v=0;m<f.length;m+=128){var y=f.slice(m,m+128);o9(y,64),v=y.read_shift(2),c=k7(y,0,v-h),n.push(c);var b={name:c,type:y.read_shift(1),color:y.read_shift(1),L:y.read_shift(4,"i"),R:y.read_shift(4,"i"),C:y.read_shift(4,"i"),clsid:y.read_shift(16),state:y.read_shift(4,"i"),start:0,size:0};0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(b.ct=d(y,y.l-8)),0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(b.mt=d(y,y.l-8)),b.start=y.read_shift(4,"i"),b.size=y.read_shift(4,"i"),b.size<0&&b.start<0&&(b.size=b.type=0,b.start=g,b.name=""),5===b.type?(p=b.start,i>0&&p!==g&&(t[p].name="!StreamData")):b.size>=4096?(b.storage="fat",void 0===t[b.start]&&(t[b.start]=u(r,b.start,t.fat_addrs,t.ssz)),t[b.start].name=b.name,b.content=t[b.start].data.slice(0,b.size)):(b.storage="minifat",b.size<0?b.size=0:p!==g&&b.start!==g&&t[p]&&(b.content=l(b,t[p].data,(t[a]||{}).data))),b.content&&o9(b.content,0),s[c]=b,o.push(b)}}(s,T,E,N,n,{},P,o),function(e,t,r){for(var n=0,i=0,s=0,o=0,a=0,l=r.length,c=[],u=[];n<l;++n)c[n]=u[n]=n,t[n]=r[n];for(;a<u.length;++a)i=e[n=u[a]].L,s=e[n].R,o=e[n].C,c[n]===n&&(-1!==i&&c[i]!==i&&(c[n]=c[i]),-1!==s&&c[s]!==s&&(c[n]=c[s])),-1!==o&&(c[o]=n),-1!==i&&n!=c[n]&&(c[i]=c[n],u.lastIndexOf(i)<a&&u.push(i)),-1!==s&&n!=c[n]&&(c[s]=c[n],u.lastIndexOf(s)<a&&u.push(s));for(n=1;n<l;++n)c[n]===n&&(-1!==s&&c[s]!==s?c[n]=c[s]:-1!==i&&c[i]!==i&&(c[n]=c[i]));for(n=1;n<l;++n)if(0!==e[n].type){if((a=n)!=c[a])do{a=c[a],t[n]=t[a]+"/"+t[n]}while(0!==a&&-1!==c[a]&&a!=c[a]);c[n]=-1}for(t[0]+="/",n=1;n<l;++n)2!==e[n].type&&(t[n]+="/")}(P,R,N),N.shift();var I={FileIndex:P,FullPaths:R};return t&&t.raw&&(I.raw={header:b,sectors:E}),I}function l(e,t,r){for(var n=e.start,i=e.size,s=[],o=n;r&&i>0&&o>=0;)s.push(t.slice(o*v,o*v+v)),i-=v,o=Q7(r,4*o);return 0===s.length?l9(0):b6(s).slice(0,e.size)}function c(e,t,r,n,i){var s=g;if(e===g){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var o=r[e],a=(n>>>2)-1;if(!o)return;for(var l=0;l<a&&(s=Q7(o,4*l))!==g;++l)i.push(s);c(Q7(o,n-4),t-1,r,n,i)}}function u(e,t,r,n,i){var s=[],o=[];i||(i=[]);var a=n-1,l=0,c=0;for(l=t;l>=0;){i[l]=!0,s[s.length]=l,o.push(e[l]);var u=r[Math.floor(4*l/n)];if(n<4+(c=4*l&a))throw new Error("FAT boundary crossed: "+l+" 4 "+n);if(!e[u])break;l=Q7(e[u],c)}return{nodes:s,data:R7([o])}}function d(e,t){return new Date(1e3*(Z7(e,t+4)/1e7*Math.pow(2,32)+Z7(e,t)/1e7-11644473600))}function p(e,t){var r=t||{},n=r.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=n+"/",e.FileIndex[0]={name:n,type:5}),r.CLSID&&(e.FileIndex[0].clsid=r.CLSID),function(e){var t="Sh33tJ5";if(m8.find(e,"/"+t))return;var r=l9(4);r[0]=55,r[1]=r[3]=50,r[2]=54,e.FileIndex.push({name:t,type:2,content:r,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),h(e)}(e)}function h(e,t){p(e);for(var i=!1,s=!1,o=e.FullPaths.length-1;o>=0;--o){var a=e.FileIndex[o];switch(a.type){case 0:s?i=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(a.R*a.L*a.C)&&(i=!0),a.R>-1&&a.L>-1&&a.R==a.L&&(i=!0);break;default:i=!0}}if(i||t){var l=new Date(1987,1,19),c=0,u=Object.create?Object.create(null):{},d=[];for(o=0;o<e.FullPaths.length;++o)u[e.FullPaths[o]]=!0,0!==e.FileIndex[o].type&&d.push([e.FullPaths[o],e.FileIndex[o]]);for(o=0;o<d.length;++o){var h=r(d[o][0]);(s=u[h])||(d.push([h,{name:n(h).replace("/",""),type:1,clsid:x,ct:l,mt:l,content:null}]),u[h]=!0)}for(d.sort(function(e,t){return function(e,t){for(var r=e.split("/"),n=t.split("/"),i=0,s=0,o=Math.min(r.length,n.length);i<o;++i){if(s=r[i].length-n[i].length)return s;if(r[i]!=n[i])return r[i]<n[i]?-1:1}return r.length-n.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],o=0;o<d.length;++o)e.FullPaths[o]=d[o][0],e.FileIndex[o]=d[o][1];for(o=0;o<d.length;++o){var f=e.FileIndex[o],m=e.FullPaths[o];if(f.name=n(m).replace("/",""),f.L=f.R=f.C=-(f.color=1),f.size=f.content?f.content.length:0,f.start=0,f.clsid=f.clsid||x,0===o)f.C=d.length>1?1:-1,f.size=0,f.type=5;else if("/"==m.slice(-1)){for(c=o+1;c<d.length&&r(e.FullPaths[c])!=m;++c);for(f.C=c>=d.length?-1:c,c=o+1;c<d.length&&r(e.FullPaths[c])!=r(m);++c);f.R=c>=d.length?-1:c,f.type=1}else r(e.FullPaths[o+1]||"")==r(m)&&(f.R=o+1),f.type=2}}}function f(e,t){var r=t||{};if("mad"==r.fileType)return function(e,t){for(var r=t||{},n=r.boundary||"SheetJS",i=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(n="------="+n).slice(2)+'"',"","",""],s=e.FullPaths[0],o=s,a=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(o=e.FullPaths[l].slice(s.length),(a=e.FileIndex[l]).size&&a.content&&"Sh33tJ5"!=o){o=o.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=a.content,u=p6&&Buffer.isBuffer(c)?c.toString("binary"):S(c),d=0,p=Math.min(1024,u.length),h=0,f=0;f<=p;++f)(h=u.charCodeAt(f))>=32&&h<128&&++d;var m=d>=4*p/5;i.push(n),i.push("Content-Location: "+(r.root||"file:///C:/SheetJS/")+o),i.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),i.push("Content-Type: "+oe(a,o)),i.push(""),i.push(m?le(u):ae(u))}return i.push(n+"--\r\n"),i.join("\r\n")}(e,r);if(h(e),"zip"===r.fileType)return function(e,t){var r=t||{},n=[],s=[],o=l9(1),a=r.compression?8:0,l=0,c=0,u=0,d=0,p=0,h=e.FullPaths[0],f=h,m=e.FileIndex[0],v=[],g=0;for(c=1;c<e.FullPaths.length;++c)if(f=e.FullPaths[c].slice(h.length),(m=e.FileIndex[c]).size&&m.content&&"Sh33tJ5"!=f){var y=d,b=l9(f.length);for(u=0;u<f.length;++u)b.write_shift(1,127&f.charCodeAt(u));b=b.slice(0,b.l),v[p]=f8.buf(m.content,0);var x=m.content;8==a&&(x=C(x)),(o=l9(30)).write_shift(4,67324752),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,a),m.mt?i(o,m.mt):o.write_shift(4,0),o.write_shift(-4,v[p]),o.write_shift(4,x.length),o.write_shift(4,m.content.length),o.write_shift(2,b.length),o.write_shift(2,0),d+=o.length,n.push(o),d+=b.length,n.push(b),d+=x.length,n.push(x),(o=l9(46)).write_shift(4,33639248),o.write_shift(2,0),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,a),o.write_shift(4,0),o.write_shift(-4,v[p]),o.write_shift(4,x.length),o.write_shift(4,m.content.length),o.write_shift(2,b.length),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(4,0),o.write_shift(4,y),g+=o.l,s.push(o),g+=b.length,s.push(b),++p}return o=l9(22),o.write_shift(4,101010256),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,p),o.write_shift(2,p),o.write_shift(4,g),o.write_shift(4,d),o.write_shift(2,0),b6([b6(n),b6(s),o])}(e,r);var n=function(e){for(var t=0,r=0,n=0;n<e.FileIndex.length;++n){var i=e.FileIndex[n];if(i.content){var s=i.content.length;s>0&&(s<4096?t+=s+63>>6:r+=s+511>>9)}}for(var o=e.FullPaths.length+3>>2,a=t+127>>7,l=(t+7>>3)+r+o+a,c=l+127>>7,u=c<=109?0:Math.ceil((c-109)/127);l+c+u+127>>7>c;)u=++c<=109?0:Math.ceil((c-109)/127);var d=[1,u,c,a,o,r,t,0];return e.FileIndex[0].size=t<<6,d[7]=(e.FileIndex[0].start=d[0]+d[1]+d[2]+d[3]+d[4]+d[5])+(d[6]+7>>3),d}(e),s=l9(n[7]<<9),o=0,a=0;for(o=0;o<8;++o)s.write_shift(1,b[o]);for(o=0;o<8;++o)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),o=0;o<3;++o)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,n[2]),s.write_shift(4,n[0]+n[1]+n[2]+n[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,n[3]?n[0]+n[1]+n[2]-1:g),s.write_shift(4,n[3]),s.write_shift(-4,n[1]?n[0]-1:g),s.write_shift(4,n[1]),o=0;o<109;++o)s.write_shift(-4,o<n[2]?n[1]+o:-1);if(n[1])for(a=0;a<n[1];++a){for(;o<236+127*a;++o)s.write_shift(-4,o<n[2]?n[1]+o:-1);s.write_shift(-4,a===n[1]-1?g:a+1)}var l=function(e){for(a+=e;o<a-1;++o)s.write_shift(-4,o+1);e&&(++o,s.write_shift(-4,g))};for(a=o=0,a+=n[1];o<a;++o)s.write_shift(-4,w.DIFSECT);for(a+=n[2];o<a;++o)s.write_shift(-4,w.FATSECT);l(n[3]),l(n[4]);for(var c=0,u=0,d=e.FileIndex[0];c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&((u=d.content.length)<4096||(d.start=a,l(u+511>>9)));for(l(n[6]+7>>3);511&s.l;)s.write_shift(-4,w.ENDOFCHAIN);for(a=o=0,c=0;c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&(!(u=d.content.length)||u>=4096||(d.start=a,l(u+63>>6)));for(;511&s.l;)s.write_shift(-4,w.ENDOFCHAIN);for(o=0;o<n[4]<<2;++o){var p=e.FullPaths[o];if(p&&0!==p.length){d=e.FileIndex[o],0===o&&(d.start=d.size?d.start-1:g);var f=0===o&&r.root||d.name;if(u=2*(f.length+1),s.write_shift(64,f,"utf16le"),s.write_shift(2,u),s.write_shift(1,d.type),s.write_shift(1,d.color),s.write_shift(-4,d.L),s.write_shift(-4,d.R),s.write_shift(-4,d.C),d.clsid)s.write_shift(16,d.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,d.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,d.start),s.write_shift(4,d.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(o=1;o<e.FileIndex.length;++o)if((d=e.FileIndex[o]).size>=4096)if(s.l=d.start+1<<9,p6&&Buffer.isBuffer(d.content))d.content.copy(s,s.l,0,d.size),s.l+=d.size+511&-512;else{for(c=0;c<d.size;++c)s.write_shift(1,d.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(o=1;o<e.FileIndex.length;++o)if((d=e.FileIndex[o]).size>0&&d.size<4096)if(p6&&Buffer.isBuffer(d.content))d.content.copy(s,s.l,0,d.size),s.l+=d.size+63&-64;else{for(c=0;c<d.size;++c)s.write_shift(1,d.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(p6)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var m,v=64,g=-2,y="d0cf11e0a1b11ae1",b=[208,207,17,224,161,177,26,225],x="00000000000000000000000000000000",w={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:g,FREESECT:-1,HEADER_SIGNATURE:y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:x,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function S(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function C(e){return m?m.deflateRawSync(e):K(e)}var E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function P(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var R="undefined"!=typeof Uint8Array,I=R?new Uint8Array(256):[],k=0;k<256;++k)I[k]=P(k);function _(e,t){var r=I[255&e];return t<=8?r>>>8-t:(r=r<<8|I[e>>8&255],t<=16?r>>>16-t:(r=r<<8|I[e>>16&255])>>>24-t)}function A(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=6?0:e[n+1]<<8))>>>r&3}function j(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=5?0:e[n+1]<<8))>>>r&7}function O(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=3?0:e[n+1]<<8))>>>r&31}function D(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=1?0:e[n+1]<<8))>>>r&127}function M(e,t,r){var n=7&t,i=t>>>3,s=(1<<r)-1,o=e[i]>>>n;return r<8-n?o&s:(o|=e[i+1]<<8-n,r<16-n?o&s:(o|=e[i+2]<<16-n,r<24-n?o&s:(o|=e[i+3]<<24-n)&s))}function L(e,t,r){var n=7&t,i=t>>>3;return n<=5?e[i]|=(7&r)<<n:(e[i]|=r<<n&255,e[i+1]=(7&r)>>8-n),t+3}function z(e,t,r){return r=(1&r)<<(7&t),e[t>>>3]|=r,t+1}function F(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=r,t+8}function B(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=255&r,e[n+2]=r>>>8,t+16}function U(e,t){var r=e.length,n=2*r>t?2*r:t+5,i=0;if(r>=t)return e;if(p6){var s=m6(n);if(e.copy)e.copy(s);else for(;i<e.length;++i)s[i]=e[i];return s}if(R){var o=new Uint8Array(n);if(o.set)o.set(e);else for(;i<r;++i)o[i]=e[i];return o}return e.length=n,e}function W(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}function H(e,t,r){var n=1,i=0,s=0,o=0,a=0,l=e.length,c=R?new Uint16Array(32):W(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<r;++s)e[s]=0;l=e.length;var u=R?new Uint16Array(l):W(l);for(s=0;s<l;++s)c[i=e[s]]++,n<i&&(n=i),u[s]=0;for(c[0]=0,s=1;s<=n;++s)c[s+16]=a=a+c[s-1]<<1;for(s=0;s<l;++s)0!=(a=e[s])&&(u[s]=c[a+16]++);var d=0;for(s=0;s<l;++s)if(0!=(d=e[s]))for(a=_(u[s],n)>>n-d,o=(1<<n+4-d)-1;o>=0;--o)t[a|o<<d]=15&d|s<<4;return n}var $=R?new Uint16Array(512):W(512),V=R?new Uint16Array(32):W(32);if(!R){for(var q=0;q<512;++q)$[q]=0;for(q=0;q<32;++q)V[q]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);H(e,V,32);var r=[];for(t=0;t<=143;t++)r.push(8);for(;t<=255;t++)r.push(9);for(;t<=279;t++)r.push(7);for(;t<=287;t++)r.push(8);H(r,$,288)}();var G=function(){for(var e=R?new Uint8Array(32768):[],t=0,r=0;t<N.length-1;++t)for(;r<N[t+1];++r)e[r]=t;for(;r<32768;++r)e[r]=29;var n=R?new Uint8Array(259):[];for(t=0,r=0;t<T.length-1;++t)for(;r<T[t+1];++r)n[r]=t;return function(t,r){return t.length<8?function(e,t){for(var r=0;r<e.length;){var n=Math.min(65535,e.length-r),i=r+n==e.length;for(t.write_shift(1,+i),t.write_shift(2,n),t.write_shift(2,65535&~n);n-- >0;)t[t.l++]=e[r++]}return t.l}(t,r):function(t,r){for(var i=0,s=0,o=R?new Uint16Array(32768):[];s<t.length;){var a=Math.min(65535,t.length-s);if(a<10){for(7&(i=L(r,i,+!(s+a!=t.length)))&&(i+=8-(7&i)),r.l=i/8|0,r.write_shift(2,a),r.write_shift(2,65535&~a);a-- >0;)r[r.l++]=t[s++];i=8*r.l}else{i=L(r,i,+!(s+a!=t.length)+2);for(var l=0;a-- >0;){var c=t[s],u=-1,d=0;if((u=o[l=32767&(l<<5^c)])&&((u|=-32768&s)>s&&(u-=32768),u<s))for(;t[u+d]==t[s+d]&&d<250;)++d;if(d>2){(c=n[d])<=22?i=F(r,i,I[c+1]>>1)-1:(F(r,i,3),F(r,i+=5,I[c-23]>>5),i+=3);var p=c<8?0:c-4>>2;p>0&&(B(r,i,d-T[c]),i+=p),c=e[s-u],i=F(r,i,I[c]>>3),i-=3;var h=c<4?0:c-2>>1;h>0&&(B(r,i,s-u-N[c]),i+=h);for(var f=0;f<d;++f)o[l]=32767&s,l=32767&(l<<5^t[s]),++s;a-=d-1}else c<=143?c+=48:i=z(r,i,1),i=F(r,i,I[c]),o[l]=32767&s,++s}i=F(r,i,0)-1}}return r.l=(i+7)/8|0,r.l}(t,r)}}();function K(e){var t=l9(50+Math.floor(1.1*e.length)),r=G(e,t);return t.slice(0,r)}var J=R?new Uint16Array(32768):W(32768),Y=R?new Uint16Array(32768):W(32768),Z=R?new Uint16Array(128):W(128),Q=1,X=1;function ee(e,t){var r=O(e,t)+257,n=O(e,t+=5)+1,i=function(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=4?0:e[n+1]<<8))>>>r&15}(e,t+=5)+4;t+=4;for(var s=0,o=R?new Uint8Array(19):W(19),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=R?new Uint8Array(8):W(8),u=R?new Uint8Array(8):W(8),d=o.length,p=0;p<i;++p)o[E[p]]=s=j(e,t),l<s&&(l=s),c[s]++,t+=3;var h=0;for(c[0]=0,p=1;p<=l;++p)u[p]=h=h+c[p-1]<<1;for(p=0;p<d;++p)0!=(h=o[p])&&(a[p]=u[h]++);var f=0;for(p=0;p<d;++p)if(0!=(f=o[p])){h=I[a[p]]>>8-f;for(var m=(1<<7-f)-1;m>=0;--m)Z[h|m<<f]=7&f|p<<3}var v=[];for(l=1;v.length<r+n;)switch(t+=7&(h=Z[D(e,t)]),h>>>=3){case 16:for(s=3+A(e,t),t+=2,h=v[v.length-1];s-- >0;)v.push(h);break;case 17:for(s=3+j(e,t),t+=3;s-- >0;)v.push(0);break;case 18:for(s=11+D(e,t),t+=7;s-- >0;)v.push(0);break;default:v.push(h),l<h&&(l=h)}var g=v.slice(0,r),y=v.slice(r);for(p=r;p<286;++p)g[p]=0;for(p=n;p<30;++p)y[p]=0;return Q=H(g,J,286),X=H(y,Y,30),t}function te(e,t){var r=function(e,t){if(3==e[0]&&!(3&e[1]))return[f6(t),2];for(var r=0,n=0,i=m6(t||1<<18),s=0,o=i.length>>>0,a=0,l=0;!(1&n);)if(n=j(e,r),r+=3,n>>>1!=0)for(n>>1==1?(a=9,l=5):(r=ee(e,r),a=Q,l=X);;){!t&&o<s+32767&&(o=(i=U(i,s+32767)).length);var c=M(e,r,a),u=n>>>1==1?$[c]:J[c];if(r+=15&u,(u>>>=4)>>>8&255){if(256==u)break;var d=(u-=257)<8?0:u-4>>2;d>5&&(d=0);var p=s+T[u];d>0&&(p+=M(e,r,d),r+=d),c=M(e,r,l),r+=15&(u=n>>>1==1?V[c]:Y[c]);var h=(u>>>=4)<4?0:u-2>>1,f=N[u];for(h>0&&(f+=M(e,r,h),r+=h),!t&&o<p&&(o=(i=U(i,p+100)).length);s<p;)i[s]=i[s-f],++s}else i[s++]=u}else{7&r&&(r+=8-(7&r));var m=e[r>>>3]|e[(r>>>3)+1]<<8;if(r+=32,m>0)for(!t&&o<s+m&&(o=(i=U(i,s+m)).length);m-- >0;)i[s++]=e[r>>>3],r+=8}return t?[i,r+7>>>3]:[i.slice(0,s),r+7>>>3]}(e.slice(e.l||0),t);return e.l+=r[1],r[0]}function re(e,t){if(!e)throw new Error(t);"undefined"!=typeof console&&console.error(t)}function ne(e,t){var r=e;o9(r,0);var n={FileIndex:[],FullPaths:[]};p(n,{root:t.root});for(var i=r.length-4;(80!=r[i]||75!=r[i+1]||5!=r[i+2]||6!=r[i+3])&&i>=0;)--i;r.l=i+4,r.l+=4;var o=r.read_shift(2);r.l+=6;var a=r.read_shift(4);for(r.l=a,i=0;i<o;++i){r.l+=20;var l=r.read_shift(4),c=r.read_shift(4),u=r.read_shift(2),d=r.read_shift(2),h=r.read_shift(2);r.l+=8;var f=r.read_shift(4),m=s(r.slice(r.l+u,r.l+u+d));r.l+=u+d+h;var v=r.l;r.l=f+4,ie(r,l,c,n,m),r.l=v}return n}function ie(e,t,r,n,i){e.l+=2;var o=e.read_shift(2),a=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),r=65535&e.read_shift(2),n=new Date,i=31&r,s=15&(r>>>=5);r>>>=4,n.setMilliseconds(0),n.setFullYear(r+1980),n.setMonth(s-1),n.setDate(i);var o=31&t,a=63&(t>>>=5);return t>>>=6,n.setHours(t),n.setMinutes(a),n.setSeconds(o<<1),n}(e);if(8257&o)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),u=e.read_shift(4),d=e.read_shift(2),p=e.read_shift(2),h="",f=0;f<d;++f)h+=String.fromCharCode(e[e.l++]);if(p){var v=s(e.slice(e.l,e.l+p));(v[21589]||{}).mt&&(l=v[21589].mt),((i||{})[21589]||{}).mt&&(l=i[21589].mt)}e.l+=p;var g=e.slice(e.l,e.l+c);switch(a){case 8:g=function(e,t){if(!m)return te(e,t);var r=new(0,m.InflateRaw),n=r._processChunk(e.slice(e.l),r._finishFlushFlag);return e.l+=r.bytesRead,n}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+a)}var y=!1;8&o&&(134695760==e.read_shift(4)&&(e.read_shift(4),y=!0),c=e.read_shift(4),u=e.read_shift(4)),c!=t&&re(y,"Bad compressed size: "+t+" != "+c),u!=r&&re(y,"Bad uncompressed size: "+r+" != "+u),ue(n,h,g,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function oe(e,t){if(e.ctype)return e.ctype;var r=e.name||"",n=r.match(/\.([^\.]+)$/);return n&&se[n[1]]||t&&(n=(r=t).match(/[\.\\]([^\.\\])+$/))&&se[n[1]]?se[n[1]]:"application/octet-stream"}function ae(e){for(var t=u6(e),r=[],n=0;n<t.length;n+=76)r.push(t.slice(n,n+76));return r.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var r=[],n=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),i=0;i<n.length;++i){var s=n[i];if(0!=s.length)for(var o=0;o<s.length;){var a=76,l=s.slice(o,o+a);"="==l.charAt(a-1)?a--:"="==l.charAt(a-2)?a-=2:"="==l.charAt(a-3)&&(a-=3),l=s.slice(o,o+a),(o+=a)<s.length&&(l+="="),r.push(l)}else r.push("")}return r.join("\r\n")}function ce(e,t,r){for(var n,i="",s="",o="",a=0;a<10;++a){var l=t[a];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":i=c[2].trim();break;case"content-type":o=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++a,s.toLowerCase()){case"base64":n=v6(d6(t.slice(a).join("")));break;case"quoted-printable":n=function(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r];r<=e.length&&"="==n.charAt(n.length-1);)n=n.slice(0,n.length-1)+e[++r];t.push(n)}for(var i=0;i<t.length;++i)t[i]=t[i].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return v6(t.join("\r\n"))}(t.slice(a));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var u=ue(e,i.slice(r.length),n,{unsafe:!0});o&&(u.ctype=o)}function ue(e,t,r,i){var s=i&&i.unsafe;s||p(e);var o=!s&&m8.find(e,t);if(!o){var a=e.FullPaths[0];t.slice(0,a.length)==a?a=t:("/"!=a.slice(-1)&&(a+="/"),a=(a+t).replace("//","/")),o={name:n(t),type:2},e.FileIndex.push(o),e.FullPaths.push(a),s||m8.utils.cfb_gc(e)}return o.content=r,o.size=r?r.length:0,i&&(i.CLSID&&(o.clsid=i.CLSID),i.mt&&(o.mt=i.mt),i.ct&&(o.ct=i.ct)),o}return t.find=function(e,t){var r=e.FullPaths.map(function(e){return e.toUpperCase()}),n=r.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),i=!1;47===t.charCodeAt(0)?(i=!0,t=r[0].slice(0,-1)+t):i=-1!==t.indexOf("/");var s=t.toUpperCase(),o=!0===i?r.indexOf(s):n.indexOf(s);if(-1!==o)return e.FileIndex[o];var a=!s.match(w6);for(s=s.replace(x6,""),a&&(s=s.replace(w6,"!")),o=0;o<r.length;++o){if((a?r[o].replace(w6,"!"):r[o]).replace(x6,"")==s)return e.FileIndex[o];if((a?n[o].replace(w6,"!"):n[o]).replace(x6,"")==s)return e.FileIndex[o]}return null},t.read=function(t,r){var n=r&&r.type;switch(n||p6&&Buffer.isBuffer(t)&&(n="buffer"),n||"base64"){case"file":return function(t,r){return o(),a(e.readFileSync(t),r)}(t,r);case"base64":return a(v6(d6(t)),r);case"binary":return a(v6(t),r)}return a(t,r)},t.parse=a,t.write=function(t,r){var n=f(t,r);switch(r&&r.type||"buffer"){case"file":return o(),e.writeFileSync(r.filename,n),n;case"binary":return"string"==typeof n?n:S(n);case"base64":return u6("string"==typeof n?n:S(n));case"buffer":if(p6)return Buffer.isBuffer(n)?n:h6(n);case"array":return"string"==typeof n?v6(n):n}return n},t.writeFile=function(t,r,n){o();var i=f(t,n);e.writeFileSync(r,i)},t.utils={cfb_new:function(e){var t={};return p(t,e),t},cfb_add:ue,cfb_del:function(e,t){p(e);var r=m8.find(e,t);if(r)for(var n=0;n<e.FileIndex.length;++n)if(e.FileIndex[n]==r)return e.FileIndex.splice(n,1),e.FullPaths.splice(n,1),!0;return!1},cfb_mov:function(e,t,r){p(e);var i=m8.find(e,t);if(i)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==i)return e.FileIndex[s].name=n(r),e.FullPaths[s]=r,!0;return!1},cfb_gc:function(e){h(e,!0)},ReadShift:e9,CheckField:s9,prep_blob:o9,bconcat:b6,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(Nie){console.error("cannot use native zlib: "+(Nie.message||Nie))}},_deflateRaw:K,_inflateRaw:te,consts:w},t}();function v8(e){return"string"==typeof e?g6(e):Array.isArray(e)?function(e){if("undefined"==typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function g8(e,t,r){if("undefined"!=typeof Deno){if(r&&"string"==typeof t)switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=g6(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n="utf8"==r?X8(t):t;if("undefined"!=typeof IE_SaveFile)return IE_SaveFile(n,e);if("undefined"!=typeof Blob){var i=new Blob([v8(n)],{type:"application/octet-stream"});if("undefined"!=typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if("undefined"!=typeof saveAs)return saveAs(i,e);if("undefined"!=typeof URL&&"undefined"!=typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if("object"==typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!=typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(null!=o.download)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&"undefined"!=typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if("undefined"!=typeof $&&"undefined"!=typeof File&&"undefined"!=typeof Folder)try{var a=File(e);return a.open("w"),a.encoding="binary",Array.isArray(t)&&(t=y6(t)),a.write(t),a.close(),t}catch(Nie){if(!Nie.message||!Nie.message.match(/onstruct/))throw Nie}throw new Error("cannot save file "+e)}function y8(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function b8(e,t){for(var r=[],n=y8(e),i=0;i!==n.length;++i)null==r[e[n[i]][t]]&&(r[e[n[i]][t]]=n[i]);return r}function x8(e){for(var t=[],r=y8(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function w8(e){for(var t=[],r=y8(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}var S8=new Date(1899,11,30,0,0,0);function C8(e,t){return(e.getTime()-(S8.getTime()+6e4*(e.getTimezoneOffset()-S8.getTimezoneOffset())))/864e5}var E8=new Date,T8=S8.getTime()+6e4*(E8.getTimezoneOffset()-S8.getTimezoneOffset()),N8=E8.getTimezoneOffset();function P8(e){var t=new Date;return t.setTime(24*e*60*60*1e3+T8),t.getTimezoneOffset()!==N8&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-N8)),t}var R8=new Date("2017-02-19T19:06:09.000Z"),I8=isNaN(R8.getFullYear())?new Date("2/19/17"):R8,k8=2017==I8.getFullYear();function _8(e,t){var r=new Date(e);if(k8)return t>0?r.setTime(r.getTime()+60*r.getTimezoneOffset()*1e3):t<0&&r.setTime(r.getTime()-60*r.getTimezoneOffset()*1e3),r;if(e instanceof Date)return e;if(1917==I8.getFullYear()&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function A8(e,t){if(p6&&Buffer.isBuffer(e))return e.toString("binary");if("undefined"!=typeof TextDecoder)try{var r={"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(e){return r[e]||e})}catch(Nie){}for(var n=[],i=0;i!=e.length;++i)n.push(String.fromCharCode(e[i]));return n.join("")}function j8(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=j8(e[r]));return t}function O8(e,t){for(var r="";r.length<t;)r+=e;return r}function D8(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return isNaN(t=Number(n))?(n=n.replace(/[(](.*)[)]/,function(e,t){return r=-r,t}),isNaN(t=Number(n))?t:t/r):t/r}var M8=["january","february","march","april","may","june","july","august","september","october","november","december"];function L8(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),i=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==M8.indexOf(o))return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||s>1)&&101!=n?t:e.match(/[^-0-9:,\/\\]/)?r:t}function z8(e,t,r){if(e.FullPaths){var n;if("string"==typeof r)return n=p6?h6(r):function(e){for(var t=[],r=0,n=e.length+250,i=f6(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)i[r++]=o;else if(o<2048)i[r++]=192|o>>6&31,i[r++]=128|63&o;else if(o>=55296&&o<57344){o=64+(1023&o);var a=1023&e.charCodeAt(++s);i[r++]=240|o>>8&7,i[r++]=128|o>>2&63,i[r++]=128|a>>6&15|(3&o)<<4,i[r++]=128|63&a}else i[r++]=224|o>>12&15,i[r++]=128|o>>6&63,i[r++]=128|63&o;r>n&&(t.push(i.slice(0,r)),r=0,i=f6(65535),n=65530)}return t.push(i.slice(0,r)),b6(t)}(r),m8.utils.cfb_add(e,t,n);m8.utils.cfb_add(e,t,r)}else e.file(t,r)}function F8(){return m8.utils.cfb_new()}var B8='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',U8=x8({"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"}),W8=/[&<>'"]/g,H8=/[\u0000-\u0008\u000b-\u001f]/g;function $8(e){return(e+"").replace(W8,function(e){return U8[e]}).replace(H8,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function V8(e){return $8(e).replace(/ /g,"_x0020_")}var q8=/[\u0000-\u001f]/g;function G8(e){return(e+"").replace(W8,function(e){return U8[e]}).replace(/\n/g,"<br/>").replace(q8,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function K8(e){for(var t="",r=0,n=0,i=0,s=0,o=0,a=0;r<e.length;)(n=e.charCodeAt(r++))<128?t+=String.fromCharCode(n):(i=e.charCodeAt(r++),n>191&&n<224?(o=(31&n)<<6,o|=63&i,t+=String.fromCharCode(o)):(s=e.charCodeAt(r++),n<240?t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s):(a=((7&n)<<18|(63&i)<<12|(63&s)<<6|63&(o=e.charCodeAt(r++)))-65536,t+=String.fromCharCode(55296+(a>>>10&1023)),t+=String.fromCharCode(56320+(1023&a)))));return t}function J8(e){var t,r,n,i=f6(2*e.length),s=1,o=0,a=0;for(r=0;r<e.length;r+=s)s=1,(n=e.charCodeAt(r))<128?t=n:n<224?(t=64*(31&n)+(63&e.charCodeAt(r+1)),s=2):n<240?(t=4096*(15&n)+64*(63&e.charCodeAt(r+1))+(63&e.charCodeAt(r+2)),s=3):(s=4,t=262144*(7&n)+4096*(63&e.charCodeAt(r+1))+64*(63&e.charCodeAt(r+2))+(63&e.charCodeAt(r+3)),a=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==a&&(i[o++]=255&a,i[o++]=a>>>8,a=0),i[o++]=t%256,i[o++]=t>>>8;return i.slice(0,o).toString("ucs2")}function Y8(e){return h6(e,"binary").toString("utf8")}var Z8="foo bar baz",Q8=p6&&(Y8(Z8)==K8(Z8)&&Y8||J8(Z8)==K8(Z8)&&J8)||K8,X8=p6?function(e){return h6(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,i=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(63&n)));break;case n>=55296&&n<57344:n-=55296,i=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(63&i)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(63&n)))}return t.join("")},e7=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),n=0;n<e.length;++n)r=r.replace(e[n][0],e[n][1]);return r}}(),t7=/(^\s|\s$|\n)/;function r7(e,t){return"<"+e+(t.match(t7)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function n7(e){return y8(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function i7(e,t,r){return"<"+e+(null!=r?n7(r):"")+(null!=t?(t.match(t7)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function s7(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(Nie){if(t)throw Nie}return""}var o7="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",a7="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",l7="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",c7="http://schemas.openxmlformats.org/package/2006/content-types",u7="http://schemas.openxmlformats.org/package/2006/relationships",d7="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",p7="http://purl.org/dc/elements/1.1/",h7="http://purl.org/dc/terms/",f7="http://purl.org/dc/dcmitype/",m7="http://schemas.openxmlformats.org/officeDocument/2006/relationships",v7="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",g7="http://www.w3.org/2001/XMLSchema-instance",y7="http://www.w3.org/2001/XMLSchema",b7=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],x7="urn:schemas-microsoft-com:office:office",w7="urn:schemas-microsoft-com:office:excel",S7="urn:schemas-microsoft-com:office:spreadsheet",C7="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",E7="http://macVmlSchemaUri",T7="urn:schemas-microsoft-com:vml",N7="http://www.w3.org/TR/REC-html40";var P7=function(e){for(var t=[],r=0;r<e[0].length;++r)if(e[0][r])for(var n=0,i=e[0][r].length;n<i;n+=10240)t.push.apply(t,e[0][r].slice(n,n+10240));return t},R7=p6?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:h6(e)})):P7(e)}:P7,I7=function(e,t,r){for(var n=[],i=t;i<r;i+=2)n.push(String.fromCharCode(J7(e,i)));return n.join("").replace(x6,"")},k7=p6?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(x6,""):I7(e,t,r)}:I7,_7=function(e,t,r){for(var n=[],i=t;i<t+r;++i)n.push(("0"+e[i].toString(16)).slice(-2));return n.join("")},A7=p6?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):_7(e,t,r)}:_7,j7=function(e,t,r){for(var n=[],i=t;i<r;i++)n.push(String.fromCharCode(K7(e,i)));return n.join("")},O7=p6?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):j7(e,t,r)}:j7,D7=function(e,t){var r=Z7(e,t);return r>0?O7(e,t+4,t+4+r-1):""},M7=D7,L7=function(e,t){var r=Z7(e,t);return r>0?O7(e,t+4,t+4+r-1):""},z7=L7,F7=function(e,t){var r=2*Z7(e,t);return r>0?O7(e,t+4,t+4+r-1):""},B7=F7,U7=function(e,t){var r=Z7(e,t);return r>0?k7(e,t+4,t+4+r):""},W7=U7,H7=function(e,t){var r=Z7(e,t);return r>0?O7(e,t+4,t+4+r):""},$7=H7,V7=function(e,t){return function(e,t){for(var r=1-2*(e[t+7]>>>7),n=((127&e[t+7])<<4)+(e[t+6]>>>4&15),i=15&e[t+6],s=5;s>=0;--s)i=256*i+e[t+s];return 2047==n?0==i?r*(1/0):NaN:(0==n?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}(e,t)},q7=V7,G7=function(e){return Array.isArray(e)||"undefined"!=typeof Uint8Array&&e instanceof Uint8Array};p6&&(M7=function(e,t){if(!Buffer.isBuffer(e))return D7(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},z7=function(e,t){if(!Buffer.isBuffer(e))return L7(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},B7=function(e,t){if(!Buffer.isBuffer(e))return F7(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},W7=function(e,t){if(!Buffer.isBuffer(e))return U7(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},$7=function(e,t){if(!Buffer.isBuffer(e))return H7(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},q7=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):V7(e,t)},G7=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!=typeof Uint8Array&&e instanceof Uint8Array});var K7=function(e,t){return e[t]},J7=function(e,t){return 256*e[t+1]+e[t]},Y7=function(e,t){var r=256*e[t+1]+e[t];return r<32768?r:-1*(65535-r+1)},Z7=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Q7=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},X7=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function e9(e,t){var r,n,i,s,o,a,l="",c=[];switch(t){case"dbcs":if(a=this.l,p6&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(o=0;o<e;++o)l+=String.fromCharCode(J7(this,a)),a+=2;e*=2;break;case"utf8":l=O7(this,this.l,this.l+e);break;case"utf16le":e*=2,l=k7(this,this.l,this.l+e);break;case"wstr":return e9.call(this,e,"dbcs");case"lpstr-ansi":l=M7(this,this.l),e=4+Z7(this,this.l);break;case"lpstr-cp":l=z7(this,this.l),e=4+Z7(this,this.l);break;case"lpwstr":l=B7(this,this.l),e=4+2*Z7(this,this.l);break;case"lpp4":e=4+Z7(this,this.l),l=W7(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+Z7(this,this.l),l=$7(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(i=K7(this,this.l+e++));)c.push(a6(i));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(i=J7(this,this.l+e));)c.push(a6(i)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",a=this.l,o=0;o<e;++o){if(this.lens&&-1!==this.lens.indexOf(a))return i=K7(this,a),this.l=a+1,s=e9.call(this,e-o,i?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(a6(J7(this,a))),a+=2}l=c.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(l="",a=this.l,o=0;o!=e;++o){if(this.lens&&-1!==this.lens.indexOf(a))return i=K7(this,a),this.l=a+1,s=e9.call(this,e-o,i?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(a6(K7(this,a))),a+=1}l=c.join("");break;default:switch(e){case 1:return r=K7(this,this.l),this.l++,r;case 2:return r=("i"===t?Y7:J7)(this,this.l),this.l+=2,r;case 4:case-4:return"i"!==t&&128&this[this.l+3]?(n=Z7(this,this.l),this.l+=4,n):(r=(e>0?Q7:X7)(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return n=8==e?q7(this,this.l):q7([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:l=A7(this,this.l,e)}}return this.l+=e,l}var t9=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},r9=function(e,t,r){e[r]=255&t,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},n9=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255};function i9(e,t,r){var n=0,i=0;if("dbcs"===r){for(i=0;i!=t.length;++i)n9(this,t.charCodeAt(i),this.l+2*i);n=2*t.length}else if("sbcs"===r){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=255&t.charCodeAt(i);n=t.length}else{if("hex"===r){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===r){var s=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var o=t.charCodeAt(i);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}switch(e){case 1:n=1,this[this.l]=255&t;break;case 2:n=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:n=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:n=4,t9(this,t,this.l);break;case 8:if(n=8,"f"===r){!function(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,i=0,s=0,o=n?-t:t;isFinite(o)?0==o?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(t)?26985:0);for(var a=0;a<=5;++a,s/=256)e[r+a]=255&s;e[r+6]=(15&i)<<4|15&s,e[r+7]=i>>4|n}(this,t,this.l);break}case 16:break;case-4:n=4,r9(this,t,this.l)}}return this.l+=n,this}function s9(e,t){var r=A7(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function o9(e,t){e.l=t,e.read_shift=e9,e.chk=s9,e.write_shift=i9}function a9(e,t){e.l+=t}function l9(e){var t=f6(e);return o9(t,0),t}function c9(){var e=[],t=p6?256:2048,r=function(e){var t=l9(e);return o9(t,0),t},n=r(t),i=function(){n&&(n.length>n.l&&((n=n.slice(0,n.l)).l=n.length),n.length>0&&e.push(n),n=null)},s=function(e){return n&&e<n.length-n.l?n:(i(),n=r(Math.max(e+1,t)))};return{next:s,push:function(e){i(),null==(n=e).l&&(n.l=n.length),s(t)},end:function(){return i(),b6(e)},_bufs:e}}function u9(e,t,r,n){var i,s=+t;if(!isNaN(s)){n||(n=mne[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,128+(127&s)),o.write_shift(1,s>>7));for(var a=0;4!=a;++a){if(!(n>=128)){o.write_shift(1,n);break}o.write_shift(1,128+(127&n)),n>>=7}n>0&&G7(r)&&e.push(r)}}function d9(e,t,r){var n=j8(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function p9(e,t,r){var n=j8(e);return n.s=d9(n.s,t.s,r),n.e=d9(n.e,t.s,r),n}function h9(e,t){if(e.cRel&&e.c<0)for(e=j8(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=j8(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=x9(e);return e.cRel||null==e.cRel||(r=r.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(r=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(r)),r}function f9(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?h9(e.s,t.biff)+":"+h9(e.e,t.biff):(e.s.rRel?"":"$")+v9(e.s.r)+":"+(e.e.rRel?"":"$")+v9(e.e.r):(e.s.cRel?"":"$")+y9(e.s.c)+":"+(e.e.cRel?"":"$")+y9(e.e.c)}function m9(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function v9(e){return""+(e+1)}function g9(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function y9(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function b9(e){for(var t=0,r=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:t-1}}function x9(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function w9(e){var t=e.indexOf(":");return-1==t?{s:b9(e),e:b9(e)}:{s:b9(e.slice(0,t)),e:b9(e.slice(t+1))}}function S9(e,t){return void 0===t||"number"==typeof t?S9(e.s,e.e):("string"!=typeof e&&(e=x9(e)),"string"!=typeof t&&(t=x9(t)),e==t?e:e+":"+t)}function C9(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,s=e.length;for(r=0;n<s&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.s.c=--r,r=0;n<s&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(t.s.r=--r,n===s||10!=i)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.e.c=--r,r=0;n!=s&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return t.e.r=--r,t}function E9(e,t){var r="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=c8(e.z,r?C8(t):t)}catch(Nie){}try{return e.w=c8((e.XF||{}).numFmtId||(r?14:0),r?C8(t):t)}catch(Nie){return""+t}}function T9(e,t,r){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),"e"==e.t?oee[e.v]||e.v:E9(e,null==t?e.v:t))}function N9(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function P9(e,t,r){var n=r||{},i=e?Array.isArray(e):n.dense,s=e||(i?[]:{}),o=0,a=0;if(s&&null!=n.origin){if("number"==typeof n.origin)o=n.origin;else{var l="string"==typeof n.origin?b9(n.origin):n.origin;o=l.r,a=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=C9(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),-1==o&&(c.e.r=o=u.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[d].length;++p)if(void 0!==t[d][p]){var h={v:t[d][p]},f=o+d,m=a+p;if(c.s.r>f&&(c.s.r=f),c.s.c>m&&(c.s.c=m),c.e.r<f&&(c.e.r=f),c.e.c<m&&(c.e.c=m),!t[d][p]||"object"!=typeof t[d][p]||Array.isArray(t[d][p])||t[d][p]instanceof Date)if(Array.isArray(h.v)&&(h.f=t[d][p][1],h.v=h.v[0]),null===h.v)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else{if(!n.sheetStubs)continue;h.t="z"}else"number"==typeof h.v?h.t="n":"boolean"==typeof h.v?h.t="b":h.v instanceof Date?(h.z=n.dateNF||_6[14],n.cellDates?(h.t="d",h.w=c8(h.z,C8(h.v))):(h.t="n",h.v=C8(h.v),h.w=c8(h.z,h.v))):h.t="s";else h=t[d][p];if(i)s[f]||(s[f]=[]),s[f][m]&&s[f][m].z&&(h.z=s[f][m].z),s[f][m]=h;else{var v=x9({c:m,r:f});s[v]&&s[v].z&&(h.z=s[v].z),s[v]=h}}}return c.s.c<1e7&&(s["!ref"]=S9(c)),s}function R9(e,t){return P9(null,e,t)}function I9(e,t){return t||(t=l9(4)),t.write_shift(4,e),t}function k9(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function _9(e,t){var r=!1;return null==t&&(r=!0,t=l9(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function A9(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function j9(e,t){var r=e.l,n=e.read_shift(1),i=k9(e),s=[],o={t:i,h:i};if(1&n){for(var a=e.read_shift(4),l=0;l!=a;++l)s.push(A9(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}var O9=j9;function D9(e,t){var r=!1;return null==t&&(r=!0,t=l9(23+4*e.t.length)),t.write_shift(1,1),_9(e.t,t),t.write_shift(4,1),function(e,t){t||(t=l9(4)),t.write_shift(2,0),t.write_shift(2,0)}(0,t),r?t.slice(0,t.l):t}function M9(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function L9(e,t){return null==t&&(t=l9(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function z9(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function F9(e,t){return null==t&&(t=l9(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var B9=k9,U9=_9;function W9(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function H9(e,t){var r=!1;return null==t&&(r=!0,t=l9(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var $9=k9,V9=W9,q9=H9;function G9(e){var t=e.slice(e.l,e.l+4),r=1&t[0],n=2&t[0];e.l+=4;var i=0===n?q7([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):Q7(t,0)>>2;return r?i/100:i}function K9(e,t){null==t&&(t=l9(4));var r=0,n=0,i=100*e;if(e==(0|e)&&e>=-536870912&&e<1<<29?n=1:i==(0|i)&&i>=-536870912&&i<1<<29&&(n=1,r=1),!n)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((r?i:e)<<2)+(r+2))}function J9(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Y9=J9,Z9=function(e,t){return t||(t=l9(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function Q9(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function X9(e,t){return(t||l9(8)).write_shift(8,e,"f")}function eee(e,t){if(t||(t=l9(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),e.rgb&&null==e.theme){var n=e.rgb||"FFFFFF";"number"==typeof n&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var tee=80,ree={1:{n:"CodePage",t:2},2:{n:"Category",t:tee},3:{n:"PresentationFormat",t:tee},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:tee},15:{n:"Company",t:tee},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:tee},27:{n:"ContentStatus",t:tee},28:{n:"Language",t:tee},29:{n:"Version",t:tee},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},nee={1:{n:"CodePage",t:2},2:{n:"Title",t:tee},3:{n:"Subject",t:tee},4:{n:"Author",t:tee},5:{n:"Keywords",t:tee},6:{n:"Comments",t:tee},7:{n:"Template",t:tee},8:{n:"LastAuthor",t:tee},9:{n:"RevNumber",t:tee},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:tee},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function iee(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var see=j8(iee([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),oee={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},aee={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},lee={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function cee(e,t){var r,n=function(e){for(var t=[],r=y8(e),n=0;n!==r.length;++n)null==t[e[r[n]]]&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}(aee),i=[];i[i.length]=B8,i[i.length]=i7("Types",null,{xmlns:c7,"xmlns:xsd":y7,"xmlns:xsi":g7}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return i7("Default",null,{Extension:e[0],ContentType:e[1]})}));var s=function(n){e[n]&&e[n].length>0&&(r=e[n][0],i[i.length]=i7("Override",null,{PartName:("/"==r[0]?"":"/")+r,ContentType:lee[n][t.bookType]||lee[n].xlsx}))},o=function(r){(e[r]||[]).forEach(function(e){i[i.length]=i7("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:lee[r][t.bookType]||lee[r].xlsx})})},a=function(t){(e[t]||[]).forEach(function(e){i[i.length]=i7("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:n[t][0]})})};return s("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var uee={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function dee(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function pee(e){var t=[B8,i7("Relationships",null,{xmlns:u7})];return y8(e["!id"]).forEach(function(r){t[t.length]=i7("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function hee(e,t,r,n,i,s){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=n,i.Target=r,[uee.HLINK,uee.XPATH,uee.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function fee(e,t,r){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function mee(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function vee(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+e6.version+"</meta:generator></office:meta></office:document-meta>"}var gee=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function yee(e,t,r,n,i){null==i[e]&&null!=t&&""!==t&&(i[e]=t,t=$8(t),n[n.length]=r?i7(e,t,r):r7(e,t))}function bee(e,t){var r=t||{},n=[B8,i7("cp:coreProperties",null,{"xmlns:cp":o7,"xmlns:dc":p7,"xmlns:dcterms":h7,"xmlns:dcmitype":f7,"xmlns:xsi":g7})],i={};if(!e&&!r.Props)return n.join("");e&&(null!=e.CreatedDate&&yee("dcterms:created","string"==typeof e.CreatedDate?e.CreatedDate:s7(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),null!=e.ModifiedDate&&yee("dcterms:modified","string"==typeof e.ModifiedDate?e.ModifiedDate:s7(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=gee.length;++s){var o=gee[s],a=r.Props&&null!=r.Props[o[1]]?r.Props[o[1]]:e?e[o[1]]:null;!0===a?a="1":!1===a?a="0":"number"==typeof a&&(a=String(a)),null!=a&&yee(o[0],a,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var xee=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],wee=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function See(e){var t=[],r=i7;return e||(e={}),e.Application="SheetJS",t[t.length]=B8,t[t.length]=i7("Properties",null,{xmlns:l7,"xmlns:vt":v7}),xee.forEach(function(n){if(void 0!==e[n[1]]){var i;switch(n[2]){case"string":i=$8(String(e[n[1]]));break;case"bool":i=e[n[1]]?"true":"false"}void 0!==i&&(t[t.length]=r(n[0],i))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+$8(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function Cee(e){var t=[B8,i7("Properties",null,{xmlns:a7,"xmlns:vt":v7})];if(!e)return t.join("");var r=1;return y8(e).forEach(function(n){++r,t[t.length]=i7("property",function(e){switch(typeof e){case"string":var t=i7("vt:lpwstr",$8(e));return t.replace(/&quot;/g,"_x0022_");case"number":return i7((0|e)==e?"vt:i4":"vt:r8",$8(String(e)));case"boolean":return i7("vt:bool",e?"true":"false")}if(e instanceof Date)return i7("vt:filetime",s7(e));throw new Error("Unable to serialize "+e)}(e[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:$8(n)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Eee={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Tee(e,t){var r=l9(4),n=l9(4);switch(r.write_shift(4,80==e?31:e),e){case 3:n.write_shift(-4,t);break;case 5:(n=l9(8)).write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,r=t%Math.pow(2,32),n=(t-r)/Math.pow(2,32);n*=1e7;var i=(r*=1e7)/Math.pow(2,32)|0;i>0&&(r%=Math.pow(2,32),n+=i);var s=l9(8);return s.write_shift(4,r),s.write_shift(4,n),s}(t);break;case 31:case 80:for((n=l9(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return b6([r,n])}var Nee=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Pee(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function Ree(e,t,r){var n=l9(8),i=[],s=[],o=8,a=0,l=l9(8),c=l9(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),o+=8+l.length,!t){(c=l9(8)).write_shift(4,0),i.unshift(c);var u=[l9(4)];for(u[0].write_shift(4,e.length),a=0;a<e.length;++a){var d=e[a][0];for((l=l9(8+2*(d.length+1)+(d.length%2?0:2))).write_shift(4,a+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=b6(u),s.unshift(l),o+=8+l.length}for(a=0;a<e.length;++a)if((!t||t[e[a][0]])&&!(Nee.indexOf(e[a][0])>-1||wee.indexOf(e[a][0])>-1)&&null!=e[a][1]){var p=e[a][1],h=0;if(t){var f=r[h=+t[e[a][0]]];if("version"==f.p&&"string"==typeof p){var m=p.split(".");p=(+m[0]<<16)+(+m[1]||0)}l=Tee(f.t,p)}else{var v=Pee(p);-1==v&&(v=31,p=String(p)),l=Tee(v,p)}s.push(l),(c=l9(8)).write_shift(4,t?h:2+a),i.push(c),o+=8+l.length}var g=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,g),g+=s[a].length;return n.write_shift(4,o),n.write_shift(4,s.length),b6([n].concat(i).concat(s))}function Iee(e,t,r,n,i,s){var o=l9(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,m8.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,i?68:48);var l=Ree(e,r,n);if(a.push(l),i){var c=Ree(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),a.push(c)}return b6(a)}function kee(e,t){return t||(t=l9(2)),t.write_shift(2,+!!e),t}function _ee(e){return e.read_shift(2,"u")}function Aee(e,t){return t||(t=l9(2)),t.write_shift(2,e),t}function jee(e,t,r){return r||(r=l9(2)),r.write_shift(1,"e"==t?+e:+!!e),r.write_shift(1,"e"==t?1:0),r}function Oee(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";(r&&r.biff,r&&8!=r.biff)?12==r.biff&&(i="wstr"):e.read_shift(1)&&(i="dbcs-cont");return r.biff>=2&&r.biff<=5&&(i="cpstr"),n?e.read_shift(n,i):""}function Dee(e){var t=e.t||"",r=l9(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=l9(2*t.length);return n.write_shift(2*t.length,t,"utf16le"),b6([r,n])}function Mee(e,t,r){return r||(r=l9(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Lee(e,t){t||(t=l9(6+2*e.length)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function zee(e){var t=l9(512),r=0,n=e.Target;"file://"==n.slice(0,7)&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(28==s)Lee(n=n.slice(1),t);else if(2&s){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var a=i>-1?n.slice(0,i):n;for(t.write_shift(4,2*(a.length+1)),r=0;r<a.length;++r)t.write_shift(2,a.charCodeAt(r));t.write_shift(2,0),8&s&&Lee(i>-1?n.slice(i+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var l=0;"../"==n.slice(3*l,3*l+3)||"..\\"==n.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,255&n.charCodeAt(r+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Fee(e,t,r,n){return n||(n=l9(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Bee(e,t,r){var n=r.biff>8?4:2;return[e.read_shift(n),e.read_shift(n,"i"),e.read_shift(n,"i")]}function Uee(e){var t=e.read_shift(2),r=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:r}}}function Wee(e,t){return t||(t=l9(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Hee(e,t,r){var n=1536,i=16;switch(r.bookType){case"biff8":case"xla":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;default:throw new Error("unsupported BIFF version")}var s=l9(i);return s.write_shift(2,n),s.write_shift(2,t),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function $ee(e,t){var r=!t||t.biff>=8?2:1,n=l9(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function Vee(e,t,r,n){var i=r&&5==r.biff;n||(n=l9(i?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(i?1:2,t.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return null==s.l&&(s.l=s.length),s}function qee(e,t,r,n){var i=r&&5==r.biff;n||(n=l9(i?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function Gee(e){var t=l9(24),r=b9(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(n[i],16));return b6([t,zee(e[1])])}function Kee(e){var t=e[1].Tooltip,r=l9(10+2*(t.length+1));r.write_shift(2,2048);var n=b9(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<t.length;++i)r.write_shift(2,t.charCodeAt(i));return r.write_shift(2,0),r}var Jee=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=x8({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(t,r){var n=r||{};n.dateNF||(n.dateNF="yyyymmdd");var i=R9(function(t,r){var n=[],i=f6(1);switch(r.type){case"base64":i=v6(d6(t));break;case"binary":i=v6(t);break;case"buffer":case"array":i=t}o9(i,0);var s=i.read_shift(1),o=!!(136&s),a=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:a=!0,o=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,u=521;2==s&&(c=i.read_shift(2)),i.l+=3,2!=s&&(c=i.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(u=i.read_shift(2));var d=i.read_shift(2),p=r.codepage||1252;2!=s&&(i.l+=16,i.read_shift(1),0!==i[i.l]&&(p=e[i[i.l]]),i.l+=1,i.l+=2),l&&(i.l+=36);for(var h=[],f={},m=Math.min(i.length,2==s?521:u-10-(a?264:0)),v=l?32:11;i.l<m&&13!=i[i.l];)switch((f={}).name=o6.utils.decode(p,i.slice(i.l,i.l+v)).replace(/[\u0000\r\n].*$/g,""),i.l+=v,f.type=String.fromCharCode(i.read_shift(1)),2==s||l||(f.offset=i.read_shift(4)),f.len=i.read_shift(1),2==s&&(f.offset=i.read_shift(2)),f.dec=i.read_shift(1),f.name.length&&h.push(f),2!=s&&(i.l+=l?13:14),f.type){case"B":a&&8==f.len||!r.WTF||console.log("Skipping "+f.name+":"+f.type);break;case"G":case"P":r.WTF&&console.log("Skipping "+f.name+":"+f.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+f.type)}if(13!==i[i.l]&&(i.l=u-1),13!==i.read_shift(1))throw new Error("DBF Terminator not found "+i.l+" "+i[i.l]);i.l=u;var g=0,y=0;for(n[0]=[],y=0;y!=h.length;++y)n[0][y]=h[y].name;for(;c-- >0;)if(42!==i[i.l])for(++i.l,n[++g]=[],y=0,y=0;y!=h.length;++y){var b=i.slice(i.l,i.l+h[y].len);i.l+=h[y].len,o9(b,0);var x=o6.utils.decode(p,b);switch(h[y].type){case"C":x.trim().length&&(n[g][y]=x.replace(/\s+$/,""));break;case"D":8===x.length?n[g][y]=new Date(+x.slice(0,4),+x.slice(4,6)-1,+x.slice(6,8)):n[g][y]=x;break;case"F":n[g][y]=parseFloat(x.trim());break;case"+":case"I":n[g][y]=l?2147483648^b.read_shift(-4,"i"):b.read_shift(4,"i");break;case"L":switch(x.trim().toUpperCase()){case"Y":case"T":n[g][y]=!0;break;case"N":case"F":n[g][y]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+x+"|")}break;case"M":if(!o)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));n[g][y]="##MEMO##"+(l?parseInt(x.trim(),10):b.read_shift(4));break;case"N":(x=x.replace(/\u0000/g,"").trim())&&"."!=x&&(n[g][y]=+x||0);break;case"@":n[g][y]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":n[g][y]=new Date(864e5*(b.read_shift(4)-2440588)+b.read_shift(4));break;case"Y":n[g][y]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":n[g][y]=-b.read_shift(-8,"f");break;case"B":if(a&&8==h[y].len){n[g][y]=b.read_shift(8,"f");break}case"G":case"P":b.l+=h[y].len;break;case"0":if("_NullFlags"===h[y].name)break;default:throw new Error("DBF Unsupported data type "+h[y].type)}}else i.l+=d;if(2!=s&&i.l<i.length&&26!=i[i.l++])throw new Error("DBF EOF Marker missing "+(i.l-1)+" of "+i.length+" "+i[i.l-1].toString(16));return r&&r.sheetRows&&(n=n.slice(0,r.sheetRows)),r.DBF=h,n}(t,n),n);return i["!cols"]=n.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete n.DBF,i}var n={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return N9(r(e,t),t)}catch(Nie){if(t&&t.WTF)throw Nie}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function(e,r){var i=r||{};if(+i.codepage>=0&&i6(+i.codepage),"string"==i.type)throw new Error("Cannot write DBF to JS string");var s=c9(),o=sie(e,{header:1,raw:!0,cellDates:!0}),a=o[0],l=o.slice(1),c=e["!cols"]||[],u=0,d=0,p=0,h=1;for(u=0;u<a.length;++u)if(((c[u]||{}).DBF||{}).name)a[u]=c[u].DBF.name,++p;else if(null!=a[u]){if(++p,"number"==typeof a[u]&&(a[u]=a[u].toString(10)),"string"!=typeof a[u])throw new Error("DBF Invalid column name "+a[u]+" |"+typeof a[u]+"|");if(a.indexOf(a[u])!==u)for(d=0;d<1024;++d)if(-1==a.indexOf(a[u]+"_"+d)){a[u]+="_"+d;break}}var f=C9(e["!ref"]),m=[],v=[],g=[];for(u=0;u<=f.e.c-f.s.c;++u){var y="",b="",x=0,w=[];for(d=0;d<l.length;++d)null!=l[d][u]&&w.push(l[d][u]);if(0!=w.length&&null!=a[u]){for(d=0;d<w.length;++d){switch(typeof w[d]){case"number":b="B";break;case"string":default:b="C";break;case"boolean":b="L";break;case"object":b=w[d]instanceof Date?"D":"C"}x=Math.max(x,String(w[d]).length),y=y&&y!=b?"C":b}x>250&&(x=250),"C"==(b=((c[u]||{}).DBF||{}).type)&&c[u].DBF.len>x&&(x=c[u].DBF.len),"B"==y&&"N"==b&&(y="N",g[u]=c[u].DBF.dec,x=c[u].DBF.len),v[u]="C"==y||"N"==b?x:n[y]||0,h+=v[u],m[u]=y}else m[u]="?"}var S=s.next(32);for(S.write_shift(4,318902576),S.write_shift(4,l.length),S.write_shift(2,296+32*p),S.write_shift(2,h),u=0;u<4;++u)S.write_shift(4,0);for(S.write_shift(4,(+t[t6]||3)<<8),u=0,d=0;u<a.length;++u)if(null!=a[u]){var C=s.next(32),E=(a[u].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);C.write_shift(1,E,"sbcs"),C.write_shift(1,"?"==m[u]?"C":m[u],"sbcs"),C.write_shift(4,d),C.write_shift(1,v[u]||n[m[u]]||0),C.write_shift(1,g[u]||0),C.write_shift(1,2),C.write_shift(4,0),C.write_shift(1,0),C.write_shift(4,0),C.write_shift(4,0),d+=v[u]||n[m[u]]||0}var T=s.next(264);for(T.write_shift(4,13),u=0;u<65;++u)T.write_shift(4,0);for(u=0;u<l.length;++u){var N=s.next(h);for(N.write_shift(1,0),d=0;d<a.length;++d)if(null!=a[d])switch(m[d]){case"L":N.write_shift(1,null==l[u][d]?63:l[u][d]?84:70);break;case"B":N.write_shift(8,l[u][d]||0,"f");break;case"N":var P="0";for("number"==typeof l[u][d]&&(P=l[u][d].toFixed(g[d]||0)),p=0;p<v[d]-P.length;++p)N.write_shift(1,32);N.write_shift(1,P,"sbcs");break;case"D":l[u][d]?(N.write_shift(4,("0000"+l[u][d].getFullYear()).slice(-4),"sbcs"),N.write_shift(2,("00"+(l[u][d].getMonth()+1)).slice(-2),"sbcs"),N.write_shift(2,("00"+l[u][d].getDate()).slice(-2),"sbcs")):N.write_shift(8,"00000000","sbcs");break;case"C":var R=String(null!=l[u][d]?l[u][d]:"").slice(0,v[d]);for(N.write_shift(1,R,"sbcs"),p=0;p<v[d]-R.length;++p)N.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),Yee=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("N("+y8(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(t,r){var n=e[r];return"number"==typeof n?l6(n):n},n=function(e,t,r){var n=t.charCodeAt(0)-32<<4|r.charCodeAt(0)-48;return 59==n?e:l6(n)};function i(e,i){var s,o=e.split(/[\n\r]+/),a=-1,l=-1,c=0,u=0,d=[],p=[],h=null,f={},m=[],v=[],g=[],y=0;for(+i.codepage>=0&&i6(+i.codepage);c!==o.length;++c){y=0;var b,x=o[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),w=x.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),S=w[0];if(x.length>0)switch(S){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==w[1].charAt(0)&&p.push(x.slice(3).replace(/;;/g,";"));break;case"C":var C=!1,E=!1,T=!1,N=!1,P=-1,R=-1;for(u=1;u<w.length;++u)switch(w[u].charAt(0)){case"A":case"G":break;case"X":l=parseInt(w[u].slice(1))-1,E=!0;break;case"Y":for(a=parseInt(w[u].slice(1))-1,E||(l=0),s=d.length;s<=a;++s)d[s]=[];break;case"K":'"'===(b=w[u].slice(1)).charAt(0)?b=b.slice(1,b.length-1):"TRUE"===b?b=!0:"FALSE"===b?b=!1:isNaN(D8(b))?isNaN(L8(b).getDate())||(b=_8(b)):(b=D8(b),null!==h&&s8(h)&&(b=P8(b))),C=!0;break;case"E":N=!0;var I=Bte(w[u].slice(1),{r:a,c:l});d[a][l]=[d[a][l],I];break;case"S":T=!0,d[a][l]=[d[a][l],"S5S"];break;case"R":P=parseInt(w[u].slice(1))-1;break;case"C":R=parseInt(w[u].slice(1))-1;break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}if(C&&(d[a][l]&&2==d[a][l].length?d[a][l][0]=b:d[a][l]=b,h=null),T){if(N)throw new Error("SYLK shared formula cannot have own formula");var k=P>-1&&d[P][R];if(!k||!k[1])throw new Error("SYLK shared formula cannot find base");d[a][l][1]=Hte(k[1],{r:a-P,c:l-R})}break;case"F":var _=0;for(u=1;u<w.length;++u)switch(w[u].charAt(0)){case"X":l=parseInt(w[u].slice(1))-1,++_;break;case"Y":for(a=parseInt(w[u].slice(1))-1,s=d.length;s<=a;++s)d[s]=[];break;case"M":y=parseInt(w[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":h=p[parseInt(w[u].slice(1))];break;case"W":for(g=w[u].slice(1).split(" "),s=parseInt(g[0],10);s<=parseInt(g[1],10);++s)y=parseInt(g[2],10),v[s-1]=0===y?{hidden:!0}:{wch:y},pte(v[s-1]);break;case"C":v[l=parseInt(w[u].slice(1))-1]||(v[l]={});break;case"R":m[a=parseInt(w[u].slice(1))-1]||(m[a]={}),y>0?(m[a].hpt=y,m[a].hpx=mte(y)):0===y&&(m[a].hidden=!0);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}_<1&&(h=null);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}}return m.length>0&&(f["!rows"]=m),v.length>0&&(f["!cols"]=v),i&&i.sheetRows&&(d=d.slice(0,i.sheetRows)),[d,f]}function s(e,t){var r=function(e,t){switch(t.type){case"base64":return i(d6(e),t);case"binary":return i(e,t);case"buffer":return i(p6&&Buffer.isBuffer(e)?e.toString("binary"):y6(e),t);case"array":return i(A8(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),n=r[0],s=r[1],o=R9(n,t);return y8(s).forEach(function(e){o[e]=s[e]}),o}function o(e,t,r,n){var i="C;Y"+(r+1)+";X"+(n+1)+";K";switch(e.t){case"n":i+=e.v||0,e.f&&!e.F&&(i+=";E"+Wte(e.f,{r:r,c:n}));break;case"b":i+=e.v?"TRUE":"FALSE";break;case"e":i+=e.w||e.v;break;case"d":i+='"'+(e.w||e.v)+'"';break;case"s":i+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return i}return e["|"]=254,{to_workbook:function(e,t){return N9(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var r,n,i=["ID;PWXL;N;E"],s=[],a=C9(e["!ref"]),l=Array.isArray(e),c="\r\n";i.push("P;PGeneral"),i.push("F;P0;DG0G8;M255"),e["!cols"]&&(n=i,e["!cols"].forEach(function(e,t){var r="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?r+="0":("number"!=typeof e.width||e.wpx||(e.wpx=cte(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=ute(e.wpx)),"number"==typeof e.wch&&(r+=Math.round(e.wch)))," "!=r.charAt(r.length-1)&&n.push(r)})),e["!rows"]&&function(e,t){t.forEach(function(t,r){var n="F;";t.hidden?n+="M0;":t.hpt?n+="M"+20*t.hpt+";":t.hpx&&(n+="M"+20*fte(t.hpx)+";"),n.length>2&&e.push(n+"R"+(r+1))})}(i,e["!rows"]),i.push("B;Y"+(a.e.r-a.s.r+1)+";X"+(a.e.c-a.s.c+1)+";D"+[a.s.c,a.s.r,a.e.c,a.e.r].join(" "));for(var u=a.s.r;u<=a.e.r;++u)for(var d=a.s.c;d<=a.e.c;++d){var p=x9({r:u,c:d});(r=l?(e[u]||[])[d]:e[p])&&(null!=r.v||r.f&&!r.F)&&s.push(o(r,0,u,d))}return i.join(c)+c+s.join(c)+c+"E"+c}}}(),Zee=function(){function e(e,t){for(var r=e.split("\n"),n=-1,i=-1,s=0,o=[];s!==r.length;++s)if("BOT"!==r[s].trim()){if(!(n<0)){for(var a=r[s].trim().split(","),l=a[0],c=a[1],u=r[++s]||"";1&(u.match(/["]/g)||[]).length&&s<r.length-1;)u+="\n"+r[++s];switch(u=u.trim(),+l){case-1:if("BOT"===u){o[++n]=[],i=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?o[n][i]=!0:"FALSE"===u?o[n][i]=!1:isNaN(D8(c))?isNaN(L8(c).getDate())?o[n][i]=c:o[n][i]=_8(c):o[n][i]=D8(c),++i;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),o[n][i++]=""!==u?u:null}if("EOD"===u)break}}else o[++n]=[],i=0;return t&&t.sheetRows&&(o=o.slice(0,t.sheetRows)),o}function t(t,r){return R9(function(t,r){switch(r.type){case"base64":return e(d6(t),r);case"binary":return e(t,r);case"buffer":return e(p6&&Buffer.isBuffer(t)?t.toString("binary"):y6(t),r);case"array":return e(A8(t),r)}throw new Error("Unrecognized type "+r.type)}(t,r),r)}return{to_workbook:function(e,r){return N9(t(e,r),r)},to_sheet:t,from_sheet:function(){var e=function(e,t,r,n,i){e.push(t),e.push(r+","+n),e.push('"'+i.replace(/"/g,'""')+'"')},t=function(e,t,r,n){e.push(t+","+r),e.push(1==t?'"'+n.replace(/"/g,'""')+'"':n)};return function(r){var n,i=[],s=C9(r["!ref"]),o=Array.isArray(r);e(i,"TABLE",0,1,"sheetjs"),e(i,"VECTORS",0,s.e.r-s.s.r+1,""),e(i,"TUPLES",0,s.e.c-s.s.c+1,""),e(i,"DATA",0,0,"");for(var a=s.s.r;a<=s.e.r;++a){t(i,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=x9({r:a,c:l});if(n=o?(r[a]||[])[l]:r[c])switch(n.t){case"n":var u=n.w;u||null==n.v||(u=n.v),null==u?n.f&&!n.F?t(i,1,0,"="+n.f):t(i,1,0,""):t(i,0,u,"V");break;case"b":t(i,0,n.v?1:0,n.v?"TRUE":"FALSE");break;case"s":t(i,1,0,isNaN(n.v)?n.v:'="'+n.v+'"');break;case"d":n.w||(n.w=c8(n.z||_6[14],C8(_8(n.v)))),t(i,0,n.w,"V");break;default:t(i,1,0,"")}else t(i,1,0,"")}}t(i,-1,0,"EOD");return i.join("\r\n")}}()}}(),Qee=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(t,r){return R9(function(t,r){for(var n=t.split("\n"),i=-1,s=-1,o=0,a=[];o!==n.length;++o){var l=n[o].trim().split(":");if("cell"===l[0]){var c=b9(l[1]);if(a.length<=c.r)for(i=a.length;i<=c.r;++i)a[i]||(a[i]=[]);switch(i=c.r,s=c.c,l[2]){case"t":a[i][s]=e(l[3]);break;case"v":a[i][s]=+l[3];break;case"vtf":var u=l[l.length-1];case"vtc":"nl"===l[3]?a[i][s]=!!+l[4]:a[i][s]=+l[4],"vtf"==l[2]&&(a[i][s]=[a[i][s],u])}}}return r&&r.sheetRows&&(a=a.slice(0,r.sheetRows)),a}(t,r),r)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),o="--SocialCalcSpreadsheetControlSave--";function a(e){if(!e||!e["!ref"])return"";for(var r,n=[],i=[],s="",o=w9(e["!ref"]),a=Array.isArray(e),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c)if(s=x9({r:l,c:c}),(r=a?(e[l]||[])[c]:e[s])&&null!=r.v&&"z"!==r.t){switch(i=["cell",s,"t"],r.t){case"s":case"str":i.push(t(r.v));break;case"n":r.f?(i[2]="vtf",i[3]="n",i[4]=r.v,i[5]=t(r.f)):(i[2]="v",i[3]=r.v);break;case"b":i[2]="vt"+(r.f?"f":"c"),i[3]="nl",i[4]=r.v?"1":"0",i[5]=t(r.f||(r.v?"TRUE":"FALSE"));break;case"d":var u=C8(_8(r.v));i[2]="vtc",i[3]="nd",i[4]=""+u,i[5]=r.w||c8(r.z||_6[14],u);break;case"e":continue}n.push(i.join(":"))}return n.push("sheet:c:"+(o.e.c-o.s.c+1)+":r:"+(o.e.r-o.s.r+1)+":tvf:1"),n.push("valueformat:1:text-wiki"),n.join("\n")}return{to_workbook:function(e,t){return N9(r(e,t),t)},to_sheet:r,from_sheet:function(e){return[n,i,s,i,a(e),o].join("\n")}}}(),Xee=function(){function e(e,t,r,n,i){i.raw?t[r][n]=e:""===e||("TRUE"===e?t[r][n]=!0:"FALSE"===e?t[r][n]=!1:isNaN(D8(e))?isNaN(L8(e).getDate())?t[r][n]=e:t[r][n]=_8(e):t[r][n]=D8(e))}var t={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(e){for(var n={},i=!1,s=0,o=0;s<e.length;++s)34==(o=e.charCodeAt(s))?i=!i:!i&&o in t&&(n[o]=(n[o]||0)+1);for(s in o=[],n)Object.prototype.hasOwnProperty.call(n,s)&&o.push([n[s],s]);if(!o.length)for(s in n=r)Object.prototype.hasOwnProperty.call(n,s)&&o.push([n[s],s]);return o.sort(function(e,t){return e[0]-t[0]||r[e[1]]-r[t[1]]}),t[o.pop()[1]]||44}function i(e,t){var r=t||{},i="",s=r.dense?[]:{},o={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(i=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(i=e.charAt(4),e=e.slice(6)):i=n(e.slice(0,1024)):i=r&&r.FS?r.FS:n(e.slice(0,1024));var a=0,l=0,c=0,u=0,d=0,p=i.charCodeAt(0),h=!1,f=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var v,g,y=null!=r.dateNF?(v=r.dateNF,g=(g="number"==typeof v?_6[v]:v).replace(h8,"(\\d+)"),new RegExp("^"+g+"$")):null;function b(){var t=e.slice(u,d),n={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)n.t="z";else if(r.raw)n.t="s",n.v=t;else if(0===t.trim().length)n.t="s",n.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(n.t="s",n.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(n.t="n",n.f=t.slice(1)):(n.t="s",n.v=t);else if("TRUE"==t)n.t="b",n.v=!0;else if("FALSE"==t)n.t="b",n.v=!1;else if(isNaN(c=D8(t)))if(!isNaN(L8(t).getDate())||y&&t.match(y)){n.z=r.dateNF||_6[14];var i=0;y&&t.match(y)&&(t=function(e,t,r){var n=-1,i=-1,s=-1,o=-1,a=-1,l=-1;(t.match(h8)||[]).forEach(function(e,t){var c=parseInt(r[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":n=c;break;case"d":s=c;break;case"h":o=c;break;case"s":l=c;break;case"m":o>=0?a=c:i=c}}),l>=0&&-1==a&&i>=0&&(a=i,i=-1);var c=(""+(n>=0?n:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==o&&-1==a&&-1==l?c:-1==n&&-1==i&&-1==s?u:c+"T"+u}(0,r.dateNF,t.match(y)||[]),i=1),r.cellDates?(n.t="d",n.v=_8(t,i)):(n.t="n",n.v=C8(_8(t,i))),!1!==r.cellText&&(n.w=c8(n.z,n.v instanceof Date?C8(n.v):n.v)),r.cellNF||delete n.z}else n.t="s",n.v=t;else n.t="n",!1!==r.cellText&&(n.w=t),n.v=c;if("z"==n.t||(r.dense?(s[a]||(s[a]=[]),s[a][l]=n):s[x9({c:l,r:a})]=n),u=d+1,m=e.charCodeAt(u),o.e.c<l&&(o.e.c=l),o.e.r<a&&(o.e.r=a),f==p)++l;else if(l=0,++a,r.sheetRows&&r.sheetRows<=a)return!0}e:for(;d<e.length;++d)switch(f=e.charCodeAt(d)){case 34:34===m&&(h=!h);break;case p:case 10:case 13:if(!h&&b())break e}return d-u>0&&b(),s["!ref"]=S9(o),s}function s(t,r){return r&&r.PRN?r.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?i(t,r):R9(function(t,r){var n=r||{},i=[];if(!t||0===t.length)return i;for(var s=t.split(/[\r\n]/),o=s.length-1;o>=0&&0===s[o].length;)--o;for(var a=10,l=0,c=0;c<=o;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,a=Math.max(a,l);for(c=0;c<=o;++c){i[c]=[];var u=0;for(e(s[c].slice(0,a).trim(),i,c,u,n),u=1;u<=(s[c].length-a)/10+1;++u)e(s[c].slice(a+10*(u-1),a+10*u).trim(),i,c,u,n)}return n.sheetRows&&(i=i.slice(0,n.sheetRows)),i}(t,r),r):i(t,r)}function o(e,t){var r="",n="string"==t.type?[0,0,0,0]:function(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=d6(e.slice(0,12));break;case"binary":r=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}(e,t);switch(t.type){case"base64":r=d6(e);break;case"binary":case"string":r=e;break;case"buffer":65001==t.codepage?r=e.toString("utf8"):(t.codepage,r=p6&&Buffer.isBuffer(e)?e.toString("binary"):y6(e));break;case"array":r=A8(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]?r=Q8(r.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?r=Q8(r):t.type,"socialcalc:version:"==r.slice(0,19)?Qee.to_sheet("string"==t.type?r:Q8(r),t):s(r,t)}return{to_workbook:function(e,t){return N9(o(e,t),t)},to_sheet:o,from_sheet:function(e){for(var t,r=[],n=C9(e["!ref"]),i=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){for(var o=[],a=n.s.c;a<=n.e.c;++a){var l=x9({r:s,c:a});if((t=i?(e[s]||[])[a]:e[l])&&null!=t.v){for(var c=(t.w||(T9(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";o.push(c+(0===a?" ":""))}else o.push("          ")}r.push(o.join(""))}return r.join("\n")}}}(),ete=function(){function e(e,t,r){if(e){o9(e,e.l||0);for(var n=r.Enum||g;e.l<e.length;){var i=e.read_shift(2),s=n[i]||n[65535],o=e.read_shift(2),a=e.l+o,l=s.f&&s.f(e,o,r);if(e.l=a,t(l,s,i))return}}}function t(t,r){if(!t)return t;var n=r||{},i=n.dense?[]:{},s="Sheet1",o="",a=0,l={},c=[],u=[],d={s:{r:0,c:0},e:{r:0,c:0}},p=n.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])n.Enum=g,e(t,function(e,t,r){switch(r){case 0:n.vers=e,e>=4096&&(n.qpro=!0);break;case 6:d=e;break;case 204:e&&(o=e);break;case 222:o=e;break;case 15:case 51:n.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==r&&!(112&~e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=n.dateNF||_6[14],n.cellDates&&(e[1].t="d",e[1].v=P8(e[1].v))),n.qpro&&e[3]>a&&(i["!ref"]=S9(d),l[s]=i,c.push(s),i=n.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},a=e[3],s=o||"Sheet"+(a+1),o="");var u=n.dense?(i[e[0].r]||[])[e[0].c]:i[x9(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}n.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[x9(e[0])]=e[1]}},n);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);n.Enum=y,14==t[2]&&(n.qpro=!0,t.l=0),e(t,function(e,t,r){switch(r){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>a&&(i["!ref"]=S9(d),l[s]=i,c.push(s),i=n.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},a=e[3],s="Sheet"+(a+1)),p>0&&e[0].r>=p)break;n.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[x9(e[0])]=e[1],d.e.c<e[0].c&&(d.e.c=e[0].c),d.e.r<e[0].r&&(d.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==a&&(s=e[1])}},n)}if(i["!ref"]=S9(d),l[o||s]=i,c.push(o||s),!u.length)return{SheetNames:c,Sheets:l};for(var h={},f=[],m=0;m<u.length;++m)l[c[m]]?(f.push(u[m]||c[m]),h[u[m]]=l[u[m]]||l[c[m]]):(f.push(u[m]),h[u[m]]={"!ref":"A1"});return{SheetNames:f,Sheets:h}}function r(e,t,r){var n=[{c:0,r:0},{t:"n",v:0},0,0];return r.qpro&&20768!=r.vers?(n[0].c=e.read_shift(1),n[3]=e.read_shift(1),n[0].r=e.read_shift(2),e.l+=2):(n[2]=e.read_shift(1),n[0].c=e.read_shift(2),n[0].r=e.read_shift(2)),n}function n(e,t,n){var i=e.l+t,s=r(e,0,n);if(s[1].t="s",20768==n.vers){e.l++;var o=e.read_shift(1);return s[1].v=e.read_shift(o,"utf8"),s}return n.qpro&&e.l++,s[1].v=e.read_shift(i-e.l,"cstr"),s}function i(e,t,r){var n=l9(7+r.length);n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(1,39);for(var i=0;i<n.length;++i){var s=r.charCodeAt(i);n.write_shift(1,s>=128?95:s)}return n.write_shift(1,0),n}function s(e,t,r){var n=l9(7);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r,"i"),n}function o(e,t,r){var n=l9(13);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(8,r,"f"),n}function a(e,t,r){var n=32768&t;return t=(n?e:0)+((t&=-32769)>=8192?t-16384:t),(n?"":"$")+(r?y9(t):v9(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function d(e,t,r,n){var i=l9(6+n.length);i.write_shift(2,e),i.write_shift(1,r),i.write_shift(1,t),i.write_shift(1,39);for(var s=0;s<n.length;++s){var o=n.charCodeAt(s);i.write_shift(1,o>=128?95:o)}return i.write_shift(1,0),i}function p(e,t){var r=u(e),n=e.read_shift(4),i=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===n&&3221225472===i?(r[1].t="e",r[1].v=15):0===n&&3489660928===i?(r[1].t="e",r[1].v=42):r[1].v=0,r;var o=32768&s;return s=(32767&s)-16446,r[1].v=(1-2*o)*(i*Math.pow(2,s+32)+n*Math.pow(2,s)),r}function h(e,t,r,n){var i=l9(14);if(i.write_shift(2,e),i.write_shift(1,r),i.write_shift(1,t),0==n)return i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,65535),i;var s,o=0,a=0,l=0;return n<0&&(o=1,n=-n),a=0|Math.log2(n),2147483648&(l=(n/=Math.pow(2,a-31))>>>0)||(++a,l=(n/=2)>>>0),n-=l,l|=2147483648,l>>>=0,s=(n*=Math.pow(2,32))>>>0,i.write_shift(4,s),i.write_shift(4,l),a+=16383+(o?32768:0),i.write_shift(2,a),i}function f(e,t){var r=u(e),n=e.read_shift(8,"f");return r[1].v=n,r}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function v(e,t){var r=l9(5+e.length);r.write_shift(2,14e3),r.write_shift(2,t);for(var n=0;n<e.length;++n){var i=e.charCodeAt(n);r[r.l++]=i>127?95:i}return r[r.l++]=0,r}var g={0:{n:"BOF",f:_ee},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,r){var n={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&r.qpro?(n.s.c=e.read_shift(1),e.l++,n.s.r=e.read_shift(2),n.e.c=e.read_shift(1),e.l++,n.e.r=e.read_shift(2),n):(n.s.c=e.read_shift(2),n.s.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),n.e.c=e.read_shift(2),n.e.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),65535==n.s.c&&(n.s.c=n.e.c=n.s.r=n.e.r=0),n)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,n){var i=r(e,0,n);return i[1].v=e.read_shift(2,"i"),i}},14:{n:"NUMBER",f:function(e,t,n){var i=r(e,0,n);return i[1].v=e.read_shift(8,"f"),i}},15:{n:"LABEL",f:n},16:{n:"FORMULA",f:function(e,t,n){var i=e.l+t,s=r(e,0,n);if(s[1].v=e.read_shift(8,"f"),n.qpro)e.l=i;else{var o=e.read_shift(2);!function(e,t){o9(e,0);var r=[],n=0,i="",s="",o="",u="";for(;e.l<e.length;){var d=e[e.l++];switch(d){case 0:r.push(e.read_shift(8,"f"));break;case 1:s=a(t[0].c,e.read_shift(2),!0),i=a(t[0].r,e.read_shift(2),!1),r.push(s+i);break;case 2:var p=a(t[0].c,e.read_shift(2),!0),h=a(t[0].r,e.read_shift(2),!1);s=a(t[0].c,e.read_shift(2),!0),i=a(t[0].r,e.read_shift(2),!1),r.push(p+h+":"+s+i);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:r.push("("+r.pop()+")");break;case 5:r.push(e.read_shift(2));break;case 6:for(var f="";d=e[e.l++];)f+=String.fromCharCode(d);r.push('"'+f.replace(/"/g,'""')+'"');break;case 8:r.push("-"+r.pop());break;case 23:r.push("+"+r.pop());break;case 22:r.push("NOT("+r.pop()+")");break;case 20:case 21:u=r.pop(),o=r.pop(),r.push(["AND","OR"][d-20]+"("+o+","+u+")");break;default:if(d<32&&c[d])u=r.pop(),o=r.pop(),r.push(o+c[d]+u);else{if(!l[d])return d<=7?console.error("WK1 invalid opcode "+d.toString(16)):d<=24?console.error("WK1 unsupported op "+d.toString(16)):d<=30?console.error("WK1 invalid opcode "+d.toString(16)):d<=115?console.error("WK1 unsupported function opcode "+d.toString(16)):console.error("WK1 unrecognized opcode "+d.toString(16));if(69==(n=l[d][1])&&(n=e[e.l++]),n>r.length)return void console.error("WK1 bad formula parse 0x"+d.toString(16)+":|"+r.join("|")+"|");var m=r.slice(-n);r.length-=n,r.push(l[d][0]+"("+m.join(",")+")")}}}1==r.length?t[1].f=""+r[0]:console.error("WK1 bad formula parse |"+r.join("|")+"|")}(e.slice(e.l,e.l+o),s),e.l+=o}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:n},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var r=e[e.l++];r>t-1&&(r=t-1);for(var n="";n.length<r;)n+=String.fromCharCode(e[e.l++]);return n}},65535:{n:""}},y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var r=u(e);return r[1].t="s",r[1].v=e.read_shift(t-4,"cstr"),r}},23:{n:"NUMBER17",f:p},24:{n:"NUMBER18",f:function(e,t){var r=u(e);r[1].v=e.read_shift(2);var n=r[1].v>>1;if(1&r[1].v)switch(7&n){case 0:n=5e3*(n>>3);break;case 1:n=500*(n>>3);break;case 2:n=(n>>3)/20;break;case 3:n=(n>>3)/200;break;case 4:n=(n>>3)/2e3;break;case 5:n=(n>>3)/2e4;break;case 6:n=(n>>3)/16;break;case 7:n=(n>>3)/64}return r[1].v=n,r}},25:{n:"FORMULA19",f:function(e,t){var r=p(e);return e.l+=t-14,r}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var r={},n=e.l+t;e.l<n;){var i=e.read_shift(2);if(14e3==i){for(r[i]=[0,""],r[i][0]=e.read_shift(2);e[e.l];)r[i][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return r}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var r=u(e),n=e.read_shift(4);return r[1].v=n>>6,r}},38:{n:"??"},39:{n:"NUMBER27",f:f},40:{n:"FORMULA28",f:function(e,t){var r=f(e);return e.l+=t-10,r}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,r){if(r.qpro&&!(t<21)){var n=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[n,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var r=t||{};if(+r.codepage>=0&&i6(+r.codepage),"string"==r.type)throw new Error("Cannot write WK1 to JS string");var n,a,l=c9(),c=C9(e["!ref"]),u=Array.isArray(e),d=[];vne(l,0,(n=1030,(a=l9(2)).write_shift(2,n),a)),vne(l,6,function(e){var t=l9(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(c));for(var p=Math.min(c.e.r,8191),h=c.s.r;h<=p;++h)for(var f=v9(h),m=c.s.c;m<=c.e.c;++m){h===c.s.r&&(d[m]=y9(m));var v=d[m]+f,g=u?(e[h]||[])[m]:e[v];if(g&&"z"!=g.t)if("n"==g.t)(0|g.v)==g.v&&g.v>=-32768&&g.v<=32767?vne(l,13,s(h,m,g.v)):vne(l,14,o(h,m,g.v));else vne(l,15,i(h,m,T9(g).slice(0,239)))}return vne(l,1),l.end()},book_to_wk3:function(e,t){var r=t||{};if(+r.codepage>=0&&i6(+r.codepage),"string"==r.type)throw new Error("Cannot write WK3 to JS string");var n=c9();vne(n,0,function(e){var t=l9(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var r=0,n=0,i=0,s=0;s<e.SheetNames.length;++s){var o=e.SheetNames[s],a=e.Sheets[o];if(a&&a["!ref"]){++i;var l=w9(a["!ref"]);r<l.e.r&&(r=l.e.r),n<l.e.c&&(n=l.e.c)}}r>8191&&(r=8191);return t.write_shift(2,r),t.write_shift(1,i),t.write_shift(1,n),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var i=0,s=0;i<e.SheetNames.length;++i)(e.Sheets[e.SheetNames[i]]||{})["!ref"]&&vne(n,27,v(e.SheetNames[i],s++));var o=0;for(i=0;i<e.SheetNames.length;++i){var a=e.Sheets[e.SheetNames[i]];if(a&&a["!ref"]){for(var l=C9(a["!ref"]),c=Array.isArray(a),u=[],p=Math.min(l.e.r,8191),f=l.s.r;f<=p;++f)for(var m=v9(f),g=l.s.c;g<=l.e.c;++g){f===l.s.r&&(u[g]=y9(g));var y=u[g]+m,b=c?(a[f]||[])[g]:a[y];if(b&&"z"!=b.t)if("n"==b.t)vne(n,23,h(f,g,o,b.v));else vne(n,22,d(f,g,o,T9(b).slice(0,239)))}++o}}return vne(n,1),n.end()},to_workbook:function(e,r){switch(r.type){case"base64":return t(v6(d6(e)),r);case"binary":return t(v6(e),r);case"buffer":case"array":return t(e,r)}throw"Unsupported type "+r.type}}}(),tte=/^\s|\s$|[\t\n\r]/;function rte(e,t){if(!t.bookSST)return"";var r=[B8];r[r.length]=i7("sst",null,{xmlns:b7[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(null!=e[n]){var i=e[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(tte)&&(s+=' xml:space="preserve"'),s+=">"+$8(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}var nte=function(e,t){var r=!1;return null==t&&(r=!0,t=l9(15+4*e.t.length)),t.write_shift(1,0),_9(e.t,t),r?t.slice(0,t.l):t};function ite(e){var t=c9();u9(t,159,function(e,t){return t||(t=l9(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var r=0;r<e.length;++r)u9(t,19,nte(e[r]));return u9(t,160),t.end()}function ste(e){var t,r,n=0,i=function(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}(e),s=i.length+1;for((t=f6(s))[0]=i.length,r=1;r!=s;++r)t[r]=i[r-1];for(r=s-1;r>=0;--r)n=((16384&n?1:0)|n<<1&32767)^t[r];return 52811^n}var ote=function(){function e(e,r){switch(r.type){case"base64":return t(d6(e),r);case"binary":return t(e,r);case"buffer":return t(p6&&Buffer.isBuffer(e)?e.toString("binary"):y6(e),r);case"array":return t(A8(e),r)}throw new Error("Unrecognized type "+r.type)}function t(e,t){var r=(t||{}).dense?[]:{},n=e.match(/\\trowd.*?\\row\b/g);if(!n.length)throw new Error("RTF missing table");var i={s:{c:0,r:0},e:{c:0,r:n.length-1}};return n.forEach(function(e,t){Array.isArray(r)&&(r[t]=[]);for(var n,s=/\\\w+\b/g,o=0,a=-1;n=s.exec(e);){if("\\cell"===n[0]){var l=e.slice(o,s.lastIndex-n[0].length);if(" "==l[0]&&(l=l.slice(1)),++a,l.length){var c={v:l,t:"s"};Array.isArray(r)?r[t][a]=c:r[x9({r:t,c:a})]=c}}o=s.lastIndex}a>i.e.c&&(i.e.c=a)}),r["!ref"]=S9(i),r}return{to_workbook:function(t,r){return N9(e(t,r),r)},to_sheet:e,from_sheet:function(e){for(var t,r=["{\\rtf1\\ansi"],n=C9(e["!ref"]),i=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){r.push("\\trowd\\trautofit1");for(var o=n.s.c;o<=n.e.c;++o)r.push("\\cellx"+(o+1));for(r.push("\\pard\\intbl"),o=n.s.c;o<=n.e.c;++o){var a=x9({r:s,c:o});(t=i?(e[s]||[])[o]:e[a])&&(null!=t.v||t.f&&!t.F)&&(r.push(" "+(t.w||(T9(t),t.w))),r.push("\\cell"))}r.push("\\pard\\intbl\\row")}return r.join("")+"}"}}}();function ate(e){for(var t=0,r=1;3!=t;++t)r=256*r+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var lte=6;function cte(e){return Math.floor((e+Math.round(128/lte)/256)*lte)}function ute(e){return Math.floor((e-5)/lte*100+.5)/100}function dte(e){return Math.round((e*lte+5)/lte*256)/256}function pte(e){e.width?(e.wpx=cte(e.width),e.wch=ute(e.wpx),e.MDW=lte):e.wpx?(e.wch=ute(e.wpx),e.width=dte(e.wch),e.MDW=lte):"number"==typeof e.wch&&(e.width=dte(e.wch),e.wpx=cte(e.width),e.MDW=lte),e.customWidth&&delete e.customWidth}var hte=96;function fte(e){return 96*e/hte}function mte(e){return e*hte/96}function vte(e,t){var r,n=[B8,i7("styleSheet",null,{xmlns:b7[0],"xmlns:vt":v7})];return e.SSF&&null!=(r=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)null!=e[n]&&(t[t.length]=i7("numFmt",null,{numFmtId:n,formatCode:$8(e[n])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=i7("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=function(e){var t=[];return t[t.length]=i7("cellXfs",null),e.forEach(function(e){t[t.length]=i7("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=i7("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function gte(e,t,r){r||(r=l9(6+4*t.length)),r.write_shift(2,e),_9(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return null==r.l&&(r.l=r.length),n}function yte(e,t){t||(t=l9(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=l9(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,r),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var r=0;"superscript"==e.vertAlign?r=1:"subscript"==e.vertAlign&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),eee(e.color,t);return t.write_shift(1,2),_9(e.name,t),t.length>t.l?t.slice(0,t.l):t}var bte,xte=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],wte=a9;function Ste(e,t){t||(t=l9(84)),bte||(bte=x8(xte));var r=bte[e.patternType];null==r&&(r=40),t.write_shift(4,r);var n=0;if(40!=r)for(eee({auto:1},t),eee({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Cte(e,t,r){r||(r=l9(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);return r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Ete(e,t){return t||(t=l9(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Tte=a9;function Nte(e){var t;u9(e,613,I9(1)),u9(e,46,(t||(t=l9(51)),t.write_shift(1,0),Ete(0,t),Ete(0,t),Ete(0,t),Ete(0,t),Ete(0,t),t.length>t.l?t.slice(0,t.l):t)),u9(e,614)}function Pte(e){var t,r;u9(e,619,I9(1)),u9(e,48,(t={xfId:0,name:"Normal"},r||(r=l9(52)),r.write_shift(4,t.xfId),r.write_shift(2,1),r.write_shift(1,0),r.write_shift(1,0),H9(t.name||"",r),r.length>r.l?r.slice(0,r.l):r)),u9(e,620)}function Rte(e){u9(e,508,function(e,t,r){var n=l9(2052);return n.write_shift(4,e),H9(t,n),H9(r,n),n.length>n.l?n.slice(0,n.l):n}(0,"TableStyleMedium9","PivotStyleMedium4")),u9(e,509)}function Ite(e,t){var r=c9();return u9(r,278),function(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var n=e[0];n<=e[1];++n)null!=t[n]&&++r}),0!=r&&(u9(e,615,I9(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)null!=t[n]&&u9(e,44,gte(n,t[n]))}),u9(e,616))}}(r,e.SSF),function(e){u9(e,611,I9(1)),u9(e,43,yte({sz:12,color:{theme:1},name:"Calibri",family:2})),u9(e,612)}(r),function(e){u9(e,603,I9(2)),u9(e,45,Ste({patternType:"none"})),u9(e,45,Ste({patternType:"gray125"})),u9(e,604)}(r),Nte(r),function(e){u9(e,626,I9(1)),u9(e,47,Cte({numFmtId:0},65535)),u9(e,627)}(r),function(e,t){u9(e,617,I9(t.length)),t.forEach(function(t){u9(e,47,Cte(t,0))}),u9(e,618)}(r,t.cellXfs),Pte(r),function(e){u9(e,505,I9(0)),u9(e,506)}(r),Rte(r),u9(r,279),r.end()}function kte(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var r=[B8];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function _te(){var e,t,r=c9();return u9(r,332),u9(r,334,I9(1)),u9(r,335,((t=l9(12+2*(e={name:"XLDAPR",version:12e4,flags:3496657072}).name.length)).write_shift(4,e.flags),t.write_shift(4,e.version),_9(e.name,t),t.slice(0,t.l))),u9(r,336),u9(r,339,function(e,t){var r=l9(8+2*t.length);return r.write_shift(4,e),_9(t,r),r.slice(0,r.l)}(1,"XLDAPR")),u9(r,52),u9(r,35,I9(514)),u9(r,4096,I9(0)),u9(r,4097,Aee(1)),u9(r,36),u9(r,53),u9(r,340),u9(r,337,function(e){var t=l9(8);return t.write_shift(4,e),t.write_shift(4,1),t}(1)),u9(r,51,function(e){var t=l9(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}([[1,0]])),u9(r,338),u9(r,333),r.end()}function Ate(){var e=[B8];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var jte=1024;function Ote(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[i7("xml",null,{"xmlns:v":T7,"xmlns:o":x7,"xmlns:x":w7,"xmlns:mv":E7}).replace(/\/>/,">"),i7("o:shapelayout",i7("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),i7("v:shapetype",[i7("v:stroke",null,{joinstyle:"miter"}),i7("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];jte<1e3*e;)jte+=1e3;return t.forEach(function(e){var t=b9(e[0]),r={color2:"#BEFF82",type:"gradient"};"gradient"==r.type&&(r.angle="-180");var n="gradient"==r.type?i7("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=i7("v:fill",n,r);++jte,i=i.concat(["<v:shape"+n7({id:"_x0000_s"+jte,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,i7("v:shadow",null,{on:"t",obscured:"t"}),i7("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",r7("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),r7("x:AutoFill","False"),r7("x:Row",String(t.r)),r7("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function Dte(e){var t=[B8,i7("comments",null,{xmlns:b7[0]})],r=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var n=$8(e.a);-1==r.indexOf(n)&&(r.push(n),t.push("<author>"+n+"</author>")),e.T&&e.ID&&-1==r.indexOf("tc="+e.ID)&&(r.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==r.length&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var n=0,i=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?n=r.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(n=r.indexOf($8(e.a))),i.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+n+'"><text>'),i.length<=1)t.push(r7("t",$8(i[0]||"")));else{for(var s="Comment:\n    "+i[0]+"\n",o=1;o<i.length;++o)s+="Reply:\n    "+i[o]+"\n";t.push(r7("t",$8(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Mte(e,t,r){var n=[B8,i7("ThreadedComments",null,{xmlns:d7}).replace(/[\/]>/,">")];return e.forEach(function(e){var i="";(e[1]||[]).forEach(function(s,o){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var a={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};0==o?i=a.id:a.parentId=i,s.ID=a.id,s.a&&(a.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(i7("threadedComment",r7("text",s.t||""),a))}else delete s.ID})}),n.push("</ThreadedComments>"),n.join("")}var Lte=k9;function zte(e){var t=c9(),r=[];return u9(t,628),u9(t,630),e.forEach(function(e){e[1].forEach(function(e){r.indexOf(e.a)>-1||(r.push(e.a.slice(0,54)),u9(t,632,function(e){return _9(e.slice(0,54))}(e.a)))})}),u9(t,631),u9(t,633),e.forEach(function(e){e[1].forEach(function(n){n.iauthor=r.indexOf(n.a);var i={s:b9(e[0]),e:b9(e[0])};u9(t,635,function(e,t){return null==t&&(t=l9(36)),t.write_shift(4,e[1].iauthor),Z9(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([i,n])),n.t&&n.t.length>0&&u9(t,637,D9(n)),u9(t,636),delete n.iauthor})}),u9(t,634),u9(t,629),t.end()}var Fte=["xlsb","xlsm","xlam","biff8","xla"],Bte=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(e,r,n,i){var s=!1,o=!1;0==n.length?o=!0:"["==n.charAt(0)&&(o=!0,n=n.slice(1,-1)),0==i.length?s=!0:"["==i.charAt(0)&&(s=!0,i=i.slice(1,-1));var a=n.length>0?0|parseInt(n,10):0,l=i.length>0?0|parseInt(i,10):0;return s?l+=t.c:--l,o?a+=t.r:--a,r+(s?"":"$")+y9(l)+(o?"":"$")+v9(a)}return function(n,i){return t=i,n.replace(e,r)}}(),Ute=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Wte=function(){return function(e,t){return e.replace(Ute,function(e,r,n,i,s,o){var a=g9(i)-(n?0:t.c),l=m9(o)-(s?0:t.r);return r+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==a?"":n?a+1:"["+a+"]")})}}();function Hte(e,t){return e.replace(Ute,function(e,r,n,i,s,o){return r+("$"==n?n+i:y9(g9(i)+t.c))+("$"==s?s+o:v9(m9(o)+t.r))})}function $te(e){e.l+=1}function Vte(e,t){var r=e.read_shift(2);return[16383&r,r>>14&1,r>>15&1]}function qte(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Gte(e);12==r.biff&&(n=4)}var i=e.read_shift(n),s=e.read_shift(n),o=Vte(e),a=Vte(e);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function Gte(e){var t=Vte(e),r=Vte(e),n=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function Kte(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return function(e){var t=Vte(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}(e);var n=e.read_shift(r&&12==r.biff?4:2),i=Vte(e);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function Jte(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:255&r,fQuoted:!!(16384&r),cRel:r>>15,rRel:r>>15}}function Yte(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function Zte(e){return[e.read_shift(1),e.read_shift(1)]}function Qte(e,t){var r=[e.read_shift(1)];if(12==t)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2}switch(r[0]){case 4:r[1]=function(e,t){return 1===e.read_shift(t)}(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:r[1]=oee[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Q9(e);break;case 2:r[1]=function(e,t,r){if(r.biff>5)return function(e,t,r){var n=e.read_shift(r&&2==r.biff?1:2);return 0===n?(e.l++,""):function(e,t,r){if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}(e,n,r)}(e,0,r);var n=e.read_shift(1);return 0===n?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Xte(e,t,r){for(var n=e.read_shift(12==r.biff?4:2),i=[],s=0;s!=n;++s)i.push((12==r.biff?Y9:Uee)(e));return i}function ere(e,t,r){var n=0,i=0;12==r.biff?(n=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,0==--i&&(i=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=Qte(e,r.biff);return o}function tre(e,t,r){return e.l+=2,[Jte(e)]}function rre(e){return e.l+=6,[]}function nre(e){return e.l+=2,[_ee(e),1&e.read_shift(2)]}var ire=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var sre={1:{n:"PtgExp",f:function(e,t,r){return e.l++,r&&12==r.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(r&&2==r.biff?1:2)]}},2:{n:"PtgTbl",f:a9},3:{n:"PtgAdd",f:$te},4:{n:"PtgSub",f:$te},5:{n:"PtgMul",f:$te},6:{n:"PtgDiv",f:$te},7:{n:"PtgPower",f:$te},8:{n:"PtgConcat",f:$te},9:{n:"PtgLt",f:$te},10:{n:"PtgLe",f:$te},11:{n:"PtgEq",f:$te},12:{n:"PtgGe",f:$te},13:{n:"PtgGt",f:$te},14:{n:"PtgNe",f:$te},15:{n:"PtgIsect",f:$te},16:{n:"PtgUnion",f:$te},17:{n:"PtgRange",f:$te},18:{n:"PtgUplus",f:$te},19:{n:"PtgUminus",f:$te},20:{n:"PtgPercent",f:$te},21:{n:"PtgParen",f:$te},22:{n:"PtgMissArg",f:$te},23:{n:"PtgStr",f:function(e,t,r){return e.l++,Oee(e,0,r)}},26:{n:"PtgSheet",f:function(e,t,r){return e.l+=5,e.l+=2,e.l+=2==r.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,r){return e.l+=2==r.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,oee[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,Q9(e)}},32:{n:"PtgArray",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=2==r.biff?6:12==r.biff?14:7,[n]}},33:{n:"PtgFunc",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(r&&r.biff<=3?1:2);return[Sre[i],wre[i],n]}},34:{n:"PtgFuncVar",f:function(e,t,r){var n=e[e.l++],i=e.read_shift(1),s=r&&r.biff<=3?[88==n?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[i,(0===s[0]?wre:xre)[s[1]]]}},35:{n:"PtgName",f:function(e,t,r){var n=e.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=e.read_shift(i);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[n,0,s]}},36:{n:"PtgRef",f:function(e,t,r){var n=(96&e[e.l])>>5;return e.l+=1,[n,Kte(e,0,r)]}},37:{n:"PtgArea",f:function(e,t,r){return[(96&e[e.l++])>>5,qte(e,r.biff>=2&&r.biff,r)]}},38:{n:"PtgMemArea",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=r&&2==r.biff?3:4,[n,e.read_shift(r&&2==r.biff?1:2)]}},39:{n:"PtgMemErr",f:a9},40:{n:"PtgMemNoMem",f:a9},41:{n:"PtgMemFunc",f:function(e,t,r){return[e.read_shift(1)>>>5&3,e.read_shift(r&&2==r.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,12==r.biff&&(e.l+=2),[n]}},43:{n:"PtgAreaErr",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}},44:{n:"PtgRefN",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var i=function(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return function(e){var t=e.read_shift(2),r=e.read_shift(1),n=(32768&t)>>15,i=(16384&t)>>14;return t&=16383,1==n&&t>=8192&&(t-=16384),1==i&&r>=128&&(r-=256),{r:t,c:r,cRel:i,rRel:n}}(e);var i=e.read_shift(n>=12?4:2),s=e.read_shift(2),o=(16384&s)>>14,a=(32768&s)>>15;if(s&=16383,1==a)for(;i>524287;)i-=1048576;if(1==o)for(;s>8191;)s-=16384;return{r:i,c:s,cRel:o,rRel:a}}(e,0,r);return[n,i]}},45:{n:"PtgAreaN",f:function(e,t,r){var n=(96&e[e.l++])>>5,i=function(e,t,r){if(r.biff<8)return Gte(e);var n=e.read_shift(12==r.biff?4:2),i=e.read_shift(12==r.biff?4:2),s=Vte(e),o=Vte(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}(e,0,r);return[n,i]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,r){return 5==r.biff?function(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(2);return r&&5==r.biff&&(e.l+=12),[n,i,Kte(e,0,r)]}},59:{n:"PtgArea3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,i=e.read_shift(2,"i");if(r)switch(r.biff){case 5:e.l+=12;break;case 12:0}return[n,i,qte(e,0,r)]}},60:{n:"PtgRefErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,i=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[n,i]}},61:{n:"PtgAreaErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,i=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[n,i]}},255:{}},ore={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},are={1:{n:"PtgElfLel",f:nre},2:{n:"PtgElfRw",f:tre},3:{n:"PtgElfCol",f:tre},6:{n:"PtgElfRwV",f:tre},7:{n:"PtgElfColV",f:tre},10:{n:"PtgElfRadical",f:tre},11:{n:"PtgElfRadicalS",f:rre},13:{n:"PtgElfColS",f:rre},15:{n:"PtgElfColSV",f:rre},16:{n:"PtgElfRadicalLel",f:nre},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&r,rt:ire[r>>2&31],idx:n,c:i,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},lre={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=r&&2==r.biff?3:4,[n]}},2:{n:"PtgAttrIf",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,r){e.l+=2;for(var n=e.read_shift(r&&2==r.biff?1:2),i=[],s=0;s<=n;++s)i.push(e.read_shift(r&&2==r.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,r){e.l+=r&&2==r.biff?3:4}},32:{n:"PtgAttrBaxcel",f:Yte},33:{n:"PtgAttrBaxcel",f:Yte},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),Zte(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),Zte(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function cre(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],i=[],s=0;s<n.length;++s){var o=n[s];if(o)if(2===o[0])i.push('"'+o[1].replace(/"/g,'""')+'"');else i.push(o[1]);else i.push("")}t.push(i.join(","))}return t.join(";")}var ure={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function dre(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(e[n[0]][0]){case 357:return i=-1==n[1]?"#REF":e.SheetNames[n[1]],n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 358:return null!=r.SID?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return i=-1==n[1]?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[n[0]][0][3]?(i=-1==n[1]?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function pre(e,t,r){var n=dre(e,t,r);return"#REF"==n?n:function(e,t){if(!(e||t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(n,r)}function hre(e,t,r,n,i){var s,o,a,l,c=i&&i.biff||8,u={s:{c:0,r:0}},d=[],p=0,h=0,f="";if(!e[0]||!e[0][0])return"";for(var m=-1,v="",g=0,y=e[0].length;g<y;++g){var b=e[0][g];switch(b[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=d.pop(),o=d.pop(),m>=0){switch(e[0][m][1][0]){case 0:v=O8(" ",e[0][m][1][1]);break;case 1:v=O8("\r",e[0][m][1][1]);break;default:if(v="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}o+=v,m=-1}d.push(o+ure[b[0]]+s);break;case"PtgIsect":s=d.pop(),o=d.pop(),d.push(o+" "+s);break;case"PtgUnion":s=d.pop(),o=d.pop(),d.push(o+","+s);break;case"PtgRange":s=d.pop(),o=d.pop(),d.push(o+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":a=d9(b[1][1],u,i),d.push(h9(a,c));break;case"PtgRefN":a=r?d9(b[1][1],r,i):b[1][1],d.push(h9(a,c));break;case"PtgRef3d":p=b[1][1],a=d9(b[1][2],u,i),f=pre(n,p,i),d.push(f+"!"+h9(a,c));break;case"PtgFunc":case"PtgFuncVar":var x=b[1][0],w=b[1][1];x||(x=0);var S=0==(x&=127)?[]:d.slice(-x);d.length-=x,"User"===w&&(w=S.shift()),d.push(w+"("+S.join(",")+")");break;case"PtgBool":d.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":d.push(b[1]);break;case"PtgNum":d.push(String(b[1]));break;case"PtgStr":d.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=p9(b[1][1],r?{s:r}:u,i),d.push(f9(l,i));break;case"PtgArea":l=p9(b[1][1],u,i),d.push(f9(l,i));break;case"PtgArea3d":p=b[1][1],l=b[1][2],f=pre(n,p,i),d.push(f+"!"+f9(l,i));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgName":h=b[1][2];var C=(n.names||[])[h-1]||(n[0]||[])[h],E=C?C.Name:"SH33TJSNAME"+String(h);E&&"_xlfn."==E.slice(0,6)&&!i.xlfn&&(E=E.slice(6)),d.push(E);break;case"PtgNameX":var T,N=b[1][1];if(h=b[1][2],!(i.biff<=5)){var P="";if(14849==((n[N]||[])[0]||[])[0]||(1025==((n[N]||[])[0]||[])[0]?n[N][h]&&n[N][h].itab>0&&(P=n.SheetNames[n[N][h].itab-1]+"!"):P=n.SheetNames[h-1]+"!"),n[N]&&n[N][h])P+=n[N][h].Name;else if(n[0]&&n[0][h])P+=n[0][h].Name;else{var R=(dre(n,N,i)||"").split(";;");R[h-1]?P=R[h-1]:P+="SH33TJSERRX"}d.push(P);break}N<0&&(N=-N),n[N]&&(T=n[N][h]),T||(T={Name:"SH33TJSERRY"}),d.push(T.Name);break;case"PtgParen":var I="(",k=")";if(m>=0){switch(v="",e[0][m][1][0]){case 2:I=O8(" ",e[0][m][1][1])+I;break;case 3:I=O8("\r",e[0][m][1][1])+I;break;case 4:k=O8(" ",e[0][m][1][1])+k;break;case 5:k=O8("\r",e[0][m][1][1])+k;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}d.push(I+d.pop()+k);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":d.push("#REF!");break;case"PtgExp":a={c:b[1][1],r:b[1][0]};var _={c:r.c,r:r.r};if(n.sharedf[x9(a)]){var A=n.sharedf[x9(a)];d.push(hre(A,u,_,n,i))}else{var j=!1;for(s=0;s!=n.arrayf.length;++s)if(o=n.arrayf[s],!(a.c<o[0].s.c||a.c>o[0].e.c||a.r<o[0].s.r||a.r>o[0].e.r)){d.push(hre(o[1],u,_,n,i)),j=!0;break}j||d.push(b[1])}break;case"PtgArray":d.push("{"+cre(b[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=g;break;case"PtgMissArg":d.push("");break;case"PtgList":d.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(b))}if(3!=i.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][g][0])){var O=!0;switch((b=e[0][m])[1][0]){case 4:O=!1;case 0:v=O8(" ",b[1][1]);break;case 5:O=!1;case 1:v=O8("\r",b[1][1]);break;default:if(v="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}d.push((O?v:"")+d.pop()+(O?"":v)),m=-1}}if(d.length>1&&i.WTF)throw new Error("bad formula stack");return d[0]}function fre(e,t,r,n,i){var s=Fee(t,r,i),o=function(e){if(null==e){var t=l9(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return X9("number"==typeof e?e:0)}(e.v),a=l9(6);a.write_shift(2,33),a.write_shift(4,0);for(var l=l9(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return b6([s,o,a,l])}function mre(e,t,r){var n=e.read_shift(4),i=function(e,t,r){for(var n,i,s=e.l+t,o=[];s!=e.l;)t=s-e.l,i=e[e.l],n=sre[i]||sre[ore[i]],24!==i&&25!==i||(n=(24===i?are:lre)[e[e.l+1]]),n&&n.f?o.push([n.n,n.f(e,t,r)]):a9(e,t);return o}(e,n,r),s=e.read_shift(4),o=s>0?function(e,t,r,n){if(n.biff<8)return a9(e,t);for(var i=e.l+t,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=ere(e,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=Xte(e,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&12==n.biff&&(r[o][1][1]=e.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return 0!==(t=i-e.l)&&s.push(a9(e,t)),s}(e,s,i,r):null;return[i,o]}var vre=mre,gre=mre,yre=mre,bre=mre,xre={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},wre={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Sre={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Cre(e){return("of:="+e.replace(Ute,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function Ere(e){return e.replace(/\./,"!")}var Tre="undefined"!=typeof Map;function Nre(e,t,r){var n=0,i=e.length;if(r){if(Tre?r.has(t):Object.prototype.hasOwnProperty.call(r,t))for(var s=Tre?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}else for(;n<i;++n)if(e[n].t===t)return e.Count++,n;return e[i]={t:t},e.Count++,e.Unique++,r&&(Tre?(r.has(t)||r.set(t,[]),r.get(t).push(i)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(i))),i}function Pre(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(lte=t.MDW),null!=t.width?r.customWidth=1:null!=t.wpx?n=ute(t.wpx):null!=t.wch&&(n=t.wch),n>-1?(r.width=dte(n),r.customWidth=1):null!=t.width&&(r.width=t.width),t.hidden&&(r.hidden=!0),null!=t.level&&(r.outlineLevel=r.level=t.level),r}function Rre(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];null==e.left&&(e.left=r[0]),null==e.right&&(e.right=r[1]),null==e.top&&(e.top=r[2]),null==e.bottom&&(e.bottom=r[3]),null==e.header&&(e.header=r[4]),null==e.footer&&(e.footer=r[5])}}function Ire(e,t,r){var n=r.revssf[null!=t.z?t.z:"General"],i=60,s=e.length;if(null==n&&r.ssf)for(;i<392;++i)if(null==r.ssf[i]){u8(t.z,i),r.ssf[i]=t.z,r.revssf[t.z]=n=i;break}for(i=0;i!=s;++i)if(e[i].numFmtId===n)return i;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function kre(e,t,r){if(e&&e["!ref"]){var n=C9(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}var _re=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Are=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function jre(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),void 0===e.v&&"string"!=typeof e.f||"z"===e.t&&!e.f)return"";var i="",s=e.t,o=e.v;if("z"!==e.t)switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=oee[e.v];break;case"d":n&&n.cellDates?i=_8(e.v,-1).toISOString():((e=j8(e)).t="n",i=""+(e.v=C8(_8(e.v)))),void 0===e.z&&(e.z=_6[14]);break;default:i=e.v}var a=r7("v",$8(i)),l={r:t},c=Ire(n.cellXfs,e,n);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){a=r7("v",""+Nre(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=o),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;a=i7("f",$8(e.f),u)+(null!=e.v?a:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),i7("c",a,l)}function Ore(e,t,r,n){var i,s=[B8,i7("worksheet",null,{xmlns:b7[0],"xmlns:r":m7})],o=r.SheetNames[e],a="",l=r.Sheets[o];null==l&&(l={});var c=l["!ref"]||"A1",u=C9(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=S9(u)}n||(n={}),l["!comments"]=[];var d=[];!function(e,t,r,n,i){var s=!1,o={},a=null;if("xlsx"!==n.bookType&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch(Nie){}s=!0,o.codeName=X8($8(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),a=(a||"")+i7("outlinePr",null,c)}(s||a)&&(i[i.length]=i7("sheetPr",a,o))}(l,r,e,t,s),s[s.length]=i7("dimension",null,{ref:c}),s[s.length]=function(e,t,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),i7("sheetViews",i7("sheetView",null,i),{})}(0,0,0,r),t.sheetFormat&&(s[s.length]=i7("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var r,n=["<cols>"],i=0;i!=t.length;++i)(r=t[i])&&(n[n.length]=i7("col",null,Pre(i,r)));return n[n.length]="</cols>",n.join("")}(0,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(a=function(e,t){var r,n,i=[],s=[],o=C9(e["!ref"]),a="",l="",c=[],u=0,d=0,p=e["!rows"],h=Array.isArray(e),f={r:l},m=-1;for(d=o.s.c;d<=o.e.c;++d)c[d]=y9(d);for(u=o.s.r;u<=o.e.r;++u){for(s=[],l=v9(u),d=o.s.c;d<=o.e.c;++d){r=c[d]+l;var v=h?(e[u]||[])[d]:e[r];void 0!==v&&null!=(a=jre(v,r,e,t))&&s.push(a)}(s.length>0||p&&p[u])&&(f={r:l},p&&p[u]&&((n=p[u]).hidden&&(f.hidden=1),m=-1,n.hpx?m=fte(n.hpx):n.hpt&&(m=n.hpt),m>-1&&(f.ht=m,f.customHeight=1),n.level&&(f.outlineLevel=n.level)),i[i.length]=i7("row",s.join(""),f))}if(p)for(;u<p.length;++u)p&&p[u]&&(f={r:u+1},(n=p[u]).hidden&&(f.hidden=1),m=-1,n.hpx?m=fte(n.hpx):n.hpt&&(m=n.hpt),m>-1&&(f.ht=m,f.customHeight=1),n.level&&(f.outlineLevel=n.level),i[i.length]=i7("row","",f));return i.join("")}(l,t),a.length>0&&(s[s.length]=a)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return _re.forEach(function(r){null!=e[r]&&e[r]&&(t[r]="1")}),Are.forEach(function(r){null==e[r]||e[r]||(t[r]="0")}),e.password&&(t.password=ste(e.password).toString(16).toUpperCase()),i7("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,r,n){var i="string"==typeof e.ref?e.ref:S9(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=w9(i);o.s.r==o.e.r&&(o.e.r=w9(t["!ref"]).e.r,i=S9(o));for(var a=0;a<s.length;++a){var l=s[a];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),i7("autoFilter",null,{ref:i})}(l["!autofilter"],l,r,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+S9(e[r])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var p,h,f=-1,m=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(p={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=hee(n,-1,$8(e[1].Target).replace(/#.*$/,""),uee.HLINK),p["r:id"]="rId"+m),(f=e[1].Target.indexOf("#"))>-1&&(p.location=$8(e[1].Target.slice(f+1))),e[1].Tooltip&&(p.tooltip=$8(e[1].Tooltip)),s[s.length]=i7("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(Rre(h=l["!margins"]),i7("pageMargins",null,h))),t&&!t.ignoreEC&&null!=t.ignoreEC||(s[s.length]=r7("ignoredErrors",i7("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(m=hee(n,-1,"../drawings/drawing"+(e+1)+".xml",uee.DRAW),s[s.length]=i7("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=d),l["!comments"].length>0&&(m=hee(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",uee.VML),s[s.length]=i7("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Dre(e,t,r,n){var i=function(e,t,r){var n=l9(145),i=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;i.hpx?s=20*fte(i.hpx):i.hpt&&(s=20*i.hpt),n.write_shift(2,s),n.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var a=0,l=n.l;n.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var d=-1,p=-1,h=u<<10;h<u+1<<10;++h)c.c=h,(Array.isArray(r)?(r[c.r]||[])[c.c]:r[x9(c)])&&(d<0&&(d=h),p=h);d<0||(++a,n.write_shift(4,d),n.write_shift(4,p))}var f=n.l;return n.l=l,n.write_shift(4,a),n.l=f,n.length>n.l?n.slice(0,n.l):n}(n,r,t);(i.length>17||(t["!rows"]||[])[n])&&u9(e,0,i)}var Mre=Y9,Lre=Z9;var zre=Y9,Fre=Z9;var Bre=["left","right","top","bottom","header","footer"];function Ure(e,t,r,n,i,s,o){if(void 0===t.v)return!1;var a="";switch(t.t){case"b":a=t.v?"1":"0";break;case"d":(t=j8(t)).z=t.z||_6[14],t.v=C8(_8(t.v)),t.t="n";break;case"n":case"e":a=""+t.v;break;default:a=t.v}var l={r:r,c:n};switch(l.s=Ire(i.cellXfs,t,i),t.l&&s["!links"].push([x9(l),t.l]),t.c&&s["!comments"].push([x9(l),t.c]),t.t){case"s":case"str":return i.bookSST?(a=Nre(i.Strings,t.v,i.revStrings),l.t="s",l.v=a,o?u9(e,18,function(e,t,r){return null==r&&(r=l9(8)),F9(t,r),r.write_shift(4,t.v),r}(0,l)):u9(e,7,function(e,t,r){return null==r&&(r=l9(12)),L9(t,r),r.write_shift(4,t.v),r}(0,l))):(l.t="str",o?u9(e,17,function(e,t,r){return null==r&&(r=l9(8+4*e.v.length)),F9(t,r),_9(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l)):u9(e,6,function(e,t,r){return null==r&&(r=l9(12+4*e.v.length)),L9(t,r),_9(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?o?u9(e,13,function(e,t,r){return null==r&&(r=l9(8)),F9(t,r),K9(e.v,r),r}(t,l)):u9(e,2,function(e,t,r){return null==r&&(r=l9(12)),L9(t,r),K9(e.v,r),r}(t,l)):o?u9(e,16,function(e,t,r){return null==r&&(r=l9(12)),F9(t,r),X9(e.v,r),r}(t,l)):u9(e,5,function(e,t,r){return null==r&&(r=l9(16)),L9(t,r),X9(e.v,r),r}(t,l)),!0;case"b":return l.t="b",o?u9(e,15,function(e,t,r){return null==r&&(r=l9(5)),F9(t,r),r.write_shift(1,e.v?1:0),r}(t,l)):u9(e,4,function(e,t,r){return null==r&&(r=l9(9)),L9(t,r),r.write_shift(1,e.v?1:0),r}(t,l)),!0;case"e":return l.t="e",o?u9(e,14,function(e,t,r){return null==r&&(r=l9(8)),F9(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}(t,l)):u9(e,3,function(e,t,r){return null==r&&(r=l9(9)),L9(t,r),r.write_shift(1,e.v),r}(t,l)),!0}return o?u9(e,12,function(e,t,r){return null==r&&(r=l9(4)),F9(t,r)}(0,l)):u9(e,1,function(e,t,r){return null==r&&(r=l9(8)),L9(t,r)}(0,l)),!0}function Wre(e,t){var r,n;t&&t["!merges"]&&(u9(e,177,(r=t["!merges"].length,null==n&&(n=l9(4)),n.write_shift(4,r),n)),t["!merges"].forEach(function(t){u9(e,176,Fre(t))}),u9(e,178))}function Hre(e,t){t&&t["!cols"]&&(u9(e,390),t["!cols"].forEach(function(t,r){t&&u9(e,60,function(e,t,r){null==r&&(r=l9(18));var n=Pre(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,256*(n.width||10)),r.write_shift(4,0);var i=0;return t.hidden&&(i|=1),"number"==typeof n.width&&(i|=2),t.level&&(i|=t.level<<8),r.write_shift(2,i),r}(r,t))}),u9(e,391))}function $re(e,t){var r,n;t&&t["!ref"]&&(u9(e,648),u9(e,649,(r=C9(t["!ref"]),(n=l9(24)).write_shift(4,4),n.write_shift(4,1),Z9(r,n),n)),u9(e,650))}function Vre(e,t,r){t["!links"].forEach(function(t){if(t[1].Target){var n=hee(r,-1,t[1].Target.replace(/#.*$/,""),uee.HLINK);u9(e,494,function(e,t){var r=l9(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Z9({s:b9(e[0]),e:b9(e[0])},r),q9("rId"+t,r);var n=e[1].Target.indexOf("#");return _9((-1==n?"":e[1].Target.slice(n+1))||"",r),_9(e[1].Tooltip||"",r),_9("",r),r.slice(0,r.l)}(t,n))}}),delete t["!links"]}function qre(e,t,r){u9(e,133),u9(e,137,function(e,t,r){null==r&&(r=l9(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}(0,r)),u9(e,138),u9(e,134)}function Gre(e,t){var r,n;t["!protect"]&&u9(e,535,(r=t["!protect"],null==n&&(n=l9(66)),n.write_shift(2,r.password?ste(r.password):0),n.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){e[1]?n.write_shift(4,null==r[e[0]]||r[e[0]]?0:1):n.write_shift(4,null!=r[e[0]]&&r[e[0]]?0:1)}),n))}function Kre(e,t,r,n){var i=c9(),s=r.SheetNames[e],o=r.Sheets[s]||{},a=s;try{r&&r.Workbook&&(a=r.Workbook.Sheets[e].CodeName||a)}catch(Nie){}var l,c,u=C9(o["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],u9(i,129),(r.vbaraw||o["!outline"])&&u9(i,147,function(e,t,r){null==r&&(r=l9(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return eee({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),U9(e,r),r.slice(0,r.l)}(a,o["!outline"])),u9(i,148,Lre(u)),qre(i,0,r.Workbook),Hre(i,o),function(e,t,r,n){var i,s=C9(t["!ref"]||"A1"),o="",a=[];u9(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=c;++u){o=v9(u),Dre(e,t,s,u);var d=!1;if(u<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){u===s.s.r&&(a[p]=y9(p)),i=a[p]+o;var h=l?(t[u]||[])[p]:t[i];d=!!h&&Ure(e,h,u,p,n,t,d)}}u9(e,146)}(i,o,0,t),Gre(i,o),function(e,t,r,n){if(t["!autofilter"]){var i=t["!autofilter"],s="string"==typeof i.ref?i.ref:S9(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,a=w9(s);a.s.r==a.e.r&&(a.e.r=w9(t["!ref"]).e.r,s=S9(a));for(var l=0;l<o.length;++l){var c=o[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),u9(e,161,Z9(C9(s))),u9(e,162)}}(i,o,r,e),Wre(i,o),Vre(i,o,n),o["!margins"]&&u9(i,476,(l=o["!margins"],null==c&&(c=l9(48)),Rre(l),Bre.forEach(function(e){X9(l[e],c)}),c)),t&&!t.ignoreEC&&null!=t.ignoreEC||$re(i,o),function(e,t,r,n){if(t["!comments"].length>0){var i=hee(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",uee.VML);u9(e,551,q9("rId"+i)),t["!legacy"]=i}}(i,o,e,n),u9(i,130),i.end()}var Jre=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var Yre="][*?/\\".split("");function Zre(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");return Yre.forEach(function(t){if(-1!=e.indexOf(t))throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),!0}function Qre(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t,r,n,i=e.Workbook&&e.Workbook.Sheets||[];t=e.SheetNames,r=i,n=!!e.vbaraw,t.forEach(function(e,i){Zre(e);for(var s=0;s<i;++s)if(e==t[s])throw new Error("Duplicate Sheet Name: "+e);if(n){var o=r&&r[i]&&r[i].CodeName||e;if(95==o.charCodeAt(0)&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}});for(var s=0;s<e.SheetNames.length;++s)kre(e.Sheets[e.SheetNames[s]],e.SheetNames[s],s)}function Xre(e){var t=[B8];t[t.length]=i7("workbook",null,{xmlns:b7[0],"xmlns:r":m7});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Jre.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(n[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=i7("workbookPr",null,n);var i=e.Workbook&&e.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&i[s]&&i[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:$8(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden"}t[t.length]=i7("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var r={name:e.Name};e.Comment&&(r.comment=e.Comment),null!=e.Sheet&&(r.localSheetId=""+e.Sheet),e.Hidden&&(r.hidden="1"),e.Ref&&(t[t.length]=i7("definedName",$8(e.Ref),r))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function ene(e,t){return t||(t=l9(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),q9(e.strRelID,t),_9(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function tne(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var r,n,i=t.Workbook.Sheets,s=0,o=-1,a=-1;s<i.length;++s)!i[s]||!i[s].Hidden&&-1==o?o=s:1==i[s].Hidden&&-1==a&&(a=s);if(!(a>o))u9(e,135),u9(e,158,(r=o,n||(n=l9(29)),n.write_shift(-4,0),n.write_shift(-4,460),n.write_shift(4,28800),n.write_shift(4,17600),n.write_shift(4,500),n.write_shift(4,r),n.write_shift(4,r),n.write_shift(1,120),n.length>n.l?n.slice(0,n.l):n)),u9(e,136)}}function rne(e,t){var r=c9();return u9(r,131),u9(r,128,function(e,t){t||(t=l9(127));for(var r=0;4!=r;++r)t.write_shift(4,0);return _9("SheetJS",t),_9(e6.version,t),_9(e6.version,t),_9("7262",t),t.length>t.l?t.slice(0,t.l):t}()),u9(r,153,function(e,t){t||(t=l9(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),U9(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),tne(r,e),function(e,t){u9(e,143);for(var r=0;r!=t.SheetNames.length;++r)u9(e,156,ene({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]}));u9(e,144)}(r,e),u9(r,132),r.end()}function nne(e,t,r,n,i){return(".bin"===t.slice(-4)?Kre:Ore)(e,r,n,i)}function ine(e,t,r){return(".bin"===t.slice(-4)?zte:Dte)(e)}function sne(e,t){var r=[];return e.Props&&r.push(function(e,t){var r=[];return y8(Eee).map(function(e){for(var t=0;t<gee.length;++t)if(gee[t][1]==e)return gee[t];for(t=0;t<xee.length;++t)if(xee[t][1]==e)return xee[t];throw e}).forEach(function(n){if(null!=e[n[1]]){var i=t&&t.Props&&null!=t.Props[n[1]]?t.Props[n[1]]:e[n[1]];"date"===n[2]&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof i?i=String(i):!0===i||!1===i?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(r7(Eee[n[1]]||n[1],i))}}),i7("DocumentProperties",r.join(""),{xmlns:x7})}(e.Props,t)),e.Custprops&&r.push(function(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return e&&y8(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var n=0;n<gee.length;++n)if(t==gee[n][1])return;for(n=0;n<xee.length;++n)if(t==xee[n][1])return;for(n=0;n<r.length;++n)if(t==r[n])return;var s=e[t],o="string";"number"==typeof s?(o="float",s=String(s)):!0===s||!1===s?(o="boolean",s=s?"1":"0"):s=String(s),i.push(i7(V8(t),s,{"dt:dt":o}))}}),t&&y8(t).forEach(function(r){if(Object.prototype.hasOwnProperty.call(t,r)&&(!e||!Object.prototype.hasOwnProperty.call(e,r))){var n=t[r],s="string";"number"==typeof n?(s="float",n=String(n)):!0===n||!1===n?(s="boolean",n=n?"1":"0"):n instanceof Date?(s="dateTime.tz",n=n.toISOString()):n=String(n),i.push(i7(V8(r),n,{"dt:dt":s}))}}),"<"+n+' xmlns="'+x7+'">'+i.join("")+"</"+n+">"}(e.Props,e.Custprops)),r.join("")}function one(e){return i7("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+Wte(e.Ref,{r:0,c:0})})}function ane(e,t,r,n,i,s,o){if(!e||null==e.v&&null==e.f)return"";var a={};if(e.f&&(a["ss:Formula"]="="+$8(Wte(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var l=b9(e.F.slice(t.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(e.l&&e.l.Target&&(a["ss:HRef"]=$8(e.l.Target),e.l.Tooltip&&(a["x:HRefScreenTip"]=$8(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],u=0;u!=c.length;++u)c[u].s.c==o.c&&c[u].s.r==o.r&&(c[u].e.c>c[u].s.c&&(a["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(a["ss:MergeDown"]=c[u].e.r-c[u].s.r));var d="",p="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",p=String(e.v);break;case"b":d="Boolean",p=e.v?"1":"0";break;case"e":d="Error",p=oee[e.v];break;case"d":d="DateTime",p=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||_6[14]);break;case"s":d="String",p=((e.v||"")+"").replace(W8,function(e){return U8[e]}).replace(q8,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var h=Ire(n.cellXfs,e,n);a["ss:StyleID"]="s"+(21+h),a["ss:Index"]=o.c+1;var f=null!=e.v?p:"",m="z"==e.t?"":'<Data ss:Type="'+d+'">'+f+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map(function(e){var t=i7("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return i7("Comment",t,{"ss:Author":e.a})}).join("")),i7("Cell",m,a)}function lne(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=mte(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function cne(e,t,r){var n=[],i=r.SheetNames[e],s=r.Sheets[i],o=s?function(e,t,r,n){if(!e)return"";if(!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==r&&(a.Name.match(/^_xlfn\./)||s.push(one(a)))}return s.join("")}(s,0,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?function(e,t){if(!e["!ref"])return"";var r=C9(e["!ref"]),n=e["!merges"]||[],i=0,s=[];e["!cols"]&&e["!cols"].forEach(function(e,t){pte(e);var r=!!e.width,n=Pre(t,e),i={"ss:Index":t+1};r&&(i["ss:Width"]=cte(n.width)),e.hidden&&(i["ss:Hidden"]="1"),s.push(i7("Column",null,i))});for(var o=Array.isArray(e),a=r.s.r;a<=r.e.r;++a){for(var l=[lne(a,(e["!rows"]||[])[a])],c=r.s.c;c<=r.e.c;++c){var u=!1;for(i=0;i!=n.length;++i)if(!(n[i].s.c>c||n[i].s.r>a||n[i].e.c<c||n[i].e.r<a)){n[i].s.c==c&&n[i].s.r==a||(u=!0);break}if(!u){var d={r:a,c:c},p=x9(d),h=o?(e[a]||[])[c]:e[p];l.push(ane(h,p,e,t,0,0,d))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(function(e,t,r,n){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(i7("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(i7("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(i7("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(i7("Visible",1==n.Workbook.Sheets[r].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&(!n.Workbook.Sheets[s]||n.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(r7("ProtectContents","True")),e["!protect"].objects&&i.push(r7("ProtectObjects","True")),e["!protect"].scenarios&&i.push(r7("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||i.push(r7("EnableSelection","UnlockedCells")):i.push(r7("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&i.push("<"+t[1]+"/>")})),0==i.length?"":i7("WorksheetOptions",i.join(""),{xmlns:w7})}(s,0,e,r)),n.join("")}function une(e,t){t||(t={}),e.SSF||(e.SSF=j8(_6)),e.SSF&&(p8(),d8(e.SSF),t.revssf=w8(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Ire(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(sne(e,t)),r.push(""),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(i7("Worksheet",cne(n,t,e),{"ss:Name":$8(e.SheetNames[n])}));return r[2]=function(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var n=[];n.push(i7("NumberFormat",null,{"ss:Format":$8(_6[e.numFmtId])}));var i={"ss:ID":"s"+(21+t)};r.push(i7("Style",n.join(""),i))}),i7("Styles",r.join(""))}(0,t),r[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var i=t[n];null==i.Sheet&&(i.Name.match(/^_xlfn\./)||r.push(one(i)))}return i7("Names",r.join(""))}(e),B8+i7("Workbook",r.join(""),{xmlns:S7,"xmlns:o":x7,"xmlns:x":w7,"xmlns:ss":S7,"xmlns:dt":C7,"xmlns:html":N7})}var dne="e0859ff2f94f6810ab9108002b27b3d9",pne="02d5cdd59c2e1b10939708002b2cf9ae",hne="05d5cdd59c2e1b10939708002b2cf9ae";function fne(e,t){var r=t||{},n=m8.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return m8.utils.cfb_add(n,i,Tne(e,r)),8==r.biff&&(e.Props||e.Custprops)&&function(e,t){var r,n=[],i=[],s=[],o=0,a=b8(ree,"n"),l=b8(nee,"n");if(e.Props)for(r=y8(e.Props),o=0;o<r.length;++o)(Object.prototype.hasOwnProperty.call(a,r[o])?n:Object.prototype.hasOwnProperty.call(l,r[o])?i:s).push([r[o],e.Props[r[o]]]);if(e.Custprops)for(r=y8(e.Custprops),o=0;o<r.length;++o)Object.prototype.hasOwnProperty.call(e.Props||{},r[o])||(Object.prototype.hasOwnProperty.call(a,r[o])?n:Object.prototype.hasOwnProperty.call(l,r[o])?i:s).push([r[o],e.Custprops[r[o]]]);var c=[];for(o=0;o<s.length;++o)Nee.indexOf(s[o][0])>-1||wee.indexOf(s[o][0])>-1||null!=s[o][1]&&c.push(s[o]);i.length&&m8.utils.cfb_add(t,"/SummaryInformation",Iee(i,dne,l,nee)),(n.length||c.length)&&m8.utils.cfb_add(t,"/DocumentSummaryInformation",Iee(n,pne,a,ree,c.length?c:null,hne))}(e,n),8==r.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(r,n){if(0!=n){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==i.slice(-1)&&m8.utils.cfb_add(e,i,t.FileIndex[n].content)}})}(n,m8.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),n}var mne={0:{f:function(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,7&s&&(r.level=7&s),16&s&&(r.hidden=!0),32&s&&(r.hpt=i/20),r}},1:{f:function(e){return[M9(e)]}},2:{f:function(e){return[M9(e),G9(e),"n"]}},3:{f:function(e){return[M9(e),e.read_shift(1),"e"]}},4:{f:function(e){return[M9(e),e.read_shift(1),"b"]}},5:{f:function(e){return[M9(e),Q9(e),"n"]}},6:{f:function(e){return[M9(e),k9(e),"str"]}},7:{f:function(e){return[M9(e),e.read_shift(4),"s"]}},8:{f:function(e,t,r){var n=e.l+t,i=M9(e);i.r=r["!row"];var s=[i,k9(e),"str"];if(r.cellFormula){e.l+=2;var o=gre(e,n-e.l,r);s[3]=hre(o,0,i,r.supbooks,r)}else e.l=n;return s}},9:{f:function(e,t,r){var n=e.l+t,i=M9(e);i.r=r["!row"];var s=[i,Q9(e),"n"];if(r.cellFormula){e.l+=2;var o=gre(e,n-e.l,r);s[3]=hre(o,0,i,r.supbooks,r)}else e.l=n;return s}},10:{f:function(e,t,r){var n=e.l+t,i=M9(e);i.r=r["!row"];var s=[i,e.read_shift(1),"b"];if(r.cellFormula){e.l+=2;var o=gre(e,n-e.l,r);s[3]=hre(o,0,i,r.supbooks,r)}else e.l=n;return s}},11:{f:function(e,t,r){var n=e.l+t,i=M9(e);i.r=r["!row"];var s=[i,e.read_shift(1),"e"];if(r.cellFormula){e.l+=2;var o=gre(e,n-e.l,r);s[3]=hre(o,0,i,r.supbooks,r)}else e.l=n;return s}},12:{f:function(e){return[z9(e)]}},13:{f:function(e){return[z9(e),G9(e),"n"]}},14:{f:function(e){return[z9(e),e.read_shift(1),"e"]}},15:{f:function(e){return[z9(e),e.read_shift(1),"b"]}},16:{f:function(e){return[z9(e),Q9(e),"n"]}},17:{f:function(e){return[z9(e),k9(e),"str"]}},18:{f:function(e){return[z9(e),e.read_shift(4),"s"]}},19:{f:j9},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),s=$9(e),o=yre(e,0,r),a=W9(e);e.l=n;var l={Name:s,Ptg:o};return i<268435455&&(l.Sheet=i),a&&(l.Comment=a),l}},40:{},42:{},43:{f:function(e,t,r){var n={};n.sz=e.read_shift(2)/20;var i=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1),700===e.read_shift(2)&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(n.underline=s);var o=e.read_shift(1);o>0&&(n.family=o);var a=e.read_shift(1);switch(a>0&&(n.charset=a),e.l++,n.color=function(e){var t={},r=e.read_shift(1)>>>1,n=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),a=e.read_shift(1);switch(e.l++,r){case 0:t.auto=1;break;case 1:t.index=n;var l=see[n];l&&(t.rgb=ate(l));break;case 2:t.rgb=ate([s,o,a]);break;case 3:t.theme=n}return 0!=i&&(t.tint=i>0?i/32767:i/32768),t}(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor"}return n.name=k9(e),n}},44:{f:function(e,t){return[e.read_shift(2),k9(e)]}},45:{f:wte},46:{f:Tte},47:{f:function(e,t){var r=e.l+t,n=e.read_shift(2),i=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:i}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:function(e,t,r){if(!r.cellStyles)return a9(e,t);var n=r&&r.biff>=12?4:2,i=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),a=e.read_shift(n),l=e.read_shift(2);2==n&&(e.l+=2);var c={s:i,e:s,w:o,ixfe:a,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}},62:{f:function(e){return[M9(e),j9(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=x9(r);var n=e.read_shift(1);return 2&n&&(t.l="1"),8&n&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:a9,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var r={},n=e[e.l];return++e.l,r.above=!(64&n),r.left=!(128&n),e.l+=18,r.name=B9(e),r}},148:{f:Mre,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var i=t>8?k9(e):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(65536&n),r.backupFile=!!(64&n),r.checkCompatibility=!!(4096&n),r.date1904=!!(1&n),r.filterPrivacy=!!(8&n),r.hidePivotFieldList=!!(1024&n),r.promptedSolutions=!!(16&n),r.publishItems=!!(2048&n),r.refreshAllConnections=!!(262144&n),r.saveExternalLinkValues=!!(128&n),r.showBorderUnselectedTables=!!(4&n),r.showInkAnnotation=!!(32&n),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(32768&n),r.updateLinks=["userSet","never","always"][n>>8&3],r}},154:{},155:{},156:{f:function(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=V9(e),r.name=k9(e),r}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:Y9},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:zre},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:k9(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:V9},357:{},358:{},359:{},360:{T:1},361:{},362:{f:function(e,t,r){if(r.biff<8)return function(e,t,r){3==e[e.l+1]&&e[e.l]++;var n=Oee(e,0,r);return 3==n.charCodeAt(0)?n.slice(1):n}(e,0,r);for(var n=[],i=e.l+t,s=e.read_shift(r.biff>8?4:2);0!==s--;)n.push(Bee(e,r.biff,r));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return n}},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,r){var n=e.l+t,i=J9(e),s=e.read_shift(1),o=[i];if(o[2]=s,r.cellFormula){var a=vre(e,n-e.l,r);o[1]=a}else e.l=n;return o}},427:{f:function(e,t,r){var n=e.l+t,i=[Y9(e)];if(r.cellFormula){var s=bre(e,n-e.l,r);i[1]=s,e.l=n}else e.l=n;return i}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return Bre.forEach(function(r){t[r]=Q9(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var r=e.l+t,n=Y9(e),i=W9(e),s=k9(e),o=k9(e),a=k9(e);e.l=r;var l={rfx:n,relId:i,loc:s,display:a};return o&&(l.Tooltip=o),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:V9},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Lte},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var r=Y9(e);return t.rfx=r.s,t.ref=x9(r.s),e.l+=16,t}},636:{T:-1},637:{f:O9},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:k9(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function vne(e,t,r,n){var i=t;if(!isNaN(i)){var s=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&G7(r)&&e.push(r)}}function gne(e,t,r){return e||(e=l9(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function yne(e,t,r,n){if(null!=t.v)switch(t.t){case"d":case"n":var i="d"==t.t?C8(_8(t.v)):t.v;return void(i==(0|i)&&i>=0&&i<65536?vne(e,2,(s=r,o=n,a=i,l=l9(9),gne(l,s,o),l.write_shift(2,a),l)):vne(e,3,function(e,t,r){var n=l9(15);return gne(n,e,t),n.write_shift(8,r,"f"),n}(r,n,i)));case"b":case"e":return void vne(e,5,function(e,t,r,n){var i=l9(9);return gne(i,e,t),jee(r,n||"b",i),i}(r,n,t.v,t.t));case"s":case"str":return void vne(e,4,function(e,t,r){var n=l9(8+2*r.length);return gne(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}(r,n,(t.v||"").slice(0,255)))}var s,o,a,l;vne(e,1,gne(null,r,n))}function bne(e,t){for(var r=t||{},n=c9(),i=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(i=s);if(0==i&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return vne(n,4==r.biff?1033:3==r.biff?521:9,Hee(0,16,r)),function(e,t,r,n){var i,s=Array.isArray(t),o=C9(t["!ref"]||"A1"),a="",l=[];if(o.e.c>255||o.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),i=S9(o)}for(var c=o.s.r;c<=o.e.r;++c){a=v9(c);for(var u=o.s.c;u<=o.e.c;++u){c===o.s.r&&(l[u]=y9(u)),i=l[u]+a;var d=s?(t[c]||[])[u]:t[i];d&&yne(e,d,c,u)}}}(n,e.Sheets[e.SheetNames[i]],0,r),vne(n,10),n.end()}function xne(e,t,r){vne(e,49,function(e,t){var r=e.name||"Arial",n=t&&5==t.biff,i=l9(n?15+r.length:16+2*r.length);return i.write_shift(2,20*e.sz),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}({sz:12,name:"Arial"},r))}function wne(e,t){if(t){var r=0;t.forEach(function(t,n){++r<=256&&t&&vne(e,125,function(e,t){var r=l9(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,256*e.width),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}(Pre(n,t),n))})}}function Sne(e,t,r,n,i){var s=16+Ire(i.cellXfs,t,i);if(null!=t.v||t.bf)if(t.bf)vne(e,6,fre(t,r,n,0,s));else switch(t.t){case"d":case"n":vne(e,515,function(e,t,r,n){var i=l9(14);return Fee(e,t,n,i),X9(r,i),i}(r,n,"d"==t.t?C8(_8(t.v)):t.v,s));break;case"b":case"e":vne(e,517,function(e,t,r,n,i,s){var o=l9(8);return Fee(e,t,n,o),jee(r,s,o),o}(r,n,t.v,s,0,t.t));break;case"s":case"str":if(i.bookSST)vne(e,253,function(e,t,r,n){var i=l9(10);return Fee(e,t,n,i),i.write_shift(4,r),i}(r,n,Nre(i.Strings,t.v,i.revStrings),s));else vne(e,516,function(e,t,r,n,i){var s=!i||8==i.biff,o=l9(+s+8+(1+s)*r.length);return Fee(e,t,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}(r,n,(t.v||"").slice(0,255),s,i));break;default:vne(e,513,Fee(r,n,s))}else vne(e,513,Fee(r,n,s))}function Cne(e,t,r){var n,i,s=c9(),o=r.SheetNames[e],a=r.Sheets[o]||{},l=(r||{}).Workbook||{},c=(l.Sheets||[])[e]||{},u=Array.isArray(a),d=8==t.biff,p="",h=[],f=C9(a["!ref"]||"A1"),m=d?65536:16384;if(f.e.c>255||f.e.r>=m){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,m-1)}vne(s,2057,Hee(0,16,t)),vne(s,13,Aee(1)),vne(s,12,Aee(100)),vne(s,15,kee(!0)),vne(s,17,kee(!1)),vne(s,16,X9(.001)),vne(s,95,kee(!0)),vne(s,42,kee(!1)),vne(s,43,kee(!1)),vne(s,130,Aee(1)),vne(s,128,((i=l9(8)).write_shift(4,0),i.write_shift(2,0),i.write_shift(2,0),i)),vne(s,131,kee(!1)),vne(s,132,kee(!1)),d&&wne(s,a["!cols"]),vne(s,512,function(e,t){var r=8!=t.biff&&t.biff?2:4,n=l9(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}(f,t)),d&&(a["!links"]=[]);for(var v=f.s.r;v<=f.e.r;++v){p=v9(v);for(var g=f.s.c;g<=f.e.c;++g){v===f.s.r&&(h[g]=y9(g)),n=h[g]+p;var y=u?(a[v]||[])[g]:a[n];y&&(Sne(s,y,v,g,t),d&&y.l&&a["!links"].push([n,y.l]))}}var b=c.CodeName||c.name||o;return d&&vne(s,574,function(e){var t=l9(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((l.Views||[])[0])),d&&(a["!merges"]||[]).length&&vne(s,229,function(e){var t=l9(2+8*e.length);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Wee(e[r],t);return t}(a["!merges"])),d&&function(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];vne(e,440,Gee(n)),n[1].Tooltip&&vne(e,2048,Kee(n))}delete t["!links"]}(s,a),vne(s,442,Mee(b)),d&&function(e,t){var r=l9(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),vne(e,2151,r),(r=l9(39)).write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Wee(C9(t["!ref"]||"A1"),r),r.write_shift(4,4),vne(e,2152,r)}(s,a),vne(s,10),s.end()}function Ene(e,t,r){var n,i=c9(),s=(e||{}).Workbook||{},o=s.Sheets||[],a=s.WBProps||{},l=8==r.biff,c=5==r.biff;(vne(i,2057,Hee(0,5,r)),"xla"==r.bookType&&vne(i,135),vne(i,225,l?Aee(1200):null),vne(i,193,function(e,t){t||(t=l9(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}(2)),c&&vne(i,191),c&&vne(i,192),vne(i,226),vne(i,92,function(e,t){var r=!t||8==t.biff,n=l9(r?112:54);for(n.write_shift(8==t.biff?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}(0,r)),vne(i,66,Aee(l?1200:1252)),l&&vne(i,353,Aee(0)),l&&vne(i,448),vne(i,317,function(e){for(var t=l9(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}(e.SheetNames.length)),l&&e.vbaraw&&vne(i,211),l&&e.vbaraw)&&vne(i,442,Mee(a.CodeName||"ThisWorkbook"));vne(i,156,Aee(17)),vne(i,25,kee(!1)),vne(i,18,kee(!1)),vne(i,19,Aee(0)),l&&vne(i,431,kee(!1)),l&&vne(i,444,Aee(0)),vne(i,61,((n=l9(18)).write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n)),vne(i,64,kee(!1)),vne(i,141,Aee(0)),vne(i,34,kee("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&function(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}(e.Workbook.WBProps.date1904)?"true":"false"}(e))),vne(i,14,kee(!0)),l&&vne(i,439,kee(!1)),vne(i,218,Aee(0)),xne(i,0,r),function(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)null!=t[i]&&vne(e,1054,Vee(i,t[i],r))})}(i,e.SSF,r),function(e,t){for(var r=0;r<16;++r)vne(e,224,qee({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(r){vne(e,224,qee(r,0,t))})}(i,r),l&&vne(i,352,kee(!1));var u=i.end(),d=c9();l&&vne(d,140,function(e){return e||(e=l9(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),l&&r.Strings&&function(e,t,r){var n=(r||[]).length||0;if(n<=8224)return vne(e,t,r,n);var i=t;if(!isNaN(i)){for(var s=r.parts||[],o=0,a=0,l=0;l+(s[o]||8224)<=8224;)l+=s[o]||8224,o++;var c=e.next(4);for(c.write_shift(2,i),c.write_shift(2,l),e.push(r.slice(a,a+l)),a+=l;a<n;){for((c=e.next(4)).write_shift(2,60),l=0;l+(s[o]||8224)<=8224;)l+=s[o]||8224,o++;c.write_shift(2,l),e.push(r.slice(a,a+l)),a+=l}}}(d,252,function(e){var t=l9(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var r=[],n=0;n<e.length;++n)r[n]=Dee(e[n]);var i=b6([t].concat(r));return i.parts=[t.length].concat(r.map(function(e){return e.length})),i}(r.Strings)),vne(d,10);var p=d.end(),h=c9(),f=0,m=0;for(m=0;m<e.SheetNames.length;++m)f+=(l?12:11)+(l?2:1)*e.SheetNames[m].length;var v=u.length+f+p.length;for(m=0;m<e.SheetNames.length;++m){vne(h,133,$ee({pos:v,hs:(o[m]||{}).Hidden||0,dt:0,name:e.SheetNames[m]},r)),v+=t[m].length}var g=h.end();if(f!=g.length)throw new Error("BS8 "+f+" != "+g.length);var y=[];return u.length&&y.push(u),g.length&&y.push(g),p.length&&y.push(p),b6(y)}function Tne(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(n&&n["!ref"])w9(n["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}var i=t||{};switch(i.biff||2){case 8:case 5:return function(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=j8(_6)),e&&e.SSF&&(p8(),d8(e.SSF),r.revssf=w8(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Zne(r),r.cellXfs=[],Ire(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)n[n.length]=Cne(i,r,e);return n.unshift(Ene(e,n,r)),b6(n)}(e,t);case 4:case 3:case 2:return bne(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function Nne(e,t,r,n){for(var i=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var a=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>r||i[c].s.c>o||i[c].e.r<r||i[c].e.c<o)){if(i[c].s.r<r||i[c].s.c<o){a=-1;break}a=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(a<0)){var u=x9({r:r,c:o}),d=n.dense?(e[r]||[])[o]:e[u],p=d&&null!=d.v&&(d.h||G8(d.w||(T9(d),d.w)||""))||"",h={};a>1&&(h.rowspan=a),l>1&&(h.colspan=l),n.editable?p='<span contenteditable="true">'+p+"</span>":d&&(h["data-t"]=d&&d.t||"z",null!=d.v&&(h["data-v"]=d.v),null!=d.z&&(h["data-z"]=d.z),d.l&&"#"!=(d.l.Target||"#").charAt(0)&&(p='<a href="'+d.l.Target+'">'+p+"</a>")),h.id=(n.id||"sjs")+"-"+u,s.push(i7("td",p,h))}}return"<tr>"+s.join("")+"</tr>"}function Pne(e,t){var r=t||{},n=null!=r.header?r.header:'<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',i=null!=r.footer?r.footer:"</body></html>",s=[n],o=w9(e["!ref"]);r.dense=Array.isArray(e),s.push(function(e,t,r){return[].join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}(0,0,r));for(var a=o.s.r;a<=o.e.r;++a)s.push(Nne(e,o,a,r));return s.push("</table>"+i),s.join("")}function Rne(e,t,r){var n=r||{},i=0,s=0;if(null!=n.origin)if("number"==typeof n.origin)i=n.origin;else{var o="string"==typeof n.origin?b9(n.origin):n.origin;i=o.r,s=o.c}var a=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(e["!ref"]){var u=w9(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),-1==i&&(c.e.r=i=u.e.r+1)}var d=[],p=0,h=e["!rows"]||(e["!rows"]=[]),f=0,m=0,v=0,g=0,y=0,b=0;for(e["!cols"]||(e["!cols"]=[]);f<a.length&&m<l;++f){var x=a[f];if(kne(x)){if(n.display)continue;h[m]={hidden:!0}}var w=x.children;for(v=g=0;v<w.length;++v){var S=w[v];if(!n.display||!kne(S)){var C=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):e7(S.innerHTML),E=S.getAttribute("data-z")||S.getAttribute("z");for(p=0;p<d.length;++p){var T=d[p];T.s.c==g+s&&T.s.r<m+i&&m+i<=T.e.r&&(g=T.e.c+1-s,p=-1)}b=+S.getAttribute("colspan")||1,((y=+S.getAttribute("rowspan")||1)>1||b>1)&&d.push({s:{r:m+i,c:g+s},e:{r:m+i+(y||1)-1,c:g+s+(b||1)-1}});var N={t:"s",v:C},P=S.getAttribute("data-t")||S.getAttribute("t")||"";null!=C&&(0==C.length?N.t=P||"z":n.raw||0==C.trim().length||"s"==P||("TRUE"===C?N={t:"b",v:!0}:"FALSE"===C?N={t:"b",v:!1}:isNaN(D8(C))?isNaN(L8(C).getDate())||(N={t:"d",v:_8(C)},n.cellDates||(N={t:"n",v:C8(N.v)}),N.z=n.dateNF||_6[14]):N={t:"n",v:D8(C)})),void 0===N.z&&null!=E&&(N.z=E);var R="",I=S.getElementsByTagName("A");if(I&&I.length)for(var k=0;k<I.length&&(!I[k].hasAttribute("href")||"#"==(R=I[k].getAttribute("href")).charAt(0));++k);R&&"#"!=R.charAt(0)&&(N.l={Target:R}),n.dense?(e[m+i]||(e[m+i]=[]),e[m+i][g+s]=N):e[x9({c:g+s,r:m+i})]=N,c.e.c<g+s&&(c.e.c=g+s),g+=b}}++m}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,m-1+i),e["!ref"]=S9(c),m>=l&&(e["!fullref"]=S9((c.e.r=a.length-f+m-1+i,c))),e}function Ine(e,t){return Rne((t||{}).dense?[]:{},e,t)}function kne(e){var t="",r=function(e){return e.ownerDocument.defaultView&&"function"==typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"==typeof getComputedStyle?getComputedStyle:null}(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var _ne=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+n7({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return B8+t}}(),Ane=function(){var e=function(e){return $8(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",r=function(r,n,i){var s=[];s.push('      <table:table table:name="'+$8(n.SheetNames[i])+'" table:style-name="ta1">\n');var o=0,a=0,l=w9(r["!ref"]||"A1"),c=r["!merges"]||[],u=0,d=Array.isArray(r);if(r["!cols"])for(a=0;a<=l.e.c;++a)s.push("        <table:table-column"+(r["!cols"][a]?' table:style-name="co'+r["!cols"][a].ods+'"':"")+"></table:table-column>\n");var p="",h=r["!rows"]||[];for(o=0;o<l.s.r;++o)p=h[o]?' table:style-name="ro'+h[o].ods+'"':"",s.push("        <table:table-row"+p+"></table:table-row>\n");for(;o<=l.e.r;++o){for(p=h[o]?' table:style-name="ro'+h[o].ods+'"':"",s.push("        <table:table-row"+p+">\n"),a=0;a<l.s.c;++a)s.push(t);for(;a<=l.e.c;++a){var f=!1,m={},v="";for(u=0;u!=c.length;++u)if(!(c[u].s.c>a||c[u].s.r>o||c[u].e.c<a||c[u].e.r<o)){c[u].s.c==a&&c[u].s.r==o||(f=!0),m["table:number-columns-spanned"]=c[u].e.c-c[u].s.c+1,m["table:number-rows-spanned"]=c[u].e.r-c[u].s.r+1;break}if(f)s.push("          <table:covered-table-cell/>\n");else{var g=x9({r:o,c:a}),y=d?(r[o]||[])[a]:r[g];if(y&&y.f&&(m["table:formula"]=$8(Cre(y.f)),y.F&&y.F.slice(0,g.length)==g)){var b=w9(y.F);m["table:number-matrix-columns-spanned"]=b.e.c-b.s.c+1,m["table:number-matrix-rows-spanned"]=b.e.r-b.s.r+1}if(y){switch(y.t){case"b":v=y.v?"TRUE":"FALSE",m["office:value-type"]="boolean",m["office:boolean-value"]=y.v?"true":"false";break;case"n":v=y.w||String(y.v||0),m["office:value-type"]="float",m["office:value"]=y.v||0;break;case"s":case"str":v=null==y.v?"":y.v,m["office:value-type"]="string";break;case"d":v=y.w||_8(y.v).toISOString(),m["office:value-type"]="date",m["office:date-value"]=_8(y.v).toISOString(),m["table:style-name"]="ce1";break;default:s.push(t);continue}var x=e(v);if(y.l&&y.l.Target){var w=y.l.Target;"#"==(w="#"==w.charAt(0)?"#"+Ere(w.slice(1)):w).charAt(0)||w.match(/^\w+:/)||(w="../"+w),x=i7("text:a",x,{"xlink:href":w.replace(/&/g,"&amp;")})}s.push("          "+i7("table:table-cell",i7("text:p",x,{}),m)+"\n")}else s.push(t)}}s.push("        </table:table-row>\n")}return s.push("      </table:table>\n"),s.join("")};return function(e,t){var n=[B8],i=n7({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=n7({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(n.push("<office:document"+i+s+">\n"),n.push(vee().replace(/office:document-meta/g,"office:meta"))):n.push("<office:document-content"+i+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var n=0;n<t["!cols"].length;++n)if(t["!cols"][n]){var i=t["!cols"][n];if(null==i.width&&null==i.wpx&&null==i.wch)continue;pte(i),i.ods=r;var s=t["!cols"][n].wpx+"px";e.push('  <style:style style:name="co'+r+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++r}});var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var r=0;r<t["!rows"].length;++r)if(t["!rows"][r]){t["!rows"][r].ods=n;var i=t["!rows"][r].hpx+"px";e.push('  <style:style style:name="ro'+n+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+i+'"/>\n'),e.push("  </style:style>\n"),++n}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(n,e),n.push("  <office:body>\n"),n.push("    <office:spreadsheet>\n");for(var o=0;o!=e.SheetNames.length;++o)n.push(r(e.Sheets[e.SheetNames[o]],e,o));return n.push("    </office:spreadsheet>\n"),n.push("  </office:body>\n"),"fods"==t.bookType?n.push("</office:document>"):n.push("</office:document-content>"),n.join("")}}();function jne(e,t){if("fods"==t.bookType)return Ane(e,t);var r=F8(),n="",i=[],s=[];return z8(r,n="mimetype","application/vnd.oasis.opendocument.spreadsheet"),z8(r,n="content.xml",Ane(e,t)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),z8(r,n="styles.xml",_ne(e,t)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),z8(r,n="meta.xml",B8+vee()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),z8(r,n="manifest.rdf",function(e){var t=[B8];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var r=0;r!=e.length;++r)t.push(fee(e[r][0],e[r][1])),t.push(mee("",e[r][0]));return t.push(fee("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(s)),i.push([n,"application/rdf+xml"]),z8(r,n="META-INF/manifest.xml",function(e){var t=[B8];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(i)),r}
/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function One(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Dne(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):v6(X8(e))}function Mne(e){var t=e.reduce(function(e,t){return e+t.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(e,n),n+=e.length}),r}function Lne(e,t){var r=t?t[0]:0,n=127&e[r];e:if(e[r++]>=128){if(n|=(127&e[r])<<7,e[r++]<128)break e;if(n|=(127&e[r])<<14,e[r++]<128)break e;if(n|=(127&e[r])<<21,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,28),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,35),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,42),++r,e[r++]<128)break e}return t&&(t[0]=r),n}function zne(e){var t=new Uint8Array(7);t[0]=127&e;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383)break e;if(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)break e;if(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)break e;if(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)break e;if(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103)break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Fne(e){var t=0,r=127&e[t];e:if(e[t++]>=128){if(r|=(127&e[t])<<7,e[t++]<128)break e;if(r|=(127&e[t])<<14,e[t++]<128)break e;if(r|=(127&e[t])<<21,e[t++]<128)break e;r|=(127&e[t])<<28}return r}function Bne(e){for(var t=[],r=[0];r[0]<e.length;){var n,i=r[0],s=Lne(e,r),o=7&s,a=0;if(0==(s=Math.floor(s/8)))break;switch(o){case 0:for(var l=r[0];e[r[0]++]>=128;);n=e.slice(l,r[0]);break;case 5:a=4,n=e.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,n=e.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=Lne(e,r),n=e.slice(r[0],r[0]+a),r[0]+=a;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(s," at offset ").concat(i))}var c={data:n,type:o};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function Une(e){var t=[];return e.forEach(function(e,r){e.forEach(function(e){e.data&&(t.push(zne(8*r+e.type)),2==e.type&&t.push(zne(e.data.length)),t.push(e.data))})}),Mne(t)}function Wne(e){for(var t,r=[],n=[0];n[0]<e.length;){var i=Lne(e,n),s=Bne(e.slice(n[0],n[0]+i));n[0]+=i;var o={id:Fne(s[1][0].data),messages:[]};s[2].forEach(function(t){var r=Bne(t.data),i=Fne(r[3][0].data);o.messages.push({meta:r,data:e.slice(n[0],n[0]+i)}),n[0]+=i}),(null==(t=s[3])?void 0:t[0])&&(o.merge=Fne(s[3][0].data)>>>0>0),r.push(o)}return r}function Hne(e){var t=[];return e.forEach(function(e){var r=[];r[1]=[{data:zne(e.id),type:0}],r[2]=[],null!=e.merge&&(r[3]=[{data:zne(+!!e.merge),type:0}]);var n=[];e.messages.forEach(function(e){n.push(e.data),e.meta[3]=[{type:0,data:zne(e.data.length)}],r[2].push({data:Une(e.meta),type:2})});var i=Une(r);t.push(zne(i.length)),t.push(i),n.forEach(function(e){return t.push(e)})}),Mne(t)}function $ne(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Lne(t,r),i=[];r[0]<t.length;){var s=3&t[r[0]];if(0!=s){var o=0,a=0;if(1==s?(a=4+(t[r[0]]>>2&7),o=(224&t[r[0]++])<<3,o|=t[r[0]++]):(a=1+(t[r[0]++]>>2),2==s?(o=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(o=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),i=[Mne(i)],0==o)throw new Error("Invalid offset 0");if(o>i[0].length)throw new Error("Invalid offset beyond length");if(a>=o)for(i.push(i[0].slice(-o)),a-=o;a>=i[i.length-1].length;)i.push(i[i.length-1]),a-=i[i.length-1].length;i.push(i[0].slice(-o,-o+a))}else{var l=t[r[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[r[0]],c>1&&(l|=t[r[0]+1]<<8),c>2&&(l|=t[r[0]+2]<<16),c>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=c}i.push(t.slice(r[0],r[0]+l)),r[0]+=l}}var u=Mne(i);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function Vne(e){for(var t=[],r=0;r<e.length;){var n=e[r++],i=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push($ne(n,e.slice(r,r+i))),r+=i}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Mne(t)}function qne(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),i=new Uint8Array(4);t.push(i);var s=zne(n),o=s.length;t.push(s),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,i[0]=0,i[1]=255&o,i[2]=o>>8&255,i[3]=o>>16&255,r+=n}return Mne(t)}function Gne(e,t){var r=new Uint8Array(32),n=One(r),i=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,function(e,t,r){var n=Math.floor(0==r?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(127&n)<<1;for(var s=0;i>=1;++s,i/=256)e[t+s]=255&i;e[t+15]|=r>=0?0:128}(r,i,e.v),s|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,e.v?1:0,!0),s|=2,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(i,t.indexOf(e.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,i)}function Kne(e,t){var r=new Uint8Array(32),n=One(r),i=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(i,e.v,!0),s|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,e.v?1:0,!0),s|=32,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(i,t.indexOf(e.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,i)}function Jne(e){return Lne(Bne(e)[1][0].data)}function Yne(e,t,r){var n,i,s,o;if(!(null==(n=e[6])?void 0:n[0])||!(null==(i=e[7])?void 0:i[0]))throw"Mutation only works on post-BNC storages!";if((null==(o=null==(s=e[8])?void 0:s[0])?void 0:o.data)&&Fne(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var a=0,l=One(e[7][0].data),c=0,u=[],d=One(e[4][0].data),p=0,h=[],f=0;f<t.length;++f)if(null!=t[f]){var m,v;switch(l.setUint16(2*f,c,!0),d.setUint16(2*f,p,!0),typeof t[f]){case"string":m=Gne({t:"s",v:t[f]},r),v=Kne({t:"s",v:t[f]},r);break;case"number":m=Gne({t:"n",v:t[f]},r),v=Kne({t:"n",v:t[f]},r);break;case"boolean":m=Gne({t:"b",v:t[f]},r),v=Kne({t:"b",v:t[f]},r);break;default:throw new Error("Unsupported value "+t[f])}u.push(m),c+=m.length,h.push(v),p+=v.length,++a}else l.setUint16(2*f,65535,!0),d.setUint16(2*f,65535);for(e[2][0].data=zne(a);f<e[7][0].data.length/2;++f)l.setUint16(2*f,65535,!0),d.setUint16(2*f,65535,!0);return e[6][0].data=Mne(u),e[3][0].data=Mne(h),a}function Zne(e){var t;(t=[["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]],function(e){for(var r=0;r!=t.length;++r){var n=t[r];void 0===e[n[0]]&&(e[n[0]]=n[1]),"n"===n[2]&&(e[n[0]]=Number(e[n[0]]))}})(e)}function Qne(e,t){return"ods"==t.bookType?jne(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=w9(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(S9(n)));var s=sie(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&o.push(e)})});var a={},l=[],c=m8.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],r=e[1];2==t.type&&t.name.match(/\.iwa/)&&Wne(Vne(t.content)).forEach(function(e){l.push(e.id),a[e.id]={deps:[],location:r,type:Fne(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var u=l.filter(function(e){return e>1}).map(function(e){return[e,zne(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&Wne(Vne(t.content)).forEach(function(e){e.messages.forEach(function(t){u.forEach(function(t){e.messages.some(function(e){return 11006!=Fne(e.meta[1][0].data)&&function(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}(e.data,t[1])})&&a[t[0]].deps.push(e.id)})})})});for(var d,p=m8.find(c,a[1].location),h=Wne(Vne(p.content)),f=0;f<h.length;++f){var m=h[f];1==m.id&&(d=m)}var v=Jne(Bne(d.messages[0].data)[1][0].data);for(h=Wne(Vne((p=m8.find(c,a[v].location)).content)),f=0;f<h.length;++f)(m=h[f]).id==v&&(d=m);for(v=Jne(Bne(d.messages[0].data)[2][0].data),h=Wne(Vne((p=m8.find(c,a[v].location)).content)),f=0;f<h.length;++f)(m=h[f]).id==v&&(d=m);for(v=Jne(Bne(d.messages[0].data)[2][0].data),h=Wne(Vne((p=m8.find(c,a[v].location)).content)),f=0;f<h.length;++f)(m=h[f]).id==v&&(d=m);var g=Bne(d.messages[0].data);g[6][0].data=zne(n.e.r+1),g[7][0].data=zne(n.e.c+1);for(var y=Jne(g[46][0].data),b=m8.find(c,a[y].location),x=Wne(Vne(b.content)),w=0;w<x.length&&x[w].id!=y;++w);if(x[w].id!=y)throw"Bad ColumnRowUIDMapArchive";var S=Bne(x[w].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var C=0;C<=n.e.c;++C){var E=[];E[1]=E[2]=[{type:0,data:zne(C+420690)}],S[1].push({type:2,data:Une(E)}),S[2].push({type:0,data:zne(C)}),S[3].push({type:0,data:zne(C)})}S[4]=[],S[5]=[],S[6]=[];for(var T=0;T<=n.e.r;++T)(E=[])[1]=E[2]=[{type:0,data:zne(T+726270)}],S[4].push({type:2,data:Une(E)}),S[5].push({type:0,data:zne(T)}),S[6].push({type:0,data:zne(T)});x[w].messages[0].data=Une(S),b.content=qne(Hne(x)),b.size=b.content.length,delete g[46];var N=Bne(g[4][0].data);N[7][0].data=zne(n.e.r+1);var P=Jne(Bne(N[1][0].data)[2][0].data);if((x=Wne(Vne((b=m8.find(c,a[P].location)).content)))[0].id!=P)throw"Bad HeaderStorageBucket";var R=Bne(x[0].messages[0].data);for(T=0;T<s.length;++T){var I=Bne(R[2][0].data);I[1][0].data=zne(T),I[4][0].data=zne(s[T].length),R[2][T]={type:R[2][0].type,data:Une(I)}}x[0].messages[0].data=Une(R),b.content=qne(Hne(x)),b.size=b.content.length;var k=Jne(N[2][0].data);if((x=Wne(Vne((b=m8.find(c,a[k].location)).content)))[0].id!=k)throw"Bad HeaderStorageBucket";for(R=Bne(x[0].messages[0].data),C=0;C<=n.e.c;++C)(I=Bne(R[2][0].data))[1][0].data=zne(C),I[4][0].data=zne(n.e.r+1),R[2][C]={type:R[2][0].type,data:Une(I)};x[0].messages[0].data=Une(R),b.content=qne(Hne(x)),b.size=b.content.length;var _=Jne(N[4][0].data);!function(){for(var e,t=m8.find(c,a[_].location),r=Wne(Vne(t.content)),n=0;n<r.length;++n){var i=r[n];i.id==_&&(e=i)}var s=Bne(e.messages[0].data);s[3]=[];var l=[];o.forEach(function(e,t){l[1]=[{type:0,data:zne(t)}],l[2]=[{type:0,data:zne(1)}],l[3]=[{type:2,data:Dne(e)}],s[3].push({type:2,data:Une(l)})}),e.messages[0].data=Une(s);var u=qne(Hne(r));t.content=u,t.size=t.content.length}();var A=Bne(N[3][0].data),j=A[1][0];delete A[2];var O=Bne(j.data),D=Jne(O[2][0].data);!function(){for(var e,t=m8.find(c,a[D].location),r=Wne(Vne(t.content)),i=0;i<r.length;++i){var l=r[i];l.id==D&&(e=l)}var u=Bne(e.messages[0].data);delete u[6],delete A[7];var d=new Uint8Array(u[5][0].data);u[5]=[];for(var p=0,h=0;h<=n.e.r;++h){var f=Bne(d);p+=Yne(f,s[h],o),f[1][0].data=zne(h),u[5].push({data:Une(f),type:2})}u[1]=[{type:0,data:zne(n.e.c+1)}],u[2]=[{type:0,data:zne(n.e.r+1)}],u[3]=[{type:0,data:zne(p)}],u[4]=[{type:0,data:zne(n.e.r+1)}],e.messages[0].data=Une(u);var m=qne(Hne(r));t.content=m,t.size=t.content.length}(),j.data=Une(O),N[3][0].data=Une(A),g[4][0].data=Une(N),d.messages[0].data=Une(g);var M=qne(Hne(h));return p.content=M,p.size=p.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){jte=1024,e&&!e.SSF&&(e.SSF=j8(_6));e&&e.SSF&&(p8(),d8(e.SSF),t.revssf=w8(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Tre?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xlsb"==t.bookType?"bin":"xml",n=Fte.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};Zne(t=t||{});var s=F8(),o="",a=0;t.cellXfs=[],Ire(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(z8(s,o="docProps/core.xml",bee(e.Props,t)),i.coreprops.push(o),hee(t.rels,2,o,uee.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,z8(s,o,See(e.Props)),i.extprops.push(o),hee(t.rels,3,o,uee.EXT_PROPS),e.Custprops!==e.Props&&y8(e.Custprops||{}).length>0&&(z8(s,o="docProps/custom.xml",Cee(e.Custprops)),i.custprops.push(o),hee(t.rels,4,o,uee.CUST_PROPS));for(a=1;a<=e.SheetNames.length;++a){var u={"!id":{}},d=e.Sheets[e.SheetNames[a-1]];(d||{})["!type"];if(z8(s,o="xl/worksheets/sheet"+a+"."+r,nne(a-1,o,t,e,u)),i.sheets.push(o),hee(t.wbrels,-1,"worksheets/sheet"+a+"."+r,uee.WS[0]),d){var p=d["!comments"],h=!1,f="";p&&p.length>0&&(z8(s,f="xl/comments"+a+"."+r,ine(p,f)),i.comments.push(f),hee(u,-1,"../comments"+a+"."+r,uee.CMNT),h=!0),d["!legacy"]&&h&&z8(s,"xl/drawings/vmlDrawing"+a+".vml",Ote(a,d["!comments"])),delete d["!comments"],delete d["!legacy"]}u["!id"].rId1&&z8(s,dee(o),pee(u))}null!=t.Strings&&t.Strings.length>0&&(z8(s,o="xl/sharedStrings."+r,function(e,t,r){return(".bin"===t.slice(-4)?ite:rte)(e,r)}(t.Strings,o,t)),i.strs.push(o),hee(t.wbrels,-1,"sharedStrings."+r,uee.SST));z8(s,o="xl/workbook."+r,function(e,t){return(".bin"===t.slice(-4)?rne:Xre)(e)}(e,o)),i.workbooks.push(o),hee(t.rels,1,o,uee.WB),z8(s,o="xl/theme/theme1.xml",kte(e.Themes,t)),i.themes.push(o),hee(t.wbrels,-1,"theme/theme1.xml",uee.THEME),z8(s,o="xl/styles."+r,function(e,t,r){return(".bin"===t.slice(-4)?Ite:vte)(e,r)}(e,o,t)),i.styles.push(o),hee(t.wbrels,-1,"styles."+r,uee.STY),e.vbaraw&&n&&(z8(s,o="xl/vbaProject.bin",e.vbaraw),i.vba.push(o),hee(t.wbrels,-1,"vbaProject.bin",uee.VBA));return z8(s,o="xl/metadata."+r,function(e){return(".bin"===e.slice(-4)?_te:Ate)()}(o)),i.metadata.push(o),hee(t.wbrels,-1,"metadata."+r,uee.XLMETA),z8(s,"[Content_Types].xml",cee(i,t)),z8(s,"_rels/.rels",pee(t.rels)),z8(s,"xl/_rels/workbook."+r+".rels",pee(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):function(e,t){jte=1024,e&&!e.SSF&&(e.SSF=j8(_6));e&&e.SSF&&(p8(),d8(e.SSF),t.revssf=w8(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Tre?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Fte.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};Zne(t=t||{});var s=F8(),o="",a=0;t.cellXfs=[],Ire(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(z8(s,o="docProps/core.xml",bee(e.Props,t)),i.coreprops.push(o),hee(t.rels,2,o,uee.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,z8(s,o,See(e.Props)),i.extprops.push(o),hee(t.rels,3,o,uee.EXT_PROPS),e.Custprops!==e.Props&&y8(e.Custprops||{}).length>0&&(z8(s,o="docProps/custom.xml",Cee(e.Custprops)),i.custprops.push(o),hee(t.rels,4,o,uee.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,a=1;a<=e.SheetNames.length;++a){var d={"!id":{}},p=e.Sheets[e.SheetNames[a-1]];(p||{})["!type"];if(z8(s,o="xl/worksheets/sheet"+a+"."+r,Ore(a-1,t,e,d)),i.sheets.push(o),hee(t.wbrels,-1,"worksheets/sheet"+a+"."+r,uee.WS[0]),p){var h=p["!comments"],f=!1,m="";if(h&&h.length>0){var v=!1;h.forEach(function(e){e[1].forEach(function(e){1==e.T&&(v=!0)})}),v&&(z8(s,m="xl/threadedComments/threadedComment"+a+"."+r,Mte(h,u,t)),i.threadedcomments.push(m),hee(d,-1,"../threadedComments/threadedComment"+a+"."+r,uee.TCMNT)),z8(s,m="xl/comments"+a+"."+r,Dte(h)),i.comments.push(m),hee(d,-1,"../comments"+a+"."+r,uee.CMNT),f=!0}p["!legacy"]&&f&&z8(s,"xl/drawings/vmlDrawing"+a+".vml",Ote(a,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&z8(s,dee(o),pee(d))}null!=t.Strings&&t.Strings.length>0&&(z8(s,o="xl/sharedStrings."+r,rte(t.Strings,t)),i.strs.push(o),hee(t.wbrels,-1,"sharedStrings."+r,uee.SST));z8(s,o="xl/workbook."+r,Xre(e)),i.workbooks.push(o),hee(t.rels,1,o,uee.WB),z8(s,o="xl/theme/theme1.xml",kte(e.Themes,t)),i.themes.push(o),hee(t.wbrels,-1,"theme/theme1.xml",uee.THEME),z8(s,o="xl/styles."+r,vte(e,t)),i.styles.push(o),hee(t.wbrels,-1,"styles."+r,uee.STY),e.vbaraw&&n&&(z8(s,o="xl/vbaProject.bin",e.vbaraw),i.vba.push(o),hee(t.wbrels,-1,"vbaProject.bin",uee.VBA));z8(s,o="xl/metadata."+r,Ate()),i.metadata.push(o),hee(t.wbrels,-1,"metadata."+r,uee.XLMETA),u.length>1&&(z8(s,o="xl/persons/person.xml",function(e){var t=[B8,i7("personList",null,{xmlns:d7,"xmlns:x":b7[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,r){t.push(i7("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(u)),i.people.push(o),hee(t.wbrels,-1,"persons/person.xml",uee.PEOPLE));return z8(s,"[Content_Types].xml",cee(i,t)),z8(s,"_rels/.rels",pee(t.rels)),z8(s,"xl/_rels/workbook."+r+".rels",pee(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t)}function Xne(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return g8(t.file,m8.write(e,{type:p6?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return m8.write(e,t)}function eie(e,t){var r=j8(t||{});return function(e,t){var r={},n=p6?"nodebuffer":"undefined"!=typeof Uint8Array?"array":"string";t.compression&&(r.compression="DEFLATE");if(t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?m8.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if("undefined"!=typeof Deno&&"string"==typeof i){if("binary"==t.type||"base64"==t.type)return i;i=new Uint8Array(g6(i))}return t.password&&"undefined"!=typeof encrypt_agile?Xne(encrypt_agile(i,t.password),t):"file"===t.type?g8(t.file,i):"string"==t.type?Q8(i):i}(Qne(e,r),r)}function tie(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return u6(X8(n));case"binary":return X8(n);case"string":return e;case"file":return g8(t.file,n,"utf8");case"buffer":return p6?h6(n,"utf8"):"undefined"!=typeof TextEncoder?(new TextEncoder).encode(n):tie(n,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function rie(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return"base64"==t.type?u6(r):"string"==t.type?Q8(r):r;case"file":return g8(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function nie(e,t){s6(),Qre(e);var r=j8(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),"array"==r.type){r.type="binary";var n=nie(e,r);return r.type="array",g6(n)}var i=0;if(r.sheet&&(i="number"==typeof r.sheet?r.sheet:e.SheetNames.indexOf(r.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return tie(une(e,r),r);case"slk":case"sylk":return tie(Yee.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"htm":case"html":return tie(Pne(e.Sheets[e.SheetNames[i]],r),r);case"txt":return function(e,t){switch(t.type){case"base64":return u6(e);case"binary":case"string":return e;case"file":return g8(t.file,e,"binary");case"buffer":return p6?h6(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(cie(e.Sheets[e.SheetNames[i]],r),r);case"csv":return tie(lie(e.Sheets[e.SheetNames[i]],r),r,"\ufeff");case"dif":return tie(Zee.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"dbf":return rie(Jee.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"prn":return tie(Xee.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"rtf":return tie(ote.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"eth":return tie(Qee.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"fods":return tie(jne(e,r),r);case"wk1":return rie(ete.sheet_to_wk1(e.Sheets[e.SheetNames[i]],r),r);case"wk3":return rie(ete.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),rie(Tne(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),function(e,t){var r=t||{};return Xne(fne(e,r),r)}(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return eie(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function iie(e,t,r,n,i,s,o,a){var l=v9(r),c=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),d=!0,p=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch(Nie){p.__rowNum__=r}else p.__rowNum__=r;if(!o||e[r])for(var h=t.s.c;h<=t.e.c;++h){var f=o?e[r][h]:e[n[h]+l];if(void 0!==f&&void 0!==f.t){var m=f.v;switch(f.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+f.t)}if(null!=s[h]){if(null==m)if("e"==f.t&&null===m)p[s[h]]=null;else if(void 0!==c)p[s[h]]=c;else{if(!u||null!==m)continue;p[s[h]]=null}else p[s[h]]=u&&("n"!==f.t||"n"===f.t&&!1!==a.rawNumbers)?m:T9(f,m,a);null!=m&&(d=!1)}}else{if(void 0===c)continue;null!=s[h]&&(p[s[h]]=c)}}return{row:p,isempty:d}}function sie(e,t){if(null==e||null==e["!ref"])return[];var r={t:"n",v:0},n=0,i=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=null!=c.range?c.range:e["!ref"];switch(1===c.header?n=1:"A"===c.header?n=2:Array.isArray(c.header)?n=3:null==c.header&&(n=0),typeof u){case"string":l=C9(u);break;case"number":(l=C9(e["!ref"])).s.r=u;break;default:l=u}n>0&&(i=0);var d=v9(l.s.r),p=[],h=[],f=0,m=0,v=Array.isArray(e),g=l.s.r,y=0,b={};v&&!e[g]&&(e[g]=[]);var x=c.skipHidden&&e["!cols"]||[],w=c.skipHidden&&e["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(x[y]||{}).hidden)switch(p[y]=y9(y),r=v?e[g][y]:e[p[y]+d],n){case 1:s[y]=y-l.s.c;break;case 2:s[y]=p[y];break;case 3:s[y]=c.header[y-l.s.c];break;default:if(null==r&&(r={w:"__EMPTY",t:"s"}),a=o=T9(r,null,c),m=b[o]||0){do{a=o+"_"+m++}while(b[a]);b[o]=m,b[a]=1}else b[o]=1;s[y]=a}for(g=l.s.r+i;g<=l.e.r;++g)if(!(w[g]||{}).hidden){var S=iie(e,l,g,p,n,s,v,c);(!1===S.isempty||(1===n?!1!==c.blankrows:c.blankrows))&&(h[f++]=S.row)}return h.length=f,h}var oie=/"/g;function aie(e,t,r,n,i,s,o,a){for(var l=!0,c=[],u="",d=v9(r),p=t.s.c;p<=t.e.c;++p)if(n[p]){var h=a.dense?(e[r]||[])[p]:e[n[p]+d];if(null==h)u="";else if(null!=h.v){l=!1,u=""+(a.rawNumbers&&"n"==h.t?h.v:T9(h,null,a));for(var f=0,m=0;f!==u.length;++f)if((m=u.charCodeAt(f))===i||m===s||34===m||a.forceQuotes){u='"'+u.replace(oie,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==h.f||h.F?u="":(l=!1,(u="="+h.f).indexOf(",")>=0&&(u='"'+u.replace(oie,'""')+'"'));c.push(u)}return!1===a.blankrows&&l?null:c.join(o)}function lie(e,t){var r=[],n=null==t?{}:t;if(null==e||null==e["!ref"])return"";var i=C9(e["!ref"]),s=void 0!==n.FS?n.FS:",",o=s.charCodeAt(0),a=void 0!==n.RS?n.RS:"\n",l=a.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),u="",d=[];n.dense=Array.isArray(e);for(var p=n.skipHidden&&e["!cols"]||[],h=n.skipHidden&&e["!rows"]||[],f=i.s.c;f<=i.e.c;++f)(p[f]||{}).hidden||(d[f]=y9(f));for(var m=0,v=i.s.r;v<=i.e.r;++v)(h[v]||{}).hidden||null!=(u=aie(e,i,v,d,o,l,s,n))&&(n.strip&&(u=u.replace(c,"")),(u||!1!==n.blankrows)&&r.push((m++?a:"")+u));return delete n.dense,r.join("")}function cie(e,t){return t||(t={}),t.FS="\t",t.RS="\n",lie(e,t)}function uie(e,t,r){var n,i=r||{},s=+!i.skipHeader,o=e||{},a=0,l=0;if(o&&null!=i.origin)if("number"==typeof i.origin)a=i.origin;else{var c="string"==typeof i.origin?b9(i.origin):i.origin;a=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:a+t.length-1+s}};if(o["!ref"]){var d=C9(o["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),-1==a&&(a=d.e.r+1,u.e.r=a+t.length-1+s)}else-1==a&&(a=0,u.e.r=t.length-1+s);var p=i.header||[],h=0;t.forEach(function(e,t){y8(e).forEach(function(r){-1==(h=p.indexOf(r))&&(p[h=p.length]=r);var c=e[r],u="z",d="",f=x9({c:l+h,r:a+t+s});n=die(o,f),!c||"object"!=typeof c||c instanceof Date?("number"==typeof c?u="n":"boolean"==typeof c?u="b":"string"==typeof c?u="s":c instanceof Date?(u="d",i.cellDates||(u="n",c=C8(c)),d=i.dateNF||_6[14]):null===c&&i.nullError&&(u="e",c=0),n?(n.t=u,n.v=c,delete n.w,delete n.R,d&&(n.z=d)):o[f]=n={t:u,v:c},d&&(n.z=d)):o[f]=c})}),u.e.c=Math.max(u.e.c,l+p.length-1);var f=v9(a);if(s)for(h=0;h<p.length;++h)o[y9(h+l)+f]={t:"s",v:p[h]};return o["!ref"]=S9(u),o}function die(e,t,r){if("string"==typeof t){if(Array.isArray(e)){var n=b9(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return die(e,x9("number"!=typeof t?t:{r:t,c:r||0}))}function pie(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}var hie={encode_col:y9,encode_row:v9,encode_cell:x9,encode_range:S9,decode_col:g9,decode_row:m9,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:b9,decode_range:w9,format_cell:T9,sheet_add_aoa:P9,sheet_add_json:uie,sheet_add_dom:Rne,aoa_to_sheet:R9,json_to_sheet:function(e,t){return uie(null,e,t)},table_to_sheet:Ine,table_to_book:function(e,t){return N9(Ine(e,t),t)},sheet_to_csv:lie,sheet_to_txt:cie,sheet_to_json:sie,sheet_to_html:Pne,sheet_to_formulae:function(e){var t,r="",n="";if(null==e||null==e["!ref"])return[];var i,s=C9(e["!ref"]),o="",a=[],l=[],c=Array.isArray(e);for(i=s.s.c;i<=s.e.c;++i)a[i]=y9(i);for(var u=s.s.r;u<=s.e.r;++u)for(o=v9(u),i=s.s.c;i<=s.e.c;++i)if(r=a[i]+o,n="",void 0!==(t=c?(e[u]||[])[i]:e[r])){if(null!=t.F){if(r=t.F,!t.f)continue;n=t.f,-1==r.indexOf(":")&&(r=r+":"+r)}if(null!=t.f)n=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)n=""+t.v;else if("b"==t.t)n=t.v?"TRUE":"FALSE";else if(void 0!==t.w)n="'"+t.w;else{if(void 0===t.v)continue;n="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=r+"="+n}return l},sheet_to_row_object_array:sie,sheet_get_cell:die,book_new:function(){return{SheetNames:[],Sheets:{}}},book_append_sheet:function(e,t,r,n){var i=1;if(!r)for(;i<=65535&&-1!=e.SheetNames.indexOf(r="Sheet"+i);++i,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||r;for(++i;i<=65535&&-1!=e.SheetNames.indexOf(r=o+i);++i);}if(Zre(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r},book_set_sheet_visibility:function(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:pie,cell_set_internal_link:function(e,t,r){return pie(e,"#"+t,r)},cell_add_comment:function(e,t,r){e.c||(e.c=[]),e.c.push({t:t,a:r||"SheetJS"})},sheet_set_array_formula:function(e,t,r,n){for(var i="string"!=typeof t?t:C9(t),s="string"==typeof t?t:S9(t),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var l=die(e,o,a);l.t="n",l.F=s,delete l.v,o==i.s.r&&a==i.s.c&&(l.f=r,n&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const fie=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,isLoading:t}=sv(),{toast:r}=fv();tm();const n=im(),[i,s]=Lt.useState(null),[o,a]=Lt.useState([]),[l,c]=Lt.useState([]),[u,d]=Lt.useState(!0),[p,h]=Lt.useState(null),[f,m]=Lt.useState(""),[v,g]=Lt.useState(!1),[y,b]=Lt.useState(!1),[x,w]=Lt.useState(!1),[S,C]=Lt.useState(!1),[E,T]=Lt.useState(null),[N,P]=Lt.useState(null),[R,I]=Lt.useState(null),[k,_]=Lt.useState(!1),[A,j]=Lt.useState({username:"",password:"",display_name:"",role:"employee",department:"",description:""}),[O,D]=Lt.useState({id:"",username:"",display_name:"",role:"employee",department:"",description:""});Lt.useEffect(()=>{t||e||n("/chat")},[e,t,n]);const M=()=>Ke(this,null,function*(){try{d(!0),h(null);const e=yield Zm.get("/users");if(!e.success||!e.data)throw console.error(" :",e),new Error("");a(e.data),c(e.data)}catch(e){console.error(" :",e),h(e instanceof Error?e:new Error("Unknown error"))}finally{d(!1)}});if(Lt.useEffect(()=>{M()},[e]),Lt.useEffect(()=>{if(!f.trim())return void c(o);const e=o.filter(e=>{const t=f.toLowerCase();if(t.includes("*")){const r=t.replace(/\*/g,".*"),n=new RegExp(r,"i");return n.test(e.username)||n.test(e.display_name)||n.test(e.role)||e.department&&n.test(e.department)||e.description&&n.test(e.description)}return e.username.toLowerCase().includes(t)||e.display_name.toLowerCase().includes(t)||e.role.toLowerCase().includes(t)||e.department&&e.department.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)});c(e)},[f,o]),Lt.useEffect(()=>{if(p){console.error(":",p);let e="";p instanceof Error&&(e=p.message),r({title:"",description:e,variant:"destructive"})}},[p,r]),p instanceof Error)return Gt.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-5xl mx-auto w-full",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Gt.jsxs("div",{children:[Gt.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[Gt.jsx(Uy,{className:"mr-2 h-6 w-6"}),""]}),Gt.jsx("p",{className:"text-neutral-300",children:""})]}),Gt.jsx(Wm,{to:"/settings",children:Gt.jsxs(Bg,{variant:"outline",size:"sm",children:[Gt.jsx(qg,{className:"mr-2 h-4 w-4"}),""]})})]}),Gt.jsx(IL,{children:Gt.jsx(jL,{className:"p-6",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx(ny,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),Gt.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),Gt.jsx("p",{className:"text-gray-600 mb-4",children:p.message}),Gt.jsxs("div",{className:"space-x-2",children:[Gt.jsxs(Bg,{onClick:()=>window.location.reload(),children:[Gt.jsx(Dy,{className:"mr-2 h-4 w-4"}),""]}),Gt.jsx(Wm,{to:"/chat",children:Gt.jsx(Bg,{variant:"outline",children:""})})]})]})})})]});const L=()=>Ke(this,null,function*(){try{if(!A.username||!A.password||!A.display_name)return void r({title:"",description:"",variant:"destructive"});const e=yield Zm.post("/users",A);console.log(" :",e),r({title:"",description:""}),g(!1),j({username:"",password:"",display_name:"",role:"employee",department:"",description:""}),window.location.reload()}catch(e){console.error(" :",e),r({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}}),z=e=>{const{name:t,value:r}=e.target;j(e=>ze(Le({},e),{[t]:r}))},F=e=>{const{name:t,value:r}=e.target;D(e=>ze(Le({},e),{[t]:r}))},B=()=>Ke(this,null,function*(){try{if(!E)return;const e=yield Zm.delete(`/users/${E}`);console.log(" :",e),r({title:"",description:""}),w(!1),T(null),yield M()}catch(e){console.error(" :",e),r({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}}),U=()=>Ke(this,null,function*(){try{if(!O.id||!O.username||!O.display_name)return void r({title:"",description:"",variant:"destructive"});const e=yield Zm.put(`/users/${O.id}`,O);console.log(" :",e),r({title:"",description:""}),b(!1),D({id:"",username:"",display_name:"",role:"employee",department:"",password:"",description:""}),yield M()}catch(e){if(console.error(" :",e),e instanceof Error&&"AUTHENTICATION_ERROR"===e.message)return r({title:"",description:"",variant:"destructive"}),void n("/login");r({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}});return!e||e&&"admin"!==e.role?Gt.jsx("div",{children:"Loading..."}):Gt.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-5xl mx-auto w-full",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Gt.jsxs("div",{children:[Gt.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[Gt.jsx(Uy,{className:"mr-2 h-6 w-6"}),""]}),Gt.jsx("p",{className:"text-neutral-300",children:""})]}),Gt.jsxs("div",{className:"flex space-x-2",children:[Gt.jsx(Wm,{to:"/settings",children:Gt.jsxs(Bg,{variant:"outline",size:"sm",children:[Gt.jsx(qg,{className:"mr-2 h-4 w-4"}),""]})}),Gt.jsx(eF,{open:S,onOpenChange:C,children:Gt.jsx(tF,{asChild:!0,children:Gt.jsxs(Bg,{variant:"outline",children:[Gt.jsx(Zy,{className:"mr-2 h-4 w-4"}),""]})})}),Gt.jsxs(eF,{open:v,onOpenChange:g,children:[Gt.jsx(tF,{asChild:!0,children:Gt.jsxs(Bg,{children:[Gt.jsx(Qy,{className:"mr-2 h-4 w-4"}),""]})}),Gt.jsxs(iF,{children:[Gt.jsxs(sF,{children:[Gt.jsx(aF,{children:""}),Gt.jsx(lF,{children:""})]}),Gt.jsxs("form",{onSubmit:L,children:[Gt.jsxs("div",{className:"grid gap-4 py-4",children:[Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"username",children:""}),Gt.jsx(KL,{id:"username",name:"username",value:A.username,onChange:z,required:!0})]}),Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"password",children:""}),Gt.jsx(KL,{id:"password",name:"password",type:"password",value:A.password,onChange:z,required:!0}),Gt.jsx("p",{className:"text-sm text-gray-500",children:"81"})]}),Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"display_name",children:""}),Gt.jsx(KL,{id:"display_name",name:"display_name",value:A.display_name,onChange:z,required:!0})]}),Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"department",children:""}),Gt.jsx(KL,{id:"department",name:"department",value:A.department||"",onChange:z})]}),Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"description",children:""}),Gt.jsx(KL,{id:"description",name:"description",value:A.description||"",onChange:z,placeholder:""})]}),Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"role",children:""}),Gt.jsxs(mV,{value:A.role,onValueChange:e=>((e,t)=>{j(r=>ze(Le({},r),{[e]:t}))})("role",e),children:[Gt.jsx(gV,{children:Gt.jsx(vV,{placeholder:""})}),Gt.jsxs(xV,{children:[Gt.jsx(wV,{value:"employee",children:""}),Gt.jsx(wV,{value:"admin",children:""})]})]})]})]}),Gt.jsxs(oF,{children:[Gt.jsx(Bg,{type:"button",variant:"outline",onClick:()=>g(!1),children:""}),Gt.jsx(Bg,{type:"submit",children:""})]})]})]})]})]})]}),Gt.jsxs(IL,{children:[Gt.jsx(kL,{className:"pb-2",children:Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsxs(_L,{className:"text-lg flex items-center",children:[Gt.jsx(Xy,{className:"mr-2 h-5 w-5"}),""]}),Gt.jsxs("div",{className:"flex items-center space-x-2",children:[Gt.jsxs("div",{className:"relative",children:[Gt.jsx(Ly,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),Gt.jsx(KL,{type:"text",placeholder:"*",value:f,onChange:e=>m(e.target.value),className:"pl-10 w-64"})]}),f&&Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>m(""),children:""})]})]})}),Gt.jsx(jL,{children:u?Gt.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[Gt.jsx(Dy,{className:"h-8 w-8 animate-spin text-blue-500 mb-4"}),Gt.jsx("p",{className:"text-gray-600",children:"..."})]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsxs(UV,{children:[Gt.jsx(WV,{children:Gt.jsxs($V,{children:[Gt.jsx(VV,{children:""}),Gt.jsx(VV,{children:""}),Gt.jsx(VV,{children:""}),Gt.jsx(VV,{children:""}),Gt.jsx(VV,{children:""}),Gt.jsx(VV,{className:"text-right",children:""})]})}),Gt.jsx(HV,{children:l&&l.length>0?l.map(e=>Gt.jsxs($V,{children:[Gt.jsx(qV,{children:e.username}),Gt.jsx(qV,{children:e.display_name}),Gt.jsx(qV,{children:Gt.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("admin"===e.role?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"),children:"admin"===e.role?"":""})}),Gt.jsx(qV,{children:e.department||"-"}),Gt.jsx(qV,{children:e.description||"-"}),Gt.jsx(qV,{className:"text-right",children:Gt.jsxs("div",{className:"flex justify-end gap-2",children:[Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>(e=>{D({id:e.id,username:e.username,display_name:e.display_name,role:e.role,department:e.department||"",description:e.description||""}),b(!0)})(e),children:Gt.jsx($y,{className:"h-4 w-4"})}),Gt.jsx(Bg,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,T(t),void w(!0);var t},className:"text-red-500 hover:text-red-700",children:Gt.jsx(Ky,{className:"h-4 w-4"})})]})})]},e.id)):Gt.jsx($V,{children:Gt.jsx(qV,{colSpan:6,className:"text-center",children:f?"":""})})})]}),f&&Gt.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[": ",l.length," / ",o.length,""]})]})})]}),Gt.jsx(eF,{open:y,onOpenChange:b,children:Gt.jsxs(iF,{children:[Gt.jsxs(sF,{children:[Gt.jsx(aF,{children:""}),Gt.jsx(lF,{children:""})]}),Gt.jsxs("form",{onSubmit:U,children:[Gt.jsxs("div",{className:"grid gap-4 py-4",children:[Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"edit-username",children:""}),Gt.jsx(KL,{id:"edit-username",name:"username",value:O.username,onChange:F,required:!0})]}),Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"edit-display_name",children:""}),Gt.jsx(KL,{id:"edit-display_name",name:"display_name",value:O.display_name,onChange:F,required:!0})]}),Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"edit-password",children:""}),Gt.jsx(KL,{id:"edit-password",name:"password",type:"password",value:O.password||"",onChange:F,placeholder:""}),Gt.jsx("p",{className:"text-sm text-gray-500 mt-1",children:""})]}),Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"edit-department",children:""}),Gt.jsx(KL,{id:"edit-department",name:"department",value:O.department||"",onChange:F})]}),Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"edit-description",children:""}),Gt.jsx(KL,{id:"edit-description",name:"description",value:O.description||"",onChange:F,placeholder:""})]}),Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(FL,{htmlFor:"edit-role",children:""}),Gt.jsxs(mV,{value:O.role,onValueChange:e=>((e,t)=>{D(r=>ze(Le({},r),{[e]:t}))})("role",e),children:[Gt.jsx(gV,{children:Gt.jsx(vV,{placeholder:""})}),Gt.jsxs(xV,{children:[Gt.jsx(wV,{value:"employee",children:""}),Gt.jsx(wV,{value:"admin",children:""})]})]})]})]}),Gt.jsxs(oF,{children:[Gt.jsx(Bg,{type:"button",variant:"outline",onClick:()=>b(!1),children:""}),Gt.jsx(Bg,{type:"submit",children:""})]})]})]})}),Gt.jsx(eF,{open:x,onOpenChange:w,children:Gt.jsxs(iF,{children:[Gt.jsxs(sF,{children:[Gt.jsxs(aF,{className:"flex items-center",children:[Gt.jsx(ny,{className:"h-5 w-5 mr-2 text-red-500"}),""]}),Gt.jsx(lF,{children:""})]}),Gt.jsxs("div",{className:"py-4 space-y-2",children:[Gt.jsx("p",{className:"text-center font-medium",children:""}),Gt.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 text-sm text-amber-800",children:Gt.jsxs("p",{className:"flex items-start",children:[Gt.jsx(ny,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),Gt.jsxs("span",{children:[Gt.jsx("strong",{children:":"})," "," "]})]})})]}),Gt.jsxs(oF,{children:[Gt.jsx(Bg,{type:"button",variant:"outline",onClick:()=>w(!1),children:""}),Gt.jsx(Bg,{type:"button",variant:"destructive",onClick:B,children:""})]})]})}),Gt.jsx(eF,{open:S,onOpenChange:C,children:Gt.jsxs(iF,{className:"max-w-2xl",children:[Gt.jsxs(sF,{children:[Gt.jsxs(aF,{className:"flex items-center",children:[Gt.jsx(Zy,{className:"mr-2 h-5 w-5"}),""]}),Gt.jsx(lF,{children:""})]}),Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[Gt.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:""}),Gt.jsx("p",{className:"text-sm text-blue-700 mb-3",children:""}),Gt.jsxs(Bg,{variant:"outline",size:"sm",onClick:()=>{const e=hie.aoa_to_sheet([["username","password","display_name","role","department","description"],["user1","Password123!","1","employee","",""],["admin1","Admin123!","1","admin","",""]]),t=hie.book_new();hie.book_append_sheet(t,e,"Users"),function(e,t){var r={type:"file"};r.file=t,function(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}(r),nie(e,r)}(t,"user_import_template.xlsx")},className:"text-blue-700 border-blue-300 hover:bg-blue-100",children:[Gt.jsx(py,{className:"mr-2 h-4 w-4"}),""]})]}),Gt.jsx("form",{onSubmit:e=>Ke(this,null,function*(){if(e.preventDefault(),N){_(!0),I(null);try{const e=new FormData;e.append("file",N);const t=yield Jm.get("/users/import-excel",{method:"POST",body:e});if(!t.success)throw new Error(t.error||"");I(t.results),r({title:"",description:`: ${t.results.success}, : ${t.results.failed}`});(()=>Ke(this,null,function*(){try{const e=yield Zm.get("/users");e.success&&e.data&&(a(e.data),c(e.data))}catch(e){console.error(":",e)}}))()}catch(t){console.error(":",t),r({title:"",description:t instanceof Error?t.message:"",variant:"destructive"})}finally{_(!1)}}else r({title:"",description:"",variant:"destructive"})}),children:Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"excel-file",children:""}),Gt.jsx(KL,{id:"excel-file",type:"file",accept:".xlsx,.xls",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(n){const e=[".xlsx",".xls"];if(!(["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(n.type)||e.some(e=>n.name.toLowerCase().endsWith(e))))return void r({title:"",description:".xlsx, .xls",variant:"destructive"});P(n)}},className:"mt-1"}),Gt.jsx("p",{className:"text-sm text-gray-500 mt-1",children:": .xlsx, .xls5MB"})]}),N&&Gt.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:Gt.jsxs("p",{className:"text-sm text-green-700",children:[": ",N.name," (",(N.size/1024/1024).toFixed(2),"MB)"]})}),R&&Gt.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4",children:[Gt.jsx("h4",{className:"font-medium mb-2",children:""}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs("p",{className:"text-sm",children:[Gt.jsxs("span",{className:"text-green-600 font-medium",children:[": ",R.success,""]}),R.failed>0&&Gt.jsxs("span",{className:"text-red-600 font-medium ml-4",children:[": ",R.failed,""]})]}),R.errors&&R.errors.length>0&&Gt.jsxs("div",{children:[Gt.jsx("p",{className:"text-sm font-medium text-red-600 mb-2",children:":"}),Gt.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:R.errors.map((e,t)=>Gt.jsx("p",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:e},t))})]})]})]}),Gt.jsxs(oF,{children:[Gt.jsx(Bg,{type:"button",variant:"outline",onClick:()=>{C(!1),P(null),I(null)},children:""}),Gt.jsx(Bg,{type:"submit",disabled:!N||k,children:k?"...":""})]})]})})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));function mie(){const[e,t]=Lt.useState(null),[r,n]=Lt.useState([]),[i,s]=Lt.useState(!1);Lt.useEffect(()=>{o()},[]);const o=()=>Ke(this,null,function*(){try{const e=yield fetch("/api/config/rag");if(e.ok){const r=yield e.json();t(r.config)}}catch(e){console.error("RAG:",e)}}),a=(e,t)=>{if(!e||0===e.length)return 0;const r=t.toLowerCase().split(" ");let n=0;return e.forEach(e=>{var t;const i=(null==(t=e.content)?void 0:t.toLowerCase().split(" "))||[],s=r.filter(e=>i.some(t=>t.includes(e))).length;n+=s/r.length}),Math.min(n/e.length,1)},l=(e,t)=>{if(!e||0===e.length)return 0;const r=e.reduce((e,t)=>e+(t.score||0),0)/e.length;return Math.min(r,1)},c=0===r.length?null:{responseTime:r.reduce((e,t)=>e+t.responseTime,0)/r.length,accuracy:r.reduce((e,t)=>e+t.accuracy,0)/r.length,relevanceScore:r.reduce((e,t)=>e+t.relevanceScore,0)/r.length,userSatisfaction:r.reduce((e,t)=>e+t.userSatisfaction,0)/r.length};return Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs(IL,{children:[Gt.jsx(kL,{children:Gt.jsxs(_L,{className:"flex items-center gap-2",children:[Gt.jsx(By,{className:"h-5 w-5"}),"RAG"]})}),Gt.jsx(jL,{children:e?Gt.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("label",{className:"text-sm font-medium",children:""}),Gt.jsxs(vB,{variant:"outline",children:[e.chunkSize,""]})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("label",{className:"text-sm font-medium",children:""}),Gt.jsxs(vB,{variant:"outline",children:[e.chunkOverlap,""]})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("label",{className:"text-sm font-medium",children:""}),Gt.jsx(vB,{variant:"outline",children:e.similarityThreshold})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("label",{className:"text-sm font-medium",children:""}),Gt.jsxs(vB,{variant:"outline",children:[e.maxResults,""]})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("label",{className:"text-sm font-medium",children:""}),Gt.jsx(vB,{variant:e.enableSemantic?"default":"secondary",children:e.enableSemantic?"":""})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("label",{className:"text-sm font-medium",children:""}),Gt.jsx(vB,{variant:e.enableKeyword?"default":"secondary",children:e.enableKeyword?"":""})]})]}):Gt.jsx("p",{className:"text-gray-500",children:"..."})})]}),Gt.jsxs(IL,{children:[Gt.jsx(kL,{children:Gt.jsxs(_L,{className:"flex items-center gap-2",children:[Gt.jsx(Yg,{className:"h-5 w-5"}),"RAG"]})}),Gt.jsxs(jL,{className:"space-y-4",children:[Gt.jsx(Bg,{onClick:()=>Ke(this,null,function*(){s(!0);try{const t=["","","","",""],r=[];for(const n of t){const t=Date.now(),i=yield fetch("/api/knowledge-base/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n,limit:(null==e?void 0:e.maxResults)||5})}),s=Date.now()-t;if(i.ok){const e=yield i.json(),t=a(e.results,n),o=l(e.results,n);r.push({responseTime:s,accuracy:t,relevanceScore:o,userSatisfaction:.3*Math.random()+.7,timestamp:(new Date).toISOString()})}}n(r)}catch(t){console.error(":",t)}finally{s(!1)}}),disabled:i,className:"w-full",children:i?"...":""}),c&&Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsx("h4",{className:"font-medium",children:""}),Gt.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Gt.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Gt.jsx("div",{className:"flex items-center justify-center mb-2",children:Gt.jsx(Jy,{className:"h-4 w-4 text-green-500"})}),Gt.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[c.responseTime.toFixed(0),"ms"]}),Gt.jsx("div",{className:"text-sm text-gray-600",children:""})]}),Gt.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Gt.jsx("div",{className:"flex items-center justify-center mb-2",children:Gt.jsx(iy,{className:"h-4 w-4 text-blue-500"})}),Gt.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(100*c.accuracy).toFixed(1),"%"]}),Gt.jsx("div",{className:"text-sm text-gray-600",children:""})]}),Gt.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Gt.jsx("div",{className:"flex items-center justify-center mb-2",children:Gt.jsx(Jy,{className:"h-4 w-4 text-purple-500"})}),Gt.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[(100*c.relevanceScore).toFixed(1),"%"]}),Gt.jsx("div",{className:"text-sm text-gray-600",children:""})]}),Gt.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[Gt.jsx("div",{className:"flex items-center justify-center mb-2",children:Gt.jsx(iy,{className:"h-4 w-4 text-orange-500"})}),Gt.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[(100*c.userSatisfaction).toFixed(1),"%"]}),Gt.jsx("div",{className:"text-sm text-gray-600",children:""})]})]})]}),r.length>0&&Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("h4",{className:"font-medium",children:""}),Gt.jsx("div",{className:"space-y-2",children:r.map((e,t)=>Gt.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsxs(vB,{variant:"outline",children:[" ",t+1]}),Gt.jsx("span",{className:"text-sm text-gray-600",children:new Date(e.timestamp).toLocaleTimeString()})]}),Gt.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[Gt.jsxs("span",{children:[e.responseTime,"ms"]}),Gt.jsxs("span",{children:[(100*e.accuracy).toFixed(1),"%"]}),Gt.jsxs("span",{children:[(100*e.relevanceScore).toFixed(1),"%"]})]})]},t))})]})]})]}),Gt.jsxs(IL,{children:[Gt.jsx(kL,{children:Gt.jsxs(_L,{className:"flex items-center gap-2",children:[Gt.jsx(ny,{className:"h-5 w-5"}),""]})}),Gt.jsx(jL,{children:Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[Gt.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:""}),Gt.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[Gt.jsx("p",{children:" : 600"}),Gt.jsx("p",{children:" : 0.3"}),Gt.jsx("p",{children:" : 10"}),Gt.jsx("p",{children:" : "})]})]}),Gt.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[Gt.jsx("h4",{className:"font-medium text-green-800 mb-2",children:""}),Gt.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[Gt.jsx("p",{children:" : 800"}),Gt.jsx("p",{children:" : 0.5"}),Gt.jsx("p",{children:" : 5"}),Gt.jsx("p",{children:" : "})]})]})]})})]})]})}const vie=["","","","","","","",""];function gie({faultClassifications:e,onAdd:t,onRemove:r,onUpdate:n}){return Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),Gt.jsxs(Bg,{onClick:t,type:"button",variant:"outline",size:"sm",className:"flex items-center gap-2",children:[Gt.jsx(jy,{className:"h-4 w-4"}),""]})]}),Gt.jsx("div",{className:"space-y-3",children:e.map((t,i)=>Gt.jsxs("div",{className:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg border",children:[Gt.jsxs("div",{className:"flex-1",children:[Gt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Gt.jsxs("select",{value:t.type,onChange:e=>n(i,"type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Gt.jsx("option",{value:"",children:""}),vie.map(e=>Gt.jsx("option",{value:e,children:e},e))]})]}),Gt.jsxs("div",{className:"flex-1",children:[Gt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Gt.jsx("input",{type:"text",value:t.custom,onChange:e=>n(i,"custom",e.target.value),placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.length>1&&Gt.jsx(Bg,{onClick:()=>r(i),type:"button",variant:"destructive",size:"sm",className:"mt-7",children:Gt.jsx(ob,{className:"h-4 w-4"})})]},i))})]})}const yie=["","","","","","",""];function bie({faultFactors:e,onAdd:t,onRemove:r,onUpdate:n}){return Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),Gt.jsxs(Bg,{onClick:t,type:"button",variant:"outline",size:"sm",className:"flex items-center gap-2",children:[Gt.jsx(jy,{className:"h-4 w-4"}),""]})]}),Gt.jsx("div",{className:"space-y-3",children:e.map((t,i)=>Gt.jsxs("div",{className:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg border",children:[Gt.jsxs("div",{className:"flex-1",children:[Gt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Gt.jsxs("select",{value:t.type,onChange:e=>n(i,"type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Gt.jsx("option",{value:"",children:""}),yie.map(e=>Gt.jsx("option",{value:e,children:e},e))]})]}),Gt.jsxs("div",{className:"flex-2",children:[Gt.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),Gt.jsx("input",{type:"text",value:t.content,onChange:e=>n(i,"content",e.target.value),placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.length>1&&Gt.jsx(Bg,{onClick:()=>r(i),type:"button",variant:"destructive",size:"sm",className:"mt-7",children:Gt.jsx(ob,{className:"h-4 w-4"})})]},i))})]})}function xie(){const[e,t]=Lt.useState({occurrenceEvent:"",vehicleNumber:"",equipmentCategory:"",phenomenonMemo:"",inspectionProcedure:"",emergencyMeasures:"",permanentCountermeasures:"",remarks:"",recorder:"",faultClassifications:[{type:"",custom:""}],faultFactors:[{type:"",content:""}]}),[r,n]=Lt.useState({}),[i,s]=Lt.useState(""),o=(e,i)=>{t(t=>ze(Le({},t),{[e]:i})),r[e]&&n(t=>ze(Le({},t),{[e]:""}))},a=e=>Ke(this,null,function*(){try{const t=yield fetch("/api/maintenance/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("");const r=yield t.json();console.log(":",r)}catch(t){throw console.error(":",t),t}}),l=e=>{var r,n,i,s,o,a,l,c,u,d,p,h,f,m,v,g,y,b,x,w,S;t({occurrenceEvent:(null==(r=e.occurrence)?void 0:r.event)||"",vehicleNumber:(null==(i=null==(n=e.occurrence)?void 0:n.vehicle)?void 0:i.type)||"",equipmentCategory:(null==(a=null==(o=null==(s=e.occurrence)?void 0:s.vehicle)?void 0:o.equipment)?void 0:a.category)||"",phenomenonMemo:(null==(l=e.fault)?void 0:l.phenomenon)||"",inspectionProcedure:(null==(d=null==(u=null==(c=e.response)?void 0:c.inspection)?void 0:u.procedure)?void 0:d.join("\n"))||"",emergencyMeasures:(null==(f=null==(h=null==(p=e.response)?void 0:p.measures)?void 0:h.emergency)?void 0:f.join("\n"))||"",permanentCountermeasures:(null==(v=null==(m=e.response)?void 0:m.measures)?void 0:v.permanent)||"",remarks:(null==(g=e.notes)?void 0:g.remarks)||"",recorder:(null==(y=e.notes)?void 0:y.recorder)||"",faultClassifications:(null==(x=null==(b=e.fault)?void 0:b.classifications)?void 0:x.length)>0?e.fault.classifications:[{type:"",custom:""}],faultFactors:(null==(S=null==(w=e.fault)?void 0:w.factors)?void 0:S.length)>0?e.fault.factors:[{type:"",content:""}]})},c=()=>{t({occurrenceEvent:"",vehicleNumber:"",equipmentCategory:"",phenomenonMemo:"",inspectionProcedure:"",emergencyMeasures:"",permanentCountermeasures:"",remarks:"",recorder:"",faultClassifications:[{type:"",custom:""}],faultFactors:[{type:"",content:""}]}),n({})};return Gt.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:Gt.jsxs(IL,{children:[Gt.jsx(kL,{children:Gt.jsx(_L,{className:"text-2xl font-bold text-center text-gray-900",children:""})}),Gt.jsxs(jL,{children:[i&&Gt.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[Gt.jsx(iy,{className:"h-5 w-5 text-green-600"}),Gt.jsx("span",{className:"text-green-800",children:i})]}),Gt.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[Gt.jsx(FL,{htmlFor:"loadFile",className:"text-sm font-medium text-gray-700",children:""}),Gt.jsxs("div",{className:"mt-2 flex gap-3 items-center",children:[Gt.jsx("input",{type:"file",id:"loadFile",accept:".json",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(!r)return;if(!r.name.endsWith(".json"))return void alert("JSON");const n=new FileReader;n.onload=e=>{var t;try{const r=JSON.parse(null==(t=e.target)?void 0:t.result);l(r),s(""),setTimeout(()=>s(""),3e3)}catch(r){console.error("JSON:",r),alert("JSON")}},n.readAsText(r)},className:"flex-1 text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Gt.jsxs(Bg,{type:"button",variant:"outline",size:"sm",children:[Gt.jsx(Zy,{className:"h-4 w-4 mr-2"}),""]})]}),Gt.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"JSON"})]}),Gt.jsxs("form",{onSubmit:t=>Ke(this,null,function*(){if(t.preventDefault(),(()=>{const t={};return e.occurrenceEvent.trim()||(t.occurrenceEvent=""),e.vehicleNumber.trim()||(t.vehicleNumber=""),e.equipmentCategory.trim()||(t.equipmentCategory=""),e.phenomenonMemo.trim()||(t.phenomenonMemo=""),e.recorder.trim()||(t.recorder=""),n(t),0===Object.keys(t).length})())try{const t=e.faultClassifications.filter(e=>e.type||e.custom),r=e.faultFactors.filter(e=>e.type||e.content),n={metadata:{recordId:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:(new Date).toISOString(),version:"1.0"},occurrence:{event:e.occurrenceEvent,recordedAt:(new Date).toISOString(),vehicle:{type:e.vehicleNumber,equipment:{category:e.equipmentCategory}}},fault:{classifications:t,phenomenon:e.phenomenonMemo,factors:r},response:{inspection:{procedure:e.inspectionProcedure?e.inspectionProcedure.split("\n").filter(e=>e.trim()):[]},measures:{emergency:e.emergencyMeasures?e.emergencyMeasures.split("\n").filter(e=>e.trim()):[],permanent:e.permanentCountermeasures}},notes:{remarks:e.remarks,recorder:e.recorder}};yield a(n),s(""),setTimeout(()=>{s("")},3e3),setTimeout(()=>{confirm("")&&c()},1e3)}catch(r){console.error(":",r),alert("")}}),className:"space-y-6",children:[Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Gt.jsxs("div",{children:[Gt.jsxs(FL,{htmlFor:"occurrenceEvent",children:[" ",Gt.jsx("span",{className:"text-red-500",children:"*"})]}),Gt.jsx(KL,{id:"occurrenceEvent",value:e.occurrenceEvent,onChange:e=>o("occurrenceEvent",e.target.value),placeholder:": ",className:r.occurrenceEvent?"border-red-500":""}),r.occurrenceEvent&&Gt.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.occurrenceEvent})]}),Gt.jsxs("div",{children:[Gt.jsxs(FL,{htmlFor:"vehicleNumber",children:[" ",Gt.jsx("span",{className:"text-red-500",children:"*"})]}),Gt.jsx(KL,{id:"vehicleNumber",value:e.vehicleNumber,onChange:e=>o("vehicleNumber",e.target.value),placeholder:": ",className:r.vehicleNumber?"border-red-500":""}),r.vehicleNumber&&Gt.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.vehicleNumber})]})]}),Gt.jsxs("div",{children:[Gt.jsxs(FL,{htmlFor:"equipmentCategory",children:[" ",Gt.jsx("span",{className:"text-red-500",children:"*"})]}),Gt.jsx(KL,{id:"equipmentCategory",value:e.equipmentCategory,onChange:e=>o("equipmentCategory",e.target.value),placeholder:": ",className:r.equipmentCategory?"border-red-500":""}),r.equipmentCategory&&Gt.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.equipmentCategory})]}),Gt.jsx(gie,{faultClassifications:e.faultClassifications,onAdd:()=>{t(e=>ze(Le({},e),{faultClassifications:[...e.faultClassifications,{type:"",custom:""}]}))},onRemove:r=>{e.faultClassifications.length>1&&t(e=>ze(Le({},e),{faultClassifications:e.faultClassifications.filter((e,t)=>t!==r)}))},onUpdate:(e,r,n)=>{t(t=>ze(Le({},t),{faultClassifications:t.faultClassifications.map((t,i)=>i===e?ze(Le({},t),{[r]:n}):t)}))}}),Gt.jsxs("div",{children:[Gt.jsxs(FL,{htmlFor:"phenomenonMemo",children:[" ",Gt.jsx("span",{className:"text-red-500",children:"*"})]}),Gt.jsx(Qz,{id:"phenomenonMemo",value:e.phenomenonMemo,onChange:e=>o("phenomenonMemo",e.target.value),placeholder:"",rows:4,className:r.phenomenonMemo?"border-red-500":""}),r.phenomenonMemo&&Gt.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.phenomenonMemo})]}),Gt.jsx(bie,{faultFactors:e.faultFactors,onAdd:()=>{t(e=>ze(Le({},e),{faultFactors:[...e.faultFactors,{type:"",content:""}]}))},onRemove:r=>{e.faultFactors.length>1&&t(e=>ze(Le({},e),{faultFactors:e.faultFactors.filter((e,t)=>t!==r)}))},onUpdate:(e,r,n)=>{t(t=>ze(Le({},t),{faultFactors:t.faultFactors.map((t,i)=>i===e?ze(Le({},t),{[r]:n}):t)}))}}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"inspectionProcedure",children:""}),Gt.jsx(Qz,{id:"inspectionProcedure",value:e.inspectionProcedure,onChange:e=>o("inspectionProcedure",e.target.value),placeholder:"",rows:4})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"emergencyMeasures",children:""}),Gt.jsx(Qz,{id:"emergencyMeasures",value:e.emergencyMeasures,onChange:e=>o("emergencyMeasures",e.target.value),placeholder:"",rows:4})]})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"permanentCountermeasures",children:""}),Gt.jsx(Qz,{id:"permanentCountermeasures",value:e.permanentCountermeasures,onChange:e=>o("permanentCountermeasures",e.target.value),placeholder:"",rows:3})]}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"remarks",children:""}),Gt.jsx(Qz,{id:"remarks",value:e.remarks,onChange:e=>o("remarks",e.target.value),placeholder:"",rows:3})]}),Gt.jsxs("div",{children:[Gt.jsxs(FL,{htmlFor:"recorder",children:[" ",Gt.jsx("span",{className:"text-red-500",children:"*"})]}),Gt.jsx(KL,{id:"recorder",value:e.recorder,onChange:e=>o("recorder",e.target.value),placeholder:"",className:r.recorder?"border-red-500":""}),r.recorder&&Gt.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.recorder})]})]}),Gt.jsx("div",{className:"flex justify-center pt-6 border-t",children:Gt.jsxs(Bg,{type:"submit",size:"lg",className:"flex items-center gap-2",children:[Gt.jsx(My,{className:"h-5 w-5"}),""]})})]})]})]})})}const wie=({files:e,value:t,onChange:r,label:n})=>{const[i,s]=Lt.useState(!1),o=Lt.useRef(null),a=e=>{if(!e)return"";try{const t=new Date(e),r=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0");return`${r}/${n}/${t.getDate().toString().padStart(2,"0")}`}catch(Nie){return""}},l=e.find(e=>e.fileName===t),c=l?`${l.fileName}${l.exportTimestamp?` (${a(l.exportTimestamp)})`:""}`:"...";Lt.useEffect(()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&s(!1)};return i&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i]);return Gt.jsxs("div",{className:"w-full",children:[n&&Gt.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:n}),Gt.jsxs("div",{className:"relative",ref:o,children:[Gt.jsxs("button",{type:"button",onClick:()=>s(!i),className:"w-full flex items-center justify-between px-3 py-2 text-left bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[Gt.jsx("span",{className:"truncate "+(t?"text-gray-900":"text-gray-500"),children:c}),Gt.jsx(Xg,{className:"h-4 w-4 text-gray-400 transition-transform "+(i?"transform rotate-180":"")})]}),i&&Gt.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:e&&e.length>0?Gt.jsx("ul",{className:"py-1",children:e.map(e=>{const n=a(e.exportTimestamp),i=e.fileName===t;return Gt.jsx("li",{children:Gt.jsxs("button",{type:"button",onClick:()=>{return t=e.fileName,r(t),void s(!1);var t},className:"w-full text-left px-3 py-2 flex items-center gap-2 hover:bg-red-50 hover:text-red-700 "+(i?"bg-red-100 text-red-700":"text-gray-900"),children:[Gt.jsx(my,{className:"h-4 w-4 flex-shrink-0"}),Gt.jsxs("div",{className:"flex-1 min-w-0",children:[Gt.jsx("div",{className:"text-sm font-medium truncate",children:e.fileName}),n&&Gt.jsx("div",{className:"text-xs text-gray-500",children:n})]})]})},e.fileName)})}):Gt.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:""})})]})]})};function Sie(){const[e,t]=Lt.useState({totalFiles:0,totalSize:0,duplicates:0,lastMaintenance:null,exportFiles:0,documentFiles:0,archivedFiles:0}),[r,n]=Lt.useState(!1),i=()=>Ke(this,null,function*(){var e,r;try{const n=yield fetch("/api/knowledge-base/stats");if(n.ok){const i=yield n.json();if(i.success&&i.data){const n=i.data;return void t({totalFiles:n.total||0,totalSize:n.totalSize||0,duplicates:0,lastMaintenance:n.lastMaintenance,exportFiles:(null==(e=n.typeStats)?void 0:e.json)||0,documentFiles:(null==(r=n.typeStats)?void 0:r.document)||0,archivedFiles:n.oldData||0})}}const i=yield fetch("/api/admin/dashboard");if(i.ok){const e=yield i.json();t(e.storageStats||{totalFiles:0,totalSize:0,duplicates:0,lastMaintenance:null,exportFiles:0,documentFiles:0,archivedFiles:0})}}catch(n){t({totalFiles:0,totalSize:0,duplicates:0,lastMaintenance:null,exportFiles:0,documentFiles:0,archivedFiles:0})}});return Lt.useEffect(()=>{i()},[]),Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Gt.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg border border-blue-200",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(my,{className:"h-5 w-5 text-blue-600"}),Gt.jsx("span",{className:"text-sm font-medium text-blue-800",children:""})]}),Gt.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.totalFiles}),Gt.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[": ",e.exportFiles||0," | : ",e.documentFiles||0]})]}),Gt.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-lg border border-green-200",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(dy,{className:"h-5 w-5 text-green-600"}),Gt.jsx("span",{className:"text-sm font-medium text-green-800",children:""})]}),Gt.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[(e.totalSize/1024/1024).toFixed(1),"MB"]}),Gt.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[": ",e.archivedFiles||0," "]})]}),Gt.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-lg border border-yellow-200",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(Yy,{className:"h-5 w-5 text-yellow-600"}),Gt.jsx("span",{className:"text-sm font-medium text-yellow-800",children:""})]}),Gt.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:e.duplicates}),Gt.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:e.duplicates>0?"":""})]}),Gt.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg border border-purple-200",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Gt.jsx(iy,{className:"h-5 w-5 text-purple-600"}),Gt.jsx("span",{className:"text-sm font-medium text-purple-800",children:""})]}),Gt.jsx("p",{className:"text-lg font-bold text-purple-600",children:e.lastMaintenance?new Date(e.lastMaintenance).toLocaleDateString("ja-JP"):""}),Gt.jsx("p",{className:"text-xs text-purple-600 mt-1",children:": 2026/1/1"})]})]}),Gt.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:[Gt.jsxs("h4",{className:"font-medium text-blue-800 mb-3 flex items-center gap-2",children:[Gt.jsx(By,{className:"h-4 w-4"}),""]}),Gt.jsx("div",{className:"grid grid-cols-1 gap-4",children:Gt.jsxs("div",{className:"space-y-3",children:[Gt.jsx(FL,{className:"text-base font-semibold text-gray-900 mb-2",children:""}),Gt.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Gt.jsxs(Bg,{variant:"default",size:"default",onClick:()=>Ke(this,null,function*(){n(!0);try{(yield fetch("/api/knowledge/maintenance/run",{method:"POST"})).ok&&(yield i())}catch(e){}finally{n(!1)}}),disabled:r,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium shadow-md hover:shadow-lg transition-all",children:[Gt.jsx(Dy,{className:"h-4 w-4 "+(r?"animate-spin":"")}),""]}),Gt.jsxs(Bg,{variant:"default",size:"default",onClick:()=>Ke(this,null,function*(){n(!0);try{(yield fetch("/api/knowledge/deduplication/resolve",{method:"POST"})).ok&&(yield i())}catch(e){}finally{n(!1)}}),disabled:r,className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white font-medium shadow-md hover:shadow-lg transition-all",children:[Gt.jsx(Gy,{className:"h-4 w-4"}),""]}),Gt.jsxs(Bg,{variant:"default",size:"default",onClick:i,disabled:r,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white font-medium shadow-md hover:shadow-lg transition-all",children:[Gt.jsx(Vg,{className:"h-4 w-4"}),""]}),Gt.jsxs(Bg,{variant:"default",size:"default",onClick:()=>Ke(this,null,function*(){if(confirm("\nknowledge-base/archives ZIP")){n(!0);try{const e=yield fetch("/api/knowledge-base/archive",{method:"POST"}),t=document.getElementById("cleanup-results");if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}{const r=yield e.json();t&&(t.innerHTML=`\n            <div class="text-green-600">\n              <strong> :</strong><br>\n               ${r.data.name}<br>\n               : ${(r.data.size/1024/1024).toFixed(2)}MB<br>\n               : knowledge-base/archives/<br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `),yield i()}}catch(e){const t=document.getElementById("cleanup-results");t&&(t.innerHTML=`\n          <div class="text-red-600">\n            <strong> :</strong> ${e.message}<br>\n            <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{n(!1)}}}),disabled:r,className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 text-white font-medium shadow-md hover:shadow-lg transition-all",children:[Gt.jsx(dy,{className:"h-4 w-4 "+(r?"animate-pulse":"")}),""]})]}),Gt.jsxs("div",{className:"mt-2 text-sm text-gray-600 leading-relaxed",children:[Gt.jsxs("div",{className:"space-y-1",children:[Gt.jsxs("p",{className:"whitespace-nowrap",children:[" ",Gt.jsx("strong",{children:""}),": 3"]}),Gt.jsxs("p",{className:"whitespace-nowrap",children:[" ",Gt.jsx("strong",{children:""}),": "]}),Gt.jsxs("p",{className:"whitespace-nowrap",children:[" ",Gt.jsx("strong",{children:""}),": "]}),Gt.jsxs("p",{className:"whitespace-nowrap",children:[" ",Gt.jsx("strong",{children:""}),": knowledge-base/archivesZIP"]})]}),Gt.jsxs("div",{className:"mt-2 text-blue-600 whitespace-nowrap",children:[Gt.jsx("strong",{children:" :"})," 12"]})]})]})})]}),Gt.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-lg",children:[Gt.jsxs("h4",{className:"font-medium text-amber-800 mb-3 flex items-center gap-2",children:[Gt.jsx(Yy,{className:"h-4 w-4"}),""]}),Gt.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Gt.jsxs("div",{className:"space-y-3",children:[Gt.jsx(FL,{className:"text-base font-semibold text-gray-900 mb-2",children:""}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs(Bg,{variant:"outline",size:"default",onClick:()=>Ke(this,null,function*(){n(!0);try{const t=yield fetch("/api/knowledge-base/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"all",destination:"local"})});if(!t.ok){const e=yield t.json();throw new Error(e.error||"")}const r=yield t.blob(),n=document.getElementById("cleanup-results");if("showSaveFilePicker"in window)try{const e=`knowledge-export-${(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5)}.zip`,t=yield window.showSaveFilePicker({suggestedName:e,types:[{description:"ZIP files",accept:{"application/zip":[".zip"]}}]}),i=yield t.createWritable();yield i.write(r),yield i.close(),n&&(n.innerHTML=`\n              <div class="text-green-600">\n                <strong> :</strong> ${e}<br>\n                <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n              </div>\n            `)}catch(e){if("AbortError"!==e.name)throw e;n&&(n.innerHTML=`\n              <div class="text-gray-600">\n                <strong></strong><br>\n                <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n              </div>\n            `)}else{const e=window.URL.createObjectURL(r),t=document.createElement("a");t.href=e,t.download=`knowledge-export-${(new Date).toISOString().replace(/[:.]/g,"-")}.zip`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(e),n&&(n.innerHTML=`\n            <div class="text-green-600">\n              <strong> :</strong> <br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `)}}catch(t){const e=document.getElementById("cleanup-results");e&&(e.innerHTML=`\n          <div class="text-red-600">\n            <strong> :</strong> ${t.message}<br>\n            <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{n(!1)}}),disabled:r,className:"w-full flex items-center gap-2 text-sm text-green-700 border-green-300 hover:bg-green-50",children:[Gt.jsx(Dy,{className:"h-4 w-4 "+(r?"animate-spin":"")}),""]}),Gt.jsxs(Bg,{variant:"outline",size:"default",onClick:()=>Ke(this,null,function*(){n(!0);try{const e=yield fetch("/api/knowledge-base/archives"),t=yield e.json(),r=document.getElementById("cleanup-results");if(r)if(t.success&&t.data.length>0){const e=t.data.map(e=>` ${e.name} (${(e.size/1024/1024).toFixed(2)}MB) - ${new Date(e.createdAt).toLocaleString("ja-JP")}`).join("<br>");r.innerHTML=`\n            <div class="text-blue-600">\n              <strong>  (${t.total}):</strong><br>\n              ${e}<br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `}else r.innerHTML=`\n            <div class="text-gray-600">\n              <strong> :</strong> <br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `}catch(e){const t=document.getElementById("cleanup-results");t&&(t.innerHTML=`\n          <div class="text-red-600">\n            <strong> :</strong> ${e.message}<br>\n            <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{n(!1)}}),disabled:r,className:"w-full flex items-center gap-2 text-sm text-blue-700 border-blue-300 hover:bg-blue-50",children:[Gt.jsx(dy,{className:"h-4 w-4"}),""]})]})]}),Gt.jsxs("div",{className:"space-y-3",children:[Gt.jsx(FL,{className:"text-base font-semibold text-gray-900 mb-2",children:""}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs(Bg,{variant:"outline",size:"default",onClick:()=>Ke(this,null,function*(){if(confirm("1\nknowledge-base/archivesZIP")){n(!0);try{const e=yield fetch("/api/knowledge-base/cleanup/auto",{method:"POST"});if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}{yield e.json();const t=document.getElementById("cleanup-results");t&&(t.innerHTML=`\n            <div class="text-green-600">\n              <strong> :</strong> 1<br>\n               : knowledge-base/archives/<br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `),yield i()}}catch(e){const t=document.getElementById("cleanup-results");t&&(t.innerHTML=`\n          <div class="text-red-600">\n            <strong> :</strong> ${e.message}<br>\n            <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{n(!1)}}}),disabled:r,className:"w-full flex items-center gap-2 text-sm text-orange-700 border-orange-300 hover:bg-orange-50",children:[Gt.jsx(Dy,{className:"h-4 w-4 "+(r?"animate-spin":"")}),"1"]}),Gt.jsxs(Bg,{variant:"outline",size:"default",onClick:()=>Ke(this,null,function*(){if("DELETE ALL"===prompt("\nDELETE ALL:")){n(!0);try{const e=yield fetch("/api/knowledge-base/cleanup/manual",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deleteAll:!0})});if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}{const t=yield e.json(),r=document.getElementById("cleanup-results");r&&(r.innerHTML=`\n            <div class="text-green-600">\n              <strong>:</strong> ${t.deletedCount}<br>\n              <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `),yield i()}}catch(e){const t=document.getElementById("cleanup-results");t&&(t.innerHTML=`\n          <div class="text-red-600">\n            <strong>:</strong> ${e.message}<br>\n            <small>: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{n(!1)}}}),disabled:r,className:"w-full flex items-center gap-2 text-sm text-gray-700 border-gray-300 hover:bg-gray-50",children:[Gt.jsx(dy,{className:"h-4 w-4"}),""]})]})]})]}),Gt.jsxs("div",{className:"mt-4",children:[Gt.jsx(FL,{className:"text-base font-semibold text-gray-900 mb-2 block",children:""}),Gt.jsx("div",{className:"p-4 bg-white rounded border border-gray-300 text-sm",children:Gt.jsx("div",{id:"cleanup-results",className:"text-gray-600",children:""})})]})]})]}),Gt.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-lg",children:[Gt.jsxs("h5",{className:"font-medium text-amber-800 mb-2 flex items-center gap-2",children:[Gt.jsx(Yy,{className:"h-4 w-4"}),""]}),Gt.jsxs("div",{className:"text-sm text-amber-700 space-y-1",children:[Gt.jsxs("p",{children:[" ",Gt.jsx("strong",{children:":"})," 21"]}),Gt.jsxs("p",{children:[" ",Gt.jsx("strong",{children:":"})," "]}),Gt.jsxs("p",{children:[" ",Gt.jsx("strong",{children:":"})," "]}),Gt.jsxs("p",{children:[" ",Gt.jsx("strong",{children:":"})," "]})]})]}),Gt.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:[Gt.jsxs("h5",{className:"font-medium text-blue-800 mb-2 flex items-center gap-2",children:[Gt.jsx(iy,{className:"h-4 w-4"}),""]}),Gt.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[Gt.jsxs("p",{children:[" ",Gt.jsx("strong",{children:":"})," 21"]}),Gt.jsxs("p",{children:[" ",Gt.jsx("strong",{children:":"})," "]}),Gt.jsxs("p",{children:[" ",Gt.jsx("strong",{children:":"})," "]}),Gt.jsxs("p",{children:[" ",Gt.jsx("strong",{children:":"})," GPT"]}),Gt.jsxs("p",{children:[" ",Gt.jsx("strong",{children:":"})," 30"]})]})]})]})}const Cie=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=Lt.useState(null),[r,n]=Lt.useState([]),[i,s]=Lt.useState(!1),[o,a]=Lt.useState(!1),[l,c]=Lt.useState([]),[u,d]=Lt.useState(null),[p,h]=Lt.useState(!1),[f,m]=Lt.useState({status:"idle"}),[v,g]=Lt.useState({chunkSize:1e3,chunkOverlap:200,similarityThreshold:.7,maxResults:5,enableSemantic:!0,enableKeyword:!0,customPrompt:"",preprocessing:{removeStopWords:!0,normalizeCasing:!0,removeSpecialChars:!1}}),[y,b]=Lt.useState({initialPrompt:"",conversationStyle:"frank",questionFlow:{step1:"",step2:"",step3:"",step4:"",step5:""},branchingConditions:{timeCheck:!0,detailsCheck:!0,toolsCheck:!0,safetyCheck:!0},responsePattern:"step_by_step",escalationTime:20,customInstructions:"",enableEmergencyContact:!0}),x=im(),w=e=>{switch(e){case"pending":return Gt.jsx(vB,{variant:"secondary",children:""});case"processing":return Gt.jsx(vB,{variant:"default",children:""});case"success":return Gt.jsx(vB,{variant:"default",className:"bg-green-500",children:""});case"error":return Gt.jsx(vB,{variant:"destructive",children:""});default:return Gt.jsx(vB,{variant:"secondary",children:""})}},S=()=>Ke(this,null,function*(){try{const e=yield fetch("/api/settings/rag",{credentials:"include"});if(e.ok){const t=yield e.json(),r=t.success?t.data:t;g(e=>ze(Le(Le({},e),r),{preprocessing:Le({removeStopWords:!0,normalizeCasing:!0,removeSpecialChars:!1},r.preprocessing)}))}}catch(e){}}),C=()=>Ke(this,null,function*(){try{const e=yield fetch("/api/ai-assist/settings",{credentials:"include"});if(e.ok){const t=yield e.json(),r=t.success?t.data:t;r&&(b(e=>ze(Le(Le({},e),r),{questionFlow:Le(Le({},e.questionFlow),r.questionFlow),branchingConditions:Le(Le({},e.branchingConditions),r.branchingConditions)})),localStorage.setItem("aiAssistSettings",JSON.stringify(r)))}else{const e=localStorage.getItem("aiAssistSettings");e&&b(JSON.parse(e))}}catch(e){console.warn("AI:",e);try{const e=localStorage.getItem("aiAssistSettings");e&&b(JSON.parse(e))}catch(t){}}}),E=()=>Ke(this,null,function*(){try{console.log(" ");const e=yield fetch("/api/history/export-files",{credentials:"include"});if(console.log(" API:",{ok:e.ok,status:e.status,statusText:e.statusText,contentType:e.headers.get("content-type")}),!e.ok){const t=yield e.text();return console.error(" :",{status:e.status,statusText:e.statusText,body:t,url:"/api/history/export-files"}),404===e.status&&console.warn(" API"),void c([])}const t=yield e.json();if(console.log(" API:",t),console.log(" :",Array.isArray(t)?t.length:"not array",""),!Array.isArray(t))return console.error(" :",typeof t,t),void c([]);const r=t.map(e=>(console.log(" :",e),{fileName:e.fileName,title:e.title||"",createdAt:e.createdAt||e.exportTimestamp||(new Date).toISOString(),exportTimestamp:e.exportTimestamp||e.createdAt||null}));console.log(" :",r),console.log(" :",r.map(e=>e.fileName)),c(r)}catch(e){console.error(" :",e),e instanceof Error&&console.error(":",e.message,e.stack),c([])}});return Lt.useEffect(()=>{S(),C(),E()},[]),Gt.jsxs("div",{className:"container mx-auto p-6",children:[Gt.jsxs("div",{className:"mb-8",children:[Gt.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[Gt.jsx(dy,{className:"inline mr-2"}),""]}),Gt.jsx("p",{className:"text-gray-600",children:"AI"})]}),Gt.jsxs(aB,{defaultValue:"import",className:"w-full",children:[Gt.jsxs(lB,{className:"grid w-full grid-cols-3",children:[Gt.jsxs(cB,{value:"import",className:"flex items-center gap-2",children:[Gt.jsx(Zy,{className:"h-4 w-4"}),""]}),Gt.jsxs(cB,{value:"manual",className:"flex items-center gap-2",children:[Gt.jsx($y,{className:"h-4 w-4"}),""]}),Gt.jsxs(cB,{value:"settings",className:"flex items-center gap-2",children:[Gt.jsx(By,{className:"h-4 w-4"}),"AI"]})]}),Gt.jsx(uB,{value:"import",className:"space-y-6",children:Gt.jsxs("div",{className:"p-6 bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl shadow-sm",children:[Gt.jsxs(IL,{className:"border-indigo-300 shadow-md",children:[Gt.jsx(kL,{className:"bg-gradient-to-r from-indigo-100 to-purple-100 border-b border-indigo-200",children:Gt.jsxs(_L,{className:"flex items-center gap-2 text-indigo-800",children:[Gt.jsx(yy,{className:"h-5 w-5 text-indigo-600"}),""]})}),Gt.jsxs(jL,{className:"space-y-4",children:[Gt.jsxs("div",{children:[Gt.jsx("div",{className:"mt-2",children:0===l.length?Gt.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[Gt.jsx("p",{className:"text-sm text-yellow-800",children:"knowledge-base/exportsJSON"}),Gt.jsxs(Bg,{variant:"outline",size:"sm",onClick:E,className:"mt-2",children:[Gt.jsx(Dy,{className:"h-3 w-3 mr-1"}),""]})]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(wie,{files:l.map(e=>({fileName:e.fileName,exportTimestamp:e.exportTimestamp||e.createdAt||null})),value:u,onChange:d}),Gt.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.length,""]})]})}),Gt.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JSONJSON"})]}),"idle"!==f.status&&Gt.jsx("div",{className:"p-3 rounded "+("success"===f.status?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:Gt.jsxs("div",{className:"flex items-center gap-2",children:["success"===f.status?Gt.jsx(iy,{className:"h-4 w-4"}):Gt.jsx(Yy,{className:"h-4 w-4"}),Gt.jsx("span",{className:"text-sm",children:f.message})]})}),Gt.jsx(Bg,{onClick:()=>Ke(this,null,function*(){if(u){h(!0),m({status:"idle"});try{const e=yield fetch("/api/history/import-export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:u}),credentials:"include"}),t=yield e.json();e.ok&&t.success?(m({status:"success",message:`: ${t.message} (: ${t.imageCount})`}),yield E()):m({status:"error",message:t.error||""})}catch(e){m({status:"error",message:""})}finally{h(!1)}}else alert("")}),disabled:!u||p,className:"w-full",children:p?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Dy,{className:"mr-2 h-4 w-4 animate-spin"}),"..."]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Zy,{className:"mr-2 h-4 w-4"}),""]})}),Gt.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[Gt.jsx("p",{children:" JSON knowledge-base/documents "}),Gt.jsx("p",{children:" "}),Gt.jsx("p",{children:"  documents/images "})]})]})]}),Gt.jsxs(IL,{className:"border-indigo-300 shadow-md",children:[Gt.jsx(kL,{className:"bg-gradient-to-r from-indigo-100 to-purple-100 border-b border-indigo-200",children:Gt.jsxs(_L,{className:"flex items-center gap-2 text-indigo-800",children:[Gt.jsx(my,{className:"h-5 w-5 text-indigo-600"}),""]})}),Gt.jsxs(jL,{className:"space-y-4",children:[Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"file-upload",children:" (TXT, PDF, XLSX, PPTX)"}),Gt.jsx(KL,{id:"file-upload",type:"file",multiple:!0,accept:".txt,.pdf,.xlsx,.pptx",onChange:e=>{const r=e.target.files;if(t(r),r){const e=Array.from(r).map(e=>({fileName:e.name,status:"pending"}));n(e)}},className:"mt-1"})]}),e&&Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("h4",{className:"font-medium",children:":"}),Gt.jsx("div",{className:"space-y-2",children:r.map((e,t)=>Gt.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(my,{className:"h-4 w-4"}),Gt.jsx("span",{className:"text-sm",children:e.fileName})]}),Gt.jsxs("div",{className:"flex items-center gap-2",children:[w(e.status),e.message&&Gt.jsx("span",{className:"text-xs text-gray-500",children:e.message})]})]},t))})]}),Gt.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded border",children:[Gt.jsx(zV,{id:"save-original-file",checked:o,onCheckedChange:e=>a(!0===e)}),Gt.jsxs(FL,{htmlFor:"save-original-file",className:"text-sm font-normal cursor-pointer flex-1",children:["",Gt.jsx("span",{className:"text-xs text-gray-500 block mt-1",children:""})]})]}),Gt.jsx(Bg,{onClick:()=>Ke(this,null,function*(){if(e&&0!==e.length){s(!0);try{for(let r=0;r<e.length;r++){const i=e[r];n(e=>e.map((e,t)=>t===r?ze(Le({},e),{status:"processing"}):e));const s=new FormData;s.append("file",i),s.append("saveOriginalFile",o?"true":"false");try{const e=yield fetch("/api/files/import",{method:"POST",body:s,credentials:"include"});if(e.ok){const t=yield e.json();n(e=>e.map((e,n)=>n===r?ze(Le({},e),{status:"success",message:t.message||""}):e))}else{const t=yield e.json();n(e=>e.map((e,n)=>n===r?ze(Le({},e),{status:"error",message:t.message||""}):e))}}catch(t){n(e=>e.map((e,t)=>t===r?ze(Le({},e),{status:"error",message:""}):e))}}}finally{s(!1)}}else alert("")}),disabled:!e||i,className:"w-full",children:i?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Yy,{className:"mr-2 h-4 w-4"}),"..."]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Zy,{className:"mr-2 h-4 w-4"}),""]})})]})]}),Gt.jsxs(IL,{children:[Gt.jsx(kL,{children:Gt.jsxs(_L,{className:"flex items-center gap-2",children:[Gt.jsx(Yg,{className:"h-5 w-5 text-purple-600"}),""]})}),Gt.jsx(jL,{children:Gt.jsx(Sie,{})})]})]})}),Gt.jsx(uB,{value:"manual",className:"space-y-6",children:Gt.jsx("div",{className:"p-6 bg-gradient-to-br from-teal-50 to-cyan-50 border border-teal-200 rounded-xl shadow-sm",children:Gt.jsxs(IL,{className:"border-teal-300 shadow-md",children:[Gt.jsx(kL,{className:"bg-gradient-to-r from-teal-100 to-cyan-100 border-b border-teal-200",children:Gt.jsxs(_L,{className:"flex items-center gap-2 text-teal-800",children:[Gt.jsx(sb,{className:"h-5 w-5 text-teal-600"}),""]})}),Gt.jsx(jL,{children:Gt.jsx(xie,{})})]})})}),Gt.jsx(uB,{value:"settings",className:"space-y-6",children:Gt.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-xl shadow-sm space-y-6",children:[Gt.jsxs(IL,{className:"border-purple-300 shadow-md",children:[Gt.jsx(kL,{className:"bg-gradient-to-r from-purple-100 to-pink-100 border-b border-purple-200",children:Gt.jsxs(_L,{className:"flex items-center gap-2 text-purple-800",children:[Gt.jsx(By,{className:"h-5 w-5 text-purple-600"}),""]})}),Gt.jsx(jL,{className:"space-y-4",children:Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{children:""}),Gt.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded",children:[Gt.jsx(yy,{className:"h-4 w-4 text-gray-500"}),Gt.jsx("span",{className:"text-sm text-gray-700",children:"/knowledge-base/vehicle-maintenance"})]})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{children:""}),Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsx(vB,{variant:"outline",children:"TXT"}),Gt.jsx(vB,{variant:"outline",children:"PDF"}),Gt.jsx(vB,{variant:"outline",children:"XLSX"}),Gt.jsx(vB,{variant:"outline",children:"PPTX"})]})]})]})})]}),Gt.jsxs(IL,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-purple-100",children:[Gt.jsxs(kL,{className:"bg-gradient-to-r from-purple-100 to-purple-200 border-b border-purple-300",children:[Gt.jsxs(_L,{className:"flex items-center gap-2 text-purple-800",children:[Gt.jsx(Iy,{className:"h-5 w-5 text-purple-700"}),"AI"]}),Gt.jsx("p",{className:"text-sm text-purple-700",children:"UIAI"})]}),Gt.jsxs(jL,{className:"space-y-6 bg-white",children:[Gt.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[Gt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-blue-800",children:[Gt.jsx(Kg,{className:"h-4 w-4 text-blue-600"}),""]}),Gt.jsx("div",{className:"space-y-3",children:Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{htmlFor:"initialPrompt",children:""}),Gt.jsx(Qz,{id:"initialPrompt",value:y.initialPrompt,onChange:e=>b(t=>ze(Le({},t),{initialPrompt:e.target.value})),placeholder:"AI...",rows:2}),Gt.jsx("p",{className:"text-xs text-gray-500",children:"AI"})]})})]}),Gt.jsxs("div",{className:"space-y-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[Gt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-green-800",children:[Gt.jsx(eb,{className:"h-4 w-4 text-green-600"}),""]}),Gt.jsx("div",{className:"space-y-3",children:Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{children:""}),Gt.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[Gt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Gt.jsx("input",{type:"radio",name:"conversationStyle",value:"frank",checked:"frank"===y.conversationStyle,onChange:e=>b(t=>ze(Le({},t),{conversationStyle:e.target.value})),className:"rounded"}),Gt.jsxs("div",{className:"text-sm",children:[Gt.jsx("div",{className:"font-medium",children:""}),Gt.jsx("div",{className:"text-gray-500",children:""})]})]}),Gt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Gt.jsx("input",{type:"radio",name:"conversationStyle",value:"business",checked:"business"===y.conversationStyle,onChange:e=>b(t=>ze(Le({},t),{conversationStyle:e.target.value})),className:"rounded"}),Gt.jsxs("div",{className:"text-sm",children:[Gt.jsx("div",{className:"font-medium",children:""}),Gt.jsx("div",{className:"text-gray-500",children:""})]})]}),Gt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Gt.jsx("input",{type:"radio",name:"conversationStyle",value:"technical",checked:"technical"===y.conversationStyle,onChange:e=>b(t=>ze(Le({},t),{conversationStyle:e.target.value})),className:"rounded"}),Gt.jsxs("div",{className:"text-sm",children:[Gt.jsx("div",{className:"font-medium",children:""}),Gt.jsx("div",{className:"text-gray-500",children:""})]})]})]})]})})]}),Gt.jsxs("div",{className:"space-y-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Gt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-yellow-800",children:[Gt.jsx(Cy,{className:"h-4 w-4 text-yellow-600"}),""]}),Gt.jsxs("div",{className:"space-y-3",children:[Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{htmlFor:"step1",children:"1"}),Gt.jsx(KL,{id:"step1",value:y.questionFlow.step1,onChange:e=>b(t=>ze(Le({},t),{questionFlow:ze(Le({},t.questionFlow),{step1:e.target.value})})),placeholder:"..."})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{htmlFor:"step2",children:"2"}),Gt.jsx(KL,{id:"step2",value:y.questionFlow.step2,onChange:e=>b(t=>ze(Le({},t),{questionFlow:ze(Le({},t.questionFlow),{step2:e.target.value})})),placeholder:"..."})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{htmlFor:"step3",children:"3"}),Gt.jsx(KL,{id:"step3",value:y.questionFlow.step3,onChange:e=>b(t=>ze(Le({},t),{questionFlow:ze(Le({},t.questionFlow),{step3:e.target.value})})),placeholder:"..."})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{htmlFor:"step4",children:"4"}),Gt.jsx(KL,{id:"step4",value:y.questionFlow.step4,onChange:e=>b(t=>ze(Le({},t),{questionFlow:ze(Le({},t.questionFlow),{step4:e.target.value})})),placeholder:"..."})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{htmlFor:"step5",children:"5"}),Gt.jsx(KL,{id:"step5",value:y.questionFlow.step5,onChange:e=>b(t=>ze(Le({},t),{questionFlow:ze(Le({},t.questionFlow),{step5:e.target.value})})),placeholder:"..."})]})]})]}),Gt.jsxs("div",{className:"space-y-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[Gt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-orange-800",children:[Gt.jsx(Gy,{className:"h-4 w-4 text-orange-600"}),""]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs("label",{className:"flex items-center space-x-2",children:[Gt.jsx("input",{type:"checkbox",checked:y.branchingConditions.timeCheck,onChange:e=>b(t=>ze(Le({},t),{branchingConditions:ze(Le({},t.branchingConditions),{timeCheck:e.target.checked})})),className:"rounded"}),Gt.jsx("span",{className:"text-sm",children:""})]}),Gt.jsxs("label",{className:"flex items-center space-x-2",children:[Gt.jsx("input",{type:"checkbox",checked:y.branchingConditions.detailsCheck,onChange:e=>b(t=>ze(Le({},t),{branchingConditions:ze(Le({},t.branchingConditions),{detailsCheck:e.target.checked})})),className:"rounded"}),Gt.jsx("span",{className:"text-sm",children:""})]}),Gt.jsxs("label",{className:"flex items-center space-x-2",children:[Gt.jsx("input",{type:"checkbox",checked:y.branchingConditions.toolsCheck,onChange:e=>b(t=>ze(Le({},t),{branchingConditions:ze(Le({},t.branchingConditions),{toolsCheck:e.target.checked})})),className:"rounded"}),Gt.jsx("span",{className:"text-sm",children:""})]}),Gt.jsxs("label",{className:"flex items-center space-x-2",children:[Gt.jsx("input",{type:"checkbox",checked:y.branchingConditions.safetyCheck,onChange:e=>b(t=>ze(Le({},t),{branchingConditions:ze(Le({},t.branchingConditions),{safetyCheck:e.target.checked})})),className:"rounded"}),Gt.jsx("span",{className:"text-sm",children:""})]})]})]}),Gt.jsxs("div",{className:"space-y-4 p-4 bg-cyan-50 border border-cyan-200 rounded-lg",children:[Gt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-cyan-800",children:[Gt.jsx(Vg,{className:"h-4 w-4 text-cyan-600"}),""]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{children:""}),Gt.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[Gt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Gt.jsx("input",{type:"radio",name:"responsePattern",value:"step_by_step",checked:"step_by_step"===y.responsePattern,onChange:e=>b(t=>ze(Le({},t),{responsePattern:e.target.value})),className:"rounded"}),Gt.jsxs("div",{className:"text-sm",children:[Gt.jsx("div",{className:"font-medium",children:""}),Gt.jsx("div",{className:"text-gray-500",children:"11"})]})]}),Gt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Gt.jsx("input",{type:"radio",name:"responsePattern",value:"comprehensive",checked:"comprehensive"===y.responsePattern,onChange:e=>b(t=>ze(Le({},t),{responsePattern:e.target.value})),className:"rounded"}),Gt.jsxs("div",{className:"text-sm",children:[Gt.jsx("div",{className:"font-medium",children:""}),Gt.jsx("div",{className:"text-gray-500",children:""})]})]}),Gt.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[Gt.jsx("input",{type:"radio",name:"responsePattern",value:"minimal",checked:"minimal"===y.responsePattern,onChange:e=>b(t=>ze(Le({},t),{responsePattern:e.target.value})),className:"rounded"}),Gt.jsxs("div",{className:"text-sm",children:[Gt.jsx("div",{className:"font-medium",children:""}),Gt.jsx("div",{className:"text-gray-500",children:""})]})]})]})]})]}),Gt.jsxs("div",{className:"space-y-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[Gt.jsxs("h4",{className:"font-medium flex items-center gap-2 text-red-800",children:[Gt.jsx(Yy,{className:"h-4 w-4 text-red-600"}),""]}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs(FL,{htmlFor:"escalationTime",children:[": ",y.escalationTime,""]}),Gt.jsx(UH,{id:"escalationTime",min:10,max:60,step:5,value:[y.escalationTime],onValueChange:e=>b(t=>ze(Le({},t),{escalationTime:e[0]})),className:"w-full"}),Gt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs("label",{className:"flex items-center space-x-2",children:[Gt.jsx("input",{type:"checkbox",checked:y.enableEmergencyContact,onChange:e=>b(t=>ze(Le({},t),{enableEmergencyContact:e.target.checked})),className:"rounded"}),Gt.jsx("span",{className:"text-sm",children:""})]}),Gt.jsx("p",{className:"text-xs text-gray-500",children:""})]})]})]}),Gt.jsxs("div",{className:"space-y-2 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[Gt.jsx(FL,{htmlFor:"customInstructions",className:"text-gray-800 font-medium",children:""}),Gt.jsx(Qz,{id:"customInstructions",value:y.customInstructions,onChange:e=>b(t=>ze(Le({},t),{customInstructions:e.target.value})),placeholder:"GPT...",rows:3}),Gt.jsx("p",{className:"text-xs text-gray-500",children:"AI"})]}),Gt.jsxs("div",{className:"flex gap-2 pt-4 border-t border-purple-200 bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg",children:[Gt.jsxs(Bg,{onClick:()=>Ke(this,null,function*(){try{const e=yield fetch("/api/ai-assist/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y),credentials:"include"});if(!e.ok){const t=yield e.json();throw new Error(t.error||"")}yield e.json();localStorage.setItem("aiAssistSettings",JSON.stringify(y)),window.dispatchEvent(new Event("aiAssistSettingsChanged")),alert("AI")}catch(e){console.error("AI:",e),alert("AI: "+(e instanceof Error?e.message:"Unknown error"))}}),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white",children:[Gt.jsx(My,{className:"h-4 w-4"}),"AI"]}),Gt.jsxs(Bg,{variant:"outline",onClick:()=>x("/chat"),className:"flex items-center gap-2 border-purple-300 text-purple-700 hover:bg-purple-100",children:[Gt.jsx(Iy,{className:"h-4 w-4"}),"AI"]})]})]})]}),Gt.jsxs(IL,{children:[Gt.jsxs(kL,{children:[Gt.jsxs(_L,{className:"flex items-center gap-2",children:[Gt.jsx(Yg,{className:"h-5 w-5"}),"RAG (Retrieval-Augmented Generation) "]}),Gt.jsx("p",{className:"text-sm text-gray-600",children:"GPT"})]}),Gt.jsxs(jL,{className:"space-y-6",children:[Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[Gt.jsx(fy,{className:"h-4 w-4"}),""]}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs(FL,{htmlFor:"chunkSize",children:[": ",v.chunkSize,""]}),Gt.jsx(UH,{id:"chunkSize",min:200,max:2e3,step:100,value:[v.chunkSize],onValueChange:e=>g(t=>ze(Le({},t),{chunkSize:e[0]})),className:"w-full"}),Gt.jsx("p",{className:"text-xs text-gray-500",children:"1"})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs(FL,{htmlFor:"chunkOverlap",children:[": ",v.chunkOverlap,""]}),Gt.jsx(UH,{id:"chunkOverlap",min:0,max:500,step:50,value:[v.chunkOverlap],onValueChange:e=>g(t=>ze(Le({},t),{chunkOverlap:e[0]})),className:"w-full"}),Gt.jsx("p",{className:"text-xs text-gray-500",children:""})]})]})]}),Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[Gt.jsx(Wy,{className:"h-4 w-4"}),""]}),Gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs(FL,{htmlFor:"similarityThreshold",children:[": ",v.similarityThreshold]}),Gt.jsx(UH,{id:"similarityThreshold",min:.1,max:1,step:.1,value:[v.similarityThreshold],onValueChange:e=>g(t=>ze(Le({},t),{similarityThreshold:e[0]})),className:"w-full"}),Gt.jsx("p",{className:"text-xs text-gray-500",children:""})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs(FL,{htmlFor:"maxResults",children:[": ",v.maxResults,""]}),Gt.jsx(UH,{id:"maxResults",min:1,max:20,step:1,value:[v.maxResults],onValueChange:e=>g(t=>ze(Le({},t),{maxResults:e[0]})),className:"w-full"}),Gt.jsx("p",{className:"text-xs text-gray-500",children:"1"})]})]})]}),Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[Gt.jsx(ab,{className:"h-4 w-4"}),""]}),Gt.jsxs("div",{className:"flex gap-4",children:[Gt.jsxs("label",{className:"flex items-center space-x-2",children:[Gt.jsx("input",{type:"checkbox",checked:v.enableSemantic,onChange:e=>g(t=>ze(Le({},t),{enableSemantic:e.target.checked})),className:"rounded"}),Gt.jsx("span",{className:"text-sm",children:""})]}),Gt.jsxs("label",{className:"flex items-center space-x-2",children:[Gt.jsx("input",{type:"checkbox",checked:v.enableKeyword,onChange:e=>g(t=>ze(Le({},t),{enableKeyword:e.target.checked})),className:"rounded"}),Gt.jsx("span",{className:"text-sm",children:""})]})]})]}),Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsx("h4",{className:"font-medium",children:""}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsxs("label",{className:"flex items-center space-x-2",children:[Gt.jsx("input",{type:"checkbox",checked:v.preprocessing.removeStopWords,onChange:e=>g(t=>ze(Le({},t),{preprocessing:ze(Le({},t.preprocessing),{removeStopWords:e.target.checked})})),className:"rounded"}),Gt.jsx("span",{className:"text-sm",children:""})]}),Gt.jsxs("label",{className:"flex items-center space-x-2",children:[Gt.jsx("input",{type:"checkbox",checked:v.preprocessing.normalizeCasing,onChange:e=>g(t=>ze(Le({},t),{preprocessing:ze(Le({},t.preprocessing),{normalizeCasing:e.target.checked})})),className:"rounded"}),Gt.jsx("span",{className:"text-sm",children:""})]}),Gt.jsxs("label",{className:"flex items-center space-x-2",children:[Gt.jsx("input",{type:"checkbox",checked:v.preprocessing.removeSpecialChars,onChange:e=>g(t=>ze(Le({},t),{preprocessing:ze(Le({},t.preprocessing),{removeSpecialChars:e.target.checked})})),className:"rounded"}),Gt.jsx("span",{className:"text-sm",children:""})]})]})]}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(FL,{htmlFor:"customPrompt",children:""}),Gt.jsx(Qz,{id:"customPrompt",value:v.customPrompt,onChange:e=>g(t=>ze(Le({},t),{customPrompt:e.target.value})),placeholder:"RAG...",rows:3}),Gt.jsx("p",{className:"text-xs text-gray-500",children:"GPT"})]}),Gt.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[Gt.jsxs(Bg,{onClick:()=>Ke(this,null,function*(){try{if(!(yield fetch("/api/settings/rag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v),credentials:"include"})).ok)throw new Error("");alert("RAG")}catch(e){alert("")}}),className:"flex items-center gap-2",children:[Gt.jsx(By,{className:"h-4 w-4"}),"RAG"]}),Gt.jsxs(Bg,{variant:"outline",onClick:()=>x("/chat"),className:"flex items-center gap-2",children:[Gt.jsx(iy,{className:"h-4 w-4"}),""]})]})]})]}),Gt.jsx(mie,{})]})})]})]})}},Symbol.toStringTag,{value:"Module"}));const Eie=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,isLoading:t}=sv(),{toast:r}=fv(),n=im(),[i,s]=Lt.useState(!0),[o,a]=Lt.useState(null),[l,c]=Lt.useState([]),[u,d]=Lt.useState([]),[p,h]=Lt.useState([]),[f,m]=Lt.useState(""),[v,g]=Lt.useState("all"),[y,b]=Lt.useState(!1),[x,w]=Lt.useState(!1),[S,C]=Lt.useState(null),[E,T]=Lt.useState(null),[N,P]=Lt.useState(""),[R,I]=Lt.useState(""),[k,_]=Lt.useState("");Lt.useEffect(()=>{t||e||n("/chat")},[e,t,n]),Lt.useEffect(()=>{A()},[]),Lt.useEffect(()=>{let e=u;f.trim()&&(e=e.filter(e=>e.machine_number.toLowerCase().includes(f.toLowerCase())||e.machine_type_name&&e.machine_type_name.toLowerCase().includes(f.toLowerCase()))),"all"!==v&&(e=e.filter(e=>e.machine_type_id===v)),h(e)},[u,f,v]);const A=()=>Ke(this,null,function*(){try{s(!0),a(null);const{buildApiUrl:e}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),t=yield fetch(e("/machines/machine-types"));if(!t.ok)throw new Error("");const r=yield t.json();if(r.success){const e=(r.machineTypes||r.data||[]).map(e=>({id:e.id,machine_type_name:e.name||e.machine_type_name||e.category}));c(e)}const n=yield fetch(e("/machines"));if(!n.ok)throw new Error("");const i=yield n.json();if(i.success){const e=(i.machines||i.data||[]).map(e=>({id:e.id,machine_number:e.machine_number,machine_type_id:e.machine_type_id,machine_type_name:e.type||e.machine_type_name}));d(e)}}catch(e){console.error(":",e),a(e instanceof Error?e:new Error("Unknown error")),r({title:"",description:"",variant:"destructive"})}finally{s(!1)}}),j=()=>Ke(this,null,function*(){try{const{buildApiUrl:e}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),t=e(S?`/machines/machine-types/${S.id}`:"/machines/machine-types"),n=S?"PUT":"POST",i={machine_type_name:N},s=yield fetch(t,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok){const e=yield s.json();throw new Error(e.error||"")}const o=yield s.json();if(!o.success)throw new Error(o.error||"");r({title:S?"":"",description:o.message||""}),b(!1),P(""),C(null),A()}catch(e){console.error(":",e),r({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}}),O=e=>Ke(this,null,function*(){if(confirm(""))try{const{buildApiUrl:t}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),n=yield fetch(t(`/machines/machine-types/${e}`),{method:"DELETE"});if(!n.ok){const e=yield n.json();throw new Error(e.error||"")}const i=yield n.json();if(!i.success)throw new Error(i.error||"");r({title:"",description:""}),A()}catch(t){console.error(":",t),r({title:"",description:t instanceof Error?t.message:"",variant:"destructive"})}}),D=()=>Ke(this,null,function*(){try{if(!k)return void r({title:"",description:"",variant:"destructive"});if(!R.trim())return void r({title:"",description:"",variant:"destructive"});const{buildApiUrl:e}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),t=e(E?`/machines/${E.id}`:"/machines"),n=E?"PUT":"POST",i={machine_number:R.trim(),machine_type_id:k},s=yield fetch(t,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok){const e=yield s.json();throw new Error(e.error||"")}const o=yield s.json();if(!o.success)throw new Error(o.error||"");r({title:E?"":"",description:o.message||""}),w(!1),I(""),_(""),T(null),A()}catch(e){console.error(":",e),r({title:"",description:e instanceof Error?e.message:"",variant:"destructive"})}}),M=e=>Ke(this,null,function*(){if(confirm(""))try{const{buildApiUrl:t}=yield ff(()=>Ke(this,null,function*(){const{buildApiUrl:e}=yield Promise.resolve().then(()=>Qm);return{buildApiUrl:e}}),void 0),n=yield fetch(t(`/machines/${e}`),{method:"DELETE"});if(!n.ok){const e=yield n.json();throw new Error(e.error||"")}const i=yield n.json();if(!i.success)throw new Error(i.error||"");r({title:"",description:""}),A()}catch(t){console.error(":",t),r({title:"",description:t instanceof Error?t.message:"",variant:"destructive"})}});return t||i?Gt.jsx("div",{className:"flex items-center justify-center min-h-screen",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),Gt.jsx("p",{className:"mt-2 text-blue-600",children:"..."})]})}):Gt.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-7xl mx-auto w-full bg-gradient-to-br from-blue-50 to-indigo-50",children:[Gt.jsxs("div",{className:"mb-6",children:[Gt.jsx("div",{className:"flex items-center gap-4 mb-4",children:Gt.jsx(Wm,{to:"/settings",children:Gt.jsxs(Bg,{variant:"outline",size:"sm",children:[Gt.jsx(qg,{className:"mr-2 h-4 w-4"}),""]})})}),Gt.jsxs("h1",{className:"text-3xl font-bold flex items-center bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:[Gt.jsx(sb,{className:"mr-3 h-8 w-8 text-indigo-500"}),""]}),Gt.jsx("p",{className:"text-blue-600 mt-2",children:""})]}),Gt.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Gt.jsxs(IL,{className:"border border-blue-200 shadow-lg",children:[Gt.jsx(kL,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:Gt.jsxs(_L,{className:"text-xl flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center",children:[Gt.jsx(By,{className:"mr-2 h-6 w-6"}),""]}),Gt.jsxs(eF,{open:y,onOpenChange:b,children:[Gt.jsx(tF,{asChild:!0,children:Gt.jsxs(Bg,{size:"sm",variant:"secondary",onClick:()=>{C(null),P("")},className:"bg-white text-blue-600 hover:bg-blue-50",children:[Gt.jsx(jy,{className:"mr-2 h-4 w-4"}),""]})}),Gt.jsxs(iF,{children:[Gt.jsxs(sF,{children:[Gt.jsx(aF,{children:S?"":""}),Gt.jsx(lF,{children:S?"":""})]}),Gt.jsx("div",{className:"space-y-4 py-4",children:Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"type-name",children:""}),Gt.jsx(KL,{id:"type-name",value:N,onChange:e=>P(e.target.value),placeholder:"",onKeyDown:e=>{"Enter"===e.key&&j()}})]})}),Gt.jsxs(oF,{children:[Gt.jsx(Bg,{variant:"outline",onClick:()=>{P(""),C(null),b(!1)},children:""}),Gt.jsx(Bg,{onClick:j,children:S?"":""})]})]})]})]})}),Gt.jsxs(jL,{className:"p-6",children:[Gt.jsx("div",{className:"flex justify-between items-center mb-4",children:Gt.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:""})}),Gt.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===l.length?Gt.jsx("div",{className:"text-center py-8 text-blue-600",children:Gt.jsx("p",{children:""})}):l.map(e=>Gt.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-100",children:[Gt.jsx("span",{className:"font-medium text-blue-800",children:e.machine_type_name}),Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsx(Bg,{size:"sm",variant:"ghost",onClick:()=>{C(e),P(e.machine_type_name),b(!0)},className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-800",children:Gt.jsx($y,{className:"h-4 w-4"})}),Gt.jsx(Bg,{size:"sm",variant:"ghost",onClick:()=>O(e.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-800",children:Gt.jsx(Ky,{className:"h-4 w-4"})})]})]},e.id))})]})]}),Gt.jsxs(IL,{className:"border border-blue-200 shadow-lg",children:[Gt.jsx(kL,{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white",children:Gt.jsxs(_L,{className:"text-xl flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center",children:[Gt.jsx(xy,{className:"mr-2 h-6 w-6"}),""]}),Gt.jsxs(eF,{open:x,onOpenChange:w,children:[Gt.jsx(tF,{asChild:!0,children:Gt.jsxs(Bg,{size:"sm",variant:"secondary",onClick:()=>{T(null),I(""),_("")},className:"bg-white text-indigo-600 hover:bg-indigo-50",children:[Gt.jsx(jy,{className:"mr-2 h-4 w-4"}),""]})}),Gt.jsxs(iF,{children:[Gt.jsxs(sF,{children:[Gt.jsx(aF,{children:E?"":""}),Gt.jsx(lF,{children:E?"":""})]}),Gt.jsxs("div",{className:"space-y-4 py-4",children:[Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"machine-type",children:""}),Gt.jsxs(mV,{value:k,onValueChange:_,disabled:!!E,children:[Gt.jsx(gV,{children:Gt.jsx(vV,{placeholder:""})}),Gt.jsx(xV,{children:l.map(e=>Gt.jsx(wV,{value:e.id,children:e.machine_type_name},e.id))})]})]}),Gt.jsxs("div",{children:[Gt.jsx(FL,{htmlFor:"machine-number",children:""}),Gt.jsx(KL,{id:"machine-number",value:R,onChange:e=>I(e.target.value),placeholder:"",onKeyDown:e=>{"Enter"===e.key&&D()}})]})]}),Gt.jsxs(oF,{children:[Gt.jsx(Bg,{variant:"outline",onClick:()=>{I(""),_(""),T(null),w(!1)},children:""}),Gt.jsx(Bg,{onClick:D,children:E?"":""})]})]})]})]})}),Gt.jsxs(jL,{className:"p-6",children:[Gt.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[Gt.jsx("div",{className:"flex-1",children:Gt.jsx(KL,{placeholder:"...",value:f,onChange:e=>m(e.target.value),className:"w-full"})}),Gt.jsxs(mV,{value:v,onValueChange:g,children:[Gt.jsx(gV,{className:"w-full sm:w-48",children:Gt.jsx(vV,{placeholder:""})}),Gt.jsxs(xV,{children:[Gt.jsx(wV,{value:"all",children:""}),l.map(e=>Gt.jsx(wV,{value:e.id,children:e.machine_type_name},e.id))]})]})]}),Gt.jsx("div",{className:"max-h-96 overflow-y-auto",children:Gt.jsxs(UV,{children:[Gt.jsx(WV,{children:Gt.jsxs($V,{children:[Gt.jsx(VV,{children:""}),Gt.jsx(VV,{children:""}),Gt.jsx(VV,{className:"w-24",children:""})]})}),Gt.jsx(HV,{children:0===p.length?Gt.jsx($V,{children:Gt.jsx(qV,{colSpan:3,className:"text-center py-8 text-blue-600",children:""})}):p.map(e=>Gt.jsxs($V,{children:[Gt.jsx(qV,{className:"font-medium",children:e.machine_number}),Gt.jsx(qV,{children:e.machine_type_name}),Gt.jsx(qV,{children:Gt.jsxs("div",{className:"flex gap-2",children:[Gt.jsx(Bg,{size:"sm",variant:"ghost",onClick:()=>{T(e),I(e.machine_number),_(e.machine_type_id),w(!0)},className:"h-8 w-8 p-0 text-indigo-600 hover:text-indigo-800",children:Gt.jsx($y,{className:"h-4 w-4"})}),Gt.jsx(Bg,{size:"sm",variant:"ghost",onClick:()=>M(e.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-800",children:Gt.jsx(Ky,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})]})]}),o&&Gt.jsx("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:Gt.jsxs("p",{className:"text-red-700",children:[": ",o.message]})})]})}},Symbol.toStringTag,{value:"Module"}));const Tie=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=Lt.useState(null),[r,n]=Lt.useState(!1),[i,s]=Lt.useState("idle");return Gt.jsxs("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-gray-50 p-4",children:[Gt.jsx(IL,{className:"w-full max-w-md mb-4",children:Gt.jsxs(jL,{className:"pt-6",children:[Gt.jsxs("div",{className:"flex mb-4 gap-2",children:[Gt.jsx(ny,{className:"h-8 w-8 text-red-500"}),Gt.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),Gt.jsx("p",{className:"text-sm text-gray-600",children:"The page you're looking for doesn't exist or has been moved."}),Gt.jsx("div",{className:"mt-4",children:Gt.jsx(Wm,{to:"/",className:"text-blue-600 hover:underline text-sm",children:"Return to Home"})})]})}),Gt.jsx(IL,{className:"w-full max-w-md",children:Gt.jsxs(jL,{className:"pt-6",children:[Gt.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"API Connection Test"}),Gt.jsxs("div",{className:"flex gap-3 mb-4",children:[Gt.jsxs(Bg,{onClick:()=>Ke(this,null,function*(){n(!0),s("idle");try{const e=yield fetch(XV),r=yield e.json();t(JSON.stringify(r,null,2)),s("success")}catch(e){console.error("API test failed:",e),t(String(e)),s("error")}finally{n(!1)}}),disabled:r,className:"flex items-center gap-2",children:[Gt.jsx(Fy,{className:"h-4 w-4"}),"Test Health API"]}),Gt.jsxs(Bg,{onClick:()=>Ke(this,null,function*(){n(!0),s("idle");try{const e=yield fetch(QV,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:"Hello, this is a test of the OpenAI API connection."})});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const r=yield e.json();t(r.response),s("success")}catch(e){console.error("OpenAI API test failed:",e),t(String(e)),s("error")}finally{n(!1)}}),disabled:r,variant:"secondary",className:"flex items-center gap-2",children:[Gt.jsx(Yg,{className:"h-4 w-4"}),"Test OpenAI API"]})]}),r&&Gt.jsx("div",{className:"py-4 text-center text-gray-600",children:"Loading..."}),!r&&e&&Gt.jsxs("div",{className:"mt-2",children:[Gt.jsx("div",{className:"text-sm font-medium mb-1 "+("success"===i?"text-green-600":"text-red-600"),children:"success"===i?"Success!":"Error:"}),Gt.jsx("pre",{className:"bg-gray-100 p-3 rounded-md text-xs overflow-x-auto max-h-64 overflow-y-auto",children:e})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));
