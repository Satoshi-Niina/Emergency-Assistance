var IV=Object.defineProperty;var QP=e=>{throw TypeError(e)};var jV=(e,t,n)=>t in e?IV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var W=(e,t,n)=>jV(e,typeof t!="symbol"?t+"":t,n),HS=(e,t,n)=>t.has(e)||QP("Cannot "+n);var B=(e,t,n)=>(HS(e,t,"read from private field"),n?n.call(e):t.get(e)),Ie=(e,t,n)=>t.has(e)?QP("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ge=(e,t,n,r)=>(HS(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Je=(e,t,n)=>(HS(e,t,"access private method"),n);var Mf=(e,t,n,r)=>({set _(i){ge(e,t,i,n)},get _(){return B(e,t,r)}});function kV(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function MV(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var tO={exports:{}},gg={},nO={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp=Symbol.for("react.element"),OV=Symbol.for("react.portal"),DV=Symbol.for("react.fragment"),LV=Symbol.for("react.strict_mode"),zV=Symbol.for("react.profiler"),FV=Symbol.for("react.provider"),$V=Symbol.for("react.context"),BV=Symbol.for("react.forward_ref"),VV=Symbol.for("react.suspense"),UV=Symbol.for("react.memo"),qV=Symbol.for("react.lazy"),JP=Symbol.iterator;function HV(e){return e===null||typeof e!="object"?null:(e=JP&&e[JP]||e["@@iterator"],typeof e=="function"?e:null)}var rO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iO=Object.assign,sO={};function Zl(e,t,n){this.props=e,this.context=t,this.refs=sO,this.updater=n||rO}Zl.prototype.isReactComponent={};Zl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oO(){}oO.prototype=Zl.prototype;function Qx(e,t,n){this.props=e,this.context=t,this.refs=sO,this.updater=n||rO}var Jx=Qx.prototype=new oO;Jx.constructor=Qx;iO(Jx,Zl.prototype);Jx.isPureReactComponent=!0;var YP=Array.isArray,aO=Object.prototype.hasOwnProperty,Yx={current:null},cO={key:!0,ref:!0,__self:!0,__source:!0};function lO(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)aO.call(t,r)&&!cO.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),l=0;l<o;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Xp,type:e,key:s,ref:a,props:i,_owner:Yx.current}}function WV(e,t){return{$$typeof:Xp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xp}function KV(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ZP=/\/+/g;function WS(e,t){return typeof e=="object"&&e!==null&&e.key!=null?KV(""+e.key):t.toString(36)}function Em(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Xp:case OV:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+WS(a,0):r,YP(i)?(n="",e!=null&&(n=e.replace(ZP,"$&/")+"/"),Em(i,t,n,"",function(l){return l})):i!=null&&(Zx(i)&&(i=WV(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(ZP,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",YP(e))for(var o=0;o<e.length;o++){s=e[o];var c=r+WS(s,o);a+=Em(s,t,n,c,i)}else if(c=HV(e),typeof c=="function")for(e=c.call(e),o=0;!(s=e.next()).done;)s=s.value,c=r+WS(s,o++),a+=Em(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Of(e,t,n){if(e==null)return e;var r=[],i=0;return Em(e,r,"","",function(s){return t.call(n,s,i++)}),r}function GV(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Jn={current:null},Pm={transition:null},QV={ReactCurrentDispatcher:Jn,ReactCurrentBatchConfig:Pm,ReactCurrentOwner:Yx};function uO(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:Of,forEach:function(e,t,n){Of(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Of(e,function(){t++}),t},toArray:function(e){return Of(e,function(t){return t})||[]},only:function(e){if(!Zx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rt.Component=Zl;rt.Fragment=DV;rt.Profiler=zV;rt.PureComponent=Qx;rt.StrictMode=LV;rt.Suspense=VV;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QV;rt.act=uO;rt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=iO({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Yx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)aO.call(t,c)&&!cO.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var l=0;l<c;l++)o[l]=arguments[l+2];r.children=o}return{$$typeof:Xp,type:e.type,key:i,ref:s,props:r,_owner:a}};rt.createContext=function(e){return e={$$typeof:$V,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:FV,_context:e},e.Consumer=e};rt.createElement=lO;rt.createFactory=function(e){var t=lO.bind(null,e);return t.type=e,t};rt.createRef=function(){return{current:null}};rt.forwardRef=function(e){return{$$typeof:BV,render:e}};rt.isValidElement=Zx;rt.lazy=function(e){return{$$typeof:qV,_payload:{_status:-1,_result:e},_init:GV}};rt.memo=function(e,t){return{$$typeof:UV,type:e,compare:t===void 0?null:t}};rt.startTransition=function(e){var t=Pm.transition;Pm.transition={};try{e()}finally{Pm.transition=t}};rt.unstable_act=uO;rt.useCallback=function(e,t){return Jn.current.useCallback(e,t)};rt.useContext=function(e){return Jn.current.useContext(e)};rt.useDebugValue=function(){};rt.useDeferredValue=function(e){return Jn.current.useDeferredValue(e)};rt.useEffect=function(e,t){return Jn.current.useEffect(e,t)};rt.useId=function(){return Jn.current.useId()};rt.useImperativeHandle=function(e,t,n){return Jn.current.useImperativeHandle(e,t,n)};rt.useInsertionEffect=function(e,t){return Jn.current.useInsertionEffect(e,t)};rt.useLayoutEffect=function(e,t){return Jn.current.useLayoutEffect(e,t)};rt.useMemo=function(e,t){return Jn.current.useMemo(e,t)};rt.useReducer=function(e,t,n){return Jn.current.useReducer(e,t,n)};rt.useRef=function(e){return Jn.current.useRef(e)};rt.useState=function(e){return Jn.current.useState(e)};rt.useSyncExternalStore=function(e,t,n){return Jn.current.useSyncExternalStore(e,t,n)};rt.useTransition=function(){return Jn.current.useTransition()};rt.version="18.3.1";nO.exports=rt;var m=nO.exports;const q=fc(m),dO=kV({__proto__:null,default:q},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JV=m,YV=Symbol.for("react.element"),ZV=Symbol.for("react.fragment"),XV=Object.prototype.hasOwnProperty,eU=JV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tU={key:!0,ref:!0,__self:!0,__source:!0};function hO(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)XV.call(t,r)&&!tU.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:YV,type:e,key:s,ref:a,props:i,_owner:eU.current}}gg.Fragment=ZV;gg.jsx=hO;gg.jsxs=hO;tO.exports=gg;var d=tO.exports,pO={exports:{}},Or={},fO={exports:{}},mO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,I){var $=R.length;R.push(I);e:for(;0<$;){var U=$-1>>>1,G=R[U];if(0<i(G,I))R[U]=I,R[$]=G,$=U;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var I=R[0],$=R.pop();if($!==I){R[0]=$;e:for(var U=0,G=R.length,Y=G>>>1;U<Y;){var J=2*(U+1)-1,oe=R[J],V=J+1,H=R[V];if(0>i(oe,$))V<G&&0>i(H,oe)?(R[U]=H,R[V]=$,U=V):(R[U]=oe,R[J]=$,U=J);else if(V<G&&0>i(H,$))R[U]=H,R[V]=$,U=V;else break e}}return I}function i(R,I){var $=R.sortIndex-I.sortIndex;return $!==0?$:R.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],l=[],u=1,h=null,p=3,f=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(R){for(var I=n(l);I!==null;){if(I.callback===null)r(l);else if(I.startTime<=R)r(l),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(l)}}function x(R){if(v=!1,C(R),!g)if(n(c)!==null)g=!0,N(E);else{var I=n(l);I!==null&&j(x,I.startTime-R)}}function E(R,I){g=!1,v&&(v=!1,y(_),_=-1),f=!0;var $=p;try{for(C(I),h=n(c);h!==null&&(!(h.expirationTime>I)||R&&!D());){var U=h.callback;if(typeof U=="function"){h.callback=null,p=h.priorityLevel;var G=U(h.expirationTime<=I);I=e.unstable_now(),typeof G=="function"?h.callback=G:h===n(c)&&r(c),C(I)}else r(c);h=n(c)}if(h!==null)var Y=!0;else{var J=n(l);J!==null&&j(x,J.startTime-I),Y=!1}return Y}finally{h=null,p=$,f=!1}}var P=!1,T=null,_=-1,k=5,z=-1;function D(){return!(e.unstable_now()-z<k)}function O(){if(T!==null){var R=e.unstable_now();z=R;var I=!0;try{I=T(!0,R)}finally{I?M():(P=!1,T=null)}}else P=!1}var M;if(typeof S=="function")M=function(){S(O)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,A=b.port2;b.port1.onmessage=O,M=function(){A.postMessage(null)}}else M=function(){w(O,0)};function N(R){T=R,P||(P=!0,M())}function j(R,I){_=w(function(){R(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,N(E))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var $=p;p=I;try{return R()}finally{p=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,I){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var $=p;p=R;try{return I()}finally{p=$}},e.unstable_scheduleCallback=function(R,I,$){var U=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?U+$:U):$=U,R){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=$+G,R={id:u++,callback:I,priorityLevel:R,startTime:$,expirationTime:G,sortIndex:-1},$>U?(R.sortIndex=$,t(l,R),n(c)===null&&R===n(l)&&(v?(y(_),_=-1):v=!0,j(x,$-U))):(R.sortIndex=G,t(c,R),g||f||(g=!0,N(E))),R},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(R){var I=p;return function(){var $=p;p=I;try{return R.apply(this,arguments)}finally{p=$}}}})(mO);fO.exports=mO;var nU=fO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rU=m,kr=nU;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vO=new Set,Xh={};function mc(e,t){_l(e,t),_l(e+"Capture",t)}function _l(e,t){for(Xh[e]=t,e=0;e<t.length;e++)vO.add(t[e])}var js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_w=Object.prototype.hasOwnProperty,iU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XP={},e1={};function sU(e){return _w.call(e1,e)?!0:_w.call(XP,e)?!1:iU.test(e)?e1[e]=!0:(XP[e]=!0,!1)}function oU(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function aU(e,t,n,r){if(t===null||typeof t>"u"||oU(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Yn(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wn[e]=new Yn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wn[t]=new Yn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wn[e]=new Yn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wn[e]=new Yn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wn[e]=new Yn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wn[e]=new Yn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wn[e]=new Yn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wn[e]=new Yn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wn[e]=new Yn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xx=/[\-:]([a-z])/g;function eb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xx,eb);wn[t]=new Yn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xx,eb);wn[t]=new Yn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xx,eb);wn[t]=new Yn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wn[e]=new Yn(e,1,!1,e.toLowerCase(),null,!1,!1)});wn.xlinkHref=new Yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wn[e]=new Yn(e,1,!1,e.toLowerCase(),null,!0,!0)});function tb(e,t,n,r){var i=wn.hasOwnProperty(t)?wn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(aU(t,n,i,r)&&(n=null),r||i===null?sU(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Us=rU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Df=Symbol.for("react.element"),Lc=Symbol.for("react.portal"),zc=Symbol.for("react.fragment"),nb=Symbol.for("react.strict_mode"),Tw=Symbol.for("react.profiler"),gO=Symbol.for("react.provider"),yO=Symbol.for("react.context"),rb=Symbol.for("react.forward_ref"),Aw=Symbol.for("react.suspense"),Nw=Symbol.for("react.suspense_list"),ib=Symbol.for("react.memo"),Xs=Symbol.for("react.lazy"),SO=Symbol.for("react.offscreen"),t1=Symbol.iterator;function Su(e){return e===null||typeof e!="object"?null:(e=t1&&e[t1]||e["@@iterator"],typeof e=="function"?e:null)}var Ft=Object.assign,KS;function bh(e){if(KS===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);KS=t&&t[1]||""}return`
`+KS+e}var GS=!1;function QS(e,t){if(!e||GS)return"";GS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{GS=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bh(e):""}function cU(e){switch(e.tag){case 5:return bh(e.type);case 16:return bh("Lazy");case 13:return bh("Suspense");case 19:return bh("SuspenseList");case 0:case 2:case 15:return e=QS(e.type,!1),e;case 11:return e=QS(e.type.render,!1),e;case 1:return e=QS(e.type,!0),e;default:return""}}function Iw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zc:return"Fragment";case Lc:return"Portal";case Tw:return"Profiler";case nb:return"StrictMode";case Aw:return"Suspense";case Nw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yO:return(e.displayName||"Context")+".Consumer";case gO:return(e._context.displayName||"Context")+".Provider";case rb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ib:return t=e.displayName||null,t!==null?t:Iw(e.type)||"Memo";case Xs:t=e._payload,e=e._init;try{return Iw(e(t))}catch{}}return null}function lU(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Iw(t);case 8:return t===nb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Do(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uU(e){var t=wO(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lf(e){e._valueTracker||(e._valueTracker=uU(e))}function CO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=wO(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ev(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jw(e,t){var n=t.checked;return Ft({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function n1(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Do(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xO(e,t){t=t.checked,t!=null&&tb(e,"checked",t,!1)}function kw(e,t){xO(e,t);var n=Do(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mw(e,t.type,n):t.hasOwnProperty("defaultValue")&&Mw(e,t.type,Do(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function r1(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Mw(e,t,n){(t!=="number"||ev(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Eh=Array.isArray;function Zc(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Do(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ow(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Ft({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function i1(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ce(92));if(Eh(n)){if(1<n.length)throw Error(ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Do(n)}}function bO(e,t){var n=Do(t.value),r=Do(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function s1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function EO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?EO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zf,PO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zf=zf||document.createElement("div"),zf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ep(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Lh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dU=["Webkit","ms","Moz","O"];Object.keys(Lh).forEach(function(e){dU.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lh[t]=Lh[e]})});function RO(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Lh.hasOwnProperty(e)&&Lh[e]?(""+t).trim():t+"px"}function _O(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=RO(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var hU=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lw(e,t){if(t){if(hU[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function zw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fw=null;function sb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $w=null,Xc=null,el=null;function o1(e){if(e=nf(e)){if(typeof $w!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=xg(t),$w(e.stateNode,e.type,t))}}function TO(e){Xc?el?el.push(e):el=[e]:Xc=e}function AO(){if(Xc){var e=Xc,t=el;if(el=Xc=null,o1(e),t)for(e=0;e<t.length;e++)o1(t[e])}}function NO(e,t){return e(t)}function IO(){}var JS=!1;function jO(e,t,n){if(JS)return e(t,n);JS=!0;try{return NO(e,t,n)}finally{JS=!1,(Xc!==null||el!==null)&&(IO(),AO())}}function tp(e,t){var n=e.stateNode;if(n===null)return null;var r=xg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ce(231,t,typeof n));return n}var Bw=!1;if(js)try{var wu={};Object.defineProperty(wu,"passive",{get:function(){Bw=!0}}),window.addEventListener("test",wu,wu),window.removeEventListener("test",wu,wu)}catch{Bw=!1}function pU(e,t,n,r,i,s,a,o,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var zh=!1,tv=null,nv=!1,Vw=null,fU={onError:function(e){zh=!0,tv=e}};function mU(e,t,n,r,i,s,a,o,c){zh=!1,tv=null,pU.apply(fU,arguments)}function vU(e,t,n,r,i,s,a,o,c){if(mU.apply(this,arguments),zh){if(zh){var l=tv;zh=!1,tv=null}else throw Error(ce(198));nv||(nv=!0,Vw=l)}}function vc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function a1(e){if(vc(e)!==e)throw Error(ce(188))}function gU(e){var t=e.alternate;if(!t){if(t=vc(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return a1(i),e;if(s===r)return a1(i),t;s=s.sibling}throw Error(ce(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?e:t}function MO(e){return e=gU(e),e!==null?OO(e):null}function OO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=OO(e);if(t!==null)return t;e=e.sibling}return null}var DO=kr.unstable_scheduleCallback,c1=kr.unstable_cancelCallback,yU=kr.unstable_shouldYield,SU=kr.unstable_requestPaint,Wt=kr.unstable_now,wU=kr.unstable_getCurrentPriorityLevel,ob=kr.unstable_ImmediatePriority,LO=kr.unstable_UserBlockingPriority,rv=kr.unstable_NormalPriority,CU=kr.unstable_LowPriority,zO=kr.unstable_IdlePriority,yg=null,Ji=null;function xU(e){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(yg,e,void 0,(e.current.flags&128)===128)}catch{}}var Si=Math.clz32?Math.clz32:PU,bU=Math.log,EU=Math.LN2;function PU(e){return e>>>=0,e===0?32:31-(bU(e)/EU|0)|0}var Ff=64,$f=4194304;function Ph(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function iv(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Ph(o):(s&=a,s!==0&&(r=Ph(s)))}else a=n&~i,a!==0?r=Ph(a):s!==0&&(r=Ph(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Si(t),i=1<<n,r|=e[n],t&=~i;return r}function RU(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _U(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Si(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=RU(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}function Uw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function FO(){var e=Ff;return Ff<<=1,!(Ff&4194240)&&(Ff=64),e}function YS(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ef(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Si(t),e[t]=n}function TU(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Si(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function ab(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Si(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function $O(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var BO,cb,VO,UO,qO,qw=!1,Bf=[],Eo=null,Po=null,Ro=null,np=new Map,rp=new Map,so=[],AU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l1(e,t){switch(e){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":np.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rp.delete(t.pointerId)}}function Cu(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=nf(t),t!==null&&cb(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function NU(e,t,n,r,i){switch(t){case"focusin":return Eo=Cu(Eo,e,t,n,r,i),!0;case"dragenter":return Po=Cu(Po,e,t,n,r,i),!0;case"mouseover":return Ro=Cu(Ro,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return np.set(s,Cu(np.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rp.set(s,Cu(rp.get(s)||null,e,t,n,r,i)),!0}return!1}function HO(e){var t=Na(e.target);if(t!==null){var n=vc(t);if(n!==null){if(t=n.tag,t===13){if(t=kO(n),t!==null){e.blockedOn=t,qO(e.priority,function(){VO(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Hw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Fw=r,n.target.dispatchEvent(r),Fw=null}else return t=nf(n),t!==null&&cb(t),e.blockedOn=n,!1;t.shift()}return!0}function u1(e,t,n){Rm(e)&&n.delete(t)}function IU(){qw=!1,Eo!==null&&Rm(Eo)&&(Eo=null),Po!==null&&Rm(Po)&&(Po=null),Ro!==null&&Rm(Ro)&&(Ro=null),np.forEach(u1),rp.forEach(u1)}function xu(e,t){e.blockedOn===t&&(e.blockedOn=null,qw||(qw=!0,kr.unstable_scheduleCallback(kr.unstable_NormalPriority,IU)))}function ip(e){function t(i){return xu(i,e)}if(0<Bf.length){xu(Bf[0],e);for(var n=1;n<Bf.length;n++){var r=Bf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Eo!==null&&xu(Eo,e),Po!==null&&xu(Po,e),Ro!==null&&xu(Ro,e),np.forEach(t),rp.forEach(t),n=0;n<so.length;n++)r=so[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<so.length&&(n=so[0],n.blockedOn===null);)HO(n),n.blockedOn===null&&so.shift()}var tl=Us.ReactCurrentBatchConfig,sv=!0;function jU(e,t,n,r){var i=wt,s=tl.transition;tl.transition=null;try{wt=1,lb(e,t,n,r)}finally{wt=i,tl.transition=s}}function kU(e,t,n,r){var i=wt,s=tl.transition;tl.transition=null;try{wt=4,lb(e,t,n,r)}finally{wt=i,tl.transition=s}}function lb(e,t,n,r){if(sv){var i=Hw(e,t,n,r);if(i===null)a0(e,t,r,ov,n),l1(e,r);else if(NU(i,e,t,n,r))r.stopPropagation();else if(l1(e,r),t&4&&-1<AU.indexOf(e)){for(;i!==null;){var s=nf(i);if(s!==null&&BO(s),s=Hw(e,t,n,r),s===null&&a0(e,t,r,ov,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else a0(e,t,r,null,n)}}var ov=null;function Hw(e,t,n,r){if(ov=null,e=sb(r),e=Na(e),e!==null)if(t=vc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kO(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ov=e,null}function WO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wU()){case ob:return 1;case LO:return 4;case rv:case CU:return 16;case zO:return 536870912;default:return 16}default:return 16}}var Co=null,ub=null,_m=null;function KO(){if(_m)return _m;var e,t=ub,n=t.length,r,i="value"in Co?Co.value:Co.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return _m=i.slice(e,1<r?1-r:void 0)}function Tm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vf(){return!0}function d1(){return!1}function Dr(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Vf:d1,this.isPropagationStopped=d1,this}return Ft(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vf)},persist:function(){},isPersistent:Vf}),t}var Xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},db=Dr(Xl),tf=Ft({},Xl,{view:0,detail:0}),MU=Dr(tf),ZS,XS,bu,Sg=Ft({},tf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bu&&(bu&&e.type==="mousemove"?(ZS=e.screenX-bu.screenX,XS=e.screenY-bu.screenY):XS=ZS=0,bu=e),ZS)},movementY:function(e){return"movementY"in e?e.movementY:XS}}),h1=Dr(Sg),OU=Ft({},Sg,{dataTransfer:0}),DU=Dr(OU),LU=Ft({},tf,{relatedTarget:0}),e0=Dr(LU),zU=Ft({},Xl,{animationName:0,elapsedTime:0,pseudoElement:0}),FU=Dr(zU),$U=Ft({},Xl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),BU=Dr($U),VU=Ft({},Xl,{data:0}),p1=Dr(VU),UU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WU(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=HU[e])?!!t[e]:!1}function hb(){return WU}var KU=Ft({},tf,{key:function(e){if(e.key){var t=UU[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Tm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qU[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hb,charCode:function(e){return e.type==="keypress"?Tm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),GU=Dr(KU),QU=Ft({},Sg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f1=Dr(QU),JU=Ft({},tf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hb}),YU=Dr(JU),ZU=Ft({},Xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),XU=Dr(ZU),eq=Ft({},Sg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tq=Dr(eq),nq=[9,13,27,32],pb=js&&"CompositionEvent"in window,Fh=null;js&&"documentMode"in document&&(Fh=document.documentMode);var rq=js&&"TextEvent"in window&&!Fh,GO=js&&(!pb||Fh&&8<Fh&&11>=Fh),m1=" ",v1=!1;function QO(e,t){switch(e){case"keyup":return nq.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fc=!1;function iq(e,t){switch(e){case"compositionend":return JO(t);case"keypress":return t.which!==32?null:(v1=!0,m1);case"textInput":return e=t.data,e===m1&&v1?null:e;default:return null}}function sq(e,t){if(Fc)return e==="compositionend"||!pb&&QO(e,t)?(e=KO(),_m=ub=Co=null,Fc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return GO&&t.locale!=="ko"?null:t.data;default:return null}}var oq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!oq[e.type]:t==="textarea"}function YO(e,t,n,r){TO(r),t=av(t,"onChange"),0<t.length&&(n=new db("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $h=null,sp=null;function aq(e){c2(e,0)}function wg(e){var t=Vc(e);if(CO(t))return e}function cq(e,t){if(e==="change")return t}var ZO=!1;if(js){var t0;if(js){var n0="oninput"in document;if(!n0){var y1=document.createElement("div");y1.setAttribute("oninput","return;"),n0=typeof y1.oninput=="function"}t0=n0}else t0=!1;ZO=t0&&(!document.documentMode||9<document.documentMode)}function S1(){$h&&($h.detachEvent("onpropertychange",XO),sp=$h=null)}function XO(e){if(e.propertyName==="value"&&wg(sp)){var t=[];YO(t,sp,e,sb(e)),jO(aq,t)}}function lq(e,t,n){e==="focusin"?(S1(),$h=t,sp=n,$h.attachEvent("onpropertychange",XO)):e==="focusout"&&S1()}function uq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wg(sp)}function dq(e,t){if(e==="click")return wg(t)}function hq(e,t){if(e==="input"||e==="change")return wg(t)}function pq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bi=typeof Object.is=="function"?Object.is:pq;function op(e,t){if(bi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_w.call(t,i)||!bi(e[i],t[i]))return!1}return!0}function w1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function C1(e,t){var n=w1(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=w1(n)}}function e2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?e2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function t2(){for(var e=window,t=ev();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ev(e.document)}return t}function fb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fq(e){var t=t2(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&e2(n.ownerDocument.documentElement,n)){if(r!==null&&fb(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=C1(n,s);var a=C1(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mq=js&&"documentMode"in document&&11>=document.documentMode,$c=null,Ww=null,Bh=null,Kw=!1;function x1(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kw||$c==null||$c!==ev(r)||(r=$c,"selectionStart"in r&&fb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bh&&op(Bh,r)||(Bh=r,r=av(Ww,"onSelect"),0<r.length&&(t=new db("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$c)))}function Uf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Bc={animationend:Uf("Animation","AnimationEnd"),animationiteration:Uf("Animation","AnimationIteration"),animationstart:Uf("Animation","AnimationStart"),transitionend:Uf("Transition","TransitionEnd")},r0={},n2={};js&&(n2=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function Cg(e){if(r0[e])return r0[e];if(!Bc[e])return e;var t=Bc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in n2)return r0[e]=t[n];return e}var r2=Cg("animationend"),i2=Cg("animationiteration"),s2=Cg("animationstart"),o2=Cg("transitionend"),a2=new Map,b1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Go(e,t){a2.set(e,t),mc(t,[e])}for(var i0=0;i0<b1.length;i0++){var s0=b1[i0],vq=s0.toLowerCase(),gq=s0[0].toUpperCase()+s0.slice(1);Go(vq,"on"+gq)}Go(r2,"onAnimationEnd");Go(i2,"onAnimationIteration");Go(s2,"onAnimationStart");Go("dblclick","onDoubleClick");Go("focusin","onFocus");Go("focusout","onBlur");Go(o2,"onTransitionEnd");_l("onMouseEnter",["mouseout","mouseover"]);_l("onMouseLeave",["mouseout","mouseover"]);_l("onPointerEnter",["pointerout","pointerover"]);_l("onPointerLeave",["pointerout","pointerover"]);mc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mc("onBeforeInput",["compositionend","keypress","textInput","paste"]);mc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yq=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rh));function E1(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,vU(r,t,void 0,e),e.currentTarget=null}function c2(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,l=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;E1(i,o,l),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,l=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;E1(i,o,l),s=c}}}if(nv)throw e=Vw,nv=!1,Vw=null,e}function _t(e,t){var n=t[Zw];n===void 0&&(n=t[Zw]=new Set);var r=e+"__bubble";n.has(r)||(l2(t,e,2,!1),n.add(r))}function o0(e,t,n){var r=0;t&&(r|=4),l2(n,e,r,t)}var qf="_reactListening"+Math.random().toString(36).slice(2);function ap(e){if(!e[qf]){e[qf]=!0,vO.forEach(function(n){n!=="selectionchange"&&(yq.has(n)||o0(n,!1,e),o0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qf]||(t[qf]=!0,o0("selectionchange",!1,t))}}function l2(e,t,n,r){switch(WO(t)){case 1:var i=jU;break;case 4:i=kU;break;default:i=lb}n=i.bind(null,t,n,e),i=void 0,!Bw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function a0(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Na(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}jO(function(){var l=s,u=sb(n),h=[];e:{var p=a2.get(e);if(p!==void 0){var f=db,g=e;switch(e){case"keypress":if(Tm(n)===0)break e;case"keydown":case"keyup":f=GU;break;case"focusin":g="focus",f=e0;break;case"focusout":g="blur",f=e0;break;case"beforeblur":case"afterblur":f=e0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=h1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=DU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=YU;break;case r2:case i2:case s2:f=FU;break;case o2:f=XU;break;case"scroll":f=MU;break;case"wheel":f=tq;break;case"copy":case"cut":case"paste":f=BU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=f1}var v=(t&4)!==0,w=!v&&e==="scroll",y=v?p!==null?p+"Capture":null:p;v=[];for(var S=l,C;S!==null;){C=S;var x=C.stateNode;if(C.tag===5&&x!==null&&(C=x,y!==null&&(x=tp(S,y),x!=null&&v.push(cp(S,x,C)))),w)break;S=S.return}0<v.length&&(p=new f(p,g,null,n,u),h.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&n!==Fw&&(g=n.relatedTarget||n.fromElement)&&(Na(g)||g[ks]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=l,g=g?Na(g):null,g!==null&&(w=vc(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=l),f!==g)){if(v=h1,x="onMouseLeave",y="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(v=f1,x="onPointerLeave",y="onPointerEnter",S="pointer"),w=f==null?p:Vc(f),C=g==null?p:Vc(g),p=new v(x,S+"leave",f,n,u),p.target=w,p.relatedTarget=C,x=null,Na(u)===l&&(v=new v(y,S+"enter",g,n,u),v.target=C,v.relatedTarget=w,x=v),w=x,f&&g)t:{for(v=f,y=g,S=0,C=v;C;C=Cc(C))S++;for(C=0,x=y;x;x=Cc(x))C++;for(;0<S-C;)v=Cc(v),S--;for(;0<C-S;)y=Cc(y),C--;for(;S--;){if(v===y||y!==null&&v===y.alternate)break t;v=Cc(v),y=Cc(y)}v=null}else v=null;f!==null&&P1(h,p,f,v,!1),g!==null&&w!==null&&P1(h,w,g,v,!0)}}e:{if(p=l?Vc(l):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var E=cq;else if(g1(p))if(ZO)E=hq;else{E=uq;var P=lq}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=dq);if(E&&(E=E(e,l))){YO(h,E,n,u);break e}P&&P(e,p,l),e==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Mw(p,"number",p.value)}switch(P=l?Vc(l):window,e){case"focusin":(g1(P)||P.contentEditable==="true")&&($c=P,Ww=l,Bh=null);break;case"focusout":Bh=Ww=$c=null;break;case"mousedown":Kw=!0;break;case"contextmenu":case"mouseup":case"dragend":Kw=!1,x1(h,n,u);break;case"selectionchange":if(mq)break;case"keydown":case"keyup":x1(h,n,u)}var T;if(pb)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Fc?QO(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(GO&&n.locale!=="ko"&&(Fc||_!=="onCompositionStart"?_==="onCompositionEnd"&&Fc&&(T=KO()):(Co=u,ub="value"in Co?Co.value:Co.textContent,Fc=!0)),P=av(l,_),0<P.length&&(_=new p1(_,e,null,n,u),h.push({event:_,listeners:P}),T?_.data=T:(T=JO(n),T!==null&&(_.data=T)))),(T=rq?iq(e,n):sq(e,n))&&(l=av(l,"onBeforeInput"),0<l.length&&(u=new p1("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:l}),u.data=T))}c2(h,t)})}function cp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function av(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=tp(e,n),s!=null&&r.unshift(cp(e,s,i)),s=tp(e,t),s!=null&&r.push(cp(e,s,i))),e=e.return}return r}function Cc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function P1(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,l=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&l!==null&&(o=l,i?(c=tp(n,s),c!=null&&a.unshift(cp(n,c,o))):i||(c=tp(n,s),c!=null&&a.push(cp(n,c,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Sq=/\r\n?/g,wq=/\u0000|\uFFFD/g;function R1(e){return(typeof e=="string"?e:""+e).replace(Sq,`
`).replace(wq,"")}function Hf(e,t,n){if(t=R1(t),R1(e)!==t&&n)throw Error(ce(425))}function cv(){}var Gw=null,Qw=null;function Jw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yw=typeof setTimeout=="function"?setTimeout:void 0,Cq=typeof clearTimeout=="function"?clearTimeout:void 0,_1=typeof Promise=="function"?Promise:void 0,xq=typeof queueMicrotask=="function"?queueMicrotask:typeof _1<"u"?function(e){return _1.resolve(null).then(e).catch(bq)}:Yw;function bq(e){setTimeout(function(){throw e})}function c0(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ip(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ip(t)}function _o(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function T1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var eu=Math.random().toString(36).slice(2),Ui="__reactFiber$"+eu,lp="__reactProps$"+eu,ks="__reactContainer$"+eu,Zw="__reactEvents$"+eu,Eq="__reactListeners$"+eu,Pq="__reactHandles$"+eu;function Na(e){var t=e[Ui];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ks]||n[Ui]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=T1(e);e!==null;){if(n=e[Ui])return n;e=T1(e)}return t}e=n,n=e.parentNode}return null}function nf(e){return e=e[Ui]||e[ks],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function xg(e){return e[lp]||null}var Xw=[],Uc=-1;function Qo(e){return{current:e}}function Nt(e){0>Uc||(e.current=Xw[Uc],Xw[Uc]=null,Uc--)}function Pt(e,t){Uc++,Xw[Uc]=e.current,e.current=t}var Lo={},Ln=Qo(Lo),hr=Qo(!1),Ya=Lo;function Tl(e,t){var n=e.type.contextTypes;if(!n)return Lo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function pr(e){return e=e.childContextTypes,e!=null}function lv(){Nt(hr),Nt(Ln)}function A1(e,t,n){if(Ln.current!==Lo)throw Error(ce(168));Pt(Ln,t),Pt(hr,n)}function u2(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ce(108,lU(e)||"Unknown",i));return Ft({},n,r)}function uv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lo,Ya=Ln.current,Pt(Ln,e),Pt(hr,hr.current),!0}function N1(e,t,n){var r=e.stateNode;if(!r)throw Error(ce(169));n?(e=u2(e,t,Ya),r.__reactInternalMemoizedMergedChildContext=e,Nt(hr),Nt(Ln),Pt(Ln,e)):Nt(hr),Pt(hr,n)}var Cs=null,bg=!1,l0=!1;function d2(e){Cs===null?Cs=[e]:Cs.push(e)}function Rq(e){bg=!0,d2(e)}function Jo(){if(!l0&&Cs!==null){l0=!0;var e=0,t=wt;try{var n=Cs;for(wt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cs=null,bg=!1}catch(i){throw Cs!==null&&(Cs=Cs.slice(e+1)),DO(ob,Jo),i}finally{wt=t,l0=!1}}return null}var qc=[],Hc=0,dv=null,hv=0,Ur=[],qr=0,Za=null,Es=1,Ps="";function ba(e,t){qc[Hc++]=hv,qc[Hc++]=dv,dv=e,hv=t}function h2(e,t,n){Ur[qr++]=Es,Ur[qr++]=Ps,Ur[qr++]=Za,Za=e;var r=Es;e=Ps;var i=32-Si(r)-1;r&=~(1<<i),n+=1;var s=32-Si(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Es=1<<32-Si(t)+i|n<<i|r,Ps=s+e}else Es=1<<s|n<<i|r,Ps=e}function mb(e){e.return!==null&&(ba(e,1),h2(e,1,0))}function vb(e){for(;e===dv;)dv=qc[--Hc],qc[Hc]=null,hv=qc[--Hc],qc[Hc]=null;for(;e===Za;)Za=Ur[--qr],Ur[qr]=null,Ps=Ur[--qr],Ur[qr]=null,Es=Ur[--qr],Ur[qr]=null}var Ar=null,Rr=null,kt=!1,pi=null;function p2(e,t){var n=Kr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function I1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ar=e,Rr=_o(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ar=e,Rr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Za!==null?{id:Es,overflow:Ps}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ar=e,Rr=null,!0):!1;default:return!1}}function eC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tC(e){if(kt){var t=Rr;if(t){var n=t;if(!I1(e,t)){if(eC(e))throw Error(ce(418));t=_o(n.nextSibling);var r=Ar;t&&I1(e,t)?p2(r,n):(e.flags=e.flags&-4097|2,kt=!1,Ar=e)}}else{if(eC(e))throw Error(ce(418));e.flags=e.flags&-4097|2,kt=!1,Ar=e}}}function j1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ar=e}function Wf(e){if(e!==Ar)return!1;if(!kt)return j1(e),kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jw(e.type,e.memoizedProps)),t&&(t=Rr)){if(eC(e))throw f2(),Error(ce(418));for(;t;)p2(e,t),t=_o(t.nextSibling)}if(j1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Rr=_o(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Rr=null}}else Rr=Ar?_o(e.stateNode.nextSibling):null;return!0}function f2(){for(var e=Rr;e;)e=_o(e.nextSibling)}function Al(){Rr=Ar=null,kt=!1}function gb(e){pi===null?pi=[e]:pi.push(e)}var _q=Us.ReactCurrentBatchConfig;function Eu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,e))}return e}function Kf(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function k1(e){var t=e._init;return t(e._payload)}function m2(e){function t(y,S){if(e){var C=y.deletions;C===null?(y.deletions=[S],y.flags|=16):C.push(S)}}function n(y,S){if(!e)return null;for(;S!==null;)t(y,S),S=S.sibling;return null}function r(y,S){for(y=new Map;S!==null;)S.key!==null?y.set(S.key,S):y.set(S.index,S),S=S.sibling;return y}function i(y,S){return y=Io(y,S),y.index=0,y.sibling=null,y}function s(y,S,C){return y.index=C,e?(C=y.alternate,C!==null?(C=C.index,C<S?(y.flags|=2,S):C):(y.flags|=2,S)):(y.flags|=1048576,S)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,S,C,x){return S===null||S.tag!==6?(S=v0(C,y.mode,x),S.return=y,S):(S=i(S,C),S.return=y,S)}function c(y,S,C,x){var E=C.type;return E===zc?u(y,S,C.props.children,x,C.key):S!==null&&(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Xs&&k1(E)===S.type)?(x=i(S,C.props),x.ref=Eu(y,S,C),x.return=y,x):(x=Om(C.type,C.key,C.props,null,y.mode,x),x.ref=Eu(y,S,C),x.return=y,x)}function l(y,S,C,x){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=g0(C,y.mode,x),S.return=y,S):(S=i(S,C.children||[]),S.return=y,S)}function u(y,S,C,x,E){return S===null||S.tag!==7?(S=Wa(C,y.mode,x,E),S.return=y,S):(S=i(S,C),S.return=y,S)}function h(y,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=v0(""+S,y.mode,C),S.return=y,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Df:return C=Om(S.type,S.key,S.props,null,y.mode,C),C.ref=Eu(y,null,S),C.return=y,C;case Lc:return S=g0(S,y.mode,C),S.return=y,S;case Xs:var x=S._init;return h(y,x(S._payload),C)}if(Eh(S)||Su(S))return S=Wa(S,y.mode,C,null),S.return=y,S;Kf(y,S)}return null}function p(y,S,C,x){var E=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return E!==null?null:o(y,S,""+C,x);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Df:return C.key===E?c(y,S,C,x):null;case Lc:return C.key===E?l(y,S,C,x):null;case Xs:return E=C._init,p(y,S,E(C._payload),x)}if(Eh(C)||Su(C))return E!==null?null:u(y,S,C,x,null);Kf(y,C)}return null}function f(y,S,C,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(C)||null,o(S,y,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Df:return y=y.get(x.key===null?C:x.key)||null,c(S,y,x,E);case Lc:return y=y.get(x.key===null?C:x.key)||null,l(S,y,x,E);case Xs:var P=x._init;return f(y,S,C,P(x._payload),E)}if(Eh(x)||Su(x))return y=y.get(C)||null,u(S,y,x,E,null);Kf(S,x)}return null}function g(y,S,C,x){for(var E=null,P=null,T=S,_=S=0,k=null;T!==null&&_<C.length;_++){T.index>_?(k=T,T=null):k=T.sibling;var z=p(y,T,C[_],x);if(z===null){T===null&&(T=k);break}e&&T&&z.alternate===null&&t(y,T),S=s(z,S,_),P===null?E=z:P.sibling=z,P=z,T=k}if(_===C.length)return n(y,T),kt&&ba(y,_),E;if(T===null){for(;_<C.length;_++)T=h(y,C[_],x),T!==null&&(S=s(T,S,_),P===null?E=T:P.sibling=T,P=T);return kt&&ba(y,_),E}for(T=r(y,T);_<C.length;_++)k=f(T,y,_,C[_],x),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?_:k.key),S=s(k,S,_),P===null?E=k:P.sibling=k,P=k);return e&&T.forEach(function(D){return t(y,D)}),kt&&ba(y,_),E}function v(y,S,C,x){var E=Su(C);if(typeof E!="function")throw Error(ce(150));if(C=E.call(C),C==null)throw Error(ce(151));for(var P=E=null,T=S,_=S=0,k=null,z=C.next();T!==null&&!z.done;_++,z=C.next()){T.index>_?(k=T,T=null):k=T.sibling;var D=p(y,T,z.value,x);if(D===null){T===null&&(T=k);break}e&&T&&D.alternate===null&&t(y,T),S=s(D,S,_),P===null?E=D:P.sibling=D,P=D,T=k}if(z.done)return n(y,T),kt&&ba(y,_),E;if(T===null){for(;!z.done;_++,z=C.next())z=h(y,z.value,x),z!==null&&(S=s(z,S,_),P===null?E=z:P.sibling=z,P=z);return kt&&ba(y,_),E}for(T=r(y,T);!z.done;_++,z=C.next())z=f(T,y,_,z.value,x),z!==null&&(e&&z.alternate!==null&&T.delete(z.key===null?_:z.key),S=s(z,S,_),P===null?E=z:P.sibling=z,P=z);return e&&T.forEach(function(O){return t(y,O)}),kt&&ba(y,_),E}function w(y,S,C,x){if(typeof C=="object"&&C!==null&&C.type===zc&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Df:e:{for(var E=C.key,P=S;P!==null;){if(P.key===E){if(E=C.type,E===zc){if(P.tag===7){n(y,P.sibling),S=i(P,C.props.children),S.return=y,y=S;break e}}else if(P.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Xs&&k1(E)===P.type){n(y,P.sibling),S=i(P,C.props),S.ref=Eu(y,P,C),S.return=y,y=S;break e}n(y,P);break}else t(y,P);P=P.sibling}C.type===zc?(S=Wa(C.props.children,y.mode,x,C.key),S.return=y,y=S):(x=Om(C.type,C.key,C.props,null,y.mode,x),x.ref=Eu(y,S,C),x.return=y,y=x)}return a(y);case Lc:e:{for(P=C.key;S!==null;){if(S.key===P)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){n(y,S.sibling),S=i(S,C.children||[]),S.return=y,y=S;break e}else{n(y,S);break}else t(y,S);S=S.sibling}S=g0(C,y.mode,x),S.return=y,y=S}return a(y);case Xs:return P=C._init,w(y,S,P(C._payload),x)}if(Eh(C))return g(y,S,C,x);if(Su(C))return v(y,S,C,x);Kf(y,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(n(y,S.sibling),S=i(S,C),S.return=y,y=S):(n(y,S),S=v0(C,y.mode,x),S.return=y,y=S),a(y)):n(y,S)}return w}var Nl=m2(!0),v2=m2(!1),pv=Qo(null),fv=null,Wc=null,yb=null;function Sb(){yb=Wc=fv=null}function wb(e){var t=pv.current;Nt(pv),e._currentValue=t}function nC(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nl(e,t){fv=e,yb=Wc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ur=!0),e.firstContext=null)}function Xr(e){var t=e._currentValue;if(yb!==e)if(e={context:e,memoizedValue:t,next:null},Wc===null){if(fv===null)throw Error(ce(308));Wc=e,fv.dependencies={lanes:0,firstContext:e}}else Wc=Wc.next=e;return t}var Ia=null;function Cb(e){Ia===null?Ia=[e]:Ia.push(e)}function g2(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Cb(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ms(e,r)}function Ms(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var eo=!1;function xb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ts(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function To(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,dt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ms(e,n)}return i=r.interleaved,i===null?(t.next=t,Cb(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ms(e,n)}function Am(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ab(e,n)}}function M1(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function mv(e,t,n,r){var i=e.updateQueue;eo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,l=c.next;c.next=null,a===null?s=l:a.next=l,a=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=l:o.next=l,u.lastBaseUpdate=c))}if(s!==null){var h=i.baseState;a=0,u=l=c=null,o=s;do{var p=o.lane,f=o.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,v=o;switch(p=t,f=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(f,h,p);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,p=typeof g=="function"?g.call(f,h,p):g,p==null)break e;h=Ft({},h,p);break e;case 2:eo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(l=u=f,c=h):u=u.next=f,a|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ec|=a,e.lanes=a,e.memoizedState=h}}function O1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ce(191,i));i.call(r)}}}var rf={},Yi=Qo(rf),up=Qo(rf),dp=Qo(rf);function ja(e){if(e===rf)throw Error(ce(174));return e}function bb(e,t){switch(Pt(dp,t),Pt(up,e),Pt(Yi,rf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Dw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Dw(t,e)}Nt(Yi),Pt(Yi,t)}function Il(){Nt(Yi),Nt(up),Nt(dp)}function S2(e){ja(dp.current);var t=ja(Yi.current),n=Dw(t,e.type);t!==n&&(Pt(up,e),Pt(Yi,n))}function Eb(e){up.current===e&&(Nt(Yi),Nt(up))}var Dt=Qo(0);function vv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var u0=[];function Pb(){for(var e=0;e<u0.length;e++)u0[e]._workInProgressVersionPrimary=null;u0.length=0}var Nm=Us.ReactCurrentDispatcher,d0=Us.ReactCurrentBatchConfig,Xa=0,zt=null,en=null,sn=null,gv=!1,Vh=!1,hp=0,Tq=0;function En(){throw Error(ce(321))}function Rb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bi(e[n],t[n]))return!1;return!0}function _b(e,t,n,r,i,s){if(Xa=s,zt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Nm.current=e===null||e.memoizedState===null?jq:kq,e=n(r,i),Vh){s=0;do{if(Vh=!1,hp=0,25<=s)throw Error(ce(301));s+=1,sn=en=null,t.updateQueue=null,Nm.current=Mq,e=n(r,i)}while(Vh)}if(Nm.current=yv,t=en!==null&&en.next!==null,Xa=0,sn=en=zt=null,gv=!1,t)throw Error(ce(300));return e}function Tb(){var e=hp!==0;return hp=0,e}function Di(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?zt.memoizedState=sn=e:sn=sn.next=e,sn}function ei(){if(en===null){var e=zt.alternate;e=e!==null?e.memoizedState:null}else e=en.next;var t=sn===null?zt.memoizedState:sn.next;if(t!==null)sn=t,en=e;else{if(e===null)throw Error(ce(310));en=e,e={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},sn===null?zt.memoizedState=sn=e:sn=sn.next=e}return sn}function pp(e,t){return typeof t=="function"?t(e):t}function h0(e){var t=ei(),n=t.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=e;var r=en,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,c=null,l=s;do{var u=l.lane;if((Xa&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(o=c=h,a=r):c=c.next=h,zt.lanes|=u,ec|=u}l=l.next}while(l!==null&&l!==s);c===null?a=r:c.next=o,bi(r,t.memoizedState)||(ur=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,zt.lanes|=s,ec|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function p0(e){var t=ei(),n=t.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);bi(s,t.memoizedState)||(ur=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function w2(){}function C2(e,t){var n=zt,r=ei(),i=t(),s=!bi(r.memoizedState,i);if(s&&(r.memoizedState=i,ur=!0),r=r.queue,Ab(E2.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||sn!==null&&sn.memoizedState.tag&1){if(n.flags|=2048,fp(9,b2.bind(null,n,r,i,t),void 0,null),on===null)throw Error(ce(349));Xa&30||x2(n,t,i)}return i}function x2(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=zt.updateQueue,t===null?(t={lastEffect:null,stores:null},zt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function b2(e,t,n,r){t.value=n,t.getSnapshot=r,P2(t)&&R2(e)}function E2(e,t,n){return n(function(){P2(t)&&R2(e)})}function P2(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bi(e,n)}catch{return!0}}function R2(e){var t=Ms(e,1);t!==null&&wi(t,e,1,-1)}function D1(e){var t=Di();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pp,lastRenderedState:e},t.queue=e,e=e.dispatch=Iq.bind(null,zt,e),[t.memoizedState,e]}function fp(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=zt.updateQueue,t===null?(t={lastEffect:null,stores:null},zt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function _2(){return ei().memoizedState}function Im(e,t,n,r){var i=Di();zt.flags|=e,i.memoizedState=fp(1|t,n,void 0,r===void 0?null:r)}function Eg(e,t,n,r){var i=ei();r=r===void 0?null:r;var s=void 0;if(en!==null){var a=en.memoizedState;if(s=a.destroy,r!==null&&Rb(r,a.deps)){i.memoizedState=fp(t,n,s,r);return}}zt.flags|=e,i.memoizedState=fp(1|t,n,s,r)}function L1(e,t){return Im(8390656,8,e,t)}function Ab(e,t){return Eg(2048,8,e,t)}function T2(e,t){return Eg(4,2,e,t)}function A2(e,t){return Eg(4,4,e,t)}function N2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function I2(e,t,n){return n=n!=null?n.concat([e]):null,Eg(4,4,N2.bind(null,t,e),n)}function Nb(){}function j2(e,t){var n=ei();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rb(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function k2(e,t){var n=ei();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rb(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function M2(e,t,n){return Xa&21?(bi(n,t)||(n=FO(),zt.lanes|=n,ec|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ur=!0),e.memoizedState=n)}function Aq(e,t){var n=wt;wt=n!==0&&4>n?n:4,e(!0);var r=d0.transition;d0.transition={};try{e(!1),t()}finally{wt=n,d0.transition=r}}function O2(){return ei().memoizedState}function Nq(e,t,n){var r=No(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},D2(e))L2(t,n);else if(n=g2(e,t,n,r),n!==null){var i=Hn();wi(n,e,r,i),z2(n,t,r)}}function Iq(e,t,n){var r=No(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(D2(e))L2(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,bi(o,a)){var c=t.interleaved;c===null?(i.next=i,Cb(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=g2(e,t,i,r),n!==null&&(i=Hn(),wi(n,e,r,i),z2(n,t,r))}}function D2(e){var t=e.alternate;return e===zt||t!==null&&t===zt}function L2(e,t){Vh=gv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function z2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ab(e,n)}}var yv={readContext:Xr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},jq={readContext:Xr,useCallback:function(e,t){return Di().memoizedState=[e,t===void 0?null:t],e},useContext:Xr,useEffect:L1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Im(4194308,4,N2.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Im(4194308,4,e,t)},useInsertionEffect:function(e,t){return Im(4,2,e,t)},useMemo:function(e,t){var n=Di();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Di();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Nq.bind(null,zt,e),[r.memoizedState,e]},useRef:function(e){var t=Di();return e={current:e},t.memoizedState=e},useState:D1,useDebugValue:Nb,useDeferredValue:function(e){return Di().memoizedState=e},useTransition:function(){var e=D1(!1),t=e[0];return e=Aq.bind(null,e[1]),Di().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=zt,i=Di();if(kt){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=t(),on===null)throw Error(ce(349));Xa&30||x2(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,L1(E2.bind(null,r,s,e),[e]),r.flags|=2048,fp(9,b2.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Di(),t=on.identifierPrefix;if(kt){var n=Ps,r=Es;n=(r&~(1<<32-Si(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Tq++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kq={readContext:Xr,useCallback:j2,useContext:Xr,useEffect:Ab,useImperativeHandle:I2,useInsertionEffect:T2,useLayoutEffect:A2,useMemo:k2,useReducer:h0,useRef:_2,useState:function(){return h0(pp)},useDebugValue:Nb,useDeferredValue:function(e){var t=ei();return M2(t,en.memoizedState,e)},useTransition:function(){var e=h0(pp)[0],t=ei().memoizedState;return[e,t]},useMutableSource:w2,useSyncExternalStore:C2,useId:O2,unstable_isNewReconciler:!1},Mq={readContext:Xr,useCallback:j2,useContext:Xr,useEffect:Ab,useImperativeHandle:I2,useInsertionEffect:T2,useLayoutEffect:A2,useMemo:k2,useReducer:p0,useRef:_2,useState:function(){return p0(pp)},useDebugValue:Nb,useDeferredValue:function(e){var t=ei();return en===null?t.memoizedState=e:M2(t,en.memoizedState,e)},useTransition:function(){var e=p0(pp)[0],t=ei().memoizedState;return[e,t]},useMutableSource:w2,useSyncExternalStore:C2,useId:O2,unstable_isNewReconciler:!1};function ci(e,t){if(e&&e.defaultProps){t=Ft({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function rC(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ft({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Pg={isMounted:function(e){return(e=e._reactInternals)?vc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Hn(),i=No(e),s=Ts(r,i);s.payload=t,n!=null&&(s.callback=n),t=To(e,s,i),t!==null&&(wi(t,e,i,r),Am(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Hn(),i=No(e),s=Ts(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=To(e,s,i),t!==null&&(wi(t,e,i,r),Am(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Hn(),r=No(e),i=Ts(n,r);i.tag=2,t!=null&&(i.callback=t),t=To(e,i,r),t!==null&&(wi(t,e,r,n),Am(t,e,r))}};function z1(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!op(n,r)||!op(i,s):!0}function F2(e,t,n){var r=!1,i=Lo,s=t.contextType;return typeof s=="object"&&s!==null?s=Xr(s):(i=pr(t)?Ya:Ln.current,r=t.contextTypes,s=(r=r!=null)?Tl(e,i):Lo),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function F1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Pg.enqueueReplaceState(t,t.state,null)}function iC(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},xb(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Xr(s):(s=pr(t)?Ya:Ln.current,i.context=Tl(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(rC(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Pg.enqueueReplaceState(i,i.state,null),mv(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function jl(e,t){try{var n="",r=t;do n+=cU(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function f0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function sC(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Oq=typeof WeakMap=="function"?WeakMap:Map;function $2(e,t,n){n=Ts(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){wv||(wv=!0,mC=r),sC(e,t)},n}function B2(e,t,n){n=Ts(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){sC(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){sC(e,t),typeof r!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function $1(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Oq;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Qq.bind(null,e,t,n),t.then(e,e))}function B1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function V1(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ts(-1,1),t.tag=2,To(n,t,1))),n.lanes|=1),e)}var Dq=Us.ReactCurrentOwner,ur=!1;function Vn(e,t,n,r){t.child=e===null?v2(t,null,n,r):Nl(t,e.child,n,r)}function U1(e,t,n,r,i){n=n.render;var s=t.ref;return nl(t,i),r=_b(e,t,n,r,s,i),n=Tb(),e!==null&&!ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Os(e,t,i)):(kt&&n&&mb(t),t.flags|=1,Vn(e,t,r,i),t.child)}function q1(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!zb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,V2(e,t,s,r,i)):(e=Om(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:op,n(a,r)&&e.ref===t.ref)return Os(e,t,i)}return t.flags|=1,e=Io(s,r),e.ref=t.ref,e.return=t,t.child=e}function V2(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(op(s,r)&&e.ref===t.ref)if(ur=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ur=!0);else return t.lanes=e.lanes,Os(e,t,i)}return oC(e,t,n,r,i)}function U2(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(Gc,wr),wr|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pt(Gc,wr),wr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pt(Gc,wr),wr|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Pt(Gc,wr),wr|=r;return Vn(e,t,i,n),t.child}function q2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function oC(e,t,n,r,i){var s=pr(n)?Ya:Ln.current;return s=Tl(t,s),nl(t,i),n=_b(e,t,n,r,s,i),r=Tb(),e!==null&&!ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Os(e,t,i)):(kt&&r&&mb(t),t.flags|=1,Vn(e,t,n,i),t.child)}function H1(e,t,n,r,i){if(pr(n)){var s=!0;uv(t)}else s=!1;if(nl(t,i),t.stateNode===null)jm(e,t),F2(t,n,r),iC(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=Xr(l):(l=pr(n)?Ya:Ln.current,l=Tl(t,l));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==l)&&F1(t,a,r,l),eo=!1;var p=t.memoizedState;a.state=p,mv(t,r,a,i),c=t.memoizedState,o!==r||p!==c||hr.current||eo?(typeof u=="function"&&(rC(t,n,u,r),c=t.memoizedState),(o=eo||z1(t,n,o,r,p,c,l))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=l,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,y2(e,t),o=t.memoizedProps,l=t.type===t.elementType?o:ci(t.type,o),a.props=l,h=t.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Xr(c):(c=pr(n)?Ya:Ln.current,c=Tl(t,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||p!==c)&&F1(t,a,r,c),eo=!1,p=t.memoizedState,a.state=p,mv(t,r,a,i);var g=t.memoizedState;o!==h||p!==g||hr.current||eo?(typeof f=="function"&&(rC(t,n,f,r),g=t.memoizedState),(l=eo||z1(t,n,l,r,p,g,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=l):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return aC(e,t,n,r,s,i)}function aC(e,t,n,r,i,s){q2(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&N1(t,n,!1),Os(e,t,s);r=t.stateNode,Dq.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Nl(t,e.child,null,s),t.child=Nl(t,null,o,s)):Vn(e,t,o,s),t.memoizedState=r.state,i&&N1(t,n,!0),t.child}function H2(e){var t=e.stateNode;t.pendingContext?A1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&A1(e,t.context,!1),bb(e,t.containerInfo)}function W1(e,t,n,r,i){return Al(),gb(i),t.flags|=256,Vn(e,t,n,r),t.child}var cC={dehydrated:null,treeContext:null,retryLane:0};function lC(e){return{baseLanes:e,cachePool:null,transitions:null}}function W2(e,t,n){var r=t.pendingProps,i=Dt.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Pt(Dt,i&1),e===null)return tC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Tg(a,r,0,null),e=Wa(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=lC(n),t.memoizedState=cC,e):Ib(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Lq(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Io(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Io(o,s):(s=Wa(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?lC(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=cC,r}return s=e.child,e=s.sibling,r=Io(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ib(e,t){return t=Tg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gf(e,t,n,r){return r!==null&&gb(r),Nl(t,e.child,null,n),e=Ib(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lq(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=f0(Error(ce(422))),Gf(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Tg({mode:"visible",children:r.children},i,0,null),s=Wa(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Nl(t,e.child,null,a),t.child.memoizedState=lC(a),t.memoizedState=cC,s);if(!(t.mode&1))return Gf(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(ce(419)),r=f0(s,r,void 0),Gf(e,t,a,r)}if(o=(a&e.childLanes)!==0,ur||o){if(r=on,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ms(e,i),wi(r,e,i,-1))}return Lb(),r=f0(Error(ce(421))),Gf(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Jq.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Rr=_o(i.nextSibling),Ar=t,kt=!0,pi=null,e!==null&&(Ur[qr++]=Es,Ur[qr++]=Ps,Ur[qr++]=Za,Es=e.id,Ps=e.overflow,Za=t),t=Ib(t,r.children),t.flags|=4096,t)}function K1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),nC(e.return,t,n)}function m0(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function K2(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Vn(e,t,r.children,n),r=Dt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&K1(e,n,t);else if(e.tag===19)K1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pt(Dt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&vv(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),m0(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&vv(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}m0(t,!0,n,null,s);break;case"together":m0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Os(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ec|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,n=Io(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Io(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zq(e,t,n){switch(t.tag){case 3:H2(t),Al();break;case 5:S2(t);break;case 1:pr(t.type)&&uv(t);break;case 4:bb(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Pt(pv,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Pt(Dt,Dt.current&1),t.flags|=128,null):n&t.child.childLanes?W2(e,t,n):(Pt(Dt,Dt.current&1),e=Os(e,t,n),e!==null?e.sibling:null);Pt(Dt,Dt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return K2(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pt(Dt,Dt.current),r)break;return null;case 22:case 23:return t.lanes=0,U2(e,t,n)}return Os(e,t,n)}var G2,uC,Q2,J2;G2=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uC=function(){};Q2=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ja(Yi.current);var s=null;switch(n){case"input":i=jw(e,i),r=jw(e,r),s=[];break;case"select":i=Ft({},i,{value:void 0}),r=Ft({},r,{value:void 0}),s=[];break;case"textarea":i=Ow(e,i),r=Ow(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=cv)}Lw(n,r);var a;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var o=i[l];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Xh.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(o=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==o&&(c!=null||o!=null))if(l==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Xh.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&_t("scroll",e),s||o===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};J2=function(e,t,n,r){n!==r&&(t.flags|=4)};function Pu(e,t){if(!kt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Pn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Fq(e,t,n){var r=t.pendingProps;switch(vb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(t),null;case 1:return pr(t.type)&&lv(),Pn(t),null;case 3:return r=t.stateNode,Il(),Nt(hr),Nt(Ln),Pb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Wf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pi!==null&&(yC(pi),pi=null))),uC(e,t),Pn(t),null;case 5:Eb(t);var i=ja(dp.current);if(n=t.type,e!==null&&t.stateNode!=null)Q2(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ce(166));return Pn(t),null}if(e=ja(Yi.current),Wf(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ui]=t,r[lp]=s,e=(t.mode&1)!==0,n){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(i=0;i<Rh.length;i++)_t(Rh[i],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":n1(r,s),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_t("invalid",r);break;case"textarea":i1(r,s),_t("invalid",r)}Lw(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Hf(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Hf(r.textContent,o,e),i=["children",""+o]):Xh.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&_t("scroll",r)}switch(n){case"input":Lf(r),r1(r,s,!0);break;case"textarea":Lf(r),s1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=cv)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=EO(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Ui]=t,e[lp]=r,G2(e,t,!1,!1),t.stateNode=e;e:{switch(a=zw(n,r),n){case"dialog":_t("cancel",e),_t("close",e),i=r;break;case"iframe":case"object":case"embed":_t("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rh.length;i++)_t(Rh[i],e);i=r;break;case"source":_t("error",e),i=r;break;case"img":case"image":case"link":_t("error",e),_t("load",e),i=r;break;case"details":_t("toggle",e),i=r;break;case"input":n1(e,r),i=jw(e,r),_t("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ft({},r,{value:void 0}),_t("invalid",e);break;case"textarea":i1(e,r),i=Ow(e,r),_t("invalid",e);break;default:i=r}Lw(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?_O(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&PO(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ep(e,c):typeof c=="number"&&ep(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&_t("scroll",e):c!=null&&tb(e,s,c,a))}switch(n){case"input":Lf(e),r1(e,r,!1);break;case"textarea":Lf(e),s1(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Do(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Zc(e,!!r.multiple,s,!1):r.defaultValue!=null&&Zc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=cv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pn(t),null;case 6:if(e&&t.stateNode!=null)J2(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ce(166));if(n=ja(dp.current),ja(Yi.current),Wf(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ui]=t,(s=r.nodeValue!==n)&&(e=Ar,e!==null))switch(e.tag){case 3:Hf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hf(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ui]=t,t.stateNode=r}return Pn(t),null;case 13:if(Nt(Dt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kt&&Rr!==null&&t.mode&1&&!(t.flags&128))f2(),Al(),t.flags|=98560,s=!1;else if(s=Wf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ce(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ce(317));s[Ui]=t}else Al(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pn(t),s=!1}else pi!==null&&(yC(pi),pi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Dt.current&1?nn===0&&(nn=3):Lb())),t.updateQueue!==null&&(t.flags|=4),Pn(t),null);case 4:return Il(),uC(e,t),e===null&&ap(t.stateNode.containerInfo),Pn(t),null;case 10:return wb(t.type._context),Pn(t),null;case 17:return pr(t.type)&&lv(),Pn(t),null;case 19:if(Nt(Dt),s=t.memoizedState,s===null)return Pn(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Pu(s,!1);else{if(nn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=vv(e),a!==null){for(t.flags|=128,Pu(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pt(Dt,Dt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Wt()>kl&&(t.flags|=128,r=!0,Pu(s,!1),t.lanes=4194304)}else{if(!r)if(e=vv(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Pu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!kt)return Pn(t),null}else 2*Wt()-s.renderingStartTime>kl&&n!==1073741824&&(t.flags|=128,r=!0,Pu(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Wt(),t.sibling=null,n=Dt.current,Pt(Dt,r?n&1|2:n&1),t):(Pn(t),null);case 22:case 23:return Db(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?wr&1073741824&&(Pn(t),t.subtreeFlags&6&&(t.flags|=8192)):Pn(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function $q(e,t){switch(vb(t),t.tag){case 1:return pr(t.type)&&lv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Il(),Nt(hr),Nt(Ln),Pb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Eb(t),null;case 13:if(Nt(Dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));Al()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Nt(Dt),null;case 4:return Il(),null;case 10:return wb(t.type._context),null;case 22:case 23:return Db(),null;case 24:return null;default:return null}}var Qf=!1,Mn=!1,Bq=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Kc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vt(e,t,r)}else n.current=null}function dC(e,t,n){try{n()}catch(r){Vt(e,t,r)}}var G1=!1;function Vq(e,t){if(Gw=sv,e=t2(),fb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,l=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(o=a+i),h!==s||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++l===i&&(o=a),p===s&&++u===r&&(c=a),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qw={focusedElem:e,selectionRange:n},sv=!1,Se=t;Se!==null;)if(t=Se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Se=e;else for(;Se!==null;){t=Se;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,w=g.memoizedState,y=t.stateNode,S=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:ci(t.type,v),w);y.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(x){Vt(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Se=e;break}Se=t.return}return g=G1,G1=!1,g}function Uh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&dC(t,n,s)}i=i.next}while(i!==r)}}function Rg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hC(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Y2(e){var t=e.alternate;t!==null&&(e.alternate=null,Y2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ui],delete t[lp],delete t[Zw],delete t[Eq],delete t[Pq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Z2(e){return e.tag===5||e.tag===3||e.tag===4}function Q1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Z2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=cv));else if(r!==4&&(e=e.child,e!==null))for(pC(e,t,n),e=e.sibling;e!==null;)pC(e,t,n),e=e.sibling}function fC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(fC(e,t,n),e=e.sibling;e!==null;)fC(e,t,n),e=e.sibling}var mn=null,di=!1;function Ks(e,t,n){for(n=n.child;n!==null;)X2(e,t,n),n=n.sibling}function X2(e,t,n){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(yg,n)}catch{}switch(n.tag){case 5:Mn||Kc(n,t);case 6:var r=mn,i=di;mn=null,Ks(e,t,n),mn=r,di=i,mn!==null&&(di?(e=mn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mn.removeChild(n.stateNode));break;case 18:mn!==null&&(di?(e=mn,n=n.stateNode,e.nodeType===8?c0(e.parentNode,n):e.nodeType===1&&c0(e,n),ip(e)):c0(mn,n.stateNode));break;case 4:r=mn,i=di,mn=n.stateNode.containerInfo,di=!0,Ks(e,t,n),mn=r,di=i;break;case 0:case 11:case 14:case 15:if(!Mn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&dC(n,t,a),i=i.next}while(i!==r)}Ks(e,t,n);break;case 1:if(!Mn&&(Kc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Vt(n,t,o)}Ks(e,t,n);break;case 21:Ks(e,t,n);break;case 22:n.mode&1?(Mn=(r=Mn)||n.memoizedState!==null,Ks(e,t,n),Mn=r):Ks(e,t,n);break;default:Ks(e,t,n)}}function J1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Bq),t.forEach(function(r){var i=Yq.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function si(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:mn=o.stateNode,di=!1;break e;case 3:mn=o.stateNode.containerInfo,di=!0;break e;case 4:mn=o.stateNode.containerInfo,di=!0;break e}o=o.return}if(mn===null)throw Error(ce(160));X2(s,a,i),mn=null,di=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Vt(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eD(t,e),t=t.sibling}function eD(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(si(t,e),Oi(e),r&4){try{Uh(3,e,e.return),Rg(3,e)}catch(v){Vt(e,e.return,v)}try{Uh(5,e,e.return)}catch(v){Vt(e,e.return,v)}}break;case 1:si(t,e),Oi(e),r&512&&n!==null&&Kc(n,n.return);break;case 5:if(si(t,e),Oi(e),r&512&&n!==null&&Kc(n,n.return),e.flags&32){var i=e.stateNode;try{ep(i,"")}catch(v){Vt(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&xO(i,s),zw(o,a);var l=zw(o,s);for(a=0;a<c.length;a+=2){var u=c[a],h=c[a+1];u==="style"?_O(i,h):u==="dangerouslySetInnerHTML"?PO(i,h):u==="children"?ep(i,h):tb(i,u,h,l)}switch(o){case"input":kw(i,s);break;case"textarea":bO(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Zc(i,!!s.multiple,f,!1):p!==!!s.multiple&&(s.defaultValue!=null?Zc(i,!!s.multiple,s.defaultValue,!0):Zc(i,!!s.multiple,s.multiple?[]:"",!1))}i[lp]=s}catch(v){Vt(e,e.return,v)}}break;case 6:if(si(t,e),Oi(e),r&4){if(e.stateNode===null)throw Error(ce(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(v){Vt(e,e.return,v)}}break;case 3:if(si(t,e),Oi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ip(t.containerInfo)}catch(v){Vt(e,e.return,v)}break;case 4:si(t,e),Oi(e);break;case 13:si(t,e),Oi(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Mb=Wt())),r&4&&J1(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Mn=(l=Mn)||u,si(t,e),Mn=l):si(t,e),Oi(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!u&&e.mode&1)for(Se=e,u=e.child;u!==null;){for(h=Se=u;Se!==null;){switch(p=Se,f=p.child,p.tag){case 0:case 11:case 14:case 15:Uh(4,p,p.return);break;case 1:Kc(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Vt(r,n,v)}}break;case 5:Kc(p,p.return);break;case 22:if(p.memoizedState!==null){Z1(h);continue}}f!==null?(f.return=p,Se=f):Z1(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=RO("display",a))}catch(v){Vt(e,e.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(v){Vt(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:si(t,e),Oi(e),r&4&&J1(e);break;case 21:break;default:si(t,e),Oi(e)}}function Oi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Z2(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ep(i,""),r.flags&=-33);var s=Q1(e);fC(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Q1(e);pC(e,o,a);break;default:throw Error(ce(161))}}catch(c){Vt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uq(e,t,n){Se=e,tD(e)}function tD(e,t,n){for(var r=(e.mode&1)!==0;Se!==null;){var i=Se,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Qf;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Mn;o=Qf;var l=Mn;if(Qf=a,(Mn=c)&&!l)for(Se=i;Se!==null;)a=Se,c=a.child,a.tag===22&&a.memoizedState!==null?X1(i):c!==null?(c.return=a,Se=c):X1(i);for(;s!==null;)Se=s,tD(s),s=s.sibling;Se=i,Qf=o,Mn=l}Y1(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Se=s):Y1(e)}}function Y1(e){for(;Se!==null;){var t=Se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mn||Rg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Mn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ci(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&O1(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}O1(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ip(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Mn||t.flags&512&&hC(t)}catch(p){Vt(t,t.return,p)}}if(t===e){Se=null;break}if(n=t.sibling,n!==null){n.return=t.return,Se=n;break}Se=t.return}}function Z1(e){for(;Se!==null;){var t=Se;if(t===e){Se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Se=n;break}Se=t.return}}function X1(e){for(;Se!==null;){var t=Se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rg(4,t)}catch(c){Vt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){Vt(t,i,c)}}var s=t.return;try{hC(t)}catch(c){Vt(t,s,c)}break;case 5:var a=t.return;try{hC(t)}catch(c){Vt(t,a,c)}}}catch(c){Vt(t,t.return,c)}if(t===e){Se=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Se=o;break}Se=t.return}}var qq=Math.ceil,Sv=Us.ReactCurrentDispatcher,jb=Us.ReactCurrentOwner,Jr=Us.ReactCurrentBatchConfig,dt=0,on=null,Yt=null,yn=0,wr=0,Gc=Qo(0),nn=0,mp=null,ec=0,_g=0,kb=0,qh=null,cr=null,Mb=0,kl=1/0,ws=null,wv=!1,mC=null,Ao=null,Jf=!1,xo=null,Cv=0,Hh=0,vC=null,km=-1,Mm=0;function Hn(){return dt&6?Wt():km!==-1?km:km=Wt()}function No(e){return e.mode&1?dt&2&&yn!==0?yn&-yn:_q.transition!==null?(Mm===0&&(Mm=FO()),Mm):(e=wt,e!==0||(e=window.event,e=e===void 0?16:WO(e.type)),e):1}function wi(e,t,n,r){if(50<Hh)throw Hh=0,vC=null,Error(ce(185));ef(e,n,r),(!(dt&2)||e!==on)&&(e===on&&(!(dt&2)&&(_g|=n),nn===4&&oo(e,yn)),fr(e,r),n===1&&dt===0&&!(t.mode&1)&&(kl=Wt()+500,bg&&Jo()))}function fr(e,t){var n=e.callbackNode;_U(e,t);var r=iv(e,e===on?yn:0);if(r===0)n!==null&&c1(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&c1(n),t===1)e.tag===0?Rq(eR.bind(null,e)):d2(eR.bind(null,e)),xq(function(){!(dt&6)&&Jo()}),n=null;else{switch($O(r)){case 1:n=ob;break;case 4:n=LO;break;case 16:n=rv;break;case 536870912:n=zO;break;default:n=rv}n=lD(n,nD.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nD(e,t){if(km=-1,Mm=0,dt&6)throw Error(ce(327));var n=e.callbackNode;if(rl()&&e.callbackNode!==n)return null;var r=iv(e,e===on?yn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xv(e,r);else{t=r;var i=dt;dt|=2;var s=iD();(on!==e||yn!==t)&&(ws=null,kl=Wt()+500,Ha(e,t));do try{Kq();break}catch(o){rD(e,o)}while(!0);Sb(),Sv.current=s,dt=i,Yt!==null?t=0:(on=null,yn=0,t=nn)}if(t!==0){if(t===2&&(i=Uw(e),i!==0&&(r=i,t=gC(e,i))),t===1)throw n=mp,Ha(e,0),oo(e,r),fr(e,Wt()),n;if(t===6)oo(e,r);else{if(i=e.current.alternate,!(r&30)&&!Hq(i)&&(t=xv(e,r),t===2&&(s=Uw(e),s!==0&&(r=s,t=gC(e,s))),t===1))throw n=mp,Ha(e,0),oo(e,r),fr(e,Wt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ce(345));case 2:Ea(e,cr,ws);break;case 3:if(oo(e,r),(r&130023424)===r&&(t=Mb+500-Wt(),10<t)){if(iv(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Hn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Yw(Ea.bind(null,e,cr,ws),t);break}Ea(e,cr,ws);break;case 4:if(oo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Si(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qq(r/1960))-r,10<r){e.timeoutHandle=Yw(Ea.bind(null,e,cr,ws),r);break}Ea(e,cr,ws);break;case 5:Ea(e,cr,ws);break;default:throw Error(ce(329))}}}return fr(e,Wt()),e.callbackNode===n?nD.bind(null,e):null}function gC(e,t){var n=qh;return e.current.memoizedState.isDehydrated&&(Ha(e,t).flags|=256),e=xv(e,t),e!==2&&(t=cr,cr=n,t!==null&&yC(t)),e}function yC(e){cr===null?cr=e:cr.push.apply(cr,e)}function Hq(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!bi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function oo(e,t){for(t&=~kb,t&=~_g,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Si(t),r=1<<n;e[n]=-1,t&=~r}}function eR(e){if(dt&6)throw Error(ce(327));rl();var t=iv(e,0);if(!(t&1))return fr(e,Wt()),null;var n=xv(e,t);if(e.tag!==0&&n===2){var r=Uw(e);r!==0&&(t=r,n=gC(e,r))}if(n===1)throw n=mp,Ha(e,0),oo(e,t),fr(e,Wt()),n;if(n===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ea(e,cr,ws),fr(e,Wt()),null}function Ob(e,t){var n=dt;dt|=1;try{return e(t)}finally{dt=n,dt===0&&(kl=Wt()+500,bg&&Jo())}}function tc(e){xo!==null&&xo.tag===0&&!(dt&6)&&rl();var t=dt;dt|=1;var n=Jr.transition,r=wt;try{if(Jr.transition=null,wt=1,e)return e()}finally{wt=r,Jr.transition=n,dt=t,!(dt&6)&&Jo()}}function Db(){wr=Gc.current,Nt(Gc)}function Ha(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Cq(n)),Yt!==null)for(n=Yt.return;n!==null;){var r=n;switch(vb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lv();break;case 3:Il(),Nt(hr),Nt(Ln),Pb();break;case 5:Eb(r);break;case 4:Il();break;case 13:Nt(Dt);break;case 19:Nt(Dt);break;case 10:wb(r.type._context);break;case 22:case 23:Db()}n=n.return}if(on=e,Yt=e=Io(e.current,null),yn=wr=t,nn=0,mp=null,kb=_g=ec=0,cr=qh=null,Ia!==null){for(t=0;t<Ia.length;t++)if(n=Ia[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Ia=null}return e}function rD(e,t){do{var n=Yt;try{if(Sb(),Nm.current=yv,gv){for(var r=zt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gv=!1}if(Xa=0,sn=en=zt=null,Vh=!1,hp=0,jb.current=null,n===null||n.return===null){nn=1,mp=t,Yt=null;break}e:{var s=e,a=n.return,o=n,c=t;if(t=yn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=B1(a);if(f!==null){f.flags&=-257,V1(f,a,o,s,t),f.mode&1&&$1(s,l,t),t=f,c=l;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){$1(s,l,t),Lb();break e}c=Error(ce(426))}}else if(kt&&o.mode&1){var w=B1(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),V1(w,a,o,s,t),gb(jl(c,o));break e}}s=c=jl(c,o),nn!==4&&(nn=2),qh===null?qh=[s]:qh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=$2(s,c,t);M1(s,y);break e;case 1:o=c;var S=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ao===null||!Ao.has(C)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=B2(s,o,t);M1(s,x);break e}}s=s.return}while(s!==null)}oD(n)}catch(E){t=E,Yt===n&&n!==null&&(Yt=n=n.return);continue}break}while(!0)}function iD(){var e=Sv.current;return Sv.current=yv,e===null?yv:e}function Lb(){(nn===0||nn===3||nn===2)&&(nn=4),on===null||!(ec&268435455)&&!(_g&268435455)||oo(on,yn)}function xv(e,t){var n=dt;dt|=2;var r=iD();(on!==e||yn!==t)&&(ws=null,Ha(e,t));do try{Wq();break}catch(i){rD(e,i)}while(!0);if(Sb(),dt=n,Sv.current=r,Yt!==null)throw Error(ce(261));return on=null,yn=0,nn}function Wq(){for(;Yt!==null;)sD(Yt)}function Kq(){for(;Yt!==null&&!yU();)sD(Yt)}function sD(e){var t=cD(e.alternate,e,wr);e.memoizedProps=e.pendingProps,t===null?oD(e):Yt=t,jb.current=null}function oD(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=$q(n,t),n!==null){n.flags&=32767,Yt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nn=6,Yt=null;return}}else if(n=Fq(n,t,wr),n!==null){Yt=n;return}if(t=t.sibling,t!==null){Yt=t;return}Yt=t=e}while(t!==null);nn===0&&(nn=5)}function Ea(e,t,n){var r=wt,i=Jr.transition;try{Jr.transition=null,wt=1,Gq(e,t,n,r)}finally{Jr.transition=i,wt=r}return null}function Gq(e,t,n,r){do rl();while(xo!==null);if(dt&6)throw Error(ce(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(TU(e,s),e===on&&(Yt=on=null,yn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jf||(Jf=!0,lD(rv,function(){return rl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jr.transition,Jr.transition=null;var a=wt;wt=1;var o=dt;dt|=4,jb.current=null,Vq(e,n),eD(n,e),fq(Qw),sv=!!Gw,Qw=Gw=null,e.current=n,Uq(n),SU(),dt=o,wt=a,Jr.transition=s}else e.current=n;if(Jf&&(Jf=!1,xo=e,Cv=i),s=e.pendingLanes,s===0&&(Ao=null),xU(n.stateNode),fr(e,Wt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wv)throw wv=!1,e=mC,mC=null,e;return Cv&1&&e.tag!==0&&rl(),s=e.pendingLanes,s&1?e===vC?Hh++:(Hh=0,vC=e):Hh=0,Jo(),null}function rl(){if(xo!==null){var e=$O(Cv),t=Jr.transition,n=wt;try{if(Jr.transition=null,wt=16>e?16:e,xo===null)var r=!1;else{if(e=xo,xo=null,Cv=0,dt&6)throw Error(ce(331));var i=dt;for(dt|=4,Se=e.current;Se!==null;){var s=Se,a=s.child;if(Se.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var l=o[c];for(Se=l;Se!==null;){var u=Se;switch(u.tag){case 0:case 11:case 15:Uh(8,u,s)}var h=u.child;if(h!==null)h.return=u,Se=h;else for(;Se!==null;){u=Se;var p=u.sibling,f=u.return;if(Y2(u),u===l){Se=null;break}if(p!==null){p.return=f,Se=p;break}Se=f}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}Se=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Se=a;else e:for(;Se!==null;){if(s=Se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Uh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Se=y;break e}Se=s.return}}var S=e.current;for(Se=S;Se!==null;){a=Se;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,Se=C;else e:for(a=S;Se!==null;){if(o=Se,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Rg(9,o)}}catch(E){Vt(o,o.return,E)}if(o===a){Se=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,Se=x;break e}Se=o.return}}if(dt=i,Jo(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(yg,e)}catch{}r=!0}return r}finally{wt=n,Jr.transition=t}}return!1}function tR(e,t,n){t=jl(n,t),t=$2(e,t,1),e=To(e,t,1),t=Hn(),e!==null&&(ef(e,1,t),fr(e,t))}function Vt(e,t,n){if(e.tag===3)tR(e,e,n);else for(;t!==null;){if(t.tag===3){tR(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ao===null||!Ao.has(r))){e=jl(n,e),e=B2(t,e,1),t=To(t,e,1),e=Hn(),t!==null&&(ef(t,1,e),fr(t,e));break}}t=t.return}}function Qq(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Hn(),e.pingedLanes|=e.suspendedLanes&n,on===e&&(yn&n)===n&&(nn===4||nn===3&&(yn&130023424)===yn&&500>Wt()-Mb?Ha(e,0):kb|=n),fr(e,t)}function aD(e,t){t===0&&(e.mode&1?(t=$f,$f<<=1,!($f&130023424)&&($f=4194304)):t=1);var n=Hn();e=Ms(e,t),e!==null&&(ef(e,t,n),fr(e,n))}function Jq(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),aD(e,n)}function Yq(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(t),aD(e,n)}var cD;cD=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||hr.current)ur=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ur=!1,zq(e,t,n);ur=!!(e.flags&131072)}else ur=!1,kt&&t.flags&1048576&&h2(t,hv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;jm(e,t),e=t.pendingProps;var i=Tl(t,Ln.current);nl(t,n),i=_b(null,t,r,e,i,n);var s=Tb();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pr(r)?(s=!0,uv(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xb(t),i.updater=Pg,t.stateNode=i,i._reactInternals=t,iC(t,r,e,n),t=aC(null,t,r,!0,s,n)):(t.tag=0,kt&&s&&mb(t),Vn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(jm(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Xq(r),e=ci(r,e),i){case 0:t=oC(null,t,r,e,n);break e;case 1:t=H1(null,t,r,e,n);break e;case 11:t=U1(null,t,r,e,n);break e;case 14:t=q1(null,t,r,ci(r.type,e),n);break e}throw Error(ce(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ci(r,i),oC(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ci(r,i),H1(e,t,r,i,n);case 3:e:{if(H2(t),e===null)throw Error(ce(387));r=t.pendingProps,s=t.memoizedState,i=s.element,y2(e,t),mv(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=jl(Error(ce(423)),t),t=W1(e,t,r,n,i);break e}else if(r!==i){i=jl(Error(ce(424)),t),t=W1(e,t,r,n,i);break e}else for(Rr=_o(t.stateNode.containerInfo.firstChild),Ar=t,kt=!0,pi=null,n=v2(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Al(),r===i){t=Os(e,t,n);break e}Vn(e,t,r,n)}t=t.child}return t;case 5:return S2(t),e===null&&tC(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,Jw(r,i)?a=null:s!==null&&Jw(r,s)&&(t.flags|=32),q2(e,t),Vn(e,t,a,n),t.child;case 6:return e===null&&tC(t),null;case 13:return W2(e,t,n);case 4:return bb(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Nl(t,null,r,n):Vn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ci(r,i),U1(e,t,r,i,n);case 7:return Vn(e,t,t.pendingProps,n),t.child;case 8:return Vn(e,t,t.pendingProps.children,n),t.child;case 12:return Vn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Pt(pv,r._currentValue),r._currentValue=a,s!==null)if(bi(s.value,a)){if(s.children===i.children&&!hr.current){t=Os(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Ts(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),nC(s.return,n,t),o.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ce(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),nC(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Vn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,nl(t,n),i=Xr(i),r=r(i),t.flags|=1,Vn(e,t,r,n),t.child;case 14:return r=t.type,i=ci(r,t.pendingProps),i=ci(r.type,i),q1(e,t,r,i,n);case 15:return V2(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ci(r,i),jm(e,t),t.tag=1,pr(r)?(e=!0,uv(t)):e=!1,nl(t,n),F2(t,r,i),iC(t,r,i,n),aC(null,t,r,!0,e,n);case 19:return K2(e,t,n);case 22:return U2(e,t,n)}throw Error(ce(156,t.tag))};function lD(e,t){return DO(e,t)}function Zq(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(e,t,n,r){return new Zq(e,t,n,r)}function zb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xq(e){if(typeof e=="function")return zb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rb)return 11;if(e===ib)return 14}return 2}function Io(e,t){var n=e.alternate;return n===null?(n=Kr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Om(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")zb(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case zc:return Wa(n.children,i,s,t);case nb:a=8,i|=8;break;case Tw:return e=Kr(12,n,t,i|2),e.elementType=Tw,e.lanes=s,e;case Aw:return e=Kr(13,n,t,i),e.elementType=Aw,e.lanes=s,e;case Nw:return e=Kr(19,n,t,i),e.elementType=Nw,e.lanes=s,e;case SO:return Tg(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gO:a=10;break e;case yO:a=9;break e;case rb:a=11;break e;case ib:a=14;break e;case Xs:a=16,r=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=Kr(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Wa(e,t,n,r){return e=Kr(7,e,r,t),e.lanes=n,e}function Tg(e,t,n,r){return e=Kr(22,e,r,t),e.elementType=SO,e.lanes=n,e.stateNode={isHidden:!1},e}function v0(e,t,n){return e=Kr(6,e,null,t),e.lanes=n,e}function g0(e,t,n){return t=Kr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function eH(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=YS(0),this.expirationTimes=YS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=YS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fb(e,t,n,r,i,s,a,o,c){return e=new eH(e,t,n,o,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Kr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xb(s),e}function tH(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function uD(e){if(!e)return Lo;e=e._reactInternals;e:{if(vc(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var n=e.type;if(pr(n))return u2(e,n,t)}return t}function dD(e,t,n,r,i,s,a,o,c){return e=Fb(n,r,!0,e,i,s,a,o,c),e.context=uD(null),n=e.current,r=Hn(),i=No(n),s=Ts(r,i),s.callback=t??null,To(n,s,i),e.current.lanes=i,ef(e,i,r),fr(e,r),e}function Ag(e,t,n,r){var i=t.current,s=Hn(),a=No(i);return n=uD(n),t.context===null?t.context=n:t.pendingContext=n,t=Ts(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=To(i,t,a),e!==null&&(wi(e,i,a,s),Am(e,i,a)),a}function bv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nR(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function $b(e,t){nR(e,t),(e=e.alternate)&&nR(e,t)}function nH(){return null}var hD=typeof reportError=="function"?reportError:function(e){console.error(e)};function Bb(e){this._internalRoot=e}Ng.prototype.render=Bb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));Ag(e,t,null,null)};Ng.prototype.unmount=Bb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tc(function(){Ag(null,e,null,null)}),t[ks]=null}};function Ng(e){this._internalRoot=e}Ng.prototype.unstable_scheduleHydration=function(e){if(e){var t=UO();e={blockedOn:null,target:e,priority:t};for(var n=0;n<so.length&&t!==0&&t<so[n].priority;n++);so.splice(n,0,e),n===0&&HO(e)}};function Vb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ig(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rR(){}function rH(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=bv(a);s.call(l)}}var a=dD(t,r,e,0,null,!1,!1,"",rR);return e._reactRootContainer=a,e[ks]=a.current,ap(e.nodeType===8?e.parentNode:e),tc(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var l=bv(c);o.call(l)}}var c=Fb(e,0,!1,null,null,!1,!1,"",rR);return e._reactRootContainer=c,e[ks]=c.current,ap(e.nodeType===8?e.parentNode:e),tc(function(){Ag(t,c,n,r)}),c}function jg(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=bv(a);o.call(c)}}Ag(t,a,e,i)}else a=rH(n,t,e,i,r);return bv(a)}BO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ph(t.pendingLanes);n!==0&&(ab(t,n|1),fr(t,Wt()),!(dt&6)&&(kl=Wt()+500,Jo()))}break;case 13:tc(function(){var r=Ms(e,1);if(r!==null){var i=Hn();wi(r,e,1,i)}}),$b(e,1)}};cb=function(e){if(e.tag===13){var t=Ms(e,134217728);if(t!==null){var n=Hn();wi(t,e,134217728,n)}$b(e,134217728)}};VO=function(e){if(e.tag===13){var t=No(e),n=Ms(e,t);if(n!==null){var r=Hn();wi(n,e,t,r)}$b(e,t)}};UO=function(){return wt};qO=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}};$w=function(e,t,n){switch(t){case"input":if(kw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xg(r);if(!i)throw Error(ce(90));CO(r),kw(r,i)}}}break;case"textarea":bO(e,n);break;case"select":t=n.value,t!=null&&Zc(e,!!n.multiple,t,!1)}};NO=Ob;IO=tc;var iH={usingClientEntryPoint:!1,Events:[nf,Vc,xg,TO,AO,Ob]},Ru={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sH={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Us.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=MO(e),e===null?null:e.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||nH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{yg=Yf.inject(sH),Ji=Yf}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iH;Or.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vb(t))throw Error(ce(200));return tH(e,t,null,n)};Or.createRoot=function(e,t){if(!Vb(e))throw Error(ce(299));var n=!1,r="",i=hD;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Fb(e,1,!1,null,null,n,!1,r,i),e[ks]=t.current,ap(e.nodeType===8?e.parentNode:e),new Bb(t)};Or.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=MO(t),e=e===null?null:e.stateNode,e};Or.flushSync=function(e){return tc(e)};Or.hydrate=function(e,t,n){if(!Ig(t))throw Error(ce(200));return jg(null,e,t,!0,n)};Or.hydrateRoot=function(e,t,n){if(!Vb(e))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=hD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=dD(t,null,e,1,n??null,i,!1,s,a),e[ks]=t.current,ap(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ng(t)};Or.render=function(e,t,n){if(!Ig(t))throw Error(ce(200));return jg(null,e,t,!1,n)};Or.unmountComponentAtNode=function(e){if(!Ig(e))throw Error(ce(40));return e._reactRootContainer?(tc(function(){jg(null,null,e,!1,function(){e._reactRootContainer=null,e[ks]=null})}),!0):!1};Or.unstable_batchedUpdates=Ob;Or.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ig(n))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return jg(e,t,n,!1,r)};Or.version="18.3.1-next-f1338f8080-20240426";function pD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pD)}catch(e){console.error(e)}}pD(),pO.exports=Or;var gc=pO.exports;const oH=fc(gc);var fD,iR=gc;fD=iR.createRoot,iR.hydrateRoot;function aH(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,s,a=[],o="",c=e.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(a.push(n),o+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),a.push(i.substring(1,~r?r:~s?s:i.length)),o+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(o+=(~r?"?":"")+"\\"+i.substring(s))):o+="/"+i;return{keys:a,pattern:new RegExp("^"+o+(t?"(?=$|/)":"/?$"),"i")}}var mD={exports:{}},vD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ml=m;function cH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lH=typeof Object.is=="function"?Object.is:cH,uH=Ml.useState,dH=Ml.useEffect,hH=Ml.useLayoutEffect,pH=Ml.useDebugValue;function fH(e,t){var n=t(),r=uH({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return hH(function(){i.value=n,i.getSnapshot=t,y0(i)&&s({inst:i})},[e,n,t]),dH(function(){return y0(i)&&s({inst:i}),e(function(){y0(i)&&s({inst:i})})},[e]),pH(n),n}function y0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lH(e,n)}catch{return!0}}function mH(e,t){return t()}var vH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mH:fH;vD.useSyncExternalStore=Ml.useSyncExternalStore!==void 0?Ml.useSyncExternalStore:vH;mD.exports=vD;var gH=mD.exports;const yH=dO.useInsertionEffect,SH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gD=SH?m.useLayoutEffect:m.useEffect,wH=yH||gD,Ub=e=>{const t=m.useRef([e,(...n)=>t[0](...n)]).current;return wH(()=>{t[0]=e}),t[1]},CH="popstate",qb="pushState",Hb="replaceState",xH="hashchange",sR=[CH,qb,Hb,xH],bH=e=>{for(const t of sR)addEventListener(t,e);return()=>{for(const t of sR)removeEventListener(t,e)}},yD=(e,t)=>gH.useSyncExternalStore(bH,e,t),EH=()=>location.search,PH=({ssrSearch:e=""}={})=>yD(EH,()=>e),oR=()=>location.pathname,RH=({ssrPath:e}={})=>yD(oR,e?()=>e:oR),_H=(e,{replace:t=!1,state:n=null}={})=>history[t?Hb:qb](n,"",e),TH=(e={})=>[RH(e),_H],aR=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[aR]>"u"){for(const e of[qb,Hb]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,aR,{value:!0})}const AH=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",SD=(e="")=>e==="/"?"":e,NH=(e,t)=>e[0]==="~"?e.slice(1):SD(t)+e,IH=(e="",t)=>AH(cR(SD(e)),cR(t)),cR=e=>{try{return decodeURI(e)}catch{return e}},wD={hook:TH,searchHook:PH,parser:aH,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},CD=m.createContext(wD),tu=()=>m.useContext(CD),xD={},bD=m.createContext(xD),jH=()=>m.useContext(bD),sf=e=>{const[t,n]=e.hook(e);return[IH(e.base,t),Ub((r,i)=>n(NH(r,e.base),i))]},ss=()=>sf(tu()),ED=(e,t,n,r)=>{const{pattern:i,keys:s}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),a=i.exec(n)||[],[o,...c]=a;return o!==void 0?[!0,(()=>{const l=s!==!1?Object.fromEntries(s.map((h,p)=>[h,c[p]])):a.groups;let u={...c};return l&&Object.assign(u,l),u})(),...r?[o]:[]]:[!1,null]},kH=({children:e,...t})=>{var u,h;const n=tu(),r=t.hook?wD:n;let i=r;const[s,a]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];a&&(t.ssrSearch=a,t.ssrPath=s),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let o=m.useRef({}),c=o.current,l=c;for(let p in r){const f=p==="base"?r[p]+(t[p]||""):t[p]||r[p];c===l&&f!==l[p]&&(o.current=l={...l}),l[p]=f,(f!==r[p]||f!==i[p])&&(i=l)}return m.createElement(CD.Provider,{value:i,children:e})},lR=({children:e,component:t},n)=>t?m.createElement(t,{params:n}):typeof e=="function"?e(n):e,MH=e=>{let t=m.useRef(xD);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some(([r,i])=>i!==n[r])?e:n},oi=({path:e,nest:t,match:n,...r})=>{const i=tu(),[s]=sf(i),[a,o,c]=n??ED(i.parser,e,s,t),l=MH({...jH(),...o});if(!a)return null;const u=c?m.createElement(kH,{base:c},lR(r,l)):lR(r,l);return m.createElement(bD.Provider,{value:l,children:u})},vp=m.forwardRef((e,t)=>{const n=tu(),[r,i]=sf(n),{to:s="",href:a=s,onClick:o,asChild:c,children:l,className:u,replace:h,state:p,...f}=e,g=Ub(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(o==null||o(w),w.defaultPrevented||(w.preventDefault(),i(a,e)))}),v=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&m.isValidElement(l)?m.cloneElement(l,{onClick:g,href:v}):m.createElement("a",{...f,onClick:g,href:v,className:u!=null&&u.call?u(r===a):u,children:l,ref:t})}),PD=e=>Array.isArray(e)?e.flatMap(t=>PD(t&&t.type===m.Fragment?t.props.children:t)):[e],uR=({children:e,location:t})=>{const n=tu(),[r]=sf(n);for(const i of PD(e)){let s=0;if(m.isValidElement(i)&&(s=ED(n.parser,i.props.path,t||r,i.props.nest))[0])return m.cloneElement(i,{match:s})}return null},S0=e=>{const{to:t,href:n=t}=e,r=tu(),[,i]=sf(r),s=Ub(()=>i(t||n,e)),{ssrContext:a}=r;return gD(()=>{s()},[]),a&&(a.redirectTo=t),null};var nu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nc=typeof window>"u"||"Deno"in globalThis;function Un(){}function OH(e,t){return typeof e=="function"?e(t):e}function SC(e){return typeof e=="number"&&e>=0&&e!==1/0}function RD(e,t){return Math.max(e+(t||0)-Date.now(),0)}function jo(e,t){return typeof e=="function"?e(t):e}function fi(e,t){return typeof e=="function"?e(t):e}function dR(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:o}=e;if(a){if(r){if(t.queryHash!==Wb(a,t.options))return!1}else if(!gp(t.queryKey,a))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||s&&!s(t))}function hR(e,t){const{exact:n,status:r,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(rc(t.options.mutationKey)!==rc(s))return!1}else if(!gp(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Wb(e,t){return((t==null?void 0:t.queryKeyHashFn)||rc)(e)}function rc(e){return JSON.stringify(e,(t,n)=>wC(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function gp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>gp(e[n],t[n])):!1}function _D(e,t){if(e===t)return e;const n=pR(e)&&pR(t);if(n||wC(e)&&wC(t)){const r=n?e:Object.keys(e),i=r.length,s=n?t:Object.keys(t),a=s.length,o=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<a;u++){const h=n?u:s[u];(!n&&c.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(o[h]=void 0,l++):(o[h]=_D(e[h],t[h]),o[h]===e[h]&&e[h]!==void 0&&l++)}return i===a&&l===i?e:o}return t}function Ev(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function pR(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function wC(e){if(!fR(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!fR(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function fR(e){return Object.prototype.toString.call(e)==="[object Object]"}function DH(e){return new Promise(t=>{setTimeout(t,e)})}function CC(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?_D(e,t):t}function LH(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function zH(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Kb=Symbol();function TD(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Kb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function AD(e,t){return typeof e=="function"?e(...t):!!e}var La,uo,fl,lI,FH=(lI=class extends nu{constructor(){super();Ie(this,La);Ie(this,uo);Ie(this,fl);ge(this,fl,t=>{if(!nc&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,uo)||this.setEventListener(B(this,fl))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,uo))==null||t.call(this),ge(this,uo,void 0))}setEventListener(t){var n;ge(this,fl,t),(n=B(this,uo))==null||n.call(this),ge(this,uo,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){B(this,La)!==t&&(ge(this,La,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof B(this,La)=="boolean"?B(this,La):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},La=new WeakMap,uo=new WeakMap,fl=new WeakMap,lI),Gb=new FH,ml,ho,vl,uI,$H=(uI=class extends nu{constructor(){super();Ie(this,ml,!0);Ie(this,ho);Ie(this,vl);ge(this,vl,t=>{if(!nc&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){B(this,ho)||this.setEventListener(B(this,vl))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,ho))==null||t.call(this),ge(this,ho,void 0))}setEventListener(t){var n;ge(this,vl,t),(n=B(this,ho))==null||n.call(this),ge(this,ho,t(this.setOnline.bind(this)))}setOnline(t){B(this,ml)!==t&&(ge(this,ml,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return B(this,ml)}},ml=new WeakMap,ho=new WeakMap,vl=new WeakMap,uI),Pv=new $H;function xC(){let e,t;const n=new Promise((i,s)=>{e=i,t=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}function BH(e){return Math.min(1e3*2**e,3e4)}function ND(e){return(e??"online")==="online"?Pv.isOnline():!0}var ID=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function w0(e){return e instanceof ID}function jD(e){let t=!1,n=0,r=!1,i;const s=xC(),a=v=>{var w;r||(p(new ID(v)),(w=e.abort)==null||w.call(e))},o=()=>{t=!0},c=()=>{t=!1},l=()=>Gb.isFocused()&&(e.networkMode==="always"||Pv.isOnline())&&e.canRun(),u=()=>ND(e.networkMode)&&e.canRun(),h=v=>{var w;r||(r=!0,(w=e.onSuccess)==null||w.call(e,v),i==null||i(),s.resolve(v))},p=v=>{var w;r||(r=!0,(w=e.onError)==null||w.call(e,v),i==null||i(),s.reject(v))},f=()=>new Promise(v=>{var w;i=y=>{(r||l())&&v(y)},(w=e.onPause)==null||w.call(e)}).then(()=>{var v;i=void 0,r||(v=e.onContinue)==null||v.call(e)}),g=()=>{if(r)return;let v;const w=n===0?e.initialPromise:void 0;try{v=w??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(h).catch(y=>{var P;if(r)return;const S=e.retry??(nc?0:3),C=e.retryDelay??BH,x=typeof C=="function"?C(n,y):C,E=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,y);if(t||!E){p(y);return}n++,(P=e.onFail)==null||P.call(e,n,y),DH(x).then(()=>l()?void 0:f()).then(()=>{t?p(y):g()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?g():f().then(g),s)}}var VH=e=>setTimeout(e,0);function UH(){let e=[],t=0,n=o=>{o()},r=o=>{o()},i=VH;const s=o=>{t?e.push(o):i(()=>{n(o)})},a=()=>{const o=e;e=[],o.length&&i(()=>{r(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||a()}return c},batchCalls:o=>(...c)=>{s(()=>{o(...c)})},schedule:s,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{i=o}}}var tn=UH(),za,dI,kD=(dI=class{constructor(){Ie(this,za)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),SC(this.gcTime)&&ge(this,za,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(nc?1/0:5*60*1e3))}clearGcTimeout(){B(this,za)&&(clearTimeout(B(this,za)),ge(this,za,void 0))}},za=new WeakMap,dI),gl,yl,$r,Fa,Nn,Qp,$a,li,gs,hI,qH=(hI=class extends kD{constructor(t){super();Ie(this,li);Ie(this,gl);Ie(this,yl);Ie(this,$r);Ie(this,Fa);Ie(this,Nn);Ie(this,Qp);Ie(this,$a);ge(this,$a,!1),ge(this,Qp,t.defaultOptions),this.setOptions(t.options),this.observers=[],ge(this,Fa,t.client),ge(this,$r,B(this,Fa).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ge(this,gl,HH(this.options)),this.state=t.state??B(this,gl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,Nn))==null?void 0:t.promise}setOptions(t){this.options={...B(this,Qp),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,$r).remove(this)}setData(t,n){const r=CC(this.state.data,t,this.options);return Je(this,li,gs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Je(this,li,gs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=B(this,Nn))==null?void 0:r.promise;return(i=B(this,Nn))==null||i.cancel(t),n?n.then(Un).catch(Un):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,gl))}isActive(){return this.observers.some(t=>fi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Kb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>jo(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!RD(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,Nn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,Nn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,$r).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(B(this,Nn)&&(B(this,$a)?B(this,Nn).cancel({revert:!0}):B(this,Nn).cancelRetry()),this.scheduleGc()),B(this,$r).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Je(this,li,gs).call(this,{type:"invalidate"})}fetch(t,n){var l,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(B(this,Nn))return B(this,Nn).continueRetry(),B(this,Nn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(f=>f.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(ge(this,$a,!0),r.signal)})},s=()=>{const p=TD(this.options,n),g=(()=>{const v={client:B(this,Fa),queryKey:this.queryKey,meta:this.meta};return i(v),v})();return ge(this,$a,!1),this.options.persister?this.options.persister(p,g,this):p(g)},o=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:B(this,Fa),state:this.state,fetchFn:s};return i(p),p})();(l=this.options.behavior)==null||l.onFetch(o,this),ge(this,yl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&Je(this,li,gs).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const c=p=>{var f,g,v,w;w0(p)&&p.silent||Je(this,li,gs).call(this,{type:"error",error:p}),w0(p)||((g=(f=B(this,$r).config).onError)==null||g.call(f,p,this),(w=(v=B(this,$r).config).onSettled)==null||w.call(v,this.state.data,p,this)),this.scheduleGc()};return ge(this,Nn,jD({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var f,g,v,w;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(y){c(y);return}(g=(f=B(this,$r).config).onSuccess)==null||g.call(f,p,this),(w=(v=B(this,$r).config).onSettled)==null||w.call(v,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,f)=>{Je(this,li,gs).call(this,{type:"failed",failureCount:p,error:f})},onPause:()=>{Je(this,li,gs).call(this,{type:"pause"})},onContinue:()=>{Je(this,li,gs).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),B(this,Nn).start()}},gl=new WeakMap,yl=new WeakMap,$r=new WeakMap,Fa=new WeakMap,Nn=new WeakMap,Qp=new WeakMap,$a=new WeakMap,li=new WeakSet,gs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...MD(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return w0(i)&&i.revert&&B(this,yl)?{...B(this,yl),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),B(this,$r).notify({query:this,type:"updated",action:t})})},hI);function MD(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ND(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function HH(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Fi,pI,WH=(pI=class extends nu{constructor(t={}){super();Ie(this,Fi);this.config=t,ge(this,Fi,new Map)}build(t,n,r){const i=n.queryKey,s=n.queryHash??Wb(i,n);let a=this.get(s);return a||(a=new qH({client:t,queryKey:i,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(a)),a}add(t){B(this,Fi).has(t.queryHash)||(B(this,Fi).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=B(this,Fi).get(t.queryHash);n&&(t.destroy(),n===t&&B(this,Fi).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,Fi).get(t)}getAll(){return[...B(this,Fi).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>dR(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>dR(t,r)):n}notify(t){tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Fi=new WeakMap,pI),$i,$n,Ba,Bi,Ys,fI,KH=(fI=class extends kD{constructor(t){super();Ie(this,Bi);Ie(this,$i);Ie(this,$n);Ie(this,Ba);this.mutationId=t.mutationId,ge(this,$n,t.mutationCache),ge(this,$i,[]),this.state=t.state||OD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,$i).includes(t)||(B(this,$i).push(t),this.clearGcTimeout(),B(this,$n).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ge(this,$i,B(this,$i).filter(n=>n!==t)),this.scheduleGc(),B(this,$n).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){B(this,$i).length||(this.state.status==="pending"?this.scheduleGc():B(this,$n).remove(this))}continue(){var t;return((t=B(this,Ba))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,a,o,c,l,u,h,p,f,g,v,w,y,S,C,x,E,P,T,_;const n=()=>{Je(this,Bi,Ys).call(this,{type:"continue"})};ge(this,Ba,jD({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,z)=>{Je(this,Bi,Ys).call(this,{type:"failed",failureCount:k,error:z})},onPause:()=>{Je(this,Bi,Ys).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,$n).canRun(this)}));const r=this.state.status==="pending",i=!B(this,Ba).canStart();try{if(r)n();else{Je(this,Bi,Ys).call(this,{type:"pending",variables:t,isPaused:i}),await((a=(s=B(this,$n).config).onMutate)==null?void 0:a.call(s,t,this));const z=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,t));z!==this.state.context&&Je(this,Bi,Ys).call(this,{type:"pending",context:z,variables:t,isPaused:i})}const k=await B(this,Ba).start();return await((u=(l=B(this,$n).config).onSuccess)==null?void 0:u.call(l,k,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,k,t,this.state.context)),await((g=(f=B(this,$n).config).onSettled)==null?void 0:g.call(f,k,null,this.state.variables,this.state.context,this)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,k,null,t,this.state.context)),Je(this,Bi,Ys).call(this,{type:"success",data:k}),k}catch(k){try{throw await((S=(y=B(this,$n).config).onError)==null?void 0:S.call(y,k,t,this.state.context,this)),await((x=(C=this.options).onError)==null?void 0:x.call(C,k,t,this.state.context)),await((P=(E=B(this,$n).config).onSettled)==null?void 0:P.call(E,void 0,k,this.state.variables,this.state.context,this)),await((_=(T=this.options).onSettled)==null?void 0:_.call(T,void 0,k,t,this.state.context)),k}finally{Je(this,Bi,Ys).call(this,{type:"error",error:k})}}finally{B(this,$n).runNext(this)}}},$i=new WeakMap,$n=new WeakMap,Ba=new WeakMap,Bi=new WeakSet,Ys=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),tn.batch(()=>{B(this,$i).forEach(r=>{r.onMutationUpdate(t)}),B(this,$n).notify({mutation:this,type:"updated",action:t})})},fI);function OD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xs,ui,Jp,mI,GH=(mI=class extends nu{constructor(t={}){super();Ie(this,xs);Ie(this,ui);Ie(this,Jp);this.config=t,ge(this,xs,new Set),ge(this,ui,new Map),ge(this,Jp,0)}build(t,n,r){const i=new KH({mutationCache:this,mutationId:++Mf(this,Jp)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){B(this,xs).add(t);const n=Zf(t);if(typeof n=="string"){const r=B(this,ui).get(n);r?r.push(t):B(this,ui).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(B(this,xs).delete(t)){const n=Zf(t);if(typeof n=="string"){const r=B(this,ui).get(n);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&B(this,ui).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Zf(t);if(typeof n=="string"){const r=B(this,ui).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const n=Zf(t);if(typeof n=="string"){const i=(r=B(this,ui).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){tn.batch(()=>{B(this,xs).forEach(t=>{this.notify({type:"removed",mutation:t})}),B(this,xs).clear(),B(this,ui).clear()})}getAll(){return Array.from(B(this,xs))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>hR(n,r))}findAll(t={}){return this.getAll().filter(n=>hR(t,n))}notify(t){tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return tn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Un))))}},xs=new WeakMap,ui=new WeakMap,Jp=new WeakMap,mI);function Zf(e){var t;return(t=e.options.scope)==null?void 0:t.id}function mR(e){return{onFetch:(t,n)=>{var u,h,p,f,g;const r=t.options,i=(p=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,s=((f=t.state.data)==null?void 0:f.pages)||[],a=((g=t.state.data)==null?void 0:g.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const l=async()=>{let v=!1;const w=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=TD(t.options,t.fetchOptions),S=async(C,x,E)=>{if(v)return Promise.reject();if(x==null&&C.pages.length)return Promise.resolve(C);const T=(()=>{const D={client:t.client,queryKey:t.queryKey,pageParam:x,direction:E?"backward":"forward",meta:t.options.meta};return w(D),D})(),_=await y(T),{maxPages:k}=t.options,z=E?zH:LH;return{pages:z(C.pages,_,k),pageParams:z(C.pageParams,x,k)}};if(i&&s.length){const C=i==="backward",x=C?QH:vR,E={pages:s,pageParams:a},P=x(r,E);o=await S(E,P,C)}else{const C=e??s.length;do{const x=c===0?a[0]??r.initialPageParam:vR(r,o);if(c>0&&x==null)break;o=await S(o,x),c++}while(c<C)}return o};t.options.persister?t.fetchFn=()=>{var v,w;return(w=(v=t.options).persister)==null?void 0:w.call(v,l,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=l}}}function vR(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function QH(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var $t,po,fo,Sl,wl,mo,Cl,xl,vI,JH=(vI=class{constructor(e={}){Ie(this,$t);Ie(this,po);Ie(this,fo);Ie(this,Sl);Ie(this,wl);Ie(this,mo);Ie(this,Cl);Ie(this,xl);ge(this,$t,e.queryCache||new WH),ge(this,po,e.mutationCache||new GH),ge(this,fo,e.defaultOptions||{}),ge(this,Sl,new Map),ge(this,wl,new Map),ge(this,mo,0)}mount(){Mf(this,mo)._++,B(this,mo)===1&&(ge(this,Cl,Gb.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,$t).onFocus())})),ge(this,xl,Pv.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,$t).onOnline())})))}unmount(){var e,t;Mf(this,mo)._--,B(this,mo)===0&&((e=B(this,Cl))==null||e.call(this),ge(this,Cl,void 0),(t=B(this,xl))==null||t.call(this),ge(this,xl,void 0))}isFetching(e){return B(this,$t).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,po).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,$t).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=B(this,$t).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(jo(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return B(this,$t).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=B(this,$t).get(r.queryHash),s=i==null?void 0:i.state.data,a=OH(t,s);if(a!==void 0)return B(this,$t).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return tn.batch(()=>B(this,$t).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,$t).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=B(this,$t);tn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=B(this,$t);return tn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=tn.batch(()=>B(this,$t).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Un).catch(Un)}invalidateQueries(e,t={}){return tn.batch(()=>(B(this,$t).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=tn.batch(()=>B(this,$t).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Un)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Un)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=B(this,$t).build(this,t);return n.isStaleByTime(jo(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Un).catch(Un)}fetchInfiniteQuery(e){return e.behavior=mR(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Un).catch(Un)}ensureInfiniteQueryData(e){return e.behavior=mR(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Pv.isOnline()?B(this,po).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,$t)}getMutationCache(){return B(this,po)}getDefaultOptions(){return B(this,fo)}setDefaultOptions(e){ge(this,fo,e)}setQueryDefaults(e,t){B(this,Sl).set(rc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,Sl).values()],n={};return t.forEach(r=>{gp(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){B(this,wl).set(rc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,wl).values()],n={};return t.forEach(r=>{gp(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,fo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Wb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Kb&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,fo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,$t).clear(),B(this,po).clear()}},$t=new WeakMap,po=new WeakMap,fo=new WeakMap,Sl=new WeakMap,wl=new WeakMap,mo=new WeakMap,Cl=new WeakMap,xl=new WeakMap,vI),rr,ot,Yp,Bn,Va,bl,vo,go,Zp,El,Pl,Ua,qa,yo,Rl,gt,_h,bC,EC,PC,RC,_C,TC,AC,DD,gI,YH=(gI=class extends nu{constructor(t,n){super();Ie(this,gt);Ie(this,rr);Ie(this,ot);Ie(this,Yp);Ie(this,Bn);Ie(this,Va);Ie(this,bl);Ie(this,vo);Ie(this,go);Ie(this,Zp);Ie(this,El);Ie(this,Pl);Ie(this,Ua);Ie(this,qa);Ie(this,yo);Ie(this,Rl,new Set);this.options=n,ge(this,rr,t),ge(this,go,null),ge(this,vo,xC()),this.options.experimental_prefetchInRender||B(this,vo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,ot).addObserver(this),gR(B(this,ot),this.options)?Je(this,gt,_h).call(this):this.updateResult(),Je(this,gt,RC).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return NC(B(this,ot),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return NC(B(this,ot),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Je(this,gt,_C).call(this),Je(this,gt,TC).call(this),B(this,ot).removeObserver(this)}setOptions(t){const n=this.options,r=B(this,ot);if(this.options=B(this,rr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fi(this.options.enabled,B(this,ot))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Je(this,gt,AC).call(this),B(this,ot).setOptions(this.options),n._defaulted&&!Ev(this.options,n)&&B(this,rr).getQueryCache().notify({type:"observerOptionsUpdated",query:B(this,ot),observer:this});const i=this.hasListeners();i&&yR(B(this,ot),r,this.options,n)&&Je(this,gt,_h).call(this),this.updateResult(),i&&(B(this,ot)!==r||fi(this.options.enabled,B(this,ot))!==fi(n.enabled,B(this,ot))||jo(this.options.staleTime,B(this,ot))!==jo(n.staleTime,B(this,ot)))&&Je(this,gt,bC).call(this);const s=Je(this,gt,EC).call(this);i&&(B(this,ot)!==r||fi(this.options.enabled,B(this,ot))!==fi(n.enabled,B(this,ot))||s!==B(this,yo))&&Je(this,gt,PC).call(this,s)}getOptimisticResult(t){const n=B(this,rr).getQueryCache().build(B(this,rr),t),r=this.createResult(n,t);return XH(this,r)&&(ge(this,Bn,r),ge(this,bl,this.options),ge(this,Va,B(this,ot).state)),r}getCurrentResult(){return B(this,Bn)}trackResult(t,n){return new Proxy(t,{get:(r,i)=>(this.trackProp(i),n==null||n(i),Reflect.get(r,i))})}trackProp(t){B(this,Rl).add(t)}getCurrentQuery(){return B(this,ot)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=B(this,rr).defaultQueryOptions(t),r=B(this,rr).getQueryCache().build(B(this,rr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Je(this,gt,_h).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,Bn)))}createResult(t,n){var k;const r=B(this,ot),i=this.options,s=B(this,Bn),a=B(this,Va),o=B(this,bl),l=t!==r?t.state:B(this,Yp),{state:u}=t;let h={...u},p=!1,f;if(n._optimisticResults){const z=this.hasListeners(),D=!z&&gR(t,n),O=z&&yR(t,r,n,i);(D||O)&&(h={...h,...MD(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:w}=h;f=h.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let z;s!=null&&s.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData)?(z=s.data,y=!0):z=typeof n.placeholderData=="function"?n.placeholderData((k=B(this,Pl))==null?void 0:k.state.data,B(this,Pl)):n.placeholderData,z!==void 0&&(w="success",f=CC(s==null?void 0:s.data,z,n),p=!0)}if(n.select&&f!==void 0&&!y)if(s&&f===(a==null?void 0:a.data)&&n.select===B(this,Zp))f=B(this,El);else try{ge(this,Zp,n.select),f=n.select(f),f=CC(s==null?void 0:s.data,f,n),ge(this,El,f),ge(this,go,null)}catch(z){ge(this,go,z)}B(this,go)&&(g=B(this,go),f=B(this,El),v=Date.now(),w="error");const S=h.fetchStatus==="fetching",C=w==="pending",x=w==="error",E=C&&S,P=f!==void 0,_={status:w,fetchStatus:h.fetchStatus,isPending:C,isSuccess:w==="success",isError:x,isInitialLoading:E,isLoading:E,data:f,dataUpdatedAt:h.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>l.dataUpdateCount||h.errorUpdateCount>l.errorUpdateCount,isFetching:S,isRefetching:S&&!C,isLoadingError:x&&!P,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:x&&P,isStale:Qb(t,n),refetch:this.refetch,promise:B(this,vo)};if(this.options.experimental_prefetchInRender){const z=M=>{_.status==="error"?M.reject(_.error):_.data!==void 0&&M.resolve(_.data)},D=()=>{const M=ge(this,vo,_.promise=xC());z(M)},O=B(this,vo);switch(O.status){case"pending":t.queryHash===r.queryHash&&z(O);break;case"fulfilled":(_.status==="error"||_.data!==O.value)&&D();break;case"rejected":(_.status!=="error"||_.error!==O.reason)&&D();break}}return _}updateResult(){const t=B(this,Bn),n=this.createResult(B(this,ot),this.options);if(ge(this,Va,B(this,ot).state),ge(this,bl,this.options),B(this,Va).data!==void 0&&ge(this,Pl,B(this,ot)),Ev(n,t))return;ge(this,Bn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!B(this,Rl).size)return!0;const a=new Set(s??B(this,Rl));return this.options.throwOnError&&a.add("error"),Object.keys(B(this,Bn)).some(o=>{const c=o;return B(this,Bn)[c]!==t[c]&&a.has(c)})};Je(this,gt,DD).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Je(this,gt,RC).call(this)}},rr=new WeakMap,ot=new WeakMap,Yp=new WeakMap,Bn=new WeakMap,Va=new WeakMap,bl=new WeakMap,vo=new WeakMap,go=new WeakMap,Zp=new WeakMap,El=new WeakMap,Pl=new WeakMap,Ua=new WeakMap,qa=new WeakMap,yo=new WeakMap,Rl=new WeakMap,gt=new WeakSet,_h=function(t){Je(this,gt,AC).call(this);let n=B(this,ot).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Un)),n},bC=function(){Je(this,gt,_C).call(this);const t=jo(this.options.staleTime,B(this,ot));if(nc||B(this,Bn).isStale||!SC(t))return;const r=RD(B(this,Bn).dataUpdatedAt,t)+1;ge(this,Ua,setTimeout(()=>{B(this,Bn).isStale||this.updateResult()},r))},EC=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(B(this,ot)):this.options.refetchInterval)??!1},PC=function(t){Je(this,gt,TC).call(this),ge(this,yo,t),!(nc||fi(this.options.enabled,B(this,ot))===!1||!SC(B(this,yo))||B(this,yo)===0)&&ge(this,qa,setInterval(()=>{(this.options.refetchIntervalInBackground||Gb.isFocused())&&Je(this,gt,_h).call(this)},B(this,yo)))},RC=function(){Je(this,gt,bC).call(this),Je(this,gt,PC).call(this,Je(this,gt,EC).call(this))},_C=function(){B(this,Ua)&&(clearTimeout(B(this,Ua)),ge(this,Ua,void 0))},TC=function(){B(this,qa)&&(clearInterval(B(this,qa)),ge(this,qa,void 0))},AC=function(){const t=B(this,rr).getQueryCache().build(B(this,rr),this.options);if(t===B(this,ot))return;const n=B(this,ot);ge(this,ot,t),ge(this,Yp,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},DD=function(t){tn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(B(this,Bn))}),B(this,rr).getQueryCache().notify({query:B(this,ot),type:"observerResultsUpdated"})})},gI);function ZH(e,t){return fi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function gR(e,t){return ZH(e,t)||e.state.data!==void 0&&NC(e,t,t.refetchOnMount)}function NC(e,t,n){if(fi(t.enabled,e)!==!1&&jo(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Qb(e,t)}return!1}function yR(e,t,n,r){return(e!==t||fi(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Qb(e,n)}function Qb(e,t){return fi(t.enabled,e)!==!1&&e.isStaleByTime(jo(t.staleTime,e))}function XH(e,t){return!Ev(e.getCurrentResult(),t)}var So,wo,ir,bs,Is,Dm,IC,yI,eW=(yI=class extends nu{constructor(n,r){super();Ie(this,Is);Ie(this,So);Ie(this,wo);Ie(this,ir);Ie(this,bs);ge(this,So,n),this.setOptions(r),this.bindMethods(),Je(this,Is,Dm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=B(this,So).defaultMutationOptions(n),Ev(this.options,r)||B(this,So).getMutationCache().notify({type:"observerOptionsUpdated",mutation:B(this,ir),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&rc(r.mutationKey)!==rc(this.options.mutationKey)?this.reset():((i=B(this,ir))==null?void 0:i.state.status)==="pending"&&B(this,ir).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=B(this,ir))==null||n.removeObserver(this)}onMutationUpdate(n){Je(this,Is,Dm).call(this),Je(this,Is,IC).call(this,n)}getCurrentResult(){return B(this,wo)}reset(){var n;(n=B(this,ir))==null||n.removeObserver(this),ge(this,ir,void 0),Je(this,Is,Dm).call(this),Je(this,Is,IC).call(this)}mutate(n,r){var i;return ge(this,bs,r),(i=B(this,ir))==null||i.removeObserver(this),ge(this,ir,B(this,So).getMutationCache().build(B(this,So),this.options)),B(this,ir).addObserver(this),B(this,ir).execute(n)}},So=new WeakMap,wo=new WeakMap,ir=new WeakMap,bs=new WeakMap,Is=new WeakSet,Dm=function(){var r;const n=((r=B(this,ir))==null?void 0:r.state)??OD();ge(this,wo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},IC=function(n){tn.batch(()=>{var r,i,s,a,o,c,l,u;if(B(this,bs)&&this.hasListeners()){const h=B(this,wo).variables,p=B(this,wo).context;(n==null?void 0:n.type)==="success"?((i=(r=B(this,bs)).onSuccess)==null||i.call(r,n.data,h,p),(a=(s=B(this,bs)).onSettled)==null||a.call(s,n.data,null,h,p)):(n==null?void 0:n.type)==="error"&&((c=(o=B(this,bs)).onError)==null||c.call(o,n.error,h,p),(u=(l=B(this,bs)).onSettled)==null||u.call(l,void 0,n.error,h,p))}this.listeners.forEach(h=>{h(B(this,wo))})})},yI),LD=m.createContext(void 0),zD=e=>{const t=m.useContext(LD);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},FD=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),d.jsx(LD.Provider,{value:e,children:t})),$D=m.createContext(!1),tW=()=>m.useContext($D);$D.Provider;function nW(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var rW=m.createContext(nW()),iW=()=>m.useContext(rW),sW=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},oW=e=>{m.useEffect(()=>{e.clearReset()},[e])},aW=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||AD(n,[e.error,r])),cW=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},lW=(e,t)=>e.isLoading&&e.isFetching&&!t,uW=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,SR=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function dW(e,t,n){var h,p,f,g,v;const r=tW(),i=iW(),s=zD(),a=s.defaultQueryOptions(e);(p=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||p.call(h,a),a._optimisticResults=r?"isRestoring":"optimistic",cW(a),sW(a,i),oW(i);const o=!s.getQueryCache().get(a.queryHash),[c]=m.useState(()=>new t(s,a)),l=c.getOptimisticResult(a),u=!r&&e.subscribed!==!1;if(m.useSyncExternalStore(m.useCallback(w=>{const y=u?c.subscribe(tn.batchCalls(w)):Un;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),m.useEffect(()=>{c.setOptions(a)},[a,c]),uW(a,l))throw SR(a,c,i);if(aW({result:l,errorResetBoundary:i,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw l.error;if((g=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||g.call(f,a,l),a.experimental_prefetchInRender&&!nc&&lW(l,r)){const w=o?SR(a,c,i):(v=s.getQueryCache().get(a.queryHash))==null?void 0:v.promise;w==null||w.catch(Un).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?l:c.trackResult(l)}function Jb(e,t){return dW(e,YH)}function Lm(e,t){const n=zD(),[r]=m.useState(()=>new eW(n,e));m.useEffect(()=>{r.setOptions(e)},[r,e]);const i=m.useSyncExternalStore(m.useCallback(a=>r.subscribe(tn.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=m.useCallback((a,o)=>{r.mutate(a,o).catch(Un)},[r]);if(i.error&&AD(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}async function BD(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function Qt(e,t,n,r){let i="GET",s="",a,o={};const c=["GET","POST","PUT","DELETE","PATCH"];c.includes(e)?(i=e,s=t,a=n,o={}):(s=e,t&&typeof t!="string"?(i="POST",a=t,o=n||{}):t&&typeof t=="string"&&c.includes(t)?(i=t,s=e,a=n,o={}):t&&typeof t=="string"&&(s=`${e}${t}`)),a&&(o["Content-Type"]="application/json"),o.credentials="include",o["Cache-Control"]="no-cache";const l=s.includes("?")?`${s}&_t=${Date.now()}`:`${s}?_t=${Date.now()}`,u=await fetch(l,{method:i,headers:o,body:a?JSON.stringify(a):void 0,credentials:"include",cache:i==="GET"?"no-cache":"default"});if(u.headers.get("X-Chat-Cleared")==="true"){console.log("サーバーからキャッシュクリア指示を受信");const h="rq-"+s.split("?")[0];for(const p of Object.keys(localStorage))p.startsWith(h)&&localStorage.removeItem(p)}return await BD(u),u}const hW=({on401:e})=>async({queryKey:t})=>{if(t[0].includes("/api/chats")&&t[0].includes("/messages")){const s=localStorage.getItem("chat_cleared_timestamp");if(s){const a=parseInt(s);if(Date.now()-a<1e4)return console.log("クエリキャッシュクリア直後のためメッセージを空にします"),[]}}let n=t[0];const r=Date.now();n=n.includes("?")?`${n}&_t=${r}`:`${n}?_t=${r}`;const i=await fetch(n,{credentials:"include",cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});return i.headers.get("X-Chat-Cleared")==="true"?(console.log("クエリ実行中にキャッシュクリア指示を受信: 空配列を返します"),[]):(await BD(i),await i.json())},ar=new JH({defaultOptions:{queries:{queryFn:hW({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:6e4,retry:!1,refetchOnMount:!0},mutations:{retry:!1}}}),pW=1,fW=1e6;let C0=0;function mW(){return C0=(C0+1)%Number.MAX_SAFE_INTEGER,C0.toString()}const x0=new Map,wR=e=>{if(x0.has(e))return;const t=setTimeout(()=>{x0.delete(e),Wh({type:"REMOVE_TOAST",toastId:e})},fW);x0.set(e,t)},vW=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,pW)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?wR(n):e.toasts.forEach(r=>{wR(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},zm=[];let Fm={toasts:[]};function Wh(e){Fm=vW(Fm,e),zm.forEach(t=>{t(Fm)})}function VD({...e}){const t=mW(),n=i=>Wh({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>Wh({type:"DISMISS_TOAST",toastId:t});return Wh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function ln(){const[e,t]=m.useState(Fm);return m.useEffect(()=>(zm.push(t),()=>{const n=zm.indexOf(t);n>-1&&zm.splice(n,1)}),[]),{...e,toast:VD,dismiss:n=>Wh({type:"DISMISS_TOAST",toastId:n})}}function be(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function gW(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function UD(...e){return t=>e.forEach(n=>gW(n,t))}function Qe(...e){return m.useCallback(UD(...e),e)}function yW(e,t=[]){let n=[];function r(s,a){const o=m.createContext(a),c=n.length;n=[...n,a];function l(h){const{scope:p,children:f,...g}=h,v=(p==null?void 0:p[e][c])||o,w=m.useMemo(()=>g,Object.values(g));return d.jsx(v.Provider,{value:w,children:f})}function u(h,p){const f=(p==null?void 0:p[e][c])||o,g=m.useContext(f);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,u]}const i=()=>{const s=n.map(a=>m.createContext(a));return function(o){const c=(o==null?void 0:o[e])||s;return m.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return i.scopeName=e,[r,SW(i,...t)]}function SW(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:l})=>{const h=c(s)[`__scope${l}`];return{...o,...h}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var zo=m.forwardRef((e,t)=>{const{children:n,...r}=e,i=m.Children.toArray(n),s=i.find(wW);if(s){const a=s.props.children,o=i.map(c=>c===s?m.Children.count(a)>1?m.Children.only(null):m.isValidElement(a)?a.props.children:null:c);return d.jsx(jC,{...r,ref:t,children:m.isValidElement(a)?m.cloneElement(a,void 0,o):null})}return d.jsx(jC,{...r,ref:t,children:n})});zo.displayName="Slot";var jC=m.forwardRef((e,t)=>{const{children:n,...r}=e;if(m.isValidElement(n)){const i=xW(n);return m.cloneElement(n,{...CW(r,n.props),ref:t?UD(t,i):i})}return m.Children.count(n)>1?m.Children.only(null):null});jC.displayName="SlotClone";var qD=({children:e})=>d.jsx(d.Fragment,{children:e});function wW(e){return m.isValidElement(e)&&e.type===qD}function CW(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function xW(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function of(e){const t=e+"CollectionProvider",[n,r]=yW(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=f=>{const{scope:g,children:v}=f,w=q.useRef(null),y=q.useRef(new Map).current;return d.jsx(i,{scope:g,itemMap:y,collectionRef:w,children:v})};a.displayName=t;const o=e+"CollectionSlot",c=q.forwardRef((f,g)=>{const{scope:v,children:w}=f,y=s(o,v),S=Qe(g,y.collectionRef);return d.jsx(zo,{ref:S,children:w})});c.displayName=o;const l=e+"CollectionItemSlot",u="data-radix-collection-item",h=q.forwardRef((f,g)=>{const{scope:v,children:w,...y}=f,S=q.useRef(null),C=Qe(g,S),x=s(l,v);return q.useEffect(()=>(x.itemMap.set(S,{ref:S,...y}),()=>void x.itemMap.delete(S))),d.jsx(zo,{[u]:"",ref:C,children:w})});h.displayName=l;function p(f){const g=s(e+"CollectionConsumer",f);return q.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const y=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((x,E)=>y.indexOf(x.ref.current)-y.indexOf(E.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:c,ItemSlot:h},p,r]}function bW(e,t){const n=m.createContext(t),r=s=>{const{children:a,...o}=s,c=m.useMemo(()=>o,Object.values(o));return d.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function i(s){const a=m.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,i]}function Ti(e,t=[]){let n=[];function r(s,a){const o=m.createContext(a),c=n.length;n=[...n,a];const l=h=>{var y;const{scope:p,children:f,...g}=h,v=((y=p==null?void 0:p[e])==null?void 0:y[c])||o,w=m.useMemo(()=>g,Object.values(g));return d.jsx(v.Provider,{value:w,children:f})};l.displayName=s+"Provider";function u(h,p){var v;const f=((v=p==null?void 0:p[e])==null?void 0:v[c])||o,g=m.useContext(f);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[l,u]}const i=()=>{const s=n.map(a=>m.createContext(a));return function(o){const c=(o==null?void 0:o[e])||s;return m.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return i.scopeName=e,[r,EW(i,...t)]}function EW(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:l})=>{const h=c(s)[`__scope${l}`];return{...o,...h}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var PW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Re=PW.reduce((e,t)=>{const n=m.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?zo:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(o,{...a,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function HD(e,t){e&&gc.flushSync(()=>e.dispatchEvent(t))}function Kt(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function RW(e,t=globalThis==null?void 0:globalThis.document){const n=Kt(e);m.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var _W="DismissableLayer",kC="dismissableLayer.update",TW="dismissableLayer.pointerDownOutside",AW="dismissableLayer.focusOutside",CR,WD=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kg=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...c}=e,l=m.useContext(WD),[u,h]=m.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=m.useState({}),g=Qe(t,T=>h(T)),v=Array.from(l.layers),[w]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(w),S=u?v.indexOf(u):-1,C=l.layersWithOutsidePointerEventsDisabled.size>0,x=S>=y,E=IW(T=>{const _=T.target,k=[...l.branches].some(z=>z.contains(_));!x||k||(i==null||i(T),a==null||a(T),T.defaultPrevented||o==null||o())},p),P=jW(T=>{const _=T.target;[...l.branches].some(z=>z.contains(_))||(s==null||s(T),a==null||a(T),T.defaultPrevented||o==null||o())},p);return RW(T=>{S===l.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&o&&(T.preventDefault(),o()))},p),m.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(CR=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),xR(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=CR)}},[u,p,n,l]),m.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),xR())},[u,l]),m.useEffect(()=>{const T=()=>f({});return document.addEventListener(kC,T),()=>document.removeEventListener(kC,T)},[]),d.jsx(Re.div,{...c,ref:g,style:{pointerEvents:C?x?"auto":"none":void 0,...e.style},onFocusCapture:be(e.onFocusCapture,P.onFocusCapture),onBlurCapture:be(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:be(e.onPointerDownCapture,E.onPointerDownCapture)})});kg.displayName=_W;var NW="DismissableLayerBranch",KD=m.forwardRef((e,t)=>{const n=m.useContext(WD),r=m.useRef(null),i=Qe(t,r);return m.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),d.jsx(Re.div,{...e,ref:i})});KD.displayName=NW;function IW(e,t=globalThis==null?void 0:globalThis.document){const n=Kt(e),r=m.useRef(!1),i=m.useRef(()=>{});return m.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let c=function(){GD(TW,n,l,{discrete:!0})};const l={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function jW(e,t=globalThis==null?void 0:globalThis.document){const n=Kt(e),r=m.useRef(!1);return m.useEffect(()=>{const i=s=>{s.target&&!r.current&&GD(AW,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xR(){const e=new CustomEvent(kC);document.dispatchEvent(e)}function GD(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?HD(i,s):i.dispatchEvent(s)}var kW=kg,MW=KD,an=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},OW="Portal",Mg=m.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=m.useState(!1);an(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?oH.createPortal(d.jsx(Re.div,{...r,ref:t}),a):null});Mg.displayName=OW;function DW(e,t){return m.useReducer((n,r)=>t[n][r]??n,e)}var ri=e=>{const{present:t,children:n}=e,r=LW(t),i=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),s=Qe(r.ref,zW(i));return typeof n=="function"||r.isPresent?m.cloneElement(i,{ref:s}):null};ri.displayName="Presence";function LW(e){const[t,n]=m.useState(),r=m.useRef({}),i=m.useRef(e),s=m.useRef("none"),a=e?"mounted":"unmounted",[o,c]=DW(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const l=Xf(r.current);s.current=o==="mounted"?l:"none"},[o]),an(()=>{const l=r.current,u=i.current;if(u!==e){const p=s.current,f=Xf(l);e?c("MOUNT"):f==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&p!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),an(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,h=f=>{const v=Xf(r.current).includes(f.animationName);if(f.target===t&&v&&(c("ANIMATION_END"),!i.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=f=>{f.target===t&&(s.current=Xf(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:m.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function Xf(e){return(e==null?void 0:e.animationName)||"none"}function zW(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ti({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=FW({defaultProp:t,onChange:n}),s=e!==void 0,a=s?e:r,o=Kt(n),c=m.useCallback(l=>{if(s){const h=typeof l=="function"?l(e):l;h!==e&&o(h)}else i(l)},[s,e,i,o]);return[a,c]}function FW({defaultProp:e,onChange:t}){const n=m.useState(e),[r]=n,i=m.useRef(r),s=Kt(t);return m.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var $W="VisuallyHidden",Og=m.forwardRef((e,t)=>d.jsx(Re.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Og.displayName=$W;var Yb="ToastProvider",[Zb,BW,VW]=of("Toast"),[QD,gve]=Ti("Toast",[VW]),[UW,Dg]=QD(Yb),JD=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=e,[o,c]=m.useState(null),[l,u]=m.useState(0),h=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Yb}\`. Expected non-empty \`string\`.`),d.jsx(Zb.Provider,{scope:t,children:d.jsx(UW,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:l,viewport:o,onViewportChange:c,onToastAdd:m.useCallback(()=>u(f=>f+1),[]),onToastRemove:m.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:a})})};JD.displayName=Yb;var YD="ToastViewport",qW=["F8"],MC="toast.viewportPause",OC="toast.viewportResume",ZD=m.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=qW,label:i="Notifications ({hotkey})",...s}=e,a=Dg(YD,n),o=BW(n),c=m.useRef(null),l=m.useRef(null),u=m.useRef(null),h=m.useRef(null),p=Qe(t,h,a.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;m.useEffect(()=>{const w=y=>{var C;r.length!==0&&r.every(x=>y[x]||y.code===x)&&((C=h.current)==null||C.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),m.useEffect(()=>{const w=c.current,y=h.current;if(g&&w&&y){const S=()=>{if(!a.isClosePausedRef.current){const P=new CustomEvent(MC);y.dispatchEvent(P),a.isClosePausedRef.current=!0}},C=()=>{if(a.isClosePausedRef.current){const P=new CustomEvent(OC);y.dispatchEvent(P),a.isClosePausedRef.current=!1}},x=P=>{!w.contains(P.relatedTarget)&&C()},E=()=>{w.contains(document.activeElement)||C()};return w.addEventListener("focusin",S),w.addEventListener("focusout",x),w.addEventListener("pointermove",S),w.addEventListener("pointerleave",E),window.addEventListener("blur",S),window.addEventListener("focus",C),()=>{w.removeEventListener("focusin",S),w.removeEventListener("focusout",x),w.removeEventListener("pointermove",S),w.removeEventListener("pointerleave",E),window.removeEventListener("blur",S),window.removeEventListener("focus",C)}}},[g,a.isClosePausedRef]);const v=m.useCallback(({tabbingDirection:w})=>{const S=o().map(C=>{const x=C.ref.current,E=[x,...r7(x)];return w==="forwards"?E:E.reverse()});return(w==="forwards"?S.reverse():S).flat()},[o]);return m.useEffect(()=>{const w=h.current;if(w){const y=S=>{var E,P,T;const C=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!C){const _=document.activeElement,k=S.shiftKey;if(S.target===w&&k){(E=l.current)==null||E.focus();return}const O=v({tabbingDirection:k?"backwards":"forwards"}),M=O.findIndex(b=>b===_);b0(O.slice(M+1))?S.preventDefault():k?(P=l.current)==null||P.focus():(T=u.current)==null||T.focus()}};return w.addEventListener("keydown",y),()=>w.removeEventListener("keydown",y)}},[o,v]),d.jsxs(MW,{ref:c,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&d.jsx(DC,{ref:l,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"forwards"});b0(w)}}),d.jsx(Zb.Slot,{scope:n,children:d.jsx(Re.ol,{tabIndex:-1,...s,ref:p})}),g&&d.jsx(DC,{ref:u,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"backwards"});b0(w)}})]})});ZD.displayName=YD;var XD="ToastFocusProxy",DC=m.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,s=Dg(XD,n);return d.jsx(Og,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:a=>{var l;const o=a.relatedTarget;!((l=s.viewport)!=null&&l.contains(o))&&r()}})});DC.displayName=XD;var Lg="Toast",HW="toast.swipeStart",WW="toast.swipeMove",KW="toast.swipeCancel",GW="toast.swipeEnd",eL=m.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...a}=e,[o=!0,c]=ti({prop:r,defaultProp:i,onChange:s});return d.jsx(ri,{present:n||o,children:d.jsx(YW,{open:o,...a,ref:t,onClose:()=>c(!1),onPause:Kt(e.onPause),onResume:Kt(e.onResume),onSwipeStart:be(e.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:be(e.onSwipeMove,l=>{const{x:u,y:h}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:be(e.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:be(e.onSwipeEnd,l=>{const{x:u,y:h}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});eL.displayName=Lg;var[QW,JW]=QD(Lg,{onClose(){}}),YW=m.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:o,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...g}=e,v=Dg(Lg,n),[w,y]=m.useState(null),S=Qe(t,b=>y(b)),C=m.useRef(null),x=m.useRef(null),E=i||v.duration,P=m.useRef(0),T=m.useRef(E),_=m.useRef(0),{onToastAdd:k,onToastRemove:z}=v,D=Kt(()=>{var A;(w==null?void 0:w.contains(document.activeElement))&&((A=v.viewport)==null||A.focus()),a()}),O=m.useCallback(b=>{!b||b===1/0||(window.clearTimeout(_.current),P.current=new Date().getTime(),_.current=window.setTimeout(D,b))},[D]);m.useEffect(()=>{const b=v.viewport;if(b){const A=()=>{O(T.current),l==null||l()},N=()=>{const j=new Date().getTime()-P.current;T.current=T.current-j,window.clearTimeout(_.current),c==null||c()};return b.addEventListener(MC,N),b.addEventListener(OC,A),()=>{b.removeEventListener(MC,N),b.removeEventListener(OC,A)}}},[v.viewport,E,c,l,O]),m.useEffect(()=>{s&&!v.isClosePausedRef.current&&O(E)},[s,E,v.isClosePausedRef,O]),m.useEffect(()=>(k(),()=>z()),[k,z]);const M=m.useMemo(()=>w?aL(w):null,[w]);return v.viewport?d.jsxs(d.Fragment,{children:[M&&d.jsx(ZW,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:M}),d.jsx(QW,{scope:n,onClose:D,children:gc.createPortal(d.jsx(Zb.ItemSlot,{scope:n,children:d.jsx(kW,{asChild:!0,onEscapeKeyDown:be(o,()=>{v.isFocusedToastEscapeKeyDownRef.current||D(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(Re.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:S,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:be(e.onKeyDown,b=>{b.key==="Escape"&&(o==null||o(b.nativeEvent),b.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:be(e.onPointerDown,b=>{b.button===0&&(C.current={x:b.clientX,y:b.clientY})}),onPointerMove:be(e.onPointerMove,b=>{if(!C.current)return;const A=b.clientX-C.current.x,N=b.clientY-C.current.y,j=!!x.current,R=["left","right"].includes(v.swipeDirection),I=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,$=R?I(0,A):0,U=R?0:I(0,N),G=b.pointerType==="touch"?10:2,Y={x:$,y:U},J={originalEvent:b,delta:Y};j?(x.current=Y,em(WW,h,J,{discrete:!1})):bR(Y,v.swipeDirection,G)?(x.current=Y,em(HW,u,J,{discrete:!1}),b.target.setPointerCapture(b.pointerId)):(Math.abs(A)>G||Math.abs(N)>G)&&(C.current=null)}),onPointerUp:be(e.onPointerUp,b=>{const A=x.current,N=b.target;if(N.hasPointerCapture(b.pointerId)&&N.releasePointerCapture(b.pointerId),x.current=null,C.current=null,A){const j=b.currentTarget,R={originalEvent:b,delta:A};bR(A,v.swipeDirection,v.swipeThreshold)?em(GW,f,R,{discrete:!0}):em(KW,p,R,{discrete:!0}),j.addEventListener("click",I=>I.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),ZW=e=>{const{__scopeToast:t,children:n,...r}=e,i=Dg(Lg,t),[s,a]=m.useState(!1),[o,c]=m.useState(!1);return t7(()=>a(!0)),m.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),o?null:d.jsx(Mg,{asChild:!0,children:d.jsx(Og,{...r,children:s&&d.jsxs(d.Fragment,{children:[i.label," ",n]})})})},XW="ToastTitle",tL=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return d.jsx(Re.div,{...r,ref:t})});tL.displayName=XW;var e7="ToastDescription",nL=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return d.jsx(Re.div,{...r,ref:t})});nL.displayName=e7;var rL="ToastAction",iL=m.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?d.jsx(oL,{altText:n,asChild:!0,children:d.jsx(Xb,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${rL}\`. Expected non-empty \`string\`.`),null)});iL.displayName=rL;var sL="ToastClose",Xb=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=JW(sL,n);return d.jsx(oL,{asChild:!0,children:d.jsx(Re.button,{type:"button",...r,ref:t,onClick:be(e.onClick,i.onClose)})})});Xb.displayName=sL;var oL=m.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return d.jsx(Re.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function aL(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),n7(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...aL(r))}}),t}function em(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?HD(i,s):i.dispatchEvent(s)}var bR=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),s=r>i;return t==="left"||t==="right"?s&&r>n:!s&&i>n};function t7(e=()=>{}){const t=Kt(e);an(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function n7(e){return e.nodeType===e.ELEMENT_NODE}function r7(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function b0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var i7=JD,cL=ZD,lL=eL,uL=tL,dL=nL,hL=iL,pL=Xb;function fL(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=fL(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function mL(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=fL(e))&&(r&&(r+=" "),r+=t);return r}const ER=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,PR=mL,af=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return PR(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(l=>{const u=n==null?void 0:n[l],h=s==null?void 0:s[l];if(u===null)return null;const p=ER(u)||ER(h);return i[l][p]}),o=n&&Object.entries(n).reduce((l,u)=>{let[h,p]=u;return p===void 0||(l[h]=p),l},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:h,className:p,...f}=u;return Object.entries(f).every(g=>{let[v,w]=g;return Array.isArray(w)?w.includes({...s,...o}[v]):{...s,...o}[v]===w})?[...l,h,p]:l},[]);return PR(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o7=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),RR=e=>{const t=o7(e);return t.charAt(0).toUpperCase()+t.slice(1)},vL=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),a7=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},c)=>m.createElement("svg",{ref:c,...c7,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:vL("lucide",i),...!s&&!a7(o)&&{"aria-hidden":"true"},...o},[...a.map(([l,u])=>m.createElement(l,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(e,t)=>{const n=m.forwardRef(({className:r,...i},s)=>m.createElement(l7,{ref:s,iconNode:t,className:vL(`lucide-${s7(RR(e))}`,`lucide-${e}`,r),...i}));return n.displayName=RR(e),n};/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],eE=Ae("arrow-left",u7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],h7=Ae("arrow-right",d7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],f7=Ae("bell",p7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"m10.852 14.772-.383.923",key:"11vil6"}],["path",{d:"m10.852 9.228-.383-.923",key:"1fjppe"}],["path",{d:"m13.148 14.772.382.924",key:"je3va1"}],["path",{d:"m13.531 8.305-.383.923",key:"18epck"}],["path",{d:"m14.772 10.852.923-.383",key:"k9m8cz"}],["path",{d:"m14.772 13.148.923.383",key:"1xvhww"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 0 0-5.63-1.446 3 3 0 0 0-.368 1.571 4 4 0 0 0-2.525 5.771",key:"jcbbz1"}],["path",{d:"M17.998 5.125a4 4 0 0 1 2.525 5.771",key:"1kkn7e"}],["path",{d:"M19.505 10.294a4 4 0 0 1-1.5 7.706",key:"18bmuc"}],["path",{d:"M4.032 17.483A4 4 0 0 0 11.464 20c.18-.311.892-.311 1.072 0a4 4 0 0 0 7.432-2.516",key:"uozx0d"}],["path",{d:"M4.5 10.291A4 4 0 0 0 6 18",key:"whdemb"}],["path",{d:"M6.002 5.125a3 3 0 0 0 .4 1.375",key:"1kqy2g"}],["path",{d:"m9.228 10.852-.923-.383",key:"1wtb30"}],["path",{d:"m9.228 13.148-.923.383",key:"1a830x"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],v7=Ae("brain-cog",m7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],y7=Ae("brain",g7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],_R=Ae("camera",S7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],tE=Ae("check",w7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nE=Ae("chevron-down",C7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],b7=Ae("chevron-left",x7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],P7=Ae("chevron-right",E7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],_7=Ae("chevron-up",R7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],LC=Ae("circle-alert",T7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],N7=Ae("circle-check-big",A7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],TR=Ae("circle",I7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],gL=Ae("copy",j7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],zC=Ae("database",k7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],O7=Ae("download",M7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],L7=Ae("eye",D7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],AR=Ae("file-pen",z7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ic=Ae("file-text",F7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]],yL=Ae("file-type",$7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],NR=Ae("folder-open",B7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],IR=Ae("heart",V7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19.5 3-3 3 3",key:"9vmjn0"}],["path",{d:"M17 22v-5.5",key:"1aa6fl"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],q7=Ae("image-up",U7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],W7=Ae("info",H7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Wn=Ae("loader-circle",K7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Q7=Ae("log-out",G7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Y7=Ae("menu",J7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],X7=Ae("message-circle",Z7);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],t9=Ae("message-square",e9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],jR=Ae("mic",n9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],i9=Ae("pause",r9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],o9=Ae("pen-line",s9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],E0=Ae("pencil",a9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],lr=Ae("plus",c9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],FC=Ae("refresh-cw",l9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yp=Ae("save",u9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],rE=Ae("search",d9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],SL=Ae("send",h9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],f9=Ae("server",p9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$C=Ae("settings",m9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],wL=Ae("shield",v9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],kR=Ae("sparkles",g9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],CL=Ae("square-pen",y9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],w9=Ae("square",S9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["rect",{width:"10",height:"14",x:"3",y:"8",rx:"2",key:"1vrsiq"}],["path",{d:"M5 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-2.4",key:"1j4zmg"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],x9=Ae("tablet-smartphone",C9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],E9=Ae("tag",b9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ds=Ae("trash-2",P9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],_9=Ae("trash",R9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xL=Ae("triangle-alert",T9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bL=Ae("user-plus",A9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],EL=Ae("user",N9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],j9=Ae("video",I9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],PL=Ae("volume-2",k9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],O9=Ae("wand-sparkles",M9);/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_r=Ae("x",D9),iE="-",L9=e=>{const t=F9(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const o=a.split(iE);return o[0]===""&&o.length!==1&&o.shift(),RL(o,t)||z9(a)},getConflictingClassGroupIds:(a,o)=>{const c=n[a]||[];return o&&r[a]?[...c,...r[a]]:c}}},RL=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?RL(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(iE);return(a=t.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},MR=/^\[(.+)\]$/,z9=e=>{if(MR.test(e)){const t=MR.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},F9=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const i in n)BC(n[i],r,i,t);return r},BC=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:OR(t,i);s.classGroupId=n;return}if(typeof i=="function"){if($9(i)){BC(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{BC(a,OR(t,s),n,r)})})},OR=(e,t)=>{let n=e;return t.split(iE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$9=e=>e.isThemeGetter,B9=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},VC="!",UC=":",V9=UC.length,U9=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const s=[];let a=0,o=0,c=0,l;for(let g=0;g<i.length;g++){let v=i[g];if(a===0&&o===0){if(v===UC){s.push(i.slice(c,g)),c=g+V9;continue}if(v==="/"){l=g;continue}}v==="["?a++:v==="]"?a--:v==="("?o++:v===")"&&o--}const u=s.length===0?i:i.substring(c),h=q9(u),p=h!==u,f=l&&l>c?l-c:void 0;return{modifiers:s,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:f}};if(t){const i=t+UC,s=r;r=a=>a.startsWith(i)?s(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},q9=e=>e.endsWith(VC)?e.substring(0,e.length-1):e.startsWith(VC)?e.substring(1):e,H9=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(a=>{a[0]==="["||t[a]?(i.push(...s.sort(),a),s=[]):s.push(a)}),i.push(...s.sort()),i}},W9=e=>({cache:B9(e.cacheSize),parseClassName:U9(e),sortModifiers:H9(e),...L9(e)}),K9=/\s+/,G9=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=t,a=[],o=e.trim().split(K9);let c="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{isExternal:h,modifiers:p,hasImportantModifier:f,baseClassName:g,maybePostfixModifierPosition:v}=n(u);if(h){c=u+(c.length>0?" "+c:c);continue}let w=!!v,y=r(w?g.substring(0,v):g);if(!y){if(!w){c=u+(c.length>0?" "+c:c);continue}if(y=r(g),!y){c=u+(c.length>0?" "+c:c);continue}w=!1}const S=s(p).join(":"),C=f?S+VC:S,x=C+y;if(a.includes(x))continue;a.push(x);const E=i(y,w);for(let P=0;P<E.length;++P){const T=E[P];a.push(C+T)}c=u+(c.length>0?" "+c:c)}return c};function Q9(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=_L(t))&&(r&&(r+=" "),r+=n);return r}const _L=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=_L(e[r]))&&(n&&(n+=" "),n+=t);return n};function J9(e,...t){let n,r,i,s=a;function a(c){const l=t.reduce((u,h)=>h(u),e());return n=W9(l),r=n.cache.get,i=n.cache.set,s=o,o(c)}function o(c){const l=r(c);if(l)return l;const u=G9(c,n);return i(c,u),u}return function(){return s(Q9.apply(null,arguments))}}const Zt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},TL=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,AL=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Y9=/^\d+\/\d+$/,Z9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,X9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xc=e=>Y9.test(e),et=e=>!!e&&!Number.isNaN(Number(e)),Gs=e=>!!e&&Number.isInteger(Number(e)),P0=e=>e.endsWith("%")&&et(e.slice(0,-1)),ls=e=>Z9.test(e),rK=()=>!0,iK=e=>X9.test(e)&&!eK.test(e),NL=()=>!1,sK=e=>tK.test(e),oK=e=>nK.test(e),aK=e=>!Ce(e)&&!xe(e),cK=e=>ru(e,kL,NL),Ce=e=>TL.test(e),oa=e=>ru(e,ML,iK),R0=e=>ru(e,pK,et),DR=e=>ru(e,IL,NL),lK=e=>ru(e,jL,oK),tm=e=>ru(e,OL,sK),xe=e=>AL.test(e),_u=e=>iu(e,ML),uK=e=>iu(e,fK),LR=e=>iu(e,IL),dK=e=>iu(e,kL),hK=e=>iu(e,jL),nm=e=>iu(e,OL,!0),ru=(e,t,n)=>{const r=TL.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},iu=(e,t,n=!1)=>{const r=AL.exec(e);return r?r[1]?t(r[1]):n:!1},IL=e=>e==="position"||e==="percentage",jL=e=>e==="image"||e==="url",kL=e=>e==="length"||e==="size"||e==="bg-size",ML=e=>e==="length",pK=e=>e==="number",fK=e=>e==="family-name",OL=e=>e==="shadow",mK=()=>{const e=Zt("color"),t=Zt("font"),n=Zt("text"),r=Zt("font-weight"),i=Zt("tracking"),s=Zt("leading"),a=Zt("breakpoint"),o=Zt("container"),c=Zt("spacing"),l=Zt("radius"),u=Zt("shadow"),h=Zt("inset-shadow"),p=Zt("text-shadow"),f=Zt("drop-shadow"),g=Zt("blur"),v=Zt("perspective"),w=Zt("aspect"),y=Zt("ease"),S=Zt("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],x=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...x(),xe,Ce],P=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],_=()=>[xe,Ce,c],k=()=>[xc,"full","auto",..._()],z=()=>[Gs,"none","subgrid",xe,Ce],D=()=>["auto",{span:["full",Gs,xe,Ce]},Gs,xe,Ce],O=()=>[Gs,"auto",xe,Ce],M=()=>["auto","min","max","fr",xe,Ce],b=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],A=()=>["start","end","center","stretch","center-safe","end-safe"],N=()=>["auto",..._()],j=()=>[xc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],R=()=>[e,xe,Ce],I=()=>[...x(),LR,DR,{position:[xe,Ce]}],$=()=>["no-repeat",{repeat:["","x","y","space","round"]}],U=()=>["auto","cover","contain",dK,cK,{size:[xe,Ce]}],G=()=>[P0,_u,oa],Y=()=>["","none","full",l,xe,Ce],J=()=>["",et,_u,oa],oe=()=>["solid","dashed","dotted","double"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>[et,P0,LR,DR],te=()=>["","none",g,xe,Ce],re=()=>["none",et,xe,Ce],ne=()=>["none",et,xe,Ce],he=()=>[et,xe,Ce],ue=()=>[xc,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ls],breakpoint:[ls],color:[rK],container:[ls],"drop-shadow":[ls],ease:["in","out","in-out"],font:[aK],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ls],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ls],shadow:[ls],spacing:["px",et],text:[ls],"text-shadow":[ls],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xc,Ce,xe,w]}],container:["container"],columns:[{columns:[et,Ce,xe,o]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[Gs,"auto",xe,Ce]}],basis:[{basis:[xc,"full","auto",o,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[et,xc,"auto","initial","none",Ce]}],grow:[{grow:["",et,xe,Ce]}],shrink:[{shrink:["",et,xe,Ce]}],order:[{order:[Gs,"first","last","none",xe,Ce]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...b(),"normal"]}],"justify-items":[{"justify-items":[...A(),"normal"]}],"justify-self":[{"justify-self":["auto",...A()]}],"align-content":[{content:["normal",...b()]}],"align-items":[{items:[...A(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...A(),{baseline:["","last"]}]}],"place-content":[{"place-content":b()}],"place-items":[{"place-items":[...A(),"baseline"]}],"place-self":[{"place-self":["auto",...A()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:N()}],mx:[{mx:N()}],my:[{my:N()}],ms:[{ms:N()}],me:[{me:N()}],mt:[{mt:N()}],mr:[{mr:N()}],mb:[{mb:N()}],ml:[{ml:N()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:j()}],w:[{w:[o,"screen",...j()]}],"min-w":[{"min-w":[o,"screen","none",...j()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...j()]}],h:[{h:["screen","lh",...j()]}],"min-h":[{"min-h":["screen","lh","none",...j()]}],"max-h":[{"max-h":["screen","lh",...j()]}],"font-size":[{text:["base",n,_u,oa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,xe,R0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",P0,Ce]}],"font-family":[{font:[uK,Ce,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,xe,Ce]}],"line-clamp":[{"line-clamp":[et,"none",xe,R0]}],leading:[{leading:[s,..._()]}],"list-image":[{"list-image":["none",xe,Ce]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",xe,Ce]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[et,"from-font","auto",xe,oa]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[et,"auto",xe,Ce]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe,Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe,Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:$()}],"bg-size":[{bg:U()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Gs,xe,Ce],radial:["",xe,Ce],conic:[Gs,xe,Ce]},hK,lK]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:J()}],"border-w-x":[{"border-x":J()}],"border-w-y":[{"border-y":J()}],"border-w-s":[{"border-s":J()}],"border-w-e":[{"border-e":J()}],"border-w-t":[{"border-t":J()}],"border-w-r":[{"border-r":J()}],"border-w-b":[{"border-b":J()}],"border-w-l":[{"border-l":J()}],"divide-x":[{"divide-x":J()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":J()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...oe(),"hidden","none"]}],"divide-style":[{divide:[...oe(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[et,xe,Ce]}],"outline-w":[{outline:["",et,_u,oa]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",u,nm,tm]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",h,nm,tm]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[et,oa]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":J()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",p,nm,tm]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[et,xe,Ce]}],"mix-blend":[{"mix-blend":[...V(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":V()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[et]}],"mask-image-linear-from-pos":[{"mask-linear-from":H()}],"mask-image-linear-to-pos":[{"mask-linear-to":H()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":H()}],"mask-image-t-to-pos":[{"mask-t-to":H()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":H()}],"mask-image-r-to-pos":[{"mask-r-to":H()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":H()}],"mask-image-b-to-pos":[{"mask-b-to":H()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":H()}],"mask-image-l-to-pos":[{"mask-l-to":H()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":H()}],"mask-image-x-to-pos":[{"mask-x-to":H()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":H()}],"mask-image-y-to-pos":[{"mask-y-to":H()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[xe,Ce]}],"mask-image-radial-from-pos":[{"mask-radial-from":H()}],"mask-image-radial-to-pos":[{"mask-radial-to":H()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":x()}],"mask-image-conic-pos":[{"mask-conic":[et]}],"mask-image-conic-from-pos":[{"mask-conic-from":H()}],"mask-image-conic-to-pos":[{"mask-conic-to":H()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:$()}],"mask-size":[{mask:U()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",xe,Ce]}],filter:[{filter:["","none",xe,Ce]}],blur:[{blur:te()}],brightness:[{brightness:[et,xe,Ce]}],contrast:[{contrast:[et,xe,Ce]}],"drop-shadow":[{"drop-shadow":["","none",f,nm,tm]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",et,xe,Ce]}],"hue-rotate":[{"hue-rotate":[et,xe,Ce]}],invert:[{invert:["",et,xe,Ce]}],saturate:[{saturate:[et,xe,Ce]}],sepia:[{sepia:["",et,xe,Ce]}],"backdrop-filter":[{"backdrop-filter":["","none",xe,Ce]}],"backdrop-blur":[{"backdrop-blur":te()}],"backdrop-brightness":[{"backdrop-brightness":[et,xe,Ce]}],"backdrop-contrast":[{"backdrop-contrast":[et,xe,Ce]}],"backdrop-grayscale":[{"backdrop-grayscale":["",et,xe,Ce]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[et,xe,Ce]}],"backdrop-invert":[{"backdrop-invert":["",et,xe,Ce]}],"backdrop-opacity":[{"backdrop-opacity":[et,xe,Ce]}],"backdrop-saturate":[{"backdrop-saturate":[et,xe,Ce]}],"backdrop-sepia":[{"backdrop-sepia":["",et,xe,Ce]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",xe,Ce]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[et,"initial",xe,Ce]}],ease:[{ease:["linear","initial",y,xe,Ce]}],delay:[{delay:[et,xe,Ce]}],animate:[{animate:["none",S,xe,Ce]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,xe,Ce]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:re()}],"rotate-x":[{"rotate-x":re()}],"rotate-y":[{"rotate-y":re()}],"rotate-z":[{"rotate-z":re()}],scale:[{scale:ne()}],"scale-x":[{"scale-x":ne()}],"scale-y":[{"scale-y":ne()}],"scale-z":[{"scale-z":ne()}],"scale-3d":["scale-3d"],skew:[{skew:he()}],"skew-x":[{"skew-x":he()}],"skew-y":[{"skew-y":he()}],transform:[{transform:[xe,Ce,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ue()}],"translate-x":[{"translate-x":ue()}],"translate-y":[{"translate-y":ue()}],"translate-z":[{"translate-z":ue()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe,Ce]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe,Ce]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[et,_u,oa,R0]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},vK=J9(mK);function ve(...e){return vK(mL(e))}const gK=i7,DL=m.forwardRef(({className:e,...t},n)=>d.jsx(cL,{ref:n,className:ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));DL.displayName=cL.displayName;const yK=af("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),LL=m.forwardRef(({className:e,variant:t,...n},r)=>d.jsx(lL,{ref:r,className:ve(yK({variant:t}),e),...n}));LL.displayName=lL.displayName;const SK=m.forwardRef(({className:e,...t},n)=>d.jsx(hL,{ref:n,className:ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));SK.displayName=hL.displayName;const zL=m.forwardRef(({className:e,...t},n)=>d.jsx(pL,{ref:n,className:ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:d.jsx(_r,{className:"h-4 w-4"})}));zL.displayName=pL.displayName;const FL=m.forwardRef(({className:e,...t},n)=>d.jsx(uL,{ref:n,className:ve("text-sm font-semibold",e),...t}));FL.displayName=uL.displayName;const $L=m.forwardRef(({className:e,...t},n)=>d.jsx(dL,{ref:n,className:ve("text-sm opacity-90",e),...t}));$L.displayName=dL.displayName;const BL=()=>{const{toasts:e}=ln();return d.jsxs(gK,{children:[e.map(function({id:t,title:n,description:r,action:i,...s}){return d.jsxs(LL,{...s,children:[d.jsxs("div",{className:"grid gap-1",children:[n&&d.jsx(FL,{children:n}),r&&d.jsx($L,{children:r})]}),i,d.jsx(zL,{})]},t)}),d.jsx(DL,{})]})},pt=m.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:ve("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));pt.displayName="Card";const xt=m.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:ve("flex flex-col space-y-1.5 p-6",e),...t}));xt.displayName="CardHeader";const At=m.forwardRef(({className:e,...t},n)=>d.jsx("h3",{ref:n,className:ve("text-2xl font-semibold leading-none tracking-tight",e),...t}));At.displayName="CardTitle";const Yr=m.forwardRef(({className:e,...t},n)=>d.jsx("p",{ref:n,className:ve("text-sm text-muted-foreground",e),...t}));Yr.displayName="CardDescription";const St=m.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:ve("p-6 pt-0",e),...t}));St.displayName="CardContent";const Rv=m.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:ve("flex items-center p-6 pt-0",e),...t}));Rv.displayName="CardFooter";const sE=af("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ee=m.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},s)=>{const a=r?zo:"button";return d.jsx(a,{className:ve(sE({variant:t,size:n,className:e})),ref:s,...i})});ee.displayName="Button";function wK(){const[e,t]=m.useState(null),[n,r]=m.useState(!1),[i,s]=m.useState("idle"),a=async()=>{r(!0),s("idle");try{const l=await(await fetch("/api/health")).json();t(JSON.stringify(l,null,2)),s("success")}catch(c){console.error("API test failed:",c),t(String(c)),s("error")}finally{r(!1)}},o=async()=>{r(!0),s("idle");try{const c=await fetch("/api/chatgpt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:"Hello, this is a test of the OpenAI API connection."})});if(!c.ok)throw new Error(`HTTP error! Status: ${c.status}`);const l=await c.json();t(l.response),s("success")}catch(c){console.error("OpenAI API test failed:",c),t(String(c)),s("error")}finally{r(!1)}};return d.jsxs("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-gray-50 p-4",children:[d.jsx(pt,{className:"w-full max-w-md mb-4",children:d.jsxs(St,{className:"pt-6",children:[d.jsxs("div",{className:"flex mb-4 gap-2",children:[d.jsx(LC,{className:"h-8 w-8 text-red-500"}),d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),d.jsx("p",{className:"text-sm text-gray-600",children:"The page you're looking for doesn't exist or has been moved."}),d.jsx("div",{className:"mt-4",children:d.jsx(vp,{href:"/",className:"text-blue-600 hover:underline text-sm",children:"Return to Home"})})]})}),d.jsx(pt,{className:"w-full max-w-md",children:d.jsxs(St,{className:"pt-6",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"API Connection Test"}),d.jsxs("div",{className:"flex gap-3 mb-4",children:[d.jsxs(ee,{onClick:a,disabled:n,className:"flex items-center gap-2",children:[d.jsx(f9,{className:"h-4 w-4"}),"Test Health API"]}),d.jsxs(ee,{onClick:o,disabled:n,variant:"secondary",className:"flex items-center gap-2",children:[d.jsx(y7,{className:"h-4 w-4"}),"Test OpenAI API"]})]}),n&&d.jsx("div",{className:"py-4 text-center text-gray-600",children:"Loading..."}),!n&&e&&d.jsxs("div",{className:"mt-2",children:[d.jsx("div",{className:`text-sm font-medium mb-1 ${i==="success"?"text-green-600":"text-red-600"}`,children:i==="success"?"Success!":"Error:"}),d.jsx("pre",{className:"bg-gray-100 p-3 rounded-md text-xs overflow-x-auto max-h-64 overflow-y-auto",children:e})]})]})})]})}var cf=e=>e.type==="checkbox",ka=e=>e instanceof Date,qn=e=>e==null;const VL=e=>typeof e=="object";var Gt=e=>!qn(e)&&!Array.isArray(e)&&VL(e)&&!ka(e),UL=e=>Gt(e)&&e.target?cf(e.target)?e.target.checked:e.target.value:e,CK=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,qL=(e,t)=>e.has(CK(t)),xK=e=>{const t=e.constructor&&e.constructor.prototype;return Gt(t)&&t.hasOwnProperty("isPrototypeOf")},oE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function nr(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(oE&&(e instanceof Blob||e instanceof FileList))&&(n||Gt(e)))if(t=n?[]:{},!n&&!xK(e))t=e;else for(const r in e)e.hasOwnProperty(r)&&(t[r]=nr(e[r]));else return e;return t}var zg=e=>Array.isArray(e)?e.filter(Boolean):[],Ut=e=>e===void 0,de=(e,t,n)=>{if(!t||!Gt(e))return n;const r=zg(t.split(/[,[\].]+?/)).reduce((i,s)=>qn(i)?i:i[s],e);return Ut(r)||r===e?Ut(e[t])?n:e[t]:r},Vr=e=>typeof e=="boolean",aE=e=>/^\w*$/.test(e),HL=e=>zg(e.replace(/["|']|\]/g,"").split(/\.|\[/)),vt=(e,t,n)=>{let r=-1;const i=aE(t)?[t]:HL(t),s=i.length,a=s-1;for(;++r<s;){const o=i[r];let c=n;if(r!==a){const l=e[o];c=Gt(l)||Array.isArray(l)?l:isNaN(+i[r+1])?{}:[]}if(o==="__proto__")return;e[o]=c,e=e[o]}return e};const _v={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},mi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},us={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},WL=q.createContext(null),Fg=()=>q.useContext(WL),bK=e=>{const{children:t,...n}=e;return q.createElement(WL.Provider,{value:n},t)};var KL=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const a=s;return t._proxyFormState[a]!==mi.all&&(t._proxyFormState[a]=!r||mi.all),n&&(n[a]=!0),e[a]}});return i},sr=e=>Gt(e)&&!Object.keys(e).length,GL=(e,t,n,r)=>{n(e);const{name:i,...s}=e;return sr(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(a=>t[a]===(!r||mi.all))},Kh=e=>Array.isArray(e)?e:[e],QL=(e,t,n)=>!e||!t||e===t||Kh(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r)));function cE(e){const t=q.useRef(e);t.current=e,q.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}function EK(e){const t=Fg(),{control:n=t.control,disabled:r,name:i,exact:s}=e||{},[a,o]=q.useState(n._formState),c=q.useRef(!0),l=q.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=q.useRef(i);return u.current=i,cE({disabled:r,next:h=>c.current&&QL(u.current,h.name,s)&&GL(h,l.current,n._updateFormState)&&o({...n._formState,...h}),subject:n._subjects.state}),q.useEffect(()=>(c.current=!0,l.current.isValid&&n._updateValid(!0),()=>{c.current=!1}),[n]),KL(a,n,l.current,!1)}var Ki=e=>typeof e=="string",JL=(e,t,n,r,i)=>Ki(e)?(r&&t.watch.add(e),de(n,e,i)):Array.isArray(e)?e.map(s=>(r&&t.watch.add(s),de(n,s))):(r&&(t.watchAll=!0),n);function PK(e){const t=Fg(),{control:n=t.control,name:r,defaultValue:i,disabled:s,exact:a}=e||{},o=q.useRef(r);o.current=r,cE({disabled:s,subject:n._subjects.values,next:u=>{QL(o.current,u.name,a)&&l(nr(JL(o.current,n._names,u.values||n._formValues,!1,i)))}});const[c,l]=q.useState(n._getWatch(r,i));return q.useEffect(()=>n._removeUnmounted()),c}function RK(e){const t=Fg(),{name:n,disabled:r,control:i=t.control,shouldUnregister:s}=e,a=qL(i._names.array,n),o=PK({control:i,name:n,defaultValue:de(i._formValues,n,de(i._defaultValues,n,e.defaultValue)),exact:!0}),c=EK({control:i,name:n,exact:!0}),l=q.useRef(i.register(n,{...e.rules,value:o,...Vr(e.disabled)?{disabled:e.disabled}:{}}));return q.useEffect(()=>{const u=i._options.shouldUnregister||s,h=(p,f)=>{const g=de(i._fields,p);g&&g._f&&(g._f.mount=f)};if(h(n,!0),u){const p=nr(de(i._options.defaultValues,n));vt(i._defaultValues,n,p),Ut(de(i._formValues,n))&&vt(i._formValues,n,p)}return()=>{(a?u&&!i._state.action:u)?i.unregister(n):h(n,!1)}},[n,i,a,s]),q.useEffect(()=>{de(i._fields,n)&&i._updateDisabledField({disabled:r,fields:i._fields,name:n,value:de(i._fields,n)._f.value})},[r,n,i]),{field:{name:n,value:o,...Vr(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:q.useCallback(u=>l.current.onChange({target:{value:UL(u),name:n},type:_v.CHANGE}),[n]),onBlur:q.useCallback(()=>l.current.onBlur({target:{value:de(i._formValues,n),name:n},type:_v.BLUR}),[n,i]),ref:q.useCallback(u=>{const h=de(i._fields,n);h&&u&&(h._f.ref={focus:()=>u.focus(),select:()=>u.select(),setCustomValidity:p=>u.setCustomValidity(p),reportValidity:()=>u.reportValidity()})},[i._fields,n])},formState:c,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!de(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!de(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!de(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!de(c.validatingFields,n)},error:{enumerable:!0,get:()=>de(c.errors,n)}})}}const _K=e=>e.render(RK(e));var YL=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},zR=e=>({isOnSubmit:!e||e===mi.onSubmit,isOnBlur:e===mi.onBlur,isOnChange:e===mi.onChange,isOnAll:e===mi.all,isOnTouch:e===mi.onTouched}),FR=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Gh=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const s=de(e,i);if(s){const{_f:a,...o}=s;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],i)&&!r)return!0;if(a.ref&&t(a.ref,a.name)&&!r)return!0;if(Gh(o,t))break}else if(Gt(o)&&Gh(o,t))break}}};var TK=(e,t,n)=>{const r=Kh(de(e,n));return vt(r,"root",t[n]),vt(e,n,r),e},lE=e=>e.type==="file",Rs=e=>typeof e=="function",Tv=e=>{if(!oE)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},$m=e=>Ki(e),uE=e=>e.type==="radio",Av=e=>e instanceof RegExp;const $R={value:!1,isValid:!1},BR={value:!0,isValid:!0};var ZL=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ut(e[0].attributes.value)?Ut(e[0].value)||e[0].value===""?BR:{value:e[0].value,isValid:!0}:BR:$R}return $R};const VR={isValid:!1,value:null};var XL=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,VR):VR;function UR(e,t,n="validate"){if($m(e)||Array.isArray(e)&&e.every($m)||Vr(e)&&!e)return{type:n,message:$m(e)?e:"",ref:t}}var bc=e=>Gt(e)&&!Av(e)?e:{value:e,message:""},qR=async(e,t,n,r,i)=>{const{ref:s,refs:a,required:o,maxLength:c,minLength:l,min:u,max:h,pattern:p,validate:f,name:g,valueAsNumber:v,mount:w,disabled:y}=e._f,S=de(t,g);if(!w||y)return{};const C=a?a[0]:s,x=O=>{r&&C.reportValidity&&(C.setCustomValidity(Vr(O)?"":O||""),C.reportValidity())},E={},P=uE(s),T=cf(s),_=P||T,k=(v||lE(s))&&Ut(s.value)&&Ut(S)||Tv(s)&&s.value===""||S===""||Array.isArray(S)&&!S.length,z=YL.bind(null,g,n,E),D=(O,M,b,A=us.maxLength,N=us.minLength)=>{const j=O?M:b;E[g]={type:O?A:N,message:j,ref:s,...z(O?A:N,j)}};if(i?!Array.isArray(S)||!S.length:o&&(!_&&(k||qn(S))||Vr(S)&&!S||T&&!ZL(a).isValid||P&&!XL(a).isValid)){const{value:O,message:M}=$m(o)?{value:!!o,message:o}:bc(o);if(O&&(E[g]={type:us.required,message:M,ref:C,...z(us.required,M)},!n))return x(M),E}if(!k&&(!qn(u)||!qn(h))){let O,M;const b=bc(h),A=bc(u);if(!qn(S)&&!isNaN(S)){const N=s.valueAsNumber||S&&+S;qn(b.value)||(O=N>b.value),qn(A.value)||(M=N<A.value)}else{const N=s.valueAsDate||new Date(S),j=$=>new Date(new Date().toDateString()+" "+$),R=s.type=="time",I=s.type=="week";Ki(b.value)&&S&&(O=R?j(S)>j(b.value):I?S>b.value:N>new Date(b.value)),Ki(A.value)&&S&&(M=R?j(S)<j(A.value):I?S<A.value:N<new Date(A.value))}if((O||M)&&(D(!!O,b.message,A.message,us.max,us.min),!n))return x(E[g].message),E}if((c||l)&&!k&&(Ki(S)||i&&Array.isArray(S))){const O=bc(c),M=bc(l),b=!qn(O.value)&&S.length>+O.value,A=!qn(M.value)&&S.length<+M.value;if((b||A)&&(D(b,O.message,M.message),!n))return x(E[g].message),E}if(p&&!k&&Ki(S)){const{value:O,message:M}=bc(p);if(Av(O)&&!S.match(O)&&(E[g]={type:us.pattern,message:M,ref:s,...z(us.pattern,M)},!n))return x(M),E}if(f){if(Rs(f)){const O=await f(S,t),M=UR(O,C);if(M&&(E[g]={...M,...z(us.validate,M.message)},!n))return x(M.message),E}else if(Gt(f)){let O={};for(const M in f){if(!sr(O)&&!n)break;const b=UR(await f[M](S,t),C,M);b&&(O={...b,...z(M,b.message)},x(b.message),n&&(E[g]=O))}if(!sr(O)&&(E[g]={ref:C,...O},!n))return E}}return x(!0),E};function AK(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Ut(e)?r++:e[t[r++]];return e}function NK(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ut(e[t]))return!1;return!0}function Xt(e,t){const n=Array.isArray(t)?t:aE(t)?[t]:HL(t),r=n.length===1?e:AK(e,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Gt(r)&&sr(r)||Array.isArray(r)&&NK(r))&&Xt(e,n.slice(0,-1)),e}var _0=()=>{let e=[];return{get observers(){return e},next:i=>{for(const s of e)s.next&&s.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(s=>s!==i)}}),unsubscribe:()=>{e=[]}}},qC=e=>qn(e)||!VL(e);function ao(e,t){if(qC(e)||qC(t))return e===t;if(ka(e)&&ka(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const s=e[i];if(!r.includes(i))return!1;if(i!=="ref"){const a=t[i];if(ka(s)&&ka(a)||Gt(s)&&Gt(a)||Array.isArray(s)&&Array.isArray(a)?!ao(s,a):s!==a)return!1}}return!0}var ez=e=>e.type==="select-multiple",IK=e=>uE(e)||cf(e),T0=e=>Tv(e)&&e.isConnected,tz=e=>{for(const t in e)if(Rs(e[t]))return!0;return!1};function Nv(e,t={}){const n=Array.isArray(e);if(Gt(e)||n)for(const r in e)Array.isArray(e[r])||Gt(e[r])&&!tz(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Nv(e[r],t[r])):qn(e[r])||(t[r]=!0);return t}function nz(e,t,n){const r=Array.isArray(e);if(Gt(e)||r)for(const i in e)Array.isArray(e[i])||Gt(e[i])&&!tz(e[i])?Ut(t)||qC(n[i])?n[i]=Array.isArray(e[i])?Nv(e[i],[]):{...Nv(e[i])}:nz(e[i],qn(t)?{}:t[i],n[i]):n[i]=!ao(e[i],t[i]);return n}var Tu=(e,t)=>nz(e,t,Nv(t)),rz=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Ut(e)?e:t?e===""?NaN:e&&+e:n&&Ki(e)?new Date(e):r?r(e):e;function A0(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return lE(t)?t.files:uE(t)?XL(e.refs).value:ez(t)?[...t.selectedOptions].map(({value:n})=>n):cf(t)?ZL(e.refs).value:rz(Ut(t.value)?e.ref.value:t.value,e)}var jK=(e,t,n,r)=>{const i={};for(const s of e){const a=de(t,s);a&&vt(i,s,a._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},Au=e=>Ut(e)?e:Av(e)?e.source:Gt(e)?Av(e.value)?e.value.source:e.value:e;const HR="AsyncFunction";var kK=e=>(!e||!e.validate)&&!!(Rs(e.validate)&&e.validate.constructor.name===HR||Gt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===HR)),MK=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function WR(e,t,n){const r=de(e,n);if(r||aE(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),a=de(t,s),o=de(e,s);if(a&&!Array.isArray(a)&&n!==s)return{name:n};if(o&&o.type)return{name:s,error:o};i.pop()}return{name:n}}var OK=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,DK=(e,t)=>!zg(de(e,t)).length&&Xt(e,t);const LK={mode:mi.onSubmit,reValidateMode:mi.onChange,shouldFocusError:!0};function zK(e={}){let t={...LK,...e},n={submitCount:0,isDirty:!1,isLoading:Rs(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},i=Gt(t.defaultValues)||Gt(t.values)?nr(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:nr(i),a={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,l=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:_0(),array:_0(),state:_0()},p=zR(t.mode),f=zR(t.reValidateMode),g=t.criteriaMode===mi.all,v=L=>K=>{clearTimeout(l),l=setTimeout(L,K)},w=async L=>{if(!e.disabled&&(u.isValid||L)){const K=t.resolver?sr((await _()).errors):await z(r,!0);K!==n.isValid&&h.state.next({isValid:K})}},y=(L,K)=>{!e.disabled&&(u.isValidating||u.validatingFields)&&((L||Array.from(o.mount)).forEach(F=>{F&&(K?vt(n.validatingFields,F,K):Xt(n.validatingFields,F))}),h.state.next({validatingFields:n.validatingFields,isValidating:!sr(n.validatingFields)}))},S=(L,K=[],F,Q,Z=!0,X=!0)=>{if(Q&&F&&!e.disabled){if(a.action=!0,X&&Array.isArray(de(r,L))){const se=F(de(r,L),Q.argA,Q.argB);Z&&vt(r,L,se)}if(X&&Array.isArray(de(n.errors,L))){const se=F(de(n.errors,L),Q.argA,Q.argB);Z&&vt(n.errors,L,se),DK(n.errors,L)}if(u.touchedFields&&X&&Array.isArray(de(n.touchedFields,L))){const se=F(de(n.touchedFields,L),Q.argA,Q.argB);Z&&vt(n.touchedFields,L,se)}u.dirtyFields&&(n.dirtyFields=Tu(i,s)),h.state.next({name:L,isDirty:O(L,K),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else vt(s,L,K)},C=(L,K)=>{vt(n.errors,L,K),h.state.next({errors:n.errors})},x=L=>{n.errors=L,h.state.next({errors:n.errors,isValid:!1})},E=(L,K,F,Q)=>{const Z=de(r,L);if(Z){const X=de(s,L,Ut(F)?de(i,L):F);Ut(X)||Q&&Q.defaultChecked||K?vt(s,L,K?X:A0(Z._f)):A(L,X),a.mount&&w()}},P=(L,K,F,Q,Z)=>{let X=!1,se=!1;const pe={name:L};if(!e.disabled){const Ne=!!(de(r,L)&&de(r,L)._f&&de(r,L)._f.disabled);if(!F||Q){u.isDirty&&(se=n.isDirty,n.isDirty=pe.isDirty=O(),X=se!==pe.isDirty);const Ze=Ne||ao(de(i,L),K);se=!!(!Ne&&de(n.dirtyFields,L)),Ze||Ne?Xt(n.dirtyFields,L):vt(n.dirtyFields,L,!0),pe.dirtyFields=n.dirtyFields,X=X||u.dirtyFields&&se!==!Ze}if(F){const Ze=de(n.touchedFields,L);Ze||(vt(n.touchedFields,L,F),pe.touchedFields=n.touchedFields,X=X||u.touchedFields&&Ze!==F)}X&&Z&&h.state.next(pe)}return X?pe:{}},T=(L,K,F,Q)=>{const Z=de(n.errors,L),X=u.isValid&&Vr(K)&&n.isValid!==K;if(e.delayError&&F?(c=v(()=>C(L,F)),c(e.delayError)):(clearTimeout(l),c=null,F?vt(n.errors,L,F):Xt(n.errors,L)),(F?!ao(Z,F):Z)||!sr(Q)||X){const se={...Q,...X&&Vr(K)?{isValid:K}:{},errors:n.errors,name:L};n={...n,...se},h.state.next(se)}},_=async L=>{y(L,!0);const K=await t.resolver(s,t.context,jK(L||o.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return y(L),K},k=async L=>{const{errors:K}=await _(L);if(L)for(const F of L){const Q=de(K,F);Q?vt(n.errors,F,Q):Xt(n.errors,F)}else n.errors=K;return K},z=async(L,K,F={valid:!0})=>{for(const Q in L){const Z=L[Q];if(Z){const{_f:X,...se}=Z;if(X){const pe=o.array.has(X.name),Ne=Z._f&&kK(Z._f);Ne&&u.validatingFields&&y([Q],!0);const Ze=await qR(Z,s,g,t.shouldUseNativeValidation&&!K,pe);if(Ne&&u.validatingFields&&y([Q]),Ze[X.name]&&(F.valid=!1,K))break;!K&&(de(Ze,X.name)?pe?TK(n.errors,Ze,X.name):vt(n.errors,X.name,Ze[X.name]):Xt(n.errors,X.name))}!sr(se)&&await z(se,K,F)}}return F.valid},D=()=>{for(const L of o.unMount){const K=de(r,L);K&&(K._f.refs?K._f.refs.every(F=>!T0(F)):!T0(K._f.ref))&&V(L)}o.unMount=new Set},O=(L,K)=>!e.disabled&&(L&&K&&vt(s,L,K),!ao(U(),i)),M=(L,K,F)=>JL(L,o,{...a.mount?s:Ut(K)?i:Ki(L)?{[L]:K}:K},F,K),b=L=>zg(de(a.mount?s:i,L,e.shouldUnregister?de(i,L,[]):[])),A=(L,K,F={})=>{const Q=de(r,L);let Z=K;if(Q){const X=Q._f;X&&(!X.disabled&&vt(s,L,rz(K,X)),Z=Tv(X.ref)&&qn(K)?"":K,ez(X.ref)?[...X.ref.options].forEach(se=>se.selected=Z.includes(se.value)):X.refs?cf(X.ref)?X.refs.length>1?X.refs.forEach(se=>(!se.defaultChecked||!se.disabled)&&(se.checked=Array.isArray(Z)?!!Z.find(pe=>pe===se.value):Z===se.value)):X.refs[0]&&(X.refs[0].checked=!!Z):X.refs.forEach(se=>se.checked=se.value===Z):lE(X.ref)?X.ref.value="":(X.ref.value=Z,X.ref.type||h.values.next({name:L,values:{...s}})))}(F.shouldDirty||F.shouldTouch)&&P(L,Z,F.shouldTouch,F.shouldDirty,!0),F.shouldValidate&&$(L)},N=(L,K,F)=>{for(const Q in K){const Z=K[Q],X=`${L}.${Q}`,se=de(r,X);(o.array.has(L)||Gt(Z)||se&&!se._f)&&!ka(Z)?N(X,Z,F):A(X,Z,F)}},j=(L,K,F={})=>{const Q=de(r,L),Z=o.array.has(L),X=nr(K);vt(s,L,X),Z?(h.array.next({name:L,values:{...s}}),(u.isDirty||u.dirtyFields)&&F.shouldDirty&&h.state.next({name:L,dirtyFields:Tu(i,s),isDirty:O(L,X)})):Q&&!Q._f&&!qn(X)?N(L,X,F):A(L,X,F),FR(L,o)&&h.state.next({...n}),h.values.next({name:a.mount?L:void 0,values:{...s}})},R=async L=>{a.mount=!0;const K=L.target;let F=K.name,Q=!0;const Z=de(r,F),X=()=>K.type?A0(Z._f):UL(L),se=pe=>{Q=Number.isNaN(pe)||ka(pe)&&isNaN(pe.getTime())||ao(pe,de(s,F,pe))};if(Z){let pe,Ne;const Ze=X(),Ht=L.type===_v.BLUR||L.type===_v.FOCUS_OUT,zr=!MK(Z._f)&&!t.resolver&&!de(n.errors,F)&&!Z._f.deps||OK(Ht,de(n.touchedFields,F),n.isSubmitted,f,p),gr=FR(F,o,Ht);vt(s,F,Ze),Ht?(Z._f.onBlur&&Z._f.onBlur(L),c&&c(0)):Z._f.onChange&&Z._f.onChange(L);const bt=P(F,Ze,Ht,!1),ft=!sr(bt)||gr;if(!Ht&&h.values.next({name:F,type:L.type,values:{...s}}),zr)return u.isValid&&(e.mode==="onBlur"?Ht&&w():w()),ft&&h.state.next({name:F,...gr?{}:bt});if(!Ht&&gr&&h.state.next({...n}),t.resolver){const{errors:Zn}=await _([F]);if(se(Ze),Q){const Xn=WR(n.errors,r,F),er=WR(Zn,r,Xn.name||F);pe=er.error,F=er.name,Ne=sr(Zn)}}else y([F],!0),pe=(await qR(Z,s,g,t.shouldUseNativeValidation))[F],y([F]),se(Ze),Q&&(pe?Ne=!1:u.isValid&&(Ne=await z(r,!0)));Q&&(Z._f.deps&&$(Z._f.deps),T(F,Ne,pe,bt))}},I=(L,K)=>{if(de(n.errors,K)&&L.focus)return L.focus(),1},$=async(L,K={})=>{let F,Q;const Z=Kh(L);if(t.resolver){const X=await k(Ut(L)?L:Z);F=sr(X),Q=L?!Z.some(se=>de(X,se)):F}else L?(Q=(await Promise.all(Z.map(async X=>{const se=de(r,X);return await z(se&&se._f?{[X]:se}:se)}))).every(Boolean),!(!Q&&!n.isValid)&&w()):Q=F=await z(r);return h.state.next({...!Ki(L)||u.isValid&&F!==n.isValid?{}:{name:L},...t.resolver||!L?{isValid:F}:{},errors:n.errors}),K.shouldFocus&&!Q&&Gh(r,I,L?Z:o.mount),Q},U=L=>{const K={...a.mount?s:i};return Ut(L)?K:Ki(L)?de(K,L):L.map(F=>de(K,F))},G=(L,K)=>({invalid:!!de((K||n).errors,L),isDirty:!!de((K||n).dirtyFields,L),error:de((K||n).errors,L),isValidating:!!de(n.validatingFields,L),isTouched:!!de((K||n).touchedFields,L)}),Y=L=>{L&&Kh(L).forEach(K=>Xt(n.errors,K)),h.state.next({errors:L?n.errors:{}})},J=(L,K,F)=>{const Q=(de(r,L,{_f:{}})._f||{}).ref,Z=de(n.errors,L)||{},{ref:X,message:se,type:pe,...Ne}=Z;vt(n.errors,L,{...Ne,...K,ref:Q}),h.state.next({name:L,errors:n.errors,isValid:!1}),F&&F.shouldFocus&&Q&&Q.focus&&Q.focus()},oe=(L,K)=>Rs(L)?h.values.subscribe({next:F=>L(M(void 0,K),F)}):M(L,K,!0),V=(L,K={})=>{for(const F of L?Kh(L):o.mount)o.mount.delete(F),o.array.delete(F),K.keepValue||(Xt(r,F),Xt(s,F)),!K.keepError&&Xt(n.errors,F),!K.keepDirty&&Xt(n.dirtyFields,F),!K.keepTouched&&Xt(n.touchedFields,F),!K.keepIsValidating&&Xt(n.validatingFields,F),!t.shouldUnregister&&!K.keepDefaultValue&&Xt(i,F);h.values.next({values:{...s}}),h.state.next({...n,...K.keepDirty?{isDirty:O()}:{}}),!K.keepIsValid&&w()},H=({disabled:L,name:K,field:F,fields:Q,value:Z})=>{if(Vr(L)&&a.mount||L){const X=L?void 0:Ut(Z)?A0(F?F._f:de(Q,K)._f):Z;vt(s,K,X),P(K,X,!1,!1,!0)}},te=(L,K={})=>{let F=de(r,L);const Q=Vr(K.disabled)||Vr(e.disabled);return vt(r,L,{...F||{},_f:{...F&&F._f?F._f:{ref:{name:L}},name:L,mount:!0,...K}}),o.mount.add(L),F?H({field:F,disabled:Vr(K.disabled)?K.disabled:e.disabled,name:L,value:K.value}):E(L,!0,K.value),{...Q?{disabled:K.disabled||e.disabled}:{},...t.progressive?{required:!!K.required,min:Au(K.min),max:Au(K.max),minLength:Au(K.minLength),maxLength:Au(K.maxLength),pattern:Au(K.pattern)}:{},name:L,onChange:R,onBlur:R,ref:Z=>{if(Z){te(L,K),F=de(r,L);const X=Ut(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,se=IK(X),pe=F._f.refs||[];if(se?pe.find(Ne=>Ne===X):X===F._f.ref)return;vt(r,L,{_f:{...F._f,...se?{refs:[...pe.filter(T0),X,...Array.isArray(de(i,L))?[{}]:[]],ref:{type:X.type,name:L}}:{ref:X}}}),E(L,!1,void 0,X)}else F=de(r,L,{}),F._f&&(F._f.mount=!1),(t.shouldUnregister||K.shouldUnregister)&&!(qL(o.array,L)&&a.action)&&o.unMount.add(L)}}},re=()=>t.shouldFocusError&&Gh(r,I,o.mount),ne=L=>{Vr(L)&&(h.state.next({disabled:L}),Gh(r,(K,F)=>{const Q=de(r,F);Q&&(K.disabled=Q._f.disabled||L,Array.isArray(Q._f.refs)&&Q._f.refs.forEach(Z=>{Z.disabled=Q._f.disabled||L}))},0,!1))},he=(L,K)=>async F=>{let Q;F&&(F.preventDefault&&F.preventDefault(),F.persist&&F.persist());let Z=nr(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:X,values:se}=await _();n.errors=X,Z=se}else await z(r);if(Xt(n.errors,"root"),sr(n.errors)){h.state.next({errors:{}});try{await L(Z,F)}catch(X){Q=X}}else K&&await K({...n.errors},F),re(),setTimeout(re);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:sr(n.errors)&&!Q,submitCount:n.submitCount+1,errors:n.errors}),Q)throw Q},ue=(L,K={})=>{de(r,L)&&(Ut(K.defaultValue)?j(L,nr(de(i,L))):(j(L,K.defaultValue),vt(i,L,nr(K.defaultValue))),K.keepTouched||Xt(n.touchedFields,L),K.keepDirty||(Xt(n.dirtyFields,L),n.isDirty=K.defaultValue?O(L,nr(de(i,L))):O()),K.keepError||(Xt(n.errors,L),u.isValid&&w()),h.state.next({...n}))},_e=(L,K={})=>{const F=L?nr(L):i,Q=nr(F),Z=sr(L),X=Z?i:Q;if(K.keepDefaultValues||(i=F),!K.keepValues){if(K.keepDirtyValues){const se=new Set([...o.mount,...Object.keys(Tu(i,s))]);for(const pe of Array.from(se))de(n.dirtyFields,pe)?vt(X,pe,de(s,pe)):j(pe,de(X,pe))}else{if(oE&&Ut(L))for(const se of o.mount){const pe=de(r,se);if(pe&&pe._f){const Ne=Array.isArray(pe._f.refs)?pe._f.refs[0]:pe._f.ref;if(Tv(Ne)){const Ze=Ne.closest("form");if(Ze){Ze.reset();break}}}}r={}}s=e.shouldUnregister?K.keepDefaultValues?nr(i):{}:nr(X),h.array.next({values:{...X}}),h.values.next({values:{...X}})}o={mount:K.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!K.keepIsValid||!!K.keepDirtyValues,a.watch=!!e.shouldUnregister,h.state.next({submitCount:K.keepSubmitCount?n.submitCount:0,isDirty:Z?!1:K.keepDirty?n.isDirty:!!(K.keepDefaultValues&&!ao(L,i)),isSubmitted:K.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Z?{}:K.keepDirtyValues?K.keepDefaultValues&&s?Tu(i,s):n.dirtyFields:K.keepDefaultValues&&L?Tu(i,L):K.keepDirty?n.dirtyFields:{},touchedFields:K.keepTouched?n.touchedFields:{},errors:K.keepErrors?n.errors:{},isSubmitSuccessful:K.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},je=(L,K)=>_e(Rs(L)?L(s):L,K);return{control:{register:te,unregister:V,getFieldState:G,handleSubmit:he,setError:J,_executeSchema:_,_getWatch:M,_getDirty:O,_updateValid:w,_removeUnmounted:D,_updateFieldArray:S,_updateDisabledField:H,_getFieldArray:b,_reset:_e,_resetDefaultValues:()=>Rs(t.defaultValues)&&t.defaultValues().then(L=>{je(L,t.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:L=>{n={...n,...L}},_disableForm:ne,_subjects:h,_proxyFormState:u,_setErrors:x,get _fields(){return r},get _formValues(){return s},get _state(){return a},set _state(L){a=L},get _defaultValues(){return i},get _names(){return o},set _names(L){o=L},get _formState(){return n},set _formState(L){n=L},get _options(){return t},set _options(L){t={...t,...L}}},trigger:$,register:te,handleSubmit:he,watch:oe,setValue:j,getValues:U,reset:je,resetField:ue,clearErrors:Y,unregister:V,setError:J,setFocus:(L,K={})=>{const F=de(r,L),Q=F&&F._f;if(Q){const Z=Q.refs?Q.refs[0]:Q.ref;Z.focus&&(Z.focus(),K.shouldSelect&&Z.select())}},getFieldState:G}}function FK(e={}){const t=q.useRef(),n=q.useRef(),[r,i]=q.useState({isDirty:!1,isValidating:!1,isLoading:Rs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Rs(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...zK(e),formState:r});const s=t.current.control;return s._options=e,cE({subject:s._subjects.state,next:a=>{GL(a,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),q.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),q.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==r.isDirty&&s._subjects.state.next({isDirty:a})}},[s,r.isDirty]),q.useEffect(()=>{e.values&&!ao(e.values,n.current)?(s._reset(e.values,s._options.resetOptions),n.current=e.values,i(a=>({...a}))):s._resetDefaultValues()},[e.values,s]),q.useEffect(()=>{e.errors&&s._setErrors(e.errors)},[e.errors,s]),q.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),q.useEffect(()=>{e.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[e.shouldUnregister,s]),q.useEffect(()=>{t.current&&(t.current.watch=t.current.watch.bind({}))},[r]),t.current.formState=KL(r,s),t.current}const KR=(e,t,n)=>{if(e&&"reportValidity"in e){const r=de(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},iz=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?KR(r.ref,n,e):r.refs&&r.refs.forEach(i=>KR(i,n,e))}},$K=(e,t)=>{t.shouldUseNativeValidation&&iz(e,t);const n={};for(const r in e){const i=de(t.fields,r),s=Object.assign(e[r]||{},{ref:i&&i.ref});if(BK(t.names||Object.keys(e),r)){const a=Object.assign({},de(n,r));vt(a,"root",s),vt(n,r,a)}else vt(n,r,s)}return n},BK=(e,t)=>e.some(n=>n.startsWith(t+"."));var VK=function(e,t){for(var n={};e.length;){var r=e[0],i=r.code,s=r.message,a=r.path.join(".");if(!n[a])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[a]={message:o.message,type:o.code}}else n[a]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var c=n[a].types,l=c&&c[r.code];n[a]=YL(a,t,n,i,l?[].concat(l,r.message):r.message)}e.shift()}return n},UK=function(e,t,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(a,o){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(l){return s.shouldUseNativeValidation&&iz({},s),{errors:{},values:n.raw?r:l}})}catch(l){return o(l)}return c&&c.then?c.then(void 0,o):c}(0,function(a){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(a))return{values:{},errors:$K(VK(a.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}}};const ie=Symbol.for("drizzle:entityKind");function Sr(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,ie))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(ie in n&&n[ie]===t[ie])return!0;n=Object.getPrototypeOf(n)}return!1}var SI;SI=ie;class $g{constructor(t,n){W(this,"name");W(this,"keyAsName");W(this,"primary");W(this,"notNull");W(this,"default");W(this,"defaultFn");W(this,"onUpdateFn");W(this,"hasDefault");W(this,"isUnique");W(this,"uniqueName");W(this,"uniqueType");W(this,"dataType");W(this,"columnType");W(this,"enumValues");W(this,"generated");W(this,"generatedIdentity");W(this,"config");this.table=t,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}W($g,SI,"Column");var wI;wI=ie;class sz{constructor(t,n,r){W(this,"config");W(this,"$default",this.$defaultFn);W(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}W(sz,wI,"ColumnBuilder");const il=Symbol.for("drizzle:Name");var CI;CI=ie;class oz{constructor(t,n){W(this,"reference");W(this,"_onUpdate","no action");W(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:i,foreignColumns:s}=t();return{name:r,columns:i,foreignTable:s[0].table,foreignColumns:s}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new az(t,this)}}W(oz,CI,"PgForeignKeyBuilder");var xI;xI=ie;class az{constructor(t,n){W(this,"reference");W(this,"onUpdate");W(this,"onDelete");this.table=t,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:t,columns:n,foreignColumns:r}=this.reference(),i=n.map(o=>o.name),s=r.map(o=>o.name),a=[this.table[il],...i,r[0].table[il],...s];return t??`${a.join("_")}_fk`}}W(az,xI,"PgForeignKey");function qK(e,...t){return e(...t)}function HK(e,t){return`${e[il]}_${t.join("_")}_unique`}function GR(e,t,n){for(let r=t;r<e.length;r++){const i=e[r];if(i==="\\"){r++;continue}if(i==='"')return[e.slice(t,r).replace(/\\/g,""),r+1];if(!n&&(i===","||i==="}"))return[e.slice(t,r).replace(/\\/g,""),r]}return[e.slice(t).replace(/\\/g,""),e.length]}function cz(e,t=0){const n=[];let r=t,i=!1;for(;r<e.length;){const s=e[r];if(s===","){(i||r===t)&&n.push(""),i=!0,r++;continue}if(i=!1,s==="\\"){r+=2;continue}if(s==='"'){const[c,l]=GR(e,r+1,!0);n.push(c),r=l;continue}if(s==="}")return[n,r+1];if(s==="{"){const[c,l]=cz(e,r+1);n.push(c),r=l;continue}const[a,o]=GR(e,r,!1);n.push(a),r=o}return[n,r]}function WK(e){const[t]=cz(e,1);return t}function lz(e){return`{${e.map(t=>Array.isArray(t)?lz(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var bI,EI;class ut extends(EI=sz,bI=ie,EI){constructor(){super(...arguments);W(this,"foreignKeyConfigs",[])}array(n){return new dz(this.config.name,this,n)}references(n,r={}){return this.foreignKeyConfigs.push({ref:n,actions:r}),this}unique(n,r){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,r){return this.foreignKeyConfigs.map(({ref:i,actions:s})=>qK((a,o)=>{const c=new oz(()=>{const l=a();return{columns:[n],foreignColumns:[l]}});return o.onUpdate&&c.onUpdate(o.onUpdate),o.onDelete&&c.onDelete(o.onDelete),c.build(r)},i,s))}buildExtraConfigColumn(n){return new uz(n,this.config)}}W(ut,bI,"PgColumnBuilder");var PI,RI;class Ke extends(RI=$g,PI=ie,RI){constructor(t,n){n.uniqueName||(n.uniqueName=HK(t,[n.name])),super(t,n),this.table=t}}W(Ke,PI,"PgColumn");var _I,TI;class uz extends(TI=Ke,_I=ie,TI){constructor(){super(...arguments);W(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});W(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}W(uz,_I,"ExtraConfigColumn");var AI,NI;class dz extends(NI=ut,AI=ie,NI){constructor(t,n,r){super(t,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(t){const n=this.config.baseBuilder.build(t);return new HC(t,this.config,n)}}W(dz,AI,"PgArrayBuilder");var II,jI;const vg=class vg extends(jI=Ke,II=ie,jI){constructor(n,r,i,s){super(n,r);W(this,"size");this.baseColumn=i,this.range=s,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=WK(n)),n.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(n,r=!1){const i=n.map(s=>s===null?null:Sr(this.baseColumn,vg)?this.baseColumn.mapToDriverValue(s,!0):this.baseColumn.mapToDriverValue(s));return r?i:lz(i)}};W(vg,II,"PgArray");let HC=vg;const QR=Symbol.for("drizzle:isPgEnum");function KK(e){return!!e&&typeof e=="function"&&QR in e&&e[QR]===!0}var kI;kI=ie;class dE{constructor(t,n,r,i=!1){this._={brand:"Subquery",sql:t,selectedFields:n,alias:r,isWith:i}}}W(dE,kI,"Subquery");const GK={startActiveSpan(e,t){return t()}},Qh=Symbol.for("drizzle:ViewBaseConfig"),N0=Symbol.for("drizzle:Schema"),JR=Symbol.for("drizzle:Columns"),YR=Symbol.for("drizzle:ExtraConfigColumns"),I0=Symbol.for("drizzle:OriginalName"),j0=Symbol.for("drizzle:BaseName"),Iv=Symbol.for("drizzle:IsAlias"),ZR=Symbol.for("drizzle:ExtraConfigBuilder"),QK=Symbol.for("drizzle:IsDrizzleTable");var MI,OI,DI,LI,zI,FI,$I,BI,VI,UI,bm;let Hr=(UI=ie,VI=il,BI=I0,$I=N0,FI=JR,zI=YR,LI=j0,DI=Iv,OI=QK,MI=ZR,bm=class{constructor(t,n,r){W(this,VI);W(this,BI);W(this,$I);W(this,FI);W(this,zI);W(this,LI);W(this,DI,!1);W(this,OI,!0);W(this,MI);this[il]=this[I0]=t,this[N0]=n,this[j0]=r}},W(bm,UI,"Table"),W(bm,"Symbol",{Name:il,Schema:N0,OriginalName:I0,Columns:JR,ExtraConfigColumns:YR,BaseName:j0,IsAlias:Iv,ExtraConfigBuilder:ZR}),bm);function JK(e){return e!=null&&typeof e.getSQL=="function"}function YK(e){var n;const t={sql:"",params:[]};for(const r of e)t.sql+=r.sql,t.params.push(...r.params),(n=r.typings)!=null&&n.length&&(t.typings||(t.typings=[]),t.typings.push(...r.typings));return t}var qI;qI=ie;class Br{constructor(t){W(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new gn([this])}}W(Br,qI,"StringChunk");var HI;HI=ie;const Aa=class Aa{constructor(t){W(this,"decoder",hz);W(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return GK.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,t);return n==null||n.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(t,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:s,escapeParam:a,prepareTyping:o,inlineParams:c,paramStartIndex:l}=r;return YK(t.map(u=>{var h;if(Sr(u,Br))return{sql:u.value.join(""),params:[]};if(Sr(u,jv))return{sql:s(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const p=[new Br("(")];for(const[f,g]of u.entries())p.push(g),f<u.length-1&&p.push(new Br(", "));return p.push(new Br(")")),this.buildQueryFromSourceParams(p,r)}if(Sr(u,Aa))return this.buildQueryFromSourceParams(u.queryChunks,{...r,inlineParams:c||u.shouldInlineParams});if(Sr(u,Hr)){const p=u[Hr.Symbol.Schema],f=u[Hr.Symbol.Name];return{sql:p===void 0||u[Iv]?s(f):s(p)+"."+s(f),params:[]}}if(Sr(u,$g)){const p=i.getColumnCasing(u);if(n.invokeSource==="indexes")return{sql:s(p),params:[]};const f=u.table[Hr.Symbol.Schema];return{sql:u.table[Iv]||f===void 0?s(u.table[Hr.Symbol.Name])+"."+s(p):s(f)+"."+s(u.table[Hr.Symbol.Name])+"."+s(p),params:[]}}if(Sr(u,fz)){const p=u[Qh].schema,f=u[Qh].name;return{sql:p===void 0||u[Qh].isAlias?s(f):s(p)+"."+s(f),params:[]}}if(Sr(u,hE)){if(Sr(u.value,kv))return{sql:a(l.value++,u),params:[u],typings:["none"]};const p=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(Sr(p,Aa))return this.buildQueryFromSourceParams([p],r);if(c)return{sql:this.mapInlineParam(p,r),params:[]};let f=["none"];return o&&(f=[o(u.encoder)]),{sql:a(l.value++,p),params:[p],typings:f}}return Sr(u,kv)?{sql:a(l.value++,u),params:[u],typings:["none"]}:Sr(u,Aa.Aliased)&&u.fieldAlias!==void 0?{sql:s(u.fieldAlias),params:[]}:Sr(u,dE)?u._.isWith?{sql:s(u._.alias),params:[]}:this.buildQueryFromSourceParams([new Br("("),u._.sql,new Br(") "),new jv(u._.alias)],r):KK(u)?u.schema?{sql:s(u.schema)+"."+s(u.enumName),params:[]}:{sql:s(u.enumName),params:[]}:JK(u)?(h=u.shouldOmitSQLParens)!=null&&h.call(u)?this.buildQueryFromSourceParams([u.getSQL()],r):this.buildQueryFromSourceParams([new Br("("),u.getSQL(),new Br(")")],r):c?{sql:this.mapInlineParam(u,r),params:[]}:{sql:a(l.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(t,{escapeString:n}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return n(t);if(typeof t=="object"){const r=t.toString();return n(r==="[object Object]"?JSON.stringify(t):r)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new Aa.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};W(Aa,HI,"SQL");let gn=Aa;var WI;WI=ie;class jv{constructor(t){W(this,"brand");this.value=t}getSQL(){return new gn([this])}}W(jv,WI,"Name");const hz={mapFromDriverValue:e=>e},pz={mapToDriverValue:e=>e};({...hz,...pz});var KI;KI=ie;class hE{constructor(t,n=pz){W(this,"brand");this.value=t,this.encoder=n}getSQL(){return new gn([this])}}W(hE,KI,"Param");function Ei(e,...t){const n=[];(t.length>0||e.length>0&&e[0]!=="")&&n.push(new Br(e[0]));for(const[r,i]of t.entries())n.push(i,new Br(e[r+1]));return new gn(n)}(e=>{function t(){return new gn([])}e.empty=t;function n(c){return new gn(c)}e.fromList=n;function r(c){return new gn([new Br(c)])}e.raw=r;function i(c,l){const u=[];for(const[h,p]of c.entries())h>0&&l!==void 0&&u.push(l),u.push(p);return new gn(u)}e.join=i;function s(c){return new jv(c)}e.identifier=s;function a(c){return new kv(c)}e.placeholder=a;function o(c,l){return new hE(c,l)}e.param=o})(Ei||(Ei={}));(e=>{var n;n=ie;const r=class r{constructor(s,a){W(this,"isSelectionField",!1);this.sql=s,this.fieldAlias=a}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};W(r,n,"SQL.Aliased");let t=r;e.Aliased=t})(gn||(gn={}));var GI;GI=ie;class kv{constructor(t){this.name=t}getSQL(){return new gn([this])}}W(kv,GI,"Placeholder");const ZK=Symbol.for("drizzle:IsDrizzleView");var QI,JI,YI;YI=ie,JI=Qh,QI=ZK;class fz{constructor({name:t,schema:n,selectedFields:r,query:i}){W(this,JI);W(this,QI,!0);this[Qh]={name:t,originalName:t,schema:n,selectedFields:r,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new gn([this])}}W(fz,YI,"View");$g.prototype.getSQL=function(){return new gn([this])};Hr.prototype.getSQL=function(){return new gn([this])};dE.prototype.getSQL=function(){return new gn([this])};function un(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}var ZI,XI;class lf extends(XI=ut,ZI=ie,XI){generatedAlwaysAsIdentity(t){if(t){const{name:n,...r}=t;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:n,...r}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}W(lf,ZI,"PgIntColumnBaseBuilder");var ej,tj;class mz extends(tj=lf,ej=ie,tj){constructor(t){super(t,"number","PgBigInt53")}build(t){return new vz(t,this.config)}}W(mz,ej,"PgBigInt53Builder");var nj,rj;class vz extends(rj=Ke,nj=ie,rj){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}W(vz,nj,"PgBigInt53");var ij,sj;class gz extends(sj=lf,ij=ie,sj){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new yz(t,this.config)}}W(gz,ij,"PgBigInt64Builder");var oj,aj;class yz extends(aj=Ke,oj=ie,aj){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}W(yz,oj,"PgBigInt64");function XK(e,t){const{name:n,config:r}=un(e,t);return r.mode==="number"?new mz(n):new gz(n)}var cj,lj;class Sz extends(lj=ut,cj=ie,lj){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new wz(t,this.config)}}W(Sz,cj,"PgBigSerial53Builder");var uj,dj;class wz extends(dj=Ke,uj=ie,dj){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}W(wz,uj,"PgBigSerial53");var hj,pj;class Cz extends(pj=ut,hj=ie,pj){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new xz(t,this.config)}}W(Cz,hj,"PgBigSerial64Builder");var fj,mj;class xz extends(mj=Ke,fj=ie,mj){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}W(xz,fj,"PgBigSerial64");function eG(e,t){const{name:n,config:r}=un(e,t);return r.mode==="number"?new Sz(n):new Cz(n)}var vj,gj;class bz extends(gj=ut,vj=ie,gj){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new Ez(t,this.config)}}W(bz,vj,"PgBooleanBuilder");var yj,Sj;class Ez extends(Sj=Ke,yj=ie,Sj){getSQLType(){return"boolean"}}W(Ez,yj,"PgBoolean");function Pz(e){return new bz(e??"")}var wj,Cj;class Rz extends(Cj=ut,wj=ie,Cj){constructor(t,n){super(t,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new _z(t,this.config)}}W(Rz,wj,"PgCharBuilder");var xj,bj;class _z extends(bj=Ke,xj=ie,bj){constructor(){super(...arguments);W(this,"length",this.config.length);W(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}W(_z,xj,"PgChar");function tG(e,t={}){const{name:n,config:r}=un(e,t);return new Rz(n,r)}var Ej,Pj;class Tz extends(Pj=ut,Ej=ie,Pj){constructor(t){super(t,"string","PgCidr")}build(t){return new Az(t,this.config)}}W(Tz,Ej,"PgCidrBuilder");var Rj,_j;class Az extends(_j=Ke,Rj=ie,_j){getSQLType(){return"cidr"}}W(Az,Rj,"PgCidr");function nG(e){return new Tz(e??"")}var Tj,Aj;class Nz extends(Aj=ut,Tj=ie,Aj){constructor(t,n,r){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(t){return new Iz(t,this.config)}}W(Nz,Tj,"PgCustomColumnBuilder");var Nj,Ij;class Iz extends(Ij=Ke,Nj=ie,Ij){constructor(n,r){super(n,r);W(this,"sqlName");W(this,"mapTo");W(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}W(Iz,Nj,"PgCustomColumn");function rG(e){return(t,n)=>{const{name:r,config:i}=un(t,n);return new Nz(r,i,e)}}var jj,kj;class su extends(kj=ut,jj=ie,kj){defaultNow(){return this.default(Ei`now()`)}}W(su,jj,"PgDateColumnBaseBuilder");var Mj,Oj;class jz extends(Oj=su,Mj=ie,Oj){constructor(t){super(t,"date","PgDate")}build(t){return new kz(t,this.config)}}W(jz,Mj,"PgDateBuilder");var Dj,Lj;class kz extends(Lj=Ke,Dj=ie,Lj){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}W(kz,Dj,"PgDate");var zj,Fj;class Mz extends(Fj=su,zj=ie,Fj){constructor(t){super(t,"string","PgDateString")}build(t){return new Oz(t,this.config)}}W(Mz,zj,"PgDateStringBuilder");var $j,Bj;class Oz extends(Bj=Ke,$j=ie,Bj){getSQLType(){return"date"}}W(Oz,$j,"PgDateString");function iG(e,t){const{name:n,config:r}=un(e,t);return(r==null?void 0:r.mode)==="date"?new jz(n):new Mz(n)}var Vj,Uj;class Dz extends(Uj=ut,Vj=ie,Uj){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new Lz(t,this.config)}}W(Dz,Vj,"PgDoublePrecisionBuilder");var qj,Hj;class Lz extends(Hj=Ke,qj=ie,Hj){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}W(Lz,qj,"PgDoublePrecision");function sG(e){return new Dz(e??"")}var Wj,Kj;class zz extends(Kj=ut,Wj=ie,Kj){constructor(t){super(t,"string","PgInet")}build(t){return new Fz(t,this.config)}}W(zz,Wj,"PgInetBuilder");var Gj,Qj;class Fz extends(Qj=Ke,Gj=ie,Qj){getSQLType(){return"inet"}}W(Fz,Gj,"PgInet");function oG(e){return new zz(e??"")}var Jj,Yj;class $z extends(Yj=lf,Jj=ie,Yj){constructor(t){super(t,"number","PgInteger")}build(t){return new Bz(t,this.config)}}W($z,Jj,"PgIntegerBuilder");var Zj,Xj;class Bz extends(Xj=Ke,Zj=ie,Xj){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}W(Bz,Zj,"PgInteger");function Vz(e){return new $z(e??"")}var ek,tk;class Uz extends(tk=ut,ek=ie,tk){constructor(t,n){super(t,"string","PgInterval"),this.config.intervalConfig=n}build(t){return new qz(t,this.config)}}W(Uz,ek,"PgIntervalBuilder");var nk,rk;class qz extends(rk=Ke,nk=ie,rk){constructor(){super(...arguments);W(this,"fields",this.config.intervalConfig.fields);W(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${n}${r}`}}W(qz,nk,"PgInterval");function aG(e,t={}){const{name:n,config:r}=un(e,t);return new Uz(n,r)}var ik,sk;class Hz extends(sk=ut,ik=ie,sk){constructor(t){super(t,"json","PgJson")}build(t){return new Wz(t,this.config)}}W(Hz,ik,"PgJsonBuilder");var ok,ak;class Wz extends(ak=Ke,ok=ie,ak){constructor(t,n){super(t,n)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}W(Wz,ok,"PgJson");function cG(e){return new Hz(e??"")}var ck,lk;class Kz extends(lk=ut,ck=ie,lk){constructor(t){super(t,"json","PgJsonb")}build(t){return new Gz(t,this.config)}}W(Kz,ck,"PgJsonbBuilder");var uk,dk;class Gz extends(dk=Ke,uk=ie,dk){constructor(t,n){super(t,n)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}W(Gz,uk,"PgJsonb");function pE(e){return new Kz(e??"")}var hk,pk;class Qz extends(pk=ut,hk=ie,pk){constructor(t){super(t,"array","PgLine")}build(t){return new Jz(t,this.config)}}W(Qz,hk,"PgLineBuilder");var fk,mk;class Jz extends(mk=Ke,fk=ie,mk){getSQLType(){return"line"}mapFromDriverValue(t){const[n,r,i]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(i)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}W(Jz,fk,"PgLine");var vk,gk;class Yz extends(gk=ut,vk=ie,gk){constructor(t){super(t,"json","PgLineABC")}build(t){return new Zz(t,this.config)}}W(Yz,vk,"PgLineABCBuilder");var yk,Sk;class Zz extends(Sk=Ke,yk=ie,Sk){getSQLType(){return"line"}mapFromDriverValue(t){const[n,r,i]=t.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(i)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}W(Zz,yk,"PgLineABC");function lG(e,t){const{name:n,config:r}=un(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new Qz(n):new Yz(n)}var wk,Ck;class Xz extends(Ck=ut,wk=ie,Ck){constructor(t){super(t,"string","PgMacaddr")}build(t){return new e4(t,this.config)}}W(Xz,wk,"PgMacaddrBuilder");var xk,bk;class e4 extends(bk=Ke,xk=ie,bk){getSQLType(){return"macaddr"}}W(e4,xk,"PgMacaddr");function uG(e){return new Xz(e??"")}var Ek,Pk;class t4 extends(Pk=ut,Ek=ie,Pk){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new n4(t,this.config)}}W(t4,Ek,"PgMacaddr8Builder");var Rk,_k;class n4 extends(_k=Ke,Rk=ie,_k){getSQLType(){return"macaddr8"}}W(n4,Rk,"PgMacaddr8");function dG(e){return new t4(e??"")}var Tk,Ak;class r4 extends(Ak=ut,Tk=ie,Ak){constructor(t,n,r){super(t,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(t){return new i4(t,this.config)}}W(r4,Tk,"PgNumericBuilder");var Nk,Ik;class i4 extends(Ik=Ke,Nk=ie,Ik){constructor(n,r){super(n,r);W(this,"precision");W(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}W(i4,Nk,"PgNumeric");function hG(e,t){const{name:n,config:r}=un(e,t);return new r4(n,r==null?void 0:r.precision,r==null?void 0:r.scale)}var jk,kk;class s4 extends(kk=ut,jk=ie,kk){constructor(t){super(t,"array","PgPointTuple")}build(t){return new o4(t,this.config)}}W(s4,jk,"PgPointTupleBuilder");var Mk,Ok;class o4 extends(Ok=Ke,Mk=ie,Ok){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,r]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}W(o4,Mk,"PgPointTuple");var Dk,Lk;class a4 extends(Lk=ut,Dk=ie,Lk){constructor(t){super(t,"json","PgPointObject")}build(t){return new c4(t,this.config)}}W(a4,Dk,"PgPointObjectBuilder");var zk,Fk;class c4 extends(Fk=Ke,zk=ie,Fk){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,r]=t.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}W(c4,zk,"PgPointObject");function pG(e,t){const{name:n,config:r}=un(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new s4(n):new a4(n)}function fG(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}function XR(e,t){const n=new ArrayBuffer(8),r=new DataView(n);for(let i=0;i<8;i++)r.setUint8(i,e[t+i]);return r.getFloat64(0,!0)}function l4(e){const t=fG(e);let n=0;const r=t[n];n+=1;const i=new DataView(t.buffer),s=i.getUint32(n,r===1);if(n+=4,s&536870912&&(i.getUint32(n,r===1),n+=4),(s&65535)===1){const a=XR(t,n);n+=8;const o=XR(t,n);return n+=8,[a,o]}throw new Error("Unsupported geometry type")}var $k,Bk;class u4 extends(Bk=ut,$k=ie,Bk){constructor(t){super(t,"array","PgGeometry")}build(t){return new d4(t,this.config)}}W(u4,$k,"PgGeometryBuilder");var Vk,Uk;class d4 extends(Uk=Ke,Vk=ie,Uk){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return l4(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}W(d4,Vk,"PgGeometry");var qk,Hk;class h4 extends(Hk=ut,qk=ie,Hk){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new p4(t,this.config)}}W(h4,qk,"PgGeometryObjectBuilder");var Wk,Kk;class p4 extends(Kk=Ke,Wk=ie,Kk){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const n=l4(t);return{x:n[0],y:n[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}W(p4,Wk,"PgGeometryObject");function mG(e,t){const{name:n,config:r}=un(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new u4(n):new h4(n)}var Gk,Qk;class f4 extends(Qk=ut,Gk=ie,Qk){constructor(t,n){super(t,"number","PgReal"),this.config.length=n}build(t){return new m4(t,this.config)}}W(f4,Gk,"PgRealBuilder");var Jk,Yk;class m4 extends(Yk=Ke,Jk=ie,Yk){constructor(n,r){super(n,r);W(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}W(m4,Jk,"PgReal");function vG(e){return new f4(e??"")}var Zk,Xk;class v4 extends(Xk=ut,Zk=ie,Xk){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new g4(t,this.config)}}W(v4,Zk,"PgSerialBuilder");var eM,tM;class g4 extends(tM=Ke,eM=ie,tM){getSQLType(){return"serial"}}W(g4,eM,"PgSerial");function gG(e){return new v4(e??"")}var nM,rM;class y4 extends(rM=lf,nM=ie,rM){constructor(t){super(t,"number","PgSmallInt")}build(t){return new S4(t,this.config)}}W(y4,nM,"PgSmallIntBuilder");var iM,sM;class S4 extends(sM=Ke,iM=ie,sM){constructor(){super(...arguments);W(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}W(S4,iM,"PgSmallInt");function yG(e){return new y4(e??"")}var oM,aM;class w4 extends(aM=ut,oM=ie,aM){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new C4(t,this.config)}}W(w4,oM,"PgSmallSerialBuilder");var cM,lM;class C4 extends(lM=Ke,cM=ie,lM){getSQLType(){return"smallserial"}}W(C4,cM,"PgSmallSerial");function SG(e){return new w4(e??"")}var uM,dM;class x4 extends(dM=ut,uM=ie,dM){constructor(t,n){super(t,"string","PgText"),this.config.enumValues=n.enum}build(t){return new b4(t,this.config)}}W(x4,uM,"PgTextBuilder");var hM,pM;class b4 extends(pM=Ke,hM=ie,pM){constructor(){super(...arguments);W(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}W(b4,hM,"PgText");function Ct(e,t={}){const{name:n,config:r}=un(e,t);return new x4(n,r)}var fM,mM;class E4 extends(mM=su,fM=ie,mM){constructor(t,n,r){super(t,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}build(t){return new P4(t,this.config)}}W(E4,fM,"PgTimeBuilder");var vM,gM;class P4 extends(gM=Ke,vM=ie,gM){constructor(n,r){super(n,r);W(this,"withTimezone");W(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}W(P4,vM,"PgTime");function wG(e,t={}){const{name:n,config:r}=un(e,t);return new E4(n,r.withTimezone??!1,r.precision)}var yM,SM;class R4 extends(SM=su,yM=ie,SM){constructor(t,n,r){super(t,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(t){return new _4(t,this.config)}}W(R4,yM,"PgTimestampBuilder");var wM,CM;class _4 extends(CM=Ke,wM=ie,CM){constructor(n,r){super(n,r);W(this,"withTimezone");W(this,"precision");W(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));W(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}W(_4,wM,"PgTimestamp");var xM,bM;class T4 extends(bM=su,xM=ie,bM){constructor(t,n,r){super(t,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(t){return new A4(t,this.config)}}W(T4,xM,"PgTimestampStringBuilder");var EM,PM;class A4 extends(PM=Ke,EM=ie,PM){constructor(n,r){super(n,r);W(this,"withTimezone");W(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}W(A4,EM,"PgTimestampString");function Yo(e,t={}){const{name:n,config:r}=un(e,t);return(r==null?void 0:r.mode)==="string"?new T4(n,r.withTimezone??!1,r.precision):new R4(n,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var RM,_M;class N4 extends(_M=ut,RM=ie,_M){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(Ei`gen_random_uuid()`)}build(t){return new I4(t,this.config)}}W(N4,RM,"PgUUIDBuilder");var TM,AM;class I4 extends(AM=Ke,TM=ie,AM){getSQLType(){return"uuid"}}W(I4,TM,"PgUUID");function CG(e){return new N4(e??"")}var NM,IM;class j4 extends(IM=ut,NM=ie,IM){constructor(t,n){super(t,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new k4(t,this.config)}}W(j4,NM,"PgVarcharBuilder");var jM,kM;class k4 extends(kM=Ke,jM=ie,kM){constructor(){super(...arguments);W(this,"length",this.config.length);W(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}W(k4,jM,"PgVarchar");function xG(e,t={}){const{name:n,config:r}=un(e,t);return new j4(n,r)}var MM,OM;class M4 extends(OM=ut,MM=ie,OM){constructor(t,n){super(t,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(t){return new O4(t,this.config)}}W(M4,MM,"PgBinaryVectorBuilder");var DM,LM;class O4 extends(LM=Ke,DM=ie,LM){constructor(){super(...arguments);W(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}W(O4,DM,"PgBinaryVector");function bG(e,t){const{name:n,config:r}=un(e,t);return new M4(n,r)}var zM,FM;class D4 extends(FM=ut,zM=ie,FM){constructor(t,n){super(t,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(t){return new L4(t,this.config)}}W(D4,zM,"PgHalfVectorBuilder");var $M,BM;class L4 extends(BM=Ke,$M=ie,BM){constructor(){super(...arguments);W(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}W(L4,$M,"PgHalfVector");function EG(e,t){const{name:n,config:r}=un(e,t);return new D4(n,r)}var VM,UM;class z4 extends(UM=ut,VM=ie,UM){constructor(t,n){super(t,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(t){return new F4(t,this.config)}}W(z4,VM,"PgSparseVectorBuilder");var qM,HM;class F4 extends(HM=Ke,qM=ie,HM){constructor(){super(...arguments);W(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}W(F4,qM,"PgSparseVector");function PG(e,t){const{name:n,config:r}=un(e,t);return new z4(n,r)}var WM,KM;class $4 extends(KM=ut,WM=ie,KM){constructor(t,n){super(t,"array","PgVector"),this.config.dimensions=n.dimensions}build(t){return new B4(t,this.config)}}W($4,WM,"PgVectorBuilder");var GM,QM;class B4 extends(QM=Ke,GM=ie,QM){constructor(){super(...arguments);W(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}W(B4,GM,"PgVector");function RG(e,t){const{name:n,config:r}=un(e,t);return new $4(n,r)}function _G(){return{bigint:XK,bigserial:eG,boolean:Pz,char:tG,cidr:nG,customType:rG,date:iG,doublePrecision:sG,inet:oG,integer:Vz,interval:aG,json:cG,jsonb:pE,line:lG,macaddr:uG,macaddr8:dG,numeric:hG,point:pG,geometry:mG,real:vG,serial:gG,smallint:yG,smallserial:SG,text:Ct,time:wG,timestamp:Yo,uuid:CG,varchar:xG,bit:bG,halfvec:EG,sparsevec:PG,vector:RG}}const WC=Symbol.for("drizzle:PgInlineForeignKeys"),e_=Symbol.for("drizzle:EnableRLS");var JM,YM,ZM,XM,eO;class Mv extends(eO=Hr,XM=ie,ZM=WC,YM=e_,JM=Hr.Symbol.ExtraConfigBuilder,eO){constructor(){super(...arguments);W(this,ZM,[]);W(this,YM,!1);W(this,JM)}}W(Mv,XM,"PgTable"),W(Mv,"Symbol",Object.assign({},Hr.Symbol,{InlineForeignKeys:WC,EnableRLS:e_}));function TG(e,t,n,r,i=e){const s=new Mv(e,r,i),a=typeof t=="function"?t(_G()):t,o=Object.fromEntries(Object.entries(a).map(([u,h])=>{const p=h;p.setName(u);const f=p.build(s);return s[WC].push(...p.buildForeignKeys(f,s)),[u,f]})),c=Object.fromEntries(Object.entries(a).map(([u,h])=>{const p=h;p.setName(u);const f=p.buildExtraConfigColumn(s);return[u,f]})),l=Object.assign(s,o);return l[Hr.Symbol.Columns]=o,l[Hr.Symbol.ExtraConfigColumns]=c,Object.assign(l,{enableRLS:()=>(l[Mv.Symbol.EnableRLS]=!0,l)})}const yc=(e,t,n)=>TG(e,t,n,void 0);var lt;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return e.objectValues(a)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},e.find=(i,s)=>{for(const a of i)if(s(a))return a},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}e.joinValues=r,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(lt||(lt={}));var KC;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(KC||(KC={}));const ye=lt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),co=e=>{switch(typeof e){case"undefined":return ye.undefined;case"string":return ye.string;case"number":return isNaN(e)?ye.nan:ye.number;case"boolean":return ye.boolean;case"function":return ye.function;case"bigint":return ye.bigint;case"symbol":return ye.symbol;case"object":return Array.isArray(e)?ye.array:e===null?ye.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ye.promise:typeof Map<"u"&&e instanceof Map?ye.map:typeof Set<"u"&&e instanceof Set?ye.set:typeof Date<"u"&&e instanceof Date?ye.date:ye.object;default:return ye.unknown}},le=lt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),AG=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Nr extends Error{constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(s){return s.message},r={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(n(a))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return i(this),r}static assert(t){if(!(t instanceof Nr))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,lt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Nr.create=e=>new Nr(e);const Ol=(e,t)=>{let n;switch(e.code){case le.invalid_type:e.received===ye.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case le.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,lt.jsonStringifyReplacer)}`;break;case le.unrecognized_keys:n=`Unrecognized key(s) in object: ${lt.joinValues(e.keys,", ")}`;break;case le.invalid_union:n="Invalid input";break;case le.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${lt.joinValues(e.options)}`;break;case le.invalid_enum_value:n=`Invalid enum value. Expected ${lt.joinValues(e.options)}, received '${e.received}'`;break;case le.invalid_arguments:n="Invalid function arguments";break;case le.invalid_return_type:n="Invalid function return type";break;case le.invalid_date:n="Invalid date";break;case le.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:lt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case le.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case le.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case le.custom:n="Invalid input";break;case le.invalid_intersection_types:n="Intersection results could not be merged";break;case le.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case le.not_finite:n="Number must be finite";break;default:n=t.defaultError,lt.assertNever(e)}return{message:n}};let V4=Ol;function NG(e){V4=e}function Ov(){return V4}const Dv=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)o=l(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}},IG=[];function me(e,t){const n=Ov(),r=Dv({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Ol?void 0:Ol].filter(i=>!!i)});e.common.issues.push(r)}class zn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return Fe;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const s=await i.key,a=await i.value;r.push({key:s,value:a})}return zn.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return Fe;s.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[s.value]=a.value)}return{status:t.value,value:r}}}const Fe=Object.freeze({status:"aborted"}),Qc=e=>({status:"dirty",value:e}),Qn=e=>({status:"valid",value:e}),GC=e=>e.status==="aborted",QC=e=>e.status==="dirty",Sp=e=>e.status==="valid",wp=e=>typeof Promise<"u"&&e instanceof Promise;function Lv(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function U4(e,t,n,r,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var Te;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Te||(Te={}));var Th,Ah;class ns{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const t_=(e,t)=>{if(Sp(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Nr(e.common.issues);return this._error=n,this._error}}};function We(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(a,o)=>{var c,l;const{message:u}=e;return a.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:(c=u??r)!==null&&c!==void 0?c:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(l=u??n)!==null&&l!==void 0?l:o.defaultError}},description:i}}class Ye{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return co(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:co(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new zn,ctx:{common:t.parent.common,data:t.data,parsedType:co(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(wp(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:co(t)},s=this._parseSync({data:t,path:i.path,parent:i});return t_(i,s)}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:co(t)},i=this._parse({data:t,path:r.path,parent:r}),s=await(wp(i)?i:Promise.resolve(i));return t_(r,s)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const a=t(i),o=()=>s.addIssue({code:le.custom,...r(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new Pi({schema:this,typeName:De.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Zi.create(this,this._def)}nullable(){return Vo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ci.create(this,this._def)}promise(){return Ll.create(this,this._def)}or(t){return Ep.create([this,t],this._def)}and(t){return Pp.create(this,t,this._def)}transform(t){return new Pi({...We(this._def),schema:this,typeName:De.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Np({...We(this._def),innerType:this,defaultValue:n,typeName:De.ZodDefault})}brand(){return new fE({typeName:De.ZodBranded,type:this,...We(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Ip({...We(this._def),innerType:this,catchValue:n,typeName:De.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return uf.create(this,t)}readonly(){return jp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const jG=/^c[^\s-]{8,}$/i,kG=/^[0-9a-z]+$/,MG=/^[0-9A-HJKMNP-TV-Z]{26}$/,OG=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,DG=/^[a-z0-9_-]{21}$/i,LG=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zG=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,FG="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let k0;const $G=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,BG=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,VG=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,q4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",UG=new RegExp(`^${q4}$`);function H4(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function qG(e){return new RegExp(`^${H4(e)}$`)}function W4(e){let t=`${q4}T${H4(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function HG(e,t){return!!((t==="v4"||!t)&&$G.test(e)||(t==="v6"||!t)&&BG.test(e))}class gi extends Ye{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ye.string){const s=this._getOrReturnCtx(t);return me(s,{code:le.invalid_type,expected:ye.string,received:s.parsedType}),Fe}const r=new zn;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),me(i,{code:le.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),me(i,{code:le.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const a=t.data.length>s.value,o=t.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(t,i),a?me(i,{code:le.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&me(i,{code:le.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")zG.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"email",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")k0||(k0=new RegExp(FG,"u")),k0.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"emoji",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")OG.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"uuid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")DG.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"nanoid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")jG.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"cuid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")kG.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"cuid2",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")MG.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"ulid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),me(i,{validation:"url",code:le.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"regex",code:le.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),me(i,{code:le.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),me(i,{code:le.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),me(i,{code:le.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?W4(s).test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{code:le.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?UG.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{code:le.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?qG(s).test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{code:le.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?LG.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"duration",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?HG(t.data,s.version)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"ip",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?VG.test(t.data)||(i=this._getOrReturnCtx(t,i),me(i,{validation:"base64",code:le.invalid_string,message:s.message}),r.dirty()):lt.assertNever(s);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:le.invalid_string,...Te.errToObj(r)})}_addCheck(t){return new gi({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Te.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Te.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Te.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Te.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Te.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Te.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Te.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Te.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Te.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Te.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...Te.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Te.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Te.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Te.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Te.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Te.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Te.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Te.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Te.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Te.errToObj(n)})}nonempty(t){return this.min(1,Te.errToObj(t))}trim(){return new gi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new gi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new gi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}gi.create=e=>{var t;return new gi({checks:[],typeName:De.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...We(e)})};function WG(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(e.toFixed(i).replace(".","")),a=parseInt(t.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class Fo extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ye.number){const s=this._getOrReturnCtx(t);return me(s,{code:le.invalid_type,expected:ye.number,received:s.parsedType}),Fe}let r;const i=new zn;for(const s of this._def.checks)s.kind==="int"?lt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),me(r,{code:le.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),me(r,{code:le.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),me(r,{code:le.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?WG(t.data,s.value)!==0&&(r=this._getOrReturnCtx(t,r),me(r,{code:le.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),me(r,{code:le.not_finite,message:s.message}),i.dirty()):lt.assertNever(s);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Te.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Te.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Te.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Te.toString(n))}setLimit(t,n,r,i){return new Fo({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Te.toString(i)}]})}_addCheck(t){return new Fo({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Te.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Te.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Te.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Te.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Te.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Te.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Te.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Te.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Te.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&lt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Fo.create=e=>new Fo({checks:[],typeName:De.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...We(e)});class $o extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==ye.bigint){const s=this._getOrReturnCtx(t);return me(s,{code:le.invalid_type,expected:ye.bigint,received:s.parsedType}),Fe}let r;const i=new zn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),me(r,{code:le.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),me(r,{code:le.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),me(r,{code:le.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):lt.assertNever(s);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Te.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Te.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Te.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Te.toString(n))}setLimit(t,n,r,i){return new $o({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Te.toString(i)}]})}_addCheck(t){return new $o({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Te.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Te.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Te.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Te.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Te.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}$o.create=e=>{var t;return new $o({checks:[],typeName:De.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...We(e)})};class Cp extends Ye{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ye.boolean){const r=this._getOrReturnCtx(t);return me(r,{code:le.invalid_type,expected:ye.boolean,received:r.parsedType}),Fe}return Qn(t.data)}}Cp.create=e=>new Cp({typeName:De.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...We(e)});class sc extends Ye{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ye.date){const s=this._getOrReturnCtx(t);return me(s,{code:le.invalid_type,expected:ye.date,received:s.parsedType}),Fe}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return me(s,{code:le.invalid_date}),Fe}const r=new zn;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),me(i,{code:le.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),me(i,{code:le.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):lt.assertNever(s);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new sc({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Te.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Te.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}sc.create=e=>new sc({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:De.ZodDate,...We(e)});class zv extends Ye{_parse(t){if(this._getType(t)!==ye.symbol){const r=this._getOrReturnCtx(t);return me(r,{code:le.invalid_type,expected:ye.symbol,received:r.parsedType}),Fe}return Qn(t.data)}}zv.create=e=>new zv({typeName:De.ZodSymbol,...We(e)});class xp extends Ye{_parse(t){if(this._getType(t)!==ye.undefined){const r=this._getOrReturnCtx(t);return me(r,{code:le.invalid_type,expected:ye.undefined,received:r.parsedType}),Fe}return Qn(t.data)}}xp.create=e=>new xp({typeName:De.ZodUndefined,...We(e)});class bp extends Ye{_parse(t){if(this._getType(t)!==ye.null){const r=this._getOrReturnCtx(t);return me(r,{code:le.invalid_type,expected:ye.null,received:r.parsedType}),Fe}return Qn(t.data)}}bp.create=e=>new bp({typeName:De.ZodNull,...We(e)});class Dl extends Ye{constructor(){super(...arguments),this._any=!0}_parse(t){return Qn(t.data)}}Dl.create=e=>new Dl({typeName:De.ZodAny,...We(e)});class Ka extends Ye{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Qn(t.data)}}Ka.create=e=>new Ka({typeName:De.ZodUnknown,...We(e)});class Ls extends Ye{_parse(t){const n=this._getOrReturnCtx(t);return me(n,{code:le.invalid_type,expected:ye.never,received:n.parsedType}),Fe}}Ls.create=e=>new Ls({typeName:De.ZodNever,...We(e)});class Fv extends Ye{_parse(t){if(this._getType(t)!==ye.undefined){const r=this._getOrReturnCtx(t);return me(r,{code:le.invalid_type,expected:ye.void,received:r.parsedType}),Fe}return Qn(t.data)}}Fv.create=e=>new Fv({typeName:De.ZodVoid,...We(e)});class Ci extends Ye{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==ye.array)return me(n,{code:le.invalid_type,expected:ye.array,received:n.parsedType}),Fe;if(i.exactLength!==null){const a=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(a||o)&&(me(n,{code:a?le.too_big:le.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(me(n,{code:le.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(me(n,{code:le.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>i.type._parseAsync(new ns(n,a,n.path,o)))).then(a=>zn.mergeArray(r,a));const s=[...n.data].map((a,o)=>i.type._parseSync(new ns(n,a,n.path,o)));return zn.mergeArray(r,s)}get element(){return this._def.type}min(t,n){return new Ci({...this._def,minLength:{value:t,message:Te.toString(n)}})}max(t,n){return new Ci({...this._def,maxLength:{value:t,message:Te.toString(n)}})}length(t,n){return new Ci({...this._def,exactLength:{value:t,message:Te.toString(n)}})}nonempty(t){return this.min(1,t)}}Ci.create=(e,t)=>new Ci({type:e,minLength:null,maxLength:null,exactLength:null,typeName:De.ZodArray,...We(t)});function Dc(e){if(e instanceof Ot){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Zi.create(Dc(r))}return new Ot({...e._def,shape:()=>t})}else return e instanceof Ci?new Ci({...e._def,type:Dc(e.element)}):e instanceof Zi?Zi.create(Dc(e.unwrap())):e instanceof Vo?Vo.create(Dc(e.unwrap())):e instanceof rs?rs.create(e.items.map(t=>Dc(t))):e}class Ot extends Ye{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=lt.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==ye.object){const l=this._getOrReturnCtx(t);return me(l,{code:le.invalid_type,expected:ye.object,received:l.parsedType}),Fe}const{status:r,ctx:i}=this._processInputParams(t),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ls&&this._def.unknownKeys==="strip"))for(const l in i.data)a.includes(l)||o.push(l);const c=[];for(const l of a){const u=s[l],h=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new ns(i,h,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Ls){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")o.length>0&&(me(i,{code:le.unrecognized_keys,keys:o}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of o){const h=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new ns(i,h,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const h=await u.key,p=await u.value;l.push({key:h,value:p,alwaysSet:u.alwaysSet})}return l}).then(l=>zn.mergeObjectSync(r,l)):zn.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(t){return Te.errToObj,new Ot({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,s,a,o;const c=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=Te.errToObj(t).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new Ot({...this._def,unknownKeys:"strip"})}passthrough(){return new Ot({...this._def,unknownKeys:"passthrough"})}extend(t){return new Ot({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Ot({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:De.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Ot({...this._def,catchall:t})}pick(t){const n={};return lt.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ot({...this._def,shape:()=>n})}omit(t){const n={};return lt.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Ot({...this._def,shape:()=>n})}deepPartial(){return Dc(this)}partial(t){const n={};return lt.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new Ot({...this._def,shape:()=>n})}required(t){const n={};return lt.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Zi;)s=s._def.innerType;n[r]=s}}),new Ot({...this._def,shape:()=>n})}keyof(){return K4(lt.objectKeys(this.shape))}}Ot.create=(e,t)=>new Ot({shape:()=>e,unknownKeys:"strip",catchall:Ls.create(),typeName:De.ZodObject,...We(t)});Ot.strictCreate=(e,t)=>new Ot({shape:()=>e,unknownKeys:"strict",catchall:Ls.create(),typeName:De.ZodObject,...We(t)});Ot.lazycreate=(e,t)=>new Ot({shape:e,unknownKeys:"strip",catchall:Ls.create(),typeName:De.ZodObject,...We(t)});class Ep extends Ye{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new Nr(o.ctx.common.issues));return me(n,{code:le.invalid_union,unionErrors:a}),Fe}if(n.common.async)return Promise.all(r.map(async s=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(c=>new Nr(c));return me(n,{code:le.invalid_union,unionErrors:o}),Fe}}get options(){return this._def.options}}Ep.create=(e,t)=>new Ep({options:e,typeName:De.ZodUnion,...We(t)});const ys=e=>e instanceof _p?ys(e.schema):e instanceof Pi?ys(e.innerType()):e instanceof Tp?[e.value]:e instanceof Bo?e.options:e instanceof Ap?lt.objectValues(e.enum):e instanceof Np?ys(e._def.innerType):e instanceof xp?[void 0]:e instanceof bp?[null]:e instanceof Zi?[void 0,...ys(e.unwrap())]:e instanceof Vo?[null,...ys(e.unwrap())]:e instanceof fE||e instanceof jp?ys(e.unwrap()):e instanceof Ip?ys(e._def.innerType):[];class Bg extends Ye{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==ye.object)return me(n,{code:le.invalid_type,expected:ye.object,received:n.parsedType}),Fe;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(me(n,{code:le.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Fe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const s of n){const a=ys(s.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);i.set(o,s)}}return new Bg({typeName:De.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...We(r)})}}function JC(e,t){const n=co(e),r=co(t);if(e===t)return{valid:!0,data:e};if(n===ye.object&&r===ye.object){const i=lt.objectKeys(t),s=lt.objectKeys(e).filter(o=>i.indexOf(o)!==-1),a={...e,...t};for(const o of s){const c=JC(e[o],t[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(n===ye.array&&r===ye.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const a=e[s],o=t[s],c=JC(a,o);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===ye.date&&r===ye.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Pp extends Ye{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(s,a)=>{if(GC(s)||GC(a))return Fe;const o=JC(s.value,a.value);return o.valid?((QC(s)||QC(a))&&n.dirty(),{status:n.value,value:o.data}):(me(r,{code:le.invalid_intersection_types}),Fe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Pp.create=(e,t,n)=>new Pp({left:e,right:t,typeName:De.ZodIntersection,...We(n)});class rs extends Ye{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ye.array)return me(r,{code:le.invalid_type,expected:ye.array,received:r.parsedType}),Fe;if(r.data.length<this._def.items.length)return me(r,{code:le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Fe;!this._def.rest&&r.data.length>this._def.items.length&&(me(r,{code:le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new ns(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>zn.mergeArray(n,a)):zn.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new rs({...this._def,rest:t})}}rs.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new rs({items:e,typeName:De.ZodTuple,rest:null,...We(t)})};class Rp extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ye.object)return me(r,{code:le.invalid_type,expected:ye.object,received:r.parsedType}),Fe;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in r.data)i.push({key:s._parse(new ns(r,o,r.path,o)),value:a._parse(new ns(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?zn.mergeObjectAsync(n,i):zn.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Ye?new Rp({keyType:t,valueType:n,typeName:De.ZodRecord,...We(r)}):new Rp({keyType:gi.create(),valueType:t,typeName:De.ZodRecord,...We(n)})}}class $v extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ye.map)return me(r,{code:le.invalid_type,expected:ye.map,received:r.parsedType}),Fe;const i=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([o,c],l)=>({key:i._parse(new ns(r,o,r.path,[l,"key"])),value:s._parse(new ns(r,c,r.path,[l,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Fe;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(l.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of a){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Fe;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(l.value,u.value)}return{status:n.value,value:o}}}}$v.create=(e,t,n)=>new $v({valueType:t,keyType:e,typeName:De.ZodMap,...We(n)});class oc extends Ye{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ye.set)return me(r,{code:le.invalid_type,expected:ye.set,received:r.parsedType}),Fe;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(me(r,{code:le.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(me(r,{code:le.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function a(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Fe;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const o=[...r.data.values()].map((c,l)=>s._parse(new ns(r,c,r.path,l)));return r.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(t,n){return new oc({...this._def,minSize:{value:t,message:Te.toString(n)}})}max(t,n){return new oc({...this._def,maxSize:{value:t,message:Te.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}oc.create=(e,t)=>new oc({valueType:e,minSize:null,maxSize:null,typeName:De.ZodSet,...We(t)});class sl extends Ye{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==ye.function)return me(n,{code:le.invalid_type,expected:ye.function,received:n.parsedType}),Fe;function r(o,c){return Dv({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ov(),Ol].filter(l=>!!l),issueData:{code:le.invalid_arguments,argumentsError:c}})}function i(o,c){return Dv({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ov(),Ol].filter(l=>!!l),issueData:{code:le.invalid_return_type,returnTypeError:c}})}const s={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof Ll){const o=this;return Qn(async function(...c){const l=new Nr([]),u=await o._def.args.parseAsync(c,s).catch(f=>{throw l.addIssue(r(c,f)),l}),h=await Reflect.apply(a,this,u);return await o._def.returns._def.type.parseAsync(h,s).catch(f=>{throw l.addIssue(i(h,f)),l})})}else{const o=this;return Qn(function(...c){const l=o._def.args.safeParse(c,s);if(!l.success)throw new Nr([r(c,l.error)]);const u=Reflect.apply(a,this,l.data),h=o._def.returns.safeParse(u,s);if(!h.success)throw new Nr([i(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new sl({...this._def,args:rs.create(t).rest(Ka.create())})}returns(t){return new sl({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new sl({args:t||rs.create([]).rest(Ka.create()),returns:n||Ka.create(),typeName:De.ZodFunction,...We(r)})}}class _p extends Ye{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}_p.create=(e,t)=>new _p({getter:e,typeName:De.ZodLazy,...We(t)});class Tp extends Ye{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return me(n,{received:n.data,code:le.invalid_literal,expected:this._def.value}),Fe}return{status:"valid",value:t.data}}get value(){return this._def.value}}Tp.create=(e,t)=>new Tp({value:e,typeName:De.ZodLiteral,...We(t)});function K4(e,t){return new Bo({values:e,typeName:De.ZodEnum,...We(t)})}class Bo extends Ye{constructor(){super(...arguments),Th.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return me(n,{expected:lt.joinValues(r),received:n.parsedType,code:le.invalid_type}),Fe}if(Lv(this,Th)||U4(this,Th,new Set(this._def.values)),!Lv(this,Th).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return me(n,{received:n.data,code:le.invalid_enum_value,options:r}),Fe}return Qn(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Bo.create(t,{...this._def,...n})}exclude(t,n=this._def){return Bo.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Th=new WeakMap;Bo.create=K4;class Ap extends Ye{constructor(){super(...arguments),Ah.set(this,void 0)}_parse(t){const n=lt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==ye.string&&r.parsedType!==ye.number){const i=lt.objectValues(n);return me(r,{expected:lt.joinValues(i),received:r.parsedType,code:le.invalid_type}),Fe}if(Lv(this,Ah)||U4(this,Ah,new Set(lt.getValidEnumValues(this._def.values))),!Lv(this,Ah).has(t.data)){const i=lt.objectValues(n);return me(r,{received:r.data,code:le.invalid_enum_value,options:i}),Fe}return Qn(t.data)}get enum(){return this._def.values}}Ah=new WeakMap;Ap.create=(e,t)=>new Ap({values:e,typeName:De.ZodNativeEnum,...We(t)});class Ll extends Ye{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==ye.promise&&n.common.async===!1)return me(n,{code:le.invalid_type,expected:ye.promise,received:n.parsedType}),Fe;const r=n.parsedType===ye.promise?n.data:Promise.resolve(n.data);return Qn(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ll.create=(e,t)=>new Ll({type:e,typeName:De.ZodPromise,...We(t)});class Pi extends Ye{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===De.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:a=>{me(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(r.data,s);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return Fe;const c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?Fe:c.status==="dirty"||n.value==="dirty"?Qc(c.value):c});{if(n.value==="aborted")return Fe;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?Fe:o.status==="dirty"||n.value==="dirty"?Qc(o.value):o}}if(i.type==="refinement"){const a=o=>{const c=i.refinement(o,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Fe:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Fe:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Sp(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Sp(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:n.value,value:o})):a);lt.assertNever(i)}}Pi.create=(e,t,n)=>new Pi({schema:e,typeName:De.ZodEffects,effect:t,...We(n)});Pi.createWithPreprocess=(e,t,n)=>new Pi({schema:t,effect:{type:"preprocess",transform:e},typeName:De.ZodEffects,...We(n)});class Zi extends Ye{_parse(t){return this._getType(t)===ye.undefined?Qn(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Zi.create=(e,t)=>new Zi({innerType:e,typeName:De.ZodOptional,...We(t)});class Vo extends Ye{_parse(t){return this._getType(t)===ye.null?Qn(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Vo.create=(e,t)=>new Vo({innerType:e,typeName:De.ZodNullable,...We(t)});class Np extends Ye{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===ye.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Np.create=(e,t)=>new Np({innerType:e,typeName:De.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...We(t)});class Ip extends Ye{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return wp(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Nr(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Nr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ip.create=(e,t)=>new Ip({innerType:e,typeName:De.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...We(t)});class Bv extends Ye{_parse(t){if(this._getType(t)!==ye.nan){const r=this._getOrReturnCtx(t);return me(r,{code:le.invalid_type,expected:ye.nan,received:r.parsedType}),Fe}return{status:"valid",value:t.data}}}Bv.create=e=>new Bv({typeName:De.ZodNaN,...We(e)});const KG=Symbol("zod_brand");class fE extends Ye{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class uf extends Ye{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Fe:s.status==="dirty"?(n.dirty(),Qc(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Fe:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new uf({in:t,out:n,typeName:De.ZodPipeline})}}class jp extends Ye{_parse(t){const n=this._def.innerType._parse(t),r=i=>(Sp(i)&&(i.value=Object.freeze(i.value)),i);return wp(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}jp.create=(e,t)=>new jp({innerType:e,typeName:De.ZodReadonly,...We(t)});function G4(e,t={},n){return e?Dl.create().superRefine((r,i)=>{var s,a;if(!e(r)){const o=typeof t=="function"?t(r):typeof t=="string"?{message:t}:t,c=(a=(s=o.fatal)!==null&&s!==void 0?s:n)!==null&&a!==void 0?a:!0,l=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...l,fatal:c})}}):Dl.create()}const GG={object:Ot.lazycreate};var De;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(De||(De={}));const QG=(e,t={message:`Input not instance of ${e.name}`})=>G4(n=>n instanceof e,t),Q4=gi.create,J4=Fo.create,JG=Bv.create,YG=$o.create,Y4=Cp.create,ZG=sc.create,XG=zv.create,eQ=xp.create,tQ=bp.create,nQ=Dl.create,rQ=Ka.create,iQ=Ls.create,sQ=Fv.create,oQ=Ci.create,aQ=Ot.create,cQ=Ot.strictCreate,lQ=Ep.create,uQ=Bg.create,dQ=Pp.create,hQ=rs.create,pQ=Rp.create,fQ=$v.create,mQ=oc.create,vQ=sl.create,gQ=_p.create,yQ=Tp.create,SQ=Bo.create,wQ=Ap.create,CQ=Ll.create,n_=Pi.create,xQ=Zi.create,bQ=Vo.create,EQ=Pi.createWithPreprocess,PQ=uf.create,RQ=()=>Q4().optional(),_Q=()=>J4().optional(),TQ=()=>Y4().optional(),AQ={string:e=>gi.create({...e,coerce:!0}),number:e=>Fo.create({...e,coerce:!0}),boolean:e=>Cp.create({...e,coerce:!0}),bigint:e=>$o.create({...e,coerce:!0}),date:e=>sc.create({...e,coerce:!0})},NQ=Fe;var Et=Object.freeze({__proto__:null,defaultErrorMap:Ol,setErrorMap:NG,getErrorMap:Ov,makeIssue:Dv,EMPTY_PATH:IG,addIssueToContext:me,ParseStatus:zn,INVALID:Fe,DIRTY:Qc,OK:Qn,isAborted:GC,isDirty:QC,isValid:Sp,isAsync:wp,get util(){return lt},get objectUtil(){return KC},ZodParsedType:ye,getParsedType:co,ZodType:Ye,datetimeRegex:W4,ZodString:gi,ZodNumber:Fo,ZodBigInt:$o,ZodBoolean:Cp,ZodDate:sc,ZodSymbol:zv,ZodUndefined:xp,ZodNull:bp,ZodAny:Dl,ZodUnknown:Ka,ZodNever:Ls,ZodVoid:Fv,ZodArray:Ci,ZodObject:Ot,ZodUnion:Ep,ZodDiscriminatedUnion:Bg,ZodIntersection:Pp,ZodTuple:rs,ZodRecord:Rp,ZodMap:$v,ZodSet:oc,ZodFunction:sl,ZodLazy:_p,ZodLiteral:Tp,ZodEnum:Bo,ZodNativeEnum:Ap,ZodPromise:Ll,ZodEffects:Pi,ZodTransformer:Pi,ZodOptional:Zi,ZodNullable:Vo,ZodDefault:Np,ZodCatch:Ip,ZodNaN:Bv,BRAND:KG,ZodBranded:fE,ZodPipeline:uf,ZodReadonly:jp,custom:G4,Schema:Ye,ZodSchema:Ye,late:GG,get ZodFirstPartyTypeKind(){return De},coerce:AQ,any:nQ,array:oQ,bigint:YG,boolean:Y4,date:ZG,discriminatedUnion:uQ,effect:n_,enum:SQ,function:vQ,instanceof:QG,intersection:dQ,lazy:gQ,literal:yQ,map:fQ,nan:JG,nativeEnum:wQ,never:iQ,null:tQ,nullable:bQ,number:J4,object:aQ,oboolean:TQ,onumber:_Q,optional:xQ,ostring:RQ,pipeline:PQ,preprocess:EQ,promise:CQ,record:pQ,set:mQ,strictObject:cQ,string:Q4,symbol:XG,transformer:n_,tuple:hQ,undefined:eQ,union:lQ,unknown:rQ,void:sQ,NEVER:NQ,ZodIssueCode:le,quotelessJson:AG,ZodError:Nr});yc("users",{id:Ct("id").primaryKey().default(Ei`gen_random_uuid()`),username:Ct("username").notNull().unique(),password:Ct("password").notNull(),display_name:Ct("display_name").notNull(),role:Ct("role").notNull().default("employee"),department:Ct("department"),description:Ct("description"),created_at:Yo("created_at").defaultNow().notNull()});yc("chats",{id:Ct("id").primaryKey().default(Ei`gen_random_uuid()`),userId:Ct("user_id").notNull(),title:Ct("title"),createdAt:Yo("created_at").defaultNow().notNull()});yc("messages",{id:Ct("id").primaryKey().default(Ei`gen_random_uuid()`),chatId:Ct("chat_id").notNull(),senderId:Ct("sender_id").notNull(),content:Ct("content").notNull(),isAiResponse:Pz("is_ai_response").notNull().default(!1),createdAt:Yo("created_at").defaultNow().notNull()});yc("media",{id:Ct("id").primaryKey().default(Ei`gen_random_uuid()`),messageId:Vz("message_id").notNull(),type:Ct("type").notNull(),url:Ct("url").notNull(),description:Ct("description"),createdAt:Yo("created_at").defaultNow().notNull()});yc("emergency_flows",{id:Ct("id").primaryKey().default(Ei`gen_random_uuid()`),title:Ct("title").notNull(),steps:pE("steps").notNull(),keyword:Ct("keyword").notNull(),createdAt:Yo("created_at").defaultNow().notNull()});yc("images",{id:Ct("id").primaryKey().default(Ei`gen_random_uuid()`),url:Ct("url").notNull(),description:Ct("description").notNull(),embedding:pE("embedding").notNull(),createdAt:Yo("created_at").defaultNow().notNull()});yc("chat_exports",{id:Ct("id").primaryKey().default(Ei`gen_random_uuid()`),chatId:Ct("chat_id").notNull(),userId:Ct("user_id").notNull(),timestamp:Yo("timestamp").defaultNow().notNull()});const IQ=Et.object({username:Et.string(),password:Et.string()});Et.object({username:Et.string(),password:Et.string(),display_name:Et.string(),role:Et.string(),department:Et.string().optional()});Et.object({userId:Et.string(),title:Et.string().optional()});Et.object({chatId:Et.string(),content:Et.string(),senderId:Et.string(),isAiResponse:Et.boolean().default(!1)});Et.object({messageId:Et.number(),type:Et.string(),url:Et.string(),description:Et.string().optional()});Et.object({title:Et.string(),content:Et.string(),userId:Et.string()});const Z4=m.createContext(null),Lr=()=>{const e=m.useContext(Z4);if(e===null)throw new Error("useAuth must be used within an AuthProvider");return e},X4=({children:e})=>{const[t,n]=m.useState(null),[r,i]=m.useState(!0),{toast:s}=ln();m.useEffect(()=>{(async()=>{try{const l=await fetch("/api/auth/me",{credentials:"include",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(l.ok){const u=await l.json();n(u)}else l.status===401&&(n(null),console.log("ユーザーは未認証です"))}catch(l){console.error("Failed to fetch user:",l),n(null)}finally{i(!1)}})()},[]);const a=async(c,l)=>{try{i(!0);const h=await(await Qt("POST","/api/auth/login",{username:c,password:l})).json();if(!h||!h.id||!h.username)throw new Error("Invalid response data");n(h),s({title:"ログイン成功",description:`ようこそ、${h.display_name||h.username}さん`})}catch(u){throw s({title:"ログイン失敗",description:"ユーザー名またはパスワードが間違っています",variant:"destructive"}),u}finally{i(!1)}},o=async()=>{try{i(!0),await Qt("POST","/api/auth/logout"),n(null),s({title:"ログアウト成功",description:"ログアウトしました"})}catch{s({title:"ログアウト失敗",description:"ログアウトに失敗しました",variant:"destructive"})}finally{i(!1)}};return d.jsx(Z4.Provider,{value:{user:t,isLoading:r,login:a,logout:o},children:e})};var jQ="Label",eF=m.forwardRef((e,t)=>d.jsx(Re.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));eF.displayName=jQ;var tF=eF;const kQ=af("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Be=m.forwardRef(({className:e,...t},n)=>d.jsx(tF,{ref:n,className:ve(kQ(),e),...t}));Be.displayName=tF.displayName;const MQ=bK,nF=m.createContext({}),r_=({...e})=>d.jsx(nF.Provider,{value:{name:e.name},children:d.jsx(_K,{...e})}),Vg=()=>{const e=m.useContext(nF),t=m.useContext(rF),{getFieldState:n,formState:r}=Fg(),i=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:s}=t;return{id:s,name:e.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},rF=m.createContext({}),YC=m.forwardRef(({className:e,...t},n)=>{const r=m.useId();return d.jsx(rF.Provider,{value:{id:r},children:d.jsx("div",{ref:n,className:ve("space-y-2",e),...t})})});YC.displayName="FormItem";const ZC=m.forwardRef(({className:e,...t},n)=>{const{error:r,formItemId:i}=Vg();return d.jsx(Be,{ref:n,className:ve(r&&"text-destructive",e),htmlFor:i,...t})});ZC.displayName="FormLabel";const XC=m.forwardRef(({...e},t)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=Vg();return d.jsx(zo,{ref:t,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...e})});XC.displayName="FormControl";const OQ=m.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:r}=Vg();return d.jsx("p",{ref:n,id:r,className:ve("text-sm text-muted-foreground",e),...t})});OQ.displayName="FormDescription";const ex=m.forwardRef(({className:e,children:t,...n},r)=>{const{error:i,formMessageId:s}=Vg(),a=i?String(i==null?void 0:i.message):t;return a?d.jsx("p",{ref:r,id:s,className:ve("text-sm font-medium text-destructive",e),...n,children:a}):null});ex.displayName="FormMessage";const at=m.forwardRef(({className:e,type:t,...n},r)=>d.jsx("input",{type:t,className:ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));at.displayName="Input";function DQ(){const[e,t]=m.useState(!1),{login:n,user:r,isLoading:i}=Lr(),[,s]=ss();m.useEffect(()=>{!i&&r&&s("/chat")},[r,i,s]);const a=FK({resolver:UK(IQ),defaultValues:{username:"",password:""}}),o=async c=>{try{t(!0),await n(c.username,c.password),s("/chat")}catch(l){console.error("Login error:",l)}finally{t(!1)}};return d.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-b from-primary/10 to-primary/5 p-4",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-primary",children:"応急処置チャットシステム"}),d.jsx("p",{className:"text-neutral-600 mt-2",children:"Emergency Recovery Chat System"})]}),d.jsxs(pt,{className:"w-full shadow-lg",children:[d.jsx(xt,{className:"text-center bg-primary text-white rounded-t-lg",children:d.jsx(At,{className:"text-2xl font-bold",children:"ログイン"})}),d.jsx(St,{className:"pt-6",children:d.jsx(MQ,{...a,children:d.jsxs("form",{onSubmit:a.handleSubmit(o),className:"space-y-4",children:[d.jsx(r_,{control:a.control,name:"username",render:({field:c})=>d.jsxs(YC,{children:[d.jsx(ZC,{children:"ユーザー名"}),d.jsx(XC,{children:d.jsx(at,{placeholder:"ユーザー名を入力",...c})}),d.jsx(ex,{})]})}),d.jsx(r_,{control:a.control,name:"password",render:({field:c})=>d.jsxs(YC,{children:[d.jsx(ZC,{children:"パスワード"}),d.jsx(XC,{children:d.jsx(at,{type:"password",placeholder:"パスワードを入力",...c})}),d.jsx(ex,{})]})}),d.jsx(ee,{type:"submit",className:"w-full bg-primary",disabled:e,children:e?"ログイン中...":"ログイン"})]})})}),d.jsxs(Rv,{className:"flex flex-col space-y-2 text-center text-sm text-neutral-500 border-t pt-4 mt-2",children:[d.jsx("p",{children:"デモ用ログイン情報:"}),d.jsx("p",{children:"管理者: niina / 0077"}),d.jsx("p",{children:"一般ユーザー: employee / employee123"})]})]})]})})}var In={},M0={},Ug={},O0={},Bt={},ou={},ni={},iF={},qg={},Hg={};Object.defineProperty(Hg,"__esModule",{value:!0});Hg.default=zQ;let rm;const LQ=new Uint8Array(16);function zQ(){if(!rm&&(rm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rm(LQ)}var Zo={},Sc={},Wg={};Object.defineProperty(Wg,"__esModule",{value:!0});Wg.default=void 0;var FQ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Wg.default=FQ;Object.defineProperty(Sc,"__esModule",{value:!0});Sc.default=void 0;var $Q=BQ(Wg);function BQ(e){return e&&e.__esModule?e:{default:e}}function VQ(e){return typeof e=="string"&&$Q.default.test(e)}var UQ=VQ;Sc.default=UQ;Object.defineProperty(Zo,"__esModule",{value:!0});Zo.default=void 0;Zo.unsafeStringify=sF;var qQ=HQ(Sc);function HQ(e){return e&&e.__esModule?e:{default:e}}const fn=[];for(let e=0;e<256;++e)fn.push((e+256).toString(16).slice(1));function sF(e,t=0){return fn[e[t+0]]+fn[e[t+1]]+fn[e[t+2]]+fn[e[t+3]]+"-"+fn[e[t+4]]+fn[e[t+5]]+"-"+fn[e[t+6]]+fn[e[t+7]]+"-"+fn[e[t+8]]+fn[e[t+9]]+"-"+fn[e[t+10]]+fn[e[t+11]]+fn[e[t+12]]+fn[e[t+13]]+fn[e[t+14]]+fn[e[t+15]]}function WQ(e,t=0){const n=sF(e,t);if(!(0,qQ.default)(n))throw TypeError("Stringified UUID is invalid");return n}var KQ=WQ;Zo.default=KQ;Object.defineProperty(qg,"__esModule",{value:!0});qg.default=void 0;var GQ=JQ(Hg),QQ=Zo;function JQ(e){return e&&e.__esModule?e:{default:e}}let i_,D0,L0=0,z0=0;function YQ(e,t,n){let r=t&&n||0;const i=t||new Array(16);e=e||{};let s=e.node||i_,a=e.clockseq!==void 0?e.clockseq:D0;if(s==null||a==null){const p=e.random||(e.rng||GQ.default)();s==null&&(s=i_=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),a==null&&(a=D0=(p[6]<<8|p[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:z0+1;const l=o-L0+(c-z0)/1e4;if(l<0&&e.clockseq===void 0&&(a=a+1&16383),(l<0||o>L0)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");L0=o,z0=c,D0=a,o+=122192928e5;const u=((o&268435455)*1e4+c)%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=u&255;const h=o/4294967296*1e4&268435455;i[r++]=h>>>8&255,i[r++]=h&255,i[r++]=h>>>24&15|16,i[r++]=h>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(let p=0;p<6;++p)i[r+p]=s[p];return t||(0,QQ.unsafeStringify)(i)}var ZQ=YQ;qg.default=ZQ;var Kg={},Uo={},df={};Object.defineProperty(df,"__esModule",{value:!0});df.default=void 0;var XQ=eJ(Sc);function eJ(e){return e&&e.__esModule?e:{default:e}}function tJ(e){if(!(0,XQ.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var nJ=tJ;df.default=nJ;Object.defineProperty(Uo,"__esModule",{value:!0});Uo.URL=Uo.DNS=void 0;Uo.default=aJ;var rJ=Zo,iJ=sJ(df);function sJ(e){return e&&e.__esModule?e:{default:e}}function oJ(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}const oF="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Uo.DNS=oF;const aF="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Uo.URL=aF;function aJ(e,t,n){function r(i,s,a,o){var c;if(typeof i=="string"&&(i=oJ(i)),typeof s=="string"&&(s=(0,iJ.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=n(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,a){o=o||0;for(let u=0;u<16;++u)a[o+u]=l[u];return a}return(0,rJ.unsafeStringify)(l)}try{r.name=e}catch{}return r.DNS=oF,r.URL=aF,r}var Gg={};Object.defineProperty(Gg,"__esModule",{value:!0});Gg.default=void 0;function cJ(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return lJ(uJ(dJ(e),e.length*8))}function lJ(e){const t=[],n=e.length*32,r="0123456789abcdef";for(let i=0;i<n;i+=8){const s=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);t.push(a)}return t}function cF(e){return(e+64>>>9<<4)+14+1}function uJ(e,t){e[t>>5]|=128<<t%32,e[cF(t)-1]=t;let n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(let a=0;a<e.length;a+=16){const o=n,c=r,l=i,u=s;n=Rn(n,r,i,s,e[a],7,-680876936),s=Rn(s,n,r,i,e[a+1],12,-389564586),i=Rn(i,s,n,r,e[a+2],17,606105819),r=Rn(r,i,s,n,e[a+3],22,-1044525330),n=Rn(n,r,i,s,e[a+4],7,-176418897),s=Rn(s,n,r,i,e[a+5],12,1200080426),i=Rn(i,s,n,r,e[a+6],17,-1473231341),r=Rn(r,i,s,n,e[a+7],22,-45705983),n=Rn(n,r,i,s,e[a+8],7,1770035416),s=Rn(s,n,r,i,e[a+9],12,-1958414417),i=Rn(i,s,n,r,e[a+10],17,-42063),r=Rn(r,i,s,n,e[a+11],22,-1990404162),n=Rn(n,r,i,s,e[a+12],7,1804603682),s=Rn(s,n,r,i,e[a+13],12,-40341101),i=Rn(i,s,n,r,e[a+14],17,-1502002290),r=Rn(r,i,s,n,e[a+15],22,1236535329),n=_n(n,r,i,s,e[a+1],5,-165796510),s=_n(s,n,r,i,e[a+6],9,-1069501632),i=_n(i,s,n,r,e[a+11],14,643717713),r=_n(r,i,s,n,e[a],20,-373897302),n=_n(n,r,i,s,e[a+5],5,-701558691),s=_n(s,n,r,i,e[a+10],9,38016083),i=_n(i,s,n,r,e[a+15],14,-660478335),r=_n(r,i,s,n,e[a+4],20,-405537848),n=_n(n,r,i,s,e[a+9],5,568446438),s=_n(s,n,r,i,e[a+14],9,-1019803690),i=_n(i,s,n,r,e[a+3],14,-187363961),r=_n(r,i,s,n,e[a+8],20,1163531501),n=_n(n,r,i,s,e[a+13],5,-1444681467),s=_n(s,n,r,i,e[a+2],9,-51403784),i=_n(i,s,n,r,e[a+7],14,1735328473),r=_n(r,i,s,n,e[a+12],20,-1926607734),n=Tn(n,r,i,s,e[a+5],4,-378558),s=Tn(s,n,r,i,e[a+8],11,-2022574463),i=Tn(i,s,n,r,e[a+11],16,1839030562),r=Tn(r,i,s,n,e[a+14],23,-35309556),n=Tn(n,r,i,s,e[a+1],4,-1530992060),s=Tn(s,n,r,i,e[a+4],11,1272893353),i=Tn(i,s,n,r,e[a+7],16,-155497632),r=Tn(r,i,s,n,e[a+10],23,-1094730640),n=Tn(n,r,i,s,e[a+13],4,681279174),s=Tn(s,n,r,i,e[a],11,-358537222),i=Tn(i,s,n,r,e[a+3],16,-722521979),r=Tn(r,i,s,n,e[a+6],23,76029189),n=Tn(n,r,i,s,e[a+9],4,-640364487),s=Tn(s,n,r,i,e[a+12],11,-421815835),i=Tn(i,s,n,r,e[a+15],16,530742520),r=Tn(r,i,s,n,e[a+2],23,-995338651),n=An(n,r,i,s,e[a],6,-198630844),s=An(s,n,r,i,e[a+7],10,1126891415),i=An(i,s,n,r,e[a+14],15,-1416354905),r=An(r,i,s,n,e[a+5],21,-57434055),n=An(n,r,i,s,e[a+12],6,1700485571),s=An(s,n,r,i,e[a+3],10,-1894986606),i=An(i,s,n,r,e[a+10],15,-1051523),r=An(r,i,s,n,e[a+1],21,-2054922799),n=An(n,r,i,s,e[a+8],6,1873313359),s=An(s,n,r,i,e[a+15],10,-30611744),i=An(i,s,n,r,e[a+6],15,-1560198380),r=An(r,i,s,n,e[a+13],21,1309151649),n=An(n,r,i,s,e[a+4],6,-145523070),s=An(s,n,r,i,e[a+11],10,-1120210379),i=An(i,s,n,r,e[a+2],15,718787259),r=An(r,i,s,n,e[a+9],21,-343485551),n=bo(n,o),r=bo(r,c),i=bo(i,l),s=bo(s,u)}return[n,r,i,s]}function dJ(e){if(e.length===0)return[];const t=e.length*8,n=new Uint32Array(cF(t));for(let r=0;r<t;r+=8)n[r>>5]|=(e[r/8]&255)<<r%32;return n}function bo(e,t){const n=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(n>>16)<<16|n&65535}function hJ(e,t){return e<<t|e>>>32-t}function Qg(e,t,n,r,i,s){return bo(hJ(bo(bo(t,e),bo(r,s)),i),n)}function Rn(e,t,n,r,i,s,a){return Qg(t&n|~t&r,e,t,i,s,a)}function _n(e,t,n,r,i,s,a){return Qg(t&r|n&~r,e,t,i,s,a)}function Tn(e,t,n,r,i,s,a){return Qg(t^n^r,e,t,i,s,a)}function An(e,t,n,r,i,s,a){return Qg(n^(t|~r),e,t,i,s,a)}var pJ=cJ;Gg.default=pJ;Object.defineProperty(Kg,"__esModule",{value:!0});Kg.default=void 0;var fJ=lF(Uo),mJ=lF(Gg);function lF(e){return e&&e.__esModule?e:{default:e}}const vJ=(0,fJ.default)("v3",48,mJ.default);var gJ=vJ;Kg.default=gJ;var Jg={},Yg={};Object.defineProperty(Yg,"__esModule",{value:!0});Yg.default=void 0;const yJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var SJ={randomUUID:yJ};Yg.default=SJ;Object.defineProperty(Jg,"__esModule",{value:!0});Jg.default=void 0;var s_=uF(Yg),wJ=uF(Hg),CJ=Zo;function uF(e){return e&&e.__esModule?e:{default:e}}function xJ(e,t,n){if(s_.default.randomUUID&&!t&&!e)return s_.default.randomUUID();e=e||{};const r=e.random||(e.rng||wJ.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return(0,CJ.unsafeStringify)(r)}var bJ=xJ;Jg.default=bJ;var Zg={},Xg={};Object.defineProperty(Xg,"__esModule",{value:!0});Xg.default=void 0;function EJ(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function F0(e,t){return e<<t|e>>>32-t}function PJ(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const a=unescape(encodeURIComponent(e));e=[];for(let o=0;o<a.length;++o)e.push(a.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,i=Math.ceil(r/16),s=new Array(i);for(let a=0;a<i;++a){const o=new Uint32Array(16);for(let c=0;c<16;++c)o[c]=e[a*64+c*4]<<24|e[a*64+c*4+1]<<16|e[a*64+c*4+2]<<8|e[a*64+c*4+3];s[a]=o}s[i-1][14]=(e.length-1)*8/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=(e.length-1)*8&4294967295;for(let a=0;a<i;++a){const o=new Uint32Array(80);for(let f=0;f<16;++f)o[f]=s[a][f];for(let f=16;f<80;++f)o[f]=F0(o[f-3]^o[f-8]^o[f-14]^o[f-16],1);let c=n[0],l=n[1],u=n[2],h=n[3],p=n[4];for(let f=0;f<80;++f){const g=Math.floor(f/20),v=F0(c,5)+EJ(g,l,u,h)+p+t[g]+o[f]>>>0;p=h,h=u,u=F0(l,30)>>>0,l=c,c=v}n[0]=n[0]+c>>>0,n[1]=n[1]+l>>>0,n[2]=n[2]+u>>>0,n[3]=n[3]+h>>>0,n[4]=n[4]+p>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var RJ=PJ;Xg.default=RJ;Object.defineProperty(Zg,"__esModule",{value:!0});Zg.default=void 0;var _J=dF(Uo),TJ=dF(Xg);function dF(e){return e&&e.__esModule?e:{default:e}}const AJ=(0,_J.default)("v5",80,TJ.default);var NJ=AJ;Zg.default=NJ;var ey={};Object.defineProperty(ey,"__esModule",{value:!0});ey.default=void 0;var IJ="00000000-0000-0000-0000-000000000000";ey.default=IJ;var ty={};Object.defineProperty(ty,"__esModule",{value:!0});ty.default=void 0;var jJ=kJ(Sc);function kJ(e){return e&&e.__esModule?e:{default:e}}function MJ(e){if(!(0,jJ.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var OJ=MJ;ty.default=OJ;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return a.default}});var t=u(qg),n=u(Kg),r=u(Jg),i=u(Zg),s=u(ey),a=u(ty),o=u(Sc),c=u(Zo),l=u(df);function u(h){return h&&h.__esModule?h:{default:h}}})(iF);Object.defineProperty(ni,"__esModule",{value:!0});ni.createNoDashGuid=ni.createGuid=void 0;const DJ=iF,hF=()=>DJ.v4();ni.createGuid=hF;const LJ=()=>hF().replace(new RegExp("-","g"),"").toUpperCase();ni.createNoDashGuid=LJ;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformEvent=e.EventType=void 0;const t=ni;(function(r){r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None"})(e.EventType||(e.EventType={}));class n{constructor(i,s){this.privName=i,this.privEventId=t.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=s,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}e.PlatformEvent=n})(ou);Object.defineProperty(Bt,"__esModule",{value:!0});Bt.AudioStreamNodeErrorEvent=Bt.AudioStreamNodeDetachedEvent=Bt.AudioStreamNodeAttachedEvent=Bt.AudioStreamNodeAttachingEvent=Bt.AudioStreamNodeEvent=Bt.AudioSourceErrorEvent=Bt.AudioSourceOffEvent=Bt.AudioSourceReadyEvent=Bt.AudioSourceInitializingEvent=Bt.AudioSourceEvent=void 0;const tx=ou;class au extends tx.PlatformEvent{constructor(t,n,r=tx.EventType.Info){super(t,r),this.privAudioSourceId=n}get audioSourceId(){return this.privAudioSourceId}}Bt.AudioSourceEvent=au;class zJ extends au{constructor(t){super("AudioSourceInitializingEvent",t)}}Bt.AudioSourceInitializingEvent=zJ;class FJ extends au{constructor(t){super("AudioSourceReadyEvent",t)}}Bt.AudioSourceReadyEvent=FJ;class $J extends au{constructor(t){super("AudioSourceOffEvent",t)}}Bt.AudioSourceOffEvent=$J;class BJ extends au{constructor(t,n){super("AudioSourceErrorEvent",t,tx.EventType.Error),this.privError=n}get error(){return this.privError}}Bt.AudioSourceErrorEvent=BJ;class hf extends au{constructor(t,n,r){super(t,n),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}}Bt.AudioStreamNodeEvent=hf;class VJ extends hf{constructor(t,n){super("AudioStreamNodeAttachingEvent",t,n)}}Bt.AudioStreamNodeAttachingEvent=VJ;class UJ extends hf{constructor(t,n){super("AudioStreamNodeAttachedEvent",t,n)}}Bt.AudioStreamNodeAttachedEvent=UJ;class qJ extends hf{constructor(t,n){super("AudioStreamNodeDetachedEvent",t,n)}}Bt.AudioStreamNodeDetachedEvent=qJ;class HJ extends hf{constructor(t,n,r){super("AudioStreamNodeErrorEvent",t,n),this.privError=r}get error(){return this.privError}}Bt.AudioStreamNodeErrorEvent=HJ;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.ConnectionMessageSentEvent=Jt.ConnectionMessageReceivedEvent=Jt.ConnectionEstablishErrorEvent=Jt.ConnectionErrorEvent=Jt.ConnectionClosedEvent=Jt.ConnectionEstablishedEvent=Jt.ConnectionStartEvent=Jt.ConnectionEvent=Jt.ServiceEvent=void 0;const ac=ou;class WJ extends ac.PlatformEvent{constructor(t,n,r=ac.EventType.Info){super(t,r),this.privJsonResult=n}get jsonString(){return this.privJsonResult}}Jt.ServiceEvent=WJ;class Xo extends ac.PlatformEvent{constructor(t,n,r=ac.EventType.Info){super(t,r),this.privConnectionId=n}get connectionId(){return this.privConnectionId}}Jt.ConnectionEvent=Xo;class KJ extends Xo{constructor(t,n,r){super("ConnectionStartEvent",t),this.privUri=n,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}}Jt.ConnectionStartEvent=KJ;class GJ extends Xo{constructor(t){super("ConnectionEstablishedEvent",t)}}Jt.ConnectionEstablishedEvent=GJ;class QJ extends Xo{constructor(t,n,r){super("ConnectionClosedEvent",t,ac.EventType.Debug),this.privReason=r,this.privStatusCode=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}Jt.ConnectionClosedEvent=QJ;class JJ extends Xo{constructor(t,n,r){super("ConnectionErrorEvent",t,ac.EventType.Debug),this.privMessage=n,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}}Jt.ConnectionErrorEvent=JJ;class YJ extends Xo{constructor(t,n,r){super("ConnectionEstablishErrorEvent",t,ac.EventType.Error),this.privStatusCode=n,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}Jt.ConnectionEstablishErrorEvent=YJ;class ZJ extends Xo{constructor(t,n,r){super("ConnectionMessageReceivedEvent",t),this.privNetworkReceivedTime=n,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}Jt.ConnectionMessageReceivedEvent=ZJ;class XJ extends Xo{constructor(t,n,r){super("ConnectionMessageSentEvent",t),this.privNetworkSentTime=n,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}Jt.ConnectionMessageSentEvent=XJ;var mE={},Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.ObjectDisposedError=Sn.InvalidOperationError=Sn.ArgumentNullError=void 0;class eY extends Error{constructor(t){super(t),this.name="ArgumentNull",this.message=t}}Sn.ArgumentNullError=eY;class tY extends Error{constructor(t){super(t),this.name="InvalidOperation",this.message=t}}Sn.InvalidOperationError=tY;class nY extends Error{constructor(t,n){super(n),this.name=t+"ObjectDisposed",this.message=n}}Sn.ObjectDisposedError=nY;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionMessage=e.MessageType=void 0;const t=Sn,n=ni;var r;(function(s){s[s.Text=0]="Text",s[s.Binary=1]="Binary"})(r=e.MessageType||(e.MessageType={}));class i{constructor(a,o,c,l){if(this.privBody=null,a===r.Text&&o&&typeof o!="string")throw new t.InvalidOperationError("Payload must be a string");if(a===r.Binary&&o&&!(o instanceof ArrayBuffer))throw new t.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=o,this.privHeaders=c||{},this.privId=l||n.createNoDashGuid(),this.messageType){case r.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===r.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===r.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}e.ConnectionMessage=i})(mE);var ny={};Object.defineProperty(ny,"__esModule",{value:!0});ny.ConnectionOpenResponse=void 0;class rY{constructor(t,n){this.privStatusCode=t,this.privReason=n}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}ny.ConnectionOpenResponse=rY;var ry={};Object.defineProperty(ry,"__esModule",{value:!0});ry.DeferralMap=void 0;class iY{constructor(){this.privMap={}}add(t,n){this.privMap[t]=n}getId(t){return this.privMap[t]}complete(t,n){try{this.privMap[t].resolve(n)}catch(r){this.privMap[t].reject(r)}finally{this.privMap[t]=void 0}}}ry.DeferralMap=iY;var cc={};Object.defineProperty(cc,"__esModule",{value:!0});cc.SendingAgentContextMessageEvent=cc.DialogEvent=void 0;const o_=ou;class pF extends o_.PlatformEvent{constructor(t,n=o_.EventType.Info){super(t,n)}}cc.DialogEvent=pF;class sY extends pF{constructor(t){super("SendingAgentContextMessageEvent"),this.privAgentConfig=t}get agentConfig(){return this.privAgentConfig}}cc.SendingAgentContextMessageEvent=sY;var iy={},pf={};Object.defineProperty(pf,"__esModule",{value:!0});pf.EventSource=void 0;const oY=Sn,aY=ni;class cY{constructor(t){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=t}onEvent(t){if(this.isDisposed())throw new oY.ObjectDisposedError("EventSource");if(this.metadata)for(const n in this.metadata)n&&t.metadata&&(t.metadata[n]||(t.metadata[n]=this.metadata[n]));for(const n in this.privEventListeners)n&&this.privEventListeners[n]&&this.privEventListeners[n](t)}attach(t){const n=aY.createNoDashGuid();return this.privEventListeners[n]=t,{detach:()=>(delete this.privEventListeners[n],Promise.resolve())}}attachListener(t){return this.attach(n=>t.onEvent(n))}attachConsoleListener(t){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(n=>t.onEvent(n)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}pf.EventSource=cY;Object.defineProperty(iy,"__esModule",{value:!0});iy.Events=void 0;const lY=Sn,uY=pf;class kp{static setEventSource(t){if(!t)throw new lY.ArgumentNullError("eventSource");kp.privInstance=t}static get instance(){return kp.privInstance}}iy.Events=kp;kp.privInstance=new uY.EventSource;var fF={};Object.defineProperty(fF,"__esModule",{value:!0});var mF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionState=void 0,function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"}(e.ConnectionState||(e.ConnectionState={}))})(mF);var vF={};Object.defineProperty(vF,"__esModule",{value:!0});var gF={};Object.defineProperty(gF,"__esModule",{value:!0});var yF={};Object.defineProperty(yF,"__esModule",{value:!0});var SF={};Object.defineProperty(SF,"__esModule",{value:!0});var wF={};Object.defineProperty(wF,"__esModule",{value:!0});var CF={};Object.defineProperty(CF,"__esModule",{value:!0});var xF={};Object.defineProperty(xF,"__esModule",{value:!0});var bF={};Object.defineProperty(bF,"__esModule",{value:!0});var ff={};Object.defineProperty(ff,"__esModule",{value:!0});ff.List=void 0;const dY=Sn;let hY=class Pa{constructor(t){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],t)for(const n of t)this.privList.push(n)}get(t){return this.throwIfDisposed(),this.privList[t]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(t){this.throwIfDisposed(),this.insertAt(this.privList.length,t)}insertAt(t,n){this.throwIfDisposed(),t===0?this.privList.unshift(n):t===this.privList.length?this.privList.push(n):this.privList.splice(t,0,n),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(t){return this.throwIfDisposed(),this.remove(t,1)[0]}remove(t,n){this.throwIfDisposed();const r=this.privList.splice(t,n);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[n]=t,{detach:()=>(delete this.privAddSubscriptions[n],Promise.resolve())}}onRemoved(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[n]=t,{detach:()=>(delete this.privRemoveSubscriptions[n],Promise.resolve())}}onDisposed(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[n]=t,{detach:()=>(delete this.privDisposedSubscriptions[n],Promise.resolve())}}join(t){return this.throwIfDisposed(),this.privList.join(t)}toArray(){const t=Array();return this.privList.forEach(n=>{t.push(n)}),t}any(t){return this.throwIfDisposed(),t?this.where(t).length()>0:this.length()>0}all(t){return this.throwIfDisposed(),this.where(t).length()===this.length()}forEach(t){this.throwIfDisposed();for(let n=0;n<this.length();n++)t(this.privList[n],n)}select(t){this.throwIfDisposed();const n=[];for(let r=0;r<this.privList.length;r++)n.push(t(this.privList[r],r));return new Pa(n)}where(t){this.throwIfDisposed();const n=new Pa;for(let r=0;r<this.privList.length;r++)t(this.privList[r],r)&&n.add(this.privList[r]);return n}orderBy(t){this.throwIfDisposed();const r=this.toArray().sort(t);return new Pa(r)}orderByDesc(t){return this.throwIfDisposed(),this.orderBy((n,r)=>t(r,n))}clone(){return this.throwIfDisposed(),new Pa(this.toArray())}concat(t){return this.throwIfDisposed(),new Pa(this.privList.concat(t.toArray()))}concatArray(t){return this.throwIfDisposed(),new Pa(this.privList.concat(t))}isDisposed(){return this.privList==null}dispose(t){this.isDisposed()||(this.privDisposeReason=t,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new dY.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(t){if(t)for(const n in t)n&&t[n]()}};ff.List=hY;var vE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.marshalPromiseToCallbacks=e.Sink=e.Deferred=e.PromiseResultEventSource=e.PromiseResult=e.PromiseState=void 0;var t;(function(o){o[o.None=0]="None",o[o.Resolved=1]="Resolved",o[o.Rejected=2]="Rejected"})(t=e.PromiseState||(e.PromiseState={}));class n{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(l=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=l)},l=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=l)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}e.PromiseResult=n;class r{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,l)=>{this.privOnSetResult=c,this.privOnSetError=l}}}e.PromiseResultEventSource=r;class i{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,l)=>{this.privResolve=c,this.privReject=l})}get promise(){return this.privPromise}}e.Deferred=i;class s{constructor(){this.privState=t.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new r,this.privPromiseResult=new n(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==t.None)throw new Error("'Cannot resolve a completed promise'");this.privState=t.Resolved,this.privPromiseResultEvents.setResult(c);for(let l=0;l<this.privSuccessHandlers.length;l++)this.executeSuccessCallback(c,this.privSuccessHandlers[l],this.privErrorHandlers[l]);this.detachHandlers()}reject(c){if(this.privState!==t.None)throw new Error("'Cannot reject a completed promise'");this.privState=t.Rejected,this.privPromiseResultEvents.setError(c);for(const l of this.privErrorHandlers)this.executeErrorCallback(c,l);this.detachHandlers()}on(c,l){c==null&&(c=()=>{}),this.privState===t.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(l)):(this.privState===t.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,l):this.privState===t.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,l),this.detachHandlers())}executeSuccessCallback(c,l,u){try{l(c)}catch(h){this.executeErrorCallback(`'Unhandled callback error: ${h}'`,u)}}executeErrorCallback(c,l){if(l)try{l(c)}catch(u){throw new Error(`'Unhandled callback error: ${u}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}e.Sink=s;function a(o,c,l){o.then(u=>{try{c&&c(u)}catch(h){if(l)try{if(h instanceof Error){const p=h;l(p.name+": "+p.message)}else l(h)}catch{}}},u=>{if(l)try{if(u instanceof Error){const h=u;l(h.name+": "+h.message)}else l(u)}catch{}})}e.marshalPromiseToCallbacks=a})(vE);var mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.Queue=void 0;const $0=Sn,B0=ff,a_=vE;var Jh;(function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"})(Jh||(Jh={}));class pY{constructor(t){this.privPromiseStore=new B0.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=t||new B0.List,this.privDetachables=[],this.privSubscribers=new B0.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(t){this.throwIfDispose(),this.enqueueFromPromise(new Promise(n=>n(t)))}enqueueFromPromise(t){this.throwIfDispose(),t.then(n=>{this.privList.add(n)},()=>{})}dequeue(){this.throwIfDispose();const t=new a_.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:Jh.Dequeue}),this.drain()),t.promise}peek(){this.throwIfDispose();const t=new a_.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:Jh.Peek}),this.drain()),t.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(t,n){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=n,this.privIsDisposing=!0;const r=this.privSubscribers;if(r){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}for(const i of this.privDetachables)await i.detach();if(this.privPromiseStore.length()>0&&t){const i=[];return this.privPromiseStore.toArray().forEach(s=>{i.push(s)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(s=>{t(s)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(t){await this.drainAndDispose(null,t)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const t=this.privSubscribers,n=this.privList;if(t&&n){for(;n.length()>0&&t.length()>0&&!this.privIsDisposing;){const r=t.removeFirst();if(r.type===Jh.Peek)r.deferral.resolve(n.first());else{const i=n.removeFirst();r.deferral.resolve(i)}}this.privSubscribers===t&&(this.privSubscribers=t),this.privList===n&&(this.privList=n)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new $0.InvalidOperationError(this.privDisposeReason):new $0.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new $0.InvalidOperationError("Queue disposing")}}mf.Queue=pY;var sy={};Object.defineProperty(sy,"__esModule",{value:!0});sy.RawWebsocketMessage=void 0;const im=mE,Nu=Sn,fY=ni;class mY{constructor(t,n,r){if(this.privPayload=null,!n)throw new Nu.ArgumentNullError("payload");if(t===im.MessageType.Binary&&Object.getPrototypeOf(n).constructor.name!=="ArrayBuffer")throw new Nu.InvalidOperationError("Payload must be ArrayBuffer");if(t===im.MessageType.Text&&typeof n!="string")throw new Nu.InvalidOperationError("Payload must be a string");this.privMessageType=t,this.privPayload=n,this.privId=r||fY.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===im.MessageType.Binary)throw new Nu.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===im.MessageType.Text)throw new Nu.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}sy.RawWebsocketMessage=mY;var oy={};Object.defineProperty(oy,"__esModule",{value:!0});oy.RiffPcmEncoder=void 0;class vY{constructor(t,n){this.privActualSampleRate=t,this.privDesiredSampleRate=n}encode(t){const n=this.downSampleAudioFrame(t,this.privActualSampleRate,this.privDesiredSampleRate);if(!n)return null;const r=n.length*2,i=new ArrayBuffer(r),s=new DataView(i);return this.floatTo16BitPCM(s,0,n),i}setString(t,n,r){for(let i=0;i<r.length;i++)t.setUint8(n+i,r.charCodeAt(i))}floatTo16BitPCM(t,n,r){for(let i=0;i<r.length;i++,n+=2){const s=Math.max(-1,Math.min(1,r[i]));t.setInt16(n,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(t,n,r){if(!t)return null;if(r===n||r>n)return t;const i=n/r,s=Math.round(t.length/i),a=new Float32Array(s);let o=0,c=0;for(;c<s;){const l=Math.round((c+1)*i);let u=0,h=0;for(;o<l&&o<t.length;)u+=t[o++],h++;a[c++]=u/h}return a}}oy.RiffPcmEncoder=vY;var ay={};Object.defineProperty(ay,"__esModule",{value:!0});ay.Stream=void 0;const c_=Sn,gY=ni,l_=mf;class yY{constructor(t){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=t||gY.createNoDashGuid(),this.privReaderQueue=new l_.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(t){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(t)}catch{}}read(){if(this.privIsReadEnded)throw new c_.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async t=>((t===void 0||t.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),t))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new l_.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new c_.InvalidOperationError("Stream closed")}}ay.Stream=yY;var cy={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"}(e.TranslationStatus||(e.TranslationStatus={}))})(cy);var Iu={},u_;function SY(){if(u_)return Iu;u_=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.ChunkedArrayBufferStream=void 0;const e=ke();let t=class extends e.Stream{constructor(r,i){super(i),this.privTargetChunkSize=Math.round(r),this.privNextBufferReadyBytes=0}writeStreamChunk(r){if(r.isEnd||this.privNextBufferReadyBytes===0&&r.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(r);return}let i=0;for(;i<r.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=r.timeReceived);const s=Math.min(r.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(r.buffer.slice(i,s+i));a.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=s,i+=s,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return Iu.ChunkedArrayBufferStream=t,Iu}var EF={};Object.defineProperty(EF,"__esModule",{value:!0});var ly={};Object.defineProperty(ly,"__esModule",{value:!0});ly.Timeout=void 0;class jn{static load(){const t=new Map([[0,()=>{}]]),n=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(i);return s.addEventListener("message",({data:c})=>{if(jn.isCallNotification(c)){const{params:{timerId:l}}=c,u=t.get(l);if(typeof u=="number"){const h=n.get(u);if(h===void 0||h!==l)throw new Error("The timer is in an undefined state.")}else if(typeof u<"u")u(),t.delete(l);else throw new Error("The timer is in an undefined state.")}else if(jn.isClearResponse(c)){const{id:l}=c,u=n.get(l);if(u===void 0)throw new Error("The timer is in an undefined state.");n.delete(l),t.delete(u)}else{const{error:{message:l}}=c;throw new Error(l)}}),{clearTimeout:c=>{const l=Math.random();n.set(l,c),t.set(c,l),s.postMessage({id:l,method:"clear",params:{timerId:c}})},setTimeout:(c,l)=>{const u=Math.random();return t.set(u,c),s.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u}}),u}}}static loadWorkerTimers(){return()=>(jn.workerTimers!==null||(jn.workerTimers=jn.load()),jn.workerTimers)}static isCallNotification(t){return t.method!==void 0&&t.method==="call"}static isClearResponse(t){return t.error===null&&typeof t.id=="number"}}ly.Timeout=jn;jn.workerTimers=null;jn.clearTimeout=e=>jn.timers().clearTimeout(e);jn.setTimeout=(e,t)=>jn.timers().setTimeout(e,t);jn.timers=jn.loadWorkerTimers();var it={};Object.defineProperty(it,"__esModule",{value:!0});it.OCSPCacheUpdateErrorEvent=it.OCSPResponseRetrievedEvent=it.OCSPCacheFetchErrorEvent=it.OCSPVerificationFailedEvent=it.OCSPCacheHitEvent=it.OCSPCacheEntryNeedsRefreshEvent=it.OCSPCacheEntryExpiredEvent=it.OCSPWSUpgradeStartedEvent=it.OCSPStapleReceivedEvent=it.OCSPCacheUpdateCompleteEvent=it.OCSPDiskCacheStoreEvent=it.OCSPMemoryCacheStoreEvent=it.OCSPCacheUpdateNeededEvent=it.OCSPDiskCacheHitEvent=it.OCSPCacheMissEvent=it.OCSPMemoryCacheHitEvent=it.OCSPEvent=void 0;const Cn=ou;class xn extends Cn.PlatformEvent{constructor(t,n,r){super(t,n),this.privSignature=r}}it.OCSPEvent=xn;class wY extends xn{constructor(t){super("OCSPMemoryCacheHitEvent",Cn.EventType.Debug,t)}}it.OCSPMemoryCacheHitEvent=wY;class CY extends xn{constructor(t){super("OCSPCacheMissEvent",Cn.EventType.Debug,t)}}it.OCSPCacheMissEvent=CY;class xY extends xn{constructor(t){super("OCSPDiskCacheHitEvent",Cn.EventType.Debug,t)}}it.OCSPDiskCacheHitEvent=xY;class bY extends xn{constructor(t){super("OCSPCacheUpdateNeededEvent",Cn.EventType.Debug,t)}}it.OCSPCacheUpdateNeededEvent=bY;class EY extends xn{constructor(t){super("OCSPMemoryCacheStoreEvent",Cn.EventType.Debug,t)}}it.OCSPMemoryCacheStoreEvent=EY;class PY extends xn{constructor(t){super("OCSPDiskCacheStoreEvent",Cn.EventType.Debug,t)}}it.OCSPDiskCacheStoreEvent=PY;class RY extends xn{constructor(t){super("OCSPCacheUpdateCompleteEvent",Cn.EventType.Debug,t)}}it.OCSPCacheUpdateCompleteEvent=RY;class _Y extends xn{constructor(){super("OCSPStapleReceivedEvent",Cn.EventType.Debug,"")}}it.OCSPStapleReceivedEvent=_Y;class TY extends xn{constructor(t){super("OCSPWSUpgradeStartedEvent",Cn.EventType.Debug,t)}}it.OCSPWSUpgradeStartedEvent=TY;class AY extends xn{constructor(t,n){super("OCSPCacheEntryExpiredEvent",Cn.EventType.Debug,t),this.privExpireTime=n}}it.OCSPCacheEntryExpiredEvent=AY;class NY extends xn{constructor(t,n,r){super("OCSPCacheEntryNeedsRefreshEvent",Cn.EventType.Debug,t),this.privExpireTime=r,this.privStartTime=n}}it.OCSPCacheEntryNeedsRefreshEvent=NY;class IY extends xn{constructor(t,n,r){super("OCSPCacheHitEvent",Cn.EventType.Debug,t),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=n,this.privStartTimeString=new Date(n).toLocaleTimeString()}}it.OCSPCacheHitEvent=IY;class jY extends xn{constructor(t,n){super("OCSPVerificationFailedEvent",Cn.EventType.Debug,t),this.privError=n}}it.OCSPVerificationFailedEvent=jY;class kY extends xn{constructor(t,n){super("OCSPCacheFetchErrorEvent",Cn.EventType.Debug,t),this.privError=n}}it.OCSPCacheFetchErrorEvent=kY;class MY extends xn{constructor(t){super("OCSPResponseRetrievedEvent",Cn.EventType.Debug,t)}}it.OCSPResponseRetrievedEvent=MY;class OY extends xn{constructor(t,n){super("OCSPCacheUpdateErrorEvent",Cn.EventType.Debug,t),this.privError=n}}it.OCSPCacheUpdateErrorEvent=OY;var ju={},d_;function DY(){if(d_)return ju;d_=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.BackgroundEvent=void 0;const e=ke();class t extends e.PlatformEvent{constructor(r){super("BackgroundEvent",e.EventType.Error),this.privError=r}get error(){return this.privError}}return ju.BackgroundEvent=t,ju}var h_;function ke(){return h_||(h_=1,function(e){var t=nt&&nt.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[a]}})}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),n=nt&&nt.__exportStar||function(i,s){for(var a in i)a!=="default"&&!s.hasOwnProperty(a)&&t(s,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),n(Bt,e),n(Jt,e),n(mE,e),n(ny,e),n(ry,e),n(cc,e),n(Sn,e),n(iy,e),n(pf,e),n(ni,e),n(fF,e),n(mF,e),n(vF,e),n(gF,e),n(yF,e),n(SF,e),n(wF,e),n(CF,e),n(xF,e),n(bF,e),n(ff,e),n(ou,e),n(vE,e),n(mf,e),n(sy,e),n(oy,e),n(ay,e);var r=cy;Object.defineProperty(e,"TranslationStatus",{enumerable:!0,get:function(){return r.TranslationStatus}}),n(SY(),e),n(EF,e),n(ly,e),n(it,e),n(DY(),e)}(O0)),O0}var dn={};Object.defineProperty(dn,"__esModule",{value:!0});dn.HeaderNames=void 0;class Ai{}dn.HeaderNames=Ai;Ai.AuthKey="Ocp-Apim-Subscription-Key";Ai.Authorization="Authorization";Ai.SpIDAuthKey="Apim-Subscription-Id";Ai.ConnectionId="X-ConnectionId";Ai.ContentType="Content-Type";Ai.CustomCommandsAppId="X-CommandsAppId";Ai.Path="Path";Ai.RequestId="X-RequestId";Ai.RequestStreamId="X-StreamId";Ai.RequestTimestamp="X-Timestamp";var cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.AuthInfo=void 0;class LY{constructor(t,n){this.privHeaderName=t,this.privToken=n}get headerName(){return this.privHeaderName}get token(){return this.privToken}}cu.AuthInfo=LY;Object.defineProperty(Ug,"__esModule",{value:!0});Ug.CognitiveSubscriptionKeyAuthentication=void 0;const zY=ke(),FY=dn,$Y=cu;class BY{constructor(t){if(!t)throw new zY.ArgumentNullError("subscriptionKey");this.privAuthInfo=new $Y.AuthInfo(FY.HeaderNames.AuthKey,t)}fetch(t){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(t){return Promise.resolve(this.privAuthInfo)}}Ug.CognitiveSubscriptionKeyAuthentication=BY;var uy={};Object.defineProperty(uy,"__esModule",{value:!0});uy.CognitiveTokenAuthentication=void 0;const p_=ke(),f_=cu,m_=dn;class Mp{constructor(t,n){if(!t)throw new p_.ArgumentNullError("fetchCallback");if(!n)throw new p_.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=t,this.privFetchOnExpiryCallback=n}fetch(t){return this.privFetchCallback(t).then(n=>new f_.AuthInfo(m_.HeaderNames.Authorization,n===void 0?void 0:Mp.privTokenPrefix+n))}fetchOnExpiry(t){return this.privFetchOnExpiryCallback(t).then(n=>new f_.AuthInfo(m_.HeaderNames.Authorization,n===void 0?void 0:Mp.privTokenPrefix+n))}}uy.CognitiveTokenAuthentication=Mp;Mp.privTokenPrefix="Bearer ";var PF={};Object.defineProperty(PF,"__esModule",{value:!0});var RF={};Object.defineProperty(RF,"__esModule",{value:!0});var ku={},V0={},dy={};const VY={},UY=Object.freeze(Object.defineProperty({__proto__:null,default:VY},Symbol.toStringTag,{value:"Module"})),wc=MV(UY);var gE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;const t=ke();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.EventType}})})(gE);var $e={};Object.defineProperty($e,"__esModule",{value:!0});$e.Contracts=void 0;class to{static throwIfNullOrUndefined(t,n){if(t==null)throw new Error("throwIfNullOrUndefined:"+n)}static throwIfNull(t,n){if(t===null)throw new Error("throwIfNull:"+n)}static throwIfNullOrWhitespace(t,n){if(to.throwIfNullOrUndefined(t,n),(""+t).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}static throwIfNullOrTooLong(t,n,r){if(to.throwIfNullOrUndefined(t,n),(""+t).length>r)throw new Error("throwIfNullOrTooLong:"+n+" (more than "+r.toString()+" characters)")}static throwIfNullOrTooShort(t,n,r){if(to.throwIfNullOrUndefined(t,n),(""+t).length<r)throw new Error("throwIfNullOrTooShort:"+n+" (less than "+r.toString()+" characters)")}static throwIfDisposed(t){if(t)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(t,n){if(to.throwIfNullOrUndefined(t,n),t.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(const r of t)to.throwIfNullOrWhitespace(r,n)}static throwIfFileDoesNotExist(t,n){to.throwIfNullOrWhitespace(t,n)}static throwIfNotUndefined(t,n){if(t!==void 0)throw new Error("throwIfNotUndefined:"+n)}}$e.Contracts=to;var qY=nt&&nt.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),HY=nt&&nt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),WY=nt&&nt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&qY(t,e,n);return HY(t,e),t};Object.defineProperty(dy,"__esModule",{value:!0});dy.ConsoleLoggingListener=void 0;const v_=WY(wc),Mu=gE,KY=$e;class GY{constructor(t=Mu.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=t}set logPath(t){KY.Contracts.throwIfNullOrUndefined(v_.openSync,`
File System access not available`),this.privLogPath=t}set enableConsoleOutput(t){this.privEnableConsoleOutput=t}onEvent(t){if(t.eventType>=this.privLogLevelFilter){const n=this.toString(t);if(this.logCallback&&this.logCallback(n),this.privLogPath&&v_.writeFileSync(this.privLogPath,n+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(t.eventType){case Mu.LogLevel.Debug:console.debug(n);break;case Mu.LogLevel.Info:console.info(n);break;case Mu.LogLevel.Warning:console.warn(n);break;case Mu.LogLevel.Error:console.error(n);break;default:console.log(n);break}}}toString(t){const n=[`${t.eventTime}`,`${t.name}`],r=t;for(const i in r)if(i&&t.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){const s=r[i];let a="<NULL>";s!=null&&(typeof s=="number"||typeof s=="string"?a=s.toString():a=JSON.stringify(s)),n.push(`${i}: ${a}`)}return n.join(" | ")}}dy.ConsoleLoggingListener=GY;var _F={};Object.defineProperty(_F,"__esModule",{value:!0});var U0={},ea={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AudioStreamFormatImpl=e.AudioStreamFormat=e.AudioFormatTag=void 0;var t;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS",i[i.AMR_WB=11]="AMR_WB",i[i.G722=12]="G722"})(t=e.AudioFormatTag||(e.AudioFormatTag={}));class n{static getDefaultInputFormat(){return r.getDefaultInputFormat()}static getWaveFormat(s,a,o,c){return new r(s,a,o,c)}static getWaveFormatPCM(s,a,o){return new r(s,a,o)}}e.AudioStreamFormat=n;class r extends n{constructor(s=16e3,a=16,o=1,c=t.PCM){super();let l=!0;switch(c){case t.PCM:this.formatTag=1;break;case t.ALaw:this.formatTag=6;break;case t.MuLaw:this.formatTag=7;break;default:l=!1}if(this.bitsPerSample=a,this.samplesPerSec=s,this.channels=o,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),l){this.privHeader=new ArrayBuffer(44);const u=new DataView(this.privHeader);this.setString(u,0,"RIFF"),u.setUint32(4,0,!0),this.setString(u,8,"WAVEfmt "),u.setUint32(16,16,!0),u.setUint16(20,this.formatTag,!0),u.setUint16(22,this.channels,!0),u.setUint32(24,this.samplesPerSec,!0),u.setUint32(28,this.avgBytesPerSec,!0),u.setUint16(32,this.channels*(this.bitsPerSample/8),!0),u.setUint16(34,this.bitsPerSample,!0),this.setString(u,36,"data"),u.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new r}static getAudioContext(s){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return s!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:s}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(s,a,o){for(let c=0;c<o.length;c++)s.setUint8(a+c,o.charCodeAt(c))}}e.AudioStreamFormatImpl=r})(ea);var g_;function QY(){return g_||(g_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicAudioSource=e.AudioWorkletSourceURLPropertyName=void 0;const t=we(),n=ke(),r=ea;e.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,o,c,l){this.privRecorder=a,this.deviceId=o,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||n.createNoDashGuid(),this.privEvents=new n.EventSource,this.privMediaStream=l||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new n.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const l=c;this.privInitializeDeferral.reject(l.name+": "+l.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let o=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(o=(c,l,u)=>{a.mediaDevices.getUserMedia(c).then(l).catch(u)}),o){const c=()=>{this.onEvent(new n.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):o({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},l=>{this.privMediaStream=l,this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},l=>{const u=`Error occurred during microphone initialization: ${l}`;this.privInitializeDeferral.reject(u),this.onEvent(new n.AudioSourceErrorEvent(this.privId,u))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(l=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${l}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new n.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new n.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(o=>(this.onEvent(new n.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(o.readEnded(),delete this.privStreams[a],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>o.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const o=this.privStreams[a];o&&o.close()}this.onEvent(new n.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(a,o){if(a===e.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(o);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const o=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(o===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new n.Deferred;return navigator.mediaDevices.enumerateDevices().then(l=>{for(const u of l)if(u.deviceId===o){this.privMicrophoneLabel=u.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const o=new n.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=o;try{this.privRecorder.record(this.privContext,this.privMediaStream,o)}catch(l){throw this.onEvent(new n.AudioStreamNodeErrorEvent(this.privId,a,l)),l}return o}onEvent(a){this.privEvents.onEvent(a),n.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=r.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}e.MicAudioSource=i,i.AUDIOFORMAT=r.AudioStreamFormat.getDefaultInputFormat()}(U0)),U0}var Ou={},y_;function JY(){if(y_)return Ou;y_=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.FileAudioSource=void 0;const e=we(),t=ke(),n=ea;let r=class{constructor(s,a,o){this.privStreams={},this.privHeaderEnd=44,this.privId=o||t.createNoDashGuid(),this.privEvents=new t.EventSource,this.privSource=s,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=s.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const s=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(s,"")),Promise.reject(s)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(s){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,s));const a=await this.upload(s);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,s)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[s],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,s)),await this.turnOff()},id:()=>s,read:()=>a.read()})}detach(s){s&&this.privStreams[s]&&(this.privStreams[s].close(),delete this.privStreams[s],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,s)))}turnOff(){for(const s in this.privStreams)if(s){const a=this.privStreams[s];a&&!a.isClosed&&a.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(s=>Promise.resolve({bitspersample:s.bitsPerSample,channelcount:s.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:s.samplesPerSec,type:e.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),o=new t.Deferred,c=l=>{const u=new DataView(l),h=y=>String.fromCharCode(u.getUint8(y),u.getUint8(y+1),u.getUint8(y+2),u.getUint8(y+3));if(h(0)!=="RIFF"){o.reject("Invalid WAV header in file, RIFF was not found");return}if(h(8)!=="WAVE"||h(12)!=="fmt "){o.reject("Invalid WAV header in file, WAVEfmt was not found");return}const p=u.getInt32(16,!0),f=u.getUint16(22,!0),g=u.getUint32(24,!0),v=u.getUint16(34,!0);let w=36+Math.max(p-16,0);for(;h(w)!=="data";w+=2)if(w>4288){o.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=w+8,o.resolve(n.AudioStreamFormat.getWaveFormatPCM(g,v,f))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const l=new FileReader;l.onload=u=>{const h=u.target.result;c(h)},l.readAsArrayBuffer(a)}else{const l=a;c(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength))}return o.promise}async upload(s){const a=o=>{const c=`Error occurred while processing '${this.privFilename}'. ${o}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,s,c)),new Error(c)};try{await this.turnOn();const o=await this.privAudioFormatPromise,c=new t.ChunkedArrayBufferStream(o.avgBytesPerSec/10,s);this.privStreams[s]=c;const l=this.privSource.slice(this.privHeaderEnd),u=h=>{c.isClosed||(c.writeStreamChunk({buffer:h,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&l instanceof Blob){const h=new FileReader;h.onerror=p=>a(p.toString()),h.onload=p=>{const f=p.target.result;u(f)},h.readAsArrayBuffer(l)}else{const h=l;u(h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength))}return c}catch(o){a(o)}}onEvent(s){this.privEvents.onEvent(s),t.Events.instance.onEvent(s)}};return Ou.FileAudioSource=r,Ou}var hy={};Object.defineProperty(hy,"__esModule",{value:!0});hy.PcmRecorder=void 0;const YY=ke();class ZY{constructor(t){this.privStopInputOnRelease=t}record(t,n,r){const s=new YY.RiffPcmEncoder(t.sampleRate,16e3),a=t.createMediaStreamSource(n),o=()=>{const l=(()=>{let u=0;try{return t.createScriptProcessor(u,1,1)}catch{u=2048;let p=t.sampleRate;for(;u<16384&&p>=32e3;)u<<=1,p>>=1;return t.createScriptProcessor(u,1,1)}})();l.onaudioprocess=u=>{const h=u.inputBuffer.getChannelData(0);if(r&&!r.isClosed){const p=s.encode(h);p&&r.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}},a.connect(l),l.connect(t.destination),this.privMediaResources={scriptProcessorNode:l,source:a,stream:n}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(t.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const l=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,u=new Blob([l],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(u)}t.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const l=new AudioWorkletNode(t,"speech-processor");l.port.onmessage=u=>{const h=u.data;if(r&&!r.isClosed){const p=s.encode(h);p&&r.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}},a.connect(l),l.connect(t.destination),this.privMediaResources={scriptProcessorNode:l,source:a,stream:n}}).catch(()=>{o()})}else try{o()}catch(l){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${l}`)}}releaseMediaResources(t){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(t.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(n=>n.stop()),this.privMediaResources.source=null))}setWorkletUrl(t){this.privSpeechProcessorScript=t}}hy.PcmRecorder=ZY;var py={},vf={},XY=nt&&nt.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),eZ=nt&&nt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),TF=nt&&nt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&XY(t,e,n);return eZ(t,e),t},yE=nt&&nt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vf,"__esModule",{value:!0});vf.WebsocketMessageAdapter=void 0;const tZ=TF(wc),nZ=TF(wc),rZ=yE(wc),iZ=yE(wc),sZ=yE(wc),oZ=dn,Ve=ke();class Op{constructor(t,n,r,i,s,a){if(!t)throw new Ve.ArgumentNullError("uri");if(!r)throw new Ve.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new Ve.EventSource,this.privConnectionId=n,this.privMessageFormatter=r,this.privConnectionState=Ve.ConnectionState.None,this.privUri=t,this.privHeaders=s,this.privEnableCompression=a,this.privHeaders[oZ.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===Ve.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new Ve.Deferred,this.privCertificateValidatedDeferral=new Ve.Deferred,this.privConnectionState=Ve.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Op.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const t={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),t.agent=this.getAgent();let r=new URL(this.privUri).protocol;(r==null?void 0:r.toLocaleLowerCase())==="wss:"?r="https:":(r==null?void 0:r.toLocaleLowerCase())==="ws:"&&(r="http:"),t.agent.protocol=r,this.privWebsocketClient=new sZ.default(this.privUri,t)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new Ve.Queue,this.privDisconnectDeferral=new Ve.Deferred,this.privSendMessageQueue=new Ve.Queue,this.processSendQueue().catch(t=>{Ve.Events.instance.onEvent(new Ve.BackgroundEvent(t))})}catch(t){return this.privConnectionEstablishDeferral.resolve(new Ve.ConnectionOpenResponse(500,t)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new Ve.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=Ve.ConnectionState.Connected,this.onEvent(new Ve.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new Ve.ConnectionOpenResponse(200,""))},t=>{this.privConnectionEstablishDeferral.reject(t)})},this.privWebsocketClient.onerror=t=>{this.onEvent(new Ve.ConnectionErrorEvent(this.privConnectionId,t.message,t.type)),this.privLastErrorReceived=t.message},this.privWebsocketClient.onclose=t=>{this.privConnectionState===Ve.ConnectionState.Connecting?(this.privConnectionState=Ve.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new Ve.ConnectionOpenResponse(t.code,t.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=Ve.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new Ve.ConnectionClosedEvent(this.privConnectionId,t.code,t.reason))),this.onClose(t.code,t.reason).catch(n=>{Ve.Events.instance.onEvent(new Ve.BackgroundEvent(n))})},this.privWebsocketClient.onmessage=t=>{const n=new Date().toISOString();if(this.privConnectionState===Ve.ConnectionState.Connected){const r=new Ve.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),t.data instanceof ArrayBuffer){const i=new Ve.RawWebsocketMessage(Ve.MessageType.Binary,t.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new Ve.ConnectionMessageReceivedEvent(this.privConnectionId,n,s)),r.resolve(s)},s=>{r.reject(`Invalid binary message format. Error: ${s}`)})}else{const i=new Ve.RawWebsocketMessage(Ve.MessageType.Text,t.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new Ve.ConnectionMessageReceivedEvent(this.privConnectionId,n,s)),r.resolve(s)},s=>{r.reject(`Invalid text message format. Error: ${s}`)})}}},this.privConnectionEstablishDeferral.promise}send(t){if(this.privConnectionState!==Ve.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${Ve.ConnectionState[this.privConnectionState]} state`);const n=new Ve.Deferred,r=new Ve.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(t).then(i=>{r.resolve({Message:t,RawWebsocketMessage:i,sendStatusDeferral:n})},i=>{r.reject(`Error formatting the message. ${i}`)}),n.promise}read(){return this.privConnectionState!==Ve.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(t){if(this.privWebsocketClient)this.privConnectionState!==Ve.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,t||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(t){try{if(!t)return Promise.resolve();if(this.onEvent(new Ve.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),t.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(t.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+t.Message.id+" "+new Error().stack);return Promise.resolve()}catch(n){return Promise.reject(`websocket send error: ${n}`)}}async onClose(t,n){const r=`Connection closed. ${t}: ${n}`;this.privConnectionState=Ve.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},r),await this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(r)},r)}async processSendQueue(){for(;;){const n=await this.privSendMessageQueue.dequeue();if(!n)return;try{await this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(r){n.sendStatusDeferral.reject(r)}}}onEvent(t){this.privConnectionEvents.onEvent(t),Ve.Events.instance.onEvent(t)}getAgent(){const t=new rZ.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(t.proxyInfo=this.proxyInfo),t}static GetProxyAgent(t){const n={host:t.HostName,port:t.Port};return t.UserName?n.headers={"Proxy-Authentication":"Basic "+new Buffer(`${t.UserName}:${t.Password===void 0?"":t.Password}`).toString("base64")}:n.headers={},n.headers.requestOCSP="true",new iZ.default(n)}createConnection(t,n){let r;if(n={...n,requestOCSP:!0,servername:n.host},this.proxyInfo){const s=Op.GetProxyAgent(this.proxyInfo);r=new Promise((a,o)=>{s.callback(t,n,(c,l)=>{c?o(c):a(l)})})}else n.secureEndpoint?r=Promise.resolve(nZ.connect(n)):r=Promise.resolve(tZ.connect(n));return r}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}vf.WebsocketMessageAdapter=Op;Op.forceNpmWebSocket=!1;Object.defineProperty(py,"__esModule",{value:!0});py.WebsocketConnection=void 0;const q0=ke(),aZ=vf;class cZ{constructor(t,n,r,i,s,a=!1,o){if(this.privIsDisposed=!1,!t)throw new q0.ArgumentNullError("uri");if(!i)throw new q0.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",l=0;if(n){for(const u in n)if(u){c+=l===0&&t.indexOf("?")===-1?"?":"&";const h=encodeURIComponent(u);c+=h;let p=n[u];p&&(p=encodeURIComponent(p),c+=`=${p}`),l++}}if(r){for(const u in r)if(u){c+=l===0&&t.indexOf("?")===-1?"?":"&";const h=encodeURIComponent(r[u]);c+=`${u}=${h}`,l++}}this.privUri=t+c,this.privId=o||q0.createNoDashGuid(),this.privConnectionMessageAdapter=new aZ.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,r,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(t){return this.privConnectionMessageAdapter.send(t)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}py.WebsocketConnection=cZ;var fy={};Object.defineProperty(fy,"__esModule",{value:!0});fy.ReplayableAudioNode=void 0;class lZ{constructor(t,n){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=t,this.privBytesPerSecond=n}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const t=this.privReplayOffset-this.privBufferStartOffset;let n=Math.round(t*this.privBytesPerSecond*1e-7);n%2!==0&&n++;let r=0;for(;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){const i=this.privBuffers[r].chunk.buffer.slice(n);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(t=>(t&&t.buffer&&(this.privBuffers.push(new uZ(t,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=t.buffer.byteLength),t))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(t){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=t;const n=t-this.privBufferStartOffset;let r=Math.round(n*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&r>=this.privBuffers[i].chunk.buffer.byteLength;)r-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(t-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(t){if(t<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const n of this.privBuffers){const r=n.byteOffset/this.privBytesPerSecond*1e7,i=r+n.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(t>=r&&t<=i)return n.chunk.timeReceived}return 0}}fy.ReplayableAudioNode=lZ;class uZ{constructor(t,n,r){this.chunk=t,this.serial=n,this.byteOffset=r}}var Du={},H0={},ds={},gf={},dZ=nt&&nt.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),hZ=nt&&nt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),pZ=nt&&nt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&dZ(t,e,n);return hZ(t,e),t};Object.defineProperty(gf,"__esModule",{value:!0});gf.AudioFileWriter=void 0;const Lu=pZ(wc),W0=$e;class fZ{constructor(t){W0.Contracts.throwIfNullOrUndefined(Lu.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=Lu.openSync(t,"w")}set format(t){W0.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=t;let n=0;this.privAudioFormat.hasHeader&&(n=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=Lu.createWriteStream("",{fd:this.privFd,start:n,autoClose:!1}))}write(t){W0.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(t.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),Lu.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),Lu.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}gf.AudioFileWriter=fZ;var yr={},S_;function AF(){if(S_)return yr;S_=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.PullAudioInputStreamImpl=yr.PullAudioInputStream=yr.PushAudioInputStreamImpl=yr.PushAudioInputStream=yr.AudioInputStream=void 0;const e=we(),t=ke(),n=ni,r=ae(),i=ea;let s=class{constructor(){}static createPushStream(h){return a.create(h)}static createPullStream(h,p){return c.create(h,p)}};yr.AudioInputStream=s;class a extends s{static create(h){return new o(h)}}yr.PushAudioInputStream=a;class o extends a{constructor(h){super(),h===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=h,this.privEvents=new t.EventSource,this.privId=n.createNoDashGuid(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(h){this.privStream.writeStreamChunk({buffer:h,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(h){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,h)),await this.turnOn();const p=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,h)),{detach:async()=>(this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,h)),this.turnOff()),id:()=>h,read:()=>p.read()}}detach(h){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,h))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(h){this.privEvents.onEvent(h),t.Events.instance.onEvent(h)}toBuffer(h){const p=Buffer.alloc(h.byteLength),f=new Uint8Array(h);for(let g=0;g<p.length;++g)p[g]=f[g];return p}}yr.PushAudioInputStreamImpl=o;class c extends s{constructor(){super()}static create(h,p){return new l(h,p)}}yr.PullAudioInputStream=c;class l extends c{constructor(h,p){super(),p===void 0?this.privFormat=r.AudioStreamFormat.getDefaultInputFormat():this.privFormat=p,this.privEvents=new t.EventSource,this.privId=n.createNoDashGuid(),this.privCallback=h,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(h){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,h)),await this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,h)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,h)),this.turnOff()),id:()=>h,read:()=>{let p=0,f;for(;p<this.privBufferSize;){const g=new ArrayBuffer(this.privBufferSize-p),v=this.privCallback.read(g);if(f===void 0?f=g:new Int8Array(f).set(new Int8Array(g),p),v===0)break;p+=v}return Promise.resolve({buffer:f.slice(0,p),isEnd:this.privIsClosed||p===0,timeReceived:Date.now()})}}}detach(h){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,h))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(h){this.privEvents.onEvent(h),t.Events.instance.onEvent(h)}}return yr.PullAudioInputStreamImpl=l,yr}var vn={},ta={},SE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisOutputFormat=void 0,function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(e.SpeechSynthesisOutputFormat||(e.SpeechSynthesisOutputFormat={}))})(SE);Object.defineProperty(ta,"__esModule",{value:!0});ta.AudioOutputFormatImpl=void 0;const Xe=SE,He=ea;class Le extends He.AudioStreamFormatImpl{constructor(t,n,r,i,s,a,o,c,l){super(r,a,n,t),this.formatTag=t,this.avgBytesPerSec=i,this.blockAlign=s,this.priAudioFormatString=o,this.priRequestAudioFormatString=c,this.priHasHeader=l}static fromSpeechSynthesisOutputFormat(t){return t===void 0?Le.getDefaultOutputFormat():Le.fromSpeechSynthesisOutputFormatString(Le.SpeechSynthesisOutputFormatToString[t])}static fromSpeechSynthesisOutputFormatString(t){switch(t){case"raw-8khz-8bit-mono-mulaw":return new Le(He.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,t,!1);case"riff-16khz-16kbps-mono-siren":return new Le(He.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new Le(He.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,t,!1);case"audio-16khz-32kbitrate-mono-mp3":return new Le(He.AudioFormatTag.MP3,1,16e3,4096,2,16,t,t,!1);case"audio-16khz-128kbitrate-mono-mp3":return new Le(He.AudioFormatTag.MP3,1,16e3,16384,2,16,t,t,!1);case"audio-16khz-64kbitrate-mono-mp3":return new Le(He.AudioFormatTag.MP3,1,16e3,8192,2,16,t,t,!1);case"audio-24khz-48kbitrate-mono-mp3":return new Le(He.AudioFormatTag.MP3,1,24e3,6144,2,16,t,t,!1);case"audio-24khz-96kbitrate-mono-mp3":return new Le(He.AudioFormatTag.MP3,1,24e3,12288,2,16,t,t,!1);case"audio-24khz-160kbitrate-mono-mp3":return new Le(He.AudioFormatTag.MP3,1,24e3,20480,2,16,t,t,!1);case"raw-16khz-16bit-mono-truesilk":return new Le(He.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,t,t,!1);case"riff-8khz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new Le(He.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,16e3,32e3,2,16,t,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new Le(He.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,t,t,!1);case"ogg-24khz-16bit-mono-opus":return new Le(He.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,t,t,!1);case"raw-48khz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new Le(He.AudioFormatTag.MP3,1,48e3,12288,2,16,t,t,!1);case"audio-48khz-192kbitrate-mono-mp3":return new Le(He.AudioFormatTag.MP3,1,48e3,24576,2,16,t,t,!1);case"ogg-48khz-16bit-mono-opus":return new Le(He.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,t,t,!1);case"webm-16khz-16bit-mono-opus":return new Le(He.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,t,t,!1);case"webm-24khz-16bit-mono-opus":return new Le(He.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,t,t,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new Le(He.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new Le(He.AudioFormatTag.OPUS,1,16e3,4e3,2,16,t,t,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new Le(He.AudioFormatTag.OPUS,1,24e3,6e3,2,16,t,t,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new Le(He.AudioFormatTag.OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-24khz-16bit-mono-flac":return new Le(He.AudioFormatTag.FLAC,1,24e3,24e3,2,16,t,t,!1);case"audio-48khz-16bit-mono-flac":return new Le(He.AudioFormatTag.FLAC,1,48e3,3e4,2,16,t,t,!1);case"raw-24khz-16bit-mono-truesilk":return new Le(He.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,t,t,!1);case"raw-8khz-8bit-mono-alaw":return new Le(He.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,t,!1);case"riff-8khz-8bit-mono-alaw":return new Le(He.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,22050,44100,2,16,t,t,!1);case"riff-22050hz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,22050,44100,2,16,t,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,44100,88200,2,16,t,t,!1);case"riff-44100hz-16bit-mono-pcm":return new Le(He.AudioFormatTag.PCM,1,44100,88200,2,16,t,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new Le(He.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,t,t,!1);case"g722-16khz-64kbps":return new Le(He.AudioFormatTag.G722,1,16e3,8e3,2,16,t,t,!1);case"riff-16khz-16bit-mono-pcm":default:return new Le(He.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return Le.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(t){if(this.priHasHeader){const n=new DataView(this.privHeader);n.setUint32(4,t+this.privHeader.byteLength-8,!0),n.setUint32(40,t,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(t){if(!this.hasHeader)return t;this.updateHeader(t.byteLength);const n=new Uint8Array(t.byteLength+this.header.byteLength);return n.set(new Uint8Array(this.header),0),n.set(new Uint8Array(t),this.header.byteLength),n.buffer}}ta.AudioOutputFormatImpl=Le;Le.SpeechSynthesisOutputFormatToString={[Xe.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[Xe.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[Xe.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[Xe.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[Xe.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[Xe.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[Xe.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[Xe.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[Xe.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[Xe.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[Xe.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[Xe.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[Xe.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[Xe.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[Xe.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[Xe.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[Xe.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[Xe.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[Xe.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[Xe.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[Xe.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[Xe.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[Xe.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[Xe.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[Xe.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[Xe.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[Xe.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[Xe.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"};Object.defineProperty(vn,"__esModule",{value:!0});vn.PushAudioOutputStreamImpl=vn.PushAudioOutputStream=vn.PullAudioOutputStreamImpl=vn.PullAudioOutputStream=vn.AudioOutputStream=void 0;const nx=ke(),mZ=$e,vZ=ta;class wE{constructor(){}static createPullStream(){return CE.create()}}vn.AudioOutputStream=wE;class CE extends wE{static create(){return new NF}}vn.PullAudioOutputStream=CE;class NF extends CE{constructor(){super(),this.privId=nx.createNoDashGuid(),this.privStream=new nx.Stream}set format(t){t==null&&(this.privFormat=vZ.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=t}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(t){const n=new Int8Array(t);let r=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>t.byteLength)return n.set(this.privLastChunkView.slice(0,t.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(t.byteLength),Promise.resolve(t.byteLength);n.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<t.byteLength&&!this.privStream.isReadEnded;){const i=await this.privStream.read();if(i!==void 0&&!i.isEnd){let s;i.buffer.byteLength>t.byteLength-r?(s=i.buffer.slice(0,t.byteLength-r),this.privLastChunkView=new Int8Array(i.buffer.slice(t.byteLength-r))):s=i.buffer,n.set(new Int8Array(s),r),r+=s.byteLength}else this.privStream.readEnded()}return r}write(t){mZ.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:t,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}vn.PullAudioOutputStreamImpl=NF;class IF extends wE{constructor(){super()}static create(t){return new jF(t)}}vn.PushAudioOutputStream=IF;class jF extends IF{constructor(t){super(),this.privId=nx.createNoDashGuid(),this.privCallback=t}set format(t){}write(t){this.privCallback.write&&this.privCallback.write(t)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}vn.PushAudioOutputStreamImpl=jF;var w_;function MF(){if(w_)return ds;w_=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.AudioOutputConfigImpl=ds.AudioConfigImpl=ds.AudioConfig=void 0;const e=hn(),t=$e,n=ae(),r=gf,i=AF(),s=vn;let a=class kF{static fromDefaultMicrophoneInput(){const u=new e.PcmRecorder(!0);return new o(new e.MicAudioSource(u))}static fromMicrophoneInput(u){const h=new e.PcmRecorder(!0);return new o(new e.MicAudioSource(h,u))}static fromWavFileInput(u,h="unnamedBuffer.wav"){return new o(new e.FileAudioSource(u,h))}static fromStreamInput(u){if(u instanceof n.PullAudioInputStreamCallback)return new o(new i.PullAudioInputStreamImpl(u));if(u instanceof n.AudioInputStream)return new o(u);if(typeof MediaStream<"u"&&u instanceof MediaStream){const h=new e.PcmRecorder(!1);return new o(new e.MicAudioSource(h,null,null,u))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new n.SpeakerAudioDestination)}static fromSpeakerOutput(u){if(u===void 0)return kF.fromDefaultSpeakerOutput();if(u instanceof n.SpeakerAudioDestination)return new c(u);throw new Error("Not Supported Type")}static fromAudioFileOutput(u){return new c(new r.AudioFileWriter(u))}static fromStreamOutput(u){if(u instanceof n.PushAudioOutputStreamCallback)return new c(new s.PushAudioOutputStreamImpl(u));if(u instanceof n.PushAudioOutputStream)return new c(u);if(u instanceof n.PullAudioOutputStream)return new c(u);throw new Error("Not Supported Type")}};ds.AudioConfig=a;class o extends a{constructor(u){super(),this.privSource=u}get format(){return this.privSource.format}close(u,h){this.privSource.turnOff().then(()=>{u&&u()},p=>{h&&h(p)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(u){return this.privSource.attach(u)}detach(u){return this.privSource.detach(u)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(u,h){if(t.Contracts.throwIfNull(h,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(u,h);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(u,h){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(u,h);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}ds.AudioConfigImpl=o;class c extends a{constructor(u){super(),this.privDestination=u}set format(u){this.privDestination.format=u}write(u){this.privDestination.write(u)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return ds.AudioOutputConfigImpl=c,ds}var OF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationReason=void 0,function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"}(e.CancellationReason||(e.CancellationReason={}))})(OF);var my={};Object.defineProperty(my,"__esModule",{value:!0});my.PullAudioInputStreamCallback=void 0;class gZ{}my.PullAudioInputStreamCallback=gZ;var vy={};Object.defineProperty(vy,"__esModule",{value:!0});vy.PushAudioOutputStreamCallback=void 0;class yZ{}vy.PushAudioOutputStreamCallback=yZ;var gy={};Object.defineProperty(gy,"__esModule",{value:!0});gy.KeywordRecognitionModel=void 0;const C_=$e;class SZ{constructor(){this.privDisposed=!1}static fromFile(t){throw C_.Contracts.throwIfFileDoesNotExist(t,"fileName"),new Error("Not yet implemented.")}static fromStream(t){throw C_.Contracts.throwIfNull(t,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}gy.KeywordRecognitionModel=SZ;var yy={};Object.defineProperty(yy,"__esModule",{value:!0});yy.SessionEventArgs=void 0;class wZ{constructor(t){this.privSessionId=t}get sessionId(){return this.privSessionId}}yy.SessionEventArgs=wZ;var zu={},x_;function CZ(){if(x_)return zu;x_=1,Object.defineProperty(zu,"__esModule",{value:!0}),zu.RecognitionEventArgs=void 0;const e=ae();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privOffset=r}get offset(){return this.privOffset}};return zu.RecognitionEventArgs=t,zu}var DF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OutputFormat=void 0,function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"}(e.OutputFormat||(e.OutputFormat={}))})(DF);var Fu={},b_;function xZ(){if(b_)return Fu;b_=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.IntentRecognitionEventArgs=void 0;const e=ae();let t=class extends e.RecognitionEventArgs{constructor(r,i,s){super(i,s),this.privResult=r}get result(){return this.privResult}};return Fu.IntentRecognitionEventArgs=t,Fu}var Sy={};Object.defineProperty(Sy,"__esModule",{value:!0});Sy.RecognitionResult=void 0;class bZ{constructor(t,n,r,i,s,a,o,c,l,u){this.privResultId=t,this.privReason=n,this.privText=r,this.privDuration=i,this.privOffset=s,this.privLanguage=a,this.privLanguageDetectionConfidence=o,this.privErrorDetails=c,this.privJson=l,this.privProperties=u}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}Sy.RecognitionResult=bZ;var $u={},E_;function EZ(){if(E_)return $u;E_=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.SpeechRecognitionResult=void 0;const e=ae();let t=class extends e.RecognitionResult{constructor(r,i,s,a,o,c,l,u,h,p,f){super(r,i,s,a,o,c,l,h,p,f),this.privSpeakerId=u}get speakerId(){return this.privSpeakerId}};return $u.SpeechRecognitionResult=t,$u}var Bu={},P_;function PZ(){if(P_)return Bu;P_=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.IntentRecognitionResult=void 0;const e=ae();let t=class extends e.SpeechRecognitionResult{constructor(r,i,s,a,o,c,l,u,h,p,f){super(i,s,a,o,c,l,u,void 0,h,p,f),this.privIntentId=r}get intentId(){return this.privIntentId}};return Bu.IntentRecognitionResult=t,Bu}var zl={};Object.defineProperty(zl,"__esModule",{value:!0});zl.LanguageUnderstandingModelImpl=zl.LanguageUnderstandingModel=void 0;const Ec=$e;class LF{constructor(){}static fromEndpoint(t){Ec.Contracts.throwIfNull(t,"uri"),Ec.Contracts.throwIfNullOrWhitespace(t.hostname,"uri");const n=new Bm,r=t.host.indexOf(".");if(r===-1)throw new Error("Could not determine region from endpoint");n.region=t.host.substr(0,r);const i=t.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(n.appId=t.pathname.substr(i),n.subscriptionKey=t.searchParams.get("subscription-key"),n.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return n}static fromAppId(t){Ec.Contracts.throwIfNullOrWhitespace(t,"appId");const n=new Bm;return n.appId=t,n}static fromSubscription(t,n,r){Ec.Contracts.throwIfNullOrWhitespace(t,"subscriptionKey"),Ec.Contracts.throwIfNullOrWhitespace(n,"appId"),Ec.Contracts.throwIfNullOrWhitespace(r,"region");const i=new Bm;return i.appId=n,i.region=r,i.subscriptionKey=t,i}}zl.LanguageUnderstandingModel=LF;class Bm extends LF{}zl.LanguageUnderstandingModelImpl=Bm;var hs={},R_;function RZ(){if(R_)return hs;R_=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.MeetingTranscriptionEventArgs=hs.ConversationTranscriptionEventArgs=hs.SpeechRecognitionEventArgs=void 0;const e=ae();let t=class extends e.RecognitionEventArgs{constructor(s,a,o){super(a,o),this.privResult=s}get result(){return this.privResult}};hs.SpeechRecognitionEventArgs=t;class n extends e.RecognitionEventArgs{constructor(s,a,o){super(a,o),this.privResult=s}get result(){return this.privResult}}hs.ConversationTranscriptionEventArgs=n;class r extends t{}return hs.MeetingTranscriptionEventArgs=r,hs}var Vu={},Uu={},__;function yf(){if(__)return Uu;__=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.CancellationEventArgsBase=void 0;const e=ae();let t=class extends e.RecognitionEventArgs{constructor(r,i,s,a,o){super(a,o),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Uu.CancellationEventArgsBase=t,Uu}var T_;function _Z(){if(T_)return Vu;T_=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.SpeechRecognitionCanceledEventArgs=void 0;const e=yf();let t=class extends e.CancellationEventArgsBase{};return Vu.SpeechRecognitionCanceledEventArgs=t,Vu}var qu={},A_;function TZ(){if(A_)return qu;A_=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.TranslationRecognitionEventArgs=void 0;const e=ae();let t=class extends e.RecognitionEventArgs{constructor(r,i,s){super(i,s),this.privResult=r}get result(){return this.privResult}};return qu.TranslationRecognitionEventArgs=t,qu}var Hu={},N_;function AZ(){if(N_)return Hu;N_=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.TranslationSynthesisEventArgs=void 0;const e=ae();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privResult=r}get result(){return this.privResult}};return Hu.TranslationSynthesisEventArgs=t,Hu}var Wu={},I_;function FF(){if(I_)return Wu;I_=1,Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.TranslationRecognitionResult=void 0;const e=ae();let t=class zF extends e.SpeechRecognitionResult{constructor(r,i,s,a,o,c,l,u,h,p,f){super(i,s,a,o,c,l,u,void 0,h,p,f),this.privTranslations=r}static fromSpeechRecognitionResult(r){return new zF(void 0,r.resultId,r.reason,r.text,r.duration,r.offset,r.language,r.languageDetectionConfidence,r.errorDetails,r.json,r.properties)}get translations(){return this.privTranslations}};return Wu.TranslationRecognitionResult=t,Wu}var wy={};Object.defineProperty(wy,"__esModule",{value:!0});wy.TranslationSynthesisResult=void 0;class NZ{constructor(t,n){this.privReason=t,this.privAudio=n}get audio(){return this.privAudio}get reason(){return this.privReason}}wy.TranslationSynthesisResult=NZ;var $F={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReason=void 0,function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(e.ResultReason||(e.ResultReason={}))})($F);var aa={},j_;function IZ(){if(j_)return aa;j_=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.SpeechConfigImpl=aa.SpeechConfig=void 0;const e=we(),t=$e,n=ae();let r=class{constructor(){}static fromSubscription(a,o){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,o){t.Contracts.throwIfNull(a,"endpoint");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,a.href),o!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c}static fromHost(a,o){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),o!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c}static fromAuthorizationToken(a,o){t.Contracts.throwIfNull(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,o),c.authorizationToken=a,c}close(){}};aa.SpeechConfig=r;class i extends r{constructor(){super(),this.privProperties=new n.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=n.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return n.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,a)}setProperty(a,o){t.Contracts.throwIfNull(o,"value"),this.privProperties.setProperty(a,o)}getProperty(a,o){return this.privProperties.getProperty(a,o)}setProxy(a,o,c,l){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],l)}setServiceProperty(a,o){const c=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=o,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(e.ForceDictationPropertyName,"true")}clone(){const a=new i;return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[a])}}return aa.SpeechConfigImpl=i,aa}var ca={},k_;function jZ(){if(k_)return ca;k_=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.SpeechTranslationConfigImpl=ca.SpeechTranslationConfig=void 0;const e=we(),t=$e,n=ae();let r=class extends n.SpeechConfig{constructor(){super()}static fromSubscription(a,o){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c}static fromAuthorizationToken(a,o){t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c}static fromHost(a,o){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),o!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c}static fromEndpoint(a,o){t.Contracts.throwIfNull(a,"endpoint"),t.Contracts.throwIfNull(o,"subscriptionKey");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,a.href),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c}};ca.SpeechTranslationConfig=r;class i extends r{constructor(){super(),this.privSpeechProperties=new n.PropertyCollection,this.outputFormat=n.OutputFormat.Simple}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return n.OutputFormat[this.privSpeechProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value");const o=this.targetLanguages;o.includes(a)||(o.push(a),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,o.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}setProxy(a,o,c,l){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],l)}getProperty(a,o){return this.privSpeechProperties.getProperty(a,o)}setProperty(a,o){this.privSpeechProperties.setProperty(a,o)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,o){const c=JSON.parse(this.privSpeechProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=o,this.privSpeechProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(e.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[a])}}return ca.SpeechTranslationConfigImpl=i,ca}var Ku={},M_;function VF(){if(M_)return Ku;M_=1,Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.PropertyCollection=void 0;const e=ae();let t=class BF{constructor(){this.privKeys=[],this.privValues=[]}getProperty(r,i){let s;typeof r=="string"?s=r:s=e.PropertyId[r];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(r,i){let s;typeof r=="string"?s=r:s=e.PropertyId[r];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s){this.privValues[a]=i;return}this.privKeys.push(s),this.privValues.push(i)}clone(){const r=new BF;for(let i=0;i<this.privKeys.length;i++)r.privKeys.push(this.privKeys[i]),r.privValues.push(this.privValues[i]);return r}mergeTo(r){this.privKeys.forEach(i=>{if(r.getProperty(i,void 0)===void 0){const s=this.getProperty(i);r.setProperty(i,s)}})}get keys(){return this.privKeys}};return Ku.PropertyCollection=t,Ku}var Cy={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyId=void 0,function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=16]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=25]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",t[t.Speech_SegmentationMaximumTimeMs=33]="Speech_SegmentationMaximumTimeMs",t[t.Speech_SegmentationStrategy=34]="Speech_SegmentationStrategy",t[t.SpeechServiceConnection_EnableAudioLogging=35]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=36]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=37]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=38]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=39]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=40]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=41]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=42]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=43]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=44]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=45]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=46]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=47]="SpeechServiceResponse_RequestSentenceBoundary",t[t.SpeechServiceResponse_DiarizeIntermediateResults=48]="SpeechServiceResponse_DiarizeIntermediateResults",t[t.Conversation_ApplicationId=49]="Conversation_ApplicationId",t[t.Conversation_DialogType=50]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=51]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=52]="Conversation_From_Id",t[t.Conversation_Conversation_Id=53]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=54]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=55]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=56]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=57]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=58]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=59]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=60]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=61]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=62]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=63]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=64]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=65]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=66]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=67]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=68]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=69]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=70]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=71]="TalkingAvatarService_WebRTC_SDP"}(e.PropertyId||(e.PropertyId={}))})(Cy);var Gu={},O_;function kZ(){if(O_)return Gu;O_=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.Recognizer=void 0;const e=we(),t=ke(),n=$e,r=ae();let i=class UF{constructor(a,o,c){this.audioConfig=a!==void 0?a:r.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=o.clone(),this.privConnectionFactory=c,this.implCommonRecognizerSetup()}close(a,o){n.Contracts.throwIfDisposed(this.privDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),a,o)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){e.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",o="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,o=navigator.userAgent,c=navigator.appVersion);const l=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(a,o,c))));this.privReco=this.createServiceRecognizer(UF.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,l)}async recognizeOnceAsyncImpl(a){n.Contracts.throwIfDisposed(this.privDisposed);const o=new t.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,o.resolve,o.reject);const c=await o.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){n.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){n.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(a){const o=a.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0);return o&&o!==""?new e.CognitiveSubscriptionKeyAuthentication(o):new e.CognitiveTokenAuthentication(()=>{const l=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(l)},()=>{const l=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(l)})}};return Gu.Recognizer=i,Gu}var Qu={},D_;function MZ(){if(D_)return Qu;D_=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.SpeechRecognizer=void 0;const e=we(),t=ke(),n=$e,r=ae();let i=class qF extends r.Recognizer{constructor(a,o){const c=a;n.Contracts.throwIfNull(c,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new e.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(a,o,c){const l=a;return o.properties.mergeTo(l.properties),new qF(a,c)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])===r.OutputFormat[r.OutputFormat.Simple]?r.OutputFormat.Simple:r.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(a,o){t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,o)}startContinuousRecognitionAsync(a,o){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}startKeywordRecognitionAsync(a,o,c){n.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a){a&&a()}close(a,o){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,o)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,l){const u=c;return new e.SpeechServiceRecognizer(a,o,u,l,this)}};return Qu.SpeechRecognizer=i,Qu}var Ju={},L_;function OZ(){if(L_)return Ju;L_=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.IntentRecognizer=void 0;const e=we(),t=ke(),n=$e,r=ae();let i=class extends r.Recognizer{constructor(a,o){n.Contracts.throwIfNullOrUndefined(a,"speechConfig");const c=a;n.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(o,c.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=c.properties,n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}recognizeOnceAsync(a,o){if(n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,o)}startContinuousRecognitionAsync(a,o){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}startKeywordRecognitionAsync(a,o,c){n.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a,o){if(a)try{a()}catch(c){o&&o(c)}}addIntent(a,o){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.Contracts.throwIfNullOrWhitespace(o,"intentId"),n.Contracts.throwIfNullOrWhitespace(a,"simplePhrase"),this.privAddedIntents.push([o,a])}addIntentWithLanguageModel(a,o,c){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.Contracts.throwIfNullOrWhitespace(a,"intentId"),n.Contracts.throwIfNull(o,"model");const l=o;n.Contracts.throwIfNullOrWhitespace(l.appId,"model.appId"),this.privAddedLmIntents[a]=new e.AddedLmIntent(l,c)}addAllIntents(a,o){n.Contracts.throwIfNull(a,"model");const c=a;n.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(c,o)}close(a,o){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,o)}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,l){const u=c;return new e.IntentServiceRecognizer(a,o,u,l,this)}async dispose(a){this.privDisposedIntentRecognizer||a&&(this.privDisposedIntentRecognizer=!0,await super.dispose(a))}buildSpeechContext(){let a,o,c;const l=[];this.privUmbrellaIntent!==void 0&&(a=this.privUmbrellaIntent.modelImpl.appId,o=this.privUmbrellaIntent.modelImpl.region,c=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const u of Object.keys(this.privAddedLmIntents)){const h=this.privAddedLmIntents[u];if(a===void 0)a=h.modelImpl.appId;else if(a!==h.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(o===void 0)o=h.modelImpl.region;else if(o!==h.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(c===void 0)c=h.modelImpl.subscriptionKey;else if(c!==h.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const p="luis/"+a+"-PRODUCTION#"+u;l.push(p)}return{Intent:{id:a,key:c===void 0?this.privProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key]):c,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?l:["luis/"+a+"-PRODUCTION"]}}};return Ju.IntentRecognizer=i,Ju}var HF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceProfileType=void 0,function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"}(e.VoiceProfileType||(e.VoiceProfileType={}))})(HF);var Yu={},Zu={},la={},z_;function WF(){if(z_)return la;z_=1,Object.defineProperty(la,"__esModule",{value:!0}),la.ConnectionMessageImpl=la.ConnectionMessage=void 0;const e=dn,t=ke(),n=VF(),r=Cy;let i=class{};la.ConnectionMessage=i;class s{constructor(o){this.privConnectionMessage=o,this.privProperties=new n.PropertyCollection,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]&&this.privProperties.setProperty(r.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(o=>o.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===t.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===t.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return la.ConnectionMessageImpl=s,la}var F_;function KF(){if(F_)return Zu;F_=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.Connection=void 0;const e=we(),t=ke(),n=WF(),r=$e,i=ae();let s=class rx{static fromRecognizer(o){const c=o.internalData,l=new rx;return l.privInternalData=c,l.setupEvents(),l}static fromSynthesizer(o){const c=o.internalData,l=new rx;return l.privInternalData=c,l.setupEvents(),l}openConnection(o,c){t.marshalPromiseToCallbacks(this.privInternalData.connect(),o,c)}closeConnection(o,c){if(this.privInternalData instanceof e.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");t.marshalPromiseToCallbacks(this.privInternalData.disconnect(),o,c)}setMessageProperty(o,c,l){if(r.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof e.ServiceRecognizerBase){if(o.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(c,l)}else if(this.privInternalData instanceof e.SynthesisAdapterBase){if(o.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(c,l)}}sendMessageAsync(o,c,l,u){t.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(o,c),l,u)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(o=>{o.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(o.message))):o.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(o.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(o=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(o.jsonString,o.name))})}};return Zu.Connection=s,Zu}var $_;function DZ(){if($_)return Yu;$_=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.TranslationRecognizer=void 0;const e=we(),t=ke(),n=KF(),r=$e,i=ae();let s=class GF extends i.Recognizer{constructor(o,c,l){const u=o;r.Contracts.throwIfNull(u,"speechConfig"),super(c,u.properties,l||new e.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationVoice]),r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationToLanguages]),r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(o,c,l){const u=o;return c.properties.mergeTo(u.properties),c.properties.getProperty(i.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===e.AutoDetectSourceLanguagesOpenRangeOptionName&&u.properties.setProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new GF(o,l)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,o)}recognizeOnceAsync(o,c){r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),o,c)}startContinuousRecognitionAsync(o,c){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),o,c)}stopContinuousRecognitionAsync(o,c){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),o,c)}removeTargetLanguage(o){if(r.Contracts.throwIfNullOrUndefined(o,"language to be removed"),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),l=c.indexOf(o);l>-1&&(c.splice(l,1),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")),this.updateLanguages(c))}}addTargetLanguage(o){r.Contracts.throwIfNullOrUndefined(o,"language to be added");let c=[];this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c.includes(o)||(c.push(o),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))):(this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,o),c=[o]),this.updateLanguages(c)}close(o,c){r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),o,c)}onConnection(){}async dispose(o){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,o&&(await this.implRecognizerStop(),await super.dispose(o)))}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,c,l,u){const h=l;return new e.TranslationServiceRecognizer(o,c,h,u,this)}updateLanguages(o){const c=n.Connection.fromRecognizer(this);c&&(c.setMessageProperty("speech.context","translationcontext",{to:o}),c.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:o})))}};return Yu.TranslationRecognizer=s,Yu}var Xu={},B_;function LZ(){if(B_)return Xu;B_=1,Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.Translations=void 0;const e=ae();let t=class{constructor(){this.privMap=new e.PropertyCollection}get languages(){return this.privMap.keys}get(r,i){return this.privMap.getProperty(r,i)}set(r,i){this.privMap.setProperty(r,i)}};return Xu.Translations=t,Xu}var QF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NoMatchReason=void 0,function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(e.NoMatchReason||(e.NoMatchReason={}))})(QF);var ed={},V_;function zZ(){if(V_)return ed;V_=1,Object.defineProperty(ed,"__esModule",{value:!0}),ed.NoMatchDetails=void 0;const e=we(),t=ae();let n=class JF{constructor(i){this.privReason=i}static fromResult(i){const s=e.SimpleSpeechPhrase.fromJSON(i.json,0);let a=t.NoMatchReason.NotRecognized;switch(s.RecognitionStatus){case e.RecognitionStatus.BabbleTimeout:a=t.NoMatchReason.InitialBabbleTimeout;break;case e.RecognitionStatus.InitialSilenceTimeout:a=t.NoMatchReason.InitialSilenceTimeout;break;default:a=t.NoMatchReason.NotRecognized;break}return new JF(a)}get reason(){return this.privReason}};return ed.NoMatchDetails=n,ed}var xy={};Object.defineProperty(xy,"__esModule",{value:!0});xy.TranslationRecognitionCanceledEventArgs=void 0;class FZ{constructor(t,n,r,i,s){this.privCancelReason=n,this.privErrorDetails=r,this.privResult=s,this.privSessionId=t,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}xy.TranslationRecognitionCanceledEventArgs=FZ;var td={},U_;function $Z(){if(U_)return td;U_=1,Object.defineProperty(td,"__esModule",{value:!0}),td.IntentRecognitionCanceledEventArgs=void 0;const e=ae();let t=class extends e.IntentRecognitionEventArgs{constructor(r,i,s,a,o,c){super(a,o,c),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return td.IntentRecognitionCanceledEventArgs=t,td}var Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.CancellationDetailsBase=void 0;class BZ{constructor(t,n,r){this.privReason=t,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}Sf.CancellationDetailsBase=BZ;var nd={},q_;function VZ(){if(q_)return nd;q_=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.CancellationDetails=void 0;const e=we(),t=Sf,n=ae();let r=class YF extends t.CancellationDetailsBase{constructor(s,a,o){super(s,a,o)}static fromResult(s){let a=n.CancellationReason.Error,o=n.CancellationErrorCode.NoError;if(s instanceof n.RecognitionResult&&s.json){const c=e.SimpleSpeechPhrase.fromJSON(s.json,0);a=e.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return s.properties&&(o=n.CancellationErrorCode[s.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new YF(a,s.errorDetails||e.EnumTranslation.implTranslateErrorDetails(o),o)}};return nd.CancellationDetails=r,nd}var ZF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationErrorCode=void 0,function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"}(e.CancellationErrorCode||(e.CancellationErrorCode={}))})(ZF);var rd={},H_;function UZ(){if(H_)return rd;H_=1,Object.defineProperty(rd,"__esModule",{value:!0}),rd.ConnectionEventArgs=void 0;const e=ae();let t=class extends e.SessionEventArgs{};return rd.ConnectionEventArgs=t,rd}var id={},W_;function qZ(){if(W_)return id;W_=1,Object.defineProperty(id,"__esModule",{value:!0}),id.ServiceEventArgs=void 0;const e=ae();let t=class extends e.SessionEventArgs{constructor(r,i,s){super(s),this.privJsonResult=r,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return id.ServiceEventArgs=t,id}var by={};Object.defineProperty(by,"__esModule",{value:!0});by.PhraseListGrammar=void 0;class xE{constructor(t){this.privGrammerBuilder=t.dynamicGrammar}static fromRecognizer(t){const n=t.internalData;return new xE(n)}addPhrase(t){this.privGrammerBuilder.addPhrase(t)}addPhrases(t){this.privGrammerBuilder.addPhrase(t)}clear(){this.privGrammerBuilder.clearPhrases()}}by.PhraseListGrammar=xE;var ua={},K_;function bE(){if(K_)return ua;K_=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.DialogServiceConfigImpl=ua.DialogServiceConfig=void 0;const e=$e,t=ae();let n=class{constructor(){}set applicationId(s){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};ua.DialogServiceConfig=n;class r extends n{constructor(){super(),this.privSpeechConfig=new t.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(s){e.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechConfig.speechRecognitionLanguage=s}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(s){this.privSpeechConfig.outputFormat=s}setProperty(s,a){this.privSpeechConfig.setProperty(s,a)}getProperty(s,a){return this.privSpeechConfig.getProperty(s)}setProxy(s,a,o,c){this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName,s),this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),o&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName,o),c&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(s,a,o){this.privSpeechConfig.setServiceProperty(s,a)}close(){}}return ua.DialogServiceConfigImpl=r,ua}var sd={},G_;function HZ(){if(G_)return sd;G_=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.BotFrameworkConfig=void 0;const e=$e,t=bE(),n=ae();let r=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"subscription"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,a),o&&c.setProperty(n.PropertyId.Conversation_ApplicationId,o),c}static fromAuthorizationToken(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,a),o&&c.setProperty(n.PropertyId.Conversation_ApplicationId,o),c}static fromHost(s,a,o){e.Contracts.throwIfNullOrUndefined(s,"host");const c=s instanceof URL?s:new URL(`wss://${s}.convai.speech.azure.us`);e.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const l=new t.DialogServiceConfigImpl;return l.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),l.setProperty(n.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&l.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),l}static fromEndpoint(s,a){e.Contracts.throwIfNull(s,"endpoint");const o=new t.DialogServiceConfigImpl;return o.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,s.toString()),a!==void 0&&o.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),o}};return sd.BotFrameworkConfig=r,sd}var od={},Q_;function WZ(){if(Q_)return od;Q_=1,Object.defineProperty(od,"__esModule",{value:!0}),od.CustomCommandsConfig=void 0;const e=$e,t=bE(),n=ae();let r=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"subscription"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(n.PropertyId.Conversation_ApplicationId,s),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c}static fromAuthorizationToken(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(n.PropertyId.Conversation_ApplicationId,s),c.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c}set applicationId(s){e.Contracts.throwIfNullOrWhitespace(s,"value"),this.setProperty(n.PropertyId.Conversation_ApplicationId,s)}get applicationId(){return this.getProperty(n.PropertyId.Conversation_ApplicationId)}};return od.CustomCommandsConfig=r,od}var ad={},cd={},ld={},Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.QueryParameterNames=void 0;class Mt{}Ni.QueryParameterNames=Mt;Mt.BotId="botid";Mt.CustomSpeechDeploymentId="cid";Mt.CustomVoiceDeploymentId="deploymentId";Mt.EnableAudioLogging="storeAudio";Mt.EnableLanguageId="lidEnabled";Mt.EnableWordLevelTimestamps="wordLevelTimestamps";Mt.EndSilenceTimeoutMs="endSilenceTimeoutMs";Mt.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";Mt.SegmentationMaximumTimeMs="segmentationMaximumTimeMs";Mt.SegmentationStrategy="segmentationStrategy";Mt.Format="format";Mt.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";Mt.Language="language";Mt.Profanity="profanity";Mt.RequestBotStatusMessages="enableBotMessageStatus";Mt.StableIntermediateThreshold="stableIntermediateThreshold";Mt.StableTranslation="stableTranslation";Mt.TestHooks="testhooks";Mt.Postprocessing="postprocessing";Mt.CtsMeetingId="meetingId";Mt.CtsDeviceId="deviceId";Mt.CtsIsParticipant="isParticipant";Mt.EnableAvatar="enableTalkingAvatar";var J_;function Ii(){if(J_)return ld;J_=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.ConnectionFactoryBase=void 0;const e=we(),t=ae(),n=Ni;let r=class{static getHostSuffix(s){if(s){if(s.toLowerCase().startsWith("china"))return".azure.cn";if(s.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(s,a,o){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,n.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,n.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,n.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,n.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,n.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,n.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,n.QueryParameterNames.EnableWordLevelTimestamps],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,n.QueryParameterNames.StableIntermediateThreshold]]).forEach((u,h)=>{this.setUrlParameter(h,u,s,a,o)});const l=JSON.parse(s.parameters.getProperty(e.ServicePropertiesPropertyName,"{}"));Object.keys(l).forEach(u=>{a[u]=l[u]})}setUrlParameter(s,a,o,c,l){const u=o.parameters.getProperty(s,void 0);u&&(!l||l.search(a)===-1)&&(c[a]=u.toLocaleLowerCase())}};return ld.ConnectionFactoryBase=r,ld}var Y_;function KZ(){if(Y_)return cd;Y_=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.DialogConnectionFactory=void 0;const e=hn(),t=we(),n=ae(),r=Ii(),i=we(),s=dn,a=Ni;class o extends r.ConnectionFactoryBase{create(l,u,h){const p=l.parameters.getProperty(n.PropertyId.Conversation_ApplicationId,""),f=l.parameters.getProperty(n.PropertyId.Conversation_DialogType),g=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),v=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),w=l.parameters.getProperty(n.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),y={};y[s.HeaderNames.ConnectionId]=h,y[a.QueryParameterNames.Format]=l.parameters.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase(),y[a.QueryParameterNames.Language]=v,y[a.QueryParameterNames.RequestBotStatusMessages]=w,p&&(y[a.QueryParameterNames.BotId]=p,f===n.DialogServiceConfig.DialogTypes.CustomCommands&&(y[s.HeaderNames.CustomCommandsAppId]=p));const S=f===n.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",C=f===n.DialogServiceConfig.DialogTypes.CustomCommands?"v1":f===n.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",x={};u.token!=null&&u.token!==""&&(x[u.headerName]=u.token);let E=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,"");if(!E){const T=r.ConnectionFactoryBase.getHostSuffix(g),_=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,`wss://${g}.${o.BaseUrl}${T}`);E=`${_.endsWith("/")?_:_+"/"}${S}${o.ApiKey}/${C}`}this.setCommonUrlParams(l,y,E);const P=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(E,y,x,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),P,h)}}return cd.DialogConnectionFactory=o,o.ApiKey="api",o.BaseUrl="convai.speech",cd}var Z_;function GZ(){if(Z_)return ad;Z_=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.DialogServiceConnector=void 0;const e=KZ(),t=we(),n=ke(),r=$e,i=ae(),s=Cy;let a=class extends i.Recognizer{constructor(c,l){const u=c;r.Contracts.throwIfNull(c,"dialogConfig"),super(l,u.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=u.properties.clone();const h=this.buildAgentConfig();this.privReco.agentConfig.set(h)}connect(c,l){n.marshalPromiseToCallbacks(this.privReco.connect(),c,l)}disconnect(c,l){n.marshalPromiseToCallbacks(this.privReco.disconnect(),c,l)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(s.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(c){this.properties.setProperty(s.PropertyId.Conversation_Speech_Activity_Template,c)}listenOnceAsync(c,l){if(this.isTurnComplete){r.Contracts.throwIfDisposed(this.privIsDisposed);const h=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const p=new n.Deferred;await this.privReco.recognize(t.RecognitionMode.Conversation,p.resolve,p.reject);const f=await p.promise;return await this.implRecognizerStop(),f})();h.catch(()=>{this.dispose(!0).catch(()=>{})}),n.marshalPromiseToCallbacks(h.finally(()=>{this.isTurnComplete=!0}),c,l)}}sendActivityAsync(c,l,u){n.marshalPromiseToCallbacks(this.privReco.sendMessage(c),l,u)}close(c,l){r.Contracts.throwIfDisposed(this.privIsDisposed),n.marshalPromiseToCallbacks(this.dispose(!0),c,l)}async dispose(c){this.privIsDisposed||c&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(c))}createRecognizerConfig(c){return new t.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,l,u,h){const p=u;return new t.DialogServiceAdapter(c,l,p,h,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(s.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(s.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(s.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return ad.DialogServiceConnector=a,ad}var Ey={};Object.defineProperty(Ey,"__esModule",{value:!0});Ey.ActivityReceivedEventArgs=void 0;class QZ{constructor(t,n){this.privActivity=t,this.privAudioStream=n}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}Ey.ActivityReceivedEventArgs=QZ;var Py={},Ry={};Object.defineProperty(Ry,"__esModule",{value:!0});Ry.TurnStatusResponsePayload=void 0;class EE{constructor(t){this.privMessageStatusResponse=JSON.parse(t)}static fromJSON(t){return new EE(t)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}Ry.TurnStatusResponsePayload=EE;Object.defineProperty(Py,"__esModule",{value:!0});Py.TurnStatusReceivedEventArgs=void 0;const JZ=Ry;class YZ{constructor(t){this.privTurnStatus=JZ.TurnStatusResponsePayload.fromJSON(t)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}Py.TurnStatusReceivedEventArgs=YZ;var XF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServicePropertyChannel=void 0,function(t){t[t.UriQueryParameter=0]="UriQueryParameter"}(e.ServicePropertyChannel||(e.ServicePropertyChannel={}))})(XF);var e$={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProfanityOption=void 0,function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"}(e.ProfanityOption||(e.ProfanityOption={}))})(e$);var ud={},X_;function ZZ(){if(X_)return ud;X_=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.BaseAudioPlayer=void 0;const e=Sn,t=ae(),n=ea;let r=class{constructor(s){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,s===void 0&&(s=t.AudioStreamFormat.getDefaultInputFormat()),this.init(s)}playAudioSample(s,a,o){try{this.ensureInitializedContext();const c=this.formatAudioData(s),l=new Float32Array(this.samples.length+c.length);l.set(this.samples,0),l.set(c,this.samples.length),this.samples=l,a&&a()}catch(c){o&&o(c)}}stopAudio(s,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{s&&s()},o=>{a&&a(o)}),this.audioContext=null)}init(s){this.audioFormat=s,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const s=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},s)}}createAudioContext(){this.audioContext=n.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(s){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(s),128);case 16:return this.formatArrayBuffer(new Int16Array(s),32768);case 32:return this.formatArrayBuffer(new Int32Array(s),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(s,a){const o=new Float32Array(s.length);for(let c=0;c<s.length;c++)o[c]=s[c]/a;return o}updateAudioBuffer(){if(this.samples.length===0)return;const s=this.audioFormat.channels,a=this.audioContext.createBufferSource(),o=this.samples.length/s,c=this.audioContext.createBuffer(s,o,this.audioFormat.samplesPerSec);for(let l=0;l<s;l++){let u=l;const h=c.getChannelData(l);for(let p=0;p<this.samples.length;p++,u+=s)h[p]=this.samples[u]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(s){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),o=this.audioContext.destination;await this.audioContext.decodeAudioData(s,c=>{a.buffer=c,a.connect(o),a.start(0)})}};return ud.BaseAudioPlayer=r,ud}var _y={};Object.defineProperty(_y,"__esModule",{value:!0});_y.ConnectionMessageEventArgs=void 0;class XZ{constructor(t){this.privConnectionMessage=t}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}_y.ConnectionMessageEventArgs=XZ;var Ty={};Object.defineProperty(Ty,"__esModule",{value:!0});Ty.VoiceProfile=void 0;class eX{constructor(t,n){this.privId=t,this.privProfileType=n}get profileId(){return this.privId}get profileType(){return this.privProfileType}}Ty.VoiceProfile=eX;var da={},eT;function tX(){if(eT)return da;eT=1,Object.defineProperty(da,"__esModule",{value:!0}),da.VoiceProfileEnrollmentCancellationDetails=da.VoiceProfileEnrollmentResult=void 0;const e=we(),t=ae();let n=class ix{constructor(s,a,o){this.privReason=s,this.privProperties=new t.PropertyCollection,this.privReason!==t.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=t.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=o,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(s){const a=[];for(const o of s.value){const c=o.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:o.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,l=new ix(c,null,null);l.privDetails=this.getIdentificationDetails(o),a.push(l)}return a}static FromVerificationProfileList(s){const a=[];for(const o of s.value){const c=o.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:o.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,l=new ix(c,null,null);l.privDetails=this.getVerificationDetails(o),a.push(l)}return a}static getIdentificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount||0,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.identificationProfileId,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.verificationProfileId,remainingEnrollmentsCount:s.remainingEnrollments||s.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}};da.VoiceProfileEnrollmentResult=n;class r extends t.CancellationDetailsBase{constructor(s,a,o){super(s,a,o)}static fromResult(s){const a=t.CancellationReason.Error;let o=t.CancellationErrorCode.NoError;return s.properties&&(o=t.CancellationErrorCode[s.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new r(a,s.errorDetails,o)}}return da.VoiceProfileEnrollmentCancellationDetails=r,da}var ha={},tT;function nX(){if(tT)return ha;tT=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.VoiceProfileCancellationDetails=ha.VoiceProfileResult=void 0;const e=we(),t=$e,n=ae();let r=class{constructor(a,o){this.privReason=a,this.privProperties=new n.PropertyCollection,a===n.ResultReason.Canceled&&(t.Contracts.throwIfNullOrUndefined(o,"statusText"),this.privErrorDetails=o,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};ha.VoiceProfileResult=r;class i extends n.CancellationDetailsBase{constructor(a,o,c){super(a,o,c)}static fromResult(a){const o=n.CancellationReason.Error;let c=n.CancellationErrorCode.NoError;return a.properties&&(c=n.CancellationErrorCode[a.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new i(o,a.errorDetails,c)}}return ha.VoiceProfileCancellationDetails=i,ha}var dd={},nT;function rX(){if(nT)return dd;nT=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.VoiceProfilePhraseResult=void 0;const e=$e,t=ae();let n=class extends t.VoiceProfileResult{constructor(i,s,a,o){super(i,s),this.privPhrases=[],e.Contracts.throwIfNullOrUndefined(o,"phrase array"),this.privType=a,o&&o[0]&&(this.privPhrases=o)}get phrases(){return this.privPhrases}get type(){return this.privType}};return dd.VoiceProfilePhraseResult=n,dd}var hd={},rT;function iX(){if(rT)return hd;rT=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.VoiceProfileClient=void 0;const e=we(),t=MF(),n=$e,r=ae();let i=class extends r.Recognizer{constructor(a){n.Contracts.throwIfNullOrUndefined(a,"speechConfig");const o=a;n.Contracts.throwIfNull(o,"speechConfig"),super(t.AudioConfig.fromStreamInput(r.AudioInputStream.createPushStream()),o.properties,new e.VoiceProfileConnectionFactory),this.privProperties=o.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,o){const c=await this.privVoiceAdapter.createProfile(a,o);return new r.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,o){return this.privVoiceAdapter.getActivationPhrases(a,o)}async enrollProfileAsync(a,o){const c=o;return n.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=o,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,o,c,l){const u=c;return new e.VoiceServiceRecognizer(a,o,u,l,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.properties)}getResult(a,o){return new r.VoiceProfileResult(a.ok?o:r.ResultReason.Canceled,a.statusText)}};return hd.VoiceProfileClient=i,hd}var pd={},iT;function sX(){if(iT)return pd;iT=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.SpeakerRecognizer=void 0;const e=we(),t=$e,n=ae();let r=class extends n.Recognizer{constructor(s,a){t.Contracts.throwIfNullOrUndefined(s,"speechConfig");const o=s;t.Contracts.throwIfNullOrUndefined(o,"speechConfig"),super(a,o.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=o.properties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){t.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}async recognizeOnceAsync(s){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(s)}async close(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(s){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(s);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,a,o,c){const l=o;return new e.SpeakerServiceRecognizer(s,a,l,c,this)}async dispose(s){this.privDisposedSpeakerRecognizer||s&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(s))}};return pd.SpeakerRecognizer=r,pd}var fd={},sT;function oX(){if(sT)return fd;sT=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.SpeakerIdentificationModel=void 0;const e=$e,t=ae();let n=class t${constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],e.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const s of i){if(s.profileType!==t.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+s.profileId);this.privVoiceProfiles.push(s),this.privProfileIds.push(s.profileId)}}static fromProfiles(i){return new t$(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return fd.SpeakerIdentificationModel=n,fd}var md={},oT;function aX(){if(oT)return md;oT=1,Object.defineProperty(md,"__esModule",{value:!0}),md.SpeakerVerificationModel=void 0;const e=$e,t=ae();let n=class n${constructor(i){if(e.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===t.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new n$(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===t.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return md.SpeakerVerificationModel=n,md}var vd={},PE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdMode=void 0,function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"}(e.LanguageIdMode||(e.LanguageIdMode={}))})(PE);var aT;function cX(){if(aT)return vd;aT=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.AutoDetectSourceLanguageConfig=void 0;const e=we(),t=$e,n=ae(),r=PE;let i=class Vm{constructor(){this.privProperties=new n.PropertyCollection,this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=r.LanguageIdMode.AtStart}static fromOpenRange(){const a=new Vm;return a.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.AutoDetectSourceLanguagesOpenRangeOptionName),a}static fromLanguages(a){t.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const o=new Vm;return o.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),o}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const o=new Vm,c=[];return a.forEach(l=>{if(c.push(l.language),l.endpointId!==void 0&&l.endpointId!==""){const u=l.language+n.PropertyId.SpeechServiceConnection_EndpointId.toString();o.properties.setProperty(u,l.endpointId)}}),o.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),o}get properties(){return this.privProperties}set mode(a){a===r.LanguageIdMode.Continuous?(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return vd.AutoDetectSourceLanguageConfig=i,vd}var Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});Ay.AutoDetectSourceLanguageResult=void 0;const cT=$e;class Vv{constructor(t,n){cT.Contracts.throwIfNullOrUndefined(t,"language"),cT.Contracts.throwIfNullOrUndefined(n,"languageDetectionConfidence"),this.privLanguage=t,this.privLanguageDetectionConfidence=n}static fromResult(t){return new Vv(t.language,t.languageDetectionConfidence)}static fromConversationTranscriptionResult(t){return new Vv(t.language,t.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}Ay.AutoDetectSourceLanguageResult=Vv;var Ny={};Object.defineProperty(Ny,"__esModule",{value:!0});Ny.SourceLanguageConfig=void 0;const lX=$e;class RE{constructor(t,n){lX.Contracts.throwIfNullOrUndefined(t,"language"),this.privLanguage=t,this.privEndpointId=n}static fromLanguage(t,n){return new RE(t,n)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}Ny.SourceLanguageConfig=RE;var K0={},lT;function uX(){return lT||(lT=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResult=e.SpeakerRecognitionResultType=void 0;const t=we(),n=ae();var r;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(r=e.SpeakerRecognitionResultType||(e.SpeakerRecognitionResultType={}));class i{constructor(o,c=n.ResultReason.RecognizedSpeaker,l=n.CancellationErrorCode.NoError,u=""){this.privProperties=new n.PropertyCollection;const h=o.scenario==="TextIndependentIdentification"?r.Identify:r.Verify;this.privReason=c,this.privReason!==n.ResultReason.Canceled?h===r.Identify?(this.privProfileId=o.identificationResult.identifiedProfile.profileId,this.privScore=o.identificationResult.identifiedProfile.score,this.privReason=n.ResultReason.RecognizedSpeakers):(this.privScore=o.verificationResult.score,o.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=n.ResultReason.NoMatch),o.verificationResult.profileId!==void 0&&o.verificationResult.profileId!==""&&(this.privProfileId=o.verificationResult.profileId)):(this.privErrorDetails=u,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[l])),this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(o))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}e.SpeakerRecognitionResult=i;class s extends n.CancellationDetailsBase{constructor(o,c,l){super(o,c,l)}static fromResult(o){const c=n.CancellationReason.Error;let l=n.CancellationErrorCode.NoError;return o.properties&&(l=n.CancellationErrorCode[o.properties.getProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new s(c,o.errorDetails,l)}}e.SpeakerRecognitionCancellationDetails=s}(K0)),K0}var G0={},pa={},uT;function r$(){if(uT)return pa;uT=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.ConversationImpl=pa.Conversation=void 0;const e=we(),t=ke(),n=$e,r=ae();let i=class{constructor(){}static createConversationAsync(o,c,l,u){n.Contracts.throwIfNullOrUndefined(o,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(o.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!o.subscriptionKey&&!o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])&&n.Contracts.throwIfNullOrUndefined(o.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let h,p,f;return typeof c=="string"?(h=new s(o,c),t.marshalPromiseToCallbacks((async()=>{})(),l,u)):(h=new s(o),p=c,f=l,h.createConversationAsync(()=>{p&&p()},g=>{f&&f(g)})),h}};pa.Conversation=i;class s extends i{constructor(o,c){if(super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=h=>{var p;this.privIsConnected=!0;try{(p=this.privConversationTranslator)!=null&&p.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,h)}catch{}},this.onDisconnected=h=>{var p;try{(p=this.privConversationTranslator)!=null&&p.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,h)}catch{}finally{this.close(!1)}},this.onCanceled=(h,p)=>{var f;try{(f=this.privConversationTranslator)!=null&&f.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,p)}catch{}},this.onParticipantUpdateCommandReceived=(h,p)=>{try{const f=this.privParticipants.getParticipant(p.id);if(f!==void 0){switch(p.key){case e.ConversationTranslatorCommandTypes.changeNickname:f.displayName=p.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:f.isUsingTts=p.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:f.profanity=p.value;break;case e.ConversationTranslatorCommandTypes.setMute:f.isMuted=p.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:f.translateToLanguages=p.value;break}this.privParticipants.addOrUpdateParticipant(f),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(f)],p.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(h,p)=>{try{this.privParticipants.participants.forEach(f=>f.isMuted=f.isHost?!1:p.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),p.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(h,p)=>{try{const f=this.privParticipants.addOrUpdateParticipant(p.participant);f!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(f)],p.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(h,p)=>{try{const f=this.privParticipants.getParticipant(p.participant.id);f!==void 0&&(this.privParticipants.deleteParticipant(p.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(f)],p.sessionId)))}catch{}},this.onTranslationReceived=(h,p)=>{try{switch(p.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break}}catch{}},this.onParticipantsListReceived=(h,p)=>{var f;try{if(p.sessionToken!==void 0&&p.sessionToken!==null&&(this.privRoom.token=p.sessionToken),this.privParticipants.participants=[...p.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),p.sessionId)),this.me.isHost){const g=(f=this.privConversationTranslator)==null?void 0:f.properties.getProperty(r.PropertyId.ConversationTranslator_Name);g!==void 0&&g.length>0&&g!==this.me.displayName&&this.changeNicknameAsync(g)}}catch{}},this.onConversationExpiration=(h,p)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,p)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new e.ConversationManager,o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{o.targetLanguages.length===0&&o.addTargetLanguage(this.privLanguage),o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceResponse_ProfanityOption])||o.setProfanity(r.ProfanityOption.Masked);let p=o.getProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name]);p==null&&(p="Host"),n.Contracts.throwIfNullOrTooLong(p,"nickname",50),n.Contracts.throwIfNullOrTooShort(p,"nickname",2),o.setProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name],p)}this.privConfig=o;const u=o;n.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,c;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const o=this.conversationId,c=this.participants.map(h=>({id:h.id,preferredLanguage:h.preferredLanguage,voice:h.voice})),l={};for(const h of e.ConversationConnectionConfig.transcriptionEventKeys){const p=this.properties.getProperty(h,"");p!==""&&(l[h]=p)}return{id:o,participants:c,conversationProperties:l}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}set conversationTranslator(o){this.privConversationTranslator=o}onToken(o){this.privConversationTranslator.onToken(o)}createConversationAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,l=>{l||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=l,this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}startConversationAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}addParticipantAsync(o,c,l){n.Contracts.throwIfNullOrUndefined(o,"Participant"),t.marshalPromiseToCallbacks(this.addParticipantImplAsync(o),c,l)}joinConversationAsync(o,c,l,u,h){try{n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,p=>{n.Contracts.throwIfNullOrUndefined(p,this.privErrors.permissionDeniedConnect),this.privRoom=p,this.privConfig.authorizationToken=p.cognitiveSpeechAuthToken,u&&u(p.cognitiveSpeechAuthToken)},p=>{this.handleError(p,h)})}catch(p){this.handleError(p,h)}}deleteConversationAsync(o,c){t.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),o,c)}async deleteConversationImplAsync(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(o,c){t.marshalPromiseToCallbacks(this.endConversationImplAsync(),o,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteAllParticipantsAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteParticipantAsync(o,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),()=>{this.handleCallback(c,l)},h=>{this.handleError(h,l)})}catch(u){this.handleError(u,l)}}removeParticipantAsync(o,c,l){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))t.marshalPromiseToCallbacks(this.removeParticipantImplAsync(o),c,l);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),l);let u="";typeof o=="string"?u=o:o.hasOwnProperty("id")?u=o.id:o.hasOwnProperty("userId")&&(u=o.userId),n.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(p=>p.id===u)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(u),()=>{this.handleCallback(c,l)},p=>{this.handleError(p,l)})}}catch(u){this.handleError(u,l)}}unlockConversationAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteAllParticipantsAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteParticipantAsync(o,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),()=>{this.handleCallback(c,l)},h=>{this.handleError(h,l)})}catch(u){this.handleError(u,l)}}sendTextMessageAsync(o,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}setTranslatedLanguagesAsync(o,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}changeNicknameAsync(o,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const l=this.conversationInfo;return l.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(l,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const c=this.conversationInfo;return c.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(o){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(l){throw l}o&&this.dispose()}handleCallback(o,c){if(o){try{o()}catch(l){c&&c(l)}o=void 0}}handleError(o,c){if(c)if(o instanceof Error){const l=o;c(l.name+": "+l.message)}else c(o)}toParticipants(o){const c=this.privParticipants.participants.map(l=>this.toParticipant(l));return o?c:c.filter(l=>l.isHost===!1)}toParticipant(o){return new r.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,c){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(o,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return pa.ConversationImpl=s,pa}var Iy={};Object.defineProperty(Iy,"__esModule",{value:!0});Iy.ConversationCommon=void 0;class dX{constructor(t){this.privAudioConfig=t}handleCallback(t,n){if(t){try{t()}catch(r){n&&n(r)}t=void 0}}handleError(t,n){if(n)if(t instanceof Error){const r=t;n(r.name+": "+r.message)}else n(t)}}Iy.ConversationCommon=dX;var gd={},dT;function hX(){if(dT)return gd;dT=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.ConversationExpirationEventArgs=void 0;const e=ae();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privExpirationTime=r}get expirationTime(){return this.privExpirationTime}};return gd.ConversationExpirationEventArgs=t,gd}var yd={},hT;function pX(){if(hT)return yd;hT=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.ConversationParticipantsChangedEventArgs=void 0;const e=ae();let t=class extends e.SessionEventArgs{constructor(r,i,s){super(s),this.privReason=r,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return yd.ConversationParticipantsChangedEventArgs=t,yd}var Sd={},pT;function fX(){if(pT)return Sd;pT=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.ConversationTranslationCanceledEventArgs=void 0;const e=yf();let t=class extends e.CancellationEventArgsBase{};return Sd.ConversationTranslationCanceledEventArgs=t,Sd}var wd={},fT;function mX(){if(fT)return wd;fT=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.ConversationTranslationEventArgs=void 0;const e=ae();let t=class extends e.RecognitionEventArgs{constructor(r,i,s){super(i,s),this.privResult=r}get result(){return this.privResult}};return wd.ConversationTranslationEventArgs=t,wd}var Cd={},mT;function vX(){if(mT)return Cd;mT=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.ConversationTranslationResult=void 0;const e=FF();let t=class extends e.TranslationRecognitionResult{constructor(r,i,s,a,o,c,l,u,h,p,f){super(i,a,o,c,l,u,void 0,void 0,h,p,f),this.privId=r,this.privOrigLang=s}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return Cd.ConversationTranslationResult=t,Cd}var Q0={},xd={},wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.StringUtils=void 0;class gX{static formatString(t,n){if(!t)return"";if(!n)return t;let r="",i="";const s=c=>{r+=c},a=c=>{i+=c};let o=s;for(let c=0;c<t.length;c++){const l=t[c],u=c+1<t.length?t[c+1]:"";switch(l){case"{":u==="{"?(o("{"),c++):o=a;break;case"}":u==="}"?(o("}"),c++):(n.hasOwnProperty(i)&&(r+=n[i]),o=s,i="");break;default:o(l);break}}return r}}wf.StringUtils=gX;var vT;function yX(){if(vT)return xd;vT=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.ConversationTranslatorConnectionFactory=void 0;const e=hn(),t=wf,n=$e,r=ae(),i=dn,s=Ni,a=Ii(),o=we();let c=class i$ extends a.ConnectionFactoryBase{constructor(u){super(),n.Contracts.throwIfNullOrUndefined(u,"convGetter"),this.privConvGetter=u}create(u,h,p){const f=u.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",g=this.privConvGetter().room,v=g.cognitiveSpeechRegion||u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,""),w={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(v),path:i$.CTS_VIRT_MIC_PATH,region:encodeURIComponent(v)};w[s.QueryParameterNames.Language]=encodeURIComponent(u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"")),w[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(g.roomId),w[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(g.participantId),w[s.QueryParameterNames.CtsIsParticipant]=g.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let y="";const S={},C={};if(f){y=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint),y||(y="wss://"+u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),y=t.StringUtils.formatString(y,w);const E=new URL(y);E.searchParams.forEach((T,_)=>{S[_]=T}),new o.TranscriberConnectionFactory().setQueryParams(S,u,y),S[s.QueryParameterNames.CtsMeetingId]=w[s.QueryParameterNames.CtsMeetingId],S[s.QueryParameterNames.CtsDeviceId]=w[s.QueryParameterNames.CtsDeviceId],g.isHost||(S[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in S||(S[s.QueryParameterNames.Format]="simple"),E.searchParams.forEach((T,_)=>{E.searchParams.set(_,S[_]),delete S[_]}),y=E.toString()}else{const E=new o.TranslationConnectionFactory;y=E.getEndpointUrl(u,!0),y=t.StringUtils.formatString(y,w),E.setQueryParams(S,u,y)}C[i.HeaderNames.ConnectionId]=p,C[e.RestConfigBase.configParams.token]=g.token,h.token&&(C[h.headerName]=h.token);const x=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new e.WebsocketConnection(y,S,C,new o.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),x,p)}};return xd.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",xd}var gT;function SX(){return gT||(gT=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranslator=e.SpeechState=void 0;const t=we(),n=yX(),r=ke(),i=$e,s=ae(),a=r$(),o=_E();var c;(function(h){h[h.Inactive=0]="Inactive",h[h.Connecting=1]="Connecting",h[h.Connected=2]="Connected"})(c=e.SpeechState||(e.SpeechState={}));class l extends s.TranslationRecognizer{constructor(p,f,g,v){super(p,f,new n.ConversationTranslatorConnectionFactory(v)),this.privSpeechState=c.Inactive,g&&(this.privTranslator=g,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(w,y)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,y)},this.recognized=async(w,y)=>{var S;(S=y.result)!=null&&S.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(y.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,y)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(p){this.privSpeechState=p}set authentication(p){this.privReco.authentication=p}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(p){try{if(this.privTranslator.canceled){const f=new o.ConversationTranslationCanceledEventArgs(s.CancellationReason.Error,p,s.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,f)}}catch{}}async cancelSpeech(){var p;try{this.stopContinuousRecognitionAsync(),await((p=this.privReco)==null?void 0:p.disconnect()),this.privSpeechState=c.Inactive}catch{}}}class u extends o.ConversationCommon{constructor(p){super(p),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new s.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var p;return(p=this.privConversation)==null?void 0:p.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(p){this.privCTRecognizer.authentication=p}setServiceProperty(p,f){const g=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));g[p]=f,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(g))}joinConversationAsync(p,f,g,v,w){try{if(typeof p=="string"){i.Contracts.throwIfNullOrUndefined(p,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(f,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),w);let y=g;(y==null||y==="")&&(y=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=s.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(s.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(y),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],y),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],f);const S=[s.PropertyId.SpeechServiceConnection_Host,s.PropertyId.ConversationTranslator_Host,s.PropertyId.SpeechServiceConnection_Endpoint,s.PropertyId.SpeechServiceConnection_ProxyHostName,s.PropertyId.SpeechServiceConnection_ProxyPassword,s.PropertyId.SpeechServiceConnection_ProxyPort,s.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const x of S){const E=this.privProperties.getProperty(x);if(E){const P=typeof x=="string"?x:s.PropertyId[x];this.privSpeechTranslationConfig.setProperty(P,E)}}const C=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const x of Object.keys(C))this.privSpeechTranslationConfig.setServiceProperty(x,C[x],s.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(p,f,y,x=>{x||this.handleError(new Error(this.privErrors.permissionDeniedConnect),w),this.privSpeechTranslationConfig.authorizationToken=x,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(v,w)},E=>{this.handleError(E,w)})},x=>{this.handleError(x,w)})}else typeof p=="object"?(i.Contracts.throwIfNullOrUndefined(p,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(f,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(s.PropertyId.ConversationTranslator_Name,f),this.privConversation=p,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=p.config,this.handleCallback(g,v)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),v)}catch(y){this.handleError(y,typeof g=="string"?w:v)}}leaveConversationAsync(p,f){r.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),p,f)}sendTextMessageAsync(p,f,g){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(p,this.privErrors.invalidArgs.replace("{arg}",p)),this.privConversation.sendTextMessageAsync(p,f,g)}catch(v){this.handleError(v,g)}}startTranscribingAsync(p,f){r.marshalPromiseToCallbacks((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),f),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(g){throw this.privIsSpeaking=!1,await this.cancelSpeech(),g}})(),p,f)}stopTranscribingAsync(p,f){r.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((g,v)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(g,v)})}catch{await this.cancelSpeech()}})(),p,f)}isDisposed(){return this.privIsDisposed}dispose(p,f,g){r.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),f,g)}async cancelSpeech(){var p;try{this.privIsSpeaking=!1,await((p=this.privCTRecognizer)==null?void 0:p.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=s.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key],"");const p=()=>this.privConversation;this.privCTRecognizer=new l(this.privSpeechTranslationConfig,this.privAudioConfig,this,p)}catch(p){throw await this.cancelSpeech(),p}}startContinuousRecognition(){return new Promise((p,f)=>{this.privCTRecognizer.startContinuousRecognitionAsync(p,f)})}}e.ConversationTranslator=u}(Q0)),Q0}var bd={},yT;function wX(){if(yT)return bd;yT=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.ConversationTranscriber=void 0;const e=we(),t=ke(),n=$e,r=ae();let i=class s$ extends r.Recognizer{constructor(a,o){const c=a;n.Contracts.throwIfNull(c,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new e.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(a,o,c){const l=a;return o.properties.mergeTo(l.properties),new s$(a,c)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])===r.OutputFormat[r.OutputFormat.Simple]?r.OutputFormat.Simple:r.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(a,o){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,o)}stopTranscribingAsync(a,o){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}close(a,o){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,o)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,l){const u=c;return l.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(a,o,u,l,this)}};return bd.ConversationTranscriber=i,bd}var fa={},ST;function CX(){if(ST)return fa;ST=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.Participant=fa.User=void 0;const e=ae();class t{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}fa.User=t;class n{constructor(i,s,a,o,c,l,u,h){this.privId=i,this.privAvatar=s,this.privDisplayName=a,this.privIsHost=o,this.privIsMuted=c,this.privIsUsingTts=l,this.privPreferredLanguage=u,this.privVoice=h,this.privProperties=new e.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,s,a){return new n(i,"",i,!1,!1,!1,s,a)}}return fa.Participant=n,fa}var o$={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParticipantChangedReason=void 0,function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"}(e.ParticipantChangedReason||(e.ParticipantChangedReason={}))})(o$);var ma={},wT;function xX(){if(wT)return ma;wT=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.MeetingImpl=ma.Meeting=void 0;const e=we(),t=ke(),n=$e,r=ae();let i=class{constructor(){}static createMeetingAsync(o,c,l,u){if(n.Contracts.throwIfNullOrUndefined(o,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(o.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),n.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!o.subscriptionKey&&!o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])&&n.Contracts.throwIfNullOrUndefined(o.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const h=new s(o,c);return t.marshalPromiseToCallbacks((async()=>{})(),l,u),h}};ma.Meeting=i;class s extends i{constructor(o,c){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=h=>{var p;this.privIsConnected=!0;try{(p=this.privConversationTranslator)!=null&&p.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,h)}catch{}},this.onDisconnected=h=>{var p;try{(p=this.privConversationTranslator)!=null&&p.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,h)}catch{}finally{this.close(!1)}},this.onCanceled=(h,p)=>{var f;try{(f=this.privConversationTranslator)!=null&&f.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,p)}catch{}},this.onParticipantUpdateCommandReceived=(h,p)=>{try{const f=this.privParticipants.getParticipant(p.id);if(f!==void 0){switch(p.key){case e.ConversationTranslatorCommandTypes.changeNickname:f.displayName=p.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:f.isUsingTts=p.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:f.profanity=p.value;break;case e.ConversationTranslatorCommandTypes.setMute:f.isMuted=p.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:f.translateToLanguages=p.value;break}this.privParticipants.addOrUpdateParticipant(f),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(f)],p.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(h,p)=>{try{this.privParticipants.participants.forEach(f=>f.isMuted=f.isHost?!1:p.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),p.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(h,p)=>{try{const f=this.privParticipants.addOrUpdateParticipant(p.participant);f!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(f)],p.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(h,p)=>{try{const f=this.privParticipants.getParticipant(p.participant.id);f!==void 0&&(this.privParticipants.deleteParticipant(p.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(f)],p.sessionId)))}catch{}},this.onTranslationReceived=(h,p)=>{try{switch(p.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break}}catch{}},this.onParticipantsListReceived=(h,p)=>{var f;try{if(p.sessionToken!==void 0&&p.sessionToken!==null&&(this.privRoom.token=p.sessionToken),this.privParticipants.participants=[...p.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),p.sessionId)),this.me.isHost){const g=(f=this.privConversationTranslator)==null?void 0:f.properties.getProperty(r.PropertyId.ConversationTranslator_Name);g!==void 0&&g.length>0&&g!==this.me.displayName&&this.changeNicknameAsync(g)}}catch{}},this.onConversationExpiration=(h,p)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,p)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new e.ConversationManager,o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=o;const u=o;n.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,c;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const o=this.meetingId,c=this.participants.map(h=>({id:h.id,preferredLanguage:h.preferredLanguage,voice:h.voice})),l={};for(const h of e.ConversationConnectionConfig.transcriptionEventKeys){const p=this.properties.getProperty(h,"");p!==""&&(l[h]=p)}return{id:o,participants:c,meetingProperties:l}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}createMeetingAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,l=>{l||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=l,this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}startMeetingAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}addParticipantAsync(o,c,l){n.Contracts.throwIfNullOrUndefined(o,"Participant"),t.marshalPromiseToCallbacks(this.addParticipantImplAsync(o),c,l)}joinMeetingAsync(o,c,l,u,h){try{n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,p=>{n.Contracts.throwIfNullOrUndefined(p,this.privErrors.permissionDeniedConnect),this.privRoom=p,this.privConfig.authorizationToken=p.cognitiveSpeechAuthToken,u&&u(p.cognitiveSpeechAuthToken)},p=>{this.handleError(p,h)})}catch(p){this.handleError(p,h)}}deleteMeetingAsync(o,c){t.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),o,c)}async deleteMeetingImplAsync(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(o,c){t.marshalPromiseToCallbacks(this.endMeetingImplAsync(),o,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteAllParticipantsAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteParticipantAsync(o,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),()=>{this.handleCallback(c,l)},h=>{this.handleError(h,l)})}catch(u){this.handleError(u,l)}}removeParticipantAsync(o,c,l){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))t.marshalPromiseToCallbacks(this.removeParticipantImplAsync(o),c,l);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),l);let u="";typeof o=="string"?u=o:o.hasOwnProperty("id")?u=o.id:o.hasOwnProperty("userId")&&(u=o.userId),n.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(p=>p.id===u)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(u),()=>{this.handleCallback(c,l)},p=>{this.handleError(p,l)})}}catch(u){this.handleError(u,l)}}unlockMeetingAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteAllParticipantsAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(o,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteParticipantAsync(o,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),()=>{this.handleCallback(c,l)},h=>{this.handleError(h,l)})}catch(u){this.handleError(u,l)}}sendTextMessageAsync(o,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}setTranslatedLanguagesAsync(o,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}changeNicknameAsync(o,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const l=this.meetingInfo;return l.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(l,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const c=this.meetingInfo;return c.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(o){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(l){throw l}o&&this.dispose()}handleCallback(o,c){if(o){try{o()}catch(l){c&&c(l)}o=void 0}}handleError(o,c){if(c)if(o instanceof Error){const l=o;c(l.name+": "+l.message)}else c(o)}toParticipants(o){const c=this.privParticipants.participants.map(l=>this.toParticipant(l));return o?c:c.filter(l=>l.isHost===!1)}toParticipant(o){return new r.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,c){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(o,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return ma.MeetingImpl=s,ma}var Ed={},CT;function bX(){if(CT)return Ed;CT=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.MeetingTranscriptionCanceledEventArgs=void 0;const e=yf();class t extends e.CancellationEventArgsBase{}return Ed.MeetingTranscriptionCanceledEventArgs=t,Ed}var Pd={},xT;function EX(){if(xT)return Pd;xT=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.MeetingTranscriber=void 0;const e=we(),t=ke(),n=$e,r=ae(),i=_E();let s=class{constructor(o){this.privAudioConfig=o,this.privProperties=new r.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return r.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o)}joinMeetingAsync(o,c,l){const u=o;n.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(o.config,this.privAudioConfig),n.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),t.marshalPromiseToCallbacks(u.connectTranscriberRecognizer(this.privRecognizer),c,l)}startTranscribingAsync(o,c){this.privRecognizer.startContinuousRecognitionAsync(o,c)}stopTranscribingAsync(o,c){this.privRecognizer.stopContinuousRecognitionAsync(o,c)}leaveMeetingAsync(o,c){this.privRecognizer.disconnectCallbacks(),t.marshalPromiseToCallbacks((async()=>{})(),o,c)}close(o,c){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),o,c)}async dispose(o){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),o&&(this.privDisposedRecognizer=!0))}};return Pd.MeetingTranscriber=s,Pd}var Rd={},bT;function PX(){if(bT)return Rd;bT=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.ConversationTranscriptionResult=void 0;const e=ae();let t=class extends e.RecognitionResult{constructor(r,i,s,a,o,c,l,u,h,p,f){super(r,i,s,a,o,c,l,h,p,f),this.privSpeakerId=u}get speakerId(){return this.privSpeakerId}};return Rd.ConversationTranscriptionResult=t,Rd}var ET;function _E(){return ET||(ET=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=r$();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return t.Conversation}}),Object.defineProperty(e,"ConversationImpl",{enumerable:!0,get:function(){return t.ConversationImpl}});var n=Iy;Object.defineProperty(e,"ConversationCommon",{enumerable:!0,get:function(){return n.ConversationCommon}});var r=hX();Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return r.ConversationExpirationEventArgs}});var i=pX();Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var s=fX();Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var a=mX();Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var o=vX();Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return o.ConversationTranslationResult}});var c=SX();Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var l=wX();Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return l.ConversationTranscriber}});var u=CX();Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return u.Participant}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return u.User}});var h=o$;Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return h.ParticipantChangedReason}});var p=xX();Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return p.Meeting}}),Object.defineProperty(e,"MeetingImpl",{enumerable:!0,get:function(){return p.MeetingImpl}});var f=bX();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return f.MeetingTranscriptionCanceledEventArgs}});var g=EX();Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return g.MeetingTranscriber}});var v=PX();Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return v.ConversationTranscriptionResult}})}(G0)),G0}var va={},PT;function TE(){if(PT)return va;PT=1,Object.defineProperty(va,"__esModule",{value:!0}),va.SynthesisRequest=va.Synthesizer=void 0;const e=we(),t=ke(),n=$e,r=ae();let i=class a${constructor(o){const c=o;n.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(o){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let l=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),u=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,""),h=a$.XMLEncode(o);return this.autoDetectSourceLanguage?l="en-US":u=u||c[l],u&&(h=`<voice name='${u}'>${h}</voice>`),h=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${l}'>${h}</speak>`,h}async dispose(o){this.privDisposed||(o&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const o=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(o.text,o.isSSML,o.requestId,o.cb,o.err,o.dataStream)}}createSynthesizerConfig(o){return new e.SynthesizerConfig(o,this.privProperties)}implCommonSynthesizeSetup(){let o=typeof window<"u"?"Browser":"Node",c="unknown",l="unknown";typeof navigator<"u"&&(o=o+"/"+navigator.platform,c=navigator.userAgent,l=navigator.appVersion);const u=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(o,c,l)))),h=this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0),p=h&&h!==""?new e.CognitiveSubscriptionKeyAuthentication(h):new e.CognitiveTokenAuthentication(()=>{const f=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(f)},()=>{const f=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(f)});this.privAdapter=this.createSynthesisAdapter(p,this.privConnectionFactory,u),this.privRestAdapter=this.createRestSynthesisAdapter(p,u)}static XMLEncode(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};va.Synthesizer=i;class s{constructor(o,c,l,u,h,p){this.requestId=o,this.text=c,this.isSSML=l,this.cb=u,this.err=h,this.dataStream=p}}return va.SynthesisRequest=s,va}var _d={},RT;function RX(){if(RT)return _d;RT=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.SpeechSynthesizer=void 0;const e=we(),t=ke(),n=gf,r=ta,i=vn,s=$e,a=ae(),o=TE();let c=class c$ extends a.Synthesizer{constructor(u,h){super(u),h!==null&&(h===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=h),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(u,h,p){const f=u;return h.properties.mergeTo(f.properties),new c$(u,p)}speakTextAsync(u,h,p,f){this.speakImpl(u,!1,h,p,f)}speakSsmlAsync(u,h,p,f){this.speakImpl(u,!0,h,p,f)}async getVoicesAsync(u=""){return this.getVoices(u)}close(u,h){s.Contracts.throwIfDisposed(this.privDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),u,h)}get internalData(){return this.privAdapter}createSynthesisAdapter(u,h,p){return new e.SpeechSynthesisAdapter(u,h,p,this,this.audioConfig)}createRestSynthesisAdapter(u,h){return new e.SynthesisRestAdapter(h,u)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(u,h,p,f,g){try{s.Contracts.throwIfDisposed(this.privDisposed);const v=t.createNoDashGuid();let w;g instanceof a.PushAudioOutputStreamCallback?w=new i.PushAudioOutputStreamImpl(g):g instanceof a.PullAudioOutputStream?w=g:g!==void 0?w=new n.AudioFileWriter(g):w=void 0,this.synthesisRequestQueue.enqueue(new o.SynthesisRequest(v,u,h,y=>{if(this.privSynthesizing=!1,p)try{p(y)}catch(S){f&&f(S)}p=void 0,this.adapterSpeak().catch(()=>{})},y=>{f&&f(y)},w)),this.adapterSpeak().catch(()=>{})}catch(v){if(f)if(v instanceof Error){const w=v;f(w.name+": "+w.message)}else f(v);this.dispose(!0).catch(()=>{})}}async getVoices(u){const h=t.createNoDashGuid(),p=await this.privRestAdapter.getVoicesList(h);if(p.ok&&Array.isArray(p.json)){let f=p.json;return u&&u.length>0&&(f=f.filter(g=>!!g.Locale&&g.Locale.toLowerCase()===u.toLowerCase())),new a.SynthesisVoicesResult(h,f,void 0)}else return new a.SynthesisVoicesResult(h,void 0,`Error: ${p.status}: ${p.statusText}`)}};return _d.SpeechSynthesizer=c,_d}var jy={};Object.defineProperty(jy,"__esModule",{value:!0});jy.SynthesisResult=void 0;class _X{constructor(t,n,r,i){this.privResultId=t,this.privReason=n,this.privErrorDetails=r,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}jy.SynthesisResult=_X;var Td={},_T;function TX(){if(_T)return Td;_T=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.SpeechSynthesisResult=void 0;const e=ae();let t=class extends e.SynthesisResult{constructor(r,i,s,a,o,c){super(r,i,a,o),this.privAudioData=s,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return Td.SpeechSynthesisResult=t,Td}var ky={};Object.defineProperty(ky,"__esModule",{value:!0});ky.SpeechSynthesisEventArgs=void 0;class AX{constructor(t){this.privResult=t}get result(){return this.privResult}}ky.SpeechSynthesisEventArgs=AX;var My={};Object.defineProperty(My,"__esModule",{value:!0});My.SpeechSynthesisWordBoundaryEventArgs=void 0;class NX{constructor(t,n,r,i,s,a){this.privAudioOffset=t,this.privDuration=n,this.privText=r,this.privWordLength=i,this.privTextOffset=s,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}My.SpeechSynthesisWordBoundaryEventArgs=NX;var Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});Oy.SpeechSynthesisBookmarkEventArgs=void 0;class IX{constructor(t,n){this.privAudioOffset=t,this.privText=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}Oy.SpeechSynthesisBookmarkEventArgs=IX;var Dy={};Object.defineProperty(Dy,"__esModule",{value:!0});Dy.SpeechSynthesisVisemeEventArgs=void 0;class jX{constructor(t,n,r){this.privAudioOffset=t,this.privVisemeId=n,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}Dy.SpeechSynthesisVisemeEventArgs=jX;var l$={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisBoundaryType=void 0,function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"}(e.SpeechSynthesisBoundaryType||(e.SpeechSynthesisBoundaryType={}))})(l$);var Ad={},TT;function kX(){if(TT)return Ad;TT=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.SynthesisVoicesResult=void 0;const e=ae();let t=class extends e.SynthesisResult{constructor(r,i,s){if(Array.isArray(i)){super(r,e.ResultReason.VoicesListRetrieved,void 0,new e.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new e.VoiceInfo(a))}else super(r,e.ResultReason.Canceled,s||"Error information unavailable",new e.PropertyCollection)}get voices(){return this.privVoices}};return Ad.SynthesisVoicesResult=t,Ad}var u$={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=void 0;var t;(function(a){a[a.Unknown=0]="Unknown",a[a.Female=1]="Female",a[a.Male=2]="Male",a[a.Neutral=3]="Neutral"})(t=e.SynthesisVoiceGender||(e.SynthesisVoiceGender={}));var n;(function(a){a[a.Unknown=0]="Unknown",a[a.OnlineNeural=1]="OnlineNeural",a[a.OnlineStandard=2]="OnlineStandard",a[a.OfflineNeural=3]="OfflineNeural",a[a.OfflineStandard=4]="OfflineStandard",a[a.OnlineNeuralHD=5]="OnlineNeuralHD"})(n=e.SynthesisVoiceType||(e.SynthesisVoiceType={}));const r={[t[t.Neutral]]:t.Neutral,[t[t.Male]]:t.Male,[t[t.Female]]:t.Female},i={Neural:n.OnlineNeural,NeuralHD:n.OnlineNeuralHD};class s{constructor(o){if(this.privStyleList=[],o){if(this.privName=o.Name,this.privLocale=o.Locale,this.privShortName=o.ShortName,this.privLocaleName=o.LocaleName,this.privDisplayName=o.DisplayName,this.privLocalName=o.LocalName,this.privVoiceType=i[o.VoiceType]||n.Unknown,this.privGender=r[o.Gender]||t.Unknown,o.StyleList&&Array.isArray(o.StyleList))for(const c of o.StyleList)this.privStyleList.push(c);this.privSampleRateHertz=o.SampleRateHertz,this.privStatus=o.Status,o.ExtendedPropertyMap&&(this.privExtendedPropertyMap=o.ExtendedPropertyMap),this.privWordsPerMinute=o.WordsPerMinute,Array.isArray(o.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...o.SecondaryLocaleList]),Array.isArray(o.RolePlayList)&&(this.privRolePlayList=[...o.RolePlayList]),o.VoiceTag&&(this.privVoiceTag=o.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}e.VoiceInfo=s})(u$);var Ly={};Object.defineProperty(Ly,"__esModule",{value:!0});Ly.SpeakerAudioDestination=void 0;const ga=ke(),MX=vn,or=ea,OX=60*30,AT={[or.AudioFormatTag.PCM]:"audio/wav",[or.AudioFormatTag.MuLaw]:"audio/x-wav",[or.AudioFormatTag.MP3]:"audio/mpeg",[or.AudioFormatTag.OGG_OPUS]:"audio/ogg",[or.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[or.AudioFormatTag.ALaw]:"audio/x-wav",[or.AudioFormatTag.FLAC]:"audio/flac",[or.AudioFormatTag.AMR_WB]:"audio/amr-wb",[or.AudioFormatTag.G722]:"audio/G722"};class DX{constructor(t){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=t||ga.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(t,n,r){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(t),this.updateSourceBuffer().then(()=>{n&&n()},i=>{r&&r(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(t),this.privBytesReceived+=t.byteLength)}close(t,n){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{t&&t()},r=>{n&&n(r)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===or.AudioFormatTag.PCM||this.privFormat.formatTag===or.AudioFormatTag.MuLaw||this.privFormat.formatTag===or.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(()=>{r=this.privFormat.addHeader(r);const i=new Blob([r],{type:AT[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{t&&t()},s=>{n&&n(s)})},i=>{n&&n(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(t){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=t;const n=AT[this.privFormat.formatTag];n===void 0?console.warn(`Unknown mimeType for format ${or.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(n)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=OX,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(n),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(r=>{ga.Events.instance.onEvent(new ga.BackgroundEvent(r))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(r=>{ga.Events.instance.onEvent(new ga.BackgroundEvent(r))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(r=>{ga.Events.instance.onEvent(new ga.BackgroundEvent(r))})):(console.warn(`Format ${or.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new MX.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var t;return((t=this.privAudio)==null?void 0:t.volume)??-1}set volume(t){this.privAudio&&(this.privAudio.volume=t)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(t,n){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{t&&t()},r=>{n&&n(r)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch{this.privAudioBuffer.unshift(t),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}Ly.SpeakerAudioDestination=DX;var Nd={},NT;function LX(){if(NT)return Nd;NT=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.ConversationTranscriptionCanceledEventArgs=void 0;const e=yf();let t=class extends e.CancellationEventArgsBase{};return Nd.ConversationTranscriptionCanceledEventArgs=t,Nd}var Id={},IT;function zX(){if(IT)return Id;IT=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.MeetingTranscriptionCanceledEventArgs=void 0;const e=yf();let t=class extends e.CancellationEventArgsBase{};return Id.MeetingTranscriptionCanceledEventArgs=t,Id}var d$={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGradingSystem=void 0,function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"}(e.PronunciationAssessmentGradingSystem||(e.PronunciationAssessmentGradingSystem={}))})(d$);var h$={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGranularity=void 0,function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"}(e.PronunciationAssessmentGranularity||(e.PronunciationAssessmentGranularity={}))})(h$);var jd={},jT;function FX(){if(jT)return jd;jT=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.PronunciationAssessmentConfig=void 0;const e=$e,t=ae();let n=class p${constructor(i,s=t.PronunciationAssessmentGradingSystem.FivePoint,a=t.PronunciationAssessmentGranularity.Phoneme,o=!1){e.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_GradingSystem,t.PronunciationAssessmentGradingSystem[s]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Granularity,t.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}static fromJSON(i){e.Contracts.throwIfNullOrUndefined(i,"json");const s=new p$("");return s.privProperties=new t.PropertyCollection,s.properties.setProperty(t.PropertyId.PronunciationAssessment_Json,i),s}toJSON(){return this.updateJson(),this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const s=i.internalData;s.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,s.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(t.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,s.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){e.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){e.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const s=i?"true":"false";this.properties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,s)}get enableMiscue(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Json,"{}"),s=JSON.parse(i),a=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText);a&&(s.referenceText=a);const o=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_GradingSystem);o&&(s.gradingSystem=o);const c=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Granularity);c&&(s.granularity=c),this.privPhonemeAlphabet&&(s.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(s.nbestPhonemeCount=this.privNBestPhonemeCount),s.enableProsodyAssessment=this.privEnableProsodyAssessment,s.dimension="Comprehensive",this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue)&&(s.enableMiscue=this.enableMiscue),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Params,JSON.stringify(s))}};return jd.PronunciationAssessmentConfig=n,jd}var ya={},kT;function $X(){if(kT)return ya;kT=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.PronunciationAssessmentResult=ya.ContentAssessmentResult=void 0;const e=$e,t=ae();class n{constructor(s){this.privPronJson=s}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}ya.ContentAssessmentResult=n;let r=class f${constructor(s){const a=JSON.parse(s);e.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(s){e.Contracts.throwIfNullOrUndefined(s,"result");const a=s.properties.getProperty(t.PropertyId.SpeechServiceResponse_JsonResult);return e.Contracts.throwIfNullOrUndefined(a,"json"),new f$(a)}get detailResult(){return this.privPronJson}get accuracyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.AccuracyScore}get pronunciationScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.PronScore}get completenessScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.CompletenessScore}get fluencyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.FluencyScore}get prosodyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new n(this.detailResult)}};return ya.PronunciationAssessmentResult=r,ya}var kd={},MT;function BX(){if(MT)return kd;MT=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.AvatarConfig=void 0;const e=$e,t=ae();let n=class{constructor(i,s,a){this.privCustomized=!1,this.privUseBuiltInVoice=!1,e.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=s,a===void 0&&(a=new t.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(i){this.privUseBuiltInVoice=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(i){this.privBackgroundImage=i}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(i){this.privRemoteIceServers=i}};return kd.AvatarConfig=n,kd}var m$={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarEventArgs=e.AvatarEventTypes=void 0,function(n){n.SwitchedToSpeaking="SwitchedToSpeaking",n.SwitchedToIdle="SwitchedToIdle",n.SessionClosed="SessionClosed"}(e.AvatarEventTypes||(e.AvatarEventTypes={}));class t{constructor(r,i){this.privOffset=r,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}e.AvatarEventArgs=t})(m$);var Md={},Od={},OT;function v$(){if(OT)return Od;OT=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.SpeechSynthesisConnectionFactory=void 0;const e=hn(),t=ae(),n=Ii(),r=we(),i=dn,s=Ni;let a=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(c,l,u){let h=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),f=n.ConnectionFactoryBase.getHostSuffix(p),g=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),v=g===void 0?"tts":"voice",w=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+p+"."+v+".speech"+f),y={},S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[i.HeaderNames.ConnectionId]=u,g!==void 0&&g!==""&&(!h||h.search(s.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(y[s.QueryParameterNames.CustomVoiceDeploymentId]=g),c.avatarEnabled&&(!h||h.search(s.QueryParameterNames.EnableAvatar)===-1)&&(y[s.QueryParameterNames.EnableAvatar]="true"),h||(h=w+this.synthesisUri),c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,h);const C=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(h,y,S,new r.WebsocketMessageFormatter,e.ProxyInfo.fromParameters(c.parameters),C,u)}};return Od.SpeechSynthesisConnectionFactory=a,Od}var DT;function VX(){if(DT)return Md;DT=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.AvatarSynthesizer=void 0;const e=v$(),t=we(),n=ke(),r=ta,i=ae(),s=$e,a=TE();let o=class extends i.Synthesizer{constructor(l,u){super(l),s.Contracts.throwIfNullOrUndefined(u,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=u,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(l){s.Contracts.throwIfNullOrUndefined(l,"peerConnection"),this.privIceServers=l.getConfiguration().iceServers,s.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const u=new n.Deferred;l.onicegatheringstatechange=()=>{n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering state: "+l.iceGatheringState,n.EventType.Debug)),l.iceGatheringState==="complete"&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering complete.",n.EventType.Info)),u.resolve())},l.onicecandidate=v=>{v.candidate?n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: "+v.candidate.candidate,n.EventType.Debug)):(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: complete",n.EventType.Debug)),u.resolve())},setTimeout(()=>{l.iceGatheringState!=="complete"&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering timeout.",n.EventType.Warning)),u.resolve())},2e3);const h=await l.createOffer();await l.setLocalDescription(h),await u.promise,n.Events.instance.onEvent(new n.PlatformEvent("peer connection: got local SDP.",n.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(l.localDescription));const p=await this.speak("",!1);if(p.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(p.resultId,p.reason,p.errorDetails,p.properties);const f=atob(p.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),g=new RTCSessionDescription(JSON.parse(f));return await l.setRemoteDescription(g),new i.SynthesisResult(p.resultId,p.reason,void 0,p.properties)}async speakTextAsync(l){const u=await this.speak(l,!1);return new i.SynthesisResult(u.resultId,u.reason,u.errorDetails,u.properties)}async speakSsmlAsync(l){const u=await this.speak(l,!0);return new i.SynthesisResult(u.resultId,u.reason,u.errorDetails,u.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return s.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(l,u,h){return new t.AvatarSynthesisAdapter(l,u,h,this,this.privAvatarConfig)}createRestSynthesisAdapter(l,u){}createSynthesizerConfig(l){const u=super.createSynthesizerConfig(l);return u.avatarEnabled=!0,u}async speak(l,u){const h=n.createNoDashGuid(),p=new n.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(h,l,u,f=>{p.resolve(f),this.privSynthesizing=!1,this.adapterSpeak()},f=>{p.reject(f),this.privSynthesizing=!1})),this.adapterSpeak(),p.promise}};return Md.AvatarSynthesizer=o,Md}var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.AvatarVideoFormat=Fl.Coordinate=void 0;class UX{constructor(t,n){this.x=t,this.y=n}}Fl.Coordinate=UX;class qX{constructor(t="H264",n=2e6,r=1920,i=1080){this.codec=t,this.bitrate=n,this.width=r,this.height=i}setCropRange(t,n){this.cropRange={bottomRight:n,topLeft:t}}}Fl.AvatarVideoFormat=qX;var Dd={},LT;function HX(){if(LT)return Dd;LT=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.AvatarWebRTCConnectionResult=void 0;const e=ae();let t=class extends e.SynthesisResult{constructor(r,i,s,a,o){super(i,s,a,o),this.privSDPAnswer=r}get SDPAnswer(){return this.privSDPAnswer}};return Dd.AvatarWebRTCConnectionResult=t,Dd}var Ld={},zT;function WX(){if(zT)return Ld;zT=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.Diagnostics=void 0;const e=hn(),t=ke();let n=class{static SetLoggingLevel(i){this.privListener=new e.ConsoleLoggingListener(i),t.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}static set onLogOutput(i){this.privListener&&(this.privListener.logCallback=i)}};return Ld.Diagnostics=n,n.privListener=void 0,Ld}var FT;function ae(){return FT||(FT=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=MF();Object.defineProperty(e,"AudioConfig",{enumerable:!0,get:function(){return t.AudioConfig}});var n=ea;Object.defineProperty(e,"AudioStreamFormat",{enumerable:!0,get:function(){return n.AudioStreamFormat}}),Object.defineProperty(e,"AudioFormatTag",{enumerable:!0,get:function(){return n.AudioFormatTag}});var r=AF();Object.defineProperty(e,"AudioInputStream",{enumerable:!0,get:function(){return r.AudioInputStream}}),Object.defineProperty(e,"PullAudioInputStream",{enumerable:!0,get:function(){return r.PullAudioInputStream}}),Object.defineProperty(e,"PushAudioInputStream",{enumerable:!0,get:function(){return r.PushAudioInputStream}});var i=vn;Object.defineProperty(e,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(e,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(e,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var s=OF;Object.defineProperty(e,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var a=my;Object.defineProperty(e,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var o=vy;Object.defineProperty(e,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return o.PushAudioOutputStreamCallback}});var c=gy;Object.defineProperty(e,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var l=yy;Object.defineProperty(e,"SessionEventArgs",{enumerable:!0,get:function(){return l.SessionEventArgs}});var u=CZ();Object.defineProperty(e,"RecognitionEventArgs",{enumerable:!0,get:function(){return u.RecognitionEventArgs}});var h=DF;Object.defineProperty(e,"OutputFormat",{enumerable:!0,get:function(){return h.OutputFormat}});var p=xZ();Object.defineProperty(e,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return p.IntentRecognitionEventArgs}});var f=Sy;Object.defineProperty(e,"RecognitionResult",{enumerable:!0,get:function(){return f.RecognitionResult}});var g=EZ();Object.defineProperty(e,"SpeechRecognitionResult",{enumerable:!0,get:function(){return g.SpeechRecognitionResult}});var v=PZ();Object.defineProperty(e,"IntentRecognitionResult",{enumerable:!0,get:function(){return v.IntentRecognitionResult}});var w=zl;Object.defineProperty(e,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return w.LanguageUnderstandingModel}});var y=RZ();Object.defineProperty(e,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return y.SpeechRecognitionEventArgs}}),Object.defineProperty(e,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return y.ConversationTranscriptionEventArgs}}),Object.defineProperty(e,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return y.MeetingTranscriptionEventArgs}});var S=_Z();Object.defineProperty(e,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return S.SpeechRecognitionCanceledEventArgs}});var C=TZ();Object.defineProperty(e,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return C.TranslationRecognitionEventArgs}});var x=AZ();Object.defineProperty(e,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return x.TranslationSynthesisEventArgs}});var E=FF();Object.defineProperty(e,"TranslationRecognitionResult",{enumerable:!0,get:function(){return E.TranslationRecognitionResult}});var P=wy;Object.defineProperty(e,"TranslationSynthesisResult",{enumerable:!0,get:function(){return P.TranslationSynthesisResult}});var T=$F;Object.defineProperty(e,"ResultReason",{enumerable:!0,get:function(){return T.ResultReason}});var _=IZ();Object.defineProperty(e,"SpeechConfig",{enumerable:!0,get:function(){return _.SpeechConfig}}),Object.defineProperty(e,"SpeechConfigImpl",{enumerable:!0,get:function(){return _.SpeechConfigImpl}});var k=jZ();Object.defineProperty(e,"SpeechTranslationConfig",{enumerable:!0,get:function(){return k.SpeechTranslationConfig}}),Object.defineProperty(e,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return k.SpeechTranslationConfigImpl}});var z=VF();Object.defineProperty(e,"PropertyCollection",{enumerable:!0,get:function(){return z.PropertyCollection}});var D=Cy;Object.defineProperty(e,"PropertyId",{enumerable:!0,get:function(){return D.PropertyId}});var O=kZ();Object.defineProperty(e,"Recognizer",{enumerable:!0,get:function(){return O.Recognizer}});var M=MZ();Object.defineProperty(e,"SpeechRecognizer",{enumerable:!0,get:function(){return M.SpeechRecognizer}});var b=OZ();Object.defineProperty(e,"IntentRecognizer",{enumerable:!0,get:function(){return b.IntentRecognizer}});var A=HF;Object.defineProperty(e,"VoiceProfileType",{enumerable:!0,get:function(){return A.VoiceProfileType}});var N=DZ();Object.defineProperty(e,"TranslationRecognizer",{enumerable:!0,get:function(){return N.TranslationRecognizer}});var j=LZ();Object.defineProperty(e,"Translations",{enumerable:!0,get:function(){return j.Translations}});var R=QF;Object.defineProperty(e,"NoMatchReason",{enumerable:!0,get:function(){return R.NoMatchReason}});var I=zZ();Object.defineProperty(e,"NoMatchDetails",{enumerable:!0,get:function(){return I.NoMatchDetails}});var $=xy;Object.defineProperty(e,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return $.TranslationRecognitionCanceledEventArgs}});var U=$Z();Object.defineProperty(e,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return U.IntentRecognitionCanceledEventArgs}});var G=Sf;Object.defineProperty(e,"CancellationDetailsBase",{enumerable:!0,get:function(){return G.CancellationDetailsBase}});var Y=VZ();Object.defineProperty(e,"CancellationDetails",{enumerable:!0,get:function(){return Y.CancellationDetails}});var J=ZF;Object.defineProperty(e,"CancellationErrorCode",{enumerable:!0,get:function(){return J.CancellationErrorCode}});var oe=UZ();Object.defineProperty(e,"ConnectionEventArgs",{enumerable:!0,get:function(){return oe.ConnectionEventArgs}});var V=qZ();Object.defineProperty(e,"ServiceEventArgs",{enumerable:!0,get:function(){return V.ServiceEventArgs}});var H=KF();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return H.Connection}});var te=by;Object.defineProperty(e,"PhraseListGrammar",{enumerable:!0,get:function(){return te.PhraseListGrammar}});var re=bE();Object.defineProperty(e,"DialogServiceConfig",{enumerable:!0,get:function(){return re.DialogServiceConfig}});var ne=HZ();Object.defineProperty(e,"BotFrameworkConfig",{enumerable:!0,get:function(){return ne.BotFrameworkConfig}});var he=WZ();Object.defineProperty(e,"CustomCommandsConfig",{enumerable:!0,get:function(){return he.CustomCommandsConfig}});var ue=GZ();Object.defineProperty(e,"DialogServiceConnector",{enumerable:!0,get:function(){return ue.DialogServiceConnector}});var _e=Ey;Object.defineProperty(e,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return _e.ActivityReceivedEventArgs}});var je=Py;Object.defineProperty(e,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return je.TurnStatusReceivedEventArgs}});var qe=XF;Object.defineProperty(e,"ServicePropertyChannel",{enumerable:!0,get:function(){return qe.ServicePropertyChannel}});var ht=e$;Object.defineProperty(e,"ProfanityOption",{enumerable:!0,get:function(){return ht.ProfanityOption}});var Me=ZZ();Object.defineProperty(e,"BaseAudioPlayer",{enumerable:!0,get:function(){return Me.BaseAudioPlayer}});var L=_y;Object.defineProperty(e,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return L.ConnectionMessageEventArgs}});var K=WF();Object.defineProperty(e,"ConnectionMessage",{enumerable:!0,get:function(){return K.ConnectionMessage}});var F=Ty;Object.defineProperty(e,"VoiceProfile",{enumerable:!0,get:function(){return F.VoiceProfile}});var Q=tX();Object.defineProperty(e,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return Q.VoiceProfileEnrollmentResult}}),Object.defineProperty(e,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return Q.VoiceProfileEnrollmentCancellationDetails}});var Z=nX();Object.defineProperty(e,"VoiceProfileResult",{enumerable:!0,get:function(){return Z.VoiceProfileResult}}),Object.defineProperty(e,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return Z.VoiceProfileCancellationDetails}});var X=rX();Object.defineProperty(e,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return X.VoiceProfilePhraseResult}});var se=iX();Object.defineProperty(e,"VoiceProfileClient",{enumerable:!0,get:function(){return se.VoiceProfileClient}});var pe=sX();Object.defineProperty(e,"SpeakerRecognizer",{enumerable:!0,get:function(){return pe.SpeakerRecognizer}});var Ne=oX();Object.defineProperty(e,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return Ne.SpeakerIdentificationModel}});var Ze=aX();Object.defineProperty(e,"SpeakerVerificationModel",{enumerable:!0,get:function(){return Ze.SpeakerVerificationModel}});var Ht=cX();Object.defineProperty(e,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return Ht.AutoDetectSourceLanguageConfig}});var zr=Ay;Object.defineProperty(e,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return zr.AutoDetectSourceLanguageResult}});var gr=Ny;Object.defineProperty(e,"SourceLanguageConfig",{enumerable:!0,get:function(){return gr.SourceLanguageConfig}});var bt=uX();Object.defineProperty(e,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return bt.SpeakerRecognitionResult}}),Object.defineProperty(e,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return bt.SpeakerRecognitionResultType}}),Object.defineProperty(e,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return bt.SpeakerRecognitionCancellationDetails}});var ft=_E();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return ft.Conversation}}),Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return ft.ConversationExpirationEventArgs}}),Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return ft.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return ft.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return ft.ConversationTranslationEventArgs}}),Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return ft.ConversationTranslationResult}}),Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return ft.ConversationTranslator}}),Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return ft.ConversationTranscriber}}),Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return ft.ConversationTranscriptionResult}}),Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return ft.Meeting}}),Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return ft.MeetingTranscriber}}),Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return ft.Participant}}),Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return ft.ParticipantChangedReason}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return ft.User}});var Zn=TE();Object.defineProperty(e,"Synthesizer",{enumerable:!0,get:function(){return Zn.Synthesizer}});var Xn=SE;Object.defineProperty(e,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Xn.SpeechSynthesisOutputFormat}});var er=RX();Object.defineProperty(e,"SpeechSynthesizer",{enumerable:!0,get:function(){return er.SpeechSynthesizer}});var fe=jy;Object.defineProperty(e,"SynthesisResult",{enumerable:!0,get:function(){return fe.SynthesisResult}});var Pe=TX();Object.defineProperty(e,"SpeechSynthesisResult",{enumerable:!0,get:function(){return Pe.SpeechSynthesisResult}});var Oe=ky;Object.defineProperty(e,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return Oe.SpeechSynthesisEventArgs}});var ct=My;Object.defineProperty(e,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return ct.SpeechSynthesisWordBoundaryEventArgs}});var Ge=Oy;Object.defineProperty(e,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Ge.SpeechSynthesisBookmarkEventArgs}});var mt=Dy;Object.defineProperty(e,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return mt.SpeechSynthesisVisemeEventArgs}});var st=l$;Object.defineProperty(e,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return st.SpeechSynthesisBoundaryType}});var pn=kX();Object.defineProperty(e,"SynthesisVoicesResult",{enumerable:!0,get:function(){return pn.SynthesisVoicesResult}});var sa=u$;Object.defineProperty(e,"SynthesisVoiceGender",{enumerable:!0,get:function(){return sa.SynthesisVoiceGender}}),Object.defineProperty(e,"SynthesisVoiceType",{enumerable:!0,get:function(){return sa.SynthesisVoiceType}}),Object.defineProperty(e,"VoiceInfo",{enumerable:!0,get:function(){return sa.VoiceInfo}});var yu=Ly;Object.defineProperty(e,"SpeakerAudioDestination",{enumerable:!0,get:function(){return yu.SpeakerAudioDestination}});var IS=LX();Object.defineProperty(e,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return IS.ConversationTranscriptionCanceledEventArgs}});var jS=zX();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return jS.MeetingTranscriptionCanceledEventArgs}});var kS=d$;Object.defineProperty(e,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return kS.PronunciationAssessmentGradingSystem}});var MS=h$;Object.defineProperty(e,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return MS.PronunciationAssessmentGranularity}});var OS=FX();Object.defineProperty(e,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return OS.PronunciationAssessmentConfig}});var DS=$X();Object.defineProperty(e,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return DS.PronunciationAssessmentResult}});var LS=PE;Object.defineProperty(e,"LanguageIdMode",{enumerable:!0,get:function(){return LS.LanguageIdMode}});var zS=BX();Object.defineProperty(e,"AvatarConfig",{enumerable:!0,get:function(){return zS.AvatarConfig}});var FS=m$;Object.defineProperty(e,"AvatarEventArgs",{enumerable:!0,get:function(){return FS.AvatarEventArgs}});var $S=VX();Object.defineProperty(e,"AvatarSynthesizer",{enumerable:!0,get:function(){return $S.AvatarSynthesizer}});var kf=Fl;Object.defineProperty(e,"AvatarVideoFormat",{enumerable:!0,get:function(){return kf.AvatarVideoFormat}}),Object.defineProperty(e,"Coordinate",{enumerable:!0,get:function(){return kf.Coordinate}});var BS=HX();Object.defineProperty(e,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return BS.AvatarWebRTCConnectionResult}});var VS=WX();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return VS.Diagnostics}});var US=gE;Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return US.LogLevel}})}(H0)),H0}var $T;function KX(){if($T)return Du;$T=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.ProxyInfo=void 0;const e=ae();let t=class g${constructor(r,i,s,a){this.privProxyHostName=r,this.privProxyPort=i,this.privProxyUserName=s,this.privProxyPassword=a}static fromParameters(r){return new g$(r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPort),10),r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName),r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(r){return this.fromParameters(r.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return Du.ProxyInfo=t,Du}var y$={};const GX=new Set(["json","buffer","string"]);var QX=e=>(...t)=>{const n=new Set;let r,i,s,a="";return t.forEach(o=>{if(typeof o=="string")if(o.toUpperCase()===o)if(r){const c=`Can't set method to ${o}, already set to ${r}.`;throw new Error(c)}else r=o;else if(o.startsWith("http:")||o.startsWith("https:"))a=o;else if(GX.has(o))i=o;else throw new Error(`Unknown encoding, ${o}`);else if(typeof o=="number")n.add(o);else if(typeof o=="object")if(Array.isArray(o)||o instanceof Set)o.forEach(c=>n.add(c));else{if(s)throw new Error("Cannot set headers twice.");s=o}else throw new Error(`Unknown type: ${typeof o}`)}),r||(r="GET"),n.size===0&&n.add(200),e(n,r,i,s,a)};const JX=QX;class AE extends Error{constructor(t,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,AE),this.name="StatusError",this.message=t.statusMessage,this.statusCode=t.status,this.res=t,this.json=t.json.bind(t),this.text=t.text.bind(t),this.arrayBuffer=t.arrayBuffer.bind(t);let r;Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(const[s,a]of t.headers.entries())this.headers[s.toLowerCase()]=a}}const YX=(e,t,n,r,i)=>async(s,a,o={})=>{s=i+(s||"");let c=new URL(s);if(r||(r={}),c.username&&(r.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),r["Content-Type"]="application/json";else throw new Error("Unknown body type.");o=new Headers({...r||{},...o});const l=await fetch(c,{method:t,headers:o,body:a});if(l.statusCode=l.status,!e.has(l.status))throw new AE(l);return n==="json"?l.json():n==="buffer"?l.arrayBuffer():n==="string"?l.text():l};var ZX=JX(YX);(function(e){var t=nt&&nt.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RestMessageAdapter=e.RestRequestType=void 0;const n=t(ZX),r=ke();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=e.RestRequestType||(e.RestRequestType={}));class s{constructor(o){if(!o)throw new r.ArgumentNullError("configParams");this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}static extractHeaderValue(o,c){let l="";try{const u=c.trim().split(/[\r\n]+/),h={};u.forEach(p=>{const f=p.split(": "),g=f.shift().toLowerCase(),v=f.join(": ");h[g]=v}),l=h[o.toLowerCase()]}catch{}return l}set options(o){this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}setHeaders(o,c){this.privHeaders[o]=c}request(o,c,l={},u=null){const h=new r.Deferred,p=o===i.File?"POST":o,f=(v,w={})=>{const y=v;return{data:JSON.stringify(w),headers:JSON.stringify(v.headers),json:w,ok:v.statusCode>=200&&v.statusCode<300,status:v.statusCode,statusText:w.error?w.error.message:y.statusText?y.statusText:y.statusMessage}},g=v=>{const w=n.default(c,p,this.privHeaders,200,201,202,204,400,401,402,403,404),y=this.queryParams(l)===""?"":`?${this.queryParams(l)}`;w(y,v).then(async S=>{if(o===i.Delete||S.statusCode===204)h.resolve(f(S));else try{const C=await S.json();h.resolve(f(S,C))}catch{h.resolve(f(S))}}).catch(S=>{h.reject(S)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),o===i.Post&&u&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),g(u),h.promise}queryParams(o={}){return Object.keys(o).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(o[c])).join("&")}}e.RestMessageAdapter=s})(y$);var Cf={};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.RestConfigBase=void 0;class ko{static get requestOptions(){return ko.privDefaultRequestOptions}static get configParams(){return ko.privDefaultParams}static get restErrors(){return ko.privRestErrors}}Cf.RestConfigBase=ko;ko.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};ko.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};ko.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var BT;function hn(){return BT||(BT=1,function(e){var t=nt&&nt.__createBinding||(Object.create?function(r,i,s,a){a===void 0&&(a=s),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,a){a===void 0&&(a=s),r[a]=i[s]}),n=nt&&nt.__exportStar||function(r,i){for(var s in r)s!=="default"&&!i.hasOwnProperty(s)&&t(i,r,s)};Object.defineProperty(e,"__esModule",{value:!0}),n(dy,e),n(_F,e),n(QY(),e),n(JY(),e),n(hy,e),n(py,e),n(vf,e),n(fy,e),n(KX(),e),n(y$,e),n(Cf,e)}(V0)),V0}var VT;function XX(){if(VT)return ku;VT=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.IntentConnectionFactory=void 0;const e=hn(),t=ae(),n=Ii(),r=we(),i=dn;let s=class extends n.ConnectionFactoryBase{create(o,c,l){let u=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!u){const g=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_IntentRegion),v=n.ConnectionFactoryBase.getHostSuffix(g);u=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+g+".sr.speech"+v)+"/speech/recognition/interactive/cognitiveservices/v1"}const h={format:"simple",language:o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(o,h,u);const p={};c.token!==void 0&&c.token!==""&&(p[c.headerName]=c.token),p[i.HeaderNames.ConnectionId]=l,o.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,u);const f=o.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(u,h,p,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(o),f,l)}getSpeechRegionFromIntentRegion(o){switch(o){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return o}}};return ku.IntentConnectionFactory=s,ku}var Sa={},UT;function eee(){if(UT)return Sa;UT=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.VoiceProfileConnectionFactory=Sa.SpeakerRecognitionConnectionFactory=void 0;const e=hn(),t=ae(),n=Ii(),r=we(),i=dn;class s extends n.ConnectionFactoryBase{create(l,u,h,p){let f=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!f){const y=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),S=n.ConnectionFactoryBase.getHostSuffix(y),C=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${y}.spr-frontend.speech${S}`),x=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");f=`${C}/speaker/ws/${this.scenarioToPath(x)}/${h}`}const g={format:"simple",language:l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(l,g,f);const v={};u.token!==void 0&&u.token!==""&&(v[u.headerName]=u.token),v[i.HeaderNames.ConnectionId]=p,v[i.HeaderNames.SpIDAuthKey]=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Key),l.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,f);const w=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(f,g,v,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),w,p)}scenarioToPath(l){switch(l){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends s{create(l,u,h){return super.create(l,u,"recognition",h)}};Sa.SpeakerRecognitionConnectionFactory=a;class o extends s{create(l,u,h){return super.create(l,u,"profile",h)}}return Sa.VoiceProfileConnectionFactory=o,Sa}var zy={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionEndedEvent=e.RecognitionCompletionStatus=e.RecognitionStartedEvent=e.ConnectingToServiceEvent=e.ListeningStartedEvent=e.RecognitionTriggeredEvent=e.SpeechRecognitionEvent=void 0;const t=ke();class n extends t.PlatformEvent{constructor(u,h,p,f=t.EventType.Info){super(u,f),this.privRequestId=h,this.privSessionId=p}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}e.SpeechRecognitionEvent=n;class r extends n{constructor(u,h,p,f){super("RecognitionTriggeredEvent",u,h),this.privAudioSourceId=p,this.privAudioNodeId=f}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.RecognitionTriggeredEvent=r;class i extends n{constructor(u,h,p,f){super("ListeningStartedEvent",u,h),this.privAudioSourceId=p,this.privAudioNodeId=f}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.ListeningStartedEvent=i;class s extends n{constructor(u,h,p){super("ConnectingToServiceEvent",u,p),this.privAuthFetchEventid=h}get authFetchEventid(){return this.privAuthFetchEventid}}e.ConnectingToServiceEvent=s;class a extends n{constructor(u,h,p,f,g){super("RecognitionStartedEvent",u,g),this.privAudioSourceId=h,this.privAudioNodeId=p,this.privAuthFetchEventId=f}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}e.RecognitionStartedEvent=a;var o;(function(l){l[l.Success=0]="Success",l[l.AudioSourceError=1]="AudioSourceError",l[l.AudioSourceTimeout=2]="AudioSourceTimeout",l[l.AuthTokenFetchError=3]="AuthTokenFetchError",l[l.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",l[l.UnAuthorized=5]="UnAuthorized",l[l.ConnectTimeout=6]="ConnectTimeout",l[l.ConnectError=7]="ConnectError",l[l.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",l[l.UnknownError=9]="UnknownError"})(o=e.RecognitionCompletionStatus||(e.RecognitionCompletionStatus={}));class c extends n{constructor(u,h,p,f,g,v,w,y){super("RecognitionEndedEvent",u,g,w===o.Success?t.EventType.Info:t.EventType.Error),this.privAudioSourceId=h,this.privAudioNodeId=p,this.privAuthFetchEventId=f,this.privStatus=w,this.privError=y,this.privServiceTag=v}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}e.RecognitionEndedEvent=c})(zy);var zd={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.SpeechConnectionMessage=void 0;const J0=ke(),ps=dn;class NE extends J0.ConnectionMessage{constructor(t,n,r,i,s,a,o,c){if(!n)throw new J0.ArgumentNullError("path");if(!r)throw new J0.ArgumentNullError("requestId");const l={};if(l[ps.HeaderNames.Path]=n,l[ps.HeaderNames.RequestId]=r,l[ps.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(l[ps.HeaderNames.ContentType]=i),a&&(l[ps.HeaderNames.RequestStreamId]=a),o)for(const u in o)u&&(l[u]=o[u]);c?super(t,s,l,c):super(t,s,l),this.privPath=n,this.privRequestId=r,this.privContentType=i,this.privStreamId=a,this.privAdditionalHeaders=o}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(t){let n=null,r=null,i=null,s=null;const a={};if(t.headers)for(const o in t.headers)o&&(o.toLowerCase()===ps.HeaderNames.Path.toLowerCase()?n=t.headers[o]:o.toLowerCase()===ps.HeaderNames.RequestId.toLowerCase()?r=t.headers[o]:o.toLowerCase()===ps.HeaderNames.ContentType.toLowerCase()?i=t.headers[o]:o.toLowerCase()===ps.HeaderNames.RequestStreamId.toLowerCase()?s=t.headers[o]:a[o]=t.headers[o]);return new NE(t.messageType,n,r,i,t.body,s,a,t.id)}}qs.SpeechConnectionMessage=NE;var qT;function tee(){if(qT)return zd;qT=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.ServiceRecognizerBase=void 0;const e=hn(),t=ke(),n=ae(),r=we(),i=qs;let s=class Nh{constructor(o,c,l,u,h){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!o)throw new t.ArgumentNullError("authentication");if(!c)throw new t.ArgumentNullError("connectionFactory");if(!l)throw new t.ArgumentNullError("audioSource");if(!u)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=u.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=o,this.privConnectionFactory=c,this.privAudioSource=l,this.privRecognizerConfig=u,this.privIsDisposed=!1,this.privRecognizer=h,this.privRequestSession=new r.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new r.DynamicGrammarBuilder,this.privSpeechContext=new r.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new r.AgentConfig,this.privRecognizerConfig.parameters.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=t.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(f=>{if(f.name==="ConnectionClosedEvent"){const g=f;(g.statusCode===1003||g.statusCode===1007||g.statusCode===1002||g.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(n.CancellationReason.Error,g.statusCode===1007?n.CancellationErrorCode.BadRequestParameters:n.CancellationErrorCode.ConnectionFailure,`${g.reason} websocket error code: ${g.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=t.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const o=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(o!==void 0){const c=o.split(","),l=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),u=l!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:u},output:{interimResults:{mode:"Always"}},targetLanguages:c}),l!==void 0){const h={};for(const p of c)h[p]=l;this.privSpeechContext.setSection("synthesis",{defaultVoices:h})}}}setSpeechSegmentationTimeoutJson(){const o=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),c=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),l=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationStrategy,void 0),u={segmentation:{mode:""}};let h=!1;if(l!==void 0){h=!0;let p="";switch(l.toLowerCase()){case"default":break;case"time":p="Custom";break;case"semantic":p="Semantic";break}u.segmentation.mode=p}if(o!==void 0){h=!0;const p=parseInt(o,10);u.segmentation.mode="Custom",u.segmentation.segmentationSilenceTimeoutMs=p}if(c!==void 0){h=!0;const p=parseInt(c,10);u.segmentation.mode="Custom",u.segmentation.segmentationForcedTimeoutMs=p}if(h){const p=this.recognitionMode===r.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===r.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",f=this.privSpeechContext.getSection("phraseDetection");f.mode=p,f[p]=u,this.privSpeechContext.setSection("phraseDetection",f)}}setLanguageIdJson(){const o=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const l=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let u;this.privRecognizerConfig.languageIdMode==="Continuous"?u="DetectContinuous":u="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:l,mode:u,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const h=this.privRecognizerConfig.sourceLanguageModels;h!==void 0&&(o.customModels=h,o.onInterim={action:"None"},o.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(o.onInterim={action:"Translate"},o.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",o)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(r.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()===n.OutputFormat[n.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(o){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.ConversationTranslator_Token,o)}set voiceProfileType(o){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.SpeechServiceConnection_SpeakerIdMode,o)}set authentication(o){this.privAuthentication=o}isDisposed(){return this.privIsDisposed}async dispose(o){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{await(await this.privConnectionConfigurationPromise).dispose(o)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(o,c,l){if(this.recognizeOverride!==void 0){await this.recognizeOverride(o,c,l);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=o,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=c,this.privErrorCallback=l,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const u=this.connectImpl();let h;try{const g=await this.audioSource.attach(this.privRequestSession.audioNodeId),v=await this.audioSource.format,w=await this.audioSource.deviceInfo;this.privIsLiveAudio=w.type&&w.type===r.type.Microphones,h=new e.ReplayableAudioNode(g,v.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:w}}catch(g){throw await this.privRequestSession.onStopRecognizing(),g}try{await u}catch(g){await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,g);return}const p=new n.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,p),this.receiveMessage(),this.sendAudio(h).catch(async g=>{await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,g)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(o,c){this.connectImpl().then(()=>{try{o&&o()}catch(l){c&&c(l)}},l=>{try{c&&c(l)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(o){}async sendNetworkMessage(o,c){const l=typeof c=="string"?t.MessageType.Text:t.MessageType.Binary,u=typeof c=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(l,o,this.privRequestSession.requestId,u,c))}set activityTemplate(o){this.privActivityTemplate=o}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(o){this.privExpectContentAssessmentResponse=o}async sendTelemetryData(){const o=this.privRequestSession.getTelemetry();if(Nh.telemetryDataEnabled!==!0||this.privIsDisposed||o===null)return;if(Nh.telemetryData)try{Nh.telemetryData(o)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",o))}async cancelRecognitionLocal(o,c,l){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o,c,l))}async receiveMessage(){try{if(this.privIsDisposed)return;let o=await this.fetchConnection();const c=await o.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!c)return this.receiveMessage();this.privServiceHasSentMessage=!0;const l=i.SpeechConnectionMessage.fromConnectionMessage(c);if(l.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(l.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const u=r.SpeechDetected.fromJSON(l.textBody,this.privRequestSession.currentTurnAudioOffset),h=new n.RecognitionEventArgs(u.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,h);break;case"speech.enddetected":let p;l.textBody.length>0?p=l.textBody:p="{ Offset: 0 }";const f=r.SpeechDetected.fromJSON(p,this.privRequestSession.currentTurnAudioOffset),g=new n.RecognitionEventArgs(f.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,g);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(n.CancellationReason.EndOfStream,n.CancellationErrorCode.NoError,void 0));const v=new n.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,v);return}else o=await this.fetchConnection(),await this.sendPrePayloadJSON(o);break;default:await this.processTypeSpecificMessages(l)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(l.path.toLowerCase(),l.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const o=this.privRequestSession.recognitionBytesSent,c=this.privAverageBytesPerMs!==0?o/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(c)}sendSpeechContext(o,c){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const l=this.speechContext.toJSON();if(c&&this.privRequestSession.onSpeechContext(),l)return o.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",l))}noOp(){}async sendPrePayloadJSON(o,c=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(o);await this.sendSpeechContext(o,c),await this.sendWaveHeader(o)}async sendWaveHeader(o){const c=await this.audioSource.format;return o.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",c.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(o=>o.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(o,c,l){if(c.onSpeechContext(),Nh.telemetryDataEnabled!==!0){const h={context:{system:JSON.parse(l).context.system}};l=JSON.stringify(h)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const u=JSON.parse(l);u.context.DisableReferenceChannel="True",u.context.MicSpec="1_0_0",l=JSON.stringify(u)}if(l)return o.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.config",c.requestId,"application/json",l))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(o=>o.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(o){const c=await this.audioSource.format;this.privAverageBytesPerMs=c.avgBytesPerSec/1e3;let l=Date.now();const u=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),h=c.avgBytesPerSec/1e3*parseInt(u,10),p=this.privRequestSession.recogNumber,f=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===p){const g=await this.fetchConnection(),v=await o.read();if(this.privRequestSession.isSpeechEnded)return;let w,y;if(!v||v.isEnd?(w=null,y=0):(w=v.buffer,this.privRequestSession.onAudioSent(w.byteLength),h>=this.privRequestSession.bytesSent?y=0:y=Math.max(0,l-Date.now())),y!==0&&await this.delay(y),w!==null&&(l=Date.now()+w.byteLength*1e3/(c.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===p)if(g.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,w)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),v!=null&&v.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return f()}};return f()}async retryableConnect(){let o=!1;this.privAuthFetchEventId=t.createNoDashGuid();const c=this.privRequestSession.sessionId;this.privConnectionId=c!==void 0?c:t.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let l=0,u="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const p=await(o?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const f=this.privConnectionFactory.create(this.privRecognizerConfig,p,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(f.events),f.events.attach(v=>{this.connectionEvents.onEvent(v)});const g=await f.open();if(g.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(g.statusCode),Promise.resolve(f);g.statusCode===1006&&(o=!0),l=g.statusCode,u=g.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(l,u),Promise.reject(`Unable to contact server. StatusCode: ${l}, ${this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${u}`)}delay(o){return new Promise(c=>this.privSetTimeout(c,o))}writeBufferToConsole(o){let c="Buffer Size: ";if(o===null)c+="null";else{const l=new Uint8Array(o);c+=`${o.byteLength}\r
`;for(let u=0;u<o.byteLength;u++)c+=l[u].toString(16).padStart(2,"0")+" ",(u+1)%16===0&&(console.info(c),c="")}console.info(c)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const o=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(o):(await this.sendSpeechServiceConfig(o,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(o,!1),o)}};return zd.ServiceRecognizerBase=s,s.telemetryDataEnabled=!0,zd}var Fd={},HT;function nee(){if(HT)return Fd;HT=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.ConversationServiceRecognizer=void 0;const e=ae(),t=we();let n=class extends t.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.handleSpeechPhraseMessage=async l=>this.handleSpeechPhrase(l),this.handleSpeechHypothesisMessage=l=>this.handleSpeechHypothesis(l)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,s,a){}handleRecognizingCallback(i,s,a){}async processSpeechMessages(i){let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),s=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),s=!0;break}return s}cancelRecognition(i,s,a,o,c){}async handleSpeechPhrase(i){const s=t.SimpleSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=t.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus);let o;const c=new e.PropertyCollection;if(c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i),this.privRequestSession.onPhraseRecognized(s.Offset+s.Duration),e.ResultReason.Canceled===a){const l=t.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),u=t.EnumTranslation.implTranslateCancelErrorCode(s.RecognitionStatus);await this.cancelRecognitionLocal(l,u,t.EnumTranslation.implTranslateErrorDetails(u))}else if(s.RecognitionStatus!==t.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,s.DisplayText,s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,s.asJson(),c);else{const l=t.DetailedSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset);o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,l.Text,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,l.asJson(),c)}this.handleRecognizedCallback(o,o.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const s=t.SpeechHypothesis.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i);const o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,s.Text,s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,s.asJson(),a);this.privRequestSession.onHypothesis(s.Offset),this.handleRecognizingCallback(o,s.Duration,this.privRequestSession.sessionId)}};return Fd.ConversationServiceRecognizer=n,Fd}var Y0={},WT;function ree(){return WT||(WT=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerConfig=e.SpeechResultFormat=e.RecognitionMode=void 0;const t=ae(),n=we();var r;(function(s){s[s.Interactive=0]="Interactive",s[s.Conversation=1]="Conversation",s[s.Dictation=2]="Dictation"})(r=e.RecognitionMode||(e.RecognitionMode={})),function(s){s[s.Simple=0]="Simple",s[s.Detailed=1]="Detailed"}(e.SpeechResultFormat||(e.SpeechResultFormat={}));class i{constructor(a,o){this.privSpeechServiceConfig=a||new n.SpeechServiceConfig(new n.Context(null)),this.privParameters=o,this.privMaxRetryCount=parseInt(o.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=o.getProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===r.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==r.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const a=[];let o=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const l=c+t.PropertyId.SpeechServiceConnection_EndpointId.toString(),u=this.parameters.getProperty(l,void 0);u!==void 0?(a.push({language:c,endpoint:u}),o=!0):a.push({language:c,endpoint:""})}return o?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}e.RecognizerConfig=i}(Y0)),Y0}var S$={};Object.defineProperty(S$,"__esModule",{value:!0});var Fy={};Object.defineProperty(Fy,"__esModule",{value:!0});Fy.WebsocketMessageFormatter=void 0;const Fr=ke(),KT=`\r
`;class iee{toConnectionMessage(t){const n=new Fr.Deferred;try{if(t.messageType===Fr.MessageType.Text){const r=t.textContent;let i={},s=null;if(r){const a=r.split(`\r
\r
`);a&&a.length>0&&(i=this.parseHeaders(a[0]),a.length>1&&(s=a[1]))}n.resolve(new Fr.ConnectionMessage(t.messageType,s,i,t.id))}else if(t.messageType===Fr.MessageType.Binary){const r=t.binaryContent;let i={},s=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(r),o=a.getInt16(0);if(r.byteLength<o+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let l=0;l<o;l++)c+=String.fromCharCode(a.getInt8(l+2));i=this.parseHeaders(c),r.byteLength>o+2&&(s=r.slice(2+o)),n.resolve(new Fr.ConnectionMessage(t.messageType,s,i,t.id))}}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(t){const n=new Fr.Deferred;try{if(t.messageType===Fr.MessageType.Text){const r=`${this.makeHeaders(t)}${KT}${t.textBody?t.textBody:""}`;n.resolve(new Fr.RawWebsocketMessage(Fr.MessageType.Text,r,t.id))}else if(t.messageType===Fr.MessageType.Binary){const r=this.makeHeaders(t),i=t.binaryBody,s=this.stringToArrayBuffer(r),a=new Int8Array(s),o=a.byteLength,c=new Int8Array(2+o+(i?i.byteLength:0));if(c[0]=o>>8&255,c[1]=o&255,c.set(a,2),i){const u=new Int8Array(i);c.set(u,2+o)}const l=c.buffer;n.resolve(new Fr.RawWebsocketMessage(Fr.MessageType.Binary,l,t.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}makeHeaders(t){let n="";if(t.headers)for(const r in t.headers)r&&(n+=`${r}: ${t.headers[r]}${KT}`);return n}parseHeaders(t){const n={};if(t){const r=t.match(/[^\r\n]+/g);if(n){for(const i of r)if(i){const s=i.indexOf(":"),a=s>0?i.substr(0,s).trim().toLowerCase():i,o=s>0&&i.length>s+1?i.substr(s+1).trim():"";n[a]=o}}}return n}stringToArrayBuffer(t){const n=new ArrayBuffer(t.length),r=new DataView(n);for(let i=0;i<t.length;i++)r.setUint8(i,t.charCodeAt(i));return n}}Fy.WebsocketMessageFormatter=iee;var $d={},GT;function see(){if(GT)return $d;GT=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.SpeechConnectionFactory=void 0;const e=hn(),t=we(),n=ae(),r=Ii(),i=we(),s=dn,a=Ni;let o=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(l,u,h){let p=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);const f=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),g=r.ConnectionFactoryBase.getHostSuffix(f),v=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+f+".stt.speech"+g),w={},y=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),S=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(y?(!p||p.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(w[a.QueryParameterNames.CustomSpeechDeploymentId]=y):S&&(!p||p.search(a.QueryParameterNames.Language)===-1)&&(w[a.QueryParameterNames.Language]=S),(!p||p.search(a.QueryParameterNames.Format)===-1)&&(w[a.QueryParameterNames.Format]=l.parameters.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()),l.autoDetectSourceLanguages!==void 0&&(w[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(l,w,p),!p)switch(l.recognitionMode){case i.RecognitionMode.Conversation:l.parameters.getProperty(t.ForceDictationPropertyName,"false")==="true"?p=v+this.dictationRelativeUri:l.recognitionEndpointVersion!==void 0&&parseInt(l.recognitionEndpointVersion,10)>1?p=`${v}${this.universalUri}${l.recognitionEndpointVersion}`:p=v+this.conversationRelativeUri;break;case i.RecognitionMode.Dictation:p=v+this.dictationRelativeUri;break;default:l.recognitionEndpointVersion!==void 0&&parseInt(l.recognitionEndpointVersion,10)>1?p=`${v}${this.universalUri}${l.recognitionEndpointVersion}`:p=v+this.interactiveRelativeUri;break}const C={};u.token!==void 0&&u.token!==""&&(C[u.headerName]=u.token),C[s.HeaderNames.ConnectionId]=h;const x=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",E=new e.WebsocketConnection(p,w,C,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),x,h),P=E.uri;return l.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,P),E}};return $d.SpeechConnectionFactory=o,$d}var Bd={},QT;function oee(){if(QT)return Bd;QT=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.ConversationTranscriberConnectionFactory=void 0;const e=hn(),t=ae(),n=we(),r=Ii(),i=we(),s=dn,a=Ni;let o=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(l,u,h){let p=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const f=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),g=r.ConnectionFactoryBase.getHostSuffix(f),v=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+f+".stt.speech"+g),w={},y=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),S=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);y?(!p||p.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(w[a.QueryParameterNames.CustomSpeechDeploymentId]=y):S&&(!p||p.search(a.QueryParameterNames.Language)===-1)&&(w[a.QueryParameterNames.Language]=S),l.autoDetectSourceLanguages!==void 0&&(w[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(l,w,p),p||(p=`${v}${this.universalUri}`);const C={};u.token!==void 0&&u.token!==""&&(C[u.headerName]=u.token),C[s.HeaderNames.ConnectionId]=h;const x=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",E=new e.WebsocketConnection(p,w,C,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),x,h),P=E.uri;return l.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,P),E}setV2UrlParams(l,u,h){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((g,v)=>{this.setUrlParameter(v,g,l,u,h)});const f=JSON.parse(l.parameters.getProperty(n.ServicePropertiesPropertyName,"{}"));Object.keys(f).forEach(g=>{u[g]=f[g]})}};return Bd.ConversationTranscriberConnectionFactory=o,Bd}var Vd={},JT;function aee(){if(JT)return Vd;JT=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.TranscriberConnectionFactory=void 0;const e=hn(),t=ae(),n=Ii(),r=we(),i=dn,s=Ni;let a=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,l,u){let h=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"centralus"),f=n.ConnectionFactoryBase.getHostSuffix(p),g="wss://transcribe."+p+".cts.speech"+f+this.multiaudioRelativeUri,v=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,g),w={};this.setQueryParams(w,c,h),h||(h=v);const y={};l.token!==void 0&&l.token!==""&&(y[l.headerName]=l.token),y[i.HeaderNames.ConnectionId]=u,c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,h);const S=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(h,w,y,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),S,u)}setQueryParams(c,l,u){const h=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),p=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);h&&!(s.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[s.QueryParameterNames.CustomSpeechDeploymentId]=h),p&&!(s.QueryParameterNames.Language in c)&&(c[s.QueryParameterNames.Language]=p);const f=l.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",g=l.parameters.getProperty(r.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple])!==t.OutputFormat[t.OutputFormat.Simple];(f||g)&&(c[s.QueryParameterNames.Format]=t.OutputFormat[t.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(l,c,u)}};return Vd.TranscriberConnectionFactory=a,Vd}var Ud={},YT;function cee(){if(YT)return Ud;YT=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.TranslationConnectionFactory=void 0;const e=hn(),t=wf,n=ae(),r=Ii(),i=we(),s=dn,a=Ni;let o=class extends r.ConnectionFactoryBase{create(l,u,h){const p=this.getEndpointUrl(l),f={};l.autoDetectSourceLanguages!==void 0&&(f[a.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(f,l,p);const g={};u.token!==void 0&&u.token!==""&&(g[u.headerName]=u.token),g[s.HeaderNames.ConnectionId]=h,l.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,p);const v=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(p,f,g,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),v,h)}getEndpointUrl(l,u){const h=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),p=r.ConnectionFactoryBase.getHostSuffix(h);let f=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);return f||(l.autoDetectSourceLanguages!==void 0?f=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+p)+"/speech/universal/v2":f=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+p)+"/speech/translation/cognitiveservices/v1"),u===!0?f:t.StringUtils.formatString(f,{region:h})}setQueryParams(l,u,h){l.from=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),l.to=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages),l.scenario=u.recognitionMode===i.RecognitionMode.Interactive?"interactive":u.recognitionMode===i.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(u,l,h),this.setUrlParameter(n.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,u,l,h);const p=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);p!==void 0&&(l.voice=p,l.features="texttospeech")}};return Ud.TranslationConnectionFactory=o,Ud}var qd={},ZT;function lee(){if(ZT)return qd;ZT=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.EnumTranslation=void 0;const e=ae(),t=we();let n=class{static implTranslateRecognitionResult(i,s=!1){let a=e.ResultReason.Canceled;switch(i){case t.RecognitionStatus.Success:a=e.ResultReason.RecognizedSpeech;break;case t.RecognitionStatus.EndOfDictation:a=s?e.ResultReason.RecognizedSpeech:e.ResultReason.NoMatch;break;case t.RecognitionStatus.NoMatch:case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:a=e.ResultReason.NoMatch;break;case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:a=e.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let s=e.CancellationReason.EndOfStream;switch(i){case t.RecognitionStatus.Success:case t.RecognitionStatus.EndOfDictation:case t.RecognitionStatus.NoMatch:s=e.CancellationReason.EndOfStream;break;case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:s=e.CancellationReason.Error;break}return s}static implTranslateCancelErrorCode(i){let s=e.CancellationErrorCode.NoError;switch(i){case t.RecognitionStatus.Error:s=e.CancellationErrorCode.ServiceError;break;case t.RecognitionStatus.TooManyRequests:s=e.CancellationErrorCode.TooManyRequests;break;case t.RecognitionStatus.BadRequest:s=e.CancellationErrorCode.BadRequestParameters;break;case t.RecognitionStatus.Forbidden:s=e.CancellationErrorCode.Forbidden;break;default:s=e.CancellationErrorCode.NoError;break}return s}static implTranslateErrorDetails(i){let s="The speech service encountered an internal error and could not continue.";switch(i){case e.CancellationErrorCode.Forbidden:s="The recognizer is using a free subscription that ran out of quota.";break;case e.CancellationErrorCode.BadRequestParameters:s="Invalid parameter or unsupported audio format in the request.";break;case e.CancellationErrorCode.TooManyRequests:s="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return s}};return qd.EnumTranslation=n,qd}var w$={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionStatus=e.SynthesisStatus=void 0,function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"}(e.SynthesisStatus||(e.SynthesisStatus={})),function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"}(e.RecognitionStatus||(e.RecognitionStatus={}))})(w$);var Hd={},XT;function uee(){if(XT)return Hd;XT=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.TranslationSynthesisEnd=void 0;const e=we();let t=class C${constructor(r){this.privSynthesisEnd=JSON.parse(r),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(r){return new C$(r)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Hd.TranslationSynthesisEnd=t,Hd}var $y={};Object.defineProperty($y,"__esModule",{value:!0});$y.TranslationHypothesis=void 0;const dee=$e,eA=cy;class Uv{constructor(t,n){this.privTranslationHypothesis=t,this.privTranslationHypothesis.Offset+=n,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(t,n){return new Uv(JSON.parse(t),n)}static fromTranslationResponse(t,n){dee.Contracts.throwIfNullOrUndefined(t,"translationHypothesis");const r=t.SpeechHypothesis;return t.SpeechHypothesis=void 0,r.Translation=t,new Uv(r,n)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var t;return(t=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:t.Language}asJson(){const t={...this.privTranslationHypothesis};return t.Translation!==void 0?JSON.stringify({...t,TranslationStatus:eA.TranslationStatus[t.Translation.TranslationStatus]}):JSON.stringify(t)}mapTranslationStatus(t){if(typeof t=="string")return eA.TranslationStatus[t];if(typeof t=="number")return t}}$y.TranslationHypothesis=Uv;var Wd={},tA;function hee(){if(tA)return Wd;tA=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.TranslationPhrase=void 0;const e=$e,t=we(),n=cy;let r=class sx{constructor(s,a){this.privTranslationPhrase=s,this.privTranslationPhrase.Offset+=a,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(s,a){return new sx(JSON.parse(s),a)}static fromTranslationResponse(s,a){e.Contracts.throwIfNullOrUndefined(s,"translationResponse");const o=s.SpeechPhrase;return s.SpeechPhrase=void 0,o.Translation=s,o.Text=o.DisplayText,new sx(o,a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Language}get Confidence(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const s={...this.privTranslationPhrase},a={...s,RecognitionStatus:t.RecognitionStatus[s.RecognitionStatus]};return s.Translation&&(a.Translation={...s.Translation,TranslationStatus:n.TranslationStatus[s.Translation.TranslationStatus]}),JSON.stringify(a)}mapRecognitionStatus(s){if(typeof s=="string")return t.RecognitionStatus[s];if(typeof s=="number")return s}mapTranslationStatus(s){if(typeof s=="string")return n.TranslationStatus[s];if(typeof s=="number")return s}};return Wd.TranslationPhrase=r,Wd}var Kd={},nA;function pee(){if(nA)return Kd;nA=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.TranslationServiceRecognizer=void 0;const e=ke(),t=ae(),n=we();let r=class extends n.ConversationServiceRecognizer{constructor(s,a,o,c,l){super(s,a,o,c,l),this.privTranslationRecognizer=l,this.connectionEvents.attach(u=>{u.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(s){const a=new t.PropertyCollection;let o=await this.processSpeechMessages(s);if(o)return!0;const c=async u=>{if(a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,u.asJson()),this.privRequestSession.onPhraseRecognized(u.Offset+u.Duration),u.RecognitionStatus===n.RecognitionStatus.Success){const h=this.fireEventForResult(u,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(h.result)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const h=n.EnumTranslation.implTranslateRecognitionResult(u.RecognitionStatus),p=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,h,u.Text,u.Duration,u.Offset,u.Language,u.Confidence,void 0,u.asJson(),a);if(h===t.ResultReason.Canceled){const f=n.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus),g=n.EnumTranslation.implTranslateCancelErrorCode(u.RecognitionStatus);await this.cancelRecognitionLocal(f,g,n.EnumTranslation.implTranslateErrorDetails(g))}else if(u.RecognitionStatus!==n.RecognitionStatus.EndOfDictation){const f=new t.TranslationRecognitionEventArgs(p,p.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,f)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0}},l=u=>{a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,u.asJson());const h=this.fireEventForResult(u,a);if(this.privRequestSession.onHypothesis(h.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,h)}catch{}o=!0};switch(s.messageType===e.MessageType.Text&&a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"translation.hypothesis":l(n.TranslationHypothesis.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const u=JSON.parse(s.textBody);if(u.SpeechPhrase)await c(n.TranslationPhrase.fromTranslationResponse(u,this.privRequestSession.currentTurnAudioOffset));else{const p=JSON.parse(s.textBody);p.SpeechHypothesis&&l(n.TranslationHypothesis.fromTranslationResponse(p,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await c(n.TranslationPhrase.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":this.sendSynthesisAudio(s.binaryBody,this.privRequestSession.sessionId),o=!0;break;case"audio.end":case"translation.synthesis.end":const h=n.TranslationSynthesisEnd.fromJSON(s.textBody);switch(h.SynthesisStatus){case n.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const p=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),f=new t.TranslationSynthesisEventArgs(p,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,f)}catch{}}if(this.privTranslationRecognizer.canceled){const p=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,h.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}break;case n.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}o=!0;break}return o}cancelRecognition(s,a,o,c,l){const u=new t.PropertyCollection;if(u.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const h=new t.TranslationRecognitionCanceledEventArgs(s,o,l,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){const h=new t.TranslationRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,l,void 0,u);try{this.privSuccessCallback(h),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(s,a,o){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,o);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(s,a,o){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,o);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(s,a){let o;if(s.Translation.Translations!==void 0){o=new t.Translations;for(const f of s.Translation.Translations)o.set(f.Language,f.Text||f.DisplayText)}let c,l;s instanceof n.TranslationPhrase?(s.Translation&&s.Translation.TranslationStatus===e.TranslationStatus.Success?c=t.ResultReason.TranslatedSpeech:c=t.ResultReason.RecognizedSpeech,l=s.Confidence):c=t.ResultReason.TranslatingSpeech;const u=s.Language,h=new t.TranslationRecognitionResult(o,this.privRequestSession.requestId,c,s.Text,s.Duration,s.Offset,u,l,s.Translation.FailureReason,s.asJson(),a);return new t.TranslationRecognitionEventArgs(h,s.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(s,a){const o=s===void 0?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,c=new t.TranslationSynthesisResult(o,s),l=new t.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,l)}catch{}}};return Kd.TranslationServiceRecognizer=r,Kd}var By={};Object.defineProperty(By,"__esModule",{value:!0});By.SpeechDetected=void 0;class IE{constructor(t,n){this.privSpeechStartDetected=JSON.parse(t),this.privSpeechStartDetected.Offset+=n}static fromJSON(t,n){return new IE(t,n)}get Offset(){return this.privSpeechStartDetected.Offset}}By.SpeechDetected=IE;var Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});Vy.SpeechHypothesis=void 0;class jE{constructor(t,n){this.privSpeechHypothesis=JSON.parse(t),this.updateOffset(n)}static fromJSON(t,n){return new jE(t,n)}updateOffset(t){this.privSpeechHypothesis.Offset+=t}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}Vy.SpeechHypothesis=jE;var Uy={};Object.defineProperty(Uy,"__esModule",{value:!0});Uy.SpeechKeyword=void 0;class kE{constructor(t,n){this.privSpeechKeyword=JSON.parse(t),this.privSpeechKeyword.Offset+=n}static fromJSON(t,n){return new kE(t,n)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}}Uy.SpeechKeyword=kE;var Gd={},rA;function fee(){if(rA)return Gd;rA=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.SpeechServiceRecognizer=void 0;const e=ae(),t=we();let n=class extends t.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(i){let s;const a=new e.PropertyCollection;let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,c.asJson()),s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,void 0,void 0,c.asJson(),a),this.privRequestSession.onHypothesis(c.Offset);const l=new e.SpeechRecognitionEventArgs(s,c.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}o=!0;break;case"speech.phrase":const u=t.SimpleSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,u.asJson());const h=t.EnumTranslation.implTranslateRecognitionResult(u.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(u.Offset+u.Duration),e.ResultReason.Canceled===h){const p=t.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus),f=t.EnumTranslation.implTranslateCancelErrorCode(u.RecognitionStatus);await this.cancelRecognitionLocal(p,f,t.EnumTranslation.implTranslateErrorDetails(f))}else{if(u.RecognitionStatus===t.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,h,u.DisplayText,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,void 0,void 0,u.asJson(),a);else{const f=t.DetailedSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,f.asJson()),s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,h,f.RecognitionStatus===t.RecognitionStatus.Success?f.NBest[0].Display:"",f.Duration,f.Offset,f.Language,f.LanguageDetectionConfidence,void 0,void 0,f.asJson(),a)}const p=new e.SpeechRecognitionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(f){this.privErrorCallback&&this.privErrorCallback(f)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0;break}return o}cancelRecognition(i,s,a,o,c){const l=new e.PropertyCollection;if(l.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[o]),this.privSpeechRecognizer.canceled){const u=new e.SpeechRecognitionCanceledEventArgs(a,c,o,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,u)}catch{}}if(this.privSuccessCallback){const u=new e.SpeechRecognitionResult(s,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,l);try{this.privSuccessCallback(u),this.privSuccessCallback=void 0}catch{}}}};return Gd.SpeechServiceRecognizer=n,Gd}var Qd={},iA;function mee(){if(iA)return Qd;iA=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.ConversationTranscriptionServiceRecognizer=void 0;const e=ae(),t=we();let n=class extends t.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.privConversationTranscriber=c,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const i=this.privSpeechContext.getSection("phraseDetection");i.mode="Conversation";const s={};s.mode="Anonymous",s.audioSessionId=this.privDiarizationSessionId,s.audioOffsetMs=0,s.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",i.speakerDiarization=s,this.privSpeechContext.setSection("phraseDetection",i)}}async processTypeSpecificMessages(i){let s;const a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,c.asJson(),a),this.privRequestSession.onHypothesis(c.Offset);const l=new e.ConversationTranscriptionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch{}o=!0;break;case"speech.phrase":const u=t.SimpleSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset),h=t.EnumTranslation.implTranslateRecognitionResult(u.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(u.Offset+u.Duration),e.ResultReason.Canceled===h){const p=t.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus),f=t.EnumTranslation.implTranslateCancelErrorCode(u.RecognitionStatus);await this.cancelRecognitionLocal(p,f,t.EnumTranslation.implTranslateErrorDetails(f))}else if(!(this.privRequestSession.isSpeechEnded&&h===e.ResultReason.NoMatch&&u.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,h,u.DisplayText,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,u.SpeakerId,void 0,u.asJson(),a);else{const f=t.DetailedSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,h,f.RecognitionStatus===t.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,f.Offset,f.Language,f.LanguageDetectionConfidence,u.SpeakerId,void 0,f.asJson(),a)}const p=new e.ConversationTranscriptionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,p)}catch{}}o=!0;break}return o}cancelRecognition(i,s,a,o,c){if(new e.PropertyCollection().setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[o]),this.privConversationTranscriber.canceled){const u=new e.ConversationTranscriptionCanceledEventArgs(a,c,o,void 0,i);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,u)}catch{}}}};return Qd.ConversationTranscriptionServiceRecognizer=n,Qd}var Jd={},sA;function vee(){if(sA)return Jd;sA=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.TranscriptionServiceRecognizer=void 0;const e=ke(),t=ae(),n=we(),r=qs;let i=class extends n.ConversationServiceRecognizer{constructor(a,o,c,l,u){super(a,o,c,l,u),this.privTranscriberRecognizer=u,this.sendPrePayloadJSONOverride=h=>this.sendTranscriptionStartJSON(h),this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,o){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,o))}}async sendMeetingSpeechEventAsync(a,o){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,o))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,o,c){try{const l=new t.SpeechRecognitionEventArgs(a,o,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,l),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(u){this.privErrorCallback&&this.privErrorCallback(u)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,o,c){try{const l=new t.SpeechRecognitionEventArgs(a,o,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,l)}catch{}}cancelRecognition(a,o,c,l,u){const h=new t.PropertyCollection;if(h.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[l]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const p=new t.MeetingTranscriptionCanceledEventArgs(c,u,l,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,p)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const p=new t.ConversationTranscriptionCanceledEventArgs(c,u,l,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.SpeechRecognitionResult(o,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,h);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const o=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(o,"start");await this.sendSpeechEvent(a,c)}else{const o=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(o,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,o){const c=JSON.stringify(o);if(c)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,o){const c={id:"meeting",name:o,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,o){const c={id:"meeting",name:o,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return Jd.TranscriptionServiceRecognizer=i,Jd}var Yd={},oA;function gee(){if(oA)return Yd;oA=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.DetailedSpeechPhrase=void 0;const e=we();let t=class x${constructor(r,i){this.privDetailedSpeechPhrase=JSON.parse(r),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(i)}static fromJSON(r,i){return new x$(r,i)}updateOffsets(r){if(this.privDetailedSpeechPhrase.Offset+=r,this.privDetailedSpeechPhrase.NBest)for(const i of this.privDetailedSpeechPhrase.NBest){if(i.Words)for(const s of i.Words)s.Offset+=r;if(i.DisplayWords)for(const s of i.DisplayWords)s.Offset+=r}}asJson(){const r={...this.privDetailedSpeechPhrase};return JSON.stringify({...r,RecognitionStatus:e.RecognitionStatus[r.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(r){if(typeof r=="string")return e.RecognitionStatus[r];if(typeof r=="number")return r}};return Yd.DetailedSpeechPhrase=t,Yd}var Zd={},aA;function yee(){if(aA)return Zd;aA=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.SimpleSpeechPhrase=void 0;const e=we();let t=class b${constructor(r,i=0){this.privSimpleSpeechPhrase=JSON.parse(r),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(i)}static fromJSON(r,i){return new b$(r,i)}updateOffset(r){this.privSimpleSpeechPhrase.Offset+=r}asJson(){const r={...this.privSimpleSpeechPhrase};return JSON.stringify({...r,RecognitionStatus:e.RecognitionStatus[r.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(r){if(typeof r=="string")return e.RecognitionStatus[r];if(typeof r=="number")return r}};return Zd.SimpleSpeechPhrase=t,Zd}var qy={};Object.defineProperty(qy,"__esModule",{value:!0});qy.AddedLmIntent=void 0;class See{constructor(t,n){this.modelImpl=t,this.intentName=n}}qy.AddedLmIntent=See;var Xd={},cA;function wee(){if(cA)return Xd;cA=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.IntentServiceRecognizer=void 0;const e=ke(),t=ae(),n=we();let r=class extends n.ServiceRecognizerBase{constructor(s,a,o,c,l){super(s,a,o,c,l),this.privIntentRecognizer=l,this.privIntentDataSent=!1}setIntents(s,a){this.privAddedLmIntents=s,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(s){let a,o,c=!1;const l=new t.PropertyCollection;switch(s.messageType===e.MessageType.Text&&l.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speech.hypothesis":const h=n.SpeechHypothesis.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset);if(a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.ResultReason.RecognizingIntent,h.Text,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,h.asJson(),l),this.privRequestSession.onHypothesis(a.offset),o=new t.IntentRecognitionEventArgs(a,h.Offset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,o)}catch{}c=!0;break;case"speech.phrase":const p=n.SimpleSpeechPhrase.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset);a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,n.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),p.DisplayText,p.Duration,p.Offset,p.Language,p.LanguageDetectionConfidence,void 0,p.asJson(),l),o=new t.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const f=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,o)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(v){this.privErrorCallback&&this.privErrorCallback(v)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||t.ResultReason.NoMatch===o.result.reason?(this.privRequestSession.onPhraseRecognized(o.offset+o.result.duration),f()):this.privPendingIntentArgs=o,c=!0;break;case"response":if(o=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,o===void 0){if(s.textBody==="")return;o=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const g=n.IntentResponse.fromJSON(s.textBody);if(g!==null&&g.topScoringIntent&&g.topScoringIntent.intent){let v=this.privAddedLmIntents[g.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(v=this.privUmbrellaIntent),v){const w=v===void 0||v.intentName===void 0?g.topScoringIntent.intent:v.intentName;let y=o.result.reason;w!==void 0&&(y=t.ResultReason.RecognizedIntent);const S=o.result.properties!==void 0?o.result.properties:new t.PropertyCollection;S.setProperty(t.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,s.textBody),o=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult(w,o.result.resultId,y,o.result.text,o.result.duration,o.result.offset,void 0,void 0,o.result.errorDetails,o.result.json,S),o.offset,o.sessionId)}}if(this.privRequestSession.onPhraseRecognized(o.offset+o.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,o)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(o.result)}catch(v){this.privErrorCallback&&this.privErrorCallback(v)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const u=new e.Deferred;return u.resolve(c),u.promise}cancelRecognition(s,a,o,c,l){const u=new t.PropertyCollection;if(u.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const h=new t.IntentRecognitionCanceledEventArgs(o,l,c,void 0,void 0,s);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,h)}catch{}}if(this.privSuccessCallback){const h=new t.IntentRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,l,void 0,u);try{this.privSuccessCallback(h),this.privSuccessCallback=void 0}catch{}}}};return Xd.IntentServiceRecognizer=r,Xd}var Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});Hy.IntentResponse=void 0;class ME{constructor(t){t===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(t)}static fromJSON(t){return new ME(t)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}Hy.IntentResponse=ME;var E$={};Object.defineProperty(E$,"__esModule",{value:!0});var Wy={},Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});Ky.ServiceTelemetryListener=void 0;const fs=ke(),lA=zy;class Cee{constructor(t,n,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=t,this.privAudioSourceId=n,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(t){t>0&&this.privPhraseLatencies.push(Date.now()-t)}hypothesisReceived(t){t>0&&this.privHypothesisLatencies.push(Date.now()-t)}onEvent(t){this.privIsDisposed||(t instanceof lA.RecognitionTriggeredEvent&&t.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:t.eventTime,Name:"ListeningTrigger",Start:t.eventTime}),t instanceof fs.AudioStreamNodeAttachingEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof fs.AudioStreamNodeAttachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof fs.AudioSourceErrorEvent&&t.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof fs.AudioStreamNodeErrorEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof fs.AudioStreamNodeDetachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Name:"Microphone",Start:this.privMicStartTime})),t instanceof lA.ConnectingToServiceEvent&&t.requestId===this.privRequestId&&(this.privConnectionId=t.sessionId),t instanceof fs.ConnectionStartEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionStartTime=t.eventTime),t instanceof fs.ConnectionEstablishedEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof fs.ConnectionEstablishErrorEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Error:this.getConnectionError(t.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof fs.ConnectionMessageReceivedEvent&&t.connectionId===this.privConnectionId&&t.message&&t.message.headers&&t.message.headers.path&&(this.privReceivedMessages[t.message.headers.path]||(this.privReceivedMessages[t.message.headers.path]=new Array),this.privReceivedMessages[t.message.headers.path].length<50&&this.privReceivedMessages[t.message.headers.path].push(t.networkReceivedTime)))}getTelemetry(){const t=new Array;this.privListeningTriggerMetric&&t.push(this.privListeningTriggerMetric),this.privMicMetric&&t.push(this.privMicMetric),this.privConnectionEstablishMetric&&t.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&t.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&t.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const n={Metrics:t,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(n);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(t){switch(t){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+t.toString()}}}Ky.ServiceTelemetryListener=Cee;Object.defineProperty(Wy,"__esModule",{value:!0});Wy.RequestSession=void 0;const Pc=ke(),sm=zy,xee=Ky;class bee{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=t,this.privRequestId=Pc.createNoDashGuid(),this.privAudioNodeId=Pc.createNoDashGuid(),this.privTurnDeferral=new Pc.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(t){this.privServiceTelemetryListener&&this.privDetachables.push(t.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new xee.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new sm.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(t,n){this.privAudioNode=t,this.privIsAudioNodeDetached=!1,n?await this.onComplete():this.onEvent(new sm.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(t,n){this.privAuthFetchEventId=t,this.privSessionId=n,this.onEvent(new sm.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(t){t&&await this.onComplete()}async onConnectionEstablishCompleted(t,n){if(t===200){this.onEvent(new sm.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else t===403&&await this.onComplete()}async onServiceTurnEndResponse(t){this.privTurnDeferral.resolve(),!t||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=Pc.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new Pc.Deferred}onHypothesis(t){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(t)))}onPhraseRecognized(t){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(t)),this.onServiceRecognized(t)}onServiceRecognized(t){this.privLastRecoOffset=t,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(t),this.privConnectionAttempts=0}onAudioSent(t){this.privBytesSent+=t,this.privRecognitionBytesSent+=t}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(t){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(t),Pc.Events.instance.onEvent(t)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}Wy.RequestSession=bee;var Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});Gy.SpeechContext=void 0;class Eee{constructor(t){this.privContext={},this.privDynamicGrammar=t}getSection(t){return this.privContext[t]||{}}setSection(t,n){this.privContext[t]=n}setPronunciationAssessmentParams(t,n,r=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(t),r&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),n&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:n},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(t){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=t}toJSON(){const t=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",t),JSON.stringify(this.privContext)}}Gy.SpeechContext=Eee;var Qy={};Object.defineProperty(Qy,"__esModule",{value:!0});Qy.DynamicGrammarBuilder=void 0;class Pee{addPhrase(t){this.privPhrases||(this.privPhrases=[]),t instanceof Array?this.privPhrases=this.privPhrases.concat(t):this.privPhrases.push(t)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(t){this.privGrammars||(this.privGrammars=[]),t instanceof Array?this.privGrammars=this.privGrammars.concat(t):this.privGrammars.push(t)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const t={};if(t.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const n=[];this.privPhrases.forEach(r=>{n.push({Text:r})}),t.Groups=[{Type:"Generic",Items:n}]}return t}}Qy.DynamicGrammarBuilder=Pee;var P$={};Object.defineProperty(P$,"__esModule",{value:!0});var eh={},Jy={},Yy={},OE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataStreamType=e.ActivityPayloadResponse=void 0;class t{constructor(r){this.privActivityResponse=JSON.parse(r)}static fromJSON(r){return new t(r)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}e.ActivityPayloadResponse=t,function(n){n[n.None=0]="None",n[n.TextToSpeechAudio=1]="TextToSpeechAudio"}(e.MessageDataStreamType||(e.MessageDataStreamType={}))})(OE);Object.defineProperty(Yy,"__esModule",{value:!0});Yy.DialogServiceTurnState=void 0;const Ree=ta,_ee=vn,Tee=OE;class Aee{constructor(t,n){this.privRequestId=n,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=t,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(t,n){return t.messageDataStreamType===Tee.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=_ee.AudioOutputStream.createPullStream(),this.privAudioStream.format=n!==void 0?n:Ree.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}Yy.DialogServiceTurnState=Aee;Object.defineProperty(Jy,"__esModule",{value:!0});Jy.DialogServiceTurnStateManager=void 0;const uA=Sn,Nee=Yy;class Iee{constructor(){this.privTurnMap=new Map}StartTurn(t){if(this.privTurnMap.has(t))throw new uA.InvalidOperationError("Service error: There is already a turn with id:"+t);const n=new Nee.DialogServiceTurnState(this,t);return this.privTurnMap.set(t,n),this.privTurnMap.get(t)}GetTurn(t){return this.privTurnMap.get(t)}CompleteTurn(t){if(!this.privTurnMap.has(t))throw new uA.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+t);const n=this.privTurnMap.get(t);return n.complete(),this.privTurnMap.delete(t),n}}Jy.DialogServiceTurnStateManager=Iee;var dA;function jee(){if(dA)return eh;dA=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.DialogServiceAdapter=void 0;const e=hn(),t=cc,n=ke(),r=ta,i=ae(),s=Jy,a=we(),o=OE,c=qs;let l=class extends a.ServiceRecognizerBase{constructor(h,p,f,g,v){super(h,p,f,g,v),this.privEvents=new n.EventSource,this.privDialogServiceConnector=v,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new s.DialogServiceTurnStateManager,this.recognizeOverride=(w,y,S)=>this.listenOnce(w,y,S),this.postConnectImplOverride=w=>this.dialogConnectImpl(w),this.configConnectionOverride=w=>this.configConnection(w),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=f,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(w=>{w.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(h){const p=n.createGuid(),f=n.createNoDashGuid(),g={context:{interactionId:p},messagePayload:JSON.parse(h),version:.5},v=JSON.stringify(g);await(await this.fetchConnection()).send(new c.SpeechConnectionMessage(n.MessageType.Text,"agent",f,"application/json",v))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(h){const p=new i.PropertyCollection;h.messageType===n.MessageType.Text&&p.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,h.textBody);let f,g;switch(h.path.toLowerCase()){case"speech.phrase":const w=a.SimpleSpeechPhrase.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(w.Offset+w.Duration),w.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&w.RecognitionStatus!==a.RecognitionStatus.Error){const E=this.fireEventForResult(w,p);if(this.privLastResult=E.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,E)}catch{}}g=!0;break;case"speech.hypothesis":const y=a.SpeechHypothesis.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);f=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,y.Text,y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,void 0,void 0,y.asJson(),p),this.privRequestSession.onHypothesis(y.Offset);const S=new i.SpeechRecognitionEventArgs(f,y.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,S)}catch{}g=!0;break;case"speech.keyword":const C=a.SpeechKeyword.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);f=new i.SpeechRecognitionResult(this.privRequestSession.requestId,C.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,C.Text,C.Duration,C.Offset,void 0,void 0,void 0,void 0,C.asJson(),p),C.Status!=="Accepted"&&(this.privLastResult=f);const x=new i.SpeechRecognitionEventArgs(f,f.duration,f.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,x)}catch{}g=!0;break;case"audio":{const E=h.requestId.toUpperCase(),P=this.privTurnStateManager.GetTurn(E);try{h.binaryBody?P.audioStream.write(h.binaryBody):P.endAudioStream()}catch{}}g=!0;break;case"response":this.handleResponseMessage(h),g=!0;break}const v=new n.Deferred;return v.resolve(g),v.promise}async cancelRecognition(h,p,f,g,v){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const w=new i.PropertyCollection;w.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[g]);const y=new i.SpeechRecognitionCanceledEventArgs(f,v,g,void 0,h);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,y)}catch{}if(this.privSuccessCallback){const S=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,v,void 0,w);try{this.privSuccessCallback(S),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(h,p,f){this.privRecognizerConfig.recognitionMode=h,this.privSuccessCallback=p,this.privErrorCallback=f,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const g=this.connectImpl(),v=this.sendPreAudioMessages(),w=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),y=await this.privDialogAudioSource.format,S=await this.privDialogAudioSource.deviceInfo,C=new e.ReplayableAudioNode(w,y.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(C,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:S};try{await g,await v}catch(P){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,P),Promise.resolve()}const x=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,x),this.sendAudio(C).then(()=>{},async P=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,P)})}dialogConnectImpl(h){return this.privConnectionLoop=this.startMessageLoop(),h}receiveDialogMessageOverride(){const h=new n.Deferred,p=async()=>{try{const f=this.isDisposed(),g=!this.isDisposed()&&this.terminateMessageLoop;if(f||g){h.resolve(void 0);return}const w=await(await this.fetchConnection()).read();if(!w)return p();const y=c.SpeechConnectionMessage.fromConnectionMessage(w);switch(y.path.toLowerCase()){case"turn.start":{const _=y.requestId.toUpperCase(),k=this.privRequestSession.requestId.toUpperCase();_!==k?this.privTurnStateManager.StartTurn(_):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const C=a.SpeechDetected.fromJSON(y.textBody,this.privRequestSession.currentTurnAudioOffset),x=new i.RecognitionEventArgs(C.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,x);break;case"speech.enddetected":let E;y.textBody.length>0?E=y.textBody:E="{ Offset: 0 }";const P=a.SpeechDetected.fromJSON(E,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(P.Offset);const T=new i.RecognitionEventArgs(P.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,T);break;case"turn.end":{const _=y.requestId.toUpperCase(),k=this.privRequestSession.requestId.toUpperCase();if(_!==k)this.privTurnStateManager.CompleteTurn(_);else{const z=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,z),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(D){this.privErrorCallback&&this.privErrorCallback(D)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(y)||this.serviceEvents&&this.serviceEvents.onEvent(new n.ServiceEvent(y.path.toLowerCase(),y.textBody))}catch{}}return p()}catch{this.terminateMessageLoop=!0,h.resolve()}};return p().catch(f=>{n.Events.instance.onEvent(new n.BackgroundEvent(f))}),h.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(h){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,h)}return Promise.resolve()}async configConnection(h){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(h,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(h),h)}async sendPreAudioMessages(){const h=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(h,!0),await this.sendAgentContext(h),await this.sendWaveHeader(h)}sendAgentConfig(h){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const f=this.agentConfig.get();f.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(f)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const p=this.agentConfig.toJsonString();return this.agentConfigSent=!0,h.send(new c.SpeechConnectionMessage(n.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",p))}}sendAgentContext(h){const p=n.createGuid(),f=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),v=JSON.stringify({channelData:"",context:{interactionId:p},messagePayload:typeof f===void 0?void 0:f,version:.5});return h.send(new c.SpeechConnectionMessage(n.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",v))}fireEventForResult(h,p){const f=a.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus),g=new i.SpeechRecognitionResult(this.privRequestSession.requestId,f,h.DisplayText,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),p);return new i.SpeechRecognitionEventArgs(g,h.Offset,this.privRequestSession.sessionId)}handleResponseMessage(h){const p=JSON.parse(h.textBody);switch(p.messageType.toLowerCase()){case"message":const f=h.requestId.toUpperCase(),g=o.ActivityPayloadResponse.fromJSON(h.textBody),v=this.privTurnStateManager.GetTurn(f);if(g.conversationId){const S=this.agentConfig.get();S.botInfo.conversationId=g.conversationId,this.agentConfig.set(S)}const w=v.processActivityPayload(g,r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),y=new i.ActivityReceivedEventArgs(g.messagePayload,w);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,y)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(h.textBody))}catch{}break;default:n.Events.instance.onEvent(new n.BackgroundEvent(`Unexpected response of type ${p.messageType}. Ignoring.`));break}}onEvent(h){this.privEvents.onEvent(h),n.Events.instance.onEvent(h)}addKeywordContextData(){const h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(h===void 0)return;const p=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),f=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),g=h.split(";"),v=p===void 0?[]:p.split(";"),w=f===void 0?[]:f.split(";"),y=[];for(let S=0;S<g.length;S++){const C={};C.text=g[S],S<v.length&&(C.offset=Number(v[S])),S<w.length&&(C.duration=Number(w[S])),y.push(C)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:y,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return eh.DialogServiceAdapter=l,eh}var Zy={};Object.defineProperty(Zy,"__esModule",{value:!0});Zy.AgentConfig=void 0;class kee{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(t){this.iPrivConfig=t}}Zy.AgentConfig=kee;var Z0={},th={},lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.ConversationConnectionConfig=void 0;const Mee=Cf;class kn extends Mee.RestConfigBase{static get host(){return kn.privHost}static get apiVersion(){return kn.privApiVersion}static get clientAppId(){return kn.privClientAppId}static get defaultLanguageCode(){return kn.privDefaultLanguageCode}static get restPath(){return kn.privRestPath}static get webSocketPath(){return kn.privWebSocketPath}static get transcriptionEventKeys(){return kn.privTranscriptionEventKeys}}lu.ConversationConnectionConfig=kn;kn.privHost="dev.microsofttranslator.com";kn.privRestPath="/capito/room";kn.privApiVersion="2.0";kn.privDefaultLanguageCode="en-US";kn.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";kn.privWebSocketPath="/capito/translate";kn.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var hA;function Oee(){if(hA)return th;hA=1,Object.defineProperty(th,"__esModule",{value:!0}),th.ConversationManager=void 0;const e=hn(),t=$e,n=ae(),r=lu;let i=class{constructor(){this.privRequestParams=r.ConversationConnectionConfig.configParams,this.privErrors=r.ConversationConnectionConfig.restErrors,this.privHost=r.ConversationConnectionConfig.host,this.privApiVersion=r.ConversationConnectionConfig.apiVersion,this.privRestPath=r.ConversationConnectionConfig.restPath,this.privRestAdapter=new e.RestMessageAdapter({})}createOrJoin(a,o,c,l){try{t.Contracts.throwIfNullOrUndefined(a,"args");const u=a.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,r.ConversationConnectionConfig.defaultLanguageCode),h=a.getProperty(n.PropertyId.ConversationTranslator_Name,"conversation_host"),p=a.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),f=a.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),g=a.getProperty(n.PropertyId.SpeechServiceConnection_Key),v=a.getProperty(n.PropertyId.SpeechServiceConnection_Region),w=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token);t.Contracts.throwIfNullOrWhitespace(u,"languageCode"),t.Contracts.throwIfNullOrWhitespace(h,"nickname"),t.Contracts.throwIfNullOrWhitespace(p,"endpointHost");const y={};y[this.privRequestParams.apiVersion]=this.privApiVersion,y[this.privRequestParams.languageCode]=u,y[this.privRequestParams.nickname]=h;const S={};f&&(S[this.privRequestParams.correlationId]=f),S[this.privRequestParams.clientAppId]=r.ConversationConnectionConfig.clientAppId,o!==void 0?y[this.privRequestParams.roomId]=o:(t.Contracts.throwIfNullOrUndefined(v,this.privErrors.authInvalidSubscriptionRegion),S[this.privRequestParams.subscriptionRegion]=v,g?S[this.privRequestParams.subscriptionKey]=g:w?S[this.privRequestParams.authorization]=`Bearer ${w}`:t.Contracts.throwIfNullOrUndefined(g,this.privErrors.authInvalidSubscriptionKey));const C={};C.headers=S,this.privRestAdapter.options=C;const x=`https://${p}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Post,x,y,null).then(E=>{const P=e.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,E.headers);if(!E.ok){if(l){let _=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",E.status.toString()),k;try{k=JSON.parse(E.data),_+=` [${k.error.code}: ${k.error.message}]`}catch{_+=` [${E.data}]`}P&&(_+=` ${P}`),l(_)}return}const T=JSON.parse(E.data);if(T&&(T.requestId=P),c){try{c(T)}catch(_){l&&l(_)}c=void 0}}).catch(()=>{})}catch(u){if(l)if(u instanceof Error){const h=u;l(h.name+": "+h.message)}else l(u)}}leave(a,o){return new Promise((c,l)=>{try{t.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","token"));const u=a.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),p={};p[this.privRequestParams.apiVersion]=this.privApiVersion,p[this.privRequestParams.sessionToken]=o;const f={};h&&(f[this.privRequestParams.correlationId]=h);const g={};g.headers=f,this.privRestAdapter.options=g;const v=`https://${u}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Delete,v,p,null).then(w=>{w.ok,c()}).catch(()=>{})}catch(u){if(u instanceof Error){const h=u;l(h.name+": "+h.message)}else l(u)}})}};return th.ConversationManager=i,th}var wa={},nh={},Xy={},xf={};Object.defineProperty(xf,"__esModule",{value:!0});xf.ConversationConnectionMessage=void 0;const Dee=ke();class Lee extends Dee.ConnectionMessage{constructor(t,n,r,i){super(t,n,r,i);const s=JSON.parse(this.textBody);s.type!==void 0&&(this.privConversationMessageType=s.type)}get conversationMessageType(){return this.privConversationMessageType}}xf.ConversationConnectionMessage=Lee;Object.defineProperty(Xy,"__esModule",{value:!0});Xy.ConversationWebsocketMessageFormatter=void 0;const Ca=ke(),pA=xf;class zee{toConnectionMessage(t){const n=new Ca.Deferred;try{if(t.messageType===Ca.MessageType.Text){const r=new pA.ConversationConnectionMessage(t.messageType,t.textContent,{},t.id);n.resolve(r)}else t.messageType===Ca.MessageType.Binary&&n.resolve(new pA.ConversationConnectionMessage(t.messageType,t.binaryContent,void 0,t.id))}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(t){const n=new Ca.Deferred;try{if(t.messageType===Ca.MessageType.Text){const r=`${t.textBody?t.textBody:""}`;n.resolve(new Ca.RawWebsocketMessage(Ca.MessageType.Text,r,t.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}}Xy.ConversationWebsocketMessageFormatter=zee;var fA;function Fee(){if(fA)return nh;fA=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.ConversationConnectionFactory=void 0;const e=hn(),t=ke(),n=$e,r=ae(),i=Ii(),s=lu,a=Xy;let o=class extends i.ConnectionFactoryBase{create(l,u,h){const p=l.parameters.getProperty(r.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),f=l.parameters.getProperty(r.PropertyId.ConversationTranslator_CorrelationId,t.createGuid()),g=`wss://${p}${s.ConversationConnectionConfig.webSocketPath}`,v=l.parameters.getProperty(r.PropertyId.ConversationTranslator_Token,void 0);n.Contracts.throwIfNullOrUndefined(v,"token");const w={};w[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,w[s.ConversationConnectionConfig.configParams.token]=v,w[s.ConversationConnectionConfig.configParams.correlationId]=f;const y=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(g,w,{},new a.ConversationWebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),y,h)}};return nh.ConversationConnectionFactory=o,nh}var rh={},eS={};Object.defineProperty(eS,"__esModule",{value:!0});eS.ConversationRequestSession=void 0;const X0=ke();class $ee{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=t,this.privRequestId=X0.createNoDashGuid(),this.privRequestCompletionDeferral=new X0.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(t,n){this.privSessionId=n}onAuthCompleted(t){t&&this.onComplete()}onConnectionEstablishCompleted(t){t!==200&&t===403&&this.onComplete()}onServiceTurnEndResponse(t){t?this.privRequestId=X0.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach()}}onComplete(){}}eS.ConversationRequestSession=$ee;var Fn={},mA;function R$(){if(mA)return Fn;mA=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.ConversationReceivedTranslationEventArgs=Fn.ParticipantsListEventArgs=Fn.ParticipantAttributeEventArgs=Fn.ParticipantEventArgs=Fn.LockRoomEventArgs=Fn.MuteAllEventArgs=void 0;const e=ae();class t extends e.SessionEventArgs{constructor(c,l){super(l),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}Fn.MuteAllEventArgs=t;class n extends e.SessionEventArgs{constructor(c,l){super(l),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}Fn.LockRoomEventArgs=n;class r extends e.SessionEventArgs{constructor(c,l){super(l),this.privParticipant=c}get participant(){return this.privParticipant}}Fn.ParticipantEventArgs=r;class i extends e.SessionEventArgs{constructor(c,l,u,h){super(h),this.privKey=l,this.privValue=u,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Fn.ParticipantAttributeEventArgs=i;class s extends e.SessionEventArgs{constructor(c,l,u,h,p,f,g,v,w){super(w),this.privRoomId=c,this.privSessionToken=l,this.privTranslateTo=u,this.privProfanityFilter=h,this.privRoomProfanityFilter=p,this.privIsRoomLocked=f,this.privIsRoomLocked=g,this.privParticipants=v}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Fn.ParticipantsListEventArgs=s;class a{constructor(c,l,u){this.privPayload=l,this.privCommand=c,this.privSessionId=u}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Fn.ConversationReceivedTranslationEventArgs=a,Fn}var As={};Object.defineProperty(As,"__esModule",{value:!0});As.ConversationTranslatorCommandTypes=As.ConversationTranslatorMessageTypes=As.InternalParticipants=void 0;class Bee{constructor(t=[],n){this.participants=t,this.meId=n}addOrUpdateParticipant(t){if(t===void 0)return;const n=this.getParticipantIndex(t.id);return n>-1?this.participants.splice(n,1,t):this.participants.push(t),this.getParticipant(t.id)}getParticipantIndex(t){return this.participants.findIndex(n=>n.id===t)}getParticipant(t){return this.participants.find(n=>n.id===t)}deleteParticipant(t){this.participants=this.participants.filter(n=>n.id!==t)}get host(){return this.participants.find(t=>t.isHost===!0)}get me(){return this.getParticipant(this.meId)}}As.InternalParticipants=Bee;As.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};As.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var _$={},tS={};Object.defineProperty(tS,"__esModule",{value:!0});tS.CommandResponsePayload=void 0;const Vee=e=>JSON.parse(e);class DE{constructor(t){this.privCommandResponse=Vee(t)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(t){return new DE(t)}}tS.CommandResponsePayload=DE;var $l={};Object.defineProperty($l,"__esModule",{value:!0});$l.ParticipantPayloadResponse=$l.ParticipantsListPayloadResponse=void 0;const Uee=e=>JSON.parse(e),qee=e=>JSON.parse(e);class LE{constructor(t){this.privParticipantsPayloadResponse=Uee(t)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(t){return new LE(t)}}$l.ParticipantsListPayloadResponse=LE;class zE{constructor(t){this.privParticipantPayloadResponse=qee(t)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(t){return new zE(t)}}$l.ParticipantPayloadResponse=zE;var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.TextResponsePayload=Bl.SpeechResponsePayload=void 0;const Hee=e=>JSON.parse(e),Wee=e=>JSON.parse(e);class FE{constructor(t){this.privSpeechResponse=Hee(t)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(t){return new FE(t)}}Bl.SpeechResponsePayload=FE;class $E{constructor(t){this.privTextResponse=Wee(t)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(t){return new $E(t)}}Bl.TextResponsePayload=$E;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=tS;Object.defineProperty(e,"CommandResponsePayload",{enumerable:!0,get:function(){return t.CommandResponsePayload}});var n=$l;Object.defineProperty(e,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantsListPayloadResponse}}),Object.defineProperty(e,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantPayloadResponse}});var r=Bl;Object.defineProperty(e,"SpeechResponsePayload",{enumerable:!0,get:function(){return r.SpeechResponsePayload}}),Object.defineProperty(e,"TextResponsePayload",{enumerable:!0,get:function(){return r.TextResponsePayload}})})(_$);var vA;function Kee(){if(vA)return rh;vA=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.ConversationServiceAdapter=void 0;const e=ke(),t=ae(),n=we(),r=xf,i=eS,s=R$(),a=As,o=_$;let c=class extends n.ServiceRecognizerBase{constructor(u,h,p,f,g){super(u,h,p,f,g),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=g,this.privConversationAuthentication=u,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=v=>this.conversationConnectImpl(v),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession(e.createNoDashGuid()),this.privConversationConnectionFactory=h,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(u){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(u),await super.dispose(u)}async sendMessage(u){return(await this.fetchConnection()).send(new r.ConversationConnectionMessage(e.MessageType.Text,u))}async sendMessageAsync(u){await(await this.fetchConnection()).send(new r.ConversationConnectionMessage(e.MessageType.Text,u))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(u,h,p,f,g){this.terminateMessageLoop=!0;const v=new t.ConversationTranslationCanceledEventArgs(p,g,f,void 0,u);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,v)}catch{}}async conversationConnectImpl(u){return this.privConnectionLoop=this.startMessageLoop(),u}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const u=new e.Deferred;try{const p=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return u.resolve(),Promise.resolve();if(!p)return this.receiveConversationMessageOverride();const f=this.privConversationRequestSession.sessionId,g=p.conversationMessageType.toLowerCase();let v=!1;try{switch(g){case"info":case"participant_command":case"command":const w=o.CommandResponsePayload.fromJSON(p.textBody);switch(w.command.toLowerCase()){case"participantlist":const P=o.ParticipantsListPayloadResponse.fromJSON(p.textBody),T=P.participants.map(M=>({avatar:M.avatar,displayName:M.nickname,id:M.participantId,isHost:M.ishost,isMuted:M.ismuted,isUsingTts:M.usetts,preferredLanguage:M.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new s.ParticipantsListEventArgs(P.roomid,P.token,P.translateTo,P.profanityFilter,P.roomProfanityFilter,P.roomLocked,P.muteAll,T,f));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(w.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,w.value,f));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(w.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,w.value,f));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(w.participantId,a.ConversationTranslatorCommandTypes.setMute,w.value,f));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new s.MuteAllEventArgs(w.value,f));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(w.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(w.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,w.value,f));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new s.LockRoomEventArgs(w.value,f));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(w.participantId,a.ConversationTranslatorCommandTypes.changeNickname,w.value,f));break;case"joinsession":const _=o.ParticipantPayloadResponse.fromJSON(p.textBody),k={avatar:_.avatar,displayName:_.nickname,id:_.participantId,isHost:_.ishost,isMuted:_.ismuted,isUsingTts:_.usetts,preferredLanguage:_.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(k,f));break;case"leavesession":const z={id:w.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(z,f));break;case"disconnectsession":const D={id:w.participantId};break;case"token":const O=new n.CognitiveTokenAuthentication(()=>{const M=w.token;return Promise.resolve(M)},()=>{const M=w.token;return Promise.resolve(M)});this.authentication=O,this.privConversationServiceConnector.onToken(O);break;default:break}break;case"partial":case"final":const y=o.SpeechResponsePayload.fromJSON(p.textBody),S=g==="final"?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,C=new t.ConversationTranslationResult(y.participantId,this.getTranslations(y.translations),y.language,y.id,S,y.recognition,void 0,void 0,p.textBody,void 0);y.isFinal?((C.text!==void 0&&C.text.length>0||y.id===this.privLastPartialUtteranceId)&&(v=!0),v&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,C,f))):C.text!==void 0&&(this.privLastPartialUtteranceId=y.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,C,f)));break;case"translated_message":const x=o.TextResponsePayload.fromJSON(p.textBody),E=new t.ConversationTranslationResult(x.participantId,this.getTranslations(x.translations),x.language,void 0,void 0,x.originalText,void 0,void 0,void 0,p.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,E,f));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return u.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const u=this.receiveConversationMessageOverride();try{return await u}catch(h){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,h),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(u=>u.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(u=>u),this.privConnectionConfigPromise)}getTranslations(u){let h;if(u!==void 0){h=new t.Translations;for(const p of u)h.set(p.lang,p.translation)}return h}};return rh.ConversationServiceAdapter=c,rh}var gA;function Gee(){if(gA)return wa;gA=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.ConversationTranslatorRecognizer=wa.ConversationRecognizerFactory=void 0;const e=we(),t=ke(),n=$e,r=ae(),i=Fee(),s=Kee();class a{static fromConfig(l,u,h){return new o(l,u,h)}}wa.ConversationRecognizerFactory=a;let o=class extends r.Recognizer{constructor(l,u,h){const p=u;n.Contracts.throwIfNull(p,"speechConfig");const f=l;n.Contracts.throwIfNull(f,"conversationImpl"),super(h,p.properties,new i.ConversationConnectionFactory),this.privConversation=f,this.privIsDisposed=!1,this.privProperties=p.properties.clone(),this.privConnection=r.Connection.fromRecognizer(this),this.privProperties.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(l){this.privConnection.connected=l}set disconnected(l){this.privConnection.disconnected=l}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(l,u,h){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfNullOrWhitespace(l,"token"),this.privReco.conversationTranslatorToken=l,this.resetConversationTimeout(),this.privReco.connectAsync(u,h)}catch(p){if(h)if(p instanceof Error){const f=p;h(f.name+": "+f.message)}else h(p)}}disconnect(l,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{l&&l()},h=>{u&&u(h)})}catch(h){if(u)if(h instanceof Error){const p=h;u(p.name+": "+p.message)}else u(h);this.dispose(!0).catch(p=>{t.Events.instance.onEvent(new t.BackgroundEvent(p))})}}sendRequest(l,u,h){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(l,u,h)}catch(p){if(h)if(p instanceof Error){const f=p;h(f.name+": "+f.message)}else h(p);this.dispose(!0).catch(f=>{t.Events.instance.onEvent(new t.BackgroundEvent(f))})}}onToken(l){this.privConversation.onToken(l)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(l){this.privIsDisposed||l&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(l))}createRecognizerConfig(l){return new e.RecognizerConfig(l,this.privProperties)}createServiceRecognizer(l,u,h,p){const f=h;return new s.ConversationServiceAdapter(l,u,f,p,this)}sendMessage(l,u,h){const p=this.privReco;((g,v,w)=>{g!==void 0?g.then(()=>{try{v&&v()}catch(y){w&&w(`'Unhandled error on promise callback: ${y}'`)}},y=>{try{w&&w(y)}catch{}}):w&&w("Null promise")})(p.sendMessageAsync(l),u,h),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return wa.ConversationTranslatorRecognizer=o,wa}var ih={},yA;function Qee(){if(yA)return ih;yA=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.TranscriberRecognizer=void 0;const e=ke(),t=$e,n=ae(),r=we();let i=class extends n.Recognizer{constructor(a,o){const c=a;t.Contracts.throwIfNull(c,"speechTranslationConfig");const l=o;t.Contracts.throwIfNull(l,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(c.speechRecognitionLanguage,n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new r.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}set conversation(a){t.Contracts.throwIfNullOrUndefined(a,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=a}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(a){t.Contracts.throwIfNullOrUndefined(a,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=a}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(a,o){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(a,o){const c=this.privReco;t.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendSpeechEventAsync(a,o)}async pushMeetingEvent(a,o){const c=this.privReco;t.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendMeetingSpeechEventAsync(a,o)}async enforceAudioGating(){const c=(await this.audioConfig.format).channels;if(c===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(c!==8)throw new Error(`Unsupported audio configuration: Detected ${c}-channel audio`)}connectMeetingCallbacks(a){this.isMeetingRecognizer=!0,this.canceled=(o,c)=>{a.canceled&&a.canceled(a,c)},this.recognizing=(o,c)=>{a.transcribing&&a.transcribing(a,c)},this.recognized=(o,c)=>{a.transcribed&&a.transcribed(a,c)},this.sessionStarted=(o,c)=>{a.sessionStarted&&a.sessionStarted(a,c)},this.sessionStopped=(o,c)=>{a.sessionStopped&&a.sessionStopped(a,c)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new r.RecognizerConfig(a,this.properties)}createServiceRecognizer(a,o,c,l){const u=c;return new r.TranscriptionServiceRecognizer(a,o,u,l,this)}};return ih.TranscriberRecognizer=i,ih}var SA;function Jee(){return SA||(SA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Oee();Object.defineProperty(e,"ConversationManager",{enumerable:!0,get:function(){return t.ConversationManager}});var n=lu;Object.defineProperty(e,"ConversationConnectionConfig",{enumerable:!0,get:function(){return n.ConversationConnectionConfig}});var r=Gee();Object.defineProperty(e,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return r.ConversationRecognizerFactory}});var i=Qee();Object.defineProperty(e,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var s=R$();Object.defineProperty(e,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(e,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(e,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(e,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(e,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var a=As;Object.defineProperty(e,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(e,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(e,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(Z0)),Z0}var BE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesisAudioMetadata=e.MetadataType=void 0,function(n){n.WordBoundary="WordBoundary",n.Bookmark="Bookmark",n.Viseme="Viseme",n.SentenceBoundary="SentenceBoundary",n.SessionEnd="SessionEnd",n.AvatarSignal="TalkingAvatarSignal"}(e.MetadataType||(e.MetadataType={}));class t{constructor(r){this.privSynthesisAudioMetadata=JSON.parse(r)}static fromJSON(r){return new t(r)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}e.SynthesisAudioMetadata=t})(BE);var sh={},Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.SynthesisStartedEvent=Gi.ConnectingToSynthesisServiceEvent=Gi.SynthesisTriggeredEvent=Gi.SpeechSynthesisEvent=void 0;const wA=ke();class nS extends wA.PlatformEvent{constructor(t,n,r=wA.EventType.Info){super(t,r),this.privRequestId=n}get requestId(){return this.privRequestId}}Gi.SpeechSynthesisEvent=nS;class Yee extends nS{constructor(t,n,r){super("SynthesisTriggeredEvent",t),this.privSessionAudioDestinationId=n,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}Gi.SynthesisTriggeredEvent=Yee;class Zee extends nS{constructor(t,n){super("ConnectingToSynthesisServiceEvent",t),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}Gi.ConnectingToSynthesisServiceEvent=Zee;class Xee extends nS{constructor(t,n){super("SynthesisStartedEvent",t),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}Gi.SynthesisStartedEvent=Xee;var CA;function ete(){if(CA)return sh;CA=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.SynthesisTurn=void 0;const e=ke(),t=vn,n=ae(),r=BE,i=Gi;let s=class ox{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=e.createNoDashGuid(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(o){this.privStreamId=o}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(o){this.privAudioOutputFormat=o}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const o=new n.PropertyCollection;return o.setProperty(n.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),o}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const o=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(o),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(o,c,l,u){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=o,this.privRawText=c,this.privIsSSML=l,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",u!==void 0&&(this.privTurnAudioDestination=u,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,u===void 0?void 0:u.id()))}onPreConnectionStart(o){this.privAuthFetchEventId=o,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(o){o&&this.onComplete()}onConnectionEstablishCompleted(o){if(o===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else o===403&&this.onComplete()}onServiceResponseMessage(o){const c=JSON.parse(o);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(o){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const c=JSON.parse(o);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(o){this.isSynthesizing&&(this.privAudioOutputStream.write(o),this.privBytesReceived+=o.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(o))}onTextBoundaryEvent(o){this.updateTextOffset(o.Data.text.Text,o.Type)}onVisemeMetadataReceived(o){o.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=o.Data.AnimationChunk)}onSessionEnd(o){this.privAudioDuration=o.Data.Offset}async constructSynthesisResult(){const o=await this.getAllReceivedAudioWithHeader();return new n.SpeechSynthesisResult(this.requestId,n.ResultReason.SynthesizingAudioCompleted,o,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const o=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",o}onEvent(o){e.Events.instance.onEvent(o)}static isXmlTag(o){return o.length>=2&&o[0]==="<"&&o[o.length-1]===">"}updateTextOffset(o,c){c===r.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(o,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!ox.isXmlTag(o)&&this.updateTextOffset(o,c))):(this.privSentenceOffset=this.privRawText.indexOf(o,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!ox.isXmlTag(o)&&this.updateTextOffset(o,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(o){return this.privRawText.indexOf("<",o+1)>this.privRawText.indexOf(">",o+1)}};return sh.SynthesisTurn=s,sh}var oh={},xA;function tte(){if(xA)return oh;xA=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.SynthesisAdapterBase=void 0;const e=ke(),t=ae(),n=we(),r=qs;let i=class{constructor(a,o,c,l){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new e.ArgumentNullError("authentication");if(!o)throw new e.ArgumentNullError("connectionFactory");if(!c)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=o,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=l,this.privSynthesisTurn=new n.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new n.SynthesisContext,this.privAgentConfig=new n.AgentConfig,this.connectionEvents.attach(u=>{if(u.name==="ConnectionClosedEvent"){const h=u;h.statusCode!==1e3&&this.cancelSynthesisLocal(t.CancellationReason.Error,h.statusCode===1007?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${h.reason} websocket error code: ${h.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,o){const c=typeof o=="string"?e.MessageType.Text:e.MessageType.Binary,l=typeof o=="string"?"application/json":"";return(await this.fetchConnection()).send(new r.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,l,o))}async Speak(a,o,c,l,u,h){let p;if(o?p=a:p=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(p,c,l,u);this.privSuccessCallback=l,this.privErrorCallback=u,this.privSynthesisTurn.startNewSynthesis(c,a,o,h);try{await this.connectImpl();const f=await this.fetchConnection();await this.sendSynthesisContext(f),await this.sendSsmlMessage(f,p,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(f){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,f),Promise.reject(f)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new r.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,o,c,l){const u=new t.PropertyCollection;u.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]);const h=new t.SpeechSynthesisResult(a,t.ResultReason.Canceled,void 0,l,u);if(this.onSynthesisCancelled(h),this.privSuccessCallback)try{this.privSuccessCallback(h)}catch{}}cancelSynthesisLocal(a,o,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,o,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const o=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!o)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=r.SpeechConnectionMessage.fromConnectionMessage(o);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const l=n.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const h of l)switch(h.Type){case n.MetadataType.WordBoundary:case n.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(h);const p=new t.SpeechSynthesisWordBoundaryEventArgs(h.Data.Offset,h.Data.Duration,h.Data.text.Text,h.Data.text.Length,h.Type===n.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,h.Data.text.BoundaryType);this.onWordBoundary(p);break;case n.MetadataType.Bookmark:const f=new t.SpeechSynthesisBookmarkEventArgs(h.Data.Offset,h.Data.Bookmark);this.onBookmarkReached(f);break;case n.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(h),h.Data.IsLastAnimation){const g=new t.SpeechSynthesisVisemeEventArgs(h.Data.Offset,h.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(g)}break;case n.MetadataType.AvatarSignal:this.onAvatarEvent(h);break;case n.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(h);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let u;try{u=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(u)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.onSynthesisCompleted(u);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const o=this.synthesisContext.toJSON();if(o)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",o))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=e.createNoDashGuid(),this.privConnectionId=e.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const o=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=o.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const l=this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);l.events.attach(h=>{this.connectionEvents.onEvent(h)});const u=await l.open();return u.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(u.statusCode),Promise.resolve(l)):u.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(u.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${u.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Url)} Reason: ${u.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,o){if(o)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",o))}sendSsmlMessage(a,o,c){return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"ssml",c,"application/ssml+xml",o))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return oh.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,oh}var ah={},bA;function nte(){if(bA)return ah;bA=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.AvatarSynthesisAdapter=void 0;const e=ae(),t=we();let n=class extends t.SynthesisAdapterBase{constructor(i,s,a,o,c){super(i,s,a,void 0),this.privAvatarSynthesizer=o,this.privSynthesizer=o,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var i,s,a,o,c,l,u,h,p,f,g,v,w,y,S,C,x;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(i=this.privAvatarConfig.videoFormat)==null?void 0:i.bitrate,codec:(s=this.privAvatarConfig.videoFormat)==null?void 0:s.codec,crop:{bottomRight:{x:(c=(o=(a=this.privAvatarConfig.videoFormat)==null?void 0:a.cropRange)==null?void 0:o.bottomRight)==null?void 0:c.x,y:(h=(u=(l=this.privAvatarConfig.videoFormat)==null?void 0:l.cropRange)==null?void 0:u.bottomRight)==null?void 0:h.y},topLeft:{x:(g=(f=(p=this.privAvatarConfig.videoFormat)==null?void 0:p.cropRange)==null?void 0:f.topLeft)==null?void 0:g.x,y:(y=(w=(v=this.privAvatarConfig.videoFormat)==null?void 0:v.cropRange)==null?void 0:w.topLeft)==null?void 0:y.y}},resolution:{height:(S=this.privAvatarConfig.videoFormat)==null?void 0:S.height,width:(C=this.privAvatarConfig.videoFormat)==null?void 0:C.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:(x=this.privAvatarConfig.backgroundImage)==null?void 0:x.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const s=new e.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,s)}catch{}}}};return ah.AvatarSynthesisAdapter=n,ah}var ch={},EA;function rte(){if(EA)return ch;EA=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.SpeechSynthesisAdapter=void 0;const e=ae(),t=we();let n=class extends t.SynthesisAdapterBase{constructor(i,s,a,o,c){super(i,s,a,c),this.privSpeechSynthesizer=o,this.privSynthesizer=o}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const s=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(i,e.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,s)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const s=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(this.privSynthesisTurn.requestId,e.ResultReason.SynthesizingAudio,s));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const s=new e.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,s)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new e.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return ch.SpeechSynthesisAdapter=n,ch}var lh={},PA;function ite(){if(PA)return lh;PA=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.SynthesisRestAdapter=void 0;const e=hn(),t=ae(),n=Ii(),r=dn;let i=class{constructor(a,o){let c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const u=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"westus"),h=n.ConnectionFactoryBase.getHostSuffix(u);c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`https://${u}.tts.speech${h}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const l=e.RestConfigBase.requestOptions;this.privRestAdapter=new e.RestMessageAdapter(l),this.privAuthentication=o}getVoicesList(a){return this.privRestAdapter.setHeaders(r.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(o=>(this.privRestAdapter.setHeaders(o.headerName,o.token),this.privRestAdapter.request(e.RestRequestType.Get,this.privUri)))}};return lh.SynthesisRestAdapter=i,lh}var ew={},RA;function ste(){return RA||(RA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesizerConfig=e.SynthesisServiceType=void 0;const t=we();var n;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(n=e.SynthesisServiceType||(e.SynthesisServiceType={}));class r{constructor(s,a){this.privSynthesisServiceType=n.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=s||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(s){this.privSynthesisServiceType=s}set synthesisVideoSection(s){this.privSpeechServiceConfig.Context.synthesis={video:s}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}e.SynthesizerConfig=r}(ew)),ew}var uh={},_A;function ote(){if(_A)return uh;_A=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.SynthesisContext=void 0;const e=ae();let t=class{constructor(){this.privContext={}}setSection(r,i){this.privContext[r]=i}set audioOutputFormat(r){this.privAudioOutputFormat=r}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(r){const i=this.buildSynthesisContext(r);this.setSection("synthesis",i)}buildSynthesisContext(r){return{audio:{metadataOptions:{bookmarkEnabled:!!(r!=null&&r.bookmarkReached),punctuationBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(r!=null&&r.wordBoundary)),sentenceBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(r!=null&&r.visemeReceived),wordBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(r!=null&&r.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:r==null?void 0:r.autoDetectSourceLanguage}}}};return uh.SynthesisContext=t,uh}var dh={},TA;function ate(){if(TA)return dh;TA=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.SpeakerRecognitionConfig=void 0;const e=we();let t=class{constructor(r,i){this.privContext=r||new e.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return dh.SpeakerRecognitionConfig=t,dh}var hh={},AA;function cte(){if(AA)return hh;AA=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.SpeakerServiceRecognizer=void 0;const e=hn(),t=ke(),n=ae(),r=we(),i=qs;let s=class extends r.ServiceRecognizerBase{constructor(o,c,l,u,h){super(o,c,l,u,h),this.privSpeakerRecognizer=h,this.privSpeakerAudioSource=l,this.recognizeSpeaker=p=>this.recognizeSpeakerOnce(p),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(o){let c=!1;const l=new n.PropertyCollection;switch(o.messageType===t.MessageType.Text&&l.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speaker.response":const h=JSON.parse(o.textBody);let p;h.status.statusCode.toLowerCase()!=="success"?p=new n.SpeakerRecognitionResult(h,n.ResultReason.Canceled,n.CancellationErrorCode.ServiceError,h.status.reason):p=new n.SpeakerRecognitionResult(h,n.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(p),c=!0;break}const u=new t.Deferred;return u.resolve(c),u.promise}cancelRecognition(o,c,l,u,h){if(new n.PropertyCollection().setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[u]),this.privResultDeferral){const f=new n.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:h,reason:h}},n.ResultReason.Canceled,u,h);try{this.privResultDeferral.resolve(f)}catch(g){this.privResultDeferral.reject(g)}}}async recognizeSpeakerOnce(o){this.privSpeakerModel=o,this.voiceProfileType=o.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),l=this.sendPreAudioMessages(this.extractSpeakerContext(o)),u=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),h=await this.privSpeakerAudioSource.format,p=await this.privSpeakerAudioSource.deviceInfo,f=new e.ReplayableAudioNode(u,h.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(f,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:p};try{await c,await l}catch(w){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,w)}const g=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,g),this.receiveMessage(),this.sendAudio(f).then(()=>{},w=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,w)}),this.privResultDeferral.promise}async sendPreAudioMessages(o){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,o)}async sendSpeakerRecognition(o,c){const l=JSON.stringify(c);return o.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",l))}extractSpeakerContext(o){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:o.profileIds,scenario:o.scenario}}};return hh.SpeakerServiceRecognizer=s,hh}var ph={},NA;function lte(){if(NA)return ph;NA=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.VoiceServiceRecognizer=void 0;const e=hn(),t=ke(),n=ae(),r=we(),i=qs;let s=class extends r.ServiceRecognizerBase{constructor(o,c,l,u,h){super(o,c,l,u,h),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=l,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(o){this.privSpeakerAudioSource=o}processTypeSpecificMessages(o){let c=!1;const l=new n.PropertyCollection;switch(o.messageType===t.MessageType.Text&&l.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speaker.profiles":const h=JSON.parse(o.textBody);switch(h.operation.toLowerCase()){case"create":this.handleCreateResponse(h,o.requestId);break;case"delete":case"reset":this.handleResultResponse(h,o.requestId);break;case"fetch":const v=JSON.parse(o.textBody);this.handleFetchResponse(v,o.requestId);break}c=!0;break;case"speaker.phrases":const p=JSON.parse(o.textBody);this.handlePhrasesResponse(p,o.requestId),c=!0;break;case"speaker.profile.enrollment":const f=JSON.parse(o.textBody),g=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(f.enrollment?f.enrollment.enrollmentStatus:f.status.statusCode),f.enrollment?JSON.stringify(f.enrollment):void 0,f.status.reason);this.privDeferralMap.getId(o.requestId)&&this.privDeferralMap.complete(o.requestId,g),this.privRequestSession.onSpeechEnded(),c=!0;break}const u=new t.Deferred;return u.resolve(c),u.promise}cancelRecognition(o,c,l,u,h){new n.PropertyCollection().setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[u]);const f=new n.VoiceProfileEnrollmentResult(n.ResultReason.Canceled,h,h);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,f)}async createProfile(o,c){this.voiceProfileType=o.toString();const l=this.connectImpl();try{const u=new t.Deferred;return await l,await this.sendCreateProfile(u,o,c),this.receiveMessage(),u.promise}catch(u){throw u}}async resetProfile(o){return this.voiceProfileType=o.profileType.toString(),this.sendCommonRequest("reset",o.profileType,o)}async deleteProfile(o){return this.voiceProfileType=o.profileType.toString(),this.sendCommonRequest("delete",o.profileType,o)}async retrieveEnrollmentResult(o){return this.voiceProfileType=o.profileType.toString(),this.privExpectedProfileId=o.profileId,this.sendCommonRequest("fetch",o.profileType,o)}async getAllProfiles(o){return this.voiceProfileType=o.toString(),this.sendCommonRequest("fetch",o)}async getActivationPhrases(o,c){this.voiceProfileType=o.toString();const l=this.connectImpl();try{const u=new t.Deferred;return await l,await this.sendPhrasesRequest(u,o,c),this.receiveMessage(),u.promise}catch(u){throw u}}async enrollProfile(o){this.voiceProfileType=o.profileType.toString();const c=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const l=this.connectImpl(),u=this.sendPreAudioMessages(o,c),h=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,f=await this.privSpeakerAudioSource.deviceInfo,g=new e.ReplayableAudioNode(h,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(g,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:f};try{await l,await u}catch(y){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,y)}const v=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,v),this.receiveMessage(),this.sendAudio(g).then(()=>{},y=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,y)}),c.promise}async sendPreAudioMessages(o,c){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(l,"enroll",this.scenarioFrom(o.profileType),o)}async sendPhrasesRequest(o,c,l){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o);const h=this.scenarioFrom(c),p={locale:l,scenario:h};return u.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}async sendCreateProfile(o,c,l){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o);const h=c===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",p={locale:l,number:"1",scenario:h};return u.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}async sendCommonRequest(o,c,l=void 0){const u=this.connectImpl();try{const h=new t.Deferred;this.privRequestSession.onSpeechContext(),await u;const p=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,h),await this.sendBaseRequest(p,o,this.scenarioFrom(c),l),this.receiveMessage(),h.promise}catch(h){throw h}}async sendBaseRequest(o,c,l,u){const h={scenario:l};return u?h.profileIds=[u.profileId]:h.maxPageSize=-1,o.send(new i.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(h)))}extractSpeakerContext(o){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:o.profileIds,scenario:o.scenario}}handlePhrasesResponse(o,c){if(this.privDeferralMap.getId(c))if(o.status.statusCode.toLowerCase()!=="success"){const l=n.ResultReason.Canceled,u=new n.VoiceProfilePhraseResult(l,o.status.statusCode,o.passPhraseType,[]);this.privDeferralMap.complete(c,u)}else if(o.phrases&&o.phrases.length>0){const l=n.ResultReason.EnrollingVoiceProfile,u=new n.VoiceProfilePhraseResult(l,o.status.statusCode,o.passPhraseType,o.phrases);this.privDeferralMap.complete(c,u)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(o,c){if(o.profiles&&o.profiles.length>0)if(this.privDeferralMap.getId(c)){const l=o.profiles.map(u=>u.profileId);this.privDeferralMap.complete(c,l)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(o,c){if(this.privDeferralMap.getId(c)){const l=o.operation.toLowerCase()==="delete"?n.ResultReason.DeletedVoiceProfile:n.ResultReason.ResetVoiceProfile,u=o.status.statusCode.toLowerCase()==="success"?l:n.ResultReason.Canceled,h=new n.VoiceProfileResult(u,`statusCode: ${o.status.statusCode}, errorDetails: ${o.status.reason}`);this.privDeferralMap.complete(c,h)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(o,c){if(this.privDeferralMap.getId(c)&&o.profiles[0]){if(this.privExpectedProfileId&&o.profiles.length===1&&o.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const l=o.profiles[0],u=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(l.enrollmentStatus),JSON.stringify(l),o.status.reason);this.privDeferralMap.complete(c,u)}else if(o.profiles.length>0){const l=o.profiles,u=[];for(const h of l)u.push(new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollmentStatus),JSON.stringify(h),o.status.reason));this.privDeferralMap.complete(c,u)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(o){switch(o.toLowerCase()){case"enrolled":return n.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return n.ResultReason.Canceled;default:return n.ResultReason.EnrollingVoiceProfile}}scenarioFrom(o){return o===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":o===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return ph.VoiceServiceRecognizer=s,ph}var T$={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.type=e.connectivity=e.Device=e.OS=e.System=e.Context=e.SpeechServiceConfig=void 0;class t{constructor(o){this.context=o}serialize(){return JSON.stringify(this,(o,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const l={};for(const u in c)Object.hasOwnProperty.call(c,u)&&(l[u&&u.charAt(0).toLowerCase()+u.substring(1)]=c[u]);return l}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(o){this.recognition=o.toLowerCase()}}e.SpeechServiceConfig=t;class n{constructor(o){this.system=new r,this.os=o}}e.Context=n;class r{constructor(){const o="1.43.1";this.name="SpeechSDK",this.version=o,this.build="JavaScript",this.lang="JavaScript"}}e.System=r;class i{constructor(o,c,l){this.platform=o,this.name=c,this.version=l}}e.OS=i;class s{constructor(o,c,l){this.manufacturer=o,this.model=c,this.version=l}}e.Device=s,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(e.connectivity||(e.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(e.type||(e.type={}))})(T$);var IA;function we(){return IA||(IA=1,function(e){var t=nt&&nt.__createBinding||(Object.create?function(s,a,o,c){c===void 0&&(c=o),Object.defineProperty(s,c,{enumerable:!0,get:function(){return a[o]}})}:function(s,a,o,c){c===void 0&&(c=o),s[c]=a[o]}),n=nt&&nt.__exportStar||function(s,a){for(var o in s)o!=="default"&&!a.hasOwnProperty(o)&&t(a,s,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDetectSourceLanguagesOpenRangeOptionName=e.ForceDictationPropertyName=e.ServicePropertiesPropertyName=e.CancellationErrorCodePropertyName=e.OutputFormatPropertyName=void 0,n(Ug,e),n(uy,e),n(cu,e),n(PF,e),n(RF,e),n(XX(),e),n(eee(),e),n(zy,e),n(tee(),e),n(nee(),e),n(ree(),e),n(S$,e),n(Fy,e),n(see(),e),n(oee(),e),n(aee(),e),n(cee(),e),n(v$(),e),n(lee(),e),n(w$,e),n(uee(),e),n($y,e),n(hee(),e),n(pee(),e),n(By,e),n(Vy,e),n(Uy,e),n(fee(),e),n(mee(),e),n(vee(),e),n(gee(),e),n(yee(),e),n(qy,e),n(wee(),e),n(Hy,e),n(E$,e),n(Wy,e),n(Gy,e),n(Qy,e),n(P$,e),n(jee(),e),n(Zy,e),n(Jee(),e),n(BE,e),n(ete(),e),n(tte(),e);var r=nte();Object.defineProperty(e,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return r.AvatarSynthesisAdapter}});var i=rte();Object.defineProperty(e,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),n(ite(),e),n(ste(),e),n(ote(),e),n(ate(),e),n(cte(),e),n(lte(),e),n(T$,e),e.OutputFormatPropertyName="OutputFormat",e.CancellationErrorCodePropertyName="CancellationErrorCode",e.ServicePropertiesPropertyName="ServiceProperties",e.ForceDictationPropertyName="ForceDictation",e.AutoDetectSourceLanguagesOpenRangeOptionName="UND"}(M0)),M0}(function(e){var t=nt&&nt.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[a]}})}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),n=nt&&nt.__exportStar||function(i,s){for(var a in i)a!=="default"&&!s.hasOwnProperty(a)&&t(s,i,a)};Object.defineProperty(e,"__esModule",{value:!0});const r=we();new r.AgentConfig,n(ae(),e)})(In);let Cr=null,xr=null;const ute=2e3,Yh=1,dte=40;let Ma="";const Ih=(e,t)=>{if(e.length<Yh&&t.length<Yh)return!0;if(!e||!t)return!1;if(e.includes(t)||t.includes(e))return!0;const n=Math.max(e.length,t.length);return n===0?!0:n<10?jA(e,t)<=2:jA(e,t)/n<.3},jA=(e,t)=>{const n=[];for(let r=0;r<=e.length;r++)n[r]=[r];for(let r=0;r<=t.length;r++)n[0][r]=r;for(let r=1;r<=e.length;r++)for(let i=1;i<=t.length;i++)e[r-1]===t[i-1]?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,n[r][i-1]+1,n[r-1][i]+1);return n[e.length][t.length]},hte=()=>{try{const e="3C6jjRbMMqwAUuOVIPKfPN21zJ3JC1FyJJBuSuwVd98vpa8sJZn8JQQJ99BEACxCCsyXJ3w3AAAYACOGFBdp",t="japanwest";Cr&&Vi();const n=In.SpeechConfig.fromSubscription(e,t);return n.speechRecognitionLanguage="ja-JP",n.setServiceProperty("SPEECHCONTEXT","DICTATION","1"),n.setServiceProperty("QUALITY","INTERACTIVE","1"),n.setProfanity(In.ProfanityOption.Raw),n.enableDictation(),n.setProperty(In.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,"8000"),n.setProperty(In.PropertyId.Speech_SegmentationSilenceTimeoutMs,"1000"),n.setProperty(In.PropertyId.Speech_DetectionSensitivity,"0.8"),n.setProperty(In.PropertyId.Speech_AudioInputSensitivity,"0.8"),n.setProperty(In.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,"3000"),n.setProperty(In.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,"1000"),n.setProperty(In.PropertyId.Speech_DetectionVoiceActivityTimeoutMs,"1000"),n.setProperty(In.PropertyId.Speech_SegmentationSilenceTimeoutMs,"200"),n.setProperty(In.PropertyId.SpeechServiceResponse_PostProcessingOption,"TrueText"),n}catch(e){return console.error("Azure Speech設定の初期化に失敗しました:",e),null}};typeof window<"u"&&window.addEventListener("reset-recognition-phrases",()=>{console.log("認識フレーズリセットコマンド受信"),Ss=[],Ma="",jh=!1,Zh=!1});let Ss=[],Zh=!1,kA=Date.now(),jh=!1;const tw=e=>{xr&&(clearTimeout(xr),xr=null),xr=setTimeout(()=>{console.log("無音タイムアウト: 2秒間音声入力がありませんでした"),Zh=!0,e(),Vi()},ute)},pte=async(e,t)=>{try{await Vi(),(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})).getTracks().forEach(u=>u.stop()),Cr=null,Ma="",Ss=[],Zh=!1,jh=!1,kA=Date.now();const r=hte();if(!r)throw new Error("Azure Speech設定の初期化に失敗しました");const i=In.AudioConfig.fromDefaultMicrophoneInput();Cr=new In.SpeechRecognizer(r,i);let s="",a="",o="",c=!1;const l=()=>{if(jh||c){console.log("送信ブロック中または処理中: スキップします");return}c=!0;const u=s.trim();let h="";u.length>=Yh?h=u:Ss.length>0&&(h=[...Ss].sort((f,g)=>g.length-f.length)[0]),h&&h.length>=Yh?Ih(h,Ma)?(console.log("類似テキストのため送信をスキップ:",h,"vs",Ma),c=!1):(console.log("完成した文章なので、メッセージとして送信:",h),Ma=h,e(h),s="",Ss=[],jh=!0,setTimeout(()=>{jh=!1,c=!1},3e3)):(console.log("有効な文章が見つからないため送信をスキップします"),c=!1)};tw(()=>{c||(console.log("無音タイマーでメッセージ送信を試行"),console.log("現在のフレーズ数:",Ss.length),Zh=!0,l())}),Cr.recognized=(u,h)=>{if(!c&&(kA=Date.now(),Zh=!1,h.result.reason===In.ResultReason.RecognizedSpeech)){const p=h.result.text.trim();if(p&&!Ih(p,a)&&!Ih(p,o)){Ss.includes(p)||Ss.push(p);const f=p.trim(),g=s.trim();Ss.some(w=>Ih(f,w))?console.log("類似テキストをスキップ:",f):(g.length>0?s=`${g} ${f}`:s=f,console.log("認識テキスト追加:",p),console.log("現在の完全な文:",s),s.length>=Yh&&e(s)),tw(()=>{c||l()})}else p&&(console.log("重複認識をスキップ:",p),tw(()=>{c||l()}))}},Cr.canceled=(u,h)=>{h.reason===In.CancellationReason.Error&&(console.error("Azure Speech エラー:",h.errorDetails),Vi(),ax(e,t),VD({title:"ブラウザの音声認識に切り替えました",description:"より安定した音声認識を提供します",duration:3e3})),xr&&(clearTimeout(xr),xr=null)},Cr.startContinuousRecognitionAsync(()=>console.log("Azure Speech認識を開始しました"),u=>{console.error("認識開始エラー:",u),t(`認識開始エラー: ${u}`),xr&&(clearTimeout(xr),xr=null)})}catch(n){console.error("Azure Speech初期化エラー:",n),t(`Azure Speech初期化エラー: ${n}`),ax(e,t)}},Vi=async()=>{try{xr&&(clearTimeout(xr),xr=null),Cr&&await new Promise((e,t)=>{Cr==null||Cr.stopContinuousRecognitionAsync(()=>{console.log("Azure Speech認識を停止しました"),Cr=null,e()},n=>{console.error("認識停止エラー:",n),Cr=null,t(n)})}).catch(()=>{})}catch(e){console.error("音声認識停止中にエラーが発生しました:",e)}finally{Cr=null}};let zi=null;const fte=()=>(window.SpeechRecognition||window.webkitSpeechRecognition,!1),ax=(e,t)=>{if(!fte()){t("お使いのブラウザは音声認識をサポートしていません。");return}const n=window.SpeechRecognition||window.webkitSpeechRecognition;zi=new n,zi.continuous=!0,zi.interimResults=!0,zi.lang="ja-JP";let r=[],i="",s=!1;const a=o=>{if(s){console.log("ブラウザ音声認識: 送信ブロック中のためスキップ");return}o.trim()&&!r.includes(o)&&r.push(o);const c=/[。！？!?]$/.test(o.trim()),l=o.length>=10,u=o.length>=dte;c||l||u?(u&&console.log("ブラウザ音声認識: 最大文字数(50文字)に達したので送信します"),Ih(o,Ma)||(console.log("ブラウザ音声認識: 完成した文章を送信:",o),Ma=o,e(o),s=!0,r=[],setTimeout(()=>{s=!1},3e3))):(console.log("ブラウザ音声認識: 未完成の文章をバッファに保持:",o),e(o))};zi.onresult=o=>{const c=Array.from(o.results).map(l=>l[0]).map(l=>l.transcript).join("");c!==i&&c.length>0&&(i=c,a(c))},zi.onerror=o=>{t(`音声認識エラー: ${o.error}`)},zi.start()},fh=()=>{zi&&(zi.stop(),zi=null)},A$=m.createContext(null),uu=()=>{const e=m.useContext(A$);return e===null?(console.error("ChatContext is null - this likely means useChat was called outside of the ChatProvider"),{messages:[],isLoading:!1,searching:!1,searchResults:[],selectedText:"",setSelectedText:()=>{},sendMessage:async()=>{},startRecording:()=>{},stopRecording:()=>{},isRecording:!1,recordedText:"",searchBySelectedText:async()=>{},clearSearchResults:()=>{},captureImage:async()=>{},exportChatHistory:async()=>{},exportFormattedData:async()=>({}),lastExportTimestamp:null,isExporting:!1,hasUnexportedMessages:!1,sendEmergencyGuide:async()=>{},draftMessage:null,setDraftMessage:()=>{},clearChatHistory:async()=>{},isClearing:!1}):e},N$=({children:e})=>{const[t,n]=m.useState([]),[r,i]=m.useState(!1),[s,a]=m.useState(!1),[o,c]=m.useState(""),[l,u]=m.useState(""),[h,p]=m.useState(!1),[f,g]=m.useState([]),[v,w]=m.useState(null),[y,S]=m.useState(!1),[C,x]=m.useState(!1),[E,P]=m.useState(null),[T,_]=m.useState(!1),[k,z]=m.useState(!1),[D,O]=m.useState([]),[M,b]=m.useState(null),{toast:A}=ln(),[N,j]=m.useState(""),[R,I]=m.useState(null),[$,U]=m.useState([]),[G,Y]=m.useState(!1),[J,oe]=m.useState(0),[V,H]=m.useState(!1),[te,re]=m.useState(""),[ne,he]=m.useState(!1),[ue,_e]=m.useState(Date.now()),[je,qe]=m.useState(null),[ht,Me]=m.useState([]),[L,K]=m.useState(null),F=300,Q=1e3,Z=m.useCallback(async()=>{try{console.log("チャット初期化開始"),_(!0),console.log("認証状態確認中...");const fe=await Qt("GET","/api/auth/me");if(console.log("認証レスポンス:",fe.status,fe.statusText),!fe.ok)return console.log("認証失敗 - ログインページにリダイレクトします"),window.location.href="/login",null;const Pe=await fe.json();console.log("認証成功:",Pe),console.log("既存チャット取得中...");const Oe=await Qt("GET","/api/chats");if(console.log("チャット取得レスポンス:",Oe.status,Oe.statusText),!Oe.ok){const st=await Oe.text();throw console.error("チャット取得エラー:",st),new Error(`チャットの取得に失敗しました: ${Oe.status} ${st}`)}const ct=await Oe.json();if(console.log("取得したチャット:",ct),ct&&ct.length>0)return console.log("既存チャットを使用:",ct[0].id),P(ct[0].id),ct[0].id;console.log("新しいチャットを作成中...");const Ge=await Qt("POST","/api/chats",{title:"保守用車ナレッジチャット"});if(!Ge.ok){const st=await Ge.text();throw console.error("チャット作成エラー:",st),new Error(`チャットの作成に失敗しました: ${Ge.status} ${st}`)}const mt=await Ge.json();return console.log("新しいチャットが作成されました:",mt),P(mt.id),mt.id}catch(fe){return console.error("チャット初期化エラー詳細:",fe),fe instanceof Error&&fe.message.includes("401")||A({title:"チャット初期化エラー",description:`チャットの初期化に失敗しました: ${fe instanceof Error?fe.message:"Unknown error"}`,variant:"destructive"}),null}finally{_(!1)}},[A]);m.useEffect(()=>{Z()},[Z]),m.useEffect(()=>{E&&(async()=>{if(E)try{const Pe=await Qt("GET",`/api/chats/${E}/messages`);if(Pe.ok){const Oe=await Pe.json();n(Oe.map(ct=>({...ct,timestamp:new Date(ct.timestamp)})))}}catch(Pe){console.error("Failed to load messages:",Pe)}})()},[E]),m.useEffect(()=>{let fe=!1,Pe=null;const Oe=Ge=>{if(fe){console.log("更新中のため、ドラフトメッセージの更新をスキップ");return}if(Ge.detail&&typeof Ge.detail.content=="string"){const{content:mt}=Ge.detail;if(!mt.trim()){b(null);return}fe=!0;const st=(M==null?void 0:M.media)||[];b({content:mt,media:st}),Pe&&clearTimeout(Pe),Pe=setTimeout(()=>{fe=!1},300)}},ct=Ge=>{console.log("クリアドラフトメッセージイベント受信"),b(null),c(""),j(""),U([]),Y(!1),he(!1),Vi(),fh()};return window.addEventListener("update-draft-message",Oe),window.addEventListener("clear-draft-message",ct),()=>{Pe&&clearTimeout(Pe),window.removeEventListener("update-draft-message",Oe),window.removeEventListener("clear-draft-message",ct)}},[M]);const X=m.useCallback(async fe=>{var Pe;try{if(!fe)return;console.log("検索キーワード:",fe);const ct=fe.split(/[,\s]+/).map(st=>st.trim()).filter(Boolean).map(st=>/^[A-Z0-9]{2,}-\d+$/.test(st)?"model":/部品|装置|ユニット|モジュール/.test(st)?"component":"");console.log("キーワードタイプ:",...ct),p(!0),console.log("画像検索開始:",fe);const Ge=await Qt("POST","/api/tech-support/image-search",{query:fe,count:10});if(console.log("画像検索APIレスポンス:",Ge.status,Ge.statusText),!Ge.ok){const st=await Ge.text();throw console.error("画像検索APIエラー詳細:",st),new Error(`画像検索に失敗しました: ${Ge.status} ${st}`)}const mt=await Ge.json();console.log("検索結果数:",((Pe=mt.images)==null?void 0:Pe.length)||0),console.log("検索結果詳細:",mt),!mt.images||mt.images.length===0?(console.log(`「${fe}」に関する検索結果はありませんでした`),g([])):g(mt.images.map(st=>({...st,src:st.url||st.file,alt:st.title||st.description||"画像",title:st.title||"",description:st.description||""})))}catch(Oe){console.error("検索エラー詳細:",Oe),A({title:"検索エラー",description:`画像の検索に失敗しました: ${Oe instanceof Error?Oe.message:"Unknown error"}`,variant:"destructive"}),g([])}finally{p(!1)}},[A]),se=m.useCallback(()=>{g([])},[]),pe=m.useCallback(async()=>{try{const fe=new Event("open-camera");return window.dispatchEvent(fe),Promise.resolve()}catch(fe){return console.error("カメラエラー:",fe),A({title:"カメラエラー",description:"カメラを開けませんでした。",variant:"destructive"}),Promise.resolve()}},[A]),Ne=m.useCallback(async(fe,Pe)=>{try{if(console.log("メッセージ送信開始:",fe),!E&&(console.log("チャットIDが無いため初期化します"),!await Z()))throw new Error("チャットの初期化に失敗しました");i(!0),b(null);const Oe=E||1,ct=localStorage.getItem("useOnlyKnowledgeBase")!=="false";console.log("APIリクエスト送信:",{chatId:Oe,content:fe,useOnlyKnowledgeBase:ct});const Ge=await Qt("POST",`/api/chats/${Oe}/messages`,{content:fe,useOnlyKnowledgeBase:ct,usePerplexity:!1});if(console.log("APIレスポンス:",Ge.status,Ge.statusText),!Ge.ok){const pn=await Ge.text();throw console.error("APIエラー詳細:",pn),new Error(`メッセージの送信に失敗しました: ${Ge.status} ${pn}`)}const mt=await Ge.json();console.log("受信データ:",mt);const st=[...D||[],...Pe||[]];n(pn=>[...pn,{...mt.userMessage,timestamp:new Date(mt.userMessage.timestamp),media:st.length>0?st.map((sa,yu)=>({id:Date.now()+yu,messageId:mt.userMessage.id,...sa})):[]},{...mt.aiMessage,timestamp:new Date(mt.aiMessage.timestamp)}]),O([]),c(""),X(fe),console.log("メッセージ送信完了")}catch(Oe){console.error("メッセージ送信エラー詳細:",Oe),A({title:"メッセージ送信エラー",description:`メッセージを送信できませんでした: ${Oe instanceof Error?Oe.message:"Unknown error"}`,variant:"destructive"})}finally{i(!1)}},[E,Z,X,D,A]),Ze=m.useCallback(()=>{try{const fe=(M==null?void 0:M.media)||[];pte(async Pe=>{if(!Pe.trim())return;_e(Date.now()),je&&clearTimeout(je);const Oe=setTimeout(()=>{Date.now()-ue>=Q&&(Vi(),fh(),a(!1),b(null),U([]),Me([]),j(""),c(""))},Q);qe(Oe),Me(ct=>{const Ge=[...ct,Pe];L&&clearTimeout(L);const mt=setTimeout(()=>{const st=Ge.join(" ");Ne(st),Me([])},F);return K(mt),Ge})},Pe=>{console.log("Azure音声認識エラー:",Pe),A({title:"ブラウザAPIに切り替えます",duration:1e3}),Vi(),c(""),j(""),U([]),Me([]),Y(!1),ax(async Oe=>{if(!Oe.trim())return;_e(Date.now()),je&&clearTimeout(je);const ct=setTimeout(()=>{Date.now()-ue>=Q&&(Vi(),fh(),a(!1),b(null),U([]),Me([]),j(""),c(""))},Q);qe(ct),Me(Ge=>{const mt=[...Ge,Oe];L&&clearTimeout(L);const st=setTimeout(()=>{const pn=mt.join(" ");Ne(pn),Me([])},F);return K(st),mt})},Oe=>{A({title:"音声認識エラー",description:Oe,variant:"destructive"}),a(!1)})})}catch(fe){console.error("音声認識開始エラー:",fe),a(!1),A({title:"音声認識エラー",description:"音声認識を開始できませんでした。",variant:"destructive"})}},[M==null?void 0:M.media,ue,je,L,Ne,A]),Ht=m.useCallback(()=>{a(!0),c(""),j(""),U([]),Me([]),Y(!1),_e(Date.now()),Ze()},[Ze]),zr=m.useCallback(()=>{if(a(!1),ht.length>0){const fe=ht.join(" ");Ne(fe)}c(""),j(""),U([]),Me([]),Vi(),fh(),je&&(clearTimeout(je),qe(null)),L&&(clearTimeout(L),K(null))},[je,L,ht,Ne]),gr=m.useCallback(async()=>{try{if(!E)return;S(!0);const fe=await Qt("POST",`/api/chats/${E}/export`);if(!fe.ok)throw new Error("チャット履歴のエクスポートに失敗しました");const Pe=await fe.json();return A({title:"エクスポート完了",description:"チャット履歴が正常にエクスポートされました。"}),w(new Date),x(!1),Pe}catch(fe){return console.error("エクスポートエラー:",fe),A({title:"エクスポートエラー",description:"チャット履歴のエクスポートに失敗しました。",variant:"destructive"}),null}finally{S(!1)}},[E,A]),bt=m.useCallback(async()=>{try{if(!E)return{};const fe=await Qt("GET",`/api/chats/${E}/formatted-export`);if(!fe.ok)throw new Error("フォーマット済みデータの取得に失敗しました");return await fe.json()}catch(fe){return console.error("フォーマット済みデータの取得エラー:",fe),{}}},[E]),ft=m.useCallback(async fe=>{try{if(!E&&!await Z())throw new Error("チャットの初期化に失敗しました");i(!0);const Pe=E||1;localStorage.setItem("currentChatId",String(Pe)),console.log("応急処置ガイド: チャットID",Pe,"にデータを送信します"),console.log("送信データ:",{chatId:Pe,guideData:{...fe,content:fe.content?fe.content.substring(0,100)+"...":null}});try{const Oe=await Qt("POST","/api/emergency-guide/send",{chatId:Pe,guideData:fe});if(!Oe.ok)try{const Ge=await Oe.json();throw new Error(Ge.message||"ガイドの送信に失敗しました")}catch{throw new Error(`ガイドの送信に失敗しました (${Oe.status})`)}const ct=await Oe.json();return console.log("応急処置ガイド: 送信成功",ct),n(Ge=>[...Ge,{...ct.userMessage,timestamp:new Date(ct.userMessage.timestamp)},{...ct.aiMessage,timestamp:new Date(ct.aiMessage.timestamp)}]),fe.title&&X(fe.title),ct}catch(Oe){throw console.error("APIリクエストエラー:",Oe),A({title:"API通信エラー",description:"サーバーとの通信中にエラーが発生しました",variant:"destructive"}),Oe}}catch(Pe){return console.error("緊急ガイド送信エラー:",Pe),A({title:"緊急ガイド送信エラー",description:"応急処置ガイドの送信に失敗しました。ログインしているか確認してください。",variant:"destructive"}),null}finally{i(!1)}},[E,X,A]),Zn=m.useCallback(async()=>{try{if(n([]),g([]),x(!1),w(null),b(null),c(""),j(""),U([]),Y(!1),he(!1),Vi(),fh(),typeof window<"u"){const Pe=new CustomEvent("clear-draft-message");window.dispatchEvent(Pe);const Oe=new CustomEvent("reset-recognition-phrases");window.dispatchEvent(Oe)}const fe=Date.now().toString();localStorage.setItem("chat_cleared_timestamp",fe);try{window.queryClient&&(window.queryClient.removeQueries({queryKey:["/api/chats/1/messages"]}),window.queryClient.setQueryData(["/api/chats/1/messages"],[]))}catch(Pe){console.error("キャッシュクリアエラー:",Pe)}if(E){z(!0);try{const Pe=await Qt("POST",`/api/chats/${E}/clear`);Pe.ok||console.warn(`サーバーでのチャット履歴削除に失敗しました (${Pe.status})`)}catch(Pe){console.error("APIリクエストエラー:",Pe)}finally{z(!1)}}A({title:"チャット履歴を削除しました",description:"全てのメッセージが削除されました。"})}catch(fe){console.error("チャット履歴削除エラー:",fe),A({title:"チャット履歴削除エラー",description:"チャット履歴の削除に失敗しました。ローカルの状態はクリアされました。",variant:"destructive"})}},[E,A]),Xn=m.useCallback(async()=>{if(E)try{const Pe=await(await Qt("GET",`/api/chats/${E}/last-export`)).json();Pe.timestamp&&w(new Date(Pe.timestamp))}catch(fe){console.error("Failed to fetch last export:",fe)}},[E]);m.useEffect(()=>{Xn()},[Xn]),m.useEffect(()=>{if(t.length>0&&v){const fe=t.some(Pe=>new Date(Pe.timestamp)>v);x(fe)}else t.length>0?x(!0):x(!1)},[t,v]);const er={messages:t,isLoading:r,searching:h,searchResults:f,selectedText:l,setSelectedText:u,sendMessage:Ne,startRecording:Ht,stopRecording:zr,isRecording:s,recordedText:o,searchBySelectedText:X,clearSearchResults:se,captureImage:pe,exportChatHistory:gr,exportFormattedData:bt,lastExportTimestamp:v,isExporting:y,hasUnexportedMessages:C,sendEmergencyGuide:ft,draftMessage:M,setDraftMessage:b,clearChatHistory:Zn,isClearing:k};return d.jsx(A$.Provider,{value:er,children:e})};function ji(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function lc(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const I$=6048e5,mte=864e5;let vte={};function rS(){return vte}function Dp(e,t){var o,c,l,u;const n=rS(),r=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(l=n.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??0,i=ji(e),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function qv(e){return Dp(e,{weekStartsOn:1})}function j$(e){const t=ji(e),n=t.getFullYear(),r=lc(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=qv(r),s=lc(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=qv(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function MA(e){const t=ji(e);return t.setHours(0,0,0,0),t}function OA(e){const t=ji(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function gte(e,t){const n=MA(e),r=MA(t),i=+n-OA(n),s=+r-OA(r);return Math.round((i-s)/mte)}function yte(e){const t=j$(e),n=lc(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),qv(n)}function Ste(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function wte(e){if(!Ste(e)&&typeof e!="number")return!1;const t=ji(e);return!isNaN(Number(t))}function Cte(e){const t=ji(e),n=lc(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const xte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},bte=(e,t,n)=>{let r;const i=xte[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ol(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Ete={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Pte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_te={date:ol({formats:Ete,defaultWidth:"full"}),time:ol({formats:Pte,defaultWidth:"full"}),dateTime:ol({formats:Rte,defaultWidth:"full"})},Tte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ate=(e,t,n,r)=>Tte[e];function qi(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=e.formattingValues[o]||e.formattingValues[a]}else{const a=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[o]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const Nte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ite={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},kte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ote={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dte=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Lte={ordinalNumber:Dte,era:qi({values:Nte,defaultWidth:"wide"}),quarter:qi({values:Ite,defaultWidth:"wide",argumentCallback:e=>e-1}),month:qi({values:jte,defaultWidth:"wide"}),day:qi({values:kte,defaultWidth:"wide"}),dayPeriod:qi({values:Mte,defaultWidth:"wide",formattingValues:Ote,defaultFormattingWidth:"wide"})};function Hi(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?Fte(o,h=>h.test(a)):zte(o,h=>h.test(a));let l;l=e.valueCallback?e.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;const u=t.slice(a.length);return{value:l,rest:u}}}function zte(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Fte(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function k$(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const $te=/^(\d+)(th|st|nd|rd)?/i,Bte=/\d+/i,Vte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ute={any:[/^b/i,/^(a|c)/i]},qte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Hte={any:[/1/i,/2/i,/3/i,/4/i]},Wte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Jte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Yte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Zte={ordinalNumber:k$({matchPattern:$te,parsePattern:Bte,valueCallback:e=>parseInt(e,10)}),era:Hi({matchPatterns:Vte,defaultMatchWidth:"wide",parsePatterns:Ute,defaultParseWidth:"any"}),quarter:Hi({matchPatterns:qte,defaultMatchWidth:"wide",parsePatterns:Hte,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Hi({matchPatterns:Wte,defaultMatchWidth:"wide",parsePatterns:Kte,defaultParseWidth:"any"}),day:Hi({matchPatterns:Gte,defaultMatchWidth:"wide",parsePatterns:Qte,defaultParseWidth:"any"}),dayPeriod:Hi({matchPatterns:Jte,defaultMatchWidth:"any",parsePatterns:Yte,defaultParseWidth:"any"})},Xte={code:"en-US",formatDistance:bte,formatLong:_te,formatRelative:Ate,localize:Lte,match:Zte,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ene(e){const t=ji(e);return gte(t,Cte(t))+1}function tne(e){const t=ji(e),n=+qv(t)-+yte(t);return Math.round(n/I$)+1}function M$(e,t){var u,h,p,f;const n=ji(e),r=n.getFullYear(),i=rS(),s=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((f=(p=i.locale)==null?void 0:p.options)==null?void 0:f.firstWeekContainsDate)??1,a=lc(e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Dp(a,t),c=lc(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const l=Dp(c,t);return n.getTime()>=o.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function nne(e,t){var o,c,l,u;const n=rS(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(l=n.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??1,i=M$(e,t),s=lc(e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Dp(s,t)}function rne(e,t){const n=ji(e),r=+Dp(n,t)-+nne(n,t);return Math.round(r/I$)+1}function yt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Qs={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return yt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):yt(n+1,2)},d(e,t){return yt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return yt(e.getHours()%12||12,t.length)},H(e,t){return yt(e.getHours(),t.length)},m(e,t){return yt(e.getMinutes(),t.length)},s(e,t){return yt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return yt(i,t.length)}},Rc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},DA={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Qs.y(e,t)},Y:function(e,t,n,r){const i=M$(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return yt(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):yt(s,t.length)},R:function(e,t){const n=j$(e);return yt(n,t.length)},u:function(e,t){const n=e.getFullYear();return yt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return yt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return yt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Qs.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return yt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=rne(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):yt(i,t.length)},I:function(e,t,n){const r=tne(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):yt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Qs.d(e,t)},D:function(e,t,n){const r=ene(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):yt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return yt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return yt(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return yt(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=Rc.noon:r===0?i=Rc.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=Rc.evening:r>=12?i=Rc.afternoon:r>=4?i=Rc.morning:i=Rc.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Qs.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Qs.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):yt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):yt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Qs.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Qs.s(e,t)},S:function(e,t){return Qs.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return zA(r);case"XXXX":case"XX":return Ra(r);case"XXXXX":case"XXX":default:return Ra(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return zA(r);case"xxxx":case"xx":return Ra(r);case"xxxxx":case"xxx":default:return Ra(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+LA(r,":");case"OOOO":default:return"GMT"+Ra(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+LA(r,":");case"zzzz":default:return"GMT"+Ra(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return yt(r,t.length)},T:function(e,t,n){const r=e.getTime();return yt(r,t.length)}};function LA(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+yt(s,2)}function zA(e,t){return e%60===0?(e>0?"-":"+")+yt(Math.abs(e)/60,2):Ra(e,t)}function Ra(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=yt(Math.trunc(r/60),2),s=yt(r%60,2);return n+i+t+s}const FA=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},O$=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ine=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return FA(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",FA(r,t)).replace("{{time}}",O$(i,t))},sne={p:O$,P:ine},one=/^D+$/,ane=/^Y+$/,cne=["D","DD","YY","YYYY"];function lne(e){return one.test(e)}function une(e){return ane.test(e)}function dne(e,t,n){const r=hne(e,t,n);if(console.warn(r),cne.includes(e))throw new RangeError(r)}function hne(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const pne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mne=/^'([^]*?)'?$/,vne=/''/g,gne=/[a-zA-Z]/;function D$(e,t,n){var u,h,p,f,g,v,w,y;const r=rS(),i=(n==null?void 0:n.locale)??r.locale??Xte,s=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(p=r.locale)==null?void 0:p.options)==null?void 0:f.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((v=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((y=(w=r.locale)==null?void 0:w.options)==null?void 0:y.weekStartsOn)??0,o=ji(e);if(!wte(o))throw new RangeError("Invalid time value");let c=t.match(fne).map(S=>{const C=S[0];if(C==="p"||C==="P"){const x=sne[C];return x(S,i.formatLong)}return S}).join("").match(pne).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const C=S[0];if(C==="'")return{isToken:!1,value:yne(S)};if(DA[C])return{isToken:!0,value:S};if(C.match(gne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const l={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(S=>{if(!S.isToken)return S.value;const C=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&une(C)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&lne(C))&&dne(C,t,String(e));const x=DA[C[0]];return x(o,C,i.localize,l)}).join("")}function yne(e){const t=e.match(mne);return t?t[1].replace(vne,"'"):e}const Sne={lessThanXSeconds:{one:"1秒未満",other:"{{count}}秒未満",oneWithSuffix:"約1秒",otherWithSuffix:"約{{count}}秒"},xSeconds:{one:"1秒",other:"{{count}}秒"},halfAMinute:"30秒",lessThanXMinutes:{one:"1分未満",other:"{{count}}分未満",oneWithSuffix:"約1分",otherWithSuffix:"約{{count}}分"},xMinutes:{one:"1分",other:"{{count}}分"},aboutXHours:{one:"約1時間",other:"約{{count}}時間"},xHours:{one:"1時間",other:"{{count}}時間"},xDays:{one:"1日",other:"{{count}}日"},aboutXWeeks:{one:"約1週間",other:"約{{count}}週間"},xWeeks:{one:"1週間",other:"{{count}}週間"},aboutXMonths:{one:"約1か月",other:"約{{count}}か月"},xMonths:{one:"1か月",other:"{{count}}か月"},aboutXYears:{one:"約1年",other:"約{{count}}年"},xYears:{one:"1年",other:"{{count}}年"},overXYears:{one:"1年以上",other:"{{count}}年以上"},almostXYears:{one:"1年近く",other:"{{count}}年近く"}},wne=(e,t,n)=>{n=n||{};let r;const i=Sne[e];return typeof i=="string"?r=i:t===1?n.addSuffix&&i.oneWithSuffix?r=i.oneWithSuffix:r=i.one:n.addSuffix&&i.otherWithSuffix?r=i.otherWithSuffix.replace("{{count}}",String(t)):r=i.other.replace("{{count}}",String(t)),n.addSuffix?n.comparison&&n.comparison>0?r+"後":r+"前":r},Cne={full:"y年M月d日EEEE",long:"y年M月d日",medium:"y/MM/dd",short:"y/MM/dd"},xne={full:"H時mm分ss秒 zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},bne={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Ene={date:ol({formats:Cne,defaultWidth:"full"}),time:ol({formats:xne,defaultWidth:"full"}),dateTime:ol({formats:bne,defaultWidth:"full"})},Pne={lastWeek:"先週のeeeeのp",yesterday:"昨日のp",today:"今日のp",tomorrow:"明日のp",nextWeek:"翌週のeeeeのp",other:"P"},Rne=(e,t,n,r)=>Pne[e],_ne={narrow:["BC","AC"],abbreviated:["紀元前","西暦"],wide:["紀元前","西暦"]},Tne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["第1四半期","第2四半期","第3四半期","第4四半期"]},Ane={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},Nne={narrow:["日","月","火","水","木","金","土"],short:["日","月","火","水","木","金","土"],abbreviated:["日","月","火","水","木","金","土"],wide:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},Ine={narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},jne={narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},kne=(e,t)=>{const n=Number(e);switch(String(t==null?void 0:t.unit)){case"year":return`${n}年`;case"quarter":return`第${n}四半期`;case"month":return`${n}月`;case"week":return`第${n}週`;case"date":return`${n}日`;case"hour":return`${n}時`;case"minute":return`${n}分`;case"second":return`${n}秒`;default:return`${n}`}},Mne={ordinalNumber:kne,era:qi({values:_ne,defaultWidth:"wide"}),quarter:qi({values:Tne,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:qi({values:Ane,defaultWidth:"wide"}),day:qi({values:Nne,defaultWidth:"wide"}),dayPeriod:qi({values:Ine,defaultWidth:"wide",formattingValues:jne,defaultFormattingWidth:"wide"})},One=/^第?\d+(年|四半期|月|週|日|時|分|秒)?/i,Dne=/\d+/i,Lne={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^(紀元[前後]|西暦)/i,wide:/^(紀元[前後]|西暦)/i},zne={narrow:[/^B/i,/^A/i],any:[/^(紀元前)/i,/^(西暦|紀元後)/i]},Fne={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^第[1234一二三四１２３４]四半期/i},$ne={any:[/(1|一|１)/i,/(2|二|２)/i,/(3|三|３)/i,/(4|四|４)/i]},Bne={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])月/i,wide:/^([123456789]|1[012])月/i},Vne={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},Une={narrow:/^[日月火水木金土]/,short:/^[日月火水木金土]/,abbreviated:/^[日月火水木金土]/,wide:/^[日月火水木金土]曜日/},qne={any:[/^日/,/^月/,/^火/,/^水/,/^木/,/^金/,/^土/]},Hne={any:/^(AM|PM|午前|午後|正午|深夜|真夜中|夜|朝)/i},Wne={any:{am:/^(A|午前)/i,pm:/^(P|午後)/i,midnight:/^深夜|真夜中/i,noon:/^正午/i,morning:/^朝/i,afternoon:/^午後/i,evening:/^夜/i,night:/^深夜/i}},Kne={ordinalNumber:k$({matchPattern:One,parsePattern:Dne,valueCallback:function(e){return parseInt(e,10)}}),era:Hi({matchPatterns:Lne,defaultMatchWidth:"wide",parsePatterns:zne,defaultParseWidth:"any"}),quarter:Hi({matchPatterns:Fne,defaultMatchWidth:"wide",parsePatterns:$ne,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Hi({matchPatterns:Bne,defaultMatchWidth:"wide",parsePatterns:Vne,defaultParseWidth:"any"}),day:Hi({matchPatterns:Une,defaultMatchWidth:"wide",parsePatterns:qne,defaultParseWidth:"any"}),dayPeriod:Hi({matchPatterns:Hne,defaultMatchWidth:"any",parsePatterns:Wne,defaultParseWidth:"any"})},Gne={code:"ja",formatDistance:wne,formatLong:Ene,formatRelative:Rne,localize:Mne,match:Kne,options:{weekStartsOn:0,firstWeekContainsDate:1}},Qne=(e,t={})=>new Promise((n,r)=>{if(!("speechSynthesis"in window)){r(new Error("このブラウザは音声合成をサポートしていません"));return}const i=new SpeechSynthesisUtterance(e);i.rate=t.rate||1,i.pitch=t.pitch||1,i.volume=t.volume||1,i.lang=t.lang||"ja-JP",i.onend=()=>{n()},i.onerror=s=>{r(new Error(`音声合成エラー: ${s.error}`))},window.speechSynthesis.cancel(),window.speechSynthesis.speak(i)}),Jne=()=>{"speechSynthesis"in window&&window.speechSynthesis.cancel()};function $A({message:e,isDraft:t=!1}){const{user:n}=Lr(),{setSelectedText:r}=uu(),[i,s]=m.useState(""),[a,o]=m.useState(!1),[c,l]=m.useState(!1),{toast:u}=ln(),h=!e.isAiResponse,p=D$(new Date(e.timestamp),"HH:mm",{locale:Gne}),f=()=>{const y=window.getSelection();if(y&&y.toString().trim().length>0){const S=y.toString().trim();s(S),o(!0)}else s(""),o(!1)},g=()=>{i&&(r(i),u({title:"テキストをコピーしました",description:"選択したテキストが入力欄にコピーされました。"}),o(!1))},v=async()=>{if(c)Jne(),l(!1),u({title:"音声読み上げを停止しました",duration:2e3});else if(!h&&e.content){l(!0),u({title:"音声読み上げを開始します",duration:2e3});try{await Qne(e.content,{rate:1,pitch:1,lang:"ja-JP"})}catch(y){u({title:"音声読み上げエラー",description:y instanceof Error?y.message:"音声の読み上げに失敗しました",variant:"destructive"})}finally{l(!1)}}},w=y=>{var C;const S=((C=e.media)==null?void 0:C.map(x=>x.url))||[];window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:y,all_slides:S.length>1?S:void 0,title:"応急処置ガイド",content:e.content}}))};return d.jsxs("div",{className:`flex items-end mb-4 ${h?"":"flex-row-reverse"} min-w-[250px] ${t?"draft-message animate-pulse":""}`,onMouseUp:f,children:[d.jsxs("div",{className:`mx-2 flex flex-col ${h?"items-start":"items-end"} max-w-[70%] min-w-[230px]`,children:[d.jsx("div",{className:"flex items-center gap-2 mb-1",children:!h&&d.jsx("button",{onClick:v,className:`w-8 h-8 flex items-center justify-center rounded-full shadow-sm 
                ${c?"bg-indigo-600 text-white animate-pulse":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,title:c?"音声読み上げを停止":"音声読み上げ",children:d.jsx(PL,{size:16})})}),d.jsxs("div",{className:`px-4 py-3 mb-1 shadow-sm w-full ${h?`chat-bubble-user bg-blue-50 rounded-[18px_18px_4px_18px] border ${t?"border-blue-400 border-dashed":"border-blue-200 border-solid"}`:"chat-bubble-ai bg-white rounded-[18px_18px_18px_4px] border border-blue-200 border-solid"}`,children:[d.jsxs("div",{className:"relative",children:[d.jsx("p",{className:`${h?"text-black":"text-blue-600"}`,children:e.content}),a&&d.jsx("button",{onClick:g,className:"absolute -top-2 -right-2 bg-blue-600 text-white p-1.5 rounded-full shadow-md hover:bg-blue-700 transition-colors",title:"入力欄にコピー",children:d.jsx(gL,{size:14})})]}),e.media&&e.media.length>0&&d.jsx("div",{className:"mt-3",children:e.media.map((y,S)=>d.jsxs("div",{className:"mt-2",children:[y.type==="image"&&d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:y.url.startsWith("data:")?y.url:`/knowledge-base/images/${y.url}`,alt:"添付画像",className:"rounded-lg w-full max-w-xs cursor-pointer border border-blue-200 shadow-md",onClick:()=>w(y.url),onError:C=>{console.error("画像読み込みエラー:",y.url);const x=C.target;x.src.includes("/placeholder-image.png")||(x.src="/placeholder-image.png")}}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",onClick:()=>w(y.url),children:d.jsx("div",{className:"bg-blue-600 bg-opacity-70 p-2 rounded-full",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})})]}),y.type==="video"&&d.jsxs("div",{className:"relative",children:[d.jsx("video",{src:y.url,controls:!0,className:"rounded-lg w-full max-w-xs border border-blue-200 shadow-md",onClick:C=>{C.stopPropagation()}}),d.jsx("div",{className:"absolute top-2 right-2 flex items-center justify-center opacity-50 hover:opacity-100 transition-opacity",onClick:()=>w(y.url),children:d.jsx("div",{className:"bg-blue-600 bg-opacity-70 p-2 rounded-full",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]})]},S))})]}),d.jsx("span",{className:"text-xs text-blue-400",children:p})]}),d.jsx("div",{children:d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${h?"bg-blue-500":"bg-indigo-600"}`,children:d.jsx("span",{className:"material-icons text-white text-sm ",children:h?"person":"smart_toy"})})})]})}const Pr=m.forwardRef(({className:e,...t},n)=>d.jsx("textarea",{className:ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Pr.displayName="Textarea";const nw=768;function VE(){const[e,t]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${nw-1}px)`),r=()=>{t(window.innerWidth<nw)};return n.addEventListener("change",r),t(window.innerWidth<nw),()=>n.removeEventListener("change",r)},[]),{isMobile:!!e}}function Yne(){const[e,t]=m.useState(""),{sendMessage:n,isLoading:r,recordedText:i,selectedText:s,searchBySelectedText:a,startRecording:o,stopRecording:c,isRecording:l,draftMessage:u,setDraftMessage:h}=uu(),p=E=>{h&&!l?(console.log("手動入力からドラフトメッセージを更新:",E),h({content:E,media:(u==null?void 0:u.media)||[]})):l&&console.log("録音中のため手動ドラフト更新をスキップ:",E)},f=VE(),g=m.useRef(null),v=m.useRef(null);m.useEffect(()=>{s&&(t(s),f&&v.current?v.current.focus():g.current&&g.current.focus())},[s,f]),m.useEffect(()=>{l&&i&&i.trim()&&(console.log("関数から直接ドラフトメッセージを設定:",i),p(i),l&&console.log("録音中のテキストをチャット側のみに表示:",i))},[i,l,u,h,p]);const w=E=>{t(E.target.value)},y=async E=>{E.preventDefault();const P=e.trim()||i.trim();if(!(!P||r)){console.log("送信するテキスト:",P),await n(P);try{if(await a(P),f){const T=document.getElementById("mobile-search-slider");T&&(T.classList.add("search-panel-visible"),(window.matchMedia("(orientation: landscape)").matches?"landscape":"portrait")==="landscape"?T.style.transform="translateX(0)":T.style.transform="translateY(0)")}}catch(T){console.error("自動画像検索エラー:",T)}t(""),f&&v.current?(v.current.focus(),setTimeout(()=>{var T;(T=v.current)==null||T.blur()},100)):g.current&&g.current.focus()}},S=()=>{window.dispatchEvent(new CustomEvent("open-camera"))},C=async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(P=>P.stop()),l?(console.log("録音停止"),c(),i.trim()&&(console.log("録音停止：ドラフトメッセージを設定:",i.trim()),p(i.trim()))):(console.log("録音開始"),o())}catch(E){console.error("マイクアクセスエラー:",E),E instanceof DOMException&&E.name==="NotAllowedError"?alert("マイクの使用が許可されていません。ブラウザの設定でマイクの使用を許可してください。"):alert("マイクの初期化中にエラーが発生しました。")}},x=()=>{t(""),f&&v.current?v.current.focus():g.current&&g.current.focus()};return d.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-t border-blue-200 p-2 message-input-container",children:d.jsxs("form",{onSubmit:y,className:"flex items-center",children:[d.jsxs("div",{className:"md:hidden flex flex-col items-center mr-2",children:[d.jsx("span",{className:"text-xs font-medium text-orange-700 mb-0.5",children:"マイク"}),d.jsx(ee,{type:"button",onClick:C,size:"icon",variant:l?"default":"ghost",className:`p-2 h-10 w-10 rounded-full ${l?"bg-gradient-to-r from-red-500 to-pink-500":"bg-gradient-to-r from-amber-100 to-orange-100 hover:from-amber-200 hover:to-orange-200 border border-orange-300"}`,children:d.jsx(jR,{className:`h-5 w-5 ${l?"text-white":"text-orange-600"}`})})]}),d.jsxs("div",{className:"hidden md:flex md:flex-col md:items-center md:mr-2",children:[d.jsx("span",{className:"text-xs font-medium text-orange-700 mb-0.5",children:"マイク"}),d.jsx(ee,{type:"button",onClick:C,size:"icon",variant:l?"default":"ghost",className:`p-2 h-10 w-10 rounded-full ${l?"bg-gradient-to-r from-red-500 to-pink-500":"bg-gradient-to-r from-amber-100 to-orange-100 hover:from-amber-200 hover:to-orange-200 border border-orange-300"}`,children:d.jsx(jR,{className:`h-5 w-5 ${l?"text-white":"text-orange-600"}`})})]}),d.jsxs("div",{className:"flex-1 flex items-center bg-white border border-blue-200 rounded-full px-3 py-1 shadow-inner",children:[f?d.jsxs("div",{className:"flex-1 relative h-[32px]",children:[" ",d.jsx(Pr,{ref:v,className:"absolute inset-0 bg-transparent border-none focus-visible:ring-0 focus-visible:ring-offset-0 resize-none py-1 overflow-y-auto text-sm",placeholder:l?"話しかけてください...":"メッセージを入力...",value:e,onChange:w,disabled:r,rows:1,style:{lineHeight:"1.2"},onKeyDown:E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),y(E))}}),e.trim()&&d.jsx("button",{type:"button",onClick:x,className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d.jsx(_r,{size:16})})]}):d.jsxs("div",{className:"flex-1 h-[32px] flex items-center relative",children:[" ",d.jsx(at,{ref:g,type:"text",className:"w-full h-full bg-transparent border-none focus-visible:ring-0 focus-visible:ring-offset-0 text-sm",placeholder:l?"話しかけてください...":"メッセージを入力...",value:e,onChange:w,disabled:r}),e.trim()&&d.jsx("button",{type:"button",onClick:x,className:"absolute right-1 text-gray-400 hover:text-gray-600",children:d.jsx(_r,{size:16})})]}),d.jsx(ee,{type:"submit",disabled:r||!e.trim()&&!i.trim(),size:"icon",variant:"ghost",className:"ml-1 p-1 min-w-[28px] min-h-[28px] h-7 w-7 bg-gradient-to-r from-sky-100 to-blue-100 hover:from-sky-200 hover:to-blue-200 rounded-full border border-blue-300",children:d.jsx(SL,{className:"h-4 w-4 text-blue-600"})})]}),d.jsxs("div",{className:"md:hidden flex flex-col items-center ml-2",children:[d.jsx("span",{className:"text-xs font-medium text-indigo-700 mb-0.5",children:"カメラ"}),d.jsx(ee,{type:"button",onClick:S,size:"icon",variant:"ghost",className:"p-2 h-10 w-10 rounded-full bg-gradient-to-r from-indigo-100 to-cyan-100 hover:from-indigo-200 hover:to-cyan-200 border border-indigo-300",children:d.jsx(_R,{className:"h-5 w-5 text-indigo-600"})})]}),d.jsxs("div",{className:"hidden md:flex md:flex-col md:items-center md:ml-2",children:[d.jsx("span",{className:"text-xs font-medium text-indigo-700 mb-0.5",children:"カメラ"}),d.jsx(ee,{type:"button",onClick:S,size:"icon",variant:"ghost",className:"p-2 h-10 w-10 rounded-full bg-gradient-to-r from-indigo-100 to-cyan-100 hover:from-indigo-200 hover:to-cyan-200 border border-indigo-300",children:d.jsx(_R,{className:"h-5 w-5 text-indigo-600"})})]})]})})}function Zne({text:e,onSearch:t}){const[n,r]=m.useState({top:0,left:0}),[i,s]=m.useState(!1),a=m.useRef(null),{toast:o}=ln();m.useEffect(()=>{if(e){const h=window.getSelection();if(h&&h.rangeCount>0){const f=h.getRangeAt(0).getBoundingClientRect();r({top:f.top-40,left:f.left}),s(!0)}}else s(!1)},[e]),m.useEffect(()=>{const h=p=>{a.current&&!a.current.contains(p.target)&&s(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const c=async()=>{await t(e),s(!1)},l=()=>{window.dispatchEvent(new CustomEvent("ask-chatgpt",{detail:{text:e}})),s(!1)},u=()=>{navigator.clipboard.writeText(e),o({title:"コピー完了",description:"テキストがクリップボードにコピーされました",duration:2e3}),s(!1)};return i?d.jsx("div",{ref:a,className:"fixed bg-white shadow-lg rounded-lg border border-neutral-200 p-2 z-10",style:{top:`${n.top}px`,left:`${n.left}px`},children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(ee,{variant:"ghost",size:"icon",className:"p-1 hover:bg-neutral-100 rounded mr-1",title:"画像検索",onClick:c,children:d.jsx(q7,{className:"h-5 w-5 text-primary"})}),d.jsx(ee,{variant:"ghost",size:"icon",className:"p-1 hover:bg-neutral-100 rounded mr-1",title:"AIに質問",onClick:l,children:d.jsx(v7,{className:"h-5 w-5 text-primary"})}),d.jsx(ee,{variant:"ghost",size:"icon",className:"p-1 hover:bg-neutral-100 rounded",title:"コピー",onClick:u,children:d.jsx(gL,{className:"h-5 w-5 text-primary"})})]})}):null}function UE(){const[e,t]=m.useState(window.innerWidth>window.innerHeight?"landscape":"portrait");return m.useEffect(()=>{const n=()=>{t(window.innerWidth>window.innerHeight?"landscape":"portrait")};return window.addEventListener("resize",n),window.addEventListener("orientationchange",n),n(),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),e}function zs(e){return Array.isArray?Array.isArray(e):F$(e)==="[object Array]"}function Xne(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function ere(e){return e==null?"":Xne(e)}function Qi(e){return typeof e=="string"}function L$(e){return typeof e=="number"}function tre(e){return e===!0||e===!1||nre(e)&&F$(e)=="[object Boolean]"}function z$(e){return typeof e=="object"}function nre(e){return z$(e)&&e!==null}function br(e){return e!=null}function rw(e){return!e.trim().length}function F$(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const rre="Incorrect 'index' type",ire=e=>`Invalid value for key ${e}`,sre=e=>`Pattern length exceeds max of ${e}.`,ore=e=>`Missing ${e} property in key`,are=e=>`Property 'weight' in key '${e}' must be a positive integer`,BA=Object.prototype.hasOwnProperty;class cre{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=$$(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function $$(e){let t=null,n=null,r=null,i=1,s=null;if(Qi(e)||zs(e))r=e,t=VA(e),n=cx(e);else{if(!BA.call(e,"name"))throw new Error(ore("name"));const a=e.name;if(r=a,BA.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(are(a));t=VA(a),n=cx(a),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function VA(e){return zs(e)?e:e.split(".")}function cx(e){return zs(e)?e.join("."):e}function lre(e,t){let n=[],r=!1;const i=(s,a,o)=>{if(br(s))if(!a[o])n.push(s);else{let c=a[o];const l=s[c];if(!br(l))return;if(o===a.length-1&&(Qi(l)||L$(l)||tre(l)))n.push(ere(l));else if(zs(l)){r=!0;for(let u=0,h=l.length;u<h;u+=1)i(l[u],a,o+1)}else a.length&&i(l,a,o+1)}};return i(e,Qi(t)?t.split("."):t,0),r?n:n[0]}const ure={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},dre={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},hre={location:0,threshold:.6,distance:100},pre={useExtendedSearch:!1,getFn:lre,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ze={...dre,...ure,...hre,...pre};const fre=/[^ ]+/g;function mre(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(fre).length;if(n.has(s))return n.get(s);const a=1/Math.pow(s,.5*e),o=parseFloat(Math.round(a*r)/r);return n.set(s,o),o},clear(){n.clear()}}}class qE{constructor({getFn:t=ze.getFn,fieldNormWeight:n=ze.fieldNormWeight}={}){this.norm=mre(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Qi(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Qi(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!br(t)||rw(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let a=i.getFn?i.getFn(t):this.getFn(t,i.path);if(br(a)){if(zs(a)){let o=[];const c=[{nestedArrIndex:-1,value:a}];for(;c.length;){const{nestedArrIndex:l,value:u}=c.pop();if(br(u))if(Qi(u)&&!rw(u)){let h={v:u,i:l,n:this.norm.get(u)};o.push(h)}else zs(u)&&u.forEach((h,p)=>{c.push({nestedArrIndex:p,value:h})})}r.$[s]=o}else if(Qi(a)&&!rw(a)){let o={v:a,n:this.norm.get(a)};r.$[s]=o}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function B$(e,t,{getFn:n=ze.getFn,fieldNormWeight:r=ze.fieldNormWeight}={}){const i=new qE({getFn:n,fieldNormWeight:r});return i.setKeys(e.map($$)),i.setSources(t),i.create(),i}function vre(e,{getFn:t=ze.getFn,fieldNormWeight:n=ze.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new qE({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function om(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=ze.distance,ignoreLocation:s=ze.ignoreLocation}={}){const a=t/e.length;if(s)return a;const o=Math.abs(r-n);return i?a+o/i:o?1:a}function gre(e=[],t=ze.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let a=e.length;s<a;s+=1){let o=e[s];o&&r===-1?r=s:!o&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const Ta=32;function yre(e,t,n,{location:r=ze.location,distance:i=ze.distance,threshold:s=ze.threshold,findAllMatches:a=ze.findAllMatches,minMatchCharLength:o=ze.minMatchCharLength,includeMatches:c=ze.includeMatches,ignoreLocation:l=ze.ignoreLocation}={}){if(t.length>Ta)throw new Error(sre(Ta));const u=t.length,h=e.length,p=Math.max(0,Math.min(r,h));let f=s,g=p;const v=o>1||c,w=v?Array(h):[];let y;for(;(y=e.indexOf(t,g))>-1;){let T=om(t,{currentLocation:y,expectedLocation:p,distance:i,ignoreLocation:l});if(f=Math.min(T,f),g=y+u,v){let _=0;for(;_<u;)w[y+_]=1,_+=1}}g=-1;let S=[],C=1,x=u+h;const E=1<<u-1;for(let T=0;T<u;T+=1){let _=0,k=x;for(;_<k;)om(t,{errors:T,currentLocation:p+k,expectedLocation:p,distance:i,ignoreLocation:l})<=f?_=k:x=k,k=Math.floor((x-_)/2+_);x=k;let z=Math.max(1,p-k+1),D=a?h:Math.min(p+k,h)+u,O=Array(D+2);O[D+1]=(1<<T)-1;for(let b=D;b>=z;b-=1){let A=b-1,N=n[e.charAt(A)];if(v&&(w[A]=+!!N),O[b]=(O[b+1]<<1|1)&N,T&&(O[b]|=(S[b+1]|S[b])<<1|1|S[b+1]),O[b]&E&&(C=om(t,{errors:T,currentLocation:A,expectedLocation:p,distance:i,ignoreLocation:l}),C<=f)){if(f=C,g=A,g<=p)break;z=Math.max(1,2*p-g)}}if(om(t,{errors:T+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:l})>f)break;S=O}const P={isMatch:g>=0,score:Math.max(.001,C)};if(v){const T=gre(w,o);T.length?c&&(P.indices=T):P.isMatch=!1}return P}function Sre(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const Hv=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class V${constructor(t,{location:n=ze.location,threshold:r=ze.threshold,distance:i=ze.distance,includeMatches:s=ze.includeMatches,findAllMatches:a=ze.findAllMatches,minMatchCharLength:o=ze.minMatchCharLength,isCaseSensitive:c=ze.isCaseSensitive,ignoreDiacritics:l=ze.ignoreDiacritics,ignoreLocation:u=ze.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:l,ignoreLocation:u},t=c?t:t.toLowerCase(),t=l?Hv(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const h=(f,g)=>{this.chunks.push({pattern:f,alphabet:Sre(f),startIndex:g})},p=this.pattern.length;if(p>Ta){let f=0;const g=p%Ta,v=p-g;for(;f<v;)h(this.pattern.substr(f,Ta),f),f+=Ta;if(g){const w=p-Ta;h(this.pattern.substr(w),w)}}else h(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?Hv(t):t,this.pattern===t){let v={isMatch:!0,score:0};return i&&(v.indices=[[0,t.length-1]]),v}const{location:s,distance:a,threshold:o,findAllMatches:c,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],p=0,f=!1;this.chunks.forEach(({pattern:v,alphabet:w,startIndex:y})=>{const{isMatch:S,score:C,indices:x}=yre(t,v,w,{location:s+y,distance:a,threshold:o,findAllMatches:c,minMatchCharLength:l,includeMatches:i,ignoreLocation:u});S&&(f=!0),p+=C,S&&x&&(h=[...h,...x])});let g={isMatch:f,score:f?p/this.chunks.length:1};return f&&i&&(g.indices=h),g}}class na{constructor(t){this.pattern=t}static isMultiMatch(t){return UA(t,this.multiRegex)}static isSingleMatch(t){return UA(t,this.singleRegex)}search(){}}function UA(e,t){const n=e.match(t);return n?n[1]:null}class wre extends na{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Cre extends na{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class xre extends na{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class bre extends na{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Ere extends na{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Pre extends na{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class U$ extends na{constructor(t,{location:n=ze.location,threshold:r=ze.threshold,distance:i=ze.distance,includeMatches:s=ze.includeMatches,findAllMatches:a=ze.findAllMatches,minMatchCharLength:o=ze.minMatchCharLength,isCaseSensitive:c=ze.isCaseSensitive,ignoreDiacritics:l=ze.ignoreDiacritics,ignoreLocation:u=ze.ignoreLocation}={}){super(t),this._bitapSearch=new V$(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class q$ extends na{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const lx=[wre,q$,xre,bre,Pre,Ere,Cre,U$],qA=lx.length,Rre=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,_re="|";function Tre(e,t={}){return e.split(_re).map(n=>{let r=n.trim().split(Rre).filter(s=>s&&!!s.trim()),i=[];for(let s=0,a=r.length;s<a;s+=1){const o=r[s];let c=!1,l=-1;for(;!c&&++l<qA;){const u=lx[l];let h=u.isMultiMatch(o);h&&(i.push(new u(h,t)),c=!0)}if(!c)for(l=-1;++l<qA;){const u=lx[l];let h=u.isSingleMatch(o);if(h){i.push(new u(h,t));break}}}return i})}const Are=new Set([U$.type,q$.type]);class Nre{constructor(t,{isCaseSensitive:n=ze.isCaseSensitive,ignoreDiacritics:r=ze.ignoreDiacritics,includeMatches:i=ze.includeMatches,minMatchCharLength:s=ze.minMatchCharLength,ignoreLocation:a=ze.ignoreLocation,findAllMatches:o=ze.findAllMatches,location:c=ze.location,threshold:l=ze.threshold,distance:u=ze.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:o,ignoreLocation:a,location:c,threshold:l,distance:u},t=n?t:t.toLowerCase(),t=r?Hv(t):t,this.pattern=t,this.query=Tre(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?Hv(t):t;let a=0,o=[],c=0;for(let l=0,u=n.length;l<u;l+=1){const h=n[l];o.length=0,a=0;for(let p=0,f=h.length;p<f;p+=1){const g=h[p],{isMatch:v,indices:w,score:y}=g.search(t);if(v){if(a+=1,c+=y,r){const S=g.constructor.type;Are.has(S)?o=[...o,...w]:o.push(w)}}else{c=0,a=0,o.length=0;break}}if(a){let p={isMatch:!0,score:c/a};return r&&(p.indices=o),p}}return{isMatch:!1,score:1}}}const ux=[];function Ire(...e){ux.push(...e)}function dx(e,t){for(let n=0,r=ux.length;n<r;n+=1){let i=ux[n];if(i.condition(e,t))return new i(e,t)}return new V$(e,t)}const Wv={AND:"$and",OR:"$or"},hx={PATH:"$path",PATTERN:"$val"},px=e=>!!(e[Wv.AND]||e[Wv.OR]),jre=e=>!!e[hx.PATH],kre=e=>!zs(e)&&z$(e)&&!px(e),HA=e=>({[Wv.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function H$(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const a=jre(i);if(!a&&s.length>1&&!px(i))return r(HA(i));if(kre(i)){const c=a?i[hx.PATH]:s[0],l=a?i[hx.PATTERN]:i[c];if(!Qi(l))throw new Error(ire(c));const u={keyId:cx(c),pattern:l};return n&&(u.searcher=dx(l,t)),u}let o={children:[],operator:s[0]};return s.forEach(c=>{const l=i[c];zs(l)&&l.forEach(u=>{o.children.push(r(u))})}),o};return px(e)||(e=HA(e)),r(e)}function Mre(e,{ignoreFieldNorm:t=ze.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:a})=>{const o=i?i.weight:null;r*=Math.pow(a===0&&o?Number.EPSILON:a,(o||1)*(t?1:s))}),n.score=r})}function Ore(e,t){const n=e.matches;t.matches=[],br(n)&&n.forEach(r=>{if(!br(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let a={indices:i,value:s};r.key&&(a.key=r.key.src),r.idx>-1&&(a.refIndex=r.idx),t.matches.push(a)})}function Dre(e,t){t.score=e.score}function Lre(e,t,{includeMatches:n=ze.includeMatches,includeScore:r=ze.includeScore}={}){const i=[];return n&&i.push(Ore),r&&i.push(Dre),e.map(s=>{const{idx:a}=s,o={item:t[a],refIndex:a};return i.length&&i.forEach(c=>{c(s,o)}),o})}class du{constructor(t,n={},r){this.options={...ze,...n},this.options.useExtendedSearch,this._keyStore=new cre(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof qE))throw new Error(rre);this._myIndex=n||B$(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){br(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:a,ignoreFieldNorm:o}=this.options;let c=Qi(t)?Qi(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Mre(c,{ignoreFieldNorm:o}),s&&c.sort(a),L$(n)&&n>-1&&(c=c.slice(0,n)),Lre(c,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=dx(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:a,n:o})=>{if(!br(s))return;const{isMatch:c,score:l,indices:u}=n.searchIn(s);c&&i.push({item:s,idx:a,matches:[{score:l,value:s,norm:o,indices:u}]})}),i}_searchLogical(t){const n=H$(t,this.options),r=(o,c,l)=>{if(!o.children){const{keyId:h,searcher:p}=o,f=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(c,h),searcher:p});return f&&f.length?[{idx:l,item:c,matches:f}]:[]}const u=[];for(let h=0,p=o.children.length;h<p;h+=1){const f=o.children[h],g=r(f,c,l);if(g.length)u.push(...g);else if(o.operator===Wv.AND)return[]}return u},i=this._myIndex.records,s={},a=[];return i.forEach(({$:o,i:c})=>{if(br(o)){let l=r(n,o,c);l.length&&(s[c]||(s[c]={idx:c,item:o,matches:[]},a.push(s[c])),l.forEach(({matches:u})=>{s[c].matches.push(...u)}))}}),a}_searchObjectList(t){const n=dx(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:a,i:o})=>{if(!br(a))return;let c=[];r.forEach((l,u)=>{c.push(...this._findMatches({key:l,value:a[u],searcher:n}))}),c.length&&s.push({idx:o,item:a,matches:c})}),s}_findMatches({key:t,value:n,searcher:r}){if(!br(n))return[];let i=[];if(zs(n))n.forEach(({v:s,i:a,n:o})=>{if(!br(s))return;const{isMatch:c,score:l,indices:u}=r.searchIn(s);c&&i.push({score:l,key:t,value:s,idx:a,norm:o,indices:u})});else{const{v:s,n:a}=n,{isMatch:o,score:c,indices:l}=r.searchIn(s);o&&i.push({score:c,key:t,value:s,norm:a,indices:l})}return i}}du.version="7.1.0";du.createIndex=B$;du.parseIndex=vre;du.config=ze;du.parseQuery=H$;Ire(Nre);let Li=[];async function iS(){try{const e=new Date().getTime(),t=await fetch(`/api/tech-support/list-json-files?t=${e}`);let n="mc_1744105287766_metadata.json";if(t.ok){const i=await t.json();Array.isArray(i)&&i.length>0&&(n=i[0],console.log(`最新のメタデータファイルを使用します: ${n}`))}let r;try{const i=await fetch(`/knowledge-base/json/${n}?t=${e}`);if(!i.ok)return console.warn(`メタデータファイルが見つかりません: ${n}`),[];r=await i.json()}catch(i){return console.warn("メタデータJSONの読み込みに失敗しました:",i),[]}if(Li=[],r&&r.slides&&Array.isArray(r.slides)){console.log(`メタデータJSONを読み込みました: ${r.slides.length}件のスライド`);let i=0,s=0,a=0;const o=r.slides.map(c=>{!c.スライド番号&&c.スライド番号!==0&&(console.warn("スライド番号が欠落しているスライドがあります"),c.スライド番号=`unknown_${Date.now()}_${Math.floor(Math.random()*1e3)}`);let l="";if(c.画像テキスト&&Array.isArray(c.画像テキスト)&&c.画像テキスト.length>0){const f=c.画像テキスト[0];f&&typeof f=="object"&&"画像パス"in f&&(l=f.画像パス||"")}if(l||(s++,console.warn(`スライド ${c.スライド番号} に有効な画像パスがありません`)),l){const f=l.split("/").pop();f&&(l=`/knowledge-base/images/${f}`)}l&&!l.toLowerCase().endsWith(".png")&&(l=`${l.substring(0,l.lastIndexOf(".")!==-1?l.lastIndexOf("."):l.length)}.png`);const u=c.タイトル||`スライド ${c.スライド番号}`;c.タイトル||a++;const h=[];u&&typeof u=="string"&&u.trim()!==""&&h.push(u.trim()),c.本文&&Array.isArray(c.本文)&&c.本文.forEach(f=>{f&&typeof f=="string"&&f.trim()!==""&&h.push(f.trim())});const p=[u,...c.本文||[],"保守用車マニュアル"].filter(Boolean);return i++,{id:`slide_${c.スライド番号}`,file:l,title:u,category:"保守用車マニュアル",keywords:h,description:"",details:"",searchText:p.join(" ")}});if(console.log(`スライド処理結果: 有効=${i}, 無効なパス=${s}, タイトル欠落=${a}`),o.filter(c=>{const l=c.file&&typeof c.file=="string"&&c.file.length>0,u=c.title&&typeof c.title=="string",h=Array.isArray(c.keywords)&&c.keywords.length>0;return l&&u&&h}).forEach(c=>Li.push(c)),r.embeddedImages&&Array.isArray(r.embeddedImages)){console.log(`${r.embeddedImages.length}件の埋め込み画像を処理します`);let c=0,l=0;const u=r.embeddedImages.filter(h=>{const p=h&&typeof h=="object"&&"抽出パス"in h&&h.抽出パス&&typeof h.抽出パス=="string";return p||l++,p}).map((h,p)=>{let f=h.抽出パス;if(f){const C=f.split("/").pop();C&&(f=`/knowledge-base/images/${C}`)}f.toLowerCase().endsWith(".png")||(f=`${f.substring(0,f.lastIndexOf(".")!==-1?f.lastIndexOf("."):f.length)}.png`);let g=`部品画像 ${p+1}`,v="部品写真",w=[];if(h.元のファイル名&&typeof h.元のファイル名=="string"){const C=h.元のファイル名;C.includes("エンジン")||C.includes("engine")?(g=`エンジン部品 ${p+1}`,v="エンジン部品",w.push("エンジン","動力系","駆動部")):C.includes("冷却")||C.includes("ラジエーター")?(g=`冷却系統 ${p+1}`,v="冷却系統",w.push("冷却","ラジエーター","水冷")):C.includes("ブレーキ")||C.includes("brake")?(g=`ブレーキ部品 ${p+1}`,v="ブレーキ系統",w.push("ブレーキ","制動装置")):(C.includes("ホイール")||C.includes("wheel"))&&(g=`車輪部品 ${p+1}`,v="足回り",w.push("ホイール","車輪","タイヤ"))}const y=["保守用車","部品","写真",...w],S=[g,v,...y].join(" ");return c++,{id:`img_${p+1}`,file:f,title:g,category:v,keywords:y,description:"",details:"",searchText:S}});console.log(`埋め込み画像処理結果: 有効=${c}, 無効パス=${l}`),u.filter(h=>{const p=h.file&&typeof h.file=="string"&&h.file.length>0&&h.file.toLowerCase().endsWith(".png"),f=h.title&&typeof h.title=="string",g=Array.isArray(h.keywords)&&h.keywords.length>0;return p&&f&&g}).forEach(h=>Li.push(h))}console.log(`検索用データを準備完了: ${Li.length}件`)}else throw new Error("メタデータのフォーマットが無効です")}catch(e){console.error("画像検索データの読み込みに失敗しました:",e);try{const t=await fetch("/api/tech-support/init-image-search-data",{method:"POST"});if(t.ok){const n=await t.json();console.log("画像検索データを初期化しました:",n);try{const r=await fetch(`/knowledge-base/data/image_search_data.json?t=${Date.now()}`);if(r.ok){const i=await r.json();if(Array.isArray(i)){console.log(`再読み込みした画像検索データ: ${i.length}件`),Li=i;return}}else throw new Error("knowledge-baseのデータ読み込みに失敗しました")}catch(r){console.warn("knowledge-base/dataからの読み込みに失敗しました:",r),console.error("画像検索データ読み込みに失敗しました:",r)}}}catch(t){console.error("画像検索データの初期化に失敗:",t)}console.log("knowledge-baseからJSONの読み込みを試みます");try{const t="/knowledge-base/data/image_search_data.json";let n=null;try{const r=await fetch(`${t}?t=${Date.now()}`,{cache:"no-store",headers:{pragma:"no-cache","cache-control":"no-cache"}});if(r.ok){const i=await r.json();Array.isArray(i)&&i.length>0&&(console.log(`知識ベースから画像検索データを読み込みました: ${i.length}件`),n=i)}}catch(r){console.warn("知識ベースからの読み込みに失敗:",r)}if(n){Li=n;return}else{try{const r=await fetch("/api/tech-support/init-image-search-data",{method:"POST",cache:"no-store"});if(r.ok){const i=await r.json();console.log("画像検索データを初期化しました:",i),await new Promise(o=>setTimeout(o,500));const s=["/knowledge-base/data/image_search_data.json"];let a=null;for(const o of s)try{const c=await fetch(`${o}?t=${Date.now()}`,{cache:"no-store"});if(c.ok){const l=await c.json();if(Array.isArray(l)&&l.length>0){console.log(`初期化後、パス ${o} からの再読み込みに成功: ${l.length}件`),a=l;break}}}catch(c){console.warn(`初期化後の再読み込み失敗 (${o}):`,c)}if(a){console.log(`初期化後、${a.length}件のデータを読み込みました`),Li=a;return}}}catch(r){console.error("再初期化に失敗:",r)}throw new Error("どのパスからもデータを読み込めませんでした")}}catch(t){console.error("直接JSONからの読み込みに失敗:",t)}console.log("サンプル画像データを表示しないように設定しました"),Li=[]}}iS();const zre=()=>{console.log("画像検索データを強制的に再読み込みします"),iS()};window.addEventListener("image-search-data-updated",()=>{console.log("画像検索データの更新を検知しました。再読み込みします。"),iS()});const Fre={includeScore:!0,keys:[{name:"title",weight:.5},{name:"category",weight:.3},{name:"description",weight:.4},{name:"keywords",weight:1},{name:"metadata.documentId",weight:.8},{name:"details",weight:.6},{name:"searchText",weight:1}],threshold:.4,ignoreLocation:!0,useExtendedSearch:!0,minMatchCharLength:1,distance:1e3,findAllMatches:!0,isCaseSensitive:!1,shouldSort:!0,tokenize:!0,matchAllTokens:!1};function am(){return new du(Li,Fre)}const $re=()=>{console.log("画像検索処理がキャンセルされました")},WA=async(e,t=!0)=>{try{console.log("画像検索開始:",e),Li.length===0&&(console.log("画像検索データが読み込まれていないため再ロード"),await iS());try{const s=await Qt("POST","/api/optimize-search-query",{text:e});if(!s.ok)return console.warn(`検索クエリ最適化APIが失敗しました: ${s.status}`),am().search(e);const a=s.headers.get("content-type");if(!a||!a.includes("application/json"))return console.warn(`無効なContent-Type: ${a}`),am().search(e);const o=await s.json();if(!o||typeof o.optimizedQuery!="string")return console.warn("無効なレスポンス形式"),am().search(e);const c=o.optimizedQuery||e;console.log("検索クエリを最適化:",e,"->",c),e=c}catch(s){console.error("検索クエリ最適化エラー:",s)}const n=am(),r=e.split(/\s+/).filter(s=>s.length>0);let i=[];if(r.length>1){console.log(`複数キーワード検索: ${r.join(", ")}`);for(const a of r){const o=n.search(a);i.push(...o)}const s=new Map;i.forEach(a=>{const o=s.get(a.item.id);(!o||o.score&&a.score&&a.score<o.score)&&s.set(a.item.id,a)}),i=Array.from(s.values())}else r.length===1?(console.log(`単一キーワード検索: ${r[0]}`),i=n.search(r[0])):(console.log("検索キーワードが抽出できなかったため検索をスキップします"),i=[]);return console.log(`検索結果: ${i.length}件見つかりました`),i}catch(n){throw console.error("画像検索エラー:",n),new Error("画像検索に失敗しました")}};function _c(e){if(!e)return"";if(e.includes("/knowledge-base/images/"))return e.endsWith(".svg")?e.replace(".svg",".png"):e;if(e.includes("/uploads/images/")){let t=e.replace("/uploads/images/","/knowledge-base/images/");return t.endsWith(".svg")?t.replace(".svg",".png"):t}if(e.startsWith("/images/")){let t=e.replace("/images/","/knowledge-base/images/");return t.endsWith(".svg")?t.replace(".svg",".png"):t}if(e.startsWith("/uploads/")&&!e.includes("/uploads/data/")&&!e.includes("/uploads/json/")){const n=e.split("/").pop();if(n)return n.endsWith(".svg")?`/knowledge-base/images/${n.replace(".svg",".png")}`:`/knowledge-base/images/${n}`}if(!e.includes("/")){if(e.endsWith(".svg"))return`/knowledge-base/images/${e.replace(".svg",".png")}`;if(e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg"))return`/knowledge-base/images/${e}`}return e}function Bre({results:e,onClear:t}){const n=UE(),{isMobile:r}=VE();m.useEffect(()=>{console.log("SearchResultsコンポーネントがマウントされました。画像検索データを初期化します。"),fetch("/api/tech-support/init-image-search-data",{method:"POST",cache:"no-store"}).then(a=>{if(a.ok)return a.json();throw new Error("画像検索データの初期化に失敗しました")}).then(a=>{console.log("画像検索データの初期化が完了しました:",a),zre()}).catch(a=>{console.error("画像検索データの初期化中にエラーが発生しました:",a)})},[]),m.useEffect(()=>{e&&e.length>0&&$re()},[e]);const s=r&&n==="landscape"?"fixed inset-0 z-50 bg-transparent p-4 overflow-auto chat-controls-container":"p-4";return d.jsxs("div",{className:s,children:[r&&d.jsx("div",{className:"sticky top-0 bg-blue-600 text-white p-2 z-10 mb-3",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"font-medium text-lg",children:"関係画像"}),d.jsx("button",{onClick:t,className:"text-white hover:text-blue-200",children:"✕"})]})}),d.jsx("div",{className:"flex flex-col gap-4",children:e.map(a=>d.jsx("div",{className:"thumbnail-item rounded-lg overflow-hidden bg-transparent shadow-sm w-full hover:bg-blue-50 transition-colors",onClick:()=>{var o;window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:_c(a.url),pngFallbackUrl:_c(a.pngFallbackUrl),title:a.title,content:a.content,metadata_json:a.metadata_json,all_slides:(o=a.all_slides)==null?void 0:o.map(c=>_c(c))}}))},children:a.url?d.jsx("div",{className:"flex justify-center items-center w-full bg-transparent border border-blue-200 rounded-lg",children:d.jsxs("div",{className:"relative w-full h-24 flex-shrink-0 overflow-hidden",children:[a.pngFallbackUrl&&a.pngFallbackUrl.trim()!==""&&d.jsx("img",{src:_c(a.pngFallbackUrl),alt:"バックアップ画像",className:"hidden",style:{display:"none"},loading:"eager",decoding:"async"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:d.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-blue-500 border-t-transparent animate-spin"})}),d.jsx("img",{src:_c(a.url||""),alt:a.title||"応急処置サポート",className:"w-full h-full object-contain bg-white p-1 z-10 relative",style:{minHeight:"96px",minWidth:"96px"},loading:"eager",decoding:"async",onError:o=>{const c=o.currentTarget,l=c.src||"";console.log(`画像読み込みエラー (${a.id}): ${l}`);try{if(a.pngFallbackUrl&&a.pngFallbackUrl.trim()!==""){console.log("指定されたフォールバックに切り替え:",a.pngFallbackUrl),c.src=_c(a.pngFallbackUrl);return}if(l.includes(".svg")){console.log("SVG読み込みエラー、PNG代替に切り替え:",l,"->",l.replace(/\.svg$/,".png"));const g=l.replace(/\.svg$/,".png");c.src=g;return}if(l.includes(".jpeg")||l.includes(".jpg")){console.log("JPEG読み込みエラー、PNG代替に切り替え");const g=l.replace(/\.(jpeg|jpg)$/,".png");c.src=g;return}const u=l.split("/").pop();if(u){const g=u.match(/_(\d+)\./);if(g&&g[1]){const v=g[1];console.log(`ファイル番号 ${v} を持つ実在画像を検索`);const w=`/knowledge-base/images/mc_1745235933176_img_${v}.png`;console.log("実際の画像パターンに置き換え:",w),c.src=w;return}}if(!l.includes("/knowledge-base/")){const g=l.split("/").pop();if(g){console.log("パス形式エラー、knowledge-baseパスに修正"),c.src=`/knowledge-base/images/${g}`;return}}console.log("既知の実在画像に置き換え");const h=["/knowledge-base/images/mc_1745235933176_img_001.png","/knowledge-base/images/mc_1745235933176_img_003.png","/knowledge-base/images/mc_1745235933176_img_004.png"];let p=h[0];a.title&&a.title.includes("エンジン")?p=h[0]:a.title&&(a.title.includes("冷却")||a.title.includes("水"))?p=h[1]:a.title&&(a.title.includes("ブレーキ")||a.title.includes("制動"))&&(p=h[2]),console.log("実在画像に置き換え:",p),c.src=p;return}catch(u){console.error("エラー処理中に例外が発生:",u)}},onLoad:o=>{const c=o.currentTarget;c.classList.add("loaded");const l=c.parentElement;l&&l.querySelectorAll(".animate-spin").forEach(h=>{h.parentElement&&(h.parentElement.style.display="none")})}})]})}):d.jsxs("div",{className:"flex h-24 w-full bg-transparent border border-blue-200 rounded-lg",children:[d.jsx("div",{className:"relative w-24 h-24 flex-shrink-0 flex items-center justify-center bg-blue-50",children:a.type==="ai-response"?d.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center",children:d.jsx("span",{className:"material-icons text-white",children:"smart_toy"})}):a.type==="text"?d.jsx(X7,{className:"h-12 w-12 text-blue-600"}):d.jsx(ic,{className:"h-12 w-12 text-blue-600"})}),d.jsx("div",{className:"flex-1 p-2 flex flex-col justify-center",children:d.jsx("h3",{className:"text-sm font-bold text-blue-700",children:a.title||(a.type==="ai-response"?"AI応答":"ドキュメント")})})]})},a.id))})]})}var Vre=dO.useId||(()=>{}),Ure=0;function Xi(e){const[t,n]=m.useState(Vre());return an(()=>{n(r=>r??String(Ure++))},[e]),t?`radix-${t}`:""}var iw="focusScope.autoFocusOnMount",sw="focusScope.autoFocusOnUnmount",KA={bubbles:!1,cancelable:!0},qre="FocusScope",HE=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,c]=m.useState(null),l=Kt(i),u=Kt(s),h=m.useRef(null),p=Qe(t,v=>c(v)),f=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let v=function(C){if(f.paused||!o)return;const x=C.target;o.contains(x)?h.current=x:Zs(h.current,{select:!0})},w=function(C){if(f.paused||!o)return;const x=C.relatedTarget;x!==null&&(o.contains(x)||Zs(h.current,{select:!0}))},y=function(C){if(document.activeElement===document.body)for(const E of C)E.removedNodes.length>0&&Zs(o)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const S=new MutationObserver(y);return o&&S.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),S.disconnect()}}},[r,o,f.paused]),m.useEffect(()=>{if(o){QA.add(f);const v=document.activeElement;if(!o.contains(v)){const y=new CustomEvent(iw,KA);o.addEventListener(iw,l),o.dispatchEvent(y),y.defaultPrevented||(Hre(Jre(W$(o)),{select:!0}),document.activeElement===v&&Zs(o))}return()=>{o.removeEventListener(iw,l),setTimeout(()=>{const y=new CustomEvent(sw,KA);o.addEventListener(sw,u),o.dispatchEvent(y),y.defaultPrevented||Zs(v??document.body,{select:!0}),o.removeEventListener(sw,u),QA.remove(f)},0)}}},[o,l,u,f]);const g=m.useCallback(v=>{if(!n&&!r||f.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(w&&y){const S=v.currentTarget,[C,x]=Wre(S);C&&x?!v.shiftKey&&y===x?(v.preventDefault(),n&&Zs(C,{select:!0})):v.shiftKey&&y===C&&(v.preventDefault(),n&&Zs(x,{select:!0})):y===S&&v.preventDefault()}},[n,r,f.paused]);return d.jsx(Re.div,{tabIndex:-1,...a,ref:p,onKeyDown:g})});HE.displayName=qre;function Hre(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Zs(r,{select:t}),document.activeElement!==n)return}function Wre(e){const t=W$(e),n=GA(t,e),r=GA(t.reverse(),e);return[n,r]}function W$(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function GA(e,t){for(const n of e)if(!Kre(n,{upTo:t}))return n}function Kre(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Gre(e){return e instanceof HTMLInputElement&&"select"in e}function Zs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Gre(e)&&t&&e.select()}}var QA=Qre();function Qre(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=JA(e,t),e.unshift(t)},remove(t){var n;e=JA(e,t),(n=e[0])==null||n.resume()}}}function JA(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Jre(e){return e.filter(t=>t.tagName!=="A")}var ow=0;function K$(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??YA()),document.body.insertAdjacentElement("beforeend",e[1]??YA()),ow++,()=>{ow===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ow--}},[])}function YA(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Wi=function(){return Wi=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Wi.apply(this,arguments)};function G$(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Yre(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Um="right-scroll-bar-position",qm="width-before-scroll-bar",Zre="with-scroll-bars-hidden",Xre="--removed-body-scroll-bar-size";function aw(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function eie(e,t){var n=m.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var tie=typeof window<"u"?m.useLayoutEffect:m.useEffect,ZA=new WeakMap;function nie(e,t){var n=eie(null,function(r){return e.forEach(function(i){return aw(i,r)})});return tie(function(){var r=ZA.get(n);if(r){var i=new Set(r),s=new Set(e),a=n.current;i.forEach(function(o){s.has(o)||aw(o,null)}),s.forEach(function(o){i.has(o)||aw(o,a)})}ZA.set(n,e)},[e]),n}function rie(e){return e}function iie(e,t){t===void 0&&(t=rie);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var c=function(){var u=a;a=[],u.forEach(s)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){a.push(u),l()},filter:function(u){return a=a.filter(u),n}}}};return i}function sie(e){e===void 0&&(e={});var t=iie(null);return t.options=Wi({async:!0,ssr:!1},e),t}var Q$=function(e){var t=e.sideCar,n=G$(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Wi({},n))};Q$.isSideCarExport=!0;function oie(e,t){return e.useMedium(t),Q$}var J$=sie(),cw=function(){},sS=m.forwardRef(function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:cw,onWheelCapture:cw,onTouchMoveCapture:cw}),i=r[0],s=r[1],a=e.forwardProps,o=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,h=e.shards,p=e.sideCar,f=e.noIsolation,g=e.inert,v=e.allowPinchZoom,w=e.as,y=w===void 0?"div":w,S=e.gapMode,C=G$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=p,E=nie([n,t]),P=Wi(Wi({},C),i);return m.createElement(m.Fragment,null,u&&m.createElement(x,{sideCar:J$,removeScrollBar:l,shards:h,noIsolation:f,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:S}),a?m.cloneElement(m.Children.only(o),Wi(Wi({},P),{ref:E})):m.createElement(y,Wi({},P,{className:c,ref:E}),o))});sS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sS.classNames={fullWidth:qm,zeroRight:Um};var aie=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cie(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=aie();return t&&e.setAttribute("nonce",t),e}function lie(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function uie(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var die=function(){var e=0,t=null;return{add:function(n){e==0&&(t=cie())&&(lie(t,n),uie(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},hie=function(){var e=die();return function(t,n){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Y$=function(){var e=hie(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},pie={left:0,top:0,right:0,gap:0},lw=function(e){return parseInt(e||"",10)||0},fie=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[lw(n),lw(r),lw(i)]},mie=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return pie;var t=fie(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},vie=Y$(),al="data-scroll-locked",gie=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Zre,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(al,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Um,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(qm,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Um," .").concat(Um,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(qm," .").concat(qm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(al,`] {
    `).concat(Xre,": ").concat(o,`px;
  }
`)},XA=function(){var e=parseInt(document.body.getAttribute(al)||"0",10);return isFinite(e)?e:0},yie=function(){m.useEffect(function(){return document.body.setAttribute(al,(XA()+1).toString()),function(){var e=XA()-1;e<=0?document.body.removeAttribute(al):document.body.setAttribute(al,e.toString())}},[])},Sie=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;yie();var s=m.useMemo(function(){return mie(i)},[i]);return m.createElement(vie,{styles:gie(s,!t,i,n?"":"!important")})},fx=!1;if(typeof window<"u")try{var cm=Object.defineProperty({},"passive",{get:function(){return fx=!0,!0}});window.addEventListener("test",cm,cm),window.removeEventListener("test",cm,cm)}catch{fx=!1}var Tc=fx?{passive:!1}:!1,wie=function(e){return e.tagName==="TEXTAREA"},Z$=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!wie(e)&&n[t]==="visible")},Cie=function(e){return Z$(e,"overflowY")},xie=function(e){return Z$(e,"overflowX")},eN=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=X$(e,r);if(i){var s=e3(e,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},bie=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Eie=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},X$=function(e,t){return e==="v"?Cie(t):xie(t)},e3=function(e,t){return e==="v"?bie(t):Eie(t)},Pie=function(e,t){return e==="h"&&t==="rtl"?-1:1},Rie=function(e,t,n,r,i){var s=Pie(e,window.getComputedStyle(t).direction),a=s*r,o=n.target,c=t.contains(o),l=!1,u=a>0,h=0,p=0;do{var f=e3(e,o),g=f[0],v=f[1],w=f[2],y=v-w-s*g;(g||y)&&X$(e,o)&&(h+=y,p+=g),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(u&&Math.abs(h)<1||!u&&Math.abs(p)<1)&&(l=!0),l},lm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tN=function(e){return[e.deltaX,e.deltaY]},nN=function(e){return e&&"current"in e?e.current:e},_ie=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Tie=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Aie=0,Ac=[];function Nie(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),i=m.useState(Aie++)[0],s=m.useState(Y$)[0],a=m.useRef(e);m.useEffect(function(){a.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var v=Yre([e.lockRef.current],(e.shards||[]).map(nN),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=m.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var y=lm(v),S=n.current,C="deltaX"in v?v.deltaX:S[0]-y[0],x="deltaY"in v?v.deltaY:S[1]-y[1],E,P=v.target,T=Math.abs(C)>Math.abs(x)?"h":"v";if("touches"in v&&T==="h"&&P.type==="range")return!1;var _=eN(T,P);if(!_)return!0;if(_?E=T:(E=T==="v"?"h":"v",_=eN(T,P)),!_)return!1;if(!r.current&&"changedTouches"in v&&(C||x)&&(r.current=E),!E)return!0;var k=r.current||E;return Rie(k,w,v,k==="h"?C:x)},[]),c=m.useCallback(function(v){var w=v;if(!(!Ac.length||Ac[Ac.length-1]!==s)){var y="deltaY"in w?tN(w):lm(w),S=t.current.filter(function(E){return E.name===w.type&&(E.target===w.target||w.target===E.shadowParent)&&_ie(E.delta,y)})[0];if(S&&S.should){w.cancelable&&w.preventDefault();return}if(!S){var C=(a.current.shards||[]).map(nN).filter(Boolean).filter(function(E){return E.contains(w.target)}),x=C.length>0?o(w,C[0]):!a.current.noIsolation;x&&w.cancelable&&w.preventDefault()}}},[]),l=m.useCallback(function(v,w,y,S){var C={name:v,delta:w,target:y,should:S,shadowParent:Iie(y)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(x){return x!==C})},1)},[]),u=m.useCallback(function(v){n.current=lm(v),r.current=void 0},[]),h=m.useCallback(function(v){l(v.type,tN(v),v.target,o(v,e.lockRef.current))},[]),p=m.useCallback(function(v){l(v.type,lm(v),v.target,o(v,e.lockRef.current))},[]);m.useEffect(function(){return Ac.push(s),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Tc),document.addEventListener("touchmove",c,Tc),document.addEventListener("touchstart",u,Tc),function(){Ac=Ac.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,Tc),document.removeEventListener("touchmove",c,Tc),document.removeEventListener("touchstart",u,Tc)}},[]);var f=e.removeScrollBar,g=e.inert;return m.createElement(m.Fragment,null,g?m.createElement(s,{styles:Tie(i)}):null,f?m.createElement(Sie,{gapMode:e.gapMode}):null)}function Iie(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const jie=oie(J$,Nie);var WE=m.forwardRef(function(e,t){return m.createElement(sS,Wi({},e,{ref:t,sideCar:jie}))});WE.classNames=sS.classNames;var kie=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Nc=new WeakMap,um=new WeakMap,dm={},uw=0,t3=function(e){return e&&(e.host||t3(e.parentNode))},Mie=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=t3(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Oie=function(e,t,n,r){var i=Mie(t,Array.isArray(e)?e:[e]);dm[n]||(dm[n]=new WeakMap);var s=dm[n],a=[],o=new Set,c=new Set(i),l=function(h){!h||o.has(h)||(o.add(h),l(h.parentNode))};i.forEach(l);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(o.has(p))u(p);else try{var f=p.getAttribute(r),g=f!==null&&f!=="false",v=(Nc.get(p)||0)+1,w=(s.get(p)||0)+1;Nc.set(p,v),s.set(p,w),a.push(p),v===1&&g&&um.set(p,!0),w===1&&p.setAttribute(n,"true"),g||p.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return u(t),o.clear(),uw++,function(){a.forEach(function(h){var p=Nc.get(h)-1,f=s.get(h)-1;Nc.set(h,p),s.set(h,f),p||(um.has(h)||h.removeAttribute(r),um.delete(h)),f||h.removeAttribute(n)}),uw--,uw||(Nc=new WeakMap,Nc=new WeakMap,um=new WeakMap,dm={})}},n3=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=kie(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Oie(r,i,n,"aria-hidden")):function(){return null}},KE="Dialog",[r3,i3]=Ti(KE),[Die,ki]=r3(KE),s3=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=m.useRef(null),c=m.useRef(null),[l=!1,u]=ti({prop:r,defaultProp:i,onChange:s});return d.jsx(Die,{scope:t,triggerRef:o,contentRef:c,contentId:Xi(),titleId:Xi(),descriptionId:Xi(),open:l,onOpenChange:u,onOpenToggle:m.useCallback(()=>u(h=>!h),[u]),modal:a,children:n})};s3.displayName=KE;var o3="DialogTrigger",a3=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ki(o3,n),s=Qe(t,i.triggerRef);return d.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":JE(i.open),...r,ref:s,onClick:be(e.onClick,i.onOpenToggle)})});a3.displayName=o3;var GE="DialogPortal",[Lie,c3]=r3(GE,{forceMount:void 0}),l3=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=ki(GE,t);return d.jsx(Lie,{scope:t,forceMount:n,children:m.Children.map(r,a=>d.jsx(ri,{present:n||s.open,children:d.jsx(Mg,{asChild:!0,container:i,children:a})}))})};l3.displayName=GE;var Kv="DialogOverlay",u3=m.forwardRef((e,t)=>{const n=c3(Kv,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=ki(Kv,e.__scopeDialog);return s.modal?d.jsx(ri,{present:r||s.open,children:d.jsx(zie,{...i,ref:t})}):null});u3.displayName=Kv;var zie=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ki(Kv,n);return d.jsx(WE,{as:zo,allowPinchZoom:!0,shards:[i.contentRef],children:d.jsx(Re.div,{"data-state":JE(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),uc="DialogContent",d3=m.forwardRef((e,t)=>{const n=c3(uc,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=ki(uc,e.__scopeDialog);return d.jsx(ri,{present:r||s.open,children:s.modal?d.jsx(Fie,{...i,ref:t}):d.jsx($ie,{...i,ref:t})})});d3.displayName=uc;var Fie=m.forwardRef((e,t)=>{const n=ki(uc,e.__scopeDialog),r=m.useRef(null),i=Qe(t,n.contentRef,r);return m.useEffect(()=>{const s=r.current;if(s)return n3(s)},[]),d.jsx(h3,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:be(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:be(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:be(e.onFocusOutside,s=>s.preventDefault())})}),$ie=m.forwardRef((e,t)=>{const n=ki(uc,e.__scopeDialog),r=m.useRef(!1),i=m.useRef(!1);return d.jsx(h3,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,l;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((l=n.triggerRef.current)==null?void 0:l.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),h3=m.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=ki(uc,n),c=m.useRef(null),l=Qe(t,c);return K$(),d.jsxs(d.Fragment,{children:[d.jsx(HE,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:d.jsx(kg,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":JE(o.open),...a,ref:l,onDismiss:()=>o.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(Vie,{titleId:o.titleId}),d.jsx(qie,{contentRef:c,descriptionId:o.descriptionId})]})]})}),QE="DialogTitle",p3=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ki(QE,n);return d.jsx(Re.h2,{id:i.titleId,...r,ref:t})});p3.displayName=QE;var f3="DialogDescription",m3=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ki(f3,n);return d.jsx(Re.p,{id:i.descriptionId,...r,ref:t})});m3.displayName=f3;var v3="DialogClose",g3=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ki(v3,n);return d.jsx(Re.button,{type:"button",...r,ref:t,onClick:be(e.onClick,()=>i.onOpenChange(!1))})});g3.displayName=v3;function JE(e){return e?"open":"closed"}var y3="DialogTitleWarning",[Bie,S3]=bW(y3,{contentName:uc,titleName:QE,docsSlug:"dialog"}),Vie=({titleId:e})=>{const t=S3(y3),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Uie="DialogDescriptionWarning",qie=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${S3(Uie).contentName}}.`;return m.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},YE=s3,ZE=a3,XE=l3,bf=u3,Ef=d3,Pf=p3,Rf=m3,oS=g3;const mr=YE,w3=ZE,Hie=XE,C3=m.forwardRef(({className:e,...t},n)=>d.jsx(bf,{ref:n,className:ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));C3.displayName=bf.displayName;const Kn=m.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(Hie,{children:[d.jsx(C3,{}),d.jsxs(Ef,{ref:r,className:ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,d.jsxs(oS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(_r,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Kn.displayName=Ef.displayName;const vr=({className:e,...t})=>d.jsx("div",{className:ve("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});vr.displayName="DialogHeader";const Zr=({className:e,...t})=>d.jsx("div",{className:ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Zr.displayName="DialogFooter";const Gn=m.forwardRef(({className:e,...t},n)=>d.jsx(Pf,{ref:n,className:ve("text-lg font-semibold leading-none tracking-tight",e),...t}));Gn.displayName=Pf.displayName;const Ir=m.forwardRef(({className:e,...t},n)=>d.jsx(Rf,{ref:n,className:ve("text-sm text-muted-foreground",e),...t}));Ir.displayName=Rf.displayName;function aS(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function cS(e){const[t,n]=m.useState(void 0);return an(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const c=s.borderBoxSize,l=Array.isArray(c)?c[0]:c;a=l.inlineSize,o=l.blockSize}else a=e.offsetWidth,o=e.offsetHeight;n({width:a,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var eP="Switch",[Wie,$ge]=Ti(eP),[Kie,Gie]=Wie(eP),x3=m.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:c="on",onCheckedChange:l,form:u,...h}=e,[p,f]=m.useState(null),g=Qe(t,C=>f(C)),v=m.useRef(!1),w=p?u||!!p.closest("form"):!0,[y=!1,S]=ti({prop:i,defaultProp:s,onChange:l});return d.jsxs(Kie,{scope:n,checked:y,disabled:o,children:[d.jsx(Re.button,{type:"button",role:"switch","aria-checked":y,"aria-required":a,"data-state":P3(y),"data-disabled":o?"":void 0,disabled:o,value:c,...h,ref:g,onClick:be(e.onClick,C=>{S(x=>!x),w&&(v.current=C.isPropagationStopped(),v.current||C.stopPropagation())})}),w&&d.jsx(Qie,{control:p,bubbles:!v.current,name:r,value:c,checked:y,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});x3.displayName=eP;var b3="SwitchThumb",E3=m.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=Gie(b3,n);return d.jsx(Re.span,{"data-state":P3(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});E3.displayName=b3;var Qie=e=>{const{control:t,checked:n,bubbles:r=!0,...i}=e,s=m.useRef(null),a=aS(n),o=cS(t);return m.useEffect(()=>{const c=s.current,l=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(l,"checked").set;if(a!==n&&h){const p=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(p)}},[a,n,r]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function P3(e){return e?"checked":"unchecked"}var R3=x3,Jie=E3;const no=m.forwardRef(({className:e,...t},n)=>d.jsx(R3,{className:ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:d.jsx(Jie,{className:ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));no.displayName=R3.displayName;function Yie(){const[e,t]=m.useState(!1),[n,r]=m.useState(!1),[i,s]=m.useState(!1),[a,o]=m.useState(null),[c,l]=m.useState(null),[u]=m.useState(!0),h=m.useRef(null),p=m.useRef(null),f=m.useRef([]),{captureImage:g,sendMessage:v}=uu(),{toast:w}=ln(),y=UE();m.useEffect(()=>{const k=()=>t(!0);return window.addEventListener("open-camera",k),()=>{window.removeEventListener("open-camera",k)}},[]),m.useEffect(()=>{e?setTimeout(()=>{S()},300):C()},[e]);const S=async()=>{try{c&&c.getTracks().forEach(D=>D.stop()),console.log("カメラ開始: facingMode =",u?"environment":"user");const k={video:{facingMode:u?"environment":"user",width:{ideal:1280},height:{ideal:720}},audio:n},z=await navigator.mediaDevices.getUserMedia(k);l(z),h.current&&(h.current.srcObject=z)}catch(k){console.error("Error accessing camera:",k),w({title:"カメラエラー",description:"カメラにアクセスできませんでした: "+(k instanceof Error?k.message:String(k)),variant:"destructive"})}},C=()=>{c&&(c.getTracks().forEach(k=>k.stop()),l(null)),i&&P(),o(null)},x=()=>{if(h.current)if(n)i?P():E();else{const k=document.createElement("canvas");k.width=h.current.videoWidth,k.height=h.current.videoHeight;const z=k.getContext("2d");if(z&&h.current){z.drawImage(h.current,0,0,k.width,k.height);const D=k.toDataURL("image/jpeg");o(D)}}},E=()=>{if(f.current=[],c){const k=new MediaRecorder(c);p.current=k,k.ondataavailable=z=>{z.data.size>0&&f.current.push(z.data)},k.onstop=()=>{const z=new Blob(f.current,{type:"video/mp4"}),D=URL.createObjectURL(z);o(D),s(!1)},k.start(),s(!0)}},P=()=>{p.current&&i&&p.current.stop()},T=async()=>{a&&(await v("",[{type:n?"video":"image",url:a}]),t(!1),o(null))},_=()=>{i&&P(),r(!n),o(null),C(),setTimeout(()=>S(),300)};return d.jsx(mr,{open:e,onOpenChange:t,children:d.jsxs(Kn,{className:`${y==="landscape"?"max-w-3xl":"max-w-md"} p-0 overflow-hidden bg-blue-50 border border-blue-200 camera-modal`,"aria-describedby":"camera-modal-desc",children:[d.jsx(Gn,{className:"sr-only",children:"カメラ"}),d.jsx("div",{id:"camera-modal-desc",className:"sr-only",children:"写真や動画を撮影するためのカメラモーダル"}),d.jsxs(vr,{className:"p-4 border-b border-blue-200 flex flex-row justify-between items-center bg-blue-100",children:[d.jsx(Gn,{className:"text-indigo-600 text-lg font-bold",children:"カメラ起動"}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex items-center bg-white px-2 py-1 rounded-full",children:[d.jsx(x9,{className:"h-6 w-6 mr-2 text-indigo-600"}),d.jsx(no,{id:"camera-mode",checked:n,onCheckedChange:_}),d.jsx(j9,{className:"h-6 w-6 ml-2 text-indigo-600"})]}),d.jsx(ee,{variant:"ghost",size:"icon",className:"p-2 rounded-full hover:bg-blue-200 text-blue-700",onClick:()=>t(!1),children:d.jsx(_r,{})})]})]}),d.jsxs("div",{className:"relative bg-black",children:[a?n?d.jsx("video",{src:a,controls:!0,className:`w-full ${y==="landscape"?"h-64":"h-80"} bg-neutral-800 object-contain`,onClick:()=>window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:a}}))}):d.jsx("img",{src:a,alt:"Captured",className:`w-full ${y==="landscape"?"h-64":"h-80"} bg-neutral-800 object-contain`,onClick:()=>window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:a}}))}):d.jsx("video",{ref:h,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full ${y==="landscape"?"h-64":"h-80"} bg-neutral-800 object-cover`}),!a&&d.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center space-x-4",children:n?d.jsx(d.Fragment,{children:i?d.jsxs(d.Fragment,{children:[d.jsx(ee,{className:"bg-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg",variant:"outline",size:"icon",onClick:P,children:d.jsx(i9,{className:"h-6 w-6 text-blue-600"})}),d.jsx(ee,{className:"bg-red-500 rounded-full w-14 h-14 flex items-center justify-center shadow-lg",variant:"outline",size:"icon",onClick:P,children:d.jsx(w9,{className:"h-6 w-6 text-white"})})]}):d.jsx(ee,{className:"bg-blue-600 rounded-full w-16 h-16 flex items-center justify-center shadow-lg border-2 border-white",variant:"outline",size:"icon",onClick:E,children:d.jsx(TR,{className:"h-8 w-8 text-white"})})}):d.jsx(ee,{className:"bg-blue-600 rounded-full w-16 h-16 flex items-center justify-center shadow-lg border-2 border-white",variant:"outline",size:"icon",onClick:x,children:d.jsx(TR,{className:"h-12 w-12 text-white"})})})]}),d.jsx("div",{className:"p-4 bg-blue-50",children:a?d.jsx(ee,{className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium text-lg",onClick:T,children:"送信する"}):d.jsx("div",{className:"flex items-center justify-between",children:d.jsx("p",{className:"text-sm text-blue-700 font-medium",children:n?i?"録画中... 停止するには□をタップ":"◎ をタップして録画開始":"○ をタップして写真撮影"})})})]})})}function Zie(e,t=[]){let n=[];function r(s,a){const o=m.createContext(a),c=n.length;n=[...n,a];function l(h){const{scope:p,children:f,...g}=h,v=(p==null?void 0:p[e][c])||o,w=m.useMemo(()=>g,Object.values(g));return d.jsx(v.Provider,{value:w,children:f})}function u(h,p){const f=(p==null?void 0:p[e][c])||o,g=m.useContext(f);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,u]}const i=()=>{const s=n.map(a=>m.createContext(a));return function(o){const c=(o==null?void 0:o[e])||s;return m.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return i.scopeName=e,[r,Xie(i,...t)]}function Xie(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:l})=>{const h=c(s)[`__scope${l}`];return{...o,...h}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var ese=m.createContext(void 0);function hu(e){const t=m.useContext(ese);return e||t||"ltr"}var dw="rovingFocusGroup.onEntryFocus",tse={bubbles:!1,cancelable:!0},lS="RovingFocusGroup",[mx,_3,nse]=of(lS),[rse,T3]=Zie(lS,[nse]),[ise,sse]=rse(lS),A3=m.forwardRef((e,t)=>d.jsx(mx.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(mx.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(ose,{...e,ref:t})})}));A3.displayName=lS;var ose=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...h}=e,p=m.useRef(null),f=Qe(t,p),g=hu(s),[v=null,w]=ti({prop:a,defaultProp:o,onChange:c}),[y,S]=m.useState(!1),C=Kt(l),x=_3(n),E=m.useRef(!1),[P,T]=m.useState(0);return m.useEffect(()=>{const _=p.current;if(_)return _.addEventListener(dw,C),()=>_.removeEventListener(dw,C)},[C]),d.jsx(ise,{scope:n,orientation:r,dir:g,loop:i,currentTabStopId:v,onItemFocus:m.useCallback(_=>w(_),[w]),onItemShiftTab:m.useCallback(()=>S(!0),[]),onFocusableItemAdd:m.useCallback(()=>T(_=>_+1),[]),onFocusableItemRemove:m.useCallback(()=>T(_=>_-1),[]),children:d.jsx(Re.div,{tabIndex:y||P===0?-1:0,"data-orientation":r,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:be(e.onMouseDown,()=>{E.current=!0}),onFocus:be(e.onFocus,_=>{const k=!E.current;if(_.target===_.currentTarget&&k&&!y){const z=new CustomEvent(dw,tse);if(_.currentTarget.dispatchEvent(z),!z.defaultPrevented){const D=x().filter(N=>N.focusable),O=D.find(N=>N.active),M=D.find(N=>N.id===v),A=[O,M,...D].filter(Boolean).map(N=>N.ref.current);j3(A,u)}}E.current=!1}),onBlur:be(e.onBlur,()=>S(!1))})})}),N3="RovingFocusGroupItem",I3=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...a}=e,o=Xi(),c=s||o,l=sse(N3,n),u=l.currentTabStopId===c,h=_3(n),{onFocusableItemAdd:p,onFocusableItemRemove:f}=l;return m.useEffect(()=>{if(r)return p(),()=>f()},[r,p,f]),d.jsx(mx.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:d.jsx(Re.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...a,ref:t,onMouseDown:be(e.onMouseDown,g=>{r?l.onItemFocus(c):g.preventDefault()}),onFocus:be(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:be(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){l.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=lse(g,l.orientation,l.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=h().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const S=y.indexOf(g.currentTarget);y=l.loop?use(y,S+1):y.slice(S+1)}setTimeout(()=>j3(y))}})})})});I3.displayName=N3;var ase={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function cse(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function lse(e,t,n){const r=cse(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ase[r]}function j3(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function use(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var dse=A3,hse=I3,tP="Tabs",[pse,Bge]=Ti(tP,[T3]),k3=T3(),[fse,nP]=pse(tP),M3=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:c="automatic",...l}=e,u=hu(o),[h,p]=ti({prop:r,onChange:i,defaultProp:s});return d.jsx(fse,{scope:n,baseId:Xi(),value:h,onValueChange:p,orientation:a,dir:u,activationMode:c,children:d.jsx(Re.div,{dir:u,"data-orientation":a,...l,ref:t})})});M3.displayName=tP;var O3="TabsList",D3=m.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=nP(O3,n),a=k3(n);return d.jsx(dse,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:r,children:d.jsx(Re.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});D3.displayName=O3;var L3="TabsTrigger",z3=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,a=nP(L3,n),o=k3(n),c=B3(a.baseId,r),l=V3(a.baseId,r),u=r===a.value;return d.jsx(hse,{asChild:!0,...o,focusable:!i,active:u,children:d.jsx(Re.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:t,onMouseDown:be(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?a.onValueChange(r):h.preventDefault()}),onKeyDown:be(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(r)}),onFocus:be(e.onFocus,()=>{const h=a.activationMode!=="manual";!u&&!i&&h&&a.onValueChange(r)})})})});z3.displayName=L3;var F3="TabsContent",$3=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=e,o=nP(F3,n),c=B3(o.baseId,r),l=V3(o.baseId,r),u=r===o.value,h=m.useRef(u);return m.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),d.jsx(ri,{present:i||u,children:({present:p})=>d.jsx(Re.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:l,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&s})})});$3.displayName=F3;function B3(e,t){return`${e}-trigger-${t}`}function V3(e,t){return`${e}-content-${t}`}var mse=M3,U3=D3,q3=z3,H3=$3;const _f=mse,pu=m.forwardRef(({className:e,...t},n)=>d.jsx(U3,{ref:n,className:ve("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));pu.displayName=U3.displayName;const On=m.forwardRef(({className:e,...t},n)=>d.jsx(q3,{ref:n,className:ve("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));On.displayName=q3.displayName;const Dn=m.forwardRef(({className:e,...t},n)=>d.jsx(H3,{ref:n,className:ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Dn.displayName=H3.displayName;function hw(e){if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://")||e.includes("/knowledge-base/images/"))return e;if(e.includes("/uploads/"))return e.replace("/uploads/","/knowledge-base/");if(e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".svg")){const t=e.split("/").pop();if(t)return t.endsWith(".svg")?`/knowledge-base/images/${t.replace(".svg",".png")}`:`/knowledge-base/images/${t}`}return e}function vse(){var k,z;const[e,t]=m.useState(!1),[n,r]=m.useState(""),[i,s]=m.useState(""),[a,o]=m.useState(""),[c,l]=m.useState([]),[u,h]=m.useState(0),[p,f]=m.useState(null),[g,v]=m.useState(!1),w=!1,[y,S]=m.useState("画像プレビュー"),[C,x]=m.useState(""),E=async D=>{try{v(!0);const O=await fetch(D);if(!O.ok)throw new Error("Metadata fetch failed");const M=await O.json();f(M)}catch(O){console.error("Failed to load metadata:",O),f(null)}finally{v(!1)}},P=D=>{if(!c.length)return;let O;D==="next"?O=(u+1)%c.length:O=(u-1+c.length)%c.length,h(O);const M=c[O];r(M),s("")};m.useEffect(()=>{const D=O=>{const M=O;if(M.detail){if(M.detail.url&&r(M.detail.url),M.detail.pngFallbackUrl?s(M.detail.pngFallbackUrl):s(""),M.detail.title?S(M.detail.title):S("画像プレビュー"),M.detail.content?x(M.detail.content):x(""),M.detail.metadata_json?(o(M.detail.metadata_json),E(M.detail.metadata_json)):(o(""),f(null)),M.detail.all_slides&&Array.isArray(M.detail.all_slides)){l(M.detail.all_slides);const b=M.detail.all_slides.findIndex(A=>A===M.detail.url);h(b>=0?b:0)}else l([]),h(0);t(!0)}};return window.addEventListener("preview-image",D),()=>{window.removeEventListener("preview-image",D)}},[]);const _=(()=>{if(!p||!p.slides)return null;const D=u+1;return p.slides.find(O=>O.スライド番号===D)})();return d.jsx(mr,{open:e,onOpenChange:t,children:d.jsxs(Kn,{className:"max-w-5xl bg-black bg-opacity-90 border border-blue-400 flex flex-col items-center justify-center p-0 rounded-xl","aria-labelledby":"dialog-title","aria-describedby":"dialog-description image-preview-description",children:[d.jsxs("div",{className:"sr-only",children:[d.jsx("h2",{id:"dialog-title",children:((k=p==null?void 0:p.metadata)==null?void 0:k.タイトル)||y}),d.jsx("p",{id:"dialog-description",children:"拡大画像ビューワー"}),d.jsx("p",{id:"image-preview-description",children:"画像のプレビュー表示と関連情報の確認ができます"})]}),d.jsxs("div",{className:"w-full flex justify-between items-center p-2 bg-blue-700 text-white",children:[d.jsxs("h3",{className:"text-sm font-medium ml-2",children:[((z=p==null?void 0:p.metadata)==null?void 0:z.タイトル)||y,c.length>1&&` - スライド ${u+1}/${c.length}`]}),d.jsx("div",{className:"flex items-center",children:d.jsx(ee,{className:"text-white hover:bg-blue-600 rounded-full",variant:"ghost",size:"icon",onClick:()=>t(!1),children:d.jsx(_r,{className:"h-5 w-5"})})})]}),d.jsxs("div",{className:"relative w-full max-h-[70vh] flex items-center justify-center p-2",children:[c.length>1&&d.jsx(ee,{className:"absolute left-2 z-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full opacity-75 hover:opacity-100",size:"icon",onClick:()=>P("prev"),children:d.jsx(b7,{className:"h-5 w-5"})}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-0 bg-gray-50",children:d.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-blue-600 border-t-transparent animate-spin"})}),d.jsx("img",{src:hw(n||""),alt:(_==null?void 0:_.タイトル)||y||"拡大画像",className:"max-w-full max-h-[70vh] object-contain rounded-lg border border-blue-500 z-10 relative",loading:"eager",decoding:"async",onLoad:D=>{const O=D.currentTarget;O.classList.add("loaded");const M=O.parentElement;M&&M.querySelectorAll(".animate-spin").forEach(A=>{A.parentElement&&(A.parentElement.style.display="none")})},onError:D=>{const O=D.currentTarget,M=O.src||"";console.log("画像表示エラー:",M);try{if(i&&i.trim()!==""){console.log("指定されたフォールバックURLを使用:",i),O.src=hw(i);return}if(M.endsWith(".svg")){console.log("SVG->PNGのフォールバック");const A=M.replace(".svg",".png");O.src=A;return}if(M.endsWith(".jpeg")||M.endsWith(".jpg")){console.log("JPEG->PNGのフォールバック");const A=M.replace(/\.(jpeg|jpg)$/,".png");O.src=A;return}if(!M.includes("/knowledge-base/")){const A=M.split("/").pop();if(A){console.log("パス形式エラー、knowledge-baseパスに修正"),O.src=`/knowledge-base/images/${A}`;return}}if(c.length>1){const A=(u+1)%c.length;console.log(`現在のスライドが表示できないため、次のスライド(${A})に切り替え`),P("next");return}console.log("すべてのフォールバック試行が失敗、エラー表示");const b=O.parentElement;if(b&&(O.style.opacity="0.2",!b.querySelector(".error-message"))){const A=document.createElement("div");A.className="error-message absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 text-white p-4 rounded-lg z-20";const N=document.createElement("p");N.className="text-xl mb-2",N.textContent="画像を読み込めませんでした";const j=document.createElement("p");j.className="text-sm",j.textContent=M.split("/").pop()||"",A.appendChild(N),A.appendChild(j),b.appendChild(A)}}catch(b){console.error("エラー処理中に例外が発生:",b)}}}),c.length>1&&d.jsx(ee,{className:"absolute right-2 z-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full opacity-75 hover:opacity-100",size:"icon",onClick:()=>P("next"),children:d.jsx(P7,{className:"h-5 w-5"})})]}),w,c.length>1&&d.jsx("div",{className:"w-full px-2 py-3 border-t border-blue-500 overflow-x-auto flex bg-gray-800",children:c.map((D,O)=>d.jsx("div",{className:`flex-shrink-0 mx-1 cursor-pointer transition-all ${O===u?"border-2 border-blue-500 scale-105":"border border-gray-600 hover:border-blue-400"}`,onClick:()=>{h(O),r(D),s("")},children:d.jsxs("div",{className:"relative h-16 w-24",children:[d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-700 z-0",children:d.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-blue-500 border-t-transparent animate-spin"})}),d.jsx("img",{src:hw(D),alt:`スライド ${O+1}`,className:"h-16 w-24 object-cover relative z-10",loading:"eager",decoding:"async",onLoad:M=>{const A=M.currentTarget.parentElement;A&&A.querySelectorAll(".animate-spin").forEach(j=>{j.parentElement&&(j.parentElement.style.display="none")})},onError:M=>{console.log(`サムネイル(${O})読み込みエラー`);const b=M.currentTarget;b.style.opacity="0.3";const A=b.parentElement;if(A){const N=document.createElement("div");N.className="absolute inset-0 flex items-center justify-center z-20 bg-black bg-opacity-50 text-white text-xs",N.textContent="読込エラー",A.appendChild(N)}}})]})},O))})]})})}var rP="Checkbox",[gse,Vge]=Ti(rP),[yse,Sse]=gse(rP),W3=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:c="on",onCheckedChange:l,form:u,...h}=e,[p,f]=m.useState(null),g=Qe(t,x=>f(x)),v=m.useRef(!1),w=p?u||!!p.closest("form"):!0,[y=!1,S]=ti({prop:i,defaultProp:s,onChange:l}),C=m.useRef(y);return m.useEffect(()=>{const x=p==null?void 0:p.form;if(x){const E=()=>S(C.current);return x.addEventListener("reset",E),()=>x.removeEventListener("reset",E)}},[p,S]),d.jsxs(yse,{scope:n,state:y,disabled:o,children:[d.jsx(Re.button,{type:"button",role:"checkbox","aria-checked":Mo(y)?"mixed":y,"aria-required":a,"data-state":Q3(y),"data-disabled":o?"":void 0,disabled:o,value:c,...h,ref:g,onKeyDown:be(e.onKeyDown,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:be(e.onClick,x=>{S(E=>Mo(E)?!0:!E),w&&(v.current=x.isPropagationStopped(),v.current||x.stopPropagation())})}),w&&d.jsx(wse,{control:p,bubbles:!v.current,name:r,value:c,checked:y,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Mo(s)?!1:s})]})});W3.displayName=rP;var K3="CheckboxIndicator",G3=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,s=Sse(K3,n);return d.jsx(ri,{present:r||Mo(s.state)||s.state===!0,children:d.jsx(Re.span,{"data-state":Q3(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});G3.displayName=K3;var wse=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:i,...s}=e,a=m.useRef(null),o=aS(n),c=cS(t);m.useEffect(()=>{const u=a.current,h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(o!==n&&f){const g=new Event("click",{bubbles:r});u.indeterminate=Mo(n),f.call(u,Mo(n)?!1:n),u.dispatchEvent(g)}},[o,n,r]);const l=m.useRef(Mo(n)?!1:n);return d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??l.current,...s,tabIndex:-1,ref:a,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Mo(e){return e==="indeterminate"}function Q3(e){return Mo(e)?"indeterminate":e?"checked":"unchecked"}var J3=W3,Cse=G3;const uS=m.forwardRef(({className:e,...t},n)=>d.jsx(J3,{ref:n,className:ve("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:d.jsx(Cse,{className:ve("flex items-center justify-center text-current"),children:d.jsx(tE,{className:"h-4 w-4"})})}));uS.displayName=J3.displayName;function mh(e){if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;let t=e;return t.startsWith("/")&&(t=t.substring(1)),`${window.location.origin}/${t}`}function Y3({id:e,onComplete:t,onExit:n}){const r=D=>D.message||D.content||D.description||"",{toast:i}=ln(),{sendEmergencyGuide:s}=uu(),{user:a}=Lr(),[o,c]=m.useState(!0),[l,u]=m.useState(null),[h,p]=m.useState(null),[f,g]=m.useState([]),[v,w]=m.useState({}),[y,S]=m.useState(!1),[C,x]=m.useState([]),E=m.useCallback(async()=>{c(!0);try{const D=await fetch(`/api/troubleshooting/${e}`,{credentials:"include",cache:"no-cache"});if(!D.ok)throw new Error(`Error ${D.status}: ${D.statusText}`);const O=await D.json();console.log("取得したトラブルシューティングデータ:",O);let M={...O};if(O&&O.steps&&O.steps.length>0){const b=O.steps.map(A=>({...A,message:A.message||A.content||""}));M.steps=b,u(M),p(M.steps[0])}else u(O)}catch(D){console.error("トラブルシューティングデータの取得に失敗しました:",D),i({title:"エラー",description:"トラブルシューティングデータの取得に失敗しました",variant:"destructive"})}finally{c(!1)}},[e,i]);m.useEffect(()=>{E()},[E]),m.useEffect(()=>{const D=O=>{if(O.detail&&O.detail.flowId){console.log("チャットからフローIDを受信:",O.detail.flowId);const M=O.detail.autoDisplay===!0;if(O.detail.flowId===e){console.log("既に同じフローを表示中です");return}if(O.detail.results&&O.detail.results.length>1&&!M){window.dispatchEvent(new CustomEvent("show-troubleshooting-list",{detail:{results:O.detail.results,searchText:O.detail.searchText||"検索結果"}}));return}window.location.href=`/emergency-guide/${O.detail.flowId}`}};return window.addEventListener("select-troubleshooting-flow",D),()=>{window.removeEventListener("select-troubleshooting-flow",D)}},[e]),m.useEffect(()=>{if(h!=null&&h.checklist){const D={};h.checklist.forEach((O,M)=>{D[`${M}`]=!1}),w(D)}},[h]),m.useEffect(()=>{if(!h)return;const D=M=>{const b=M.match(/[一-龠]+|[ぁ-ん]+|[ァ-ヴー]+|[a-zA-Z0-9]+/g)||[],A=["した","します","ます","です","ない","する","なる","いる","ある","れる","られる","ので","から","より","また","および","または","など","して","として","について","により"];return b.filter(N=>N.length>=2).filter(N=>!A.includes(N)).slice(0,5)};(async()=>{if(h.image||h.imageUrl){console.log("ステップに直接画像が指定されているため検索は実行しません",h.image||h.imageUrl);return}if(h.imageKeywords&&h.imageKeywords.length>0){console.log("画像キーワードによる検索を実行:",h.imageKeywords);try{const M=h.imageKeywords.join(" "),b=await WA(M);if(console.log("検索結果:",b),x(b),b&&b.length>0){const A=b[0],N=mh(A.file||A.url);console.log("画像表示: キーワード検索結果の画像を表示",N),window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:N,title:A.title||"関連画像",content:A.description||h.message}}))}}catch(M){console.error("画像検索実行エラー:",M)}}else{console.log("キーワードがないため、ステップのメッセージから検索を実行");try{const M=h.message||h.content||"",b=D(M);console.log("テキストから抽出したキーワード:",b);const A=b.join(" ");if(console.log("検索キーワード:",A),console.log("キーワードタイプ:",typeof A,A.length,Array.isArray(A)),!A.trim()){console.log("検索テキストが空のため検索をスキップします");return}const N=await WA(A);if(x(N),N&&N.length>0){const j=N[0],R=mh(j.file||j.url);console.log("画像表示: メッセージからの検索結果の画像を表示",R),window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:R,title:j.title||"関連画像",content:j.description||h.message}}))}}catch(M){console.error("メッセージを使った画像検索エラー:",M)}}})()},[h]);const P=m.useCallback(D=>{if(!l)return;h!=null&&h.id&&g(M=>[...M,h.id]);const O=l.steps.find(M=>M.id===D);if(O)p(O),w({});else{const M=l.steps.find(b=>b.id&&(D.startsWith(b.id)||b.id.startsWith(D)));if(M){console.log(`元のステップ「${D}」が見つからなかったため、類似ステップ「${M.id}」に移動します`),p(M),w({});return}if(h&&h.id){const b=l.steps.findIndex(A=>A.id===h.id);if(b!==-1&&b<l.steps.length-1){const A=l.steps[b+1];console.log(`指定されたステップ「${D}」が見つからなかったため、次のステップ「${A.id}」に移動します`),p(A),w({});return}}i({title:"警告",description:`次のステップ「${D}」が見つかりません`,variant:"default"})}},[h,l,i]),T=m.useCallback(()=>{if(f.length===0||!l)return;const D=[...f],O=D.pop();if(g(D),O){const M=l.steps.find(b=>b.id===O);M&&(p(M),w({}))}else p(l.steps[0]),w({})},[f,l]),_=D=>{w(O=>({...O,[D]:!O[D]}))};m.useCallback(()=>h!=null&&h.checklist?Object.values(v).every(D=>D):!0,[h,v]),m.useCallback(()=>{i({title:"完了",description:"応急処置ガイドの手順が完了しました"}),t==null||t()},[i,t]);const k=D=>{const O=D.nextStep||D.next;if(!O){if(l&&h){const M=l.steps.findIndex(b=>b.id===h.id);if(M!==-1&&M<l.steps.length-1){const A=l.steps[M+1].id||`step_${M+1}`;P(A);return}}i({title:"注意",description:`選択肢「${D.text||""}」の次のステップが指定されていません`,variant:"default"});return}P(O)};m.useCallback(()=>{if(!l||!h)return;if(!a){i({title:"通知",description:"ログインしていないため、ガイド内容をチャットに送信できません",variant:"default",duration:3e3});return}const D=l.title||l.id.replace(/_/g," ");let O=`**${D} - 現在の手順**

`;const M=h.message||h.content||"";if(O+=`${M}

`,h.checklist&&h.checklist.length>0&&(O+=`**確認項目**：
`,h.checklist.forEach(b=>{var R;const A=(R=h.checklist)==null?void 0:R.indexOf(b),j=A!==void 0&&v[`${A}`]===!0?"✓ ":"• ";O+=`${j}${b}
`})),h.image||h.imageUrl)O+=`
**関連画像**: ${h.image||h.imageUrl}
`;else if(C&&C.length>0){const b=C[0];O+=`
**関連画像**: ${b.file||b.url}
`,O+=`
**画像説明**: ${b.title||"関連画像"}
`,C.length>1&&(O+=`
**その他の関連画像**: ${C.length-1}件
`),h.imageKeywords&&h.imageKeywords.length>0&&(O+=`
**検索キーワード**: ${h.imageKeywords.join(", ")}
`)}s({title:D,content:O}),i({title:"送信完了",description:"現在表示中の手順をチャットに送信しました",duration:3e3}),n==null||n()},[l,h,s,n,a,i,C,v]);const z=m.useCallback(()=>{console.log("応急処置ガイド処理を終了します。チャットへの自動送信はスキップします。"),n==null||n()},[n]);return o?d.jsx(pt,{className:"w-full max-w-md mx-auto",children:d.jsx(St,{className:"pt-6",children:d.jsx("div",{className:"flex justify-center items-center h-40",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})})}):!l||!h?d.jsxs(pt,{className:"w-full max-w-md mx-auto",children:[d.jsx(xt,{children:d.jsx(At,{children:"エラー"})}),d.jsx(St,{children:d.jsx("p",{children:"応急処置ガイドのデータが見つかりませんでした。"})}),d.jsx(Rv,{children:d.jsx(ee,{onClick:z,variant:"outline",children:"戻る"})})]}):d.jsxs(pt,{className:"w-full max-w-md mx-auto",children:[d.jsxs(xt,{children:[d.jsx("div",{className:"flex justify-between items-center",children:d.jsx(At,{className:"text-xl",children:l.title||"応急処置ガイド"})}),h.title&&d.jsxs("div",{className:"mt-2",children:[d.jsx("span",{className:"text-sm font-medium text-gray-500",children:"手順: "}),d.jsx("span",{className:"font-semibold",children:h.title})]})]}),d.jsxs(St,{children:[d.jsx("div",{className:"mb-4",children:d.jsx("p",{className:"whitespace-pre-line",children:r(h)})}),(h.image||h.imageUrl)&&d.jsx("div",{className:"mb-4 flex justify-center",children:d.jsxs("div",{className:"relative flex justify-center items-center min-h-[200px] min-w-[200px] w-full max-w-md",children:[d.jsx("div",{className:"loading-placeholder absolute inset-0 flex items-center justify-center z-0 bg-gray-100 rounded-md",children:d.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-blue-600 border-t-transparent animate-spin"})}),d.jsx("img",{src:mh(h.image||h.imageUrl||""),alt:"応急処置ガイド図",className:"max-h-80 object-contain rounded-md cursor-pointer z-10 relative",onLoad:D=>{S(!1);const M=D.currentTarget.parentElement;M&&M.querySelectorAll(".loading-placeholder").forEach(N=>{N.classList.add("hidden")});const b=(l==null?void 0:l.id)||"応急処置ガイド";window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:h.image||h.imageUrl,title:b,content:h.message||"トラブルシューティング画像"}}))},onError:D=>{S(!1);const M=D.currentTarget.parentElement;if(M){M.querySelectorAll(".loading-placeholder").forEach(N=>{N.classList.add("hidden")});const A=document.createElement("div");A.className="absolute inset-0 flex items-center justify-center bg-red-50 text-red-600 rounded-md border border-red-200 z-20",A.innerHTML=`
                      <div class="text-center p-4">
                        <p class="font-medium">画像を読み込めませんでした</p>
                        <p class="text-sm mt-2">別の方法でご確認ください</p>
                      </div>
                    `,M.appendChild(A)}},onClick:()=>{const D=(l==null?void 0:l.id)||"応急処置ガイド";window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:h.image||h.imageUrl,title:D,content:h.message||"トラブルシューティング画像"}}))}})]})}),!h.image&&!h.imageUrl&&C&&C.length>0&&d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsxs("p",{className:"text-sm font-medium text-blue-700",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-image inline-block mr-1",children:[d.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),d.jsx("circle",{cx:"9",cy:"9",r:"2"}),d.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),"キーワードに基づく関連画像"]}),d.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:[C.length,"件の画像"]})]}),d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{className:"relative flex justify-center items-center min-h-[200px] min-w-[200px] w-full max-w-md",children:d.jsx("img",{src:mh(C[0].file||C[0].url),alt:C[0].title||"関連画像",className:"max-h-80 object-contain rounded-md cursor-pointer border border-blue-100 shadow-sm",onClick:()=>{window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:mh(C[0].file||C[0].url),title:C[0].title||"関連画像",content:C[0].description||h.message}}))}})})}),h.imageKeywords&&h.imageKeywords.length>0&&d.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:h.imageKeywords.map((D,O)=>d.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-full",children:D},O))})]}),h.options&&h.options.length>0&&d.jsxs("div",{className:"mb-4 space-y-2",children:[d.jsx("p",{className:"font-medium mb-2",children:"状態を選択してください："}),h.options.map((D,O)=>d.jsx(ee,{variant:"outline",className:"w-full text-left justify-start h-auto py-2 mb-2",onClick:()=>k(D),children:D.label||D.text},O))]}),h.checklist&&h.checklist.length>0&&d.jsxs("div",{className:"mb-4 space-y-3",children:[d.jsx("p",{className:"font-medium mb-2",children:"確認項目："}),h.checklist.map((D,O)=>d.jsxs("div",{className:"flex items-start space-x-2",children:[d.jsx(uS,{id:`checklist-${O}`,checked:v[`${O}`]||!1,onCheckedChange:()=>_(`${O}`)}),d.jsx("label",{htmlFor:`checklist-${O}`,className:"text-sm cursor-pointer",children:D})]},O))]})]}),d.jsxs(Rv,{className:"flex flex-col gap-3",children:[d.jsxs("div",{className:"flex justify-between w-full",children:[d.jsx(ee,{variant:"ghost",onClick:z,children:"閉じる"}),d.jsx("div",{className:"flex space-x-2",children:f.length>0&&d.jsx(ee,{variant:"outline",onClick:T,children:"戻る"})})]}),d.jsxs(ee,{variant:"secondary",className:"w-full",onClick:()=>{if(h&&l)try{const D=l.title||l.id.replace(/_/g," ");let O=`**${D} - 処理履歴**

`;const b=[...f,h.id].filter(Boolean).map(I=>l.steps.find($=>$.id===I)).filter(Boolean);let A=[];b.forEach((I,$)=>{const U=I.title||`ステップ ${$+1}`,G=I.message||I.content||"";let Y={title:U,description:G,selected:null,result:null};if($<b.length-1){const J=b[$+1];if(I.options&&I.options.length>0){const oe=I.options.find(V=>V.next===J.id||V.nextStep===J.id);oe&&(Y.selected=oe.text||oe.label||"次へ",Y.result=J.title)}}A.push(Y)});let N="";b.forEach((I,$)=>{const U=I.title||`ステップ ${$+1}`;$===0?N=U:N+=` → ${U}`});const j=h.message||h.content||"";if(O=`■ ${D}

`,O+=`【実施した手順の詳細】
`,A.forEach((I,$)=>{if(O+=`${$+1}. ${I.title}
`,I.description){const U=I.description.length>50?I.description.substring(0,50)+"...":I.description;O+=`   ${U}
`}I.selected&&(O+=`   選択: 「${I.selected}」 → ${I.result}
`),O+=`
`}),O+=`【フロー概要】
${N}

`,O+=`【現在の状態】
${h.title||"手順完了"}`,j){const I=j.length>100?j.substring(0,100)+"...":j;O+=`
${I}`}h.checklist&&h.checklist.length>0&&(O+=`

【確認項目】
`,h.checklist.forEach(I=>{var Y;const $=(Y=h.checklist)==null?void 0:Y.indexOf(I),G=$!==void 0&&v[`${$}`]===!0?"✓":"□";O+=`- [${G}] ${I}
`})),console.log("表示履歴を含めたステップをチャットに送信します");const R=localStorage.getItem("currentChatId")||"1";console.log("応急処置ガイド: チャットID",R,"にデータを送信します"),i({title:"送信中",description:"チャットに送信しています...",duration:2e3}),fetch(`/api/chats/${R}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:O,isUserMessage:!0})}).then(I=>{if(!I.ok)throw new Error(`エラーが発生しました (${I.status})`);return I.json()}).then(I=>{console.log("ユーザーメッセージ送信結果:",I),i({title:"送信完了",description:"表示した手順をチャットに送信しました",duration:3e3}),setTimeout(()=>{window.location.href="/chat"},1500)}).catch(I=>{console.error("チャット送信エラー:",I),i({title:"エラー",description:"チャットへの送信中にエラーが発生しました",variant:"destructive",duration:5e3})})}catch(D){console.error("緊急ガイド送信エラー:",D),i({title:"エラー",description:"チャットへの送信中にエラーが発生しました",variant:"destructive",duration:5e3})}},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-message-square mr-2",children:d.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"表示した手順をチャットに送信"]})]})]})}function xse({initialSearchKeyword:e=""}){const{toast:t}=ln(),[n,r]=m.useState(!0),[i,s]=m.useState([]),[a,o]=m.useState(e||""),[c,l]=m.useState([]),[u,h]=m.useState(null);m.useEffect(()=>{(async()=>{try{r(!0);const S=await fetch("/api/troubleshooting");if(!S.ok)throw new Error(`Error ${S.status}: ${S.statusText}`);const C=await S.json();s(C),l(C)}catch(S){console.error("トラブルシューティングデータの取得に失敗しました:",S),t({title:"エラー",description:"トラブルシューティングデータの取得に失敗しました",variant:"destructive"})}finally{r(!1)}})()},[t]),m.useEffect(()=>{if(e&&e.trim()&&i.length>0){const y=e.toLowerCase(),S=i.filter(C=>C.id.toLowerCase().includes(y)||C.description.toLowerCase().includes(y)||C.trigger&&C.trigger.some(x=>x.toLowerCase().includes(y)));l(S),S.length===1&&h(S[0].id)}},[e,i]),m.useEffect(()=>{if(!a.trim()){l(i);return}const y=a.toLowerCase(),S=i.filter(C=>C.id.toLowerCase().includes(y)||C.description.toLowerCase().includes(y)||C.trigger&&C.trigger.some(x=>x.toLowerCase().includes(y)));l(S)},[a,i]);const p=y=>{h(y)},f=()=>{h(null)},g=()=>{t({title:"完了",description:"トラブルシューティングが完了しました"}),h(null)},v=()=>{o("")},w=async()=>{if(a.trim())try{r(!0);const y=await fetch("/api/troubleshooting/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!y.ok)throw new Error(`Error ${y.status}: ${y.statusText}`);const S=await y.json();l(S)}catch(y){console.error("トラブルシューティング検索に失敗しました:",y),t({title:"エラー",description:"検索処理に失敗しました",variant:"destructive"})}finally{r(!1)}};return u?d.jsx("div",{className:"w-full max-w-4xl mx-auto p-4",children:d.jsx(Y3,{id:u,onComplete:g,onExit:f})}):d.jsxs(pt,{className:"w-full max-w-3xl mx-auto",children:[d.jsx(xt,{children:d.jsx(At,{className:"text-xl",children:"応急処置ガイド"})}),d.jsxs(St,{children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"以下から症状を選択するか、キーワードで検索してください。"}),d.jsxs("div",{className:"flex gap-2 mb-4",children:[d.jsx(at,{placeholder:"キーワードで検索...",value:a,onChange:y=>o(y.target.value),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),w())},className:"flex-1"}),d.jsx(ee,{variant:"outline",onClick:v,children:"クリア"}),d.jsx(ee,{onClick:w,children:"検索"})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[d.jsx("span",{className:"text-sm text-gray-600 self-center mr-1",children:"代表的なキーワード:"}),["エンジン","トルコン","ブレーキ","エアー","バッテリー"].map(y=>d.jsx(ee,{variant:"outline",size:"sm",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200",onClick:()=>{o(y),setTimeout(()=>w(),0)},children:y},y))]})]}),n?d.jsx("div",{className:"flex justify-center items-center py-12",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):c.length>0?d.jsx("div",{className:"grid grid-cols-1 gap-3",children:c.map(y=>d.jsx(ee,{variant:"outline",className:"justify-start h-auto py-3 px-4 text-left",onClick:()=>p(y.id),children:d.jsxs("div",{className:"w-full",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("p",{className:"font-medium",children:y.description}),d.jsx("span",{className:"text-xs bg-slate-100 text-slate-700 px-2 py-0.5 rounded-full",children:y.id.replace(/_/g," ")})]}),d.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[y.trigger&&y.trigger.slice(0,3).join(", "),y.trigger&&y.trigger.length>3?" など":""]})]})},y.id))}):d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-gray-500",children:"検索結果がありません。別のキーワードで試してください。"})})]})]})}function bse(){var M;const{user:e}=Lr(),{messages:t,isLoading:n,selectedText:r,setSelectedText:i,searchBySelectedText:s,searchResults:a,clearSearchResults:o,exportChatHistory:c,lastExportTimestamp:l,isExporting:u,hasUnexportedMessages:h,draftMessage:p,clearChatHistory:f,isClearing:g,isRecording:v}=uu(),[w,y]=m.useState(!1),{data:S,isLoading:C}=Jb({queryKey:["/api/chats/1/messages"],staleTime:1e3*60*5});m.useEffect(()=>{const b=()=>{const A=window.getSelection();A&&A.toString().trim().length>0?i(A.toString().trim()):i("")};return document.addEventListener("mouseup",b),()=>{document.removeEventListener("mouseup",b)}},[i]);const x=g?[]:(t==null?void 0:t.length)>0?t:S||[];m.useEffect(()=>{if(t!==void 0&&t.length===0){const b=localStorage.getItem("chat_cleared_timestamp");console.log("チャット履歴クリア後の状態を維持します");for(const j of Object.keys(localStorage))j.startsWith("rq-/api/chats/")&&localStorage.removeItem(j);ar.removeQueries({queryKey:["/api/chats/1/messages"]}),ar.setQueryData(["/api/chats/1/messages"],[]),window.queryClient=ar,(async()=>{try{const j=`/api/chats/1/messages?clear=true&_t=${Date.now()}`;await fetch(j,{credentials:"include",cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}),console.log("履歴クリアを確認するリクエストを送信しました")}catch(j){console.error("クリア要求送信エラー:",j)}})(),b&&(localStorage.removeItem("chat_cleared_timestamp"),console.log("チャットクリアタイムスタンプをクリア"));const N=setInterval(()=>{ar.setQueryData(["/api/chats/1/messages"],[])},500);setTimeout(()=>{clearInterval(N)},1e4)}},[t,ar]),ss();const E=()=>{h?y(!0):fetch("/api/auth/logout",{method:"POST",credentials:"include"}).then(()=>{console.log("ログアウト成功 - ログイン画面に遷移します"),ar.clear();for(const b of Object.keys(localStorage))b.startsWith("rq-")&&localStorage.removeItem(b);window.location.href="/login"}).catch(b=>{console.error("ログアウトエラー:",b),window.location.href="/login"})},P=async()=>{try{await c(),y(!1),await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),console.log("送信して終了: ログアウト成功 - ログイン画面に遷移します"),ar.clear();for(const b of Object.keys(localStorage))b.startsWith("rq-")&&localStorage.removeItem(b);window.location.href="/login"}catch(b){console.error("チャット終了エラー:",b),window.location.href="/login"}},T=VE(),_=UE();m.useEffect(()=>{document.body.style.overflow="auto",document.documentElement.style.overflow="auto";const b=()=>{const A=document.getElementById("mobile-search-slider"),N=document.querySelector(".chat-messages-container");if(A){if(N&&(N.style.width="",N.style.flex="",N.style.maxWidth=""),!a||a.length===0){A.style.display="none";return}else A.style.display="block";if(A.style.transform="translateY(100%)",_==="landscape"){A.style.position="fixed",A.style.maxHeight="100vh",A.style.height="100vh",A.style.top="0",A.style.bottom="0",A.style.width="40%",A.style.right="0",A.style.left="auto",A.style.transform="translateY(100%)",A.style.transition="transform 300ms ease-in-out",A.style.borderLeft="1px solid #bfdbfe",A.style.zIndex="10",A.style.backgroundColor="#eff6ff",A.style.paddingTop="0",A.style.overflowY="auto";const j=document.querySelector(".mobile-search-button");j&&(j.style.display="none")}else{A.style.maxHeight="70vh",A.style.width="100%",A.style.right="auto",A.style.left="0",A.style.top="auto",A.style.position="fixed",A.style.bottom="0",A.style.transform="translateY(100%)",A.style.transition="transform 300ms ease-in-out",A.style.borderLeft="none",A.style.borderTop="1px solid #bfdbfe";const j=document.querySelector(".mobile-search-button");j&&(j.style.bottom="20px",j.style.right="16px")}}};return b(),window.addEventListener("resize",b),window.addEventListener("orientationchange",b),()=>{window.removeEventListener("resize",b),window.removeEventListener("orientationchange",b);const A=document.querySelector(".chat-messages-container");A&&(A.style.width="",A.style.flex="",A.style.maxWidth="")}},[_,a]);const[k,z]=m.useState(!1),[D,O]=m.useState("");return d.jsxs("div",{className:"flex flex-col w-full h-full overflow-auto bg-blue-50 chat-layout-container overflow-scroll-container",style:{maxWidth:"100vw",overflowX:"hidden"},children:[d.jsxs("div",{className:"border-b border-blue-200 p-1 md:p-2 flex justify-between items-center bg-blue-100 mobile-landscape-header",style:{minHeight:"auto"},children:[d.jsx("div",{className:"flex items-center gap-1 md:gap-2",children:d.jsx(ee,{variant:"outline",size:"sm",onClick:f,disabled:g,className:"flex items-center gap-1 bg-blue-600 hover:bg-blue-700 text-white border-0",children:g?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"h-4 w-4 animate-spin text-white"}),d.jsx("span",{className:"text-lg",children:"履歴クリア"})]}):d.jsxs(d.Fragment,{children:[d.jsx(Ds,{className:"h-4 w-4 text-white"}),d.jsx("span",{className:"text-lg",children:"履歴クリア"})]})})}),d.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[d.jsx(ee,{variant:"outline",size:"sm",onClick:c,disabled:u||!h,className:"flex items-center gap-1 border-green-400 bg-green-50 hover:bg-green-100 text-green-700",children:u?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"h-3 w-3 animate-spin text-green-600"}),d.jsx("span",{className:"text-lg",children:"送信中"})]}):d.jsxs(d.Fragment,{children:[d.jsx(SL,{className:"h-3 w-3 text-green-600"}),d.jsx("span",{className:"text-lg",children:"履歴送信"})]})}),d.jsx(ee,{variant:"destructive",size:"sm",onClick:E,className:"flex items-center gap-1 bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white border-0",children:d.jsx("span",{className:"text-lg",children:"チャット終了"})})]})]}),d.jsx("div",{className:"w-full flex justify-center items-center p-2 bg-gradient-to-r from-blue-100 to-blue-50 border-b border-blue-200",children:d.jsxs(ee,{variant:"default",size:"lg",onClick:()=>{const b=document.querySelector('textarea, input[type="text"]');if(b){const A=b.value.trim();O(A)}else O("");z(!0)},className:"flex items-center gap-2 border-2 border-white bg-blue-600 hover:bg-blue-700 text-white font-bold px-6 py-3 shadow-md rounded-lg",children:[d.jsx(IR,{className:"h-6 w-6 text-white"}),d.jsx("span",{className:"text-lg font-bold",children:"応急処置ガイド"})]})}),d.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-auto chat-layout-container",style:{minHeight:"75vh"},children:[d.jsxs("div",{className:"flex-1 flex flex-col h-full min-h-[75vh] overflow-auto md:w-2/3 bg-white chat-messages-container",style:{maxWidth:"100%",overflowX:"hidden"},children:[d.jsxs("div",{id:"chatMessages",className:"flex-1 overflow-y-auto p-2 sm:p-3 md:p-4 md:px-6 space-y-4 min-w-[300px]",style:{minHeight:"60vh"},children:[C||n?d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx("p",{className:"text-blue-700",children:"メッセージを読み込み中..."})}):!x||x.length===0?d.jsx("div",{className:`flex items-center justify-center h-full text-center ${v?"hidden":""}`,children:d.jsxs("div",{children:[d.jsx("p",{className:"text-xl font-semibold mb-2 text-blue-800",children:"会話を始めましょう"}),d.jsx("p",{className:"text-sm text-blue-500",children:"保守用車に関する質問を入力するか、マイクボタンをタップして話しかけてください。"})]})}):d.jsx(d.Fragment,{children:x.map((b,A)=>d.jsx("div",{className:"w-full md:max-w-2xl mx-auto",children:d.jsx($A,{message:b})},A))}),p&&p.content&&d.jsx("div",{className:"w-full md:max-w-2xl mx-auto",children:d.jsx($A,{message:{id:-1,content:p.content,senderId:1,isAiResponse:!1,timestamp:new Date,media:(M=p.media)==null?void 0:M.map((b,A)=>({id:A,messageId:-1,...b}))},isDraft:!0})}),d.jsx("div",{className:"hidden",children:d.jsxs("p",{children:["draftMessage: ",p?JSON.stringify(p):"null"]})})]}),h&&d.jsxs("div",{className:"bg-blue-50 p-2 text-sm text-blue-800 flex items-center justify-center border-t border-b border-blue-200",children:[d.jsx(xL,{className:"h-4 w-4 mr-2 text-blue-600"}),d.jsx("span",{children:l?"前回の送信以降、新しいメッセージがあります。送信してください。":"まだチャット履歴が送信されていません。"})]}),r&&d.jsx(Zne,{text:r,onSearch:s}),d.jsx(Yne,{})]}),d.jsx("div",{className:"hidden md:block md:w-1/3 border-l border-blue-200 bg-blue-50 overflow-y-auto search-results-panel",style:{minHeight:"75vh"},children:d.jsxs("div",{className:"w-full h-full",children:[d.jsx("div",{className:"sticky top-0 bg-blue-600 text-white py-2 px-4 font-medium z-10",children:d.jsx("h2",{className:"text-lg",children:"関係画像"})}),d.jsx("div",{className:"p-2",children:d.jsx(Bre,{results:a||[],onClear:o})})]})}),a&&a.length>0&&T&&_==="portrait"&&d.jsx("div",{className:"fixed bottom-20 right-4 md:hidden mobile-search-button",children:d.jsx(ee,{onClick:()=>{const b=document.getElementById("mobile-search-slider");b&&(b.classList.contains("search-panel-visible")?(b.classList.remove("search-panel-visible"),b.style.transform="translateY(100%)"):(b.classList.add("search-panel-visible"),b.style.transform="none"))},className:"rounded-full w-12 h-12 bg-blue-500 hover:bg-blue-600 shadow-lg flex items-center justify-center",children:d.jsx("span",{className:"text-white font-bold",children:a.length})})}),d.jsx("div",{id:"mobile-search-slider",className:`fixed transition-transform duration-300 ease-in-out md:hidden z-50 ${_==="landscape"?"landscape-search-panel inset-y-0 right-0 w-2/5":"portrait-search-panel inset-x-0 bottom-0"}`,style:{display:a&&a.length>0?"block":"none",transform:"translateY(100%)"},children:d.jsxs("div",{className:`bg-blue-50 overflow-y-auto ${_==="landscape"?"h-full border-l border-blue-200":"border-t border-blue-200 rounded-t-xl"}`,style:{maxHeight:_==="landscape"?"100vh":"70vh"},children:[d.jsxs("div",{className:"sticky top-0 bg-blue-600 text-white py-2 px-4 z-10 flex justify-between items-center",children:[d.jsx("h2",{className:"text-lg font-medium",children:"関係画像"}),d.jsx("button",{onClick:()=>{const b=document.getElementById("mobile-search-slider");b&&(b.classList.remove("search-panel-visible"),b.style.transform="translateY(100%)")},className:"text-white hover:text-blue-200 text-xl",children:_==="portrait"?"✕":""})]}),d.jsx("div",{className:"search-results-wrapper p-2",children:d.jsx("div",{className:"flex flex-col gap-4",children:a.map(b=>d.jsx("div",{className:"thumbnail-item rounded-lg overflow-hidden bg-transparent shadow-sm w-full hover:bg-blue-50 transition-colors",onClick:()=>{window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:b.url,pngFallbackUrl:b.pngFallbackUrl,title:b.title,content:b.content,metadata_json:b.metadata_json,all_slides:b.all_slides}}))},children:b.url?d.jsx("div",{className:"flex justify-center items-center w-full bg-transparent border border-blue-200 rounded-lg",children:d.jsx("div",{className:"relative w-full h-24 flex-shrink-0",children:d.jsx("img",{src:b.url,alt:b.title||"応急処置サポート",className:"w-full h-full object-contain bg-white p-1",loading:"eager",decoding:"async",onError:A=>{const N=A.currentTarget;b.pngFallbackUrl&&b.url!==b.pngFallbackUrl&&(console.log("SVG読み込みエラー、PNG代替に切り替え:",b.url,"->",b.pngFallbackUrl),N.src=b.pngFallbackUrl)}})})}):d.jsxs("div",{className:"flex h-24 w-full bg-transparent border border-blue-200 rounded-lg",children:[d.jsx("div",{className:"relative w-24 h-24 flex-shrink-0 flex items-center justify-center bg-blue-50",children:d.jsx("div",{className:"h-12 w-12 text-blue-600",children:"📄"})}),d.jsx("div",{className:"flex-1 p-2 flex flex-col justify-center",children:d.jsx("h3",{className:"text-sm font-bold text-blue-700",children:b.title||"ドキュメント"})})]})},b.id))})})]})})]}),d.jsx(mr,{open:w,onOpenChange:y,children:d.jsxs(Kn,{className:"bg-blue-50 border border-blue-200",children:[d.jsxs(vr,{className:"border-b border-blue-200 pb-3",children:[d.jsx(Gn,{className:"text-blue-800 text-lg font-bold",children:"チャット履歴が未送信です"}),d.jsx(Ir,{className:"text-blue-700",children:"まだ送信されていないチャット履歴があります。このまま終了すると、履歴が保存されません。"})]}),d.jsxs("div",{className:"flex justify-between mt-4",children:[d.jsx(ee,{variant:"outline",onClick:()=>y(!1),className:"border-blue-300 text-blue-700 hover:bg-blue-100",children:"キャンセル"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ee,{variant:"destructive",onClick:()=>{y(!1),fetch("/api/auth/logout",{method:"POST",credentials:"include"}).then(()=>{console.log("送信せずに終了: ログアウト成功"),ar.clear();for(const b of Object.keys(localStorage))b.startsWith("rq-")&&localStorage.removeItem(b);window.location.href="/login"}).catch(b=>{console.error("送信せずに終了: ログアウトエラー:",b),window.location.href="/login"})},className:"bg-red-500 hover:bg-red-600",children:"送信せずに終了"}),d.jsx(ee,{variant:"default",onClick:P,disabled:u,className:"bg-blue-600 hover:bg-blue-700",children:u?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"h-4 w-4 animate-spin mr-2"}),d.jsx("span",{children:"送信中..."})]}):d.jsx("span",{children:"送信して終了"})})]})]})]})}),d.jsx(Yie,{}),d.jsx(vse,{}),d.jsx(mr,{open:k,onOpenChange:z,children:d.jsxs(Kn,{className:`bg-blue-50 border border-blue-200 ${T?"w-[95%] max-w-md":"max-w-3xl"}`,children:[d.jsxs(vr,{className:"border-b border-blue-200 pb-3",children:[d.jsxs(Gn,{className:"text-blue-800 text-lg font-bold flex items-center gap-2",children:[d.jsx(IR,{className:"h-5 w-5 text-red-500"}),d.jsx("span",{children:"応急処置ガイド"})]}),d.jsx(Ir,{className:"text-blue-700",children:"症状を選択するか、キーワードで検索してください"})]}),d.jsx("div",{className:`overflow-y-auto py-2 ${T?"max-h-[70vh]":"max-h-[75vh]"}`,children:d.jsx(xse,{initialSearchKeyword:D})}),d.jsx(Zr,{children:d.jsx(ee,{variant:"outline",onClick:()=>z(!1),className:"w-full border-blue-300 text-blue-700 hover:bg-blue-100",children:"閉じる"})})]})})]})}const Vl=m.forwardRef(({className:e,...t},n)=>d.jsx("div",{className:"relative w-full overflow-auto",children:d.jsx("table",{ref:n,className:ve("w-full caption-bottom text-sm",e),...t})}));Vl.displayName="Table";const Ul=m.forwardRef(({className:e,...t},n)=>d.jsx("thead",{ref:n,className:ve("[&_tr]:border-b",e),...t}));Ul.displayName="TableHeader";const ql=m.forwardRef(({className:e,...t},n)=>d.jsx("tbody",{ref:n,className:ve("[&_tr:last-child]:border-0",e),...t}));ql.displayName="TableBody";const Ese=m.forwardRef(({className:e,...t},n)=>d.jsx("tfoot",{ref:n,className:ve("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Ese.displayName="TableFooter";const Tr=m.forwardRef(({className:e,...t},n)=>d.jsx("tr",{ref:n,className:ve("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Tr.displayName="TableRow";const Lt=m.forwardRef(({className:e,...t},n)=>d.jsx("th",{ref:n,className:ve("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Lt.displayName="TableHead";const Tt=m.forwardRef(({className:e,...t},n)=>d.jsx("td",{ref:n,className:ve("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Tt.displayName="TableCell";const Pse=m.forwardRef(({className:e,...t},n)=>d.jsx("caption",{ref:n,className:ve("mt-4 text-sm text-muted-foreground",e),...t}));Pse.displayName="TableCaption";const Rse=()=>{const[e,t]=m.useState(null),[n,r]=m.useState(!1),[i,s]=m.useState([]),[a,o]=m.useState(!1),{toast:c}=ln(),l=m.useRef(null),[u,h]=m.useState({keepOriginalFile:!1,extractKnowledgeBase:!0,extractImageSearch:!0,createQA:!0});m.useEffect(()=>{x()},[]);const p=P=>{P.preventDefault(),P.stopPropagation()},f=P=>{if(P.preventDefault(),P.stopPropagation(),P.dataTransfer.files&&P.dataTransfer.files.length>0){const T=P.dataTransfer.files[0];t(T)}},g=()=>{l.current&&l.current.click()},v=P=>{P.target.files&&P.target.files.length>0&&(t(P.target.files[0]),P.target.value="")},w=P=>{h(T=>({...T,[P]:!T[P]}))},y=P=>{if(P===0)return"0 Bytes";const T=1024,_=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(P)/Math.log(T));return parseFloat((P/Math.pow(T,k)).toFixed(2))+" "+_[k]},S=async()=>{if(!e){c({title:"ファイルが選択されていません",description:"処理するファイルを選択してください",variant:"destructive"});return}const P=[".pdf",".docx",".txt",".xlsx",".pptx",".ppt",".doc"],T=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();if(!P.includes(T)){c({title:"未対応のファイル形式",description:"PDF, Word, Excel, PowerPoint, またはテキストファイルのみ処理可能です",variant:"destructive"});return}r(!0);try{const _=new FormData;_.append("file",e),_.append("keepOriginalFile",u.keepOriginalFile.toString()),_.append("extractKnowledgeBase",u.extractKnowledgeBase.toString()),_.append("extractImageSearch",u.extractImageSearch.toString()),_.append("createQA",u.createQA.toString());const k=await fetch("/api/data-processor/process",{method:"POST",body:_});if(!k.ok){const D=await k.text();throw new Error(D||"処理に失敗しました")}const z=await k.json();c({title:"処理成功",description:`${e.name} を処理しました。${z.message||""}`}),window.dispatchEvent(new CustomEvent("image-search-data-updated")),x(),t(null)}catch(_){console.error("Processing error:",_),c({title:"処理エラー",description:_ instanceof Error?_.message:"未知のエラーが発生しました",variant:"destructive"})}finally{r(!1)}},C=async(P,T)=>{try{const _=await fetch(`/api/knowledge/${P}`,{method:"DELETE"});if(!_.ok){const k=await _.text();throw new Error(k||"削除に失敗しました")}c({title:"削除成功",description:`${T} を削除しました`}),x(),window.dispatchEvent(new CustomEvent("image-search-data-updated"))}catch(_){console.error("Delete error:",_),c({title:"削除エラー",description:_ instanceof Error?_.message:"未知のエラーが発生しました",variant:"destructive"})}},x=async()=>{o(!0);try{const P=await fetch("/api/knowledge");if(!P.ok)throw new Error("文書の取得に失敗しました");const T=await P.json();s(T)}catch(P){console.error("Fetch documents error:",P),c({title:"エラー",description:"文書リストの取得に失敗しました",variant:"destructive"})}finally{o(!1)}},E=P=>{try{const T=new Date(P);return new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(T)}catch{return P||"不明"}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-blue-100",children:[d.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:"ファイルアップロード処理"}),d.jsxs("div",{className:`border-2 border-dashed border-blue-300 rounded-lg p-8 mb-4 text-center cursor-pointer bg-blue-50 hover:bg-blue-100 transition-colors ${e?"border-blue-600 bg-blue-100":""}`,onDragOver:p,onDrop:f,onClick:g,children:[d.jsx("input",{ref:l,type:"file",className:"hidden",accept:".pdf,.docx,.doc,.txt,.xlsx,.xls,.pptx,.ppt",onChange:v}),d.jsxs("div",{className:"flex flex-col items-center justify-center",children:[d.jsx(ic,{className:"w-12 h-12 text-blue-700 mb-2"}),e?d.jsxs("div",{children:[d.jsx("p",{className:"text-lg font-medium text-blue-700",children:e.name}),d.jsxs("p",{className:"text-sm text-blue-600",children:["(",y(e.size),")"]})]}):d.jsxs("div",{children:[d.jsx("p",{className:"text-lg font-medium text-blue-700",children:"ここにファイルをドラッグ&ドロップ"}),d.jsxs("p",{className:"text-sm text-gray-500",children:["または",d.jsx("span",{className:"text-blue-600 font-medium",children:"クリックして選択"})]})]})]})]}),d.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[d.jsx(uS,{id:"keepOriginalFile",checked:u.keepOriginalFile,onCheckedChange:()=>w("keepOriginalFile")}),d.jsx(Be,{htmlFor:"keepOriginalFile",className:"cursor-pointer",children:"元ファイルを保存する"})]}),d.jsx("div",{className:"flex justify-center",children:d.jsx(ee,{onClick:S,disabled:!e||n,className:"w-full max-w-md bg-blue-600 hover:bg-blue-700 text-white py-2 rounded",children:n?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"mr-2 h-5 w-5 animate-spin"}),"処理中..."]}):d.jsxs(d.Fragment,{children:[d.jsx(zC,{className:"mr-2 h-5 w-5"}),"処理開始"]})})})]}),d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-blue-100",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:"処理済み文書一覧"}),d.jsx(ee,{onClick:x,variant:"outline",className:"text-blue-600 border-blue-600",disabled:a,children:a?d.jsx(Wn,{className:"h-4 w-4 animate-spin"}):d.jsx(FC,{className:"h-4 w-4"})})]}),a?d.jsxs("div",{className:"flex items-center justify-center py-8",children:[d.jsx(Wn,{className:"h-8 w-8 animate-spin text-blue-600"}),d.jsx("span",{className:"ml-2 text-blue-600",children:"読み込み中..."})]}):i.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs(Vl,{children:[d.jsx(Ul,{children:d.jsxs(Tr,{children:[d.jsx(Lt,{children:"タイトル"}),d.jsx(Lt,{children:"種類"}),d.jsx(Lt,{children:"追加日時"}),d.jsx(Lt,{className:"text-right",children:"操作"})]})}),d.jsx(ql,{children:i.map(P=>d.jsxs(Tr,{children:[d.jsx(Tt,{className:"font-medium",children:P.title||"無題"}),d.jsx(Tt,{children:P.type||"不明"}),d.jsx(Tt,{children:E(P.addedAt)}),d.jsx(Tt,{className:"text-right",children:d.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>C(P.id,P.title),className:"text-red-600 hover:text-red-800 hover:bg-red-100",children:d.jsx(Ds,{className:"h-4 w-4"})})})]},P.id))})]})}):d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(zC,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),d.jsx("p",{children:"処理済み文書はありません"})]})]})]})};function _se(){const{user:e}=Lr();return d.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[d.jsxs("div",{className:"p-4 border-b border-neutral-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[d.jsx("h2",{className:"font-semibold text-lg text-indigo-600",children:"総括データ処理"}),d.jsx("p",{className:"text-sm text-neutral-500",children:"文書のアップロードと処理により、AIナレッジベース、画像検索、Q&Aデータを一度に生成します"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:d.jsx("div",{className:"mx-auto max-w-5xl",children:d.jsx(Rse,{})})})]})}function Lp(e,[t,n]){return Math.min(n,Math.max(t,e))}var Z3=["PageUp","PageDown"],X3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],eB={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},fu="Slider",[vx,Tse,Ase]=of(fu),[tB,Uge]=Ti(fu,[Ase]),[Nse,dS]=tB(fu),nB=m.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:l=[r],value:u,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:f=!1,form:g,...v}=e,w=m.useRef(new Set),y=m.useRef(0),C=a==="horizontal"?Ise:jse,[x=[],E]=ti({prop:u,defaultProp:l,onChange:D=>{var M;(M=[...w.current][y.current])==null||M.focus(),h(D)}}),P=m.useRef(x);function T(D){const O=Lse(x,D);z(D,O)}function _(D){z(D,y.current)}function k(){const D=P.current[y.current];x[y.current]!==D&&p(x)}function z(D,O,{commit:M}={commit:!1}){const b=Bse(s),A=Vse(Math.round((D-r)/s)*s+r,b),N=Lp(A,[r,i]);E((j=[])=>{const R=Ose(j,N,O);if($se(R,c*s)){y.current=R.indexOf(N);const I=String(R)!==String(j);return I&&M&&p(R),I?R:j}else return j})}return d.jsx(Nse,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:i,valueIndexToChangeRef:y,thumbs:w.current,values:x,orientation:a,form:g,children:d.jsx(vx.Provider,{scope:e.__scopeSlider,children:d.jsx(vx.Slot,{scope:e.__scopeSlider,children:d.jsx(C,{"aria-disabled":o,"data-disabled":o?"":void 0,...v,ref:t,onPointerDown:be(v.onPointerDown,()=>{o||(P.current=x)}),min:r,max:i,inverted:f,onSlideStart:o?void 0:T,onSlideMove:o?void 0:_,onSlideEnd:o?void 0:k,onHomeKeyDown:()=>!o&&z(r,0,{commit:!0}),onEndKeyDown:()=>!o&&z(i,x.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:O})=>{if(!o){const A=Z3.includes(D.key)||D.shiftKey&&X3.includes(D.key)?10:1,N=y.current,j=x[N],R=s*A*O;z(j+R,N,{commit:!0})}}})})})})});nB.displayName=fu;var[rB,iB]=tB(fu,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ise=m.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:c,onStepKeyDown:l,...u}=e,[h,p]=m.useState(null),f=Qe(t,C=>p(C)),g=m.useRef(),v=hu(i),w=v==="ltr",y=w&&!s||!w&&s;function S(C){const x=g.current||h.getBoundingClientRect(),E=[0,x.width],T=iP(E,y?[n,r]:[r,n]);return g.current=x,T(C-x.left)}return d.jsx(rB,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:d.jsx(sB,{dir:v,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const x=S(C.clientX);a==null||a(x)},onSlideMove:C=>{const x=S(C.clientX);o==null||o(x)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:C=>{const E=eB[y?"from-left":"from-right"].includes(C.key);l==null||l({event:C,direction:E?-1:1})}})})}),jse=m.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onStepKeyDown:c,...l}=e,u=m.useRef(null),h=Qe(t,u),p=m.useRef(),f=!i;function g(v){const w=p.current||u.current.getBoundingClientRect(),y=[0,w.height],C=iP(y,f?[r,n]:[n,r]);return p.current=w,C(v-w.top)}return d.jsx(rB,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:d.jsx(sB,{"data-orientation":"vertical",...l,ref:h,style:{...l.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const w=g(v.clientY);s==null||s(w)},onSlideMove:v=>{const w=g(v.clientY);a==null||a(w)},onSlideEnd:()=>{p.current=void 0,o==null||o()},onStepKeyDown:v=>{const y=eB[f?"from-bottom":"from-top"].includes(v.key);c==null||c({event:v,direction:y?-1:1})}})})}),sB=m.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:c,...l}=e,u=dS(fu,n);return d.jsx(Re.span,{...l,ref:t,onKeyDown:be(e.onKeyDown,h=>{h.key==="Home"?(a(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):Z3.concat(X3).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:be(e.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(p)?p.focus():r(h)}),onPointerMove:be(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&i(h)}),onPointerUp:be(e.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),s(h))})})}),oB="SliderTrack",aB=m.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=dS(oB,n);return d.jsx(Re.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:t})});aB.displayName=oB;var gx="SliderRange",cB=m.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=dS(gx,n),s=iB(gx,n),a=m.useRef(null),o=Qe(t,a),c=i.values.length,l=i.values.map(p=>uB(p,i.min,i.max)),u=c>1?Math.min(...l):0,h=100-Math.max(...l);return d.jsx(Re.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:o,style:{...e.style,[s.startEdge]:u+"%",[s.endEdge]:h+"%"}})});cB.displayName=gx;var yx="SliderThumb",lB=m.forwardRef((e,t)=>{const n=Tse(e.__scopeSlider),[r,i]=m.useState(null),s=Qe(t,o=>i(o)),a=m.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return d.jsx(kse,{...e,ref:s,index:a})}),kse=m.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:i,...s}=e,a=dS(yx,n),o=iB(yx,n),[c,l]=m.useState(null),u=Qe(t,S=>l(S)),h=c?a.form||!!c.closest("form"):!0,p=cS(c),f=a.values[r],g=f===void 0?0:uB(f,a.min,a.max),v=Dse(r,a.values.length),w=p==null?void 0:p[o.size],y=w?zse(w,g,o.direction):0;return m.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),d.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${g}% + ${y}px)`},children:[d.jsx(vx.ItemSlot,{scope:e.__scopeSlider,children:d.jsx(Re.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":a.min,"aria-valuenow":f,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:u,style:f===void 0?{display:"none"}:e.style,onFocus:be(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),h&&d.jsx(Mse,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:f},r)]})});lB.displayName=yx;var Mse=e=>{const{value:t,...n}=e,r=m.useRef(null),i=aS(t);return m.useEffect(()=>{const s=r.current,a=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(a,"value").set;if(i!==t&&c){const l=new Event("input",{bubbles:!0});c.call(s,t),s.dispatchEvent(l)}},[i,t]),d.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function Ose(e=[],t,n){const r=[...e];return r[n]=t,r.sort((i,s)=>i-s)}function uB(e,t,n){const s=100/(n-t)*(e-t);return Lp(s,[0,100])}function Dse(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Lse(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),r=Math.min(...n);return n.indexOf(r)}function zse(e,t,n){const r=e/2,s=iP([0,50],[0,r]);return(r-s(t)*n)*n}function Fse(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function $se(e,t){if(t>0){const n=Fse(e);return Math.min(...n)>=t}return!0}function iP(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Bse(e){return(String(e).split(".")[1]||"").length}function Vse(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var dB=nB,Use=aB,qse=cB,Hse=lB;const hB=m.forwardRef(({className:e,...t},n)=>d.jsxs(dB,{ref:n,className:ve("relative flex w-full touch-none select-none items-center",e),...t,children:[d.jsx(Use,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:d.jsx(qse,{className:"absolute h-full bg-primary"})}),d.jsx(Hse,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));hB.displayName=dB.displayName;function pB({open:e,title:t,message:n,onCancel:r,onConfirm:i}){return d.jsx(mr,{open:e,onOpenChange:r,children:d.jsxs(Kn,{className:"sm:max-w-md",children:[d.jsxs(vr,{children:[d.jsx("div",{className:"text-orange-500 mb-2",children:d.jsx(xL,{className:"h-8 w-8"})}),d.jsx(Gn,{className:"text-lg font-semibold",children:t}),d.jsx(Ir,{className:"mt-2 text-sm",children:n})]}),d.jsxs(Zr,{className:"flex justify-end space-x-2 pt-2",children:[d.jsx(ee,{variant:"outline",onClick:r,children:"キャンセル"}),d.jsx(ee,{variant:"default",className:"bg-red-500 hover:bg-red-600 text-white",onClick:i,children:"OK"})]})]})})}function Wse(){const{user:e,logout:t}=Lr(),{toast:n}=ln(),[r,i]=m.useState(!1),[s,a]=m.useState(!0),[o,c]=m.useState(!0),[l,u]=m.useState([80]),[h,p]=m.useState(!1),[f,g]=m.useState(!0),[v,w]=m.useState(!0),[y,S]=m.useState(!1);m.useEffect(()=>{(()=>{try{const T=localStorage.getItem("emergencyRecoverySettings");if(T){const _=JSON.parse(T);_.notifications!==void 0&&a(_.notifications),_.textToSpeech!==void 0&&c(_.textToSpeech),_.speechVolume!==void 0&&u(_.speechVolume),_.darkMode!==void 0&&p(_.darkMode),_.autoSave!==void 0&&g(_.autoSave),_.useOnlyKnowledgeBase!==void 0&&w(_.useOnlyKnowledgeBase),_.usePerplexity!==void 0&&S(_.usePerplexity)}}catch(T){console.error("設定の読み込みに失敗しました:",T)}})()},[]),m.useEffect(()=>{(()=>{try{const T={notifications:s,textToSpeech:o,speechVolume:l,darkMode:h,autoSave:f,useOnlyKnowledgeBase:v,usePerplexity:y};localStorage.setItem("emergencyRecoverySettings",JSON.stringify(T)),localStorage.setItem("useOnlyKnowledgeBase",v.toString()),localStorage.setItem("usePerplexity",y.toString())}catch(T){console.error("設定の保存に失敗しました:",T)}})()},[s,o,l,h,f,v,y]);const C=()=>{try{const P={notifications:s,textToSpeech:o,speechVolume:l,darkMode:h,autoSave:f,useOnlyKnowledgeBase:v,usePerplexity:y};localStorage.setItem("emergencyRecoverySettings",JSON.stringify(P)),localStorage.setItem("useOnlyKnowledgeBase",v.toString()),localStorage.setItem("usePerplexity",y.toString()),n({title:"設定を保存しました",description:"アプリケーション設定が正常に保存されました。"})}catch{n({title:"設定の保存に失敗しました",description:"設定の保存中にエラーが発生しました。",variant:"destructive"})}},x=async()=>{i(!0)},E=async()=>{try{await t()}catch{n({title:"ログアウト失敗",description:"ログアウト中にエラーが発生しました。",variant:"destructive"})}finally{i(!1)}};return d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-5xl mx-auto w-full bg-gradient-to-br from-blue-50 to-indigo-50",children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("h1",{className:"text-2xl font-bold flex items-center bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:[d.jsx($C,{className:"mr-2 h-6 w-6 text-indigo-500"}),"設定"]}),d.jsx("p",{className:"text-blue-400",children:"アプリケーションの設定を管理します"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs(pt,{className:"border border-blue-200 shadow-md overflow-hidden",children:[d.jsx(xt,{className:"pb-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:d.jsxs(At,{className:"text-lg flex items-center",children:[d.jsx(EL,{className:"mr-2 h-5 w-5"}),"ユーザープロフィール"]})}),d.jsx(St,{className:"bg-white",children:d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{className:"flex items-center justify-between py-2",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-blue-800",children:e==null?void 0:e.displayName}),d.jsx("p",{className:"text-sm text-blue-400",children:e==null?void 0:e.username}),d.jsx("p",{className:"text-sm text-blue-400",children:(e==null?void 0:e.department)||"部署未設定"})]}),d.jsx("div",{className:`text-white text-xs px-3 py-1 rounded-full ${(e==null?void 0:e.role)==="admin"?"bg-gradient-to-r from-purple-500 to-indigo-500":"bg-gradient-to-r from-blue-500 to-green-500"}`,children:(e==null?void 0:e.role)==="admin"?"管理者":"一般ユーザー"})]})})})]}),d.jsxs(pt,{className:"border border-blue-200 shadow-md overflow-hidden",children:[d.jsx(xt,{className:"pb-2 bg-gradient-to-r from-blue-400 to-sky-500 text-white",children:d.jsxs(At,{className:"text-lg flex items-center",children:[d.jsx(f7,{className:"mr-2 h-5 w-5"}),"通知設定"]})}),d.jsx(St,{className:"bg-white",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between py-2",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-blue-700",children:"通知を有効にする"}),d.jsx("p",{className:"text-sm text-blue-400",children:"新しいメッセージの通知を受け取る"})]}),d.jsx(no,{checked:s,onCheckedChange:a,className:"data-[state=checked]:bg-blue-500"})]}),d.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-blue-700",children:"音声読み上げ"}),d.jsx("p",{className:"text-sm text-blue-400",children:"AI応答を音声で読み上げる"})]}),d.jsx(no,{checked:o,onCheckedChange:c,className:"data-[state=checked]:bg-blue-500"})]}),o&&d.jsxs("div",{className:"py-2 border-t border-blue-100 pt-3",children:[d.jsx("p",{className:"font-medium mb-2 text-blue-700",children:"音声の音量"}),d.jsx(hB,{value:l,onValueChange:u,max:100,step:1,className:"data-[state=checked]:bg-blue-500"}),d.jsxs("div",{className:"flex justify-between mt-1",children:[d.jsx(PL,{className:"h-4 w-4 text-blue-400"}),d.jsxs("span",{className:"text-sm text-blue-500 font-medium",children:[l[0],"%"]})]})]})]})})]}),d.jsxs(pt,{className:"border border-blue-200 shadow-md overflow-hidden",children:[d.jsx(xt,{className:"pb-2 bg-gradient-to-r from-indigo-500 to-blue-600 text-white",children:d.jsxs(At,{className:"text-lg flex items-center",children:[d.jsx($C,{className:"mr-2 h-5 w-5"}),"アプリ設定"]})}),d.jsx(St,{className:"bg-white",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between py-2",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-indigo-700",children:"ダークモード"}),d.jsx("p",{className:"text-sm text-indigo-400",children:"暗い色のテーマを使用する"})]}),d.jsx(no,{checked:h,onCheckedChange:p,className:"data-[state=checked]:bg-indigo-500"})]}),d.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-indigo-700",children:"自動保存"}),d.jsx("p",{className:"text-sm text-indigo-400",children:"会話を自動的に保存する"})]}),d.jsx(no,{checked:f,onCheckedChange:g,className:"data-[state=checked]:bg-indigo-500"})]}),d.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-indigo-700",children:"独自の技術資料のみを使用"}),d.jsx("p",{className:"text-sm text-indigo-400",children:"AI応答に登録済みナレッジのみを使用する"})]}),d.jsx(no,{checked:v,onCheckedChange:w,className:"data-[state=checked]:bg-indigo-500"})]}),d.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-indigo-700",children:"Perplexity AIを使用"}),d.jsx("p",{className:"text-sm text-indigo-400",children:"代替AIエンジンを使用する（APIキー設定後に有効化）"})]}),d.jsx(no,{checked:!1,onCheckedChange:()=>{n({title:"準備中",description:"Perplexity APIキーの設定が必要です。この機能は現在利用できません。",variant:"default"})},disabled:!0,className:"data-[state=checked]:bg-purple-500 opacity-60"})]}),d.jsx("div",{className:"py-2 border-t border-blue-100 pt-3 flex justify-end",children:d.jsxs(ee,{onClick:C,className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white hover:from-blue-600 hover:to-indigo-600",children:[d.jsx(yp,{className:"mr-2 h-4 w-4"}),"設定を保存"]})})]})})]}),(e==null?void 0:e.role)==="admin"&&d.jsxs(pt,{className:"border border-blue-200 shadow-md overflow-hidden",children:[d.jsx(xt,{className:"pb-2 bg-gradient-to-r from-blue-700 to-indigo-700 text-white",children:d.jsxs(At,{className:"text-lg flex items-center",children:[d.jsx(wL,{className:"mr-2 h-5 w-5"}),"管理者設定"]})}),d.jsx(St,{className:"bg-white",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between py-2",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-blue-800",children:"ユーザー管理"}),d.jsx("p",{className:"text-sm text-blue-400",children:"ユーザーアカウントを管理する"})]}),d.jsx(vp,{href:"/users",children:d.jsxs(ee,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[d.jsx(bL,{className:"mr-2 h-4 w-4 text-blue-500"}),"管理"]})})]}),d.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-blue-800",children:"ドキュメント管理"}),d.jsx("p",{className:"text-sm text-blue-400",children:"検索対象の資料を管理する"})]}),d.jsx(vp,{href:"/documents",children:d.jsxs(ee,{variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[d.jsx(yL,{className:"mr-2 h-4 w-4 text-blue-500"}),"管理"]})})]}),d.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-blue-100 pt-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-blue-800",children:"ログアウト"}),d.jsx("p",{className:"text-sm text-blue-400",children:"システムからログアウトする"})]}),d.jsxs(ee,{onClick:x,variant:"outline",size:"sm",className:"border-red-300 text-red-700 hover:bg-red-50",children:[d.jsx(Q7,{className:"mr-2 h-4 w-4 text-red-500"}),"ログアウト"]})]})]})})]}),d.jsxs(pt,{className:"border border-blue-200 shadow-md overflow-hidden",children:[d.jsx(xt,{className:"pb-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white",children:d.jsxs(At,{className:"text-lg flex items-center",children:[d.jsx(W7,{className:"mr-2 h-5 w-5"}),"このアプリについて"]})}),d.jsx(St,{className:"bg-white",children:d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Emergency Recovery Chat"}),d.jsx("p",{className:"text-sm text-cyan-500",children:"バージョン 1.0.0"}),d.jsx("p",{className:"text-sm text-cyan-500",children:"© 2024 All Rights Reserved"}),d.jsx("div",{className:"pt-2 mt-2 border-t border-blue-100",children:d.jsx("p",{className:"text-xs text-blue-400",children:"応急復旧サポートのための対話型アシスタントシステム"})})]})})]})]}),d.jsx(pB,{open:r,title:"ログアウト確認",message:"ログアウトしてもよろしいですか？未保存のデータは失われる可能性があります。",onCancel:()=>i(!1),onConfirm:E})]})}const Kse=["top","right","bottom","left"],qo=Math.min,Er=Math.max,Gv=Math.round,hm=Math.floor,es=e=>({x:e,y:e}),Gse={left:"right",right:"left",bottom:"top",top:"bottom"},Qse={start:"end",end:"start"};function Sx(e,t,n){return Er(e,qo(t,n))}function Fs(e,t){return typeof e=="function"?e(t):e}function $s(e){return e.split("-")[0]}function mu(e){return e.split("-")[1]}function sP(e){return e==="x"?"y":"x"}function oP(e){return e==="y"?"height":"width"}function Ho(e){return["top","bottom"].includes($s(e))?"y":"x"}function aP(e){return sP(Ho(e))}function Jse(e,t,n){n===void 0&&(n=!1);const r=mu(e),i=aP(e),s=oP(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Qv(a)),[a,Qv(a)]}function Yse(e){const t=Qv(e);return[wx(e),t,wx(t)]}function wx(e){return e.replace(/start|end/g,t=>Qse[t])}function Zse(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:a;default:return[]}}function Xse(e,t,n,r){const i=mu(e);let s=Zse($s(e),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(wx)))),s}function Qv(e){return e.replace(/left|right|bottom|top/g,t=>Gse[t])}function eoe(e){return{top:0,right:0,bottom:0,left:0,...e}}function fB(e){return typeof e!="number"?eoe(e):{top:e,right:e,bottom:e,left:e}}function Jv(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function rN(e,t,n){let{reference:r,floating:i}=e;const s=Ho(t),a=aP(t),o=oP(a),c=$s(t),l=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,p=r[o]/2-i[o]/2;let f;switch(c){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-i.width,y:h};break;default:f={x:r.x,y:r.y}}switch(mu(t)){case"start":f[a]-=p*(n&&l?-1:1);break;case"end":f[a]+=p*(n&&l?-1:1);break}return f}const toe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let l=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:h}=rN(l,r,c),p=r,f={},g=0;for(let v=0;v<o.length;v++){const{name:w,fn:y}=o[v],{x:S,y:C,data:x,reset:E}=await y({x:u,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:f,rects:l,platform:a,elements:{reference:e,floating:t}});u=S??u,h=C??h,f={...f,[w]:{...f[w],...x}},E&&g<=50&&(g++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(l=E.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:u,y:h}=rN(l,p,c)),v=-1)}return{x:u,y:h,placement:p,strategy:i,middlewareData:f}};async function zp(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=Fs(t,e),g=fB(f),w=o[p?h==="floating"?"reference":"floating":h],y=Jv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:l,rootBoundary:u,strategy:c})),S=h==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),x=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},E=Jv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:C,strategy:c}):S);return{top:(y.top-E.top+g.top)/x.y,bottom:(E.bottom-y.bottom+g.bottom)/x.y,left:(y.left-E.left+g.left)/x.x,right:(E.right-y.right+g.right)/x.x}}const noe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:c}=t,{element:l,padding:u=0}=Fs(e,t)||{};if(l==null)return{};const h=fB(u),p={x:n,y:r},f=aP(i),g=oP(f),v=await a.getDimensions(l),w=f==="y",y=w?"top":"left",S=w?"bottom":"right",C=w?"clientHeight":"clientWidth",x=s.reference[g]+s.reference[f]-p[f]-s.floating[g],E=p[f]-s.reference[f],P=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let T=P?P[C]:0;(!T||!await(a.isElement==null?void 0:a.isElement(P)))&&(T=o.floating[C]||s.floating[g]);const _=x/2-E/2,k=T/2-v[g]/2-1,z=qo(h[y],k),D=qo(h[S],k),O=z,M=T-v[g]-D,b=T/2-v[g]/2+_,A=Sx(O,b,M),N=!c.arrow&&mu(i)!=null&&b!==A&&s.reference[g]/2-(b<O?z:D)-v[g]/2<0,j=N?b<O?b-O:b-M:0;return{[f]:p[f]+j,data:{[f]:A,centerOffset:b-A-j,...N&&{alignmentOffset:j}},reset:N}}}),roe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...w}=Fs(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=$s(i),S=Ho(o),C=$s(o)===o,x=await(c.isRTL==null?void 0:c.isRTL(l.floating)),E=p||(C||!v?[Qv(o)]:Yse(o)),P=g!=="none";!p&&P&&E.push(...Xse(o,v,g,x));const T=[o,...E],_=await zp(t,w),k=[];let z=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&k.push(_[y]),h){const b=Jse(i,a,x);k.push(_[b[0]],_[b[1]])}if(z=[...z,{placement:i,overflows:k}],!k.every(b=>b<=0)){var D,O;const b=(((D=s.flip)==null?void 0:D.index)||0)+1,A=T[b];if(A)return{data:{index:b,overflows:z},reset:{placement:A}};let N=(O=z.filter(j=>j.overflows[0]<=0).sort((j,R)=>j.overflows[1]-R.overflows[1])[0])==null?void 0:O.placement;if(!N)switch(f){case"bestFit":{var M;const j=(M=z.filter(R=>{if(P){const I=Ho(R.placement);return I===S||I==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(I=>I>0).reduce((I,$)=>I+$,0)]).sort((R,I)=>R[1]-I[1])[0])==null?void 0:M[0];j&&(N=j);break}case"initialPlacement":N=o;break}if(i!==N)return{reset:{placement:N}}}return{}}}};function iN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function sN(e){return Kse.some(t=>e[t]>=0)}const ioe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Fs(e,t);switch(r){case"referenceHidden":{const s=await zp(t,{...i,elementContext:"reference"}),a=iN(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:sN(a)}}}case"escaped":{const s=await zp(t,{...i,altBoundary:!0}),a=iN(s,n.floating);return{data:{escapedOffsets:a,escaped:sN(a)}}}default:return{}}}}};async function soe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=$s(n),o=mu(n),c=Ho(n)==="y",l=["left","top"].includes(a)?-1:1,u=s&&c?-1:1,h=Fs(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof g=="number"&&(f=o==="end"?g*-1:g),c?{x:f*u,y:p*l}:{x:p*l,y:f*u}}const ooe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=t,c=await soe(t,e);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:a}}}}},aoe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:w=>{let{x:y,y:S}=w;return{x:y,y:S}}},...c}=Fs(e,t),l={x:n,y:r},u=await zp(t,c),h=Ho($s(i)),p=sP(h);let f=l[p],g=l[h];if(s){const w=p==="y"?"top":"left",y=p==="y"?"bottom":"right",S=f+u[w],C=f-u[y];f=Sx(S,f,C)}if(a){const w=h==="y"?"top":"left",y=h==="y"?"bottom":"right",S=g+u[w],C=g-u[y];g=Sx(S,g,C)}const v=o.fn({...t,[p]:f,[h]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:s,[h]:a}}}}}},coe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:c=!0,crossAxis:l=!0}=Fs(e,t),u={x:n,y:r},h=Ho(i),p=sP(h);let f=u[p],g=u[h];const v=Fs(o,t),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const C=p==="y"?"height":"width",x=s.reference[p]-s.floating[C]+w.mainAxis,E=s.reference[p]+s.reference[C]-w.mainAxis;f<x?f=x:f>E&&(f=E)}if(l){var y,S;const C=p==="y"?"width":"height",x=["top","left"].includes($s(i)),E=s.reference[h]-s.floating[C]+(x&&((y=a.offset)==null?void 0:y[h])||0)+(x?0:w.crossAxis),P=s.reference[h]+s.reference[C]+(x?0:((S=a.offset)==null?void 0:S[h])||0)-(x?w.crossAxis:0);g<E?g=E:g>P&&(g=P)}return{[p]:f,[h]:g}}}},loe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:c=()=>{},...l}=Fs(e,t),u=await zp(t,l),h=$s(i),p=mu(i),f=Ho(i)==="y",{width:g,height:v}=s.floating;let w,y;h==="top"||h==="bottom"?(w=h,y=p===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(y=h,w=p==="end"?"top":"bottom");const S=v-u.top-u.bottom,C=g-u.left-u.right,x=qo(v-u[w],S),E=qo(g-u[y],C),P=!t.middlewareData.shift;let T=x,_=E;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(_=C),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(T=S),P&&!p){const z=Er(u.left,0),D=Er(u.right,0),O=Er(u.top,0),M=Er(u.bottom,0);f?_=g-2*(z!==0||D!==0?z+D:Er(u.left,u.right)):T=v-2*(O!==0||M!==0?O+M:Er(u.top,u.bottom))}await c({...t,availableWidth:_,availableHeight:T});const k=await a.getDimensions(o.floating);return g!==k.width||v!==k.height?{reset:{rects:!0}}:{}}}};function hS(){return typeof window<"u"}function vu(e){return mB(e)?(e.nodeName||"").toLowerCase():"#document"}function jr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function os(e){var t;return(t=(mB(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function mB(e){return hS()?e instanceof Node||e instanceof jr(e).Node:!1}function Ri(e){return hS()?e instanceof Element||e instanceof jr(e).Element:!1}function is(e){return hS()?e instanceof HTMLElement||e instanceof jr(e).HTMLElement:!1}function oN(e){return!hS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof jr(e).ShadowRoot}function Tf(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=_i(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function uoe(e){return["table","td","th"].includes(vu(e))}function pS(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function cP(e){const t=lP(),n=Ri(e)?_i(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function doe(e){let t=Wo(e);for(;is(t)&&!Hl(t);){if(cP(t))return t;if(pS(t))return null;t=Wo(t)}return null}function lP(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hl(e){return["html","body","#document"].includes(vu(e))}function _i(e){return jr(e).getComputedStyle(e)}function fS(e){return Ri(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Wo(e){if(vu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||oN(e)&&e.host||os(e);return oN(t)?t.host:t}function vB(e){const t=Wo(e);return Hl(t)?e.ownerDocument?e.ownerDocument.body:e.body:is(t)&&Tf(t)?t:vB(t)}function Fp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=vB(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=jr(i);if(s){const o=Cx(a);return t.concat(a,a.visualViewport||[],Tf(i)?i:[],o&&n?Fp(o):[])}return t.concat(i,Fp(i,[],n))}function Cx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function gB(e){const t=_i(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=is(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=Gv(n)!==s||Gv(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function uP(e){return Ri(e)?e:e.contextElement}function cl(e){const t=uP(e);if(!is(t))return es(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=gB(t);let a=(s?Gv(n.width):n.width)/r,o=(s?Gv(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const hoe=es(0);function yB(e){const t=jr(e);return!lP()||!t.visualViewport?hoe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function poe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==jr(e)?!1:t}function dc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=uP(e);let a=es(1);t&&(r?Ri(r)&&(a=cl(r)):a=cl(e));const o=poe(s,n,r)?yB(s):es(0);let c=(i.left+o.x)/a.x,l=(i.top+o.y)/a.y,u=i.width/a.x,h=i.height/a.y;if(s){const p=jr(s),f=r&&Ri(r)?jr(r):r;let g=p,v=Cx(g);for(;v&&r&&f!==g;){const w=cl(v),y=v.getBoundingClientRect(),S=_i(v),C=y.left+(v.clientLeft+parseFloat(S.paddingLeft))*w.x,x=y.top+(v.clientTop+parseFloat(S.paddingTop))*w.y;c*=w.x,l*=w.y,u*=w.x,h*=w.y,c+=C,l+=x,g=jr(v),v=Cx(g)}}return Jv({width:u,height:h,x:c,y:l})}function dP(e,t){const n=fS(e).scrollLeft;return t?t.left+n:dc(os(e)).left+n}function SB(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:dP(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function foe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",a=os(r),o=t?pS(t.floating):!1;if(r===a||o&&s)return n;let c={scrollLeft:0,scrollTop:0},l=es(1);const u=es(0),h=is(r);if((h||!h&&!s)&&((vu(r)!=="body"||Tf(a))&&(c=fS(r)),is(r))){const f=dc(r);l=cl(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const p=a&&!h&&!s?SB(a,c,!0):es(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+p.x,y:n.y*l.y-c.scrollTop*l.y+u.y+p.y}}function moe(e){return Array.from(e.getClientRects())}function voe(e){const t=os(e),n=fS(e),r=e.ownerDocument.body,i=Er(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Er(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+dP(e);const o=-n.scrollTop;return _i(r).direction==="rtl"&&(a+=Er(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function goe(e,t){const n=jr(e),r=os(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,c=0;if(i){s=i.width,a=i.height;const l=lP();(!l||l&&t==="fixed")&&(o=i.offsetLeft,c=i.offsetTop)}return{width:s,height:a,x:o,y:c}}function yoe(e,t){const n=dc(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=is(e)?cl(e):es(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:a,height:o,x:c,y:l}}function aN(e,t,n){let r;if(t==="viewport")r=goe(e,n);else if(t==="document")r=voe(os(e));else if(Ri(t))r=yoe(t,n);else{const i=yB(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Jv(r)}function wB(e,t){const n=Wo(e);return n===t||!Ri(n)||Hl(n)?!1:_i(n).position==="fixed"||wB(n,t)}function Soe(e,t){const n=t.get(e);if(n)return n;let r=Fp(e,[],!1).filter(o=>Ri(o)&&vu(o)!=="body"),i=null;const s=_i(e).position==="fixed";let a=s?Wo(e):e;for(;Ri(a)&&!Hl(a);){const o=_i(a),c=cP(a);!c&&o.position==="fixed"&&(i=null),(s?!c&&!i:!c&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Tf(a)&&!c&&wB(e,a))?r=r.filter(u=>u!==a):i=o,a=Wo(a)}return t.set(e,r),r}function woe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?pS(t)?[]:Soe(t,this._c):[].concat(n),r],o=a[0],c=a.reduce((l,u)=>{const h=aN(t,u,i);return l.top=Er(h.top,l.top),l.right=qo(h.right,l.right),l.bottom=qo(h.bottom,l.bottom),l.left=Er(h.left,l.left),l},aN(t,o,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Coe(e){const{width:t,height:n}=gB(e);return{width:t,height:n}}function xoe(e,t,n){const r=is(t),i=os(t),s=n==="fixed",a=dc(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const c=es(0);if(r||!r&&!s)if((vu(t)!=="body"||Tf(i))&&(o=fS(t)),r){const p=dc(t,!0,s,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else i&&(c.x=dP(i));const l=i&&!r&&!s?SB(i,o):es(0),u=a.left+o.scrollLeft-c.x-l.x,h=a.top+o.scrollTop-c.y-l.y;return{x:u,y:h,width:a.width,height:a.height}}function pw(e){return _i(e).position==="static"}function cN(e,t){if(!is(e)||_i(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return os(e)===n&&(n=n.ownerDocument.body),n}function CB(e,t){const n=jr(e);if(pS(e))return n;if(!is(e)){let i=Wo(e);for(;i&&!Hl(i);){if(Ri(i)&&!pw(i))return i;i=Wo(i)}return n}let r=cN(e,t);for(;r&&uoe(r)&&pw(r);)r=cN(r,t);return r&&Hl(r)&&pw(r)&&!cP(r)?n:r||doe(e)||n}const boe=async function(e){const t=this.getOffsetParent||CB,n=this.getDimensions,r=await n(e.floating);return{reference:xoe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Eoe(e){return _i(e).direction==="rtl"}const Poe={convertOffsetParentRelativeRectToViewportRelativeRect:foe,getDocumentElement:os,getClippingRect:woe,getOffsetParent:CB,getElementRects:boe,getClientRects:moe,getDimensions:Coe,getScale:cl,isElement:Ri,isRTL:Eoe};function Roe(e,t){let n=null,r;const i=os(e);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),s();const{left:l,top:u,width:h,height:p}=e.getBoundingClientRect();if(o||t(),!h||!p)return;const f=hm(u),g=hm(i.clientWidth-(l+h)),v=hm(i.clientHeight-(u+p)),w=hm(l),S={rootMargin:-f+"px "+-g+"px "+-v+"px "+-w+"px",threshold:Er(0,qo(1,c))||1};let C=!0;function x(E){const P=E[0].intersectionRatio;if(P!==c){if(!C)return a();P?a(!1,P):r=setTimeout(()=>{a(!1,1e-7)},1e3)}C=!1}try{n=new IntersectionObserver(x,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,S)}n.observe(e)}return a(!0),s}function _oe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=uP(e),u=i||s?[...l?Fp(l):[],...Fp(t)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const h=l&&o?Roe(l,n):null;let p=-1,f=null;a&&(f=new ResizeObserver(y=>{let[S]=y;S&&S.target===l&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=f)==null||C.observe(t)})),n()}),l&&!c&&f.observe(l),f.observe(t));let g,v=c?dc(e):null;c&&w();function w(){const y=dc(e);v&&(y.x!==v.x||y.y!==v.y||y.width!==v.width||y.height!==v.height)&&n(),v=y,g=requestAnimationFrame(w)}return n(),()=>{var y;u.forEach(S=>{i&&S.removeEventListener("scroll",n),s&&S.removeEventListener("resize",n)}),h==null||h(),(y=f)==null||y.disconnect(),f=null,c&&cancelAnimationFrame(g)}}const Toe=ooe,Aoe=aoe,Noe=roe,Ioe=loe,joe=ioe,lN=noe,koe=coe,Moe=(e,t,n)=>{const r=new Map,i={platform:Poe,...n},s={...i.platform,_c:r};return toe(e,t,{...i,platform:s})};var Hm=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Yv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Yv(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!Yv(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function xB(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function uN(e,t){const n=xB(e);return Math.round(t*n)/n}function fw(e){const t=m.useRef(e);return Hm(()=>{t.current=e}),t}function Ooe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:c,open:l}=e,[u,h]=m.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=m.useState(r);Yv(p,r)||f(r);const[g,v]=m.useState(null),[w,y]=m.useState(null),S=m.useCallback(R=>{R!==P.current&&(P.current=R,v(R))},[]),C=m.useCallback(R=>{R!==T.current&&(T.current=R,y(R))},[]),x=s||g,E=a||w,P=m.useRef(null),T=m.useRef(null),_=m.useRef(u),k=c!=null,z=fw(c),D=fw(i),O=fw(l),M=m.useCallback(()=>{if(!P.current||!T.current)return;const R={placement:t,strategy:n,middleware:p};D.current&&(R.platform=D.current),Moe(P.current,T.current,R).then(I=>{const $={...I,isPositioned:O.current!==!1};b.current&&!Yv(_.current,$)&&(_.current=$,gc.flushSync(()=>{h($)}))})},[p,t,n,D,O]);Hm(()=>{l===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(R=>({...R,isPositioned:!1})))},[l]);const b=m.useRef(!1);Hm(()=>(b.current=!0,()=>{b.current=!1}),[]),Hm(()=>{if(x&&(P.current=x),E&&(T.current=E),x&&E){if(z.current)return z.current(x,E,M);M()}},[x,E,M,z,k]);const A=m.useMemo(()=>({reference:P,floating:T,setReference:S,setFloating:C}),[S,C]),N=m.useMemo(()=>({reference:x,floating:E}),[x,E]),j=m.useMemo(()=>{const R={position:n,left:0,top:0};if(!N.floating)return R;const I=uN(N.floating,u.x),$=uN(N.floating,u.y);return o?{...R,transform:"translate("+I+"px, "+$+"px)",...xB(N.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:$}},[n,o,N.floating,u.x,u.y]);return m.useMemo(()=>({...u,update:M,refs:A,elements:N,floatingStyles:j}),[u,M,A,N,j])}const Doe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?lN({element:r.current,padding:i}).fn(n):{}:r?lN({element:r,padding:i}).fn(n):{}}}},Loe=(e,t)=>({...Toe(e),options:[e,t]}),zoe=(e,t)=>({...Aoe(e),options:[e,t]}),Foe=(e,t)=>({...koe(e),options:[e,t]}),$oe=(e,t)=>({...Noe(e),options:[e,t]}),Boe=(e,t)=>({...Ioe(e),options:[e,t]}),Voe=(e,t)=>({...joe(e),options:[e,t]}),Uoe=(e,t)=>({...Doe(e),options:[e,t]});var qoe="Arrow",bB=m.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return d.jsx(Re.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});bB.displayName=qoe;var Hoe=bB;function Woe(e,t=[]){let n=[];function r(s,a){const o=m.createContext(a),c=n.length;n=[...n,a];function l(h){const{scope:p,children:f,...g}=h,v=(p==null?void 0:p[e][c])||o,w=m.useMemo(()=>g,Object.values(g));return d.jsx(v.Provider,{value:w,children:f})}function u(h,p){const f=(p==null?void 0:p[e][c])||o,g=m.useContext(f);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,u]}const i=()=>{const s=n.map(a=>m.createContext(a));return function(o){const c=(o==null?void 0:o[e])||s;return m.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return i.scopeName=e,[r,Koe(i,...t)]}function Koe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:l})=>{const h=c(s)[`__scope${l}`];return{...o,...h}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var hP="Popper",[EB,PB]=Woe(hP),[Goe,RB]=EB(hP),_B=e=>{const{__scopePopper:t,children:n}=e,[r,i]=m.useState(null);return d.jsx(Goe,{scope:t,anchor:r,onAnchorChange:i,children:n})};_B.displayName=hP;var TB="PopperAnchor",AB=m.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=RB(TB,n),a=m.useRef(null),o=Qe(t,a);return m.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:d.jsx(Re.div,{...i,ref:o})});AB.displayName=TB;var pP="PopperContent",[Qoe,Joe]=EB(pP),NB=m.forwardRef((e,t)=>{var H,te,re,ne,he,ue;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:g,...v}=e,w=RB(pP,n),[y,S]=m.useState(null),C=Qe(t,_e=>S(_e)),[x,E]=m.useState(null),P=cS(x),T=(P==null?void 0:P.width)??0,_=(P==null?void 0:P.height)??0,k=r+(s!=="center"?"-"+s:""),z=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(l)?l:[l],O=D.length>0,M={padding:z,boundary:D.filter(Zoe),altBoundary:O},{refs:b,floatingStyles:A,placement:N,isPositioned:j,middlewareData:R}=Ooe({strategy:"fixed",placement:k,whileElementsMounted:(..._e)=>_oe(..._e,{animationFrame:f==="always"}),elements:{reference:w.anchor},middleware:[Loe({mainAxis:i+_,alignmentAxis:a}),c&&zoe({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Foe():void 0,...M}),c&&$oe({...M}),Boe({...M,apply:({elements:_e,rects:je,availableWidth:qe,availableHeight:ht})=>{const{width:Me,height:L}=je.reference,K=_e.floating.style;K.setProperty("--radix-popper-available-width",`${qe}px`),K.setProperty("--radix-popper-available-height",`${ht}px`),K.setProperty("--radix-popper-anchor-width",`${Me}px`),K.setProperty("--radix-popper-anchor-height",`${L}px`)}}),x&&Uoe({element:x,padding:o}),Xoe({arrowWidth:T,arrowHeight:_}),p&&Voe({strategy:"referenceHidden",...M})]}),[I,$]=kB(N),U=Kt(g);an(()=>{j&&(U==null||U())},[j,U]);const G=(H=R.arrow)==null?void 0:H.x,Y=(te=R.arrow)==null?void 0:te.y,J=((re=R.arrow)==null?void 0:re.centerOffset)!==0,[oe,V]=m.useState();return an(()=>{y&&V(window.getComputedStyle(y).zIndex)},[y]),d.jsx("div",{ref:b.setFloating,"data-radix-popper-content-wrapper":"",style:{...A,transform:j?A.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(ne=R.transformOrigin)==null?void 0:ne.x,(he=R.transformOrigin)==null?void 0:he.y].join(" "),...((ue=R.hide)==null?void 0:ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:d.jsx(Qoe,{scope:n,placedSide:I,onArrowChange:E,arrowX:G,arrowY:Y,shouldHideArrow:J,children:d.jsx(Re.div,{"data-side":I,"data-align":$,...v,ref:C,style:{...v.style,animation:j?void 0:"none"}})})})});NB.displayName=pP;var IB="PopperArrow",Yoe={top:"bottom",right:"left",bottom:"top",left:"right"},jB=m.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=Joe(IB,r),a=Yoe[s.placedSide];return d.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:d.jsx(Hoe,{...i,ref:n,style:{...i.style,display:"block"}})})});jB.displayName=IB;function Zoe(e){return e!==null}var Xoe=e=>({name:"transformOrigin",options:e,fn(t){var w,y,S;const{placement:n,rects:r,middlewareData:i}=t,a=((w=i.arrow)==null?void 0:w.centerOffset)!==0,o=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[l,u]=kB(n),h={start:"0%",center:"50%",end:"100%"}[u],p=(((y=i.arrow)==null?void 0:y.x)??0)+o/2,f=(((S=i.arrow)==null?void 0:S.y)??0)+c/2;let g="",v="";return l==="bottom"?(g=a?h:`${p}px`,v=`${-c}px`):l==="top"?(g=a?h:`${p}px`,v=`${r.floating.height+c}px`):l==="right"?(g=`${-c}px`,v=a?h:`${f}px`):l==="left"&&(g=`${r.floating.width+c}px`,v=a?h:`${f}px`),{data:{x:g,y:v}}}});function kB(e){const[t,n="center"]=e.split("-");return[t,n]}var eae=_B,tae=AB,nae=NB,rae=jB,iae=[" ","Enter","ArrowUp","ArrowDown"],sae=[" ","Enter"],Af="Select",[mS,vS,oae]=of(Af),[gu,qge]=Ti(Af,[oae,PB]),gS=PB(),[aae,ra]=gu(Af),[cae,lae]=gu(Af),MB=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:c,dir:l,name:u,autoComplete:h,disabled:p,required:f,form:g}=e,v=gS(t),[w,y]=m.useState(null),[S,C]=m.useState(null),[x,E]=m.useState(!1),P=hu(l),[T=!1,_]=ti({prop:r,defaultProp:i,onChange:s}),[k,z]=ti({prop:a,defaultProp:o,onChange:c}),D=m.useRef(null),O=w?g||!!w.closest("form"):!0,[M,b]=m.useState(new Set),A=Array.from(M).map(N=>N.props.value).join(";");return d.jsx(eae,{...v,children:d.jsxs(aae,{required:f,scope:t,trigger:w,onTriggerChange:y,valueNode:S,onValueNodeChange:C,valueNodeHasChildren:x,onValueNodeHasChildrenChange:E,contentId:Xi(),value:k,onValueChange:z,open:T,onOpenChange:_,dir:P,triggerPointerDownPosRef:D,disabled:p,children:[d.jsx(mS.Provider,{scope:t,children:d.jsx(cae,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(N=>{b(j=>new Set(j).add(N))},[]),onNativeOptionRemove:m.useCallback(N=>{b(j=>{const R=new Set(j);return R.delete(N),R})},[]),children:n})}),O?d.jsxs(s5,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:k,onChange:N=>z(N.target.value),disabled:p,form:g,children:[k===void 0?d.jsx("option",{value:""}):null,Array.from(M)]},A):null]})})};MB.displayName=Af;var OB="SelectTrigger",DB=m.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,s=gS(n),a=ra(OB,n),o=a.disabled||r,c=Qe(t,a.onTriggerChange),l=vS(n),u=m.useRef("touch"),[h,p,f]=o5(v=>{const w=l().filter(C=>!C.disabled),y=w.find(C=>C.value===a.value),S=a5(w,v,y);S!==void 0&&a.onValueChange(S.value)}),g=v=>{o||(a.onOpenChange(!0),f()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return d.jsx(tae,{asChild:!0,...s,children:d.jsx(Re.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":i5(a.value)?"":void 0,...i,ref:c,onClick:be(i.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&g(v)}),onPointerDown:be(i.onPointerDown,v=>{u.current=v.pointerType;const w=v.target;w.hasPointerCapture(v.pointerId)&&w.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:be(i.onKeyDown,v=>{const w=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(w&&v.key===" ")&&iae.includes(v.key)&&(g(),v.preventDefault())})})})});DB.displayName=OB;var LB="SelectValue",zB=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:a="",...o}=e,c=ra(LB,n),{onValueNodeHasChildrenChange:l}=c,u=s!==void 0,h=Qe(t,c.onValueNodeChange);return an(()=>{l(u)},[l,u]),d.jsx(Re.span,{...o,ref:h,style:{pointerEvents:"none"},children:i5(c.value)?d.jsx(d.Fragment,{children:a}):s})});zB.displayName=LB;var uae="SelectIcon",FB=m.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return d.jsx(Re.span,{"aria-hidden":!0,...i,ref:t,children:r||"▼"})});FB.displayName=uae;var dae="SelectPortal",$B=e=>d.jsx(Mg,{asChild:!0,...e});$B.displayName=dae;var hc="SelectContent",BB=m.forwardRef((e,t)=>{const n=ra(hc,e.__scopeSelect),[r,i]=m.useState();if(an(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?gc.createPortal(d.jsx(VB,{scope:e.__scopeSelect,children:d.jsx(mS.Slot,{scope:e.__scopeSelect,children:d.jsx("div",{children:e.children})})}),s):null}return d.jsx(UB,{...e,ref:t})});BB.displayName=hc;var ai=10,[VB,ia]=gu(hc),hae="SelectContentImpl",UB=m.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:c,align:l,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:g,hideWhenDetached:v,avoidCollisions:w,...y}=e,S=ra(hc,n),[C,x]=m.useState(null),[E,P]=m.useState(null),T=Qe(t,H=>x(H)),[_,k]=m.useState(null),[z,D]=m.useState(null),O=vS(n),[M,b]=m.useState(!1),A=m.useRef(!1);m.useEffect(()=>{if(C)return n3(C)},[C]),K$();const N=m.useCallback(H=>{const[te,...re]=O().map(ue=>ue.ref.current),[ne]=re.slice(-1),he=document.activeElement;for(const ue of H)if(ue===he||(ue==null||ue.scrollIntoView({block:"nearest"}),ue===te&&E&&(E.scrollTop=0),ue===ne&&E&&(E.scrollTop=E.scrollHeight),ue==null||ue.focus(),document.activeElement!==he))return},[O,E]),j=m.useCallback(()=>N([_,C]),[N,_,C]);m.useEffect(()=>{M&&j()},[M,j]);const{onOpenChange:R,triggerPointerDownPosRef:I}=S;m.useEffect(()=>{if(C){let H={x:0,y:0};const te=ne=>{var he,ue;H={x:Math.abs(Math.round(ne.pageX)-(((he=I.current)==null?void 0:he.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((ue=I.current)==null?void 0:ue.y)??0))}},re=ne=>{H.x<=10&&H.y<=10?ne.preventDefault():C.contains(ne.target)||R(!1),document.removeEventListener("pointermove",te),I.current=null};return I.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",re,{capture:!0})}}},[C,R,I]),m.useEffect(()=>{const H=()=>R(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[R]);const[$,U]=o5(H=>{const te=O().filter(he=>!he.disabled),re=te.find(he=>he.ref.current===document.activeElement),ne=a5(te,H,re);ne&&setTimeout(()=>ne.ref.current.focus())}),G=m.useCallback((H,te,re)=>{const ne=!A.current&&!re;(S.value!==void 0&&S.value===te||ne)&&(k(H),ne&&(A.current=!0))},[S.value]),Y=m.useCallback(()=>C==null?void 0:C.focus(),[C]),J=m.useCallback((H,te,re)=>{const ne=!A.current&&!re;(S.value!==void 0&&S.value===te||ne)&&D(H)},[S.value]),oe=r==="popper"?xx:qB,V=oe===xx?{side:o,sideOffset:c,align:l,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:g,hideWhenDetached:v,avoidCollisions:w}:{};return d.jsx(VB,{scope:n,content:C,viewport:E,onViewportChange:P,itemRefCallback:G,selectedItem:_,onItemLeave:Y,itemTextRefCallback:J,focusSelectedItem:j,selectedItemText:z,position:r,isPositioned:M,searchRef:$,children:d.jsx(WE,{as:zo,allowPinchZoom:!0,children:d.jsx(HE,{asChild:!0,trapped:S.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:be(i,H=>{var te;(te=S.trigger)==null||te.focus({preventScroll:!0}),H.preventDefault()}),children:d.jsx(kg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:d.jsx(oe,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:H=>H.preventDefault(),...y,...V,onPlaced:()=>b(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:be(y.onKeyDown,H=>{const te=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!te&&H.key.length===1&&U(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let ne=O().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(H.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const he=H.target,ue=ne.indexOf(he);ne=ne.slice(ue+1)}setTimeout(()=>N(ne)),H.preventDefault()}})})})})})})});UB.displayName=hae;var pae="SelectItemAlignedPosition",qB=m.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,s=ra(hc,n),a=ia(hc,n),[o,c]=m.useState(null),[l,u]=m.useState(null),h=Qe(t,T=>u(T)),p=vS(n),f=m.useRef(!1),g=m.useRef(!0),{viewport:v,selectedItem:w,selectedItemText:y,focusSelectedItem:S}=a,C=m.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&l&&v&&w&&y){const T=s.trigger.getBoundingClientRect(),_=l.getBoundingClientRect(),k=s.valueNode.getBoundingClientRect(),z=y.getBoundingClientRect();if(s.dir!=="rtl"){const he=z.left-_.left,ue=k.left-he,_e=T.left-ue,je=T.width+_e,qe=Math.max(je,_.width),ht=window.innerWidth-ai,Me=Lp(ue,[ai,Math.max(ai,ht-qe)]);o.style.minWidth=je+"px",o.style.left=Me+"px"}else{const he=_.right-z.right,ue=window.innerWidth-k.right-he,_e=window.innerWidth-T.right-ue,je=T.width+_e,qe=Math.max(je,_.width),ht=window.innerWidth-ai,Me=Lp(ue,[ai,Math.max(ai,ht-qe)]);o.style.minWidth=je+"px",o.style.right=Me+"px"}const D=p(),O=window.innerHeight-ai*2,M=v.scrollHeight,b=window.getComputedStyle(l),A=parseInt(b.borderTopWidth,10),N=parseInt(b.paddingTop,10),j=parseInt(b.borderBottomWidth,10),R=parseInt(b.paddingBottom,10),I=A+N+M+R+j,$=Math.min(w.offsetHeight*5,I),U=window.getComputedStyle(v),G=parseInt(U.paddingTop,10),Y=parseInt(U.paddingBottom,10),J=T.top+T.height/2-ai,oe=O-J,V=w.offsetHeight/2,H=w.offsetTop+V,te=A+N+H,re=I-te;if(te<=J){const he=D.length>0&&w===D[D.length-1].ref.current;o.style.bottom="0px";const ue=l.clientHeight-v.offsetTop-v.offsetHeight,_e=Math.max(oe,V+(he?Y:0)+ue+j),je=te+_e;o.style.height=je+"px"}else{const he=D.length>0&&w===D[0].ref.current;o.style.top="0px";const _e=Math.max(J,A+v.offsetTop+(he?G:0)+V)+re;o.style.height=_e+"px",v.scrollTop=te-J+v.offsetTop}o.style.margin=`${ai}px 0`,o.style.minHeight=$+"px",o.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[p,s.trigger,s.valueNode,o,l,v,w,y,s.dir,r]);an(()=>C(),[C]);const[x,E]=m.useState();an(()=>{l&&E(window.getComputedStyle(l).zIndex)},[l]);const P=m.useCallback(T=>{T&&g.current===!0&&(C(),S==null||S(),g.current=!1)},[C,S]);return d.jsx(mae,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:f,onScrollButtonChange:P,children:d.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x},children:d.jsx(Re.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});qB.displayName=pae;var fae="SelectPopperPosition",xx=m.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ai,...s}=e,a=gS(n);return d.jsx(nae,{...a,...s,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xx.displayName=fae;var[mae,fP]=gu(hc,{}),bx="SelectViewport",HB=m.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,s=ia(bx,n),a=fP(bx,n),o=Qe(t,s.onViewportChange),c=m.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(mS.Slot,{scope:n,children:d.jsx(Re.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:be(i.onScroll,l=>{const u=l.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&h){const f=Math.abs(c.current-u.scrollTop);if(f>0){const g=window.innerHeight-ai*2,v=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),y=Math.max(v,w);if(y<g){const S=y+f,C=Math.min(g,S),x=S-C;h.style.height=C+"px",h.style.bottom==="0px"&&(u.scrollTop=x>0?x:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});HB.displayName=bx;var WB="SelectGroup",[vae,gae]=gu(WB),yae=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Xi();return d.jsx(vae,{scope:n,id:i,children:d.jsx(Re.div,{role:"group","aria-labelledby":i,...r,ref:t})})});yae.displayName=WB;var KB="SelectLabel",GB=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=gae(KB,n);return d.jsx(Re.div,{id:i.id,...r,ref:t})});GB.displayName=KB;var Zv="SelectItem",[Sae,QB]=gu(Zv),JB=m.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...a}=e,o=ra(Zv,n),c=ia(Zv,n),l=o.value===r,[u,h]=m.useState(s??""),[p,f]=m.useState(!1),g=Qe(t,S=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,S,r,i)}),v=Xi(),w=m.useRef("touch"),y=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(Sae,{scope:n,value:r,disabled:i,textId:v,isSelected:l,onItemTextChange:m.useCallback(S=>{h(C=>C||((S==null?void 0:S.textContent)??"").trim())},[]),children:d.jsx(mS.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:d.jsx(Re.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":l&&p,"data-state":l?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:g,onFocus:be(a.onFocus,()=>f(!0)),onBlur:be(a.onBlur,()=>f(!1)),onClick:be(a.onClick,()=>{w.current!=="mouse"&&y()}),onPointerUp:be(a.onPointerUp,()=>{w.current==="mouse"&&y()}),onPointerDown:be(a.onPointerDown,S=>{w.current=S.pointerType}),onPointerMove:be(a.onPointerMove,S=>{var C;w.current=S.pointerType,i?(C=c.onItemLeave)==null||C.call(c):w.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:be(a.onPointerLeave,S=>{var C;S.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:be(a.onKeyDown,S=>{var x;((x=c.searchRef)==null?void 0:x.current)!==""&&S.key===" "||(sae.includes(S.key)&&y(),S.key===" "&&S.preventDefault())})})})})});JB.displayName=Zv;var kh="SelectItemText",YB=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...s}=e,a=ra(kh,n),o=ia(kh,n),c=QB(kh,n),l=lae(kh,n),[u,h]=m.useState(null),p=Qe(t,y=>h(y),c.onItemTextChange,y=>{var S;return(S=o.itemTextRefCallback)==null?void 0:S.call(o,y,c.value,c.disabled)}),f=u==null?void 0:u.textContent,g=m.useMemo(()=>d.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:v,onNativeOptionRemove:w}=l;return an(()=>(v(g),()=>w(g)),[v,w,g]),d.jsxs(d.Fragment,{children:[d.jsx(Re.span,{id:c.textId,...s,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?gc.createPortal(s.children,a.valueNode):null]})});YB.displayName=kh;var ZB="SelectItemIndicator",XB=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return QB(ZB,n).isSelected?d.jsx(Re.span,{"aria-hidden":!0,...r,ref:t}):null});XB.displayName=ZB;var Ex="SelectScrollUpButton",e5=m.forwardRef((e,t)=>{const n=ia(Ex,e.__scopeSelect),r=fP(Ex,e.__scopeSelect),[i,s]=m.useState(!1),a=Qe(t,r.onScrollButtonChange);return an(()=>{if(n.viewport&&n.isPositioned){let o=function(){const l=c.scrollTop>0;s(l)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?d.jsx(n5,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});e5.displayName=Ex;var Px="SelectScrollDownButton",t5=m.forwardRef((e,t)=>{const n=ia(Px,e.__scopeSelect),r=fP(Px,e.__scopeSelect),[i,s]=m.useState(!1),a=Qe(t,r.onScrollButtonChange);return an(()=>{if(n.viewport&&n.isPositioned){let o=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;s(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?d.jsx(n5,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});t5.displayName=Px;var n5=m.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,s=ia("SelectScrollButton",n),a=m.useRef(null),o=vS(n),c=m.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),an(()=>{var u;const l=o().find(h=>h.ref.current===document.activeElement);(u=l==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),d.jsx(Re.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:be(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:be(i.onPointerMove,()=>{var l;(l=s.onItemLeave)==null||l.call(s),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:be(i.onPointerLeave,()=>{c()})})}),wae="SelectSeparator",r5=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return d.jsx(Re.div,{"aria-hidden":!0,...r,ref:t})});r5.displayName=wae;var Rx="SelectArrow",Cae=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=gS(n),s=ra(Rx,n),a=ia(Rx,n);return s.open&&a.position==="popper"?d.jsx(rae,{...i,...r,ref:t}):null});Cae.displayName=Rx;function i5(e){return e===""||e===void 0}var s5=m.forwardRef((e,t)=>{const{value:n,...r}=e,i=m.useRef(null),s=Qe(t,i),a=aS(n);return m.useEffect(()=>{const o=i.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&u){const h=new Event("change",{bubbles:!0});u.call(o,n),o.dispatchEvent(h)}},[a,n]),d.jsx(Og,{asChild:!0,children:d.jsx("select",{...r,ref:s,defaultValue:n})})});s5.displayName="BubbleSelect";function o5(e){const t=Kt(e),n=m.useRef(""),r=m.useRef(0),i=m.useCallback(a=>{const o=n.current+a;t(o),function c(l){n.current=l,window.clearTimeout(r.current),l!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[t]),s=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function a5(e,t,n){const i=t.length>1&&Array.from(t).every(l=>l===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=xae(e,Math.max(s,0));i.length===1&&(a=a.filter(l=>l!==n));const c=a.find(l=>l.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function xae(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var bae=MB,c5=DB,Eae=zB,Pae=FB,Rae=$B,l5=BB,_ae=HB,u5=GB,d5=JB,Tae=YB,Aae=XB,h5=e5,p5=t5,f5=r5;const _x=bae,Tx=Eae,Xv=m.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(c5,{ref:r,className:ve("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,d.jsx(Pae,{asChild:!0,children:d.jsx(nE,{className:"h-4 w-4 opacity-50"})})]}));Xv.displayName=c5.displayName;const m5=m.forwardRef(({className:e,...t},n)=>d.jsx(h5,{ref:n,className:ve("flex cursor-default items-center justify-center py-1",e),...t,children:d.jsx(_7,{className:"h-4 w-4"})}));m5.displayName=h5.displayName;const v5=m.forwardRef(({className:e,...t},n)=>d.jsx(p5,{ref:n,className:ve("flex cursor-default items-center justify-center py-1",e),...t,children:d.jsx(nE,{className:"h-4 w-4"})}));v5.displayName=p5.displayName;const eg=m.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>d.jsx(Rae,{children:d.jsxs(l5,{ref:i,className:ve("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[d.jsx(m5,{}),d.jsx(_ae,{className:ve("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),d.jsx(v5,{})]})}));eg.displayName=l5.displayName;const Nae=m.forwardRef(({className:e,...t},n)=>d.jsx(u5,{ref:n,className:ve("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Nae.displayName=u5.displayName;const Jc=m.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(d5,{ref:r,className:ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(Aae,{children:d.jsx(tE,{className:"h-4 w-4"})})}),d.jsx(Tae,{children:t})]}));Jc.displayName=d5.displayName;const Iae=m.forwardRef(({className:e,...t},n)=>d.jsx(f5,{ref:n,className:ve("-mx-1 my-1 h-px bg-muted",e),...t}));Iae.displayName=f5.displayName;function jae(){const{user:e,isLoading:t}=Lr(),{toast:n}=ln(),[,r]=ss(),[i,s]=m.useState(null);if(t)return d.jsx("div",{children:"Loading..."});if(!e||e.role!=="admin")return r("/"),null;const{data:a,isLoading:o}=Jb({queryKey:["/api/users"],queryFn:async()=>{const N=await Qt("GET","/api/users");if(!N.ok)throw new Error("ユーザー取得失敗");return await N.json()},refetchOnWindowFocus:!1});m.useEffect(()=>{i&&n({title:"エラー",description:"ユーザー一覧の取得に失敗しました",variant:"destructive"})},[i,n]);const[c,l]=m.useState(!1),[u,h]=m.useState(!1),[p,f]=m.useState(!1),[g,v]=m.useState(null),[w,y]=m.useState({username:"",password:"",display_name:"",role:"employee"}),[S,C]=m.useState({username:"",display_nameName:"",role:"employee"}),x=()=>{y({username:"",password:"",display_Name:"",role:"employee",department:""})},E=Lm({mutationFn:async N=>await(await Qt("POST","/api/users",N)).json(),onSuccess:()=>{ar.invalidateQueries({queryKey:["/api/users"]}),n({title:"ユーザー作成完了",description:"新しいユーザーが作成されました"}),l(!1),x()},onError:N=>{n({title:"ユーザー作成失敗",description:N.message||"ユーザー作成中にエラーが発生しました",variant:"destructive"})}}),P=N=>{if(N.preventDefault(),!w.username||!w.password||!w.display_name||!w.role){n({title:"入力エラー",description:"ユーザー名、パスワード、表示名、権限は必須項目です",variant:"destructive"});return}E.mutate({username:w.username,password:w.password,display_name:w.display_name,role:w.role||"employee",department:w.department||void 0})},T=N=>{const{name:j,value:R}=N.target;y(I=>({...I,[j]:R}))},_=(N,j)=>{y(R=>({...R,[N]:j}))},k=(N,j)=>{C(R=>({...R,[N]:j}))},z=N=>{const{name:j,value:R}=N.target;C(I=>({...I,[j]:R}))},D=N=>{v(N.id),C({username:N.username,display_nameName:N.display_nameName,role:N.role,department:N.department}),h(!0)},O=N=>{v(N),f(!0)},M=Lm({mutationFn:async N=>{if(!g)throw new Error("ユーザーIDが選択されていません");return await(await Qt("PATCH",`/api/users/${g}`,N)).json()},onSuccess:()=>{ar.invalidateQueries({queryKey:["/api/users"]}),n({title:"ユーザー更新完了",description:"ユーザー情報が更新されました"}),h(!1)},onError:N=>{n({title:"ユーザー更新失敗",description:N.message||"ユーザー更新中にエラーが発生しました",variant:"destructive"})}}),b=Lm({mutationFn:async()=>{if(!g)throw new Error("ユーザーIDが選択されていません");if(e&&g===e.id)throw new Error("自分自身のアカウントは削除できません");const N=await Qt("DELETE",`/api/users/${g}`);if(!N.ok){const j=await N.json();throw N.status===500?new Error("ユーザーに関連するデータが存在するため削除できません。関連データをすべて削除してから再度お試しください。"):new Error(j.message||"ユーザー削除中にエラーが発生しました")}return await N.json()},onSuccess:()=>{ar.invalidateQueries({queryKey:["/api/users"]}),n({title:"ユーザー削除完了",description:"ユーザーが削除されました"}),f(!1)},onError:N=>{n({title:"ユーザー削除失敗",description:N.message||"ユーザー削除中にエラーが発生しました",variant:"destructive"}),f(!1)}}),A=N=>{if(N.preventDefault(),!S.username||!S.display_nameName){n({title:"入力エラー",description:"必須項目を入力してください",variant:"destructive"});return}M.mutate(S)};return!e||e&&e.role!=="admin"?d.jsx("div",{children:"Loading..."}):d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-5xl mx-auto w-full",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[d.jsx(wL,{className:"mr-2 h-6 w-6"}),"ユーザー管理"]}),d.jsx("p",{className:"text-neutral-300",children:"システムの全ユーザーを管理します"})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(vp,{href:"/settings",children:d.jsxs(ee,{variant:"outline",size:"sm",children:[d.jsx(eE,{className:"mr-2 h-4 w-4"}),"設定に戻る"]})}),d.jsxs(mr,{open:c,onOpenChange:l,children:[d.jsx(w3,{asChild:!0,children:d.jsxs(ee,{children:[d.jsx(bL,{className:"mr-2 h-4 w-4"}),"新規ユーザー作成"]})}),d.jsxs(Kn,{children:[d.jsxs(vr,{children:[d.jsx(Gn,{children:"新規ユーザー作成"}),d.jsx(Ir,{children:"新しいユーザーアカウントを作成します。"})]}),d.jsxs("form",{onSubmit:P,children:[d.jsxs("div",{className:"grid gap-4 py-4",children:[d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"username",children:"ユーザー名"}),d.jsx(at,{id:"username",name:"username",value:w.username,onChange:T,required:!0})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"password",children:"パスワード"}),d.jsx(at,{id:"password",name:"password",type:"password",value:w.password,onChange:T,required:!0})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"display_Name",children:"表示名"}),d.jsx(at,{id:"display_name",name:"display_name",value:w.display_name,onChange:T,required:!0})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"department",children:"部署"}),d.jsx(at,{id:"department",name:"department",value:w.department||"",onChange:T})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"role",children:"権限"}),d.jsxs(_x,{value:w.role,onValueChange:N=>_("role",N),children:[d.jsx(Xv,{children:d.jsx(Tx,{placeholder:"権限を選択"})}),d.jsxs(eg,{children:[d.jsx(Jc,{value:"employee",children:"一般ユーザー"}),d.jsx(Jc,{value:"admin",children:"管理者"})]})]})]})]}),d.jsxs(Zr,{children:[d.jsx(ee,{type:"button",variant:"outline",onClick:()=>l(!1),children:"キャンセル"}),d.jsx(ee,{type:"submit",disabled:E.isPending,children:E.isPending?"作成中...":"作成"})]})]})]})]})]})]}),d.jsxs(pt,{children:[d.jsx(xt,{className:"pb-2",children:d.jsxs(At,{className:"text-lg flex items-center",children:[d.jsx(EL,{className:"mr-2 h-5 w-5"}),"ユーザー一覧"]})}),d.jsx(St,{children:o?d.jsx("div",{className:"flex justify-center p-4",children:"読み込み中..."}):d.jsxs(Vl,{children:[d.jsx(Ul,{children:d.jsxs(Tr,{children:[d.jsx(Lt,{children:"ID"}),d.jsx(Lt,{children:"ユーザー名"}),d.jsx(Lt,{children:"表示名"}),d.jsx(Lt,{children:"権限"}),d.jsx(Lt,{children:"部署"}),d.jsx(Lt,{className:"text-right",children:"アクション"})]})}),d.jsx(ql,{children:a&&a.length>0?a.map(N=>d.jsxs(Tr,{children:[d.jsx(Tt,{children:N.id}),d.jsx(Tt,{children:N.username}),d.jsx(Tt,{children:N.display_name}),d.jsx(Tt,{children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${N.role==="admin"?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"}`,children:N.role==="admin"?"管理者":"一般ユーザー"})}),d.jsx(Tt,{children:N.department||"-"}),d.jsx(Tt,{className:"text-right",children:d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx(ee,{variant:"outline",size:"sm",onClick:()=>D(N),children:d.jsx(CL,{className:"h-4 w-4"})}),d.jsx(ee,{variant:"outline",size:"sm",onClick:()=>O(N.id),className:"text-red-500 hover:text-red-700",children:d.jsx(Ds,{className:"h-4 w-4"})})]})})]},N.id)):d.jsx(Tr,{children:d.jsx(Tt,{colSpan:6,className:"text-center",children:"ユーザーが見つかりません"})})})]})})]}),d.jsx(mr,{open:u,onOpenChange:h,children:d.jsxs(Kn,{children:[d.jsxs(vr,{children:[d.jsx(Gn,{children:"ユーザー編集"}),d.jsx(Ir,{children:"ユーザーアカウント情報を編集します。"})]}),d.jsxs("form",{onSubmit:A,children:[d.jsxs("div",{className:"grid gap-4 py-4",children:[d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"edit-username",children:"ユーザー名"}),d.jsx(at,{id:"edit-username",name:"username",value:S.username,onChange:z,required:!0})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"edit-display_name",children:"表示名"}),d.jsx(at,{id:"edit-display_name",name:"display_name",value:S.display_name,onChange:z,required:!0})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"edit-department",children:"部署"}),d.jsx(at,{id:"edit-department",name:"department",value:S.department||"",onChange:z})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"edit-role",children:"権限"}),d.jsxs(_x,{value:S.role,onValueChange:N=>k("role",N),children:[d.jsx(Xv,{children:d.jsx(Tx,{placeholder:"権限を選択"})}),d.jsxs(eg,{children:[d.jsx(Jc,{value:"employee",children:"一般ユーザー"}),d.jsx(Jc,{value:"admin",children:"管理者"})]})]})]})]}),d.jsxs(Zr,{children:[d.jsx(ee,{type:"button",variant:"outline",onClick:()=>h(!1),children:"キャンセル"}),d.jsx(ee,{type:"submit",disabled:M.isPending,children:M.isPending?"更新中...":"更新"})]})]})]})}),d.jsx(mr,{open:p,onOpenChange:f,children:d.jsxs(Kn,{children:[d.jsxs(vr,{children:[d.jsxs(Gn,{className:"flex items-center",children:[d.jsx(LC,{className:"h-5 w-5 mr-2 text-red-500"}),"ユーザー削除の確認"]}),d.jsx(Ir,{children:"このユーザーを削除すると、関連するすべてのデータが削除されます。この操作は元に戻せません。"})]}),d.jsxs("div",{className:"py-4 space-y-2",children:[d.jsx("p",{className:"text-center font-medium",children:"本当にこのユーザーを削除しますか？"}),d.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 text-sm text-amber-800",children:d.jsxs("p",{className:"flex items-start",children:[d.jsx(LC,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),d.jsxs("span",{children:[d.jsx("strong",{children:"注意:"})," チャット、メッセージ、ドキュメントなど、このユーザーに関連するすべてのデータが削除されます。 ユーザーがチャットやドキュメントを持っている場合、それらも同時に削除されます。"]})]})})]}),d.jsxs(Zr,{children:[d.jsx(ee,{type:"button",variant:"outline",onClick:()=>f(!1),children:"キャンセル"}),d.jsx(ee,{type:"button",variant:"destructive",onClick:()=>b.mutate(),disabled:b.isPending,children:b.isPending?"削除中...":"削除"})]})]})})]})}const dN=[{value:"pdf",label:"PDF文書"},{value:"excel",label:"Excel"},{value:"word",label:"Word"},{value:"powerpoint",label:"PowerPoint"},{value:"text",label:"テキスト"},{value:"image",label:"画像"}];function kae(){const{user:e}=Lr(),{toast:t}=ln(),[,n]=ss();m.useEffect(()=>{e&&e.role!=="admin"&&n("/")},[e,n]);const{data:r,isLoading:i}=Jb({queryKey:["/api/documents"],refetchOnWindowFocus:!1}),[s,a]=m.useState(!1),[o,c]=m.useState({title:"",content:"",type:"pdf",url:"",keywords:""}),l=()=>{c({title:"",content:"",type:"pdf",url:"",keywords:""})},u=Lm({mutationFn:async g=>{const v={...g,keywords:g.keywords?g.keywords.split(",").map(S=>S.trim()):void 0};delete v.keywords;const y=await(await Qt("POST","/api/documents",v)).json();if(g.keywords){const S=g.keywords.split(",").map(C=>C.trim());for(const C of S)await Qt("POST","/api/keywords",{documentId:y.id,word:C})}return y},onSuccess:()=>{ar.invalidateQueries({queryKey:["/api/documents"]}),t({title:"ドキュメント作成完了",description:"新しいドキュメントが登録されました"}),a(!1),l()},onError:g=>{t({title:"ドキュメント作成失敗",description:g.message||"ドキュメント作成中にエラーが発生しました",variant:"destructive"})}}),h=g=>{if(g.preventDefault(),!o.title||!o.url){t({title:"入力エラー",description:"タイトルとURLは必須です",variant:"destructive"});return}u.mutate(o)},p=g=>{const{name:v,value:w}=g.target;c(y=>({...y,[v]:w}))},f=(g,v)=>{c(w=>({...w,[g]:v}))};return!e||e&&e.role!=="admin"?d.jsx("div",{children:"Loading..."}):d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-5xl mx-auto w-full",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[d.jsx(yL,{className:"mr-2 h-6 w-6"}),"ドキュメント管理"]}),d.jsx("p",{className:"text-neutral-300",children:"検索と解析に利用する資料を管理します"})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(vp,{href:"/settings",children:d.jsxs(ee,{variant:"outline",size:"sm",children:[d.jsx(eE,{className:"mr-2 h-4 w-4"}),"設定に戻る"]})}),d.jsxs(mr,{open:s,onOpenChange:a,children:[d.jsx(w3,{asChild:!0,children:d.jsxs(ee,{children:[d.jsx(lr,{className:"mr-2 h-4 w-4"}),"新規ドキュメント追加"]})}),d.jsxs(Kn,{className:"max-w-md",children:[d.jsxs(vr,{children:[d.jsx(Gn,{children:"新規ドキュメント登録"}),d.jsx(Ir,{children:"検索対象となる新しいドキュメントを登録します。"})]}),d.jsxs("form",{onSubmit:h,children:[d.jsxs("div",{className:"grid gap-4 py-4",children:[d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"title",children:"タイトル"}),d.jsx(at,{id:"title",name:"title",value:o.title,onChange:p,required:!0})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"type",children:"ドキュメントタイプ"}),d.jsxs(_x,{value:o.type,onValueChange:g=>f("type",g),children:[d.jsx(Xv,{children:d.jsx(Tx,{placeholder:"タイプを選択"})}),d.jsx(eg,{children:dN.map(g=>d.jsx(Jc,{value:g.value,children:g.label},g.value))})]})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"url",children:"URL/ファイルパス"}),d.jsx(at,{id:"url",name:"url",value:o.url,onChange:p,required:!0}),d.jsx("p",{className:"text-xs text-neutral-300",children:"ファイルの場所またはURLを指定してください"})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"content",children:"説明/概要"}),d.jsx(Pr,{id:"content",name:"content",rows:3,value:o.content,onChange:p})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"keywords",children:"キーワード"}),d.jsx(at,{id:"keywords",name:"keywords",value:o.keywords,onChange:p,placeholder:"キーワード1, キーワード2, キーワード3"}),d.jsx("p",{className:"text-xs text-neutral-300",children:"カンマ区切りで複数のキーワードを指定できます"})]})]}),d.jsxs(Zr,{children:[d.jsx(ee,{type:"button",variant:"outline",onClick:()=>a(!1),children:"キャンセル"}),d.jsx(ee,{type:"submit",disabled:u.isPending,children:u.isPending?"登録中...":"登録"})]})]})]})]})]})]}),d.jsxs(pt,{children:[d.jsx(xt,{className:"pb-2",children:d.jsxs(At,{className:"text-lg flex items-center",children:[d.jsx(rE,{className:"mr-2 h-5 w-5"}),"登録済みドキュメント"]})}),d.jsx(St,{children:i?d.jsx("div",{className:"flex justify-center p-4",children:"読み込み中..."}):d.jsxs(Vl,{children:[d.jsx(Ul,{children:d.jsxs(Tr,{children:[d.jsx(Lt,{children:"ID"}),d.jsx(Lt,{children:"タイトル"}),d.jsx(Lt,{children:"タイプ"}),d.jsx(Lt,{children:"作成日"}),d.jsx(Lt,{children:"キーワード"})]})}),d.jsx(ql,{children:r&&r.length>0?r.map(g=>{var v;return d.jsxs(Tr,{children:[d.jsx(Tt,{children:g.id}),d.jsx(Tt,{className:"font-medium",children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{children:g.title}),d.jsx("span",{className:"text-xs text-neutral-400 truncate max-w-[200px]",children:g.url})]})}),d.jsx(Tt,{children:d.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-neutral-100",children:((v=dN.find(w=>w.value===g.type))==null?void 0:v.label)||g.type})}),d.jsx(Tt,{children:g.createdAt?D$(new Date(g.createdAt),"yyyy/MM/dd"):"-"}),d.jsx(Tt,{children:d.jsx("div",{className:"flex flex-wrap gap-1",children:g.keywords&&g.keywords.length>0?g.keywords.map((w,y)=>d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-blue-100 text-blue-800",children:[d.jsx(E9,{className:"h-3 w-3 mr-1"}),w]},y)):d.jsx("span",{className:"text-neutral-400 text-xs",children:"-"})})})]},g.id)}):d.jsx(Tr,{children:d.jsx(Tt,{colSpan:5,className:"text-center",children:"ドキュメントが見つかりません"})})})]})})]})]})}function Mae(e,t=[]){let n=[];function r(s,a){const o=m.createContext(a),c=n.length;n=[...n,a];function l(h){const{scope:p,children:f,...g}=h,v=(p==null?void 0:p[e][c])||o,w=m.useMemo(()=>g,Object.values(g));return d.jsx(v.Provider,{value:w,children:f})}function u(h,p){const f=(p==null?void 0:p[e][c])||o,g=m.useContext(f);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,u]}const i=()=>{const s=n.map(a=>m.createContext(a));return function(o){const c=(o==null?void 0:o[e])||s;return m.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return i.scopeName=e,[r,Oae(i,...t)]}function Oae(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:l})=>{const h=c(s)[`__scope${l}`];return{...o,...h}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var mP="Progress",vP=100,[Dae,Hge]=Mae(mP),[Lae,zae]=Dae(mP),g5=m.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=Fae,...a}=e;(i||i===0)&&!hN(i)&&console.error($ae(`${i}`,"Progress"));const o=hN(i)?i:vP;r!==null&&!pN(r,o)&&console.error(Bae(`${r}`,"Progress"));const c=pN(r,o)?r:null,l=tg(c)?s(c,o):void 0;return d.jsx(Lae,{scope:n,value:c,max:o,children:d.jsx(Re.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":tg(c)?c:void 0,"aria-valuetext":l,role:"progressbar","data-state":w5(c,o),"data-value":c??void 0,"data-max":o,...a,ref:t})})});g5.displayName=mP;var y5="ProgressIndicator",S5=m.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=zae(y5,n);return d.jsx(Re.div,{"data-state":w5(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});S5.displayName=y5;function Fae(e,t){return`${Math.round(e/t*100)}%`}function w5(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function tg(e){return typeof e=="number"}function hN(e){return tg(e)&&!isNaN(e)&&e>0}function pN(e,t){return tg(e)&&!isNaN(e)&&e<=t&&e>=0}function $ae(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${vP}\`.`}function Bae(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${vP} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var C5=g5,Vae=S5;const x5=m.forwardRef(({className:e,value:t,...n},r)=>d.jsx(C5,{ref:r,className:ve("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:d.jsx(Vae,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));x5.displayName=C5.displayName;const Uae=({onUploadSuccess:e})=>{const{toast:t}=ln(),n=m.useRef(null),[r,i]=m.useState(null),[s,a]=m.useState(!1),[o,c]=m.useState(0),[l,u]=m.useState(!1),[h,p]=m.useState(!1),f=!0,[g,v]=m.useState(""),[w,y]=m.useState(!1),S=async()=>{if(!g.trim()){t({title:"入力エラー",description:"キーワードを入力してください",variant:"destructive"});return}try{y(!0),t({title:"フロー生成中",description:`キーワード「${g}」からフローを生成しています...`});const P=await fetch("/api/flow-generator/generate-from-keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:g})});if(!P.ok){const _=await P.json();throw new Error(_.error||"生成に失敗しました")}const T=await P.json();if(console.log("APIからの応答データ:",T),T.success&&T.flowData)t({title:"フロー生成完了",description:`「${T.flowData.title||"タイトルなし"}」が生成されました。`}),e&&e(T.flowData.id),v("");else throw new Error("フローデータの形式が無効です")}catch(P){console.error("フロー生成エラー:",P),t({title:"生成エラー",description:P instanceof Error?P.message:"フローの生成に失敗しました",variant:"destructive"})}finally{y(!1)}},C=()=>{n.current&&n.current.click()},x=P=>{if(P.target.files&&P.target.files.length>0){const T=P.target.files[0],_=T.name.toLowerCase().split(".").pop()||"";if(!["pptx","ppt","xlsx","xls","pdf","json"].includes(_)){t({title:"未対応のファイル形式",description:"PowerPoint(.pptx, .ppt)、Excel(.xlsx, .xls)、PDF(.pdf)、またはJSON(.json)ファイルのみアップロード可能です",variant:"destructive"});return}i(T)}},E=async()=>{if(!r){t({title:"ファイルが選択されていません",description:"アップロードするファイルを選択してください",variant:"destructive"});return}a(!0),c(0);try{const P=new FormData;P.append("file",r),P.append("saveOriginalFile",h.toString()),P.append("autoGenerateFlow",f.toString());const T=setInterval(()=>{c(z=>z>=90?(clearInterval(T),90):z+10)},500),_=await fetch("/api/emergency-guide/process",{method:"POST",body:P});if(clearInterval(T),!_.ok)throw new Error("ファイルのアップロードに失敗しました");const k=await _.json();if(k.success)c(100),u(!0),t({title:"アップロード成功",description:"ファイルが正常に処理されました"}),e&&e(k.guideId),setTimeout(()=>{i(null),u(!1),c(0)},3e3);else throw new Error(k.error||"ファイル処理中にエラーが発生しました")}catch(P){console.error("Upload error:",P),t({title:"エラー",description:P instanceof Error?P.message:"ファイルのアップロードに失敗しました",variant:"destructive"})}finally{a(!1)}};return d.jsxs(pt,{className:"w-full",children:[d.jsxs(xt,{children:[d.jsx(At,{children:"応急処置フロー生成"}),d.jsx(Yr,{children:"キーワードやファイルから応急処置フローを生成・編集できます"})]}),d.jsx(St,{children:d.jsxs(_f,{defaultValue:"keywords",className:"w-full",children:[d.jsxs(pu,{className:"grid w-full grid-cols-2 mb-6",children:[d.jsx(On,{value:"keywords",children:"キーワードから生成"}),d.jsx(On,{value:"file",children:"ファイルから生成"})]}),d.jsx(Dn,{value:"keywords",className:"space-y-4",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium mb-2",children:"発生事象キーワード"}),d.jsx(Pr,{placeholder:"具体的な事象や状況、機器名などを入力してください！自動的に判断します。",value:g,onChange:P=>v(P.target.value),className:"min-h-[100px]"}),d.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:d.jsxs("span",{children:[g.length,"/100文字"]})})]}),d.jsx(ee,{className:"w-full",variant:"default",onClick:S,disabled:w||!g.trim(),children:w?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"mr-2 h-4 w-4 animate-spin"}),"生成中..."]}):d.jsxs(d.Fragment,{children:[d.jsx(O9,{className:"mr-2 h-4 w-4"}),"GPTフロー生成"]})}),d.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 rounded-md border border-blue-200",children:[d.jsx(kR,{className:"h-5 w-5 text-blue-500 flex-shrink-0"}),d.jsxs("div",{className:"text-sm text-gray-700",children:[d.jsx("p",{className:"font-medium mb-1",children:"主な流れ:"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-1 pl-1",children:[d.jsx("li",{children:"キーワードを入力してGPTフロー生成"}),d.jsx("li",{children:"生成された最適な応急処置フローを選択"}),d.jsx("li",{children:"選択したフローは以下の方法で編集可能："}),d.jsxs("ul",{className:"list-disc list-inside pl-6 space-y-1",children:[d.jsx("li",{children:"「テキスト編集」タブ：フローの内容をテキストベースで編集"}),d.jsx("li",{children:"「キャラクター編集」タブ：フローチャートとして視覚的に編集"})]})]})]})]})]})}),d.jsx(Dn,{value:"file",className:"space-y-4",children:d.jsxs("div",{children:[d.jsx("input",{type:"file",ref:n,onChange:x,accept:".pptx,.ppt,.xlsx,.xls,.pdf,.json",className:"hidden"}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-lg font-medium mb-2",children:"ファイルアップロード"}),d.jsx(ee,{variant:"outline",className:"w-full h-24 border-dashed",onClick:C,children:d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx(ic,{className:"h-8 w-8 text-gray-400 mb-2"}),d.jsx("p",{className:"text-gray-700 font-medium",children:"クリックしてファイルを選択"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PowerPoint、Excel、PDF、またはJSONファイル"})]})})]}),r&&d.jsx("div",{className:"mb-4 p-3 bg-indigo-50 rounded-md border border-indigo-200",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(ic,{className:"h-5 w-5 text-indigo-600 mr-2"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-indigo-700",children:r.name}),d.jsxs("p",{className:"text-xs text-gray-500",children:[(r.size/1024/1024).toFixed(2)," MB"]})]})]})}),(s||l)&&d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("span",{className:"text-sm font-medium text-gray-700",children:l?"完了":"処理中..."}),d.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o,"%"]})]}),d.jsx(x5,{value:o,className:"h-2"})]}),d.jsx("div",{className:"flex mb-4",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(uS,{id:"saveOriginalFile",checked:h,onCheckedChange:P=>p(P===!0)}),d.jsx(Be,{htmlFor:"saveOriginalFile",className:"text-sm text-gray-700",children:"元のファイルも保存する"})]})}),d.jsxs("div",{className:"flex items-center space-x-2 mb-4 bg-amber-50 p-2 rounded-md border border-amber-200",children:[d.jsx(kR,{className:"h-4 w-4 text-amber-500 flex-shrink-0"}),d.jsx("p",{className:"text-sm text-gray-700",children:"アップロード後、自動的に応急処置フローが生成されます"})]}),d.jsx(ee,{className:"w-full",onClick:E,disabled:!r||s||l,children:s?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"mr-2 h-4 w-4 animate-spin"}),"処理中..."]}):l?d.jsxs(d.Fragment,{children:[d.jsx(N7,{className:"mr-2 h-4 w-4"}),"完了しました"]}):"アップロードして処理"})]})})]})})]})},qae=af("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Wl({className:e,variant:t,...n}){return d.jsx("div",{className:ve(qae({variant:t}),e),...n})}function Hae(e,t){return m.useReducer((n,r)=>t[n][r]??n,e)}var gP="ScrollArea",[b5,Wge]=Ti(gP),[Wae,ii]=b5(gP),E5=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...a}=e,[o,c]=m.useState(null),[l,u]=m.useState(null),[h,p]=m.useState(null),[f,g]=m.useState(null),[v,w]=m.useState(null),[y,S]=m.useState(0),[C,x]=m.useState(0),[E,P]=m.useState(!1),[T,_]=m.useState(!1),k=Qe(t,D=>c(D)),z=hu(i);return d.jsx(Wae,{scope:n,type:r,dir:z,scrollHideDelay:s,scrollArea:o,viewport:l,onViewportChange:u,content:h,onContentChange:p,scrollbarX:f,onScrollbarXChange:g,scrollbarXEnabled:E,onScrollbarXEnabledChange:P,scrollbarY:v,onScrollbarYChange:w,scrollbarYEnabled:T,onScrollbarYEnabledChange:_,onCornerWidthChange:S,onCornerHeightChange:x,children:d.jsx(Re.div,{dir:z,...a,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});E5.displayName=gP;var P5="ScrollAreaViewport",R5=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,asChild:i,nonce:s,...a}=e,o=ii(P5,n),c=m.useRef(null),l=Qe(t,c,o.onViewportChange);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:s}),d.jsx(Re.div,{"data-radix-scroll-area-viewport":"",...a,asChild:i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:nce({asChild:i,children:r},u=>d.jsx("div",{"data-radix-scroll-area-content":"",ref:o.onContentChange,style:{minWidth:o.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});R5.displayName=P5;var as="ScrollAreaScrollbar",yP=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ii(as,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=i,o=e.orientation==="horizontal";return m.useEffect(()=>(o?s(!0):a(!0),()=>{o?s(!1):a(!1)}),[o,s,a]),i.type==="hover"?d.jsx(Kae,{...r,ref:t,forceMount:n}):i.type==="scroll"?d.jsx(Gae,{...r,ref:t,forceMount:n}):i.type==="auto"?d.jsx(_5,{...r,ref:t,forceMount:n}):i.type==="always"?d.jsx(SP,{...r,ref:t}):null});yP.displayName=as;var Kae=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ii(as,e.__scopeScrollArea),[s,a]=m.useState(!1);return m.useEffect(()=>{const o=i.scrollArea;let c=0;if(o){const l=()=>{window.clearTimeout(c),a(!0)},u=()=>{c=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return o.addEventListener("pointerenter",l),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",l),o.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),d.jsx(ri,{present:n||s,children:d.jsx(_5,{"data-state":s?"visible":"hidden",...r,ref:t})})}),Gae=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ii(as,e.__scopeScrollArea),s=e.orientation==="horizontal",a=SS(()=>c("SCROLL_END"),100),[o,c]=Hae("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay,c]),m.useEffect(()=>{const l=i.viewport,u=s?"scrollLeft":"scrollTop";if(l){let h=l[u];const p=()=>{const f=l[u];h!==f&&(c("SCROLL"),a()),h=f};return l.addEventListener("scroll",p),()=>l.removeEventListener("scroll",p)}},[i.viewport,s,c,a]),d.jsx(ri,{present:n||o!=="hidden",children:d.jsx(SP,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:be(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:be(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),_5=m.forwardRef((e,t)=>{const n=ii(as,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,a]=m.useState(!1),o=e.orientation==="horizontal",c=SS(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;a(o?l:u)}},10);return Kl(n.viewport,c),Kl(n.content,c),d.jsx(ri,{present:r||s,children:d.jsx(SP,{"data-state":s?"visible":"hidden",...i,ref:t})})}),SP=m.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=ii(as,e.__scopeScrollArea),s=m.useRef(null),a=m.useRef(0),[o,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=j5(o.viewport,o.content),u={...r,sizes:o,onSizesChange:c,hasThumb:l>0&&l<1,onThumbChange:p=>s.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function h(p,f){return ece(p,a.current,o,f)}return n==="horizontal"?d.jsx(Qae,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollLeft,f=fN(p,o,i.dir);s.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=h(p,i.dir))}}):n==="vertical"?d.jsx(Jae,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollTop,f=fN(p,o);s.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=h(p))}}):null}),Qae=m.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=ii(as,e.__scopeScrollArea),[a,o]=m.useState(),c=m.useRef(null),l=Qe(t,c,s.onScrollbarXChange);return m.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),d.jsx(A5,{"data-orientation":"horizontal",...i,ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yS(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(s.viewport){const p=s.viewport.scrollLeft+u.deltaX;e.onWheelScroll(p),M5(p,h)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&a&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:rg(a.paddingLeft),paddingEnd:rg(a.paddingRight)}})}})}),Jae=m.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=ii(as,e.__scopeScrollArea),[a,o]=m.useState(),c=m.useRef(null),l=Qe(t,c,s.onScrollbarYChange);return m.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),d.jsx(A5,{"data-orientation":"vertical",...i,ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yS(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(s.viewport){const p=s.viewport.scrollTop+u.deltaY;e.onWheelScroll(p),M5(p,h)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&a&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:rg(a.paddingTop),paddingEnd:rg(a.paddingBottom)}})}})}),[Yae,T5]=b5(as),A5=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:l,onWheelScroll:u,onResize:h,...p}=e,f=ii(as,n),[g,v]=m.useState(null),w=Qe(t,k=>v(k)),y=m.useRef(null),S=m.useRef(""),C=f.viewport,x=r.content-r.viewport,E=Kt(u),P=Kt(c),T=SS(h,10);function _(k){if(y.current){const z=k.clientX-y.current.left,D=k.clientY-y.current.top;l({x:z,y:D})}}return m.useEffect(()=>{const k=z=>{const D=z.target;(g==null?void 0:g.contains(D))&&E(z,x)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[C,g,x,E]),m.useEffect(P,[r,P]),Kl(g,T),Kl(f.content,T),d.jsx(Yae,{scope:n,scrollbar:g,hasThumb:i,onThumbChange:Kt(s),onThumbPointerUp:Kt(a),onThumbPositionChange:P,onThumbPointerDown:Kt(o),children:d.jsx(Re.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:be(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),y.current=g.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),_(k))}),onPointerMove:be(e.onPointerMove,_),onPointerUp:be(e.onPointerUp,k=>{const z=k.target;z.hasPointerCapture(k.pointerId)&&z.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=S.current,f.viewport&&(f.viewport.style.scrollBehavior=""),y.current=null})})})}),ng="ScrollAreaThumb",N5=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=T5(ng,e.__scopeScrollArea);return d.jsx(ri,{present:n||i.hasThumb,children:d.jsx(Zae,{ref:t,...r})})}),Zae=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=ii(ng,n),a=T5(ng,n),{onThumbPositionChange:o}=a,c=Qe(t,h=>a.onThumbChange(h)),l=m.useRef(),u=SS(()=>{l.current&&(l.current(),l.current=void 0)},100);return m.useEffect(()=>{const h=s.viewport;if(h){const p=()=>{if(u(),!l.current){const f=tce(h,o);l.current=f,o()}};return o(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[s.viewport,u,o]),d.jsx(Re.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:be(e.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),g=h.clientX-f.left,v=h.clientY-f.top;a.onThumbPointerDown({x:g,y:v})}),onPointerUp:be(e.onPointerUp,a.onThumbPointerUp)})});N5.displayName=ng;var wP="ScrollAreaCorner",I5=m.forwardRef((e,t)=>{const n=ii(wP,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?d.jsx(Xae,{...e,ref:t}):null});I5.displayName=wP;var Xae=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=ii(wP,n),[s,a]=m.useState(0),[o,c]=m.useState(0),l=!!(s&&o);return Kl(i.scrollbarX,()=>{var h;const u=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(u),c(u)}),Kl(i.scrollbarY,()=>{var h;const u=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(u),a(u)}),l?d.jsx(Re.div,{...r,ref:t,style:{width:s,height:o,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function rg(e){return e?parseInt(e,10):0}function j5(e,t){const n=e/t;return isNaN(n)?0:n}function yS(e){const t=j5(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function ece(e,t,n,r="ltr"){const i=yS(n),s=i/2,a=t||s,o=i-a,c=n.scrollbar.paddingStart+a,l=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return k5([c,l],h)(e)}function fN(e,t,n="ltr"){const r=yS(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,a=t.content-t.viewport,o=s-r,c=n==="ltr"?[0,a]:[a*-1,0],l=Lp(e,c);return k5([0,a],[0,o])(l)}function k5(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function M5(e,t){return e>0&&e<t}var tce=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},a=n.left!==s.left,o=n.top!==s.top;(a||o)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function SS(e,t){const n=Kt(e),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Kl(e,t){const n=Kt(t);an(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}function nce(e,t){const{asChild:n,children:r}=e;if(!n)return typeof t=="function"?t(r):t;const i=m.Children.only(r);return m.cloneElement(i,{children:typeof t=="function"?t(i.props.children):t})}var O5=E5,rce=R5,ice=I5;const CP=m.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(O5,{ref:r,className:ve("relative overflow-hidden",e),...n,children:[d.jsx(rce,{className:"h-full w-full rounded-[inherit]",children:t}),d.jsx(D5,{}),d.jsx(ice,{})]}));CP.displayName=O5.displayName;const D5=m.forwardRef(({className:e,orientation:t="vertical",...n},r)=>d.jsx(yP,{ref:r,orientation:t,className:ve("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:d.jsx(N5,{className:"relative flex-1 rounded-full bg-border"})}));D5.displayName=yP.displayName;const sce=()=>{const{toast:e}=ln(),[t,n]=m.useState([]),[r,i]=m.useState(!0),[s,a]=m.useState(null),[o,c]=m.useState(null),[l,u]=m.useState(!1),[h,p]=m.useState(!1),[f,g]=m.useState(null),[v,w]=m.useState(!1),[y,S]=m.useState(!1),[C,x]=m.useState(null),[E,P]=m.useState(!1),[T,_]=m.useState([]),[k,z]=m.useState(!1),[D,O]=m.useState({label:"",value:""}),M=async()=>{try{i(!0);const F=new Date().getTime(),Q=await fetch(`/api/emergency-guide/list?_t=${F}`);if(!Q.ok)throw new Error("ガイドファイル一覧の取得に失敗しました");const Z=await Q.json();console.log("サーバーから取得したガイド一覧:",Z),n(Z)}catch(F){console.error("ガイドファイル取得エラー:",F),e({title:"エラー",description:"ガイドファイル一覧の取得に失敗しました",variant:"destructive"})}finally{i(!1)}},b=async F=>{try{i(!0);const Q=await fetch(`/api/emergency-guide/detail/${F}`);if(!Q.ok)throw new Error("ガイド詳細データの取得に失敗しました");const Z=await Q.json();c(Z),g(JSON.parse(JSON.stringify(Z.data))),ne(Z.data)}catch(Q){console.error("ガイド詳細取得エラー:",Q),e({title:"エラー",description:"ガイド詳細の取得に失敗しました",variant:"destructive"})}finally{i(!1)}},[A,N]=m.useState(!1),[j,R]=m.useState(!1),[I,$]=m.useState({added:0,modified:0,deleted:0}),[U,G]=m.useState(!1),[Y,J]=m.useState(null),[oe,V]=m.useState({タイトル:"",本文:[""],ノート:""}),H=()=>{if(!o||!f)return{added:0,modified:0,deleted:0};let F=0,Q=0,Z=0;["タイトル","作成者","説明"].forEach(pe=>{o.data.metadata[pe]!==f.metadata[pe]&&Q++}),o.data.slides.length>f.slides.length?Z+=o.data.slides.length-f.slides.length:o.data.slides.length<f.slides.length&&(F+=f.slides.length-o.data.slides.length);const se=Math.min(o.data.slides.length,f.slides.length);for(let pe=0;pe<se;pe++){const Ne=o.data.slides[pe],Ze=f.slides[pe];(Ne.タイトル!==Ze.タイトル||Ne.ノート!==Ze.ノート||JSON.stringify(Ne.本文)!==JSON.stringify(Ze.本文))&&Q++}return{added:F,modified:Q,deleted:Z}},te=()=>{if(!s||!f)return;const F=H();$(F),F.added>0||F.modified>0||F.deleted>0?R(!0):(u(!1),e({title:"変更なし",description:"変更点はありませんでした"}))},re=async()=>{if(!(!s||!f))try{if(p(!0),!(await fetch(`/api/emergency-guide/update/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:f,connectionNumbers:T})})).ok)throw new Error("応急処置ガイドデータの更新に失敗しました");e({title:"更新完了",description:"応急処置ガイドデータを更新しました"}),b(s),u(!1),w(!1),R(!1)}catch(F){console.error("ガイド更新エラー:",F),e({title:"エラー",description:"応急処置ガイドデータの更新に失敗しました",variant:"destructive"})}finally{p(!1)}},ne=F=>{const Q=[],Z=/接続番号\s*[:：]\s*(\d+)/g;if(F.metadata&&F.metadata.説明){let se;for(;(se=Z.exec(F.metadata.説明))!==null;)Q.push({id:`metadata-${Q.length}`,label:"メタデータの説明",value:se[1]})}F.slides&&F.slides.forEach((se,pe)=>{if(se.本文&&se.本文.forEach((Ne,Ze)=>{let Ht;for(Z.lastIndex=0;(Ht=Z.exec(Ne))!==null;)Q.push({id:`slide-${pe}-text-${Ze}-${Q.length}`,label:`スライド ${se.スライド番号} の本文`,value:Ht[1]})}),se.ノート){let Ne;for(Z.lastIndex=0;(Ne=Z.exec(se.ノート))!==null;)Q.push({id:`slide-${pe}-note-${Q.length}`,label:`スライド ${se.スライド番号} のノート`,value:Ne[1]})}});const X=Q.filter((se,pe,Ne)=>pe===Ne.findIndex(Ze=>Ze.value===se.value));_(X)},he=(F,Q)=>{if(!f)return;const Z=JSON.parse(JSON.stringify(f)),X=new RegExp(`接続番号\\s*[:：]\\s*${F}`,"g"),se=`接続番号: ${Q}`;Z.metadata&&Z.metadata.説明&&(Z.metadata.説明=Z.metadata.説明.replace(X,se)),Z.slides&&Z.slides.forEach(pe=>{pe.本文&&(pe.本文=pe.本文.map(Ne=>Ne.replace(X,se))),pe.ノート&&(pe.ノート=pe.ノート.replace(X,se))}),g(Z),_(pe=>pe.map(Ne=>Ne.value===F?{...Ne,value:Q}:Ne)),e({title:"接続番号を更新",description:`接続番号 ${F} を ${Q} に変更しました`})},ue=()=>{if(!D.label||!D.value){e({title:"入力エラー",description:"ラベルと値を入力してください",variant:"destructive"});return}const F=`custom-${Date.now()}`;_([...T,{id:F,label:D.label,value:D.value}]),O({label:"",value:""}),z(!1),e({title:"接続番号を追加",description:`新しい接続番号 (${D.value}) を追加しました`})},_e=(F,Q)=>{f&&g({...f,metadata:{...f.metadata,[F]:Q}})},je=F=>{J(F),V({タイトル:"",本文:[""],ノート:""}),G(!0)},qe=()=>{if(!f)return;if(!oe.タイトル.trim()){e({title:"入力エラー",description:"スライドのタイトルを入力してください",variant:"destructive"});return}const F=Y!==null?Y:f.slides.length,Q=[...f.slides],X={スライド番号:F+1,タイトル:oe.タイトル,本文:oe.本文.filter(se=>se.trim()!==""),ノート:oe.ノート,画像テキスト:[]};Q.splice(F,0,X);for(let se=F+1;se<Q.length;se++)Q[se].スライド番号=se+1;g({...f,slides:Q}),G(!1),J(null),e({title:"スライド追加",description:`新しいスライド「${oe.タイトル}」を追加しました`})},ht=(F,Q,Z)=>{if(!f)return;const X=[...f.slides];X[F]={...X[F],[Q]:Z},g({...f,slides:X})},Me=(F,Q,Z)=>{if(!f)return;const X=[...f.slides],se=[...X[F].本文];se[Q]=Z,X[F]={...X[F],本文:se},g({...f,slides:X})},L=async()=>{if(C)try{P(!0),e({title:"削除中",description:`「${C.title}」を削除しています...`});const F=await fetch(`/api/emergency-guide/delete/${C.id}`,{method:"DELETE"});if(F.ok){e({title:"削除完了",description:`「${C.title}」を削除しました`}),n(Q=>Q.filter(Z=>Z.id!==C.id)),console.log(`ID=${C.id}を削除しました。リスト更新を待機中...`);try{console.log("サーバーキャッシュをクリア中..."),await fetch("/api/tech-support/clear-cache",{method:"POST",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),console.log("サーバーキャッシュクリア完了")}catch(Q){console.error("キャッシュクリア失敗:",Q)}setTimeout(()=>{console.log("サーバーからデータを再取得します..."),M(),setTimeout(()=>{console.log("整合性確認のため、2回目のデータ取得を実行..."),M()},1500)},3e3)}else{const Q=await F.json();throw console.error("削除エラー (サーバー):",Q),new Error(Q.error||"削除に失敗しました")}}catch(F){console.error("削除エラー:",F),e({title:"エラー",description:F instanceof Error?F.message:"ファイルの削除に失敗しました",variant:"destructive"})}finally{P(!1),S(!1),x(null)}};m.useEffect(()=>{M()},[]),m.useEffect(()=>{s&&b(s)},[s]),m.useEffect(()=>{const F=Q=>{const Z=Q;if(Z.detail&&Z.detail.keyword){const X=Z.detail.keyword;console.log(`応急処置ガイド編集: 検索キーワード「${X}」を受信`);const se=t.filter(pe=>pe.title.includes(X)||pe.fileName.includes(X));if(se.length>0){console.log(`検索結果: ${se.length}件のガイドが見つかりました`);const pe=se[0];a(pe.id);const Ne=`ts_${pe.id}`;console.log(`フロー表示に切り替え: ${Ne}`),window.dispatchEvent(new CustomEvent("switch-to-flow-tab",{detail:{guideId:Ne}})),e({title:"検索結果",description:`${se.length}件のガイドが「${X}」に一致しました`})}else console.log(`検索結果: 「${X}」に一致するガイドは見つかりませんでした`),e({title:"検索結果なし",description:`「${X}」に一致するガイドは見つかりませんでした`,variant:"destructive"})}};return window.addEventListener("search-emergency-guide",F),()=>{window.removeEventListener("search-emergency-guide",F)}},[t,e]);const K=F=>{try{const Q=new Date(F);return new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(Q)}catch{return F}};return d.jsxs("div",{className:"container mx-auto p-4",children:[d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsx(pB,{open:y,title:"ファイル削除の確認",message:C?`「${C.title}」を削除してもよろしいですか？
削除すると元に戻せません。`:"",onCancel:()=>{S(!1),x(null)},onConfirm:L}),d.jsxs(pt,{children:[d.jsxs(xt,{children:[d.jsx(At,{children:"ファイル一覧"}),d.jsx(Yr,{children:"編集するファイルを選択してください"})]}),d.jsx(St,{children:r&&!t.length?d.jsx("div",{className:"flex justify-center py-8",children:d.jsx(Wn,{className:"h-8 w-8 animate-spin text-indigo-500"})}):t.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(ic,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),d.jsx("p",{children:"ファイルがありません"}),d.jsx("p",{className:"text-sm mt-2",children:"PowerPoint, Excel, またはPDFファイルをアップロードして処理してください"})]}):d.jsx(CP,{className:"h-[300px]",children:d.jsxs(Vl,{children:[d.jsx(Ul,{children:d.jsxs(Tr,{children:[d.jsx(Lt,{children:"タイトル"}),d.jsx(Lt,{children:"作成日"}),d.jsx(Lt,{children:"スライド数"}),d.jsx(Lt,{className:"text-right",children:"操作"})]})}),d.jsx(ql,{children:t.map(F=>d.jsxs(Tr,{className:s===F.id?"bg-indigo-50":"",children:[d.jsx(Tt,{className:"font-medium",children:F.title}),d.jsx(Tt,{children:K(F.createdAt)}),d.jsx(Tt,{children:F.slideCount}),d.jsx(Tt,{className:"text-right",children:d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>{a(F.id),u(!0),w(!0),b(F.id)},children:[d.jsx(E0,{className:"h-4 w-4 mr-1"}),"編集"]}),d.jsxs(ee,{variant:"outline",size:"sm",className:"bg-red-50 hover:bg-red-100 text-red-700 hover:text-red-800",onClick:()=>{x(F),S(!0)},children:[d.jsx(Ds,{className:"h-4 w-4 mr-1"}),"削除"]})]})})]},F.id))})]})})})]}),s&&o&&v&&d.jsxs(pt,{children:[d.jsxs(xt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsxs("div",{children:[d.jsx(At,{children:"応急処置ガイド編集"}),d.jsxs(Yr,{children:[o==null?void 0:o.data.metadata.タイトル," (",K((o==null?void 0:o.data.metadata.作成日)||""),")"]})]}),d.jsx("div",{className:"flex items-center gap-2",children:l?d.jsxs(d.Fragment,{children:[d.jsxs(ee,{variant:"destructive",size:"sm",onClick:()=>{u(!1),w(!1),o&&g(JSON.parse(JSON.stringify(o.data)))},disabled:h,children:[d.jsx(_r,{className:"h-4 w-4 mr-1"}),"キャンセル"]}),d.jsx(ee,{variant:"default",size:"sm",onClick:te,disabled:h,children:h?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"h-4 w-4 mr-1 animate-spin"}),"保存中..."]}):d.jsxs(d.Fragment,{children:[d.jsx(yp,{className:"h-4 w-4 mr-1"}),"保存"]})})]}):d.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>u(!0),children:[d.jsx(E0,{className:"h-4 w-4 mr-1"}),"編集"]})})]}),d.jsx(St,{children:d.jsxs(_f,{defaultValue:"metadata",className:"w-full",children:[d.jsxs(pu,{className:"grid grid-cols-4 mb-4",children:[d.jsx(On,{value:"metadata",children:"メタデータ"}),d.jsx(On,{value:"slides",children:"スライド内容"}),d.jsx(On,{value:"connections",children:"接続番号"}),d.jsx(On,{value:"preview",children:"プレビュー"})]}),d.jsx(Dn,{value:"metadata",children:d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{className:"grid gap-4",children:[d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"title",children:"タイトル"}),d.jsx(at,{id:"title",value:l?f.metadata.タイトル:(o==null?void 0:o.data.metadata.タイトル)||"",onChange:F=>_e("タイトル",F.target.value),disabled:!l})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"author",children:"作成者"}),d.jsx(at,{id:"author",value:l?f.metadata.作成者:(o==null?void 0:o.data.metadata.作成者)||"",onChange:F=>_e("作成者",F.target.value),disabled:!l})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"description",children:"説明"}),d.jsx(Pr,{id:"description",rows:5,value:l?f.metadata.説明:(o==null?void 0:o.data.metadata.説明)||"",onChange:F=>_e("説明",F.target.value),disabled:!l})]}),l&&d.jsxs("div",{className:"mt-4 border rounded-lg p-4 bg-slate-50",children:[d.jsx("div",{className:"text-xs text-blue-600 mb-2",children:"メタデータプレビュー（リアルタイム更新）"}),d.jsxs("div",{className:"space-y-2",children:[f.metadata.タイトル&&d.jsx("h3",{className:"font-bold text-lg",children:f.metadata.タイトル}),f.metadata.作成者&&d.jsxs("div",{className:"text-sm",children:[d.jsx("span",{className:"text-gray-500",children:"作成者:"})," ",f.metadata.作成者]}),f.metadata.説明&&d.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:d.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:f.metadata.説明})})]})]})]})})}),d.jsx(Dn,{value:"slides",children:d.jsxs("div",{className:"space-y-8",children:[l&&d.jsx("div",{className:"flex justify-center mb-4",children:d.jsxs(ee,{variant:"ghost",size:"sm",className:"border border-dashed border-gray-300 text-gray-500 hover:text-blue-600 w-3/4",onClick:()=>je(0),children:[d.jsx(lr,{className:"h-3.5 w-3.5 mr-1"}),"先頭にスライドを追加"]})}),(l?f.slides:(o==null?void 0:o.data.slides)||[]).map((F,Q)=>d.jsxs("div",{children:[d.jsxs(pt,{className:"border-indigo-200",children:[d.jsx(xt,{className:"bg-indigo-50 rounded-t-lg",children:d.jsx("div",{className:"flex justify-between items-center",children:d.jsxs(At,{className:"text-lg",children:["スライド ",F.スライド番号,": ",F.タイトル]})})}),d.jsxs(St,{className:"pt-4 space-y-4",children:[d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:`slide-${Q}-title`,children:"タイトル"}),d.jsx(at,{id:`slide-${Q}-title`,value:F.タイトル,onChange:Z=>ht(Q,"タイトル",Z.target.value),disabled:!l})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:`slide-${Q}-text`,children:"本文"}),F.本文.map((Z,X)=>d.jsx(Pr,{id:`slide-${Q}-text-${X}`,rows:3,value:Z,onChange:se=>Me(Q,X,se.target.value),disabled:!l,className:"mb-2"},X))]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:`slide-${Q}-note`,children:"ノート"}),d.jsx(Pr,{id:`slide-${Q}-note`,rows:3,value:F.ノート,onChange:Z=>ht(Q,"ノート",Z.target.value),disabled:!l})]}),l&&d.jsxs("div",{className:"mt-4 border rounded-lg p-4 bg-slate-50",children:[d.jsx("div",{className:"text-xs text-blue-600 mb-2",children:"スライドプレビュー（リアルタイム更新）"}),d.jsxs("div",{className:"space-y-3",children:[F.タイトル&&d.jsx("h3",{className:"font-bold text-lg",children:F.タイトル}),F.本文.map((Z,X)=>d.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:Z},X)),F.ノート&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[d.jsx("span",{className:"text-xs text-gray-500",children:"ノート:"}),d.jsx("p",{className:"text-sm text-gray-600 italic",children:F.ノート})]})]})]}),F.画像テキスト&&F.画像テキスト.length>0&&d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{children:"画像"}),d.jsx("div",{className:"grid grid-cols-2 gap-4",children:F.画像テキスト.map((Z,X)=>d.jsxs("div",{className:"border rounded-lg p-2",children:[d.jsx("img",{src:Z.画像パス,alt:`スライド${F.スライド番号}の画像${X+1}`,className:"w-full h-auto mb-2 rounded"}),d.jsx("p",{className:"text-sm text-gray-600",children:Z.テキスト})]},X))})]})]})]}),l&&d.jsx("div",{className:"flex justify-center my-4",children:d.jsxs(ee,{variant:"ghost",size:"sm",className:"border border-dashed border-gray-300 text-gray-500 hover:text-blue-600",onClick:()=>je(Q+1),children:[d.jsx(lr,{className:"h-3.5 w-3.5 mr-1"}),"ここにスライドを追加"]})})]},Q))]})}),d.jsx(Dn,{value:"connections",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium",children:"検出された接続番号"}),d.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>z(!0),disabled:!l,children:[d.jsx(lr,{className:"h-4 w-4 mr-1"}),"接続番号を追加"]})]}),T.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg",children:[d.jsx("p",{children:"接続番号が見つかりませんでした"}),d.jsx("p",{className:"text-sm mt-2",children:"テキスト内の「接続番号: 数字」パターンを検索します"})]}):d.jsxs(Vl,{children:[d.jsx(Ul,{children:d.jsxs(Tr,{children:[d.jsx(Lt,{children:"場所"}),d.jsx(Lt,{children:"接続番号"}),d.jsx(Lt,{className:"text-right",children:"操作"})]})}),d.jsx(ql,{children:T.map(F=>d.jsxs(Tr,{children:[d.jsx(Tt,{children:F.label}),d.jsx(Tt,{children:l?d.jsx(at,{value:F.value,onChange:Q=>{F.value;const Z=T.map(X=>X.id===F.id?{...X,value:Q.target.value}:X);_(Z)},className:"w-24"}):d.jsx(Wl,{children:F.value})}),d.jsx(Tt,{className:"text-right",children:l&&d.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>{const Q=prompt(`接続番号 ${F.value} を変更`,F.value);Q&&Q!==F.value&&he(F.value,Q)},children:[d.jsx(E0,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"編集"})]})})]},F.id))})]})]})}),d.jsx(Dn,{value:"preview",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[d.jsx("h3",{className:"font-medium mb-2 text-blue-700",children:"プレビュー表示"}),d.jsxs("p",{className:"text-sm text-blue-700",children:[l?"現在編集中の内容をプレビュー表示しています。":"保存されている内容を表示しています。","編集内容はリアルタイムに反映されます。"]})]}),d.jsxs(pt,{className:"border-green-200",children:[d.jsxs(xt,{className:"bg-green-50 rounded-t-lg",children:[d.jsx(At,{children:l?f==null?void 0:f.metadata.タイトル:(o==null?void 0:o.data.metadata.タイトル)||"タイトルなし"}),d.jsxs(Yr,{children:["作成者: ",l?f==null?void 0:f.metadata.作成者:(o==null?void 0:o.data.metadata.作成者)||"不明"]})]}),d.jsx(St,{className:"pt-4",children:d.jsxs("div",{className:"prose max-w-none",children:[d.jsx("h3",{className:"text-lg font-medium mb-2",children:"概要"}),d.jsx("p",{className:"whitespace-pre-line mb-4",children:l?f==null?void 0:f.metadata.説明:(o==null?void 0:o.data.metadata.説明)||"説明はありません"}),d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[d.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"応急処置ガイドプレビュー"}),d.jsx("p",{className:"text-sm text-blue-700",children:"このプレビューは実際の応急処置ガイドの表示形式です。"})]}),d.jsx("h3",{className:"text-lg font-medium mt-6 mb-2",children:"スライド内容"}),d.jsx("div",{className:"space-y-6",children:(l?f==null?void 0:f.slides:(o==null?void 0:o.data.slides)||[]).map((F,Q)=>d.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[d.jsxs("h4",{className:"text-lg font-bold mb-2",children:[F.スライド番号,". ",F.タイトル]}),F.本文.map((Z,X)=>d.jsx("p",{className:"mb-2 whitespace-pre-line",children:Z},X)),F.ノート&&d.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 rounded border border-yellow-200",children:[d.jsx("h5",{className:"text-sm font-medium text-yellow-800 mb-1",children:"ノート:"}),d.jsx("p",{className:"text-sm text-yellow-800 whitespace-pre-line",children:F.ノート})]}),F.画像テキスト&&F.画像テキスト.length>0&&d.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:F.画像テキスト.map((Z,X)=>d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("img",{src:Z.画像パス,alt:`スライド${F.スライド番号}の画像${X+1}`,className:"max-w-full h-auto rounded"}),d.jsx("p",{className:"text-sm text-center mt-1",children:Z.テキスト})]},X))})]},Q))})]})})]})]})})]})})]}),d.jsx(mr,{open:k,onOpenChange:z,children:d.jsxs(Kn,{className:"sm:max-w-md",children:[d.jsxs(vr,{children:[d.jsx(Gn,{children:"接続番号を追加"}),d.jsx(Ir,{children:"新しい接続番号とその説明ラベルを入力してください"})]}),d.jsxs("div",{className:"grid gap-4 py-4",children:[d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"conn-label",children:"説明ラベル"}),d.jsx(at,{id:"conn-label",placeholder:"例: ルーター背面の番号",value:D.label,onChange:F=>O({...D,label:F.target.value})})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"conn-value",children:"接続番号"}),d.jsx(at,{id:"conn-value",placeholder:"例: 0120123456",value:D.value,onChange:F=>O({...D,value:F.target.value})})]})]}),d.jsxs(Zr,{children:[d.jsx(ee,{variant:"outline",onClick:()=>z(!1),children:"キャンセル"}),d.jsx(ee,{onClick:ue,children:"追加"})]})]})}),d.jsx(mr,{open:j,onOpenChange:R,children:d.jsxs(Kn,{className:"sm:max-w-md",children:[d.jsxs(vr,{children:[d.jsx(Gn,{children:"変更内容の確認"}),d.jsx(Ir,{children:"以下の変更を保存しますか？"})]}),d.jsx("div",{className:"py-4",children:d.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[I.added>0&&d.jsxs("li",{children:["新しい項目追加: ",I.added,"件"]}),I.modified>0&&d.jsxs("li",{children:["項目の変更: ",I.modified,"件"]}),I.deleted>0&&d.jsxs("li",{children:["項目の削除: ",I.deleted,"件"]})]})}),d.jsxs(Zr,{children:[d.jsx(ee,{variant:"outline",onClick:()=>R(!1),children:"キャンセル"}),d.jsx(ee,{onClick:re,disabled:h,children:h?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"h-4 w-4 mr-1 animate-spin"}),"保存中..."]}):"保存"})]})]})})]}),d.jsx(mr,{open:U,onOpenChange:G,children:d.jsxs(Kn,{className:"sm:max-w-md",children:[d.jsxs(vr,{children:[d.jsx(Gn,{children:"新しいスライドを追加"}),d.jsx(Ir,{children:Y!==null&&f?Y<f.slides.length?`スライド ${Y+1} と ${Y+2} の間に新しいスライドを追加します。`:"最後に新しいスライドを追加します。":"新しいスライドを追加します。"})]}),d.jsxs("div",{className:"grid gap-4 py-4",children:[d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"new-slide-title",children:"タイトル"}),d.jsx(at,{id:"new-slide-title",value:oe.タイトル,onChange:F=>V({...oe,タイトル:F.target.value}),placeholder:"新しいスライドのタイトル"})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"new-slide-content",children:"本文"}),d.jsx(Pr,{id:"new-slide-content",value:oe.本文[0]||"",onChange:F=>V({...oe,本文:[F.target.value]}),placeholder:"スライドの内容を入力してください",rows:3})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"new-slide-note",children:"ノート"}),d.jsx(Pr,{id:"new-slide-note",value:oe.ノート,onChange:F=>V({...oe,ノート:F.target.value}),placeholder:"補足説明やノート（オプション）",rows:2})]})]}),d.jsxs(Zr,{children:[d.jsx(ee,{type:"button",variant:"outline",onClick:()=>G(!1),children:"キャンセル"}),d.jsx(ee,{type:"button",onClick:qe,children:"追加"})]})]})})]})};var L5="AlertDialog",[oce,Kge]=Ti(L5,[i3]),Hs=i3(),z5=e=>{const{__scopeAlertDialog:t,...n}=e,r=Hs(t);return d.jsx(YE,{...r,...n,modal:!0})};z5.displayName=L5;var ace="AlertDialogTrigger",cce=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Hs(n);return d.jsx(ZE,{...i,...r,ref:t})});cce.displayName=ace;var lce="AlertDialogPortal",F5=e=>{const{__scopeAlertDialog:t,...n}=e,r=Hs(t);return d.jsx(XE,{...r,...n})};F5.displayName=lce;var uce="AlertDialogOverlay",$5=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Hs(n);return d.jsx(bf,{...i,...r,ref:t})});$5.displayName=uce;var ll="AlertDialogContent",[dce,hce]=oce(ll),B5=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,s=Hs(n),a=m.useRef(null),o=Qe(t,a),c=m.useRef(null);return d.jsx(Bie,{contentName:ll,titleName:V5,docsSlug:"alert-dialog",children:d.jsx(dce,{scope:n,cancelRef:c,children:d.jsxs(Ef,{role:"alertdialog",...s,...i,ref:o,onOpenAutoFocus:be(i.onOpenAutoFocus,l=>{var u;l.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:l=>l.preventDefault(),onInteractOutside:l=>l.preventDefault(),children:[d.jsx(qD,{children:r}),d.jsx(fce,{contentRef:a})]})})})});B5.displayName=ll;var V5="AlertDialogTitle",U5=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Hs(n);return d.jsx(Pf,{...i,...r,ref:t})});U5.displayName=V5;var q5="AlertDialogDescription",H5=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Hs(n);return d.jsx(Rf,{...i,...r,ref:t})});H5.displayName=q5;var pce="AlertDialogAction",W5=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Hs(n);return d.jsx(oS,{...i,...r,ref:t})});W5.displayName=pce;var K5="AlertDialogCancel",G5=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=hce(K5,n),s=Hs(n),a=Qe(t,i);return d.jsx(oS,{...s,...r,ref:a})});G5.displayName=K5;var fce=({contentRef:e})=>{const t=`\`${ll}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ll}\` by passing a \`${q5}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ll}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},mce=z5,vce=F5,Q5=$5,J5=B5,Y5=W5,Z5=G5,X5=U5,e6=H5;const gce=mce,yce=vce,t6=m.forwardRef(({className:e,...t},n)=>d.jsx(Q5,{className:ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));t6.displayName=Q5.displayName;const n6=m.forwardRef(({className:e,...t},n)=>d.jsxs(yce,{children:[d.jsx(t6,{}),d.jsx(J5,{ref:n,className:ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));n6.displayName=J5.displayName;const r6=({className:e,...t})=>d.jsx("div",{className:ve("flex flex-col space-y-2 text-center sm:text-left",e),...t});r6.displayName="AlertDialogHeader";const i6=({className:e,...t})=>d.jsx("div",{className:ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});i6.displayName="AlertDialogFooter";const s6=m.forwardRef(({className:e,...t},n)=>d.jsx(X5,{ref:n,className:ve("text-lg font-semibold",e),...t}));s6.displayName=X5.displayName;const o6=m.forwardRef(({className:e,...t},n)=>d.jsx(e6,{ref:n,className:ve("text-sm text-muted-foreground",e),...t}));o6.displayName=e6.displayName;const a6=m.forwardRef(({className:e,...t},n)=>d.jsx(Y5,{ref:n,className:ve(sE(),e),...t}));a6.displayName=Y5.displayName;const c6=m.forwardRef(({className:e,...t},n)=>d.jsx(Z5,{ref:n,className:ve(sE({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));c6.displayName=Z5.displayName;function bn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=bn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var l6={exports:{}},u6={},d6={exports:{}},h6={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gl=m;function Sce(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wce=typeof Object.is=="function"?Object.is:Sce,Cce=Gl.useState,xce=Gl.useEffect,bce=Gl.useLayoutEffect,Ece=Gl.useDebugValue;function Pce(e,t){var n=t(),r=Cce({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return bce(function(){i.value=n,i.getSnapshot=t,mw(i)&&s({inst:i})},[e,n,t]),xce(function(){return mw(i)&&s({inst:i}),e(function(){mw(i)&&s({inst:i})})},[e]),Ece(n),n}function mw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wce(e,n)}catch{return!0}}function Rce(e,t){return t()}var _ce=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rce:Pce;h6.useSyncExternalStore=Gl.useSyncExternalStore!==void 0?Gl.useSyncExternalStore:_ce;d6.exports=h6;var Tce=d6.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS=m,Ace=Tce;function Nce(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ice=typeof Object.is=="function"?Object.is:Nce,jce=Ace.useSyncExternalStore,kce=wS.useRef,Mce=wS.useEffect,Oce=wS.useMemo,Dce=wS.useDebugValue;u6.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=kce(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=Oce(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),i!==void 0&&a.hasValue){var g=a.value;if(i(g,f))return h=g}return h=f}if(g=h,Ice(u,f))return g;var v=r(f);return i!==void 0&&i(g,v)?g:(u=f,h=v)}var l=!1,u,h,p=n===void 0?null:n;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,n,r,i]);var o=jce(e,s[0],s[1]);return Mce(function(){a.hasValue=!0,a.value=o},[o]),Dce(o),o};l6.exports=u6;var Lce=l6.exports;const zce=fc(Lce),Fce={},mN=e=>{let t;const n=new Set,r=(u,h)=>{const p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){const f=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(g=>g(t,f))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Fce?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(r,i,c);return c},$ce=e=>e?mN(e):mN,{useDebugValue:Bce}=q,{useSyncExternalStoreWithSelector:Vce}=zce,Uce=e=>e;function p6(e,t=Uce,n){const r=Vce(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Bce(r),r}const vN=(e,t)=>{const n=$ce(e),r=(i,s=t)=>p6(n,i,s);return Object.assign(r,n),r},qce=(e,t)=>e?vN(e,t):vN;function cn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Hce={value:()=>{}};function CS(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Wm(n)}function Wm(e){this._=e}function Wce(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Wm.prototype=CS.prototype={constructor:Wm,on:function(e,t){var n=this._,r=Wce(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=Kce(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=gN(n[i],e.name,t);else if(t==null)for(i in n)n[i]=gN(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Wm(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Kce(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function gN(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Hce,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ax="http://www.w3.org/1999/xhtml";const yN={svg:"http://www.w3.org/2000/svg",xhtml:Ax,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xS(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),yN.hasOwnProperty(t)?{space:yN[t],local:e}:e}function Gce(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ax&&t.documentElement.namespaceURI===Ax?t.createElement(e):t.createElementNS(n,e)}}function Qce(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function f6(e){var t=xS(e);return(t.local?Qce:Gce)(t)}function Jce(){}function xP(e){return e==null?Jce:function(){return this.querySelector(e)}}function Yce(e){typeof e!="function"&&(e=xP(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),c,l,u=0;u<a;++u)(c=s[u])&&(l=e.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),o[u]=l);return new Mr(r,this._parents)}function Zce(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Xce(){return[]}function m6(e){return e==null?Xce:function(){return this.querySelectorAll(e)}}function ele(e){return function(){return Zce(e.apply(this,arguments))}}function tle(e){typeof e=="function"?e=ele(e):e=m6(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,c,l=0;l<o;++l)(c=a[l])&&(r.push(e.call(c,c.__data__,l,a)),i.push(c));return new Mr(r,i)}function v6(e){return function(){return this.matches(e)}}function g6(e){return function(t){return t.matches(e)}}var nle=Array.prototype.find;function rle(e){return function(){return nle.call(this.children,e)}}function ile(){return this.firstElementChild}function sle(e){return this.select(e==null?ile:rle(typeof e=="function"?e:g6(e)))}var ole=Array.prototype.filter;function ale(){return Array.from(this.children)}function cle(e){return function(){return ole.call(this.children,e)}}function lle(e){return this.selectAll(e==null?ale:cle(typeof e=="function"?e:g6(e)))}function ule(e){typeof e!="function"&&(e=v6(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],c,l=0;l<a;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&o.push(c);return new Mr(r,this._parents)}function y6(e){return new Array(e.length)}function dle(){return new Mr(this._enter||this._groups.map(y6),this._parents)}function ig(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ig.prototype={constructor:ig,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hle(e){return function(){return e}}function ple(e,t,n,r,i,s){for(var a=0,o,c=t.length,l=s.length;a<l;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new ig(e,s[a]);for(;a<c;++a)(o=t[a])&&(i[a]=o)}function fle(e,t,n,r,i,s,a){var o,c,l=new Map,u=t.length,h=s.length,p=new Array(u),f;for(o=0;o<u;++o)(c=t[o])&&(p[o]=f=a.call(c,c.__data__,o,t)+"",l.has(f)?i[o]=c:l.set(f,c));for(o=0;o<h;++o)f=a.call(e,s[o],o,s)+"",(c=l.get(f))?(r[o]=c,c.__data__=s[o],l.delete(f)):n[o]=new ig(e,s[o]);for(o=0;o<u;++o)(c=t[o])&&l.get(p[o])===c&&(i[o]=c)}function mle(e){return e.__data__}function vle(e,t){if(!arguments.length)return Array.from(this,mle);var n=t?fle:ple,r=this._parents,i=this._groups;typeof e!="function"&&(e=hle(e));for(var s=i.length,a=new Array(s),o=new Array(s),c=new Array(s),l=0;l<s;++l){var u=r[l],h=i[l],p=h.length,f=gle(e.call(u,u&&u.__data__,l,r)),g=f.length,v=o[l]=new Array(g),w=a[l]=new Array(g),y=c[l]=new Array(p);n(u,h,v,w,y,f,t);for(var S=0,C=0,x,E;S<g;++S)if(x=v[S]){for(S>=C&&(C=S+1);!(E=w[C])&&++C<g;);x._next=E||null}}return a=new Mr(a,r),a._enter=o,a._exit=c,a}function gle(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yle(){return new Mr(this._exit||this._groups.map(y6),this._parents)}function Sle(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function wle(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),c=0;c<a;++c)for(var l=n[c],u=r[c],h=l.length,p=o[c]=new Array(h),f,g=0;g<h;++g)(f=l[g]||u[g])&&(p[g]=f);for(;c<i;++c)o[c]=n[c];return new Mr(o,this._parents)}function Cle(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function xle(e){e||(e=ble);function t(h,p){return h&&p?e(h.__data__,p.__data__):!h-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,c=i[s]=new Array(o),l,u=0;u<o;++u)(l=a[u])&&(c[u]=l);c.sort(t)}return new Mr(i,this._parents).order()}function ble(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ele(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ple(){return Array.from(this)}function Rle(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function _le(){let e=0;for(const t of this)++e;return e}function Tle(){return!this.node()}function Ale(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function Nle(e){return function(){this.removeAttribute(e)}}function Ile(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jle(e,t){return function(){this.setAttribute(e,t)}}function kle(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Mle(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ole(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Dle(e,t){var n=xS(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ile:Nle:typeof t=="function"?n.local?Ole:Mle:n.local?kle:jle)(n,t))}function S6(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Lle(e){return function(){this.style.removeProperty(e)}}function zle(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Fle(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function $le(e,t,n){return arguments.length>1?this.each((t==null?Lle:typeof t=="function"?Fle:zle)(e,t,n??"")):Ql(this.node(),e)}function Ql(e,t){return e.style.getPropertyValue(t)||S6(e).getComputedStyle(e,null).getPropertyValue(t)}function Ble(e){return function(){delete this[e]}}function Vle(e,t){return function(){this[e]=t}}function Ule(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function qle(e,t){return arguments.length>1?this.each((t==null?Ble:typeof t=="function"?Ule:Vle)(e,t)):this.node()[e]}function w6(e){return e.trim().split(/^|\s+/)}function bP(e){return e.classList||new C6(e)}function C6(e){this._node=e,this._names=w6(e.getAttribute("class")||"")}C6.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function x6(e,t){for(var n=bP(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function b6(e,t){for(var n=bP(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Hle(e){return function(){x6(this,e)}}function Wle(e){return function(){b6(this,e)}}function Kle(e,t){return function(){(t.apply(this,arguments)?x6:b6)(this,e)}}function Gle(e,t){var n=w6(e+"");if(arguments.length<2){for(var r=bP(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Kle:t?Hle:Wle)(n,t))}function Qle(){this.textContent=""}function Jle(e){return function(){this.textContent=e}}function Yle(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Zle(e){return arguments.length?this.each(e==null?Qle:(typeof e=="function"?Yle:Jle)(e)):this.node().textContent}function Xle(){this.innerHTML=""}function eue(e){return function(){this.innerHTML=e}}function tue(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function nue(e){return arguments.length?this.each(e==null?Xle:(typeof e=="function"?tue:eue)(e)):this.node().innerHTML}function rue(){this.nextSibling&&this.parentNode.appendChild(this)}function iue(){return this.each(rue)}function sue(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oue(){return this.each(sue)}function aue(e){var t=typeof e=="function"?e:f6(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function cue(){return null}function lue(e,t){var n=typeof e=="function"?e:f6(e),r=t==null?cue:typeof t=="function"?t:xP(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function uue(){var e=this.parentNode;e&&e.removeChild(this)}function due(){return this.each(uue)}function hue(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pue(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fue(e){return this.select(e?pue:hue)}function mue(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vue(e){return function(t){e.call(this,t,this.__data__)}}function gue(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function yue(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Sue(e,t,n){return function(){var r=this.__on,i,s=vue(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function wue(e,t,n){var r=gue(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,l=o.length,u;c<l;++c)for(i=0,u=o[c];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=t?Sue:yue,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function E6(e,t,n){var r=S6(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Cue(e,t){return function(){return E6(this,e,t)}}function xue(e,t){return function(){return E6(this,e,t.apply(this,arguments))}}function bue(e,t){return this.each((typeof t=="function"?xue:Cue)(e,t))}function*Eue(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var P6=[null];function Mr(e,t){this._groups=e,this._parents=t}function Nf(){return new Mr([[document.documentElement]],P6)}function Pue(){return this}Mr.prototype=Nf.prototype={constructor:Mr,select:Yce,selectAll:tle,selectChild:sle,selectChildren:lle,filter:ule,data:vle,enter:dle,exit:yle,join:Sle,merge:wle,selection:Pue,order:Cle,sort:xle,call:Ele,nodes:Ple,node:Rle,size:_le,empty:Tle,each:Ale,attr:Dle,style:$le,property:qle,classed:Gle,text:Zle,html:nue,raise:iue,lower:oue,append:aue,insert:lue,remove:due,clone:fue,datum:mue,on:wue,dispatch:bue,[Symbol.iterator]:Eue};function Wr(e){return typeof e=="string"?new Mr([[document.querySelector(e)]],[document.documentElement]):new Mr([[e]],P6)}function Rue(e){let t;for(;t=e.sourceEvent;)e=t;return e}function hi(e,t){if(e=Rue(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const _ue={passive:!1},$p={capture:!0,passive:!1};function vw(e){e.stopImmediatePropagation()}function ul(e){e.preventDefault(),e.stopImmediatePropagation()}function R6(e){var t=e.document.documentElement,n=Wr(e).on("dragstart.drag",ul,$p);"onselectstart"in t?n.on("selectstart.drag",ul,$p):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function _6(e,t){var n=e.document.documentElement,r=Wr(e).on("dragstart.drag",null);t&&(r.on("click.drag",ul,$p),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const pm=e=>()=>e;function Nx(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:a,y:o,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Nx.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Tue(e){return!e.ctrlKey&&!e.button}function Aue(){return this.parentNode}function Nue(e,t){return t??{x:e.x,y:e.y}}function Iue(){return navigator.maxTouchPoints||"ontouchstart"in this}function jue(){var e=Tue,t=Aue,n=Nue,r=Iue,i={},s=CS("start","drag","end"),a=0,o,c,l,u,h=0;function p(x){x.on("mousedown.drag",f).filter(r).on("touchstart.drag",w).on("touchmove.drag",y,_ue).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(x,E){if(!(u||!e.call(this,x,E))){var P=C(this,t.call(this,x,E),x,E,"mouse");P&&(Wr(x.view).on("mousemove.drag",g,$p).on("mouseup.drag",v,$p),R6(x.view),vw(x),l=!1,o=x.clientX,c=x.clientY,P("start",x))}}function g(x){if(ul(x),!l){var E=x.clientX-o,P=x.clientY-c;l=E*E+P*P>h}i.mouse("drag",x)}function v(x){Wr(x.view).on("mousemove.drag mouseup.drag",null),_6(x.view,l),ul(x),i.mouse("end",x)}function w(x,E){if(e.call(this,x,E)){var P=x.changedTouches,T=t.call(this,x,E),_=P.length,k,z;for(k=0;k<_;++k)(z=C(this,T,x,E,P[k].identifier,P[k]))&&(vw(x),z("start",x,P[k]))}}function y(x){var E=x.changedTouches,P=E.length,T,_;for(T=0;T<P;++T)(_=i[E[T].identifier])&&(ul(x),_("drag",x,E[T]))}function S(x){var E=x.changedTouches,P=E.length,T,_;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),T=0;T<P;++T)(_=i[E[T].identifier])&&(vw(x),_("end",x,E[T]))}function C(x,E,P,T,_,k){var z=s.copy(),D=hi(k||P,E),O,M,b;if((b=n.call(x,new Nx("beforestart",{sourceEvent:P,target:p,identifier:_,active:a,x:D[0],y:D[1],dx:0,dy:0,dispatch:z}),T))!=null)return O=b.x-D[0]||0,M=b.y-D[1]||0,function A(N,j,R){var I=D,$;switch(N){case"start":i[_]=A,$=a++;break;case"end":delete i[_],--a;case"drag":D=hi(R||j,E),$=a;break}z.call(N,x,new Nx(N,{sourceEvent:j,subject:b,target:p,identifier:_,active:$,x:D[0]+O,y:D[1]+M,dx:D[0]-I[0],dy:D[1]-I[1],dispatch:z}),T)}}return p.filter=function(x){return arguments.length?(e=typeof x=="function"?x:pm(!!x),p):e},p.container=function(x){return arguments.length?(t=typeof x=="function"?x:pm(x),p):t},p.subject=function(x){return arguments.length?(n=typeof x=="function"?x:pm(x),p):n},p.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:pm(!!x),p):r},p.on=function(){var x=s.on.apply(s,arguments);return x===s?p:x},p.clickDistance=function(x){return arguments.length?(h=(x=+x)*x,p):Math.sqrt(h)},p}function EP(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function T6(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function If(){}var Bp=.7,sg=1/Bp,dl="\\s*([+-]?\\d+)\\s*",Vp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ts="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kue=/^#([0-9a-f]{3,8})$/,Mue=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),Oue=new RegExp(`^rgb\\(${ts},${ts},${ts}\\)$`),Due=new RegExp(`^rgba\\(${dl},${dl},${dl},${Vp}\\)$`),Lue=new RegExp(`^rgba\\(${ts},${ts},${ts},${Vp}\\)$`),zue=new RegExp(`^hsl\\(${Vp},${ts},${ts}\\)$`),Fue=new RegExp(`^hsla\\(${Vp},${ts},${ts},${Vp}\\)$`),SN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};EP(If,Up,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wN,formatHex:wN,formatHex8:$ue,formatHsl:Bue,formatRgb:CN,toString:CN});function wN(){return this.rgb().formatHex()}function $ue(){return this.rgb().formatHex8()}function Bue(){return A6(this).formatHsl()}function CN(){return this.rgb().formatRgb()}function Up(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=kue.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xN(t):n===3?new dr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?fm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?fm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Mue.exec(e))?new dr(t[1],t[2],t[3],1):(t=Oue.exec(e))?new dr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Due.exec(e))?fm(t[1],t[2],t[3],t[4]):(t=Lue.exec(e))?fm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zue.exec(e))?PN(t[1],t[2]/100,t[3]/100,1):(t=Fue.exec(e))?PN(t[1],t[2]/100,t[3]/100,t[4]):SN.hasOwnProperty(e)?xN(SN[e]):e==="transparent"?new dr(NaN,NaN,NaN,0):null}function xN(e){return new dr(e>>16&255,e>>8&255,e&255,1)}function fm(e,t,n,r){return r<=0&&(e=t=n=NaN),new dr(e,t,n,r)}function Vue(e){return e instanceof If||(e=Up(e)),e?(e=e.rgb(),new dr(e.r,e.g,e.b,e.opacity)):new dr}function Ix(e,t,n,r){return arguments.length===1?Vue(e):new dr(e,t,n,r??1)}function dr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}EP(dr,Ix,T6(If,{brighter(e){return e=e==null?sg:Math.pow(sg,e),new dr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bp:Math.pow(Bp,e),new dr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dr(Ga(this.r),Ga(this.g),Ga(this.b),og(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bN,formatHex:bN,formatHex8:Uue,formatRgb:EN,toString:EN}));function bN(){return`#${Oa(this.r)}${Oa(this.g)}${Oa(this.b)}`}function Uue(){return`#${Oa(this.r)}${Oa(this.g)}${Oa(this.b)}${Oa((isNaN(this.opacity)?1:this.opacity)*255)}`}function EN(){const e=og(this.opacity);return`${e===1?"rgb(":"rgba("}${Ga(this.r)}, ${Ga(this.g)}, ${Ga(this.b)}${e===1?")":`, ${e})`}`}function og(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ga(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Oa(e){return e=Ga(e),(e<16?"0":"")+e.toString(16)}function PN(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vi(e,t,n,r)}function A6(e){if(e instanceof vi)return new vi(e.h,e.s,e.l,e.opacity);if(e instanceof If||(e=Up(e)),!e)return new vi;if(e instanceof vi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,c=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=c<.5?s+i:2-s-i,a*=60):o=c>0&&c<1?0:a,new vi(a,o,c,e.opacity)}function que(e,t,n,r){return arguments.length===1?A6(e):new vi(e,t,n,r??1)}function vi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}EP(vi,que,T6(If,{brighter(e){return e=e==null?sg:Math.pow(sg,e),new vi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bp:Math.pow(Bp,e),new vi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new dr(gw(e>=240?e-240:e+120,i,r),gw(e,i,r),gw(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new vi(RN(this.h),mm(this.s),mm(this.l),og(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=og(this.opacity);return`${e===1?"hsl(":"hsla("}${RN(this.h)}, ${mm(this.s)*100}%, ${mm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function RN(e){return e=(e||0)%360,e<0?e+360:e}function mm(e){return Math.max(0,Math.min(1,e||0))}function gw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const N6=e=>()=>e;function Hue(e,t){return function(n){return e+n*t}}function Wue(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Kue(e){return(e=+e)==1?I6:function(t,n){return n-t?Wue(t,n,e):N6(isNaN(t)?n:t)}}function I6(e,t){var n=t-e;return n?Hue(e,n):N6(isNaN(e)?t:e)}const _N=function e(t){var n=Kue(t);function r(i,s){var a=n((i=Ix(i)).r,(s=Ix(s)).r),o=n(i.g,s.g),c=n(i.b,s.b),l=I6(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function ro(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var jx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yw=new RegExp(jx.source,"g");function Gue(e){return function(){return e}}function Que(e){return function(t){return e(t)+""}}function Jue(e,t){var n=jx.lastIndex=yw.lastIndex=0,r,i,s,a=-1,o=[],c=[];for(e=e+"",t=t+"";(r=jx.exec(e))&&(i=yw.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,c.push({i:a,x:ro(r,i)})),n=yw.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?Que(c[0].x):Gue(t):(t=c.length,function(l){for(var u=0,h;u<t;++u)o[(h=c[u]).i]=h.x(l);return o.join("")})}var TN=180/Math.PI,kx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function j6(e,t,n,r,i,s){var a,o,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,c/=o),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*TN,skewX:Math.atan(c)*TN,scaleX:a,scaleY:o}}var vm;function Yue(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?kx:j6(t.a,t.b,t.c,t.d,t.e,t.f)}function Zue(e){return e==null||(vm||(vm=document.createElementNS("http://www.w3.org/2000/svg","g")),vm.setAttribute("transform",e),!(e=vm.transform.baseVal.consolidate()))?kx:(e=e.matrix,j6(e.a,e.b,e.c,e.d,e.e,e.f))}function k6(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,u,h,p,f,g){if(l!==h||u!==p){var v=f.push("translate(",null,t,null,n);g.push({i:v-4,x:ro(l,h)},{i:v-2,x:ro(u,p)})}else(h||p)&&f.push("translate("+h+t+p+n)}function a(l,u,h,p){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:h.push(i(h)+"rotate(",null,r)-2,x:ro(l,u)})):u&&h.push(i(h)+"rotate("+u+r)}function o(l,u,h,p){l!==u?p.push({i:h.push(i(h)+"skewX(",null,r)-2,x:ro(l,u)}):u&&h.push(i(h)+"skewX("+u+r)}function c(l,u,h,p,f,g){if(l!==h||u!==p){var v=f.push(i(f)+"scale(",null,",",null,")");g.push({i:v-4,x:ro(l,h)},{i:v-2,x:ro(u,p)})}else(h!==1||p!==1)&&f.push(i(f)+"scale("+h+","+p+")")}return function(l,u){var h=[],p=[];return l=e(l),u=e(u),s(l.translateX,l.translateY,u.translateX,u.translateY,h,p),a(l.rotate,u.rotate,h,p),o(l.skewX,u.skewX,h,p),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,p),l=u=null,function(f){for(var g=-1,v=p.length,w;++g<v;)h[(w=p[g]).i]=w.x(f);return h.join("")}}}var Xue=k6(Yue,"px, ","px)","deg)"),ede=k6(Zue,", ",")",")"),tde=1e-12;function AN(e){return((e=Math.exp(e))+1/e)/2}function nde(e){return((e=Math.exp(e))-1/e)/2}function rde(e){return((e=Math.exp(2*e))-1)/(e+1)}const ide=function e(t,n,r){function i(s,a){var o=s[0],c=s[1],l=s[2],u=a[0],h=a[1],p=a[2],f=u-o,g=h-c,v=f*f+g*g,w,y;if(v<tde)y=Math.log(p/l)/t,w=function(T){return[o+T*f,c+T*g,l*Math.exp(t*T*y)]};else{var S=Math.sqrt(v),C=(p*p-l*l+r*v)/(2*l*n*S),x=(p*p-l*l-r*v)/(2*p*n*S),E=Math.log(Math.sqrt(C*C+1)-C),P=Math.log(Math.sqrt(x*x+1)-x);y=(P-E)/t,w=function(T){var _=T*y,k=AN(E),z=l/(n*S)*(k*rde(t*_+E)-nde(E));return[o+z*f,c+z*g,l*k/AN(t*_+E)]}}return w.duration=y*1e3*t/Math.SQRT2,w}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,c=o*o;return e(a,o,c)},i}(Math.SQRT2,2,4);var Jl=0,Mh=0,vh=0,M6=1e3,ag,Oh,cg=0,pc=0,bS=0,qp=typeof performance=="object"&&performance.now?performance:Date,O6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function PP(){return pc||(O6(sde),pc=qp.now()+bS)}function sde(){pc=0}function lg(){this._call=this._time=this._next=null}lg.prototype=D6.prototype={constructor:lg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?PP():+n)+(t==null?0:+t),!this._next&&Oh!==this&&(Oh?Oh._next=this:ag=this,Oh=this),this._call=e,this._time=n,Mx()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mx())}};function D6(e,t,n){var r=new lg;return r.restart(e,t,n),r}function ode(){PP(),++Jl;for(var e=ag,t;e;)(t=pc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Jl}function NN(){pc=(cg=qp.now())+bS,Jl=Mh=0;try{ode()}finally{Jl=0,cde(),pc=0}}function ade(){var e=qp.now(),t=e-cg;t>M6&&(bS-=t,cg=e)}function cde(){for(var e,t=ag,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ag=n);Oh=e,Mx(r)}function Mx(e){if(!Jl){Mh&&(Mh=clearTimeout(Mh));var t=e-pc;t>24?(e<1/0&&(Mh=setTimeout(NN,e-qp.now()-bS)),vh&&(vh=clearInterval(vh))):(vh||(cg=qp.now(),vh=setInterval(ade,M6)),Jl=1,O6(NN))}}function IN(e,t,n){var r=new lg;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var lde=CS("start","end","cancel","interrupt"),ude=[],L6=0,jN=1,Ox=2,Km=3,kN=4,Dx=5,Gm=6;function ES(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;dde(e,n,{name:t,index:r,group:i,on:lde,tween:ude,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:L6})}function RP(e,t){var n=Mi(e,t);if(n.state>L6)throw new Error("too late; already scheduled");return n}function cs(e,t){var n=Mi(e,t);if(n.state>Km)throw new Error("too late; already running");return n}function Mi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function dde(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=D6(s,0,n.time);function s(l){n.state=jN,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,h,p,f;if(n.state!==jN)return c();for(u in r)if(f=r[u],f.name===n.name){if(f.state===Km)return IN(a);f.state===kN?(f.state=Gm,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[u]):+u<t&&(f.state=Gm,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[u])}if(IN(function(){n.state===Km&&(n.state=kN,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=Ox,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ox){for(n.state=Km,i=new Array(p=n.tween.length),u=0,h=-1;u<p;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=f);i.length=h+1}}function o(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Dx,1),h=-1,p=i.length;++h<p;)i[h].call(e,u);n.state===Dx&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Gm,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Qm(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>Ox&&r.state<Dx,r.state=Gm,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function hde(e){return this.each(function(){Qm(this,e)})}function pde(e,t){var n,r;return function(){var i=cs(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function fde(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=cs(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=o;break}c===l&&i.push(o)}s.tween=i}}function mde(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Mi(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?pde:fde)(n,e,t))}function _P(e,t,n){var r=e._id;return e.each(function(){var i=cs(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Mi(i,r).value[t]}}function z6(e,t){var n;return(typeof t=="number"?ro:t instanceof Up?_N:(n=Up(t))?(t=n,_N):Jue)(e,t)}function vde(e){return function(){this.removeAttribute(e)}}function gde(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yde(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function Sde(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function wde(e,t,n){var r,i,s;return function(){var a,o=n(this),c;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=o+"",a===c?null:a===r&&c===i?s:(i=c,s=t(r=a,o)))}}function Cde(e,t,n){var r,i,s;return function(){var a,o=n(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=o+"",a===c?null:a===r&&c===i?s:(i=c,s=t(r=a,o)))}}function xde(e,t){var n=xS(e),r=n==="transform"?ede:z6;return this.attrTween(e,typeof t=="function"?(n.local?Cde:wde)(n,r,_P(this,"attr."+e,t)):t==null?(n.local?gde:vde)(n):(n.local?Sde:yde)(n,r,t))}function bde(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ede(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Pde(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Ede(e,s)),n}return i._value=t,i}function Rde(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&bde(e,s)),n}return i._value=t,i}function _de(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=xS(e);return this.tween(n,(r.local?Pde:Rde)(r,t))}function Tde(e,t){return function(){RP(this,e).delay=+t.apply(this,arguments)}}function Ade(e,t){return t=+t,function(){RP(this,e).delay=t}}function Nde(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Tde:Ade)(t,e)):Mi(this.node(),t).delay}function Ide(e,t){return function(){cs(this,e).duration=+t.apply(this,arguments)}}function jde(e,t){return t=+t,function(){cs(this,e).duration=t}}function kde(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ide:jde)(t,e)):Mi(this.node(),t).duration}function Mde(e,t){if(typeof t!="function")throw new Error;return function(){cs(this,e).ease=t}}function Ode(e){var t=this._id;return arguments.length?this.each(Mde(t,e)):Mi(this.node(),t).ease}function Dde(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;cs(this,e).ease=n}}function Lde(e){if(typeof e!="function")throw new Error;return this.each(Dde(this._id,e))}function zde(e){typeof e!="function"&&(e=v6(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],c,l=0;l<a;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&o.push(c);return new Bs(r,this._parents,this._name,this._id)}function Fde(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var c=t[o],l=n[o],u=c.length,h=a[o]=new Array(u),p,f=0;f<u;++f)(p=c[f]||l[f])&&(h[f]=p);for(;o<r;++o)a[o]=t[o];return new Bs(a,this._parents,this._name,this._id)}function $de(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Bde(e,t,n){var r,i,s=$de(t)?RP:cs;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function Vde(e,t){var n=this._id;return arguments.length<2?Mi(this.node(),n).on.on(e):this.each(Bde(n,e,t))}function Ude(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function qde(){return this.on("end.remove",Ude(this._id))}function Hde(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xP(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],c=o.length,l=s[a]=new Array(c),u,h,p=0;p<c;++p)(u=o[p])&&(h=e.call(u,u.__data__,p,o))&&("__data__"in u&&(h.__data__=u.__data__),l[p]=h,ES(l[p],t,n,p,l,Mi(u,n)));return new Bs(s,this._parents,t,n)}function Wde(e){var t=this._name,n=this._id;typeof e!="function"&&(e=m6(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var c=r[o],l=c.length,u,h=0;h<l;++h)if(u=c[h]){for(var p=e.call(u,u.__data__,h,c),f,g=Mi(u,n),v=0,w=p.length;v<w;++v)(f=p[v])&&ES(f,t,n,v,p,g);s.push(p),a.push(u)}return new Bs(s,a,t,n)}var Kde=Nf.prototype.constructor;function Gde(){return new Kde(this._groups,this._parents)}function Qde(e,t){var n,r,i;return function(){var s=Ql(this,e),a=(this.style.removeProperty(e),Ql(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function F6(e){return function(){this.style.removeProperty(e)}}function Jde(e,t,n){var r,i=n+"",s;return function(){var a=Ql(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function Yde(e,t,n){var r,i,s;return function(){var a=Ql(this,e),o=n(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),Ql(this,e))),a===c?null:a===r&&c===i?s:(i=c,s=t(r=a,o))}}function Zde(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var c=cs(this,e),l=c.on,u=c.value[s]==null?o||(o=F6(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),c.on=r}}function Xde(e,t,n){var r=(e+="")=="transform"?Xue:z6;return t==null?this.styleTween(e,Qde(e,r)).on("end.style."+e,F6(e)):typeof t=="function"?this.styleTween(e,Yde(e,r,_P(this,"style."+e,t))).each(Zde(this._id,e)):this.styleTween(e,Jde(e,r,t),n).on("end.style."+e,null)}function ehe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function the(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&ehe(e,a,n)),r}return s._value=t,s}function nhe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,the(e,t,n??""))}function rhe(e){return function(){this.textContent=e}}function ihe(e){return function(){var t=e(this);this.textContent=t??""}}function she(e){return this.tween("text",typeof e=="function"?ihe(_P(this,"text",e)):rhe(e==null?"":e+""))}function ohe(e){return function(t){this.textContent=e.call(this,t)}}function ahe(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&ohe(i)),t}return r._value=e,r}function che(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ahe(e))}function lhe(){for(var e=this._name,t=this._id,n=$6(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,c,l=0;l<o;++l)if(c=a[l]){var u=Mi(c,t);ES(c,e,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Bs(r,this._parents,e,n)}function uhe(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},c={value:function(){--i===0&&s()}};n.each(function(){var l=cs(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),l.on=t}),i===0&&s()})}var dhe=0;function Bs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function $6(){return++dhe}var ms=Nf.prototype;Bs.prototype={constructor:Bs,select:Hde,selectAll:Wde,selectChild:ms.selectChild,selectChildren:ms.selectChildren,filter:zde,merge:Fde,selection:Gde,transition:lhe,call:ms.call,nodes:ms.nodes,node:ms.node,size:ms.size,empty:ms.empty,each:ms.each,on:Vde,attr:xde,attrTween:_de,style:Xde,styleTween:nhe,text:she,textTween:che,remove:qde,tween:mde,delay:Nde,duration:kde,ease:Ode,easeVarying:Lde,end:uhe,[Symbol.iterator]:ms[Symbol.iterator]};function hhe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var phe={time:null,delay:0,duration:250,ease:hhe};function fhe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mhe(e){var t,n;e instanceof Bs?(t=e._id,e=e._name):(t=$6(),(n=phe).time=PP(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,c,l=0;l<o;++l)(c=a[l])&&ES(c,e,t,l,a,n||fhe(c,t));return new Bs(r,this._parents,e,t)}Nf.prototype.interrupt=hde;Nf.prototype.transition=mhe;const gm=e=>()=>e;function vhe(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function _s(e,t,n){this.k=e,this.x=t,this.y=n}_s.prototype={constructor:_s,scale:function(e){return e===1?this:new _s(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new _s(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ns=new _s(1,0,0);_s.prototype;function Sw(e){e.stopImmediatePropagation()}function gh(e){e.preventDefault(),e.stopImmediatePropagation()}function ghe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function yhe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function MN(){return this.__zoom||Ns}function She(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function whe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Che(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function B6(){var e=ghe,t=yhe,n=Che,r=She,i=whe,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,c=ide,l=CS("start","zoom","end"),u,h,p,f=500,g=150,v=0,w=10;function y(b){b.property("__zoom",MN).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",D).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(b,A,N,j){var R=b.selection?b.selection():b;R.property("__zoom",MN),b!==R?E(b,A,N,j):R.interrupt().each(function(){P(this,arguments).event(j).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},y.scaleBy=function(b,A,N,j){y.scaleTo(b,function(){var R=this.__zoom.k,I=typeof A=="function"?A.apply(this,arguments):A;return R*I},N,j)},y.scaleTo=function(b,A,N,j){y.transform(b,function(){var R=t.apply(this,arguments),I=this.__zoom,$=N==null?x(R):typeof N=="function"?N.apply(this,arguments):N,U=I.invert($),G=typeof A=="function"?A.apply(this,arguments):A;return n(C(S(I,G),$,U),R,a)},N,j)},y.translateBy=function(b,A,N,j){y.transform(b,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),a)},null,j)},y.translateTo=function(b,A,N,j,R){y.transform(b,function(){var I=t.apply(this,arguments),$=this.__zoom,U=j==null?x(I):typeof j=="function"?j.apply(this,arguments):j;return n(Ns.translate(U[0],U[1]).scale($.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof N=="function"?-N.apply(this,arguments):-N),I,a)},j,R)};function S(b,A){return A=Math.max(s[0],Math.min(s[1],A)),A===b.k?b:new _s(A,b.x,b.y)}function C(b,A,N){var j=A[0]-N[0]*b.k,R=A[1]-N[1]*b.k;return j===b.x&&R===b.y?b:new _s(b.k,j,R)}function x(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function E(b,A,N,j){b.on("start.zoom",function(){P(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(j).end()}).tween("zoom",function(){var R=this,I=arguments,$=P(R,I).event(j),U=t.apply(R,I),G=N==null?x(U):typeof N=="function"?N.apply(R,I):N,Y=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),J=R.__zoom,oe=typeof A=="function"?A.apply(R,I):A,V=c(J.invert(G).concat(Y/J.k),oe.invert(G).concat(Y/oe.k));return function(H){if(H===1)H=oe;else{var te=V(H),re=Y/te[2];H=new _s(re,G[0]-te[0]*re,G[1]-te[1]*re)}$.zoom(null,H)}})}function P(b,A,N){return!N&&b.__zooming||new T(b,A)}function T(b,A){this.that=b,this.args=A,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,A),this.taps=0}T.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,A){return this.mouse&&b!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var A=Wr(this.that).datum();l.call(b,this.that,new vhe(b,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:l}),A)}};function _(b,...A){if(!e.apply(this,arguments))return;var N=P(this,A).event(b),j=this.__zoom,R=Math.max(s[0],Math.min(s[1],j.k*Math.pow(2,r.apply(this,arguments)))),I=hi(b);if(N.wheel)(N.mouse[0][0]!==I[0]||N.mouse[0][1]!==I[1])&&(N.mouse[1]=j.invert(N.mouse[0]=I)),clearTimeout(N.wheel);else{if(j.k===R)return;N.mouse=[I,j.invert(I)],Qm(this),N.start()}gh(b),N.wheel=setTimeout($,g),N.zoom("mouse",n(C(S(j,R),N.mouse[0],N.mouse[1]),N.extent,a));function $(){N.wheel=null,N.end()}}function k(b,...A){if(p||!e.apply(this,arguments))return;var N=b.currentTarget,j=P(this,A,!0).event(b),R=Wr(b.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",Y,!0),I=hi(b,N),$=b.clientX,U=b.clientY;R6(b.view),Sw(b),j.mouse=[I,this.__zoom.invert(I)],Qm(this),j.start();function G(J){if(gh(J),!j.moved){var oe=J.clientX-$,V=J.clientY-U;j.moved=oe*oe+V*V>v}j.event(J).zoom("mouse",n(C(j.that.__zoom,j.mouse[0]=hi(J,N),j.mouse[1]),j.extent,a))}function Y(J){R.on("mousemove.zoom mouseup.zoom",null),_6(J.view,j.moved),gh(J),j.event(J).end()}}function z(b,...A){if(e.apply(this,arguments)){var N=this.__zoom,j=hi(b.changedTouches?b.changedTouches[0]:b,this),R=N.invert(j),I=N.k*(b.shiftKey?.5:2),$=n(C(S(N,I),j,R),t.apply(this,A),a);gh(b),o>0?Wr(this).transition().duration(o).call(E,$,j,b):Wr(this).call(y.transform,$,j,b)}}function D(b,...A){if(e.apply(this,arguments)){var N=b.touches,j=N.length,R=P(this,A,b.changedTouches.length===j).event(b),I,$,U,G;for(Sw(b),$=0;$<j;++$)U=N[$],G=hi(U,this),G=[G,this.__zoom.invert(G),U.identifier],R.touch0?!R.touch1&&R.touch0[2]!==G[2]&&(R.touch1=G,R.taps=0):(R.touch0=G,I=!0,R.taps=1+!!u);u&&(u=clearTimeout(u)),I&&(R.taps<2&&(h=G[0],u=setTimeout(function(){u=null},f)),Qm(this),R.start())}}function O(b,...A){if(this.__zooming){var N=P(this,A).event(b),j=b.changedTouches,R=j.length,I,$,U,G;for(gh(b),I=0;I<R;++I)$=j[I],U=hi($,this),N.touch0&&N.touch0[2]===$.identifier?N.touch0[0]=U:N.touch1&&N.touch1[2]===$.identifier&&(N.touch1[0]=U);if($=N.that.__zoom,N.touch1){var Y=N.touch0[0],J=N.touch0[1],oe=N.touch1[0],V=N.touch1[1],H=(H=oe[0]-Y[0])*H+(H=oe[1]-Y[1])*H,te=(te=V[0]-J[0])*te+(te=V[1]-J[1])*te;$=S($,Math.sqrt(H/te)),U=[(Y[0]+oe[0])/2,(Y[1]+oe[1])/2],G=[(J[0]+V[0])/2,(J[1]+V[1])/2]}else if(N.touch0)U=N.touch0[0],G=N.touch0[1];else return;N.zoom("touch",n(C($,U,G),N.extent,a))}}function M(b,...A){if(this.__zooming){var N=P(this,A).event(b),j=b.changedTouches,R=j.length,I,$;for(Sw(b),p&&clearTimeout(p),p=setTimeout(function(){p=null},f),I=0;I<R;++I)$=j[I],N.touch0&&N.touch0[2]===$.identifier?delete N.touch0:N.touch1&&N.touch1[2]===$.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&($=hi($,this),Math.hypot(h[0]-$[0],h[1]-$[1])<w)){var U=Wr(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return y.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:gm(+b),y):r},y.filter=function(b){return arguments.length?(e=typeof b=="function"?b:gm(!!b),y):e},y.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:gm(!!b),y):i},y.extent=function(b){return arguments.length?(t=typeof b=="function"?b:gm([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),y):t},y.scaleExtent=function(b){return arguments.length?(s[0]=+b[0],s[1]=+b[1],y):[s[0],s[1]]},y.translateExtent=function(b){return arguments.length?(a[0][0]=+b[0][0],a[1][0]=+b[1][0],a[0][1]=+b[0][1],a[1][1]=+b[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(b){return arguments.length?(n=b,y):n},y.duration=function(b){return arguments.length?(o=+b,y):o},y.interpolate=function(b){return arguments.length?(c=b,y):c},y.on=function(){var b=l.on.apply(l,arguments);return b===l?y:b},y.clickDistance=function(b){return arguments.length?(v=(b=+b)*b,y):Math.sqrt(v)},y.tapDistance=function(b){return arguments.length?(w=+b,y):w},y}const PS=m.createContext(null),xhe=PS.Provider,Vs={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},V6=Vs.error001();function Rt(e,t){const n=m.useContext(PS);if(n===null)throw new Error(V6);return p6(n,e,t)}const rn=()=>{const e=m.useContext(PS);if(e===null)throw new Error(V6);return m.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},bhe=e=>e.userSelectionActive?"none":"all";function RS({position:e,children:t,className:n,style:r,...i}){const s=Rt(bhe),a=`${e}`.split("-");return q.createElement("div",{className:bn(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},...i},t)}function Ehe({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:q.createElement(RS,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},q.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Phe=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:a=[2,4],labelBgBorderRadius:o=2,children:c,className:l,...u})=>{const h=m.useRef(null),[p,f]=m.useState({x:0,y:0,width:0,height:0}),g=bn(["react-flow__edge-textwrapper",l]);return m.useEffect(()=>{if(h.current){const v=h.current.getBBox();f({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:q.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:g,visibility:p.width?"visible":"hidden",...u},i&&q.createElement("rect",{width:p.width+2*a[0],x:-a[0],y:-a[1],height:p.height+2*a[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),q.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:h,style:r},n),c)};var Rhe=m.memo(Phe);const TP=e=>({width:e.offsetWidth,height:e.offsetHeight}),Yl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),AP=(e={x:0,y:0},t)=>({x:Yl(e.x,t[0][0],t[1][0]),y:Yl(e.y,t[0][1],t[1][1])}),ON=(e,t,n)=>e<t?Yl(Math.abs(e-t),1,50)/50:e>n?-Yl(Math.abs(e-n),1,50)/50:0,U6=(e,t)=>{const n=ON(e.x,35,t.width-35)*20,r=ON(e.y,35,t.height-35)*20;return[n,r]},q6=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},H6=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Hp=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),W6=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),DN=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),_he=(e,t)=>W6(H6(Hp(e),Hp(t))),Lx=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},The=e=>Gr(e.width)&&Gr(e.height)&&Gr(e.x)&&Gr(e.y),Gr=e=>!isNaN(e)&&isFinite(e),qt=Symbol.for("internals"),K6=["Enter"," ","Escape"],Ahe=(e,t)=>{},Nhe=e=>"nativeEvent"in e;function zx(e){var i,s;const t=Nhe(e)?e.nativeEvent:e,n=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const G6=e=>"clientX"in e,Oo=(e,t)=>{var s,a;const n=G6(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},ug=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},jf=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:h,markerStart:p,interactionWidth:f=20})=>q.createElement(q.Fragment,null,q.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:p}),f&&q.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),i&&Gr(n)&&Gr(r)?q.createElement(Rhe,{x:n,y:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:l}):null);jf.displayName="BaseEdge";function yh(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(s=>s.id===e);i&&n(r,{...i})}}function Q6({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,a=Math.abs(r-t)/2,o=r<t?r+a:r-a;return[s,o,i,a]}function J6({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:a,targetControlY:o}){const c=e*.125+i*.375+a*.375+n*.125,l=t*.125+s*.375+o*.375+r*.125,u=Math.abs(c-e),h=Math.abs(l-t);return[c,l,u,h]}var Ko;(function(e){e.Strict="strict",e.Loose="loose"})(Ko||(Ko={}));var Da;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Da||(Da={}));var Wp;(function(e){e.Partial="partial",e.Full="full"})(Wp||(Wp={}));var lo;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(lo||(lo={}));var dg;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(dg||(dg={}));var Ee;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ee||(Ee={}));function LN({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Ee.Left||e===Ee.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function Y6({sourceX:e,sourceY:t,sourcePosition:n=Ee.Bottom,targetX:r,targetY:i,targetPosition:s=Ee.Top}){const[a,o]=LN({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,l]=LN({pos:s,x1:r,y1:i,x2:e,y2:t}),[u,h,p,f]=J6({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:o,targetControlX:c,targetControlY:l});return[`M${e},${t} C${a},${o} ${c},${l} ${r},${i}`,u,h,p,f]}const NP=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Ee.Bottom,targetPosition:s=Ee.Top,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:h,style:p,markerEnd:f,markerStart:g,interactionWidth:v})=>{const[w,y,S]=Y6({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return q.createElement(jf,{path:w,labelX:y,labelY:S,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:h,style:p,markerEnd:f,markerStart:g,interactionWidth:v})});NP.displayName="SimpleBezierEdge";const zN={[Ee.Left]:{x:-1,y:0},[Ee.Right]:{x:1,y:0},[Ee.Top]:{x:0,y:-1},[Ee.Bottom]:{x:0,y:1}},Ihe=({source:e,sourcePosition:t=Ee.Bottom,target:n})=>t===Ee.Left||t===Ee.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},FN=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function jhe({source:e,sourcePosition:t=Ee.Bottom,target:n,targetPosition:r=Ee.Top,center:i,offset:s}){const a=zN[t],o=zN[r],c={x:e.x+a.x*s,y:e.y+a.y*s},l={x:n.x+o.x*s,y:n.y+o.y*s},u=Ihe({source:c,sourcePosition:t,target:l}),h=u.x!==0?"x":"y",p=u[h];let f=[],g,v;const w={x:0,y:0},y={x:0,y:0},[S,C,x,E]=Q6({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[h]*o[h]===-1){g=i.x??S,v=i.y??C;const T=[{x:g,y:c.y},{x:g,y:l.y}],_=[{x:c.x,y:v},{x:l.x,y:v}];a[h]===p?f=h==="x"?T:_:f=h==="x"?_:T}else{const T=[{x:c.x,y:l.y}],_=[{x:l.x,y:c.y}];if(h==="x"?f=a.x===p?_:T:f=a.y===p?T:_,t===r){const M=Math.abs(e[h]-n[h]);if(M<=s){const b=Math.min(s-1,s-M);a[h]===p?w[h]=(c[h]>e[h]?-1:1)*b:y[h]=(l[h]>n[h]?-1:1)*b}}if(t!==r){const M=h==="x"?"y":"x",b=a[h]===o[M],A=c[M]>l[M],N=c[M]<l[M];(a[h]===1&&(!b&&A||b&&N)||a[h]!==1&&(!b&&N||b&&A))&&(f=h==="x"?T:_)}const k={x:c.x+w.x,y:c.y+w.y},z={x:l.x+y.x,y:l.y+y.y},D=Math.max(Math.abs(k.x-f[0].x),Math.abs(z.x-f[0].x)),O=Math.max(Math.abs(k.y-f[0].y),Math.abs(z.y-f[0].y));D>=O?(g=(k.x+z.x)/2,v=f[0].y):(g=f[0].x,v=(k.y+z.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...f,{x:l.x+y.x,y:l.y+y.y},n],g,v,x,E]}function khe(e,t,n,r){const i=Math.min(FN(e,t)/2,FN(t,n)/2,r),{x:s,y:a}=t;if(e.x===s&&s===n.x||e.y===a&&a===n.y)return`L${s} ${a}`;if(e.y===a){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${s+i*l},${a}Q ${s},${a} ${s},${a+i*u}`}const o=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${a+i*c}Q ${s},${a} ${s+i*o},${a}`}function Fx({sourceX:e,sourceY:t,sourcePosition:n=Ee.Bottom,targetX:r,targetY:i,targetPosition:s=Ee.Top,borderRadius:a=5,centerX:o,centerY:c,offset:l=20}){const[u,h,p,f,g]=jhe({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:o,y:c},offset:l});return[u.reduce((w,y,S)=>{let C="";return S>0&&S<u.length-1?C=khe(u[S-1],y,u[S+1],a):C=`${S===0?"M":"L"}${y.x} ${y.y}`,w+=C,w},""),h,p,f,g]}const _S=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:l,style:u,sourcePosition:h=Ee.Bottom,targetPosition:p=Ee.Top,markerEnd:f,markerStart:g,pathOptions:v,interactionWidth:w})=>{const[y,S,C]=Fx({sourceX:e,sourceY:t,sourcePosition:h,targetX:n,targetY:r,targetPosition:p,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return q.createElement(jf,{path:y,labelX:S,labelY:C,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:g,interactionWidth:w})});_S.displayName="SmoothStepEdge";const IP=m.memo(e=>{var t;return q.createElement(_S,{...e,pathOptions:m.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});IP.displayName="StepEdge";function Mhe({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,a,o]=Q6({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,a,o]}const jP=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:h,markerStart:p,interactionWidth:f})=>{const[g,v,w]=Mhe({sourceX:e,sourceY:t,targetX:n,targetY:r});return q.createElement(jf,{path:g,labelX:v,labelY:w,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:h,markerStart:p,interactionWidth:f})});jP.displayName="StraightEdge";function ym(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function $N({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Ee.Left:return[t-ym(t-r,s),n];case Ee.Right:return[t+ym(r-t,s),n];case Ee.Top:return[t,n-ym(n-i,s)];case Ee.Bottom:return[t,n+ym(i-n,s)]}}function Z6({sourceX:e,sourceY:t,sourcePosition:n=Ee.Bottom,targetX:r,targetY:i,targetPosition:s=Ee.Top,curvature:a=.25}){const[o,c]=$N({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[l,u]=$N({pos:s,x1:r,y1:i,x2:e,y2:t,c:a}),[h,p,f,g]=J6({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${o},${c} ${l},${u} ${r},${i}`,h,p,f,g]}const hg=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Ee.Bottom,targetPosition:s=Ee.Top,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:h,style:p,markerEnd:f,markerStart:g,pathOptions:v,interactionWidth:w})=>{const[y,S,C]=Z6({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:v==null?void 0:v.curvature});return q.createElement(jf,{path:y,labelX:S,labelY:C,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:h,style:p,markerEnd:f,markerStart:g,interactionWidth:w})});hg.displayName="BezierEdge";const kP=m.createContext(null),Ohe=kP.Provider;kP.Consumer;const Dhe=()=>m.useContext(kP),Lhe=e=>"id"in e&&"source"in e&&"target"in e,zhe=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,$x=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Fhe=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),X6=(e,t)=>{if(!e.source||!e.target)return t;let n;return Lhe(e)?n={...e}:n={...e,id:zhe(e)},Fhe(n,t)?t:t.concat(n)},Bx=({x:e,y:t},[n,r,i],s,[a,o])=>{const c={x:(e-n)/i,y:(t-r)/i};return s?{x:a*Math.round(c.x/a),y:o*Math.round(c.y/o)}:c},e8=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Qa=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},TS=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:s,y:a}=Qa(i,t).positionAbsolute;return H6(r,Hp({x:s,y:a,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return W6(n)},t8=(e,t,[n,r,i]=[0,0,1],s=!1,a=!1,o=[0,0])=>{const c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(u=>{const{width:h,height:p,selectable:f=!0,hidden:g=!1}=u;if(a&&!f||g)return!1;const{positionAbsolute:v}=Qa(u,o),w={x:v.x,y:v.y,width:h||0,height:p||0},y=Lx(c,w),S=typeof h>"u"||typeof p>"u"||h===null||p===null,C=s&&y>0,x=(h||0)*(p||0);(S||C||y>=x||u.dragging)&&l.push(u)}),l},n8=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},r8=(e,t,n,r,i,s=.1)=>{const a=t/(e.width*(1+s)),o=n/(e.height*(1+s)),c=Math.min(a,o),l=Yl(c,r,i),u=e.x+e.width/2,h=e.y+e.height/2,p=t/2-u*l,f=n/2-h*l;return{x:p,y:f,zoom:l}},_a=(e,t=0)=>e.transition().duration(t);function BN(e,t,n,r){return(t[n]||[]).reduce((i,s)=>{var a,o;return`${e.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:e.id,x:(((a=e.positionAbsolute)==null?void 0:a.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),i},[])}function $he(e,t,n,r,i,s){const{x:a,y:o}=Oo(e),l=t.elementsFromPoint(a,o).find(g=>g.classList.contains("react-flow__handle"));if(l){const g=l.getAttribute("data-nodeid");if(g){const v=MP(void 0,l),w=l.getAttribute("data-handleid"),y=s({nodeId:g,id:w,type:v});if(y){const S=i.find(C=>C.nodeId===g&&C.type===v&&C.id===w);return{handle:{id:w,type:v,nodeId:g,x:(S==null?void 0:S.x)||n.x,y:(S==null?void 0:S.y)||n.y},validHandleResult:y}}}}let u=[],h=1/0;if(i.forEach(g=>{const v=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(v<=r){const w=s(g);v<=h&&(v<h?u=[{handle:g,validHandleResult:w}]:v===h&&u.push({handle:g,validHandleResult:w}),h=v)}}),!u.length)return{handle:null,validHandleResult:i8()};if(u.length===1)return u[0];const p=u.some(({validHandleResult:g})=>g.isValid),f=u.some(({handle:g})=>g.type==="target");return u.find(({handle:g,validHandleResult:v})=>f?g.type==="target":p?v.isValid:!0)||u[0]}const Bhe={source:null,target:null,sourceHandle:null,targetHandle:null},i8=()=>({handleDomNode:null,isValid:!1,connection:Bhe,endHandle:null});function s8(e,t,n,r,i,s,a){const o=i==="target",c=a.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),l={...i8(),handleDomNode:c};if(c){const u=MP(void 0,c),h=c.getAttribute("data-nodeid"),p=c.getAttribute("data-handleid"),f=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),v={source:o?h:n,sourceHandle:o?p:r,target:o?n:h,targetHandle:o?r:p};l.connection=v,f&&g&&(t===Ko.Strict?o&&u==="source"||!o&&u==="target":h!==n||p!==r)&&(l.endHandle={nodeId:h,handleId:p,type:u},l.isValid=s(v))}return l}function Vhe({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,s)=>{if(s[qt]){const{handleBounds:a}=s[qt];let o=[],c=[];a&&(o=BN(s,a,"source",`${t}-${n}-${r}`),c=BN(s,a,"target",`${t}-${n}-${r}`)),i.push(...o,...c)}return i},[])}function MP(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function ww(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Uhe(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function o8({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:a,isValidConnection:o,edgeUpdaterType:c,onReconnectEnd:l}){const u=q6(e.target),{connectionMode:h,domNode:p,autoPanOnConnect:f,connectionRadius:g,onConnectStart:v,panBy:w,getNodes:y,cancelConnection:S}=s();let C=0,x;const{x:E,y:P}=Oo(e),T=u==null?void 0:u.elementFromPoint(E,P),_=MP(c,T),k=p==null?void 0:p.getBoundingClientRect();if(!k||!_)return;let z,D=Oo(e,k),O=!1,M=null,b=!1,A=null;const N=Vhe({nodes:y(),nodeId:n,handleId:t,handleType:_}),j=()=>{if(!f)return;const[$,U]=U6(D,k);w({x:$,y:U}),C=requestAnimationFrame(j)};a({connectionPosition:D,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:_,connectionStartHandle:{nodeId:n,handleId:t,type:_},connectionEndHandle:null}),v==null||v(e,{nodeId:n,handleId:t,handleType:_});function R($){const{transform:U}=s();D=Oo($,k);const{handle:G,validHandleResult:Y}=$he($,u,Bx(D,U,!1,[1,1]),g,N,J=>s8(J,h,n,t,i?"target":"source",o,u));if(x=G,O||(j(),O=!0),A=Y.handleDomNode,M=Y.connection,b=Y.isValid,a({connectionPosition:x&&b?e8({x:x.x,y:x.y},U):D,connectionStatus:Uhe(!!x,b),connectionEndHandle:Y.endHandle}),!x&&!b&&!A)return ww(z);M.source!==M.target&&A&&(ww(z),z=A,A.classList.add("connecting","react-flow__handle-connecting"),A.classList.toggle("valid",b),A.classList.toggle("react-flow__handle-valid",b))}function I($){var U,G;(x||A)&&M&&b&&(r==null||r(M)),(G=(U=s()).onConnectEnd)==null||G.call(U,$),c&&(l==null||l($)),ww(z),S(),cancelAnimationFrame(C),O=!1,b=!1,M=null,A=null,u.removeEventListener("mousemove",R),u.removeEventListener("mouseup",I),u.removeEventListener("touchmove",R),u.removeEventListener("touchend",I)}u.addEventListener("mousemove",R),u.addEventListener("mouseup",I),u.addEventListener("touchmove",R),u.addEventListener("touchend",I)}const VN=()=>!0,qhe=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Hhe=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:a}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n}},a8=m.forwardRef(({type:e="source",position:t=Ee.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:a,onConnect:o,children:c,className:l,onMouseDown:u,onTouchStart:h,...p},f)=>{var k,z;const g=a||null,v=e==="target",w=rn(),y=Dhe(),{connectOnClick:S,noPanClassName:C}=Rt(qhe,cn),{connecting:x,clickConnecting:E}=Rt(Hhe(y,g,e),cn);y||(z=(k=w.getState()).onError)==null||z.call(k,"010",Vs.error010());const P=D=>{const{defaultEdgeOptions:O,onConnect:M,hasDefaultEdges:b}=w.getState(),A={...O,...D};if(b){const{edges:N,setEdges:j}=w.getState();j(X6(A,N))}M==null||M(A),o==null||o(A)},T=D=>{if(!y)return;const O=G6(D);i&&(O&&D.button===0||!O)&&o8({event:D,handleId:g,nodeId:y,onConnect:P,isTarget:v,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||VN}),O?u==null||u(D):h==null||h(D)},_=D=>{const{onClickConnectStart:O,onClickConnectEnd:M,connectionClickStartHandle:b,connectionMode:A,isValidConnection:N}=w.getState();if(!y||!b&&!i)return;if(!b){O==null||O(D,{nodeId:y,handleId:g,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const j=q6(D.target),R=n||N||VN,{connection:I,isValid:$}=s8({nodeId:y,id:g,type:e},A,b.nodeId,b.handleId||null,b.type,R,j);$&&P(I),M==null||M(D),w.setState({connectionClickStartHandle:null})};return q.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:bn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,l,{source:!v,target:v,connectable:r,connectablestart:i,connectableend:s,connecting:E,connectionindicator:r&&(i&&!x||s&&x)}]),onMouseDown:T,onTouchStart:T,onClick:S?_:void 0,ref:f,...p},c)});a8.displayName="Handle";var Qr=m.memo(a8);const c8=({data:e,isConnectable:t,targetPosition:n=Ee.Top,sourcePosition:r=Ee.Bottom})=>q.createElement(q.Fragment,null,q.createElement(Qr,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,q.createElement(Qr,{type:"source",position:r,isConnectable:t}));c8.displayName="DefaultNode";var Vx=m.memo(c8);const l8=({data:e,isConnectable:t,sourcePosition:n=Ee.Bottom})=>q.createElement(q.Fragment,null,e==null?void 0:e.label,q.createElement(Qr,{type:"source",position:n,isConnectable:t}));l8.displayName="InputNode";var u8=m.memo(l8);const d8=({data:e,isConnectable:t,targetPosition:n=Ee.Top})=>q.createElement(q.Fragment,null,q.createElement(Qr,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);d8.displayName="OutputNode";var h8=m.memo(d8);const OP=()=>null;OP.displayName="GroupNode";const Whe=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Sm=e=>e.id;function Khe(e,t){return cn(e.selectedNodes.map(Sm),t.selectedNodes.map(Sm))&&cn(e.selectedEdges.map(Sm),t.selectedEdges.map(Sm))}const p8=m.memo(({onSelectionChange:e})=>{const t=rn(),{selectedNodes:n,selectedEdges:r}=Rt(Whe,Khe);return m.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(s=>s(i))},[n,r,e]),null});p8.displayName="SelectionListener";const Ghe=e=>!!e.onSelectionChange;function Qhe({onSelectionChange:e}){const t=Rt(Ghe);return e||t?q.createElement(p8,{onSelectionChange:e}):null}const Jhe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ic(e,t){m.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function tt(e,t,n){m.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Yhe=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:a,onClickConnectStart:o,onClickConnectEnd:c,nodesDraggable:l,nodesConnectable:u,nodesFocusable:h,edgesFocusable:p,edgesUpdatable:f,elevateNodesOnSelect:g,minZoom:v,maxZoom:w,nodeExtent:y,onNodesChange:S,onEdgesChange:C,elementsSelectable:x,connectionMode:E,snapGrid:P,snapToGrid:T,translateExtent:_,connectOnClick:k,defaultEdgeOptions:z,fitView:D,fitViewOptions:O,onNodesDelete:M,onEdgesDelete:b,onNodeDrag:A,onNodeDragStart:N,onNodeDragStop:j,onSelectionDrag:R,onSelectionDragStart:I,onSelectionDragStop:$,noPanClassName:U,nodeOrigin:G,rfId:Y,autoPanOnConnect:J,autoPanOnNodeDrag:oe,onError:V,connectionRadius:H,isValidConnection:te,nodeDragThreshold:re})=>{const{setNodes:ne,setEdges:he,setDefaultNodesAndEdges:ue,setMinZoom:_e,setMaxZoom:je,setTranslateExtent:qe,setNodeExtent:ht,reset:Me}=Rt(Jhe,cn),L=rn();return m.useEffect(()=>{const K=r==null?void 0:r.map(F=>({...F,...z}));return ue(n,K),()=>{Me()}},[]),tt("defaultEdgeOptions",z,L.setState),tt("connectionMode",E,L.setState),tt("onConnect",i,L.setState),tt("onConnectStart",s,L.setState),tt("onConnectEnd",a,L.setState),tt("onClickConnectStart",o,L.setState),tt("onClickConnectEnd",c,L.setState),tt("nodesDraggable",l,L.setState),tt("nodesConnectable",u,L.setState),tt("nodesFocusable",h,L.setState),tt("edgesFocusable",p,L.setState),tt("edgesUpdatable",f,L.setState),tt("elementsSelectable",x,L.setState),tt("elevateNodesOnSelect",g,L.setState),tt("snapToGrid",T,L.setState),tt("snapGrid",P,L.setState),tt("onNodesChange",S,L.setState),tt("onEdgesChange",C,L.setState),tt("connectOnClick",k,L.setState),tt("fitViewOnInit",D,L.setState),tt("fitViewOnInitOptions",O,L.setState),tt("onNodesDelete",M,L.setState),tt("onEdgesDelete",b,L.setState),tt("onNodeDrag",A,L.setState),tt("onNodeDragStart",N,L.setState),tt("onNodeDragStop",j,L.setState),tt("onSelectionDrag",R,L.setState),tt("onSelectionDragStart",I,L.setState),tt("onSelectionDragStop",$,L.setState),tt("noPanClassName",U,L.setState),tt("nodeOrigin",G,L.setState),tt("rfId",Y,L.setState),tt("autoPanOnConnect",J,L.setState),tt("autoPanOnNodeDrag",oe,L.setState),tt("onError",V,L.setState),tt("connectionRadius",H,L.setState),tt("isValidConnection",te,L.setState),tt("nodeDragThreshold",re,L.setState),Ic(e,ne),Ic(t,he),Ic(v,_e),Ic(w,je),Ic(_,qe),Ic(y,ht),null},UN={display:"none"},Zhe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},f8="react-flow__node-desc",m8="react-flow__edge-desc",Xhe="react-flow__aria-live",epe=e=>e.ariaLiveMessage;function tpe({rfId:e}){const t=Rt(epe);return q.createElement("div",{id:`${Xhe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Zhe},t)}function npe({rfId:e,disableKeyboardA11y:t}){return q.createElement(q.Fragment,null,q.createElement("div",{id:`${f8}-${e}`,style:UN},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),q.createElement("div",{id:`${m8}-${e}`,style:UN},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&q.createElement(tpe,{rfId:e}))}var Kp=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=m.useState(!1),i=m.useRef(!1),s=m.useRef(new Set([])),[a,o]=m.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.split("+")),u=l.reduce((h,p)=>h.concat(...p),[]);return[l,u]}return[[],[]]},[e]);return m.useEffect(()=>{const c=typeof document<"u"?document:null,l=(t==null?void 0:t.target)||c;if(e!==null){const u=f=>{if(i.current=f.ctrlKey||f.metaKey||f.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&zx(f))return!1;const v=HN(f.code,o);s.current.add(f[v]),qN(a,s.current,!1)&&(f.preventDefault(),r(!0))},h=f=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&zx(f))return!1;const v=HN(f.code,o);qN(a,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(f[v]),f.key==="Meta"&&s.current.clear(),i.current=!1},p=()=>{s.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",u),l==null||l.addEventListener("keyup",h),window.addEventListener("blur",p),()=>{l==null||l.removeEventListener("keydown",u),l==null||l.removeEventListener("keyup",h),window.removeEventListener("blur",p)}}},[e,r]),n};function qN(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function HN(e,t){return t.includes(e)?"code":"key"}function v8(e,t,n,r){var o,c;const i=e.parentNode||e.parentId;if(!i)return n;const s=t.get(i),a=Qa(s,r);return v8(s,t,{x:(n.x??0)+a.x,y:(n.y??0)+a.y,z:(((o=s[qt])==null?void 0:o.z)??0)>(n.z??0)?((c=s[qt])==null?void 0:c.z)??0:n.z??0},r)}function g8(e,t,n){e.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:a,y:o,z:c}=v8(r,e,{...r.position,z:((s=r[qt])==null?void 0:s.z)??0},t);r.positionAbsolute={x:a,y:o},r[qt].z=c,n!=null&&n[r.id]&&(r[qt].isParent=!0)}})}function Cw(e,t,n,r){const i=new Map,s={},a=r?1e3:0;return e.forEach(o=>{var f;const c=(Gr(o.zIndex)?o.zIndex:0)+(o.selected?a:0),l=t.get(o.id),u={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(s[h]=!0);const p=(l==null?void 0:l.type)&&(l==null?void 0:l.type)!==o.type;Object.defineProperty(u,qt,{enumerable:!1,value:{handleBounds:p||(f=l==null?void 0:l[qt])==null?void 0:f.handleBounds,z:c}}),i.set(o.id,u)}),g8(i,n,s),i}function y8(e,t={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:a,d3Zoom:o,d3Selection:c,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:h}=e(),p=t.initial&&!l&&u;if(o&&c&&(p||!t.initial)){const g=n().filter(w=>{var S;const y=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(S=t.nodes)!=null&&S.length?y&&t.nodes.some(C=>C.id===w.id):y}),v=g.every(w=>w.width&&w.height);if(g.length>0&&v){const w=TS(g,h),{x:y,y:S,zoom:C}=r8(w,r,i,t.minZoom??s,t.maxZoom??a,t.padding??.1),x=Ns.translate(y,S).scale(C);return typeof t.duration=="number"&&t.duration>0?o.transform(_a(c,t.duration),x):o.transform(c,x),!0}}return!1}function rpe(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[qt]:r[qt],selected:n.selected})}),new Map(t)}function ipe(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function wm({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:a,onEdgesChange:o,hasDefaultNodes:c,hasDefaultEdges:l}=n();e!=null&&e.length&&(c&&r({nodeInternals:rpe(e,i)}),a==null||a(e)),t!=null&&t.length&&(l&&r({edges:ipe(t,s)}),o==null||o(t))}const jc=()=>{},spe={zoomIn:jc,zoomOut:jc,zoomTo:jc,getZoom:()=>1,setViewport:jc,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:jc,fitBounds:jc,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},ope=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),ape=()=>{const e=rn(),{d3Zoom:t,d3Selection:n}=Rt(ope,cn);return m.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(_a(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(_a(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>t.scaleTo(_a(n,s==null?void 0:s.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,s)=>{const[a,o,c]=e.getState().transform,l=Ns.translate(i.x??a,i.y??o).scale(i.zoom??c);t.transform(_a(n,s==null?void 0:s.duration),l)},getViewport:()=>{const[i,s,a]=e.getState().transform;return{x:i,y:s,zoom:a}},fitView:i=>y8(e.getState,i),setCenter:(i,s,a)=>{const{width:o,height:c,maxZoom:l}=e.getState(),u=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:l,h=o/2-i*u,p=c/2-s*u,f=Ns.translate(h,p).scale(u);t.transform(_a(n,a==null?void 0:a.duration),f)},fitBounds:(i,s)=>{const{width:a,height:o,minZoom:c,maxZoom:l}=e.getState(),{x:u,y:h,zoom:p}=r8(i,a,o,c,l,(s==null?void 0:s.padding)??.1),f=Ns.translate(u,h).scale(p);t.transform(_a(n,s==null?void 0:s.duration),f)},project:i=>{const{transform:s,snapToGrid:a,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Bx(i,s,a,o)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:a,snapGrid:o,domNode:c}=e.getState();if(!c)return i;const{x:l,y:u}=c.getBoundingClientRect(),h={x:i.x-l,y:i.y-u};return Bx(h,s,a,o)},flowToScreenPosition:i=>{const{transform:s,domNode:a}=e.getState();if(!a)return i;const{x:o,y:c}=a.getBoundingClientRect(),l=e8(i,s);return{x:l.x+o,y:l.y+c}},viewportInitialized:!0}:spe,[t,n])};function DP(){const e=ape(),t=rn(),n=m.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),r=m.useCallback(v=>t.getState().nodeInternals.get(v),[]),i=m.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(w=>({...w}))},[]),s=m.useCallback(v=>{const{edges:w=[]}=t.getState();return w.find(y=>y.id===v)},[]),a=m.useCallback(v=>{const{getNodes:w,setNodes:y,hasDefaultNodes:S,onNodesChange:C}=t.getState(),x=w(),E=typeof v=="function"?v(x):v;if(S)y(E);else if(C){const P=E.length===0?x.map(T=>({type:"remove",id:T.id})):E.map(T=>({item:T,type:"reset"}));C(P)}},[]),o=m.useCallback(v=>{const{edges:w=[],setEdges:y,hasDefaultEdges:S,onEdgesChange:C}=t.getState(),x=typeof v=="function"?v(w):v;if(S)y(x);else if(C){const E=x.length===0?w.map(P=>({type:"remove",id:P.id})):x.map(P=>({item:P,type:"reset"}));C(E)}},[]),c=m.useCallback(v=>{const w=Array.isArray(v)?v:[v],{getNodes:y,setNodes:S,hasDefaultNodes:C,onNodesChange:x}=t.getState();if(C){const P=[...y(),...w];S(P)}else if(x){const E=w.map(P=>({item:P,type:"add"}));x(E)}},[]),l=m.useCallback(v=>{const w=Array.isArray(v)?v:[v],{edges:y=[],setEdges:S,hasDefaultEdges:C,onEdgesChange:x}=t.getState();if(C)S([...y,...w]);else if(x){const E=w.map(P=>({item:P,type:"add"}));x(E)}},[]),u=m.useCallback(()=>{const{getNodes:v,edges:w=[],transform:y}=t.getState(),[S,C,x]=y;return{nodes:v().map(E=>({...E})),edges:w.map(E=>({...E})),viewport:{x:S,y:C,zoom:x}}},[]),h=m.useCallback(({nodes:v,edges:w})=>{const{nodeInternals:y,getNodes:S,edges:C,hasDefaultNodes:x,hasDefaultEdges:E,onNodesDelete:P,onEdgesDelete:T,onNodesChange:_,onEdgesChange:k}=t.getState(),z=(v||[]).map(A=>A.id),D=(w||[]).map(A=>A.id),O=S().reduce((A,N)=>{const j=N.parentNode||N.parentId,R=!z.includes(N.id)&&j&&A.find($=>$.id===j);return(typeof N.deletable=="boolean"?N.deletable:!0)&&(z.includes(N.id)||R)&&A.push(N),A},[]),M=C.filter(A=>typeof A.deletable=="boolean"?A.deletable:!0),b=M.filter(A=>D.includes(A.id));if(O||b){const A=n8(O,M),N=[...b,...A],j=N.reduce((R,I)=>(R.includes(I.id)||R.push(I.id),R),[]);if((E||x)&&(E&&t.setState({edges:C.filter(R=>!j.includes(R.id))}),x&&(O.forEach(R=>{y.delete(R.id)}),t.setState({nodeInternals:new Map(y)}))),j.length>0&&(T==null||T(N),k&&k(j.map(R=>({id:R,type:"remove"})))),O.length>0&&(P==null||P(O),_)){const R=O.map(I=>({id:I.id,type:"remove"}));_(R)}}},[]),p=m.useCallback(v=>{const w=The(v),y=w?null:t.getState().nodeInternals.get(v.id);return!w&&!y?[null,null,w]:[w?v:DN(y),y,w]},[]),f=m.useCallback((v,w=!0,y)=>{const[S,C,x]=p(v);return S?(y||t.getState().getNodes()).filter(E=>{if(!x&&(E.id===C.id||!E.positionAbsolute))return!1;const P=DN(E),T=Lx(P,S);return w&&T>0||T>=S.width*S.height}):[]},[]),g=m.useCallback((v,w,y=!0)=>{const[S]=p(v);if(!S)return!1;const C=Lx(S,w);return y&&C>0||C>=S.width*S.height},[]);return m.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:a,setEdges:o,addNodes:c,addEdges:l,toObject:u,deleteElements:h,getIntersectingNodes:f,isNodeIntersecting:g}),[e,n,r,i,s,a,o,c,l,u,h,f,g])}const cpe={actInsideInputWithModifier:!1};var lpe=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=rn(),{deleteElements:r}=DP(),i=Kp(e,cpe),s=Kp(t);m.useEffect(()=>{if(i){const{edges:a,getNodes:o}=n.getState(),c=o().filter(u=>u.selected),l=a.filter(u=>u.selected);r({nodes:c,edges:l}),n.setState({nodesSelectionActive:!1})}},[i]),m.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function upe(e){const t=rn();m.useEffect(()=>{let n;const r=()=>{var s,a;if(!e.current)return;const i=TP(e.current);(i.height===0||i.width===0)&&((a=(s=t.getState()).onError)==null||a.call(s,"004",Vs.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const LP={position:"absolute",width:"100%",height:"100%",top:0,left:0},dpe=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Cm=e=>({x:e.x,y:e.y,zoom:e.k}),kc=(e,t)=>e.target.closest(`.${t}`),WN=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),KN=e=>{const t=e.ctrlKey&&ug()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},hpe=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),ppe=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:a=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=Da.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:h=!0,defaultViewport:p,translateExtent:f,minZoom:g,maxZoom:v,zoomActivationKeyCode:w,preventScrolling:y=!0,children:S,noWheelClassName:C,noPanClassName:x})=>{const E=m.useRef(),P=rn(),T=m.useRef(!1),_=m.useRef(!1),k=m.useRef(null),z=m.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:O,d3ZoomHandler:M,userSelectionActive:b}=Rt(hpe,cn),A=Kp(w),N=m.useRef(0),j=m.useRef(!1),R=m.useRef();return upe(k),m.useEffect(()=>{if(k.current){const I=k.current.getBoundingClientRect(),$=B6().scaleExtent([g,v]).translateExtent(f),U=Wr(k.current).call($),G=Ns.translate(p.x,p.y).scale(Yl(p.zoom,g,v)),Y=[[0,0],[I.width,I.height]],J=$.constrain()(G,Y,f);$.transform(U,J),$.wheelDelta(KN),P.setState({d3Zoom:$,d3Selection:U,d3ZoomHandler:U.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:k.current.closest(".react-flow")})}},[]),m.useEffect(()=>{O&&D&&(a&&!A&&!b?O.on("wheel.zoom",I=>{if(kc(I,C))return!1;I.preventDefault(),I.stopImmediatePropagation();const $=O.property("__zoom").k||1;if(I.ctrlKey&&s){const te=hi(I),re=KN(I),ne=$*Math.pow(2,re);D.scaleTo(O,ne,te,I);return}const U=I.deltaMode===1?20:1;let G=c===Da.Vertical?0:I.deltaX*U,Y=c===Da.Horizontal?0:I.deltaY*U;!ug()&&I.shiftKey&&c!==Da.Vertical&&(G=I.deltaY*U,Y=0),D.translateBy(O,-(G/$)*o,-(Y/$)*o,{internal:!0});const J=Cm(O.property("__zoom")),{onViewportChangeStart:oe,onViewportChange:V,onViewportChangeEnd:H}=P.getState();clearTimeout(R.current),j.current||(j.current=!0,t==null||t(I,J),oe==null||oe(J)),j.current&&(e==null||e(I,J),V==null||V(J),R.current=setTimeout(()=>{n==null||n(I,J),H==null||H(J),j.current=!1},150))},{passive:!1}):typeof M<"u"&&O.on("wheel.zoom",function(I,$){if(!y&&I.type==="wheel"&&!I.ctrlKey||kc(I,C))return null;I.preventDefault(),M.call(this,I,$)},{passive:!1}))},[b,a,c,O,D,M,A,s,y,C,t,e,n]),m.useEffect(()=>{D&&D.on("start",I=>{var G,Y;if(!I.sourceEvent||I.sourceEvent.internal)return null;N.current=(G=I.sourceEvent)==null?void 0:G.button;const{onViewportChangeStart:$}=P.getState(),U=Cm(I.transform);T.current=!0,z.current=U,((Y=I.sourceEvent)==null?void 0:Y.type)==="mousedown"&&P.setState({paneDragging:!0}),$==null||$(U),t==null||t(I.sourceEvent,U)})},[D,t]),m.useEffect(()=>{D&&(b&&!T.current?D.on("zoom",null):b||D.on("zoom",I=>{var U;const{onViewportChange:$}=P.getState();if(P.setState({transform:[I.transform.x,I.transform.y,I.transform.k]}),_.current=!!(r&&WN(h,N.current??0)),(e||$)&&!((U=I.sourceEvent)!=null&&U.internal)){const G=Cm(I.transform);$==null||$(G),e==null||e(I.sourceEvent,G)}}))},[b,D,e,h,r]),m.useEffect(()=>{D&&D.on("end",I=>{if(!I.sourceEvent||I.sourceEvent.internal)return null;const{onViewportChangeEnd:$}=P.getState();if(T.current=!1,P.setState({paneDragging:!1}),r&&WN(h,N.current??0)&&!_.current&&r(I.sourceEvent),_.current=!1,(n||$)&&dpe(z.current,I.transform)){const U=Cm(I.transform);z.current=U,clearTimeout(E.current),E.current=setTimeout(()=>{$==null||$(U),n==null||n(I.sourceEvent,U)},a?150:0)}})},[D,a,h,n,r]),m.useEffect(()=>{D&&D.filter(I=>{const $=A||i,U=s&&I.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&I.button===1&&I.type==="mousedown"&&(kc(I,"react-flow__node")||kc(I,"react-flow__edge")))return!0;if(!h&&!$&&!a&&!l&&!s||b||!l&&I.type==="dblclick"||kc(I,C)&&I.type==="wheel"||kc(I,x)&&(I.type!=="wheel"||a&&I.type==="wheel"&&!A)||!s&&I.ctrlKey&&I.type==="wheel"||!$&&!a&&!U&&I.type==="wheel"||!h&&(I.type==="mousedown"||I.type==="touchstart")||Array.isArray(h)&&!h.includes(I.button)&&I.type==="mousedown")return!1;const G=Array.isArray(h)&&h.includes(I.button)||!I.button||I.button<=1;return(!I.ctrlKey||I.type==="wheel")&&G})},[b,D,i,s,a,l,h,u,A]),q.createElement("div",{className:"react-flow__renderer",ref:k,style:LP},S)},fpe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function mpe(){const{userSelectionActive:e,userSelectionRect:t}=Rt(fpe,cn);return e&&t?q.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function GN(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(i>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),t.position.x<0){const a=Math.abs(t.position.x);r.position.x=r.position.x-a,r.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);r.position.y=r.position.y-a,r.style.height+=a,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function S8(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const s=e.filter(o=>o.id===i.id);if(s.length===0)return r.push(i),r;const a={...i};for(const o of s)if(o)switch(o.type){case"select":{a.selected=o.selected;break}case"position":{typeof o.position<"u"&&(a.position=o.position),typeof o.positionAbsolute<"u"&&(a.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(a.dragging=o.dragging),a.expandParent&&GN(r,a);break}case"dimensions":{typeof o.dimensions<"u"&&(a.width=o.dimensions.width,a.height=o.dimensions.height),typeof o.updateStyle<"u"&&(a.style={...a.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(a.resizing=o.resizing),a.expandParent&&GN(r,a);break}case"remove":return r}return r.push(a),r},n)}function w8(e,t){return S8(e,t)}function vpe(e,t){return S8(e,t)}const io=(e,t)=>({id:e,type:"select",selected:t});function Yc(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(io(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(io(r.id,!1))),n},[])}const xw=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},gpe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),C8=m.memo(({isSelecting:e,selectionMode:t=Wp.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:a,onPaneScroll:o,onPaneMouseEnter:c,onPaneMouseMove:l,onPaneMouseLeave:u,children:h})=>{const p=m.useRef(null),f=rn(),g=m.useRef(0),v=m.useRef(0),w=m.useRef(),{userSelectionActive:y,elementsSelectable:S,dragging:C}=Rt(gpe,cn),x=()=>{f.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,v.current=0},E=M=>{s==null||s(M),f.getState().resetSelectedElements(),f.setState({nodesSelectionActive:!1})},P=M=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){M.preventDefault();return}a==null||a(M)},T=o?M=>o(M):void 0,_=M=>{const{resetSelectedElements:b,domNode:A}=f.getState();if(w.current=A==null?void 0:A.getBoundingClientRect(),!S||!e||M.button!==0||M.target!==p.current||!w.current)return;const{x:N,y:j}=Oo(M,w.current);b(),f.setState({userSelectionRect:{width:0,height:0,startX:N,startY:j,x:N,y:j}}),r==null||r(M)},k=M=>{const{userSelectionRect:b,nodeInternals:A,edges:N,transform:j,onNodesChange:R,onEdgesChange:I,nodeOrigin:$,getNodes:U}=f.getState();if(!e||!w.current||!b)return;f.setState({userSelectionActive:!0,nodesSelectionActive:!1});const G=Oo(M,w.current),Y=b.startX??0,J=b.startY??0,oe={...b,x:G.x<Y?G.x:Y,y:G.y<J?G.y:J,width:Math.abs(G.x-Y),height:Math.abs(G.y-J)},V=U(),H=t8(A,oe,j,t===Wp.Partial,!0,$),te=n8(H,N).map(ne=>ne.id),re=H.map(ne=>ne.id);if(g.current!==re.length){g.current=re.length;const ne=Yc(V,re);ne.length&&(R==null||R(ne))}if(v.current!==te.length){v.current=te.length;const ne=Yc(N,te);ne.length&&(I==null||I(ne))}f.setState({userSelectionRect:oe})},z=M=>{if(M.button!==0)return;const{userSelectionRect:b}=f.getState();!y&&b&&M.target===p.current&&(E==null||E(M)),f.setState({nodesSelectionActive:g.current>0}),x(),i==null||i(M)},D=M=>{y&&(f.setState({nodesSelectionActive:g.current>0}),i==null||i(M)),x()},O=S&&(e||y);return q.createElement("div",{className:bn(["react-flow__pane",{dragging:C,selection:e}]),onClick:O?void 0:xw(E,p),onContextMenu:xw(P,p),onWheel:xw(T,p),onMouseEnter:O?void 0:c,onMouseDown:O?_:void 0,onMouseMove:O?k:l,onMouseUp:O?z:void 0,onMouseLeave:O?D:u,ref:p,style:LP},h,q.createElement(mpe,null))});C8.displayName="Pane";function x8(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:x8(r,t):!1}function QN(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function ype(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!x8(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,a;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((a=i.positionAbsolute)==null?void 0:a.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function Spe(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function b8(e,t,n,r,i=[0,0],s){const a=Spe(e,e.extent||r);let o=a;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const h=n.get(c),{x:p,y:f}=Qa(h,i).positionAbsolute;o=h&&Gr(p)&&Gr(f)&&Gr(h.width)&&Gr(h.height)?[[p+e.width*i[0],f+e.height*i[1]],[p+h.width-e.width+e.width*i[0],f+h.height-e.height+e.height*i[1]]]:o}else s==null||s("005",Vs.error005()),o=a;else if(e.extent&&c&&e.extent!=="parent"){const h=n.get(c),{x:p,y:f}=Qa(h,i).positionAbsolute;o=[[e.extent[0][0]+p,e.extent[0][1]+f],[e.extent[1][0]+p,e.extent[1][1]+f]]}let l={x:0,y:0};if(c){const h=n.get(c);l=Qa(h,i).positionAbsolute}const u=o&&o!=="parent"?AP(t,o):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function bw({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const JN=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),a=t.getBoundingClientRect(),o={x:a.width*r[0],y:a.height*r[1]};return s.map(c=>{const l=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(l.left-a.left-o.x)/n,y:(l.top-a.top-o.y)/n,...TP(c)}})};function Sh(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function Ux({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:a,nodeInternals:o,onError:c}=t.getState(),l=o.get(e);if(!l){c==null||c("012",Vs.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&a)&&(s({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):i([e])}function wpe(){const e=rn();return m.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,c={x:(a-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:s?i[1]*Math.round(c.y/i[1]):c.y,...c}},[])}function Ew(e){return(t,n,r)=>e==null?void 0:e(t,r)}function E8({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:a}){const o=rn(),[c,l]=m.useState(!1),u=m.useRef([]),h=m.useRef({x:null,y:null}),p=m.useRef(0),f=m.useRef(null),g=m.useRef({x:0,y:0}),v=m.useRef(null),w=m.useRef(!1),y=m.useRef(!1),S=m.useRef(!1),C=wpe();return m.useEffect(()=>{if(e!=null&&e.current){const x=Wr(e.current),E=({x:_,y:k})=>{const{nodeInternals:z,onNodeDrag:D,onSelectionDrag:O,updateNodePositions:M,nodeExtent:b,snapGrid:A,snapToGrid:N,nodeOrigin:j,onError:R}=o.getState();h.current={x:_,y:k};let I=!1,$={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&b){const G=TS(u.current,j);$=Hp(G)}if(u.current=u.current.map(G=>{const Y={x:_-G.distance.x,y:k-G.distance.y};N&&(Y.x=A[0]*Math.round(Y.x/A[0]),Y.y=A[1]*Math.round(Y.y/A[1]));const J=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];u.current.length>1&&b&&!G.extent&&(J[0][0]=G.positionAbsolute.x-$.x+b[0][0],J[1][0]=G.positionAbsolute.x+(G.width??0)-$.x2+b[1][0],J[0][1]=G.positionAbsolute.y-$.y+b[0][1],J[1][1]=G.positionAbsolute.y+(G.height??0)-$.y2+b[1][1]);const oe=b8(G,Y,z,J,j,R);return I=I||G.position.x!==oe.position.x||G.position.y!==oe.position.y,G.position=oe.position,G.positionAbsolute=oe.positionAbsolute,G}),!I)return;M(u.current,!0,!0),l(!0);const U=i?D:Ew(O);if(U&&v.current){const[G,Y]=bw({nodeId:i,dragItems:u.current,nodeInternals:z});U(v.current,G,Y)}},P=()=>{if(!f.current)return;const[_,k]=U6(g.current,f.current);if(_!==0||k!==0){const{transform:z,panBy:D}=o.getState();h.current.x=(h.current.x??0)-_/z[2],h.current.y=(h.current.y??0)-k/z[2],D({x:_,y:k})&&E(h.current)}p.current=requestAnimationFrame(P)},T=_=>{var j;const{nodeInternals:k,multiSelectionActive:z,nodesDraggable:D,unselectNodesAndEdges:O,onNodeDragStart:M,onSelectionDragStart:b}=o.getState();y.current=!0;const A=i?M:Ew(b);(!a||!s)&&!z&&i&&((j=k.get(i))!=null&&j.selected||O()),i&&s&&a&&Ux({id:i,store:o,nodeRef:e});const N=C(_);if(h.current=N,u.current=ype(k,D,N,i),A&&u.current){const[R,I]=bw({nodeId:i,dragItems:u.current,nodeInternals:k});A(_.sourceEvent,R,I)}};if(t)x.on(".drag",null);else{const _=jue().on("start",k=>{const{domNode:z,nodeDragThreshold:D}=o.getState();D===0&&T(k),S.current=!1;const O=C(k);h.current=O,f.current=(z==null?void 0:z.getBoundingClientRect())||null,g.current=Oo(k.sourceEvent,f.current)}).on("drag",k=>{var M,b;const z=C(k),{autoPanOnNodeDrag:D,nodeDragThreshold:O}=o.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(S.current=!0),!S.current){if(!w.current&&y.current&&D&&(w.current=!0,P()),!y.current){const A=z.xSnapped-(((M=h==null?void 0:h.current)==null?void 0:M.x)??0),N=z.ySnapped-(((b=h==null?void 0:h.current)==null?void 0:b.y)??0);Math.sqrt(A*A+N*N)>O&&T(k)}(h.current.x!==z.xSnapped||h.current.y!==z.ySnapped)&&u.current&&y.current&&(v.current=k.sourceEvent,g.current=Oo(k.sourceEvent,f.current),E(z))}}).on("end",k=>{if(!(!y.current||S.current)&&(l(!1),w.current=!1,y.current=!1,cancelAnimationFrame(p.current),u.current)){const{updateNodePositions:z,nodeInternals:D,onNodeDragStop:O,onSelectionDragStop:M}=o.getState(),b=i?O:Ew(M);if(z(u.current,!1,!1),b){const[A,N]=bw({nodeId:i,dragItems:u.current,nodeInternals:D});b(k.sourceEvent,A,N)}}}).filter(k=>{const z=k.target;return!k.button&&(!n||!QN(z,`.${n}`,e))&&(!r||QN(z,r,e))});return x.call(_),()=>{x.on(".drag",null)}}}},[e,t,n,r,s,o,i,a,C]),c}function P8(){const e=rn();return m.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:a,snapToGrid:o,snapGrid:c,onError:l,nodesDraggable:u}=e.getState(),h=a().filter(S=>S.selected&&(S.draggable||u&&typeof S.draggable>"u")),p=o?c[0]:5,f=o?c[1]:5,g=n.isShiftPressed?4:1,v=n.x*p*g,w=n.y*f*g,y=h.map(S=>{if(S.positionAbsolute){const C={x:S.positionAbsolute.x+v,y:S.positionAbsolute.y+w};o&&(C.x=c[0]*Math.round(C.x/c[0]),C.y=c[1]*Math.round(C.y/c[1]));const{positionAbsolute:x,position:E}=b8(S,C,r,i,void 0,l);S.position=E,S.positionAbsolute=x}return S});s(y,!0,!1)},[])}const hl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var wh=e=>{const t=({id:n,type:r,data:i,xPos:s,yPos:a,xPosOrigin:o,yPosOrigin:c,selected:l,onClick:u,onMouseEnter:h,onMouseMove:p,onMouseLeave:f,onContextMenu:g,onDoubleClick:v,style:w,className:y,isDraggable:S,isSelectable:C,isConnectable:x,isFocusable:E,selectNodesOnDrag:P,sourcePosition:T,targetPosition:_,hidden:k,resizeObserver:z,dragHandle:D,zIndex:O,isParent:M,noDragClassName:b,noPanClassName:A,initialized:N,disableKeyboardA11y:j,ariaLabel:R,rfId:I,hasHandleBounds:$})=>{const U=rn(),G=m.useRef(null),Y=m.useRef(null),J=m.useRef(T),oe=m.useRef(_),V=m.useRef(r),H=C||S||u||h||p||f,te=P8(),re=Sh(n,U.getState,h),ne=Sh(n,U.getState,p),he=Sh(n,U.getState,f),ue=Sh(n,U.getState,g),_e=Sh(n,U.getState,v),je=Me=>{const{nodeDragThreshold:L}=U.getState();if(C&&(!P||!S||L>0)&&Ux({id:n,store:U,nodeRef:G}),u){const K=U.getState().nodeInternals.get(n);K&&u(Me,{...K})}},qe=Me=>{if(!zx(Me)&&!j)if(K6.includes(Me.key)&&C){const L=Me.key==="Escape";Ux({id:n,store:U,unselect:L,nodeRef:G})}else S&&l&&Object.prototype.hasOwnProperty.call(hl,Me.key)&&(U.setState({ariaLiveMessage:`Moved selected node ${Me.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~a}`}),te({x:hl[Me.key].x,y:hl[Me.key].y,isShiftPressed:Me.shiftKey}))};m.useEffect(()=>()=>{Y.current&&(z==null||z.unobserve(Y.current),Y.current=null)},[]),m.useEffect(()=>{if(G.current&&!k){const Me=G.current;(!N||!$||Y.current!==Me)&&(Y.current&&(z==null||z.unobserve(Y.current)),z==null||z.observe(Me),Y.current=Me)}},[k,N,$]),m.useEffect(()=>{const Me=V.current!==r,L=J.current!==T,K=oe.current!==_;G.current&&(Me||L||K)&&(Me&&(V.current=r),L&&(J.current=T),K&&(oe.current=_),U.getState().updateNodeDimensions([{id:n,nodeElement:G.current,forceUpdate:!0}]))},[n,r,T,_]);const ht=E8({nodeRef:G,disabled:k||!S,noDragClassName:b,handleSelector:D,nodeId:n,isSelectable:C,selectNodesOnDrag:P});return k?null:q.createElement("div",{className:bn(["react-flow__node",`react-flow__node-${r}`,{[A]:S},y,{selected:l,selectable:C,parent:M,dragging:ht}]),ref:G,style:{zIndex:O,transform:`translate(${o}px,${c}px)`,pointerEvents:H?"all":"none",visibility:N?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:re,onMouseMove:ne,onMouseLeave:he,onContextMenu:ue,onClick:je,onDoubleClick:_e,onKeyDown:E?qe:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":j?void 0:`${f8}-${I}`,"aria-label":R},q.createElement(Ohe,{value:n},q.createElement(e,{id:n,data:i,type:r,xPos:s,yPos:a,selected:l,isConnectable:x,sourcePosition:T,targetPosition:_,dragging:ht,dragHandle:D,zIndex:O})))};return t.displayName="NodeWrapper",m.memo(t)};const Cpe=e=>{const t=e.getNodes().filter(n=>n.selected);return{...TS(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function xpe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=rn(),{width:i,height:s,x:a,y:o,transformString:c,userSelectionActive:l}=Rt(Cpe,cn),u=P8(),h=m.useRef(null);if(m.useEffect(()=>{var g;n||(g=h.current)==null||g.focus({preventScroll:!0})},[n]),E8({nodeRef:h}),l||!i||!s)return null;const p=e?g=>{const v=r.getState().getNodes().filter(w=>w.selected);e(g,v)}:void 0,f=g=>{Object.prototype.hasOwnProperty.call(hl,g.key)&&u({x:hl[g.key].x,y:hl[g.key].y,isShiftPressed:g.shiftKey})};return q.createElement("div",{className:bn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},q.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:s,top:o,left:a}}))}var bpe=m.memo(xpe);const Epe=e=>e.nodesSelectionActive,R8=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,deleteKeyCode:o,onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyCode:h,selectionOnDrag:p,selectionMode:f,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:w,panActivationKeyCode:y,zoomActivationKeyCode:S,elementsSelectable:C,zoomOnScroll:x,zoomOnPinch:E,panOnScroll:P,panOnScrollSpeed:T,panOnScrollMode:_,zoomOnDoubleClick:k,panOnDrag:z,defaultViewport:D,translateExtent:O,minZoom:M,maxZoom:b,preventScrolling:A,onSelectionContextMenu:N,noWheelClassName:j,noPanClassName:R,disableKeyboardA11y:I})=>{const $=Rt(Epe),U=Kp(h),G=Kp(y),Y=G||z,J=G||P,oe=U||p&&Y!==!0;return lpe({deleteKeyCode:o,multiSelectionKeyCode:w}),q.createElement(ppe,{onMove:c,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:x,zoomOnPinch:E,panOnScroll:J,panOnScrollSpeed:T,panOnScrollMode:_,zoomOnDoubleClick:k,panOnDrag:!U&&Y,defaultViewport:D,translateExtent:O,minZoom:M,maxZoom:b,zoomActivationKeyCode:S,preventScrolling:A,noWheelClassName:j,noPanClassName:R},q.createElement(C8,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,panOnDrag:Y,isSelecting:!!oe,selectionMode:f},e,$&&q.createElement(bpe,{onSelectionContextMenu:N,noPanClassName:R,disableKeyboardA11y:I})))};R8.displayName="FlowRenderer";var Ppe=m.memo(R8);function Rpe(e){return Rt(m.useCallback(n=>e?t8(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function _pe(e){const t={input:wh(e.input||u8),default:wh(e.default||Vx),output:wh(e.output||h8),group:wh(e.group||OP)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=wh(e[s]||Vx),i),n);return{...t,...r}}const Tpe=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},Ape=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),_8=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:a}=Rt(Ape,cn),o=Rpe(e.onlyRenderVisibleElements),c=m.useRef(),l=m.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(h=>{const p=h.map(f=>({id:f.target.getAttribute("data-id"),nodeElement:f.target,forceUpdate:!0}));s(p)});return c.current=u,u},[]);return m.useEffect(()=>()=>{var u;(u=c==null?void 0:c.current)==null||u.disconnect()},[]),q.createElement("div",{className:"react-flow__nodes",style:LP},o.map(u=>{var E,P,T;let h=u.type||"default";e.nodeTypes[h]||(a==null||a("003",Vs.error003(h)),h="default");const p=e.nodeTypes[h]||e.nodeTypes.default,f=!!(u.draggable||t&&typeof u.draggable>"u"),g=!!(u.selectable||i&&typeof u.selectable>"u"),v=!!(u.connectable||n&&typeof u.connectable>"u"),w=!!(u.focusable||r&&typeof u.focusable>"u"),y=e.nodeExtent?AP(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,S=(y==null?void 0:y.x)??0,C=(y==null?void 0:y.y)??0,x=Tpe({x:S,y:C,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return q.createElement(p,{key:u.id,id:u.id,className:u.className,style:u.style,type:h,data:u.data,sourcePosition:u.sourcePosition||Ee.Bottom,targetPosition:u.targetPosition||Ee.Top,hidden:u.hidden,xPos:S,yPos:C,xPosOrigin:x.x,yPosOrigin:x.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:f,isSelectable:g,isConnectable:v,isFocusable:w,resizeObserver:l,dragHandle:u.dragHandle,zIndex:((E=u[qt])==null?void 0:E.z)??0,isParent:!!((P=u[qt])!=null&&P.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((T=u[qt])!=null&&T.handleBounds)})}))};_8.displayName="NodeRenderer";var Npe=m.memo(_8);const Ipe=(e,t,n)=>n===Ee.Left?e-t:n===Ee.Right?e+t:e,jpe=(e,t,n)=>n===Ee.Top?e-t:n===Ee.Bottom?e+t:e,YN="react-flow__edgeupdater",ZN=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:a,type:o})=>q.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:a,className:bn([YN,`${YN}-${o}`]),cx:Ipe(t,r,e),cy:jpe(n,r,e),r,stroke:"transparent",fill:"transparent"}),kpe=()=>!0;var Mc=e=>{const t=({id:n,className:r,type:i,data:s,onClick:a,onEdgeDoubleClick:o,selected:c,animated:l,label:u,labelStyle:h,labelShowBg:p,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:v,style:w,source:y,target:S,sourceX:C,sourceY:x,targetX:E,targetY:P,sourcePosition:T,targetPosition:_,elementsSelectable:k,hidden:z,sourceHandleId:D,targetHandleId:O,onContextMenu:M,onMouseEnter:b,onMouseMove:A,onMouseLeave:N,reconnectRadius:j,onReconnect:R,onReconnectStart:I,onReconnectEnd:$,markerEnd:U,markerStart:G,rfId:Y,ariaLabel:J,isFocusable:oe,isReconnectable:V,pathOptions:H,interactionWidth:te,disableKeyboardA11y:re})=>{const ne=m.useRef(null),[he,ue]=m.useState(!1),[_e,je]=m.useState(!1),qe=rn(),ht=m.useMemo(()=>`url('#${$x(G,Y)}')`,[G,Y]),Me=m.useMemo(()=>`url('#${$x(U,Y)}')`,[U,Y]);if(z)return null;const L=bt=>{var Pe;const{edges:ft,addSelectedEdges:Zn,unselectNodesAndEdges:Xn,multiSelectionActive:er}=qe.getState(),fe=ft.find(Oe=>Oe.id===n);fe&&(k&&(qe.setState({nodesSelectionActive:!1}),fe.selected&&er?(Xn({nodes:[],edges:[fe]}),(Pe=ne.current)==null||Pe.blur()):Zn([n])),a&&a(bt,fe))},K=yh(n,qe.getState,o),F=yh(n,qe.getState,M),Q=yh(n,qe.getState,b),Z=yh(n,qe.getState,A),X=yh(n,qe.getState,N),se=(bt,ft)=>{if(bt.button!==0)return;const{edges:Zn,isValidConnection:Xn}=qe.getState(),er=ft?S:y,fe=(ft?O:D)||null,Pe=ft?"target":"source",Oe=Xn||kpe,ct=ft,Ge=Zn.find(pn=>pn.id===n);je(!0),I==null||I(bt,Ge,Pe);const mt=pn=>{je(!1),$==null||$(pn,Ge,Pe)};o8({event:bt,handleId:fe,nodeId:er,onConnect:pn=>R==null?void 0:R(Ge,pn),isTarget:ct,getState:qe.getState,setState:qe.setState,isValidConnection:Oe,edgeUpdaterType:Pe,onReconnectEnd:mt})},pe=bt=>se(bt,!0),Ne=bt=>se(bt,!1),Ze=()=>ue(!0),Ht=()=>ue(!1),zr=!k&&!a,gr=bt=>{var ft;if(!re&&K6.includes(bt.key)&&k){const{unselectNodesAndEdges:Zn,addSelectedEdges:Xn,edges:er}=qe.getState();bt.key==="Escape"?((ft=ne.current)==null||ft.blur(),Zn({edges:[er.find(Pe=>Pe.id===n)]})):Xn([n])}};return q.createElement("g",{className:bn(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:l,inactive:zr,updating:he}]),onClick:L,onDoubleClick:K,onContextMenu:F,onMouseEnter:Q,onMouseMove:Z,onMouseLeave:X,onKeyDown:oe?gr:void 0,tabIndex:oe?0:void 0,role:oe?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":J===null?void 0:J||`Edge from ${y} to ${S}`,"aria-describedby":oe?`${m8}-${Y}`:void 0,ref:ne},!_e&&q.createElement(e,{id:n,source:y,target:S,selected:c,animated:l,label:u,labelStyle:h,labelShowBg:p,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:v,data:s,style:w,sourceX:C,sourceY:x,targetX:E,targetY:P,sourcePosition:T,targetPosition:_,sourceHandleId:D,targetHandleId:O,markerStart:ht,markerEnd:Me,pathOptions:H,interactionWidth:te}),V&&q.createElement(q.Fragment,null,(V==="source"||V===!0)&&q.createElement(ZN,{position:T,centerX:C,centerY:x,radius:j,onMouseDown:pe,onMouseEnter:Ze,onMouseOut:Ht,type:"source"}),(V==="target"||V===!0)&&q.createElement(ZN,{position:_,centerX:E,centerY:P,radius:j,onMouseDown:Ne,onMouseEnter:Ze,onMouseOut:Ht,type:"target"})))};return t.displayName="EdgeWrapper",m.memo(t)};function Mpe(e){const t={default:Mc(e.default||hg),straight:Mc(e.bezier||jP),step:Mc(e.step||IP),smoothstep:Mc(e.step||_S),simplebezier:Mc(e.simplebezier||NP)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=Mc(e[s]||hg),i),n);return{...t,...r}}function XN(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,a=(n==null?void 0:n.height)||t.height;switch(e){case Ee.Top:return{x:r+s/2,y:i};case Ee.Right:return{x:r+s,y:i+a/2};case Ee.Bottom:return{x:r+s/2,y:i+a};case Ee.Left:return{x:r,y:i+a/2}}}function eI(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Ope=(e,t,n,r,i,s)=>{const a=XN(n,e,t),o=XN(s,r,i);return{sourceX:a.x,sourceY:a.y,targetX:o.x,targetY:o.y}};function Dpe({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:a,height:o,transform:c}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+s)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const u=Hp({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:a/c[2],height:o/c[2]}),h=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),p=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(h*p)>0}function tI(e){var r,i,s,a,o;const t=((r=e==null?void 0:e[qt])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Lpe=[{level:0,isMaxLevel:!0,edges:[]}];function zpe(e,t,n=!1){let r=-1;const i=e.reduce((a,o)=>{var u,h;const c=Gr(o.zIndex);let l=c?o.zIndex:0;if(n){const p=t.get(o.target),f=t.get(o.source),g=o.selected||(p==null?void 0:p.selected)||(f==null?void 0:f.selected),v=Math.max(((u=f==null?void 0:f[qt])==null?void 0:u.z)||0,((h=p==null?void 0:p[qt])==null?void 0:h.z)||0,1e3);l=(c?o.zIndex:0)+(g?v:0)}return a[l]?a[l].push(o):a[l]=[o],r=l>r?l:r,a},{}),s=Object.entries(i).map(([a,o])=>{const c=+a;return{edges:o,level:c,isMaxLevel:c===r}});return s.length===0?Lpe:s}function Fpe(e,t,n){const r=Rt(m.useCallback(i=>e?i.edges.filter(s=>{const a=t.get(s.source),o=t.get(s.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&Dpe({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:o.width,targetHeight:o.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return zpe(r,t,n)}const $pe=({color:e="none",strokeWidth:t=1})=>q.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Bpe=({color:e="none",strokeWidth:t=1})=>q.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),nI={[dg.Arrow]:$pe,[dg.ArrowClosed]:Bpe};function Vpe(e){const t=rn();return m.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(nI,e)?nI[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",Vs.error009(e)),null)},[e])}const Upe=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:a,orient:o="auto-start-reverse"})=>{const c=Vpe(t);return c?q.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},q.createElement(c,{color:n,strokeWidth:a})):null},qpe=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const o=$x(a,t);r.includes(o)||(i.push({id:o,color:a.color||e,...a}),r.push(o))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},T8=({defaultColor:e,rfId:t})=>{const n=Rt(m.useCallback(qpe({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((s,a)=>s.id!==i[a].id)));return q.createElement("defs",null,n.map(r=>q.createElement(Upe,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};T8.displayName="MarkerDefinitions";var Hpe=m.memo(T8);const Wpe=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),A8=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:a,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:f,onReconnectEnd:g,reconnectRadius:v,children:w,disableKeyboardA11y:y})=>{const{edgesFocusable:S,edgesUpdatable:C,elementsSelectable:x,width:E,height:P,connectionMode:T,nodeInternals:_,onError:k}=Rt(Wpe,cn),z=Fpe(t,_,n);return E?q.createElement(q.Fragment,null,z.map(({level:D,edges:O,isMaxLevel:M})=>q.createElement("svg",{key:D,style:{zIndex:D},width:E,height:P,className:"react-flow__edges react-flow__container"},M&&q.createElement(Hpe,{defaultColor:e,rfId:r}),q.createElement("g",null,O.map(b=>{const[A,N,j]=tI(_.get(b.source)),[R,I,$]=tI(_.get(b.target));if(!j||!$)return null;let U=b.type||"default";i[U]||(k==null||k("011",Vs.error011(U)),U="default");const G=i[U]||i.default,Y=T===Ko.Strict?I.target:(I.target??[]).concat(I.source??[]),J=eI(N.source,b.sourceHandle),oe=eI(Y,b.targetHandle),V=(J==null?void 0:J.position)||Ee.Bottom,H=(oe==null?void 0:oe.position)||Ee.Top,te=!!(b.focusable||S&&typeof b.focusable>"u"),re=b.reconnectable||b.updatable,ne=typeof p<"u"&&(re||C&&typeof re>"u");if(!J||!oe)return k==null||k("008",Vs.error008(J,b)),null;const{sourceX:he,sourceY:ue,targetX:_e,targetY:je}=Ope(A,J,V,R,oe,H);return q.createElement(G,{key:b.id,id:b.id,className:bn([b.className,s]),type:U,data:b.data,selected:!!b.selected,animated:!!b.animated,hidden:!!b.hidden,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,style:b.style,source:b.source,target:b.target,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerEnd:b.markerEnd,markerStart:b.markerStart,sourceX:he,sourceY:ue,targetX:_e,targetY:je,sourcePosition:V,targetPosition:H,elementsSelectable:x,onContextMenu:a,onMouseEnter:o,onMouseMove:c,onMouseLeave:l,onClick:u,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:f,onReconnectEnd:g,reconnectRadius:v,rfId:r,ariaLabel:b.ariaLabel,isFocusable:te,isReconnectable:ne,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth,disableKeyboardA11y:y})})))),w):null};A8.displayName="EdgeRenderer";var Kpe=m.memo(A8);const Gpe=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Qpe({children:e}){const t=Rt(Gpe);return q.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Jpe(e){const t=DP(),n=m.useRef(!1);m.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Ype={[Ee.Left]:Ee.Right,[Ee.Right]:Ee.Left,[Ee.Top]:Ee.Bottom,[Ee.Bottom]:Ee.Top},N8=({nodeId:e,handleType:t,style:n,type:r=lo.Bezier,CustomComponent:i,connectionStatus:s})=>{var P,T,_;const{fromNode:a,handleId:o,toX:c,toY:l,connectionMode:u}=Rt(m.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),cn),h=(P=a==null?void 0:a[qt])==null?void 0:P.handleBounds;let p=h==null?void 0:h[t];if(u===Ko.Loose&&(p=p||(h==null?void 0:h[t==="source"?"target":"source"])),!a||!p)return null;const f=o?p.find(k=>k.id===o):p[0],g=f?f.x+f.width/2:(a.width??0)/2,v=f?f.y+f.height/2:a.height??0,w=(((T=a.positionAbsolute)==null?void 0:T.x)??0)+g,y=(((_=a.positionAbsolute)==null?void 0:_.y)??0)+v,S=f==null?void 0:f.position,C=S?Ype[S]:null;if(!S||!C)return null;if(i)return q.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:f,fromX:w,fromY:y,toX:c,toY:l,fromPosition:S,toPosition:C,connectionStatus:s});let x="";const E={sourceX:w,sourceY:y,sourcePosition:S,targetX:c,targetY:l,targetPosition:C};return r===lo.Bezier?[x]=Z6(E):r===lo.Step?[x]=Fx({...E,borderRadius:0}):r===lo.SmoothStep?[x]=Fx(E):r===lo.SimpleBezier?[x]=Y6(E):x=`M${w},${y} ${c},${l}`,q.createElement("path",{d:x,fill:"none",className:"react-flow__connection-path",style:n})};N8.displayName="ConnectionLine";const Zpe=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Xpe({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:a,width:o,height:c,connectionStatus:l}=Rt(Zpe,cn);return!(i&&s&&o&&a)?null:q.createElement("svg",{style:e,width:o,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},q.createElement("g",{className:bn(["react-flow__connection",l])},q.createElement(N8,{nodeId:i,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:l})))}function rI(e,t){return m.useRef(null),rn(),m.useMemo(()=>t(e),[e])}const I8=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:a,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:f,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:w,connectionLineType:y,connectionLineStyle:S,connectionLineComponent:C,connectionLineContainerStyle:x,selectionKeyCode:E,selectionOnDrag:P,selectionMode:T,multiSelectionKeyCode:_,panActivationKeyCode:k,zoomActivationKeyCode:z,deleteKeyCode:D,onlyRenderVisibleElements:O,elementsSelectable:M,selectNodesOnDrag:b,defaultViewport:A,translateExtent:N,minZoom:j,maxZoom:R,preventScrolling:I,defaultMarkerColor:$,zoomOnScroll:U,zoomOnPinch:G,panOnScroll:Y,panOnScrollSpeed:J,panOnScrollMode:oe,zoomOnDoubleClick:V,panOnDrag:H,onPaneClick:te,onPaneMouseEnter:re,onPaneMouseMove:ne,onPaneMouseLeave:he,onPaneScroll:ue,onPaneContextMenu:_e,onEdgeContextMenu:je,onEdgeMouseEnter:qe,onEdgeMouseMove:ht,onEdgeMouseLeave:Me,onReconnect:L,onReconnectStart:K,onReconnectEnd:F,reconnectRadius:Q,noDragClassName:Z,noWheelClassName:X,noPanClassName:se,elevateEdgesOnSelect:pe,disableKeyboardA11y:Ne,nodeOrigin:Ze,nodeExtent:Ht,rfId:zr})=>{const gr=rI(e,_pe),bt=rI(t,Mpe);return Jpe(s),q.createElement(Ppe,{onPaneClick:te,onPaneMouseEnter:re,onPaneMouseMove:ne,onPaneMouseLeave:he,onPaneContextMenu:_e,onPaneScroll:ue,deleteKeyCode:D,selectionKeyCode:E,selectionOnDrag:P,selectionMode:T,onSelectionStart:v,onSelectionEnd:w,multiSelectionKeyCode:_,panActivationKeyCode:k,zoomActivationKeyCode:z,elementsSelectable:M,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:U,zoomOnPinch:G,zoomOnDoubleClick:V,panOnScroll:Y,panOnScrollSpeed:J,panOnScrollMode:oe,panOnDrag:H,defaultViewport:A,translateExtent:N,minZoom:j,maxZoom:R,onSelectionContextMenu:g,preventScrolling:I,noDragClassName:Z,noWheelClassName:X,noPanClassName:se,disableKeyboardA11y:Ne},q.createElement(Qpe,null,q.createElement(Kpe,{edgeTypes:bt,onEdgeClick:o,onEdgeDoubleClick:l,onlyRenderVisibleElements:O,onEdgeContextMenu:je,onEdgeMouseEnter:qe,onEdgeMouseMove:ht,onEdgeMouseLeave:Me,onReconnect:L,onReconnectStart:K,onReconnectEnd:F,reconnectRadius:Q,defaultMarkerColor:$,noPanClassName:se,elevateEdgesOnSelect:!!pe,disableKeyboardA11y:Ne,rfId:zr},q.createElement(Xpe,{style:S,type:y,component:C,containerStyle:x})),q.createElement("div",{className:"react-flow__edgelabel-renderer"}),q.createElement(Npe,{nodeTypes:gr,onNodeClick:a,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:f,selectNodesOnDrag:b,onlyRenderVisibleElements:O,noPanClassName:se,noDragClassName:Z,disableKeyboardA11y:Ne,nodeOrigin:Ze,nodeExtent:Ht,rfId:zr})))};I8.displayName="GraphView";var efe=m.memo(I8);const qx=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Js={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:qx,nodeExtent:qx,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ko.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Ahe,isValidConnection:void 0},tfe=()=>qce((e,t)=>({...Js,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=t();e({nodeInternals:Cw(n,r,i,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",a=i?Cw(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:a,fitViewOnInitOptions:o,domNode:c,nodeOrigin:l}=t(),u=c==null?void 0:c.querySelector(".react-flow__viewport");if(!u)return;const h=window.getComputedStyle(u),{m22:p}=new window.DOMMatrixReadOnly(h.transform),f=n.reduce((v,w)=>{const y=i.get(w.id);if(y!=null&&y.hidden)i.set(y.id,{...y,[qt]:{...y[qt],handleBounds:void 0}});else if(y){const S=TP(w.nodeElement);!!(S.width&&S.height&&(y.width!==S.width||y.height!==S.height||w.forceUpdate))&&(i.set(y.id,{...y,[qt]:{...y[qt],handleBounds:{source:JN(".source",w.nodeElement,p,l),target:JN(".target",w.nodeElement,p,l)}},...S}),v.push({id:y.id,type:"dimensions",dimensions:S}))}return v},[]);g8(i,l);const g=a||s&&!a&&y8(t,{initial:!0,...o});e({nodeInternals:new Map(i),fitViewOnInitDone:g}),(f==null?void 0:f.length)>0&&(r==null||r(f))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=t(),a=n.map(o=>{const c={id:o.id,type:"position",dragging:i};return r&&(c.positionAbsolute=o.positionAbsolute,c.position=o.position),c});s(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:a,getNodes:o,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(s){const l=w8(n,o()),u=Cw(l,i,a,c);e({nodeInternals:u})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let a,o=null;r?a=n.map(c=>io(c,!0)):(a=Yc(s(),n),o=Yc(i,[])),wm({changedNodes:a,changedEdges:o,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let a,o=null;r?a=n.map(c=>io(c,!0)):(a=Yc(i,n),o=Yc(s(),[])),wm({changedNodes:o,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=t(),a=n||s(),o=r||i,c=a.map(u=>(u.selected=!1,io(u.id,!1))),l=o.map(u=>io(u.id,!1));wm({changedNodes:c,changedEdges:l,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(o=>o.selected).map(o=>io(o.id,!1)),a=n.filter(o=>o.selected).map(o=>io(o.id,!1));wm({changedNodes:s,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=AP(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:a,d3Selection:o,translateExtent:c}=t();if(!a||!o||!n.x&&!n.y)return!1;const l=Ns.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),u=[[0,0],[i,s]],h=a==null?void 0:a.constrain()(l,u,c);return a.transform(o,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>e({connectionNodeId:Js.connectionNodeId,connectionHandleId:Js.connectionHandleId,connectionHandleType:Js.connectionHandleType,connectionStatus:Js.connectionStatus,connectionStartHandle:Js.connectionStartHandle,connectionEndHandle:Js.connectionEndHandle}),reset:()=>e({...Js})}),Object.is),zP=({children:e})=>{const t=m.useRef(null);return t.current||(t.current=tfe()),q.createElement(xhe,{value:t.current},e)};zP.displayName="ReactFlowProvider";const j8=({children:e})=>m.useContext(PS)?q.createElement(q.Fragment,null,e):q.createElement(zP,null,e);j8.displayName="ReactFlowWrapper";const nfe={input:u8,default:Vx,output:h8,group:OP},rfe={default:hg,straight:jP,step:IP,smoothstep:_S,simplebezier:NP},ife=[0,0],sfe=[15,15],ofe={x:0,y:0,zoom:1},afe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},k8=m.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=nfe,edgeTypes:a=rfe,onNodeClick:o,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:h,onMoveEnd:p,onConnect:f,onConnectStart:g,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:y,onNodeMouseEnter:S,onNodeMouseMove:C,onNodeMouseLeave:x,onNodeContextMenu:E,onNodeDoubleClick:P,onNodeDragStart:T,onNodeDrag:_,onNodeDragStop:k,onNodesDelete:z,onEdgesDelete:D,onSelectionChange:O,onSelectionDragStart:M,onSelectionDrag:b,onSelectionDragStop:A,onSelectionContextMenu:N,onSelectionStart:j,onSelectionEnd:R,connectionMode:I=Ko.Strict,connectionLineType:$=lo.Bezier,connectionLineStyle:U,connectionLineComponent:G,connectionLineContainerStyle:Y,deleteKeyCode:J="Backspace",selectionKeyCode:oe="Shift",selectionOnDrag:V=!1,selectionMode:H=Wp.Full,panActivationKeyCode:te="Space",multiSelectionKeyCode:re=ug()?"Meta":"Control",zoomActivationKeyCode:ne=ug()?"Meta":"Control",snapToGrid:he=!1,snapGrid:ue=sfe,onlyRenderVisibleElements:_e=!1,selectNodesOnDrag:je=!0,nodesDraggable:qe,nodesConnectable:ht,nodesFocusable:Me,nodeOrigin:L=ife,edgesFocusable:K,edgesUpdatable:F,elementsSelectable:Q,defaultViewport:Z=ofe,minZoom:X=.5,maxZoom:se=2,translateExtent:pe=qx,preventScrolling:Ne=!0,nodeExtent:Ze,defaultMarkerColor:Ht="#b1b1b7",zoomOnScroll:zr=!0,zoomOnPinch:gr=!0,panOnScroll:bt=!1,panOnScrollSpeed:ft=.5,panOnScrollMode:Zn=Da.Free,zoomOnDoubleClick:Xn=!0,panOnDrag:er=!0,onPaneClick:fe,onPaneMouseEnter:Pe,onPaneMouseMove:Oe,onPaneMouseLeave:ct,onPaneScroll:Ge,onPaneContextMenu:mt,children:st,onEdgeContextMenu:pn,onEdgeDoubleClick:sa,onEdgeMouseEnter:yu,onEdgeMouseMove:IS,onEdgeMouseLeave:jS,onEdgeUpdate:kS,onEdgeUpdateStart:MS,onEdgeUpdateEnd:OS,onReconnect:DS,onReconnectStart:LS,onReconnectEnd:zS,reconnectRadius:FS=10,edgeUpdaterRadius:$S=10,onNodesChange:kf,onEdgesChange:BS,noDragClassName:VS="nodrag",noWheelClassName:US="nowheel",noPanClassName:WP="nopan",fitView:fV=!1,fitViewOptions:mV,connectOnClick:vV=!0,attributionPosition:gV,proOptions:yV,defaultEdgeOptions:SV,elevateNodesOnSelect:wV=!0,elevateEdgesOnSelect:CV=!1,disableKeyboardA11y:KP=!1,autoPanOnConnect:xV=!0,autoPanOnNodeDrag:bV=!0,connectionRadius:EV=20,isValidConnection:PV,onError:RV,style:_V,id:GP,nodeDragThreshold:TV,...AV},NV)=>{const qS=GP||"1";return q.createElement("div",{...AV,style:{..._V,...afe},ref:NV,className:bn(["react-flow",i]),"data-testid":"rf__wrapper",id:GP},q.createElement(j8,null,q.createElement(efe,{onInit:l,onMove:u,onMoveStart:h,onMoveEnd:p,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:S,onNodeMouseMove:C,onNodeMouseLeave:x,onNodeContextMenu:E,onNodeDoubleClick:P,nodeTypes:s,edgeTypes:a,connectionLineType:$,connectionLineStyle:U,connectionLineComponent:G,connectionLineContainerStyle:Y,selectionKeyCode:oe,selectionOnDrag:V,selectionMode:H,deleteKeyCode:J,multiSelectionKeyCode:re,panActivationKeyCode:te,zoomActivationKeyCode:ne,onlyRenderVisibleElements:_e,selectNodesOnDrag:je,defaultViewport:Z,translateExtent:pe,minZoom:X,maxZoom:se,preventScrolling:Ne,zoomOnScroll:zr,zoomOnPinch:gr,zoomOnDoubleClick:Xn,panOnScroll:bt,panOnScrollSpeed:ft,panOnScrollMode:Zn,panOnDrag:er,onPaneClick:fe,onPaneMouseEnter:Pe,onPaneMouseMove:Oe,onPaneMouseLeave:ct,onPaneScroll:Ge,onPaneContextMenu:mt,onSelectionContextMenu:N,onSelectionStart:j,onSelectionEnd:R,onEdgeContextMenu:pn,onEdgeDoubleClick:sa,onEdgeMouseEnter:yu,onEdgeMouseMove:IS,onEdgeMouseLeave:jS,onReconnect:DS??kS,onReconnectStart:LS??MS,onReconnectEnd:zS??OS,reconnectRadius:FS??$S,defaultMarkerColor:Ht,noDragClassName:VS,noWheelClassName:US,noPanClassName:WP,elevateEdgesOnSelect:CV,rfId:qS,disableKeyboardA11y:KP,nodeOrigin:L,nodeExtent:Ze}),q.createElement(Yhe,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:f,onConnectStart:g,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:y,nodesDraggable:qe,nodesConnectable:ht,nodesFocusable:Me,edgesFocusable:K,edgesUpdatable:F,elementsSelectable:Q,elevateNodesOnSelect:wV,minZoom:X,maxZoom:se,nodeExtent:Ze,onNodesChange:kf,onEdgesChange:BS,snapToGrid:he,snapGrid:ue,connectionMode:I,translateExtent:pe,connectOnClick:vV,defaultEdgeOptions:SV,fitView:fV,fitViewOptions:mV,onNodesDelete:z,onEdgesDelete:D,onNodeDragStart:T,onNodeDrag:_,onNodeDragStop:k,onSelectionDrag:b,onSelectionDragStart:M,onSelectionDragStop:A,noPanClassName:WP,nodeOrigin:L,rfId:qS,autoPanOnConnect:xV,autoPanOnNodeDrag:bV,onError:RV,connectionRadius:EV,isValidConnection:PV,nodeDragThreshold:TV}),q.createElement(Qhe,{onSelectionChange:O}),st,q.createElement(Ehe,{proOptions:yV,position:gV}),q.createElement(npe,{rfId:qS,disableKeyboardA11y:KP})))});k8.displayName="ReactFlow";function M8(e){return t=>{const[n,r]=m.useState(t),i=m.useCallback(s=>r(a=>e(s,a)),[]);return[n,r,i]}}const cfe=M8(w8),lfe=M8(vpe),O8=({id:e,x:t,y:n,width:r,height:i,style:s,color:a,strokeColor:o,strokeWidth:c,className:l,borderRadius:u,shapeRendering:h,onClick:p,selected:f})=>{const{background:g,backgroundColor:v}=s||{},w=a||g||v;return q.createElement("rect",{className:bn(["react-flow__minimap-node",{selected:f},l]),x:t,y:n,rx:u,ry:u,width:r,height:i,fill:w,stroke:o,strokeWidth:c,shapeRendering:h,onClick:p?y=>p(y,e):void 0})};O8.displayName="MiniMapNode";var ufe=m.memo(O8);const dfe=e=>e.nodeOrigin,hfe=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Pw=e=>e instanceof Function?e:()=>e;function pfe({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:s=ufe,onClick:a}){const o=Rt(hfe,cn),c=Rt(dfe),l=Pw(t),u=Pw(e),h=Pw(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return q.createElement(q.Fragment,null,o.map(f=>{const{x:g,y:v}=Qa(f,c).positionAbsolute;return q.createElement(s,{key:f.id,x:g,y:v,width:f.width,height:f.height,style:f.style,selected:f.selected,className:h(f),color:l(f),borderRadius:r,strokeColor:u(f),strokeWidth:i,shapeRendering:p,onClick:a,id:f.id})}))}var ffe=m.memo(pfe);const mfe=200,vfe=150,gfe=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?_he(TS(t,e.nodeOrigin),n):n,rfId:e.rfId}},yfe="react-flow__minimap-desc";function D8({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:a=2,nodeComponent:o,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:l="none",maskStrokeWidth:u=1,position:h="bottom-right",onClick:p,onNodeClick:f,pannable:g=!1,zoomable:v=!1,ariaLabel:w="React Flow mini map",inversePan:y=!1,zoomStep:S=10,offsetScale:C=5}){const x=rn(),E=m.useRef(null),{boundingRect:P,viewBB:T,rfId:_}=Rt(gfe,cn),k=(e==null?void 0:e.width)??mfe,z=(e==null?void 0:e.height)??vfe,D=P.width/k,O=P.height/z,M=Math.max(D,O),b=M*k,A=M*z,N=C*M,j=P.x-(b-P.width)/2-N,R=P.y-(A-P.height)/2-N,I=b+N*2,$=A+N*2,U=`${yfe}-${_}`,G=m.useRef(0);G.current=M,m.useEffect(()=>{if(E.current){const oe=Wr(E.current),V=re=>{const{transform:ne,d3Selection:he,d3Zoom:ue}=x.getState();if(re.sourceEvent.type!=="wheel"||!he||!ue)return;const _e=-re.sourceEvent.deltaY*(re.sourceEvent.deltaMode===1?.05:re.sourceEvent.deltaMode?1:.002)*S,je=ne[2]*Math.pow(2,_e);ue.scaleTo(he,je)},H=re=>{const{transform:ne,d3Selection:he,d3Zoom:ue,translateExtent:_e,width:je,height:qe}=x.getState();if(re.sourceEvent.type!=="mousemove"||!he||!ue)return;const ht=G.current*Math.max(1,ne[2])*(y?-1:1),Me={x:ne[0]-re.sourceEvent.movementX*ht,y:ne[1]-re.sourceEvent.movementY*ht},L=[[0,0],[je,qe]],K=Ns.translate(Me.x,Me.y).scale(ne[2]),F=ue.constrain()(K,L,_e);ue.transform(he,F)},te=B6().on("zoom",g?H:null).on("zoom.wheel",v?V:null);return oe.call(te),()=>{oe.on("zoom",null)}}},[g,v,y,S]);const Y=p?oe=>{const V=hi(oe);p(oe,{x:V[0],y:V[1]})}:void 0,J=f?(oe,V)=>{const H=x.getState().nodeInternals.get(V);f(oe,H)}:void 0;return q.createElement(RS,{position:h,style:e,className:bn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},q.createElement("svg",{width:k,height:z,viewBox:`${j} ${R} ${I} ${$}`,role:"img","aria-labelledby":U,ref:E,onClick:Y},w&&q.createElement("title",{id:U},w),q.createElement(ffe,{onClick:J,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:a,nodeComponent:o}),q.createElement("path",{className:"react-flow__minimap-mask",d:`M${j-N},${R-N}h${I+N*2}v${$+N*2}h${-I-N*2}z
        M${T.x},${T.y}h${T.width}v${T.height}h${-T.width}z`,fill:c,fillRule:"evenodd",stroke:l,strokeWidth:u,pointerEvents:"none"})))}D8.displayName="MiniMap";var Sfe=m.memo(D8);function wfe(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},q.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Cfe(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},q.createElement("path",{d:"M0 0h32v4.2H0z"}))}function xfe(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},q.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function bfe(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},q.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Efe(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},q.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Dh=({children:e,className:t,...n})=>q.createElement("button",{type:"button",className:bn(["react-flow__controls-button",t]),...n},e);Dh.displayName="ControlButton";const Pfe=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),L8=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:a,onFitView:o,onInteractiveChange:c,className:l,children:u,position:h="bottom-left"})=>{const p=rn(),[f,g]=m.useState(!1),{isInteractive:v,minZoomReached:w,maxZoomReached:y}=Rt(Pfe,cn),{zoomIn:S,zoomOut:C,fitView:x}=DP();if(m.useEffect(()=>{g(!0)},[]),!f)return null;const E=()=>{S(),s==null||s()},P=()=>{C(),a==null||a()},T=()=>{x(i),o==null||o()},_=()=>{p.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c==null||c(!v)};return q.createElement(RS,{className:bn(["react-flow__controls",l]),position:h,style:e,"data-testid":"rf__controls"},t&&q.createElement(q.Fragment,null,q.createElement(Dh,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},q.createElement(wfe,null)),q.createElement(Dh,{onClick:P,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},q.createElement(Cfe,null))),n&&q.createElement(Dh,{className:"react-flow__controls-fitview",onClick:T,title:"fit view","aria-label":"fit view"},q.createElement(xfe,null)),r&&q.createElement(Dh,{className:"react-flow__controls-interactive",onClick:_,title:"toggle interactivity","aria-label":"toggle interactivity"},v?q.createElement(Efe,null):q.createElement(bfe,null)),u)};L8.displayName="Controls";var Rfe=m.memo(L8),xi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(xi||(xi={}));function _fe({color:e,dimensions:t,lineWidth:n}){return q.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Tfe({color:e,radius:t}){return q.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Afe={[xi.Dots]:"#91919a",[xi.Lines]:"#eee",[xi.Cross]:"#e2e2e2"},Nfe={[xi.Dots]:1,[xi.Lines]:1,[xi.Cross]:6},Ife=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function z8({id:e,variant:t=xi.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:a,style:o,className:c}){const l=m.useRef(null),{transform:u,patternId:h}=Rt(Ife,cn),p=a||Afe[t],f=r||Nfe[t],g=t===xi.Dots,v=t===xi.Cross,w=Array.isArray(n)?n:[n,n],y=[w[0]*u[2]||1,w[1]*u[2]||1],S=f*u[2],C=v?[S,S]:y,x=g?[S/s,S/s]:[C[0]/s,C[1]/s];return q.createElement("svg",{className:bn(["react-flow__background",c]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:l,"data-testid":"rf__background"},q.createElement("pattern",{id:h+e,x:u[0]%y[0],y:u[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`},g?q.createElement(Tfe,{color:p,radius:S/s}):q.createElement(_fe,{dimensions:C,color:p,lineWidth:i})),q.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+e})`}))}z8.displayName="Background";var jfe=m.memo(z8);const kfe=m.memo(({data:e})=>d.jsxs("div",{className:"px-4 py-2 shadow-md rounded-full bg-green-500 text-white min-w-[100px] text-center",children:[d.jsx("div",{className:"font-bold",children:e.label||"開始"}),d.jsx(Qr,{type:"source",position:Ee.Bottom,style:{background:"#555"},isConnectable:!0})]})),Mfe=m.memo(({data:e})=>d.jsxs("div",{className:"px-4 py-2 shadow-md rounded-md bg-blue-100 border border-blue-500 min-w-[150px]",children:[d.jsx("div",{className:"font-bold text-blue-800",children:e.label||"ステップ"}),e.message&&d.jsx("div",{className:"mt-2 text-sm text-gray-700",children:e.message}),d.jsx(Qr,{type:"target",position:Ee.Top,style:{background:"#555"},isConnectable:!0}),d.jsx(Qr,{type:"source",position:Ee.Bottom,style:{background:"#555"},isConnectable:!0})]})),Ofe=m.memo(({data:e})=>d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute",style:{top:"-80px",left:"-80px",width:"160px",height:"160px",transform:"rotate(45deg)",backgroundColor:"#FFF9C4",border:"1px solid #FBC02D",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",zIndex:1}}),d.jsx("div",{className:"relative z-10",style:{width:"140px",height:"140px",display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:"none"},children:d.jsxs("div",{style:{width:"120px",padding:"0 5px",textAlign:"center"},children:[d.jsx("div",{className:"font-bold text-yellow-800",children:e.label||"判断"}),e.message&&d.jsx("div",{className:"mt-2 text-xs text-gray-700",style:{maxHeight:"60px",overflow:"hidden"},children:e.message})]})}),d.jsx("div",{className:"absolute w-4 h-4",style:{top:"-84px",left:"68px"},children:d.jsx(Qr,{type:"target",position:Ee.Top,style:{top:"0px",left:"8px",width:"12px",height:"12px",background:"#555",zIndex:20},isConnectable:!0})}),d.jsx("div",{className:"absolute w-4 h-4",style:{top:"68px",left:"140px"},children:d.jsx(Qr,{type:"source",position:Ee.Right,id:"yes",style:{top:"8px",left:"16px",width:"12px",height:"12px",background:"#4CAF50",zIndex:20},isConnectable:!0})}),d.jsx("div",{className:"absolute w-4 h-4",style:{top:"140px",left:"68px"},children:d.jsx(Qr,{type:"source",position:Ee.Bottom,id:"no",style:{top:"16px",left:"8px",width:"12px",height:"12px",background:"#F44336",zIndex:20},isConnectable:!0})}),d.jsx("div",{className:"absolute w-4 h-4",style:{top:"68px",left:"-4px"},children:d.jsx(Qr,{type:"source",position:Ee.Left,id:"other",style:{top:"8px",left:"0px",width:"12px",height:"12px",background:"#FF9800",zIndex:20},isConnectable:!0})})]})),Dfe=m.memo(({data:e})=>d.jsxs("div",{className:"px-4 py-2 shadow-md rounded-full bg-red-500 text-white min-w-[100px] text-center",children:[d.jsx("div",{className:"font-bold",children:e.label||"終了"}),d.jsx(Qr,{type:"target",position:Ee.Top,style:{background:"#555"},isConnectable:!0})]})),Lfe={start:kfe,step:Mfe,decision:Ofe,end:Dfe},zfe=[{id:"start",type:"start",position:{x:250,y:50},data:{label:"開始"}}],Ffe=[],$fe=({onSave:e,onCancel:t,initialData:n})=>{const{toast:r}=ln();console.log("EmergencyFlowEditor - 受け取った初期データ:",n),console.log("EmergencyFlowEditor - 受け取ったinitialData構造:",{type:typeof n,isNull:n===null,isUndefined:n===void 0,hasNodes:(n==null?void 0:n.nodes)!==void 0,hasEdges:(n==null?void 0:n.edges)!==void 0,nodeCount:Array.isArray(n==null?void 0:n.nodes)?n.nodes.length:0,edgeCount:Array.isArray(n==null?void 0:n.edges)?n.edges.length:0});const[i,s,a]=cfe(zfe),[o,c,l]=lfe(Ffe),[u,h]=m.useState(null),p=(n==null?void 0:n.title)===""?"新規応急処置フロー":(n==null?void 0:n.title)||"新規応急処置フロー",f=(n==null?void 0:n.description)||"",g=(n==null?void 0:n.fileName)||"",[v,w]=m.useState(p),[y,S]=m.useState(f),[C,x]=m.useState(g);m.useEffect(()=>{console.log("★★★ initialData変更を検出:",n),n&&(n.title&&w(n.title),n.description&&S(n.description),n.fileName&&x(n.fileName),n.id&&k(n.id),Array.isArray(n.nodes)&&n.nodes.length>0&&(console.log("★★★ ノードデータを更新:",n.nodes),s(n.nodes)),Array.isArray(n.edges)&&n.edges.length>0&&(console.log("★★★ エッジデータを更新:",n.edges),c(n.edges)))},[n,s,c]);const E=m.useRef(null),[P,T]=m.useState(null),[_,k]=m.useState(()=>n!=null&&n.id?n.id:`flow_${Date.now()}`),z=m.useCallback(j=>{c(R=>X6({...j,animated:!0,type:"smoothstep"},R))},[c]),D=m.useCallback((j,R)=>{h(R)},[]),O=m.useCallback(()=>{h(null)},[]),M=m.useCallback(j=>{if(!P)return;const R={id:`${j}_${Date.now()}`,type:j,position:{x:Math.random()*300+50,y:Math.random()*300+50},data:{label:j==="start"?"開始":j==="end"?"終了":j==="decision"?"判断":"ステップ"}};s(I=>I.concat(R)),h(R)},[P,s]),b=m.useCallback((j,R)=>{u&&(s(I=>I.map($=>$.id===u.id?{...$,data:{...$.data,[j]:R}}:$)),h({...u,data:{...u.data,[j]:R}}))},[u,s]),A=m.useCallback(()=>{if(u){if(u.id==="start"){r({title:"削除できません",description:"開始ノードは削除できません",variant:"destructive"});return}s(j=>j.filter(R=>R.id!==u.id)),c(j=>j.filter(R=>R.source!==u.id&&R.target!==u.id)),h(null)}},[u,s,c,r]),N=m.useCallback(()=>{if(!v.trim()){r({title:"入力エラー",description:"フロータイトルを入力してください",variant:"destructive"});return}if(!i.find($=>$.id==="start")){r({title:"エラー",description:"開始ノードが必要です",variant:"destructive"});return}if(!i.find($=>$.type==="end")){r({title:"エラー",description:"終了ノードが必要です",variant:"destructive"});return}const I={id:_,title:v,description:y,nodes:i,edges:o,edgeLabels:o.reduce(($,U)=>U.label?{...$,[U.id]:U.label}:$,{}),createdAt:new Date().toISOString(),lastModified:new Date().toISOString()};e(I),r({title:"保存しました",description:"フローデータを保存しました"})},[v,y,i,o,_,e,r]);return d.jsx("div",{className:"flex flex-col h-full",children:d.jsxs(pt,{className:"flex-1",children:[d.jsxs(xt,{className:"pb-3",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>{const j={id:_,title:v,description:y,nodes:i,edges:o,edgeLabels:o.reduce((G,Y)=>Y.label?{...G,[Y.id]:Y.label}:G,{})},R=JSON.stringify(j,null,2),I=new Blob([R],{type:"application/json"}),$=URL.createObjectURL(I),U=document.createElement("a");U.href=$,U.download=`${v.replace(/\s+/g,"_")}_${Date.now()}.json`,document.body.appendChild(U),U.click(),URL.revokeObjectURL($),document.body.removeChild(U),r({title:"JSONファイルをダウンロードしました",description:"フローデータをJSONファイルとして保存しました"})},children:[d.jsx(O7,{className:"mr-1 h-4 w-4"}),"JSONダウンロード"]}),d.jsxs(ee,{variant:"outline",size:"sm",onClick:t,children:[d.jsx(_r,{className:"mr-1 h-4 w-4"}),"キャンセル"]}),d.jsxs(ee,{size:"sm",onClick:N,children:[d.jsx(yp,{className:"mr-1 h-4 w-4"}),"保存"]})]}),d.jsxs(Yr,{children:["ドラッグ＆ドロップでフローチャートを作成できます。ノードをクリックして詳細を編集してください。",C&&d.jsxs("div",{className:"mt-2 text-sm font-medium text-blue-600",children:["読込中のファイル: ",C]})]})]}),d.jsxs(St,{className:"flex flex-col lg:flex-row h-[70vh]",children:[d.jsx("div",{className:"flex-1 border rounded-md h-full",style:{height:"80vh",minHeight:"500px"},ref:E,children:d.jsx(zP,{children:d.jsx("div",{style:{width:"100%",height:"100%"},children:d.jsxs(k8,{nodes:i,edges:o,onNodesChange:a,onEdgesChange:l,onConnect:z,onNodeClick:D,onPaneClick:O,connectionMode:Ko.Loose,nodeTypes:Lfe,fitView:!0,onInit:T,children:[d.jsx(jfe,{}),d.jsx(Rfe,{}),d.jsx(Sfe,{}),d.jsx(RS,{position:"top-right",children:d.jsxs("div",{className:"bg-white p-2 rounded-md shadow-md flex flex-col gap-2",children:[d.jsx(ee,{size:"sm",onClick:()=>M("step"),children:"ステップ追加"}),d.jsx(ee,{size:"sm",onClick:()=>M("decision"),children:"判断追加"}),d.jsx(ee,{size:"sm",onClick:()=>M("end"),children:"終了追加"})]})})]})})})}),d.jsxs(pt,{className:"w-full lg:w-96 mt-4 lg:mt-0 lg:ml-4 overflow-auto",children:[d.jsx(xt,{children:d.jsx(At,{children:u?"ノード編集":"フロー情報"})}),d.jsx(St,{children:u?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(Be,{htmlFor:"node-label",children:"ラベル"}),d.jsx(at,{id:"node-label",value:u.data.label||"",onChange:j=>b("label",j.target.value),placeholder:"ノードラベル"})]}),u.type!=="start"&&u.type!=="end"&&d.jsxs("div",{children:[d.jsx(Be,{htmlFor:"node-message",children:"内容"}),d.jsx(Pr,{id:"node-message",value:u.data.message||"",onChange:j=>b("message",j.target.value),placeholder:"ステップの内容",rows:4})]}),u.type!=="start"&&u.type!=="end"&&u.data.message&&d.jsxs("div",{className:"mt-4 border rounded-lg p-3 bg-slate-50",children:[d.jsx("div",{className:"text-xs text-blue-600 mb-2",children:"プレビュー（リアルタイム更新）"}),d.jsx("div",{className:"whitespace-pre-line text-gray-700",children:u.data.message})]}),u.id!=="start"&&d.jsxs(ee,{variant:"destructive",size:"sm",onClick:A,children:[d.jsx(_9,{className:"mr-1 h-4 w-4"}),"ノードを削除"]})]}):d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(Be,{htmlFor:"flow-title",children:"フロータイトル"}),d.jsx(at,{id:"flow-title",value:v,onChange:j=>w(j.target.value),placeholder:"フローのタイトルを入力"})]}),d.jsxs("div",{children:[d.jsx(Be,{htmlFor:"flow-description",children:"説明"}),d.jsx(Pr,{id:"flow-description",value:y,onChange:j=>S(j.target.value),placeholder:"フローの説明を入力",rows:4})]}),d.jsxs("div",{className:"my-4",children:[d.jsx("h3",{className:"text-sm font-medium mb-2",children:"フロー情報"}),d.jsx("div",{className:"bg-gray-100 p-2 rounded text-sm",children:d.jsxs("p",{children:[d.jsx("span",{className:"font-medium",children:"ID:"})," ",_]})})]}),d.jsxs("div",{className:"mt-4 border rounded-lg p-3 bg-slate-50",children:[d.jsx("div",{className:"text-xs text-blue-600 mb-2",children:"プレビュー（リアルタイム更新）"}),d.jsx("h3",{className:"font-bold mb-1",children:v||"(タイトル未設定)"}),d.jsx("p",{className:"whitespace-pre-line text-gray-700 text-sm",children:y||"(説明はありません)"})]})]})})]})]})]})})},Bfe=()=>{const{toast:e}=ln(),t=m.useRef(null),[n,r]=m.useState("flowEditor"),[i,s]=m.useState(null),[a,o]=m.useState(0),[c,l]=m.useState(!1),[u,h]=m.useState(!1),[p,f]=m.useState(""),[g,v]=m.useState(null),[w,y]=m.useState(!1),[S,C]=m.useState(null),[x,E]=m.useState([]),[P,T]=m.useState(!1),_=async()=>{try{T(!0),console.log("応急処置データ一覧の取得を開始します");const j=new Date().getTime(),R=await fetch(`/api/emergency-flow/list?t=${j}`);if(!R.ok)throw console.error(`応急処置データ一覧の取得に失敗: ${R.status} ${R.statusText}`),new Error("応急処置データ一覧の取得に失敗しました");const I=await R.json();if(console.log("取得したフロー一覧データ:",I),!Array.isArray(I)){console.warn("応急処置データ一覧が配列形式ではありません。空の配列を使用します。"),E([]);return}E(I)}catch(j){console.error("フロー一覧取得エラー:",j),e({title:"エラー",description:"フロー一覧の取得に失敗しました",variant:"destructive"})}finally{T(!1)}};m.useEffect(()=>{_()},[]);const k=j=>{const R=j.target.files;if(R&&R.length>0){const I=R[0];if(s(I),I.name.toLowerCase().endsWith(".json")){const $=new FileReader;$.onload=U=>{var G;try{const Y=JSON.parse((G=U.target)==null?void 0:G.result);Y.fileName=I.name,f(I.name);const J=A(Y);console.log("ファイル選択から読み込んだフローデータ:",J),v(J),r("new"),e({title:"JSONファイル読み込み完了",description:"フローデータをエディタで編集できます"})}catch(Y){console.error("JSONパースエラー:",Y),e({title:"エラー",description:"JSONファイルの解析に失敗しました",variant:"destructive"})}},$.readAsText(I)}}},z=async j=>{try{console.log("保存するフローデータ:",j);const R=await fetch("/api/emergency-flow/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!R.ok)throw new Error("フローの保存に失敗しました");const I=await R.json();if(I.success)e({title:"保存成功",description:"応急処置フローが保存されました"}),_(),v({title:"",description:"",fileName:"",nodes:[{id:"start",type:"start",position:{x:250,y:50},data:{label:"開始"}}],edges:[]}),f(""),r("file");else throw new Error(I.error||"フローの保存に失敗しました")}catch(R){console.error("保存エラー:",R),e({title:"エラー",description:R instanceof Error?R.message:"フローの保存に失敗しました",variant:"destructive"})}},D=()=>{v({title:"",description:"",fileName:"",nodes:[{id:"start",type:"start",position:{x:250,y:50},data:{label:"開始"}}],edges:[]}),f(""),r("file"),e({title:"編集キャンセル",description:"フローの編集をキャンセルしました"})},O=j=>{const R=[],I=[];let $=250,U=50;const G=150,Y=250;R.push({id:"start",type:"start",position:{x:$,y:U},data:{label:"開始"}}),U+=G;const J={};if(j.slides&&j.slides.length>0){const oe=j.slides.length;j.slides.forEach((H,te)=>{let re=te===oe-1?"end":"step";const ne=H.タイトル||"";(ne.includes("判断")||ne.includes("選択")||ne.includes("チェック"))&&(re="decision");const he=`slide_${te+1}`,ue={id:he,type:re,position:{x:$,y:U},data:{label:H.タイトル||`スライド ${te+1}`,message:Array.isArray(H.本文)?H.本文.join(`
`):H.本文||""}};if(R.push(ue),J[he]=R.length-1,te===0)I.push({id:`edge-start-${he}`,source:"start",target:he,animated:!0,type:"smoothstep"});else{const _e=`slide_${te}`;I.push({id:`edge-${_e}-${he}`,source:_e,target:he,animated:!0,type:"smoothstep"})}U+=G}),(()=>{const H=[];R.forEach(te=>{te.id!=="start"&&H.push(te)}),H.forEach((te,re)=>{const ne=50+(re+1)*G;te.position.y=ne})})()}else j.steps&&j.steps.length>0&&(j.steps.forEach((V,H)=>{let te="step";V.id==="end"||V.id.includes("end")||!V.options||V.options.length===0?te="end":V.options&&V.options.length>1&&(te="decision");const re={id:V.id,type:te,position:{x:$,y:U},data:{label:V.title||`ステップ ${H+1}`,message:V.message||""}};R.push(re),J[V.id]=R.length-1,H===0&&I.push({id:`edge-start-${V.id}`,source:"start",target:V.id,animated:!0,type:"smoothstep"}),U+=G}),j.steps.forEach(V=>{V.options&&V.options.length>0&&(V.options.length>1?V.options.forEach((H,te)=>{if(H.next&&J[H.next]!==void 0){let re=null;H.text,te===0?re="yes":te===1?re="no":re="other",I.push({id:`edge-${V.id}-${H.next}-${te}`,source:V.id,target:H.next,sourceHandle:re,animated:!0,type:"smoothstep"})}}):V.options[0]&&V.options[0].next&&I.push({id:`edge-${V.id}-${V.options[0].next}`,source:V.id,target:V.options[0].next,animated:!0,type:"smoothstep"}))}),(()=>{const V={},H=(re,ne=0,he=new Set)=>{if(he.has(re))return;he.add(re),V[re]=Math.max(ne,V[re]||0),I.filter(_e=>_e.source===re).forEach(_e=>{H(_e.target,ne+1,he)})};H("start"),R.forEach(re=>{const ne=V[re.id]||0;re.position.y=ne*G+50});const te={};Object.entries(V).forEach(([re,ne])=>{te[ne]||(te[ne]=[]),te[ne].push(re)}),Object.entries(te).forEach(([re,ne])=>{const he=ne.length;if(he>1){const ue=(he-1)*Y,_e=$-ue/2;ne.forEach((je,qe)=>{const ht=R.find(Me=>Me.id===je);ht&&(ht.position.x=_e+qe*Y)})}})})());return console.log("生成されたノード:",R),console.log("生成されたエッジ:",I),{generatedNodes:R,generatedEdges:I}},M=()=>{v({title:"新規応急処置フロー",description:"",fileName:"",nodes:[{id:"start",type:"start",position:{x:250,y:50},data:{label:"開始"}}],edges:[]}),f(""),r("new"),e({title:"新規作成",description:"新しいフローを作成できます"})},b=j=>{C(j),y(!0)},A=j=>{var I,$;let R;if(console.log("processFlowData - 入力データ:",j),!j)return console.error("processFlowData - 無効な入力データ:",j),{title:"無効なデータ",description:"データが正しく読み込めませんでした",nodes:[{id:"start",type:"start",position:{x:250,y:50},data:{label:"開始"}}],edges:[]};if(j.slides&&j.slides.length>0){const{generatedNodes:U,generatedEdges:G}=O(j);R={...j,title:((I=j.metadata)==null?void 0:I.タイトル)||j.title||"無題のフロー",description:(($=j.metadata)==null?void 0:$.説明)||j.description||"",nodes:U,edges:G},console.log("スライドデータからノードを生成:",R)}else if(j.steps&&j.steps.length>0){const{generatedNodes:U,generatedEdges:G}=O(j);R={...j,nodes:U,edges:G},console.log("トラブルシューティングデータからノードを生成:",R)}else if(j.nodes&&j.nodes.length>0){let U=j.nodes||[],G=j.edges||[];U=U.map(Y=>!Y.type&&Y.id?Y.id==="start"?{...Y,type:"start"}:Y.id.includes("end")?{...Y,type:"end"}:Y.id.includes("decision")?{...Y,type:"decision"}:{...Y,type:"step"}:Y),R={...j,nodes:U,edges:G},console.log("既存のノードを処理:",R)}else R={...j,nodes:[{id:"start",type:"start",position:{x:250,y:50},data:{label:"開始"}}],edges:[]},console.log("デフォルトノードを作成:",R);return R},N=async()=>{if(S)try{console.log(`応急処置データの削除を開始: ID=${S}`);const R=await(await fetch(`/api/emergency-flow/delete/${S}`,{method:"DELETE"})).json();if(R.success)e({title:"削除成功",description:"キャラクターが削除されました"}),_();else throw new Error(R.error||"削除に失敗しました")}catch(j){console.error("削除エラー:",j),e({title:"エラー",description:j instanceof Error?j.message:"削除に失敗しました",variant:"destructive"})}finally{y(!1),C(null)}};return d.jsxs(d.Fragment,{children:[d.jsxs(pt,{className:"w-full h-screen max-h-[calc(100vh-120px)] overflow-auto",children:[d.jsx(xt,{className:"pb-2 sticky top-0 bg-white z-10",children:d.jsx(Yr,{children:"応急処置データ管理"})}),d.jsx(St,{className:"overflow-y-auto pb-24",children:d.jsxs(_f,{defaultValue:"new",value:n,onValueChange:r,children:[d.jsxs(pu,{className:"grid w-full grid-cols-2",children:[d.jsxs(On,{value:"new",children:[d.jsx(lr,{className:"mr-2 h-4 w-4"}),"新規作成"]}),d.jsxs(On,{value:"file",children:[d.jsx(NR,{className:"mr-2 h-4 w-4"}),"ファイル編集"]})]}),d.jsx("input",{type:"file",ref:t,onChange:k,accept:".json",className:"hidden"}),d.jsx(Dn,{value:"new",className:"h-full",children:d.jsx($fe,{onSave:z,onCancel:D,initialData:g?{...g,id:g.id||void 0,title:g.title||"新規応急処置フロー",description:g.description||"",fileName:p||g.fileName||"",nodes:Array.isArray(g.nodes)?g.nodes:[],edges:Array.isArray(g.edges)?g.edges:[]}:{id:`flow_${Date.now()}`,title:"新規応急処置フロー",description:"",fileName:"",nodes:[{id:"start",type:"start",position:{x:250,y:50},data:{label:"開始"}}],edges:[]}})}),d.jsx(Dn,{value:"file",className:"h-full",children:d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{className:"mt-2",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h3",{className:"text-lg font-medium",children:"応急処置フロー一覧"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(ee,{variant:"outline",size:"sm",onClick:_,disabled:P,children:[d.jsx(FC,{className:`mr-2 h-4 w-4 ${P?"animate-spin":""}`}),"更新"]}),d.jsxs(ee,{variant:"default",size:"sm",onClick:M,children:[d.jsx(lr,{className:"mr-2 h-4 w-4"}),"新規作成"]})]})]}),P?d.jsxs("div",{className:"py-8 text-center text-gray-500 flex flex-col items-center",children:[d.jsx(FC,{className:"h-8 w-8 animate-spin mb-2 text-blue-500"}),d.jsx("p",{children:"フローデータを読込中..."})]}):x.length===0?d.jsx("div",{className:"py-12 text-center border border-dashed rounded-lg",children:d.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[d.jsx(NR,{className:"h-12 w-12 text-gray-400"}),d.jsx("h3",{className:"text-lg font-medium text-gray-600",children:"保存済みのデータはありません"}),d.jsx("p",{className:"text-sm text-gray-500",children:"新規フローを作成するか、右上の「新規作成」ボタンをクリックしてください"}),d.jsxs(ee,{variant:"outline",size:"sm",className:"mt-2",onClick:M,children:[d.jsx(lr,{className:"mr-2 h-4 w-4"}),"新規フロー作成"]})]})}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(j=>d.jsxs(pt,{className:"overflow-hidden border hover:border-blue-300 hover:shadow-md transition-all",children:[d.jsxs(xt,{className:"p-4 pb-2",children:[d.jsx(At,{className:"text-md",children:j.title}),d.jsx(Yr,{className:"text-xs",children:j.createdAt?`作成日: ${new Date(j.createdAt).toLocaleString()}`:"作成日不明"})]}),d.jsx(St,{className:"p-4 pt-2",children:d.jsxs("div",{className:"flex justify-between gap-2",children:[d.jsxs("div",{children:[d.jsx(Wl,{variant:j.source==="troubleshooting"?"secondary":"outline",className:"mr-2",children:j.fileName?j.fileName.split(".")[0]:"デフォルト"}),d.jsx(Wl,{variant:"outline",className:"text-xs",children:j.source==="troubleshooting"?"トラブルシューティング":"フロー"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>{if(console.log("編集ボタンが押されました。対象フロー:",j),j.id)console.log(`トラブルシューティングID: ${j.id}を読み込み中...`),r("new"),fetch(`/api/troubleshooting/detail/${j.id.replace("ts_","")}`).then(R=>{if(!R.ok)throw new Error(`APIエラー: ${R.status}`);return R.json()}).then(R=>{console.log("★★★ トラブルシューティングデータを取得:",R);const I=[{id:"start",type:"start",position:{x:250,y:50},data:{label:"開始"}}];R.steps&&R.steps.length>0?R.steps.forEach((G,Y)=>{I.push({id:`step_${Y+1}`,type:"step",position:{x:250,y:150+Y*100},data:{label:`ステップ ${Y+1}: ${G.title||"手順"}`,message:G.content||"詳細なし"}})}):I.push({id:"step_1",type:"step",position:{x:250,y:150},data:{label:`${j.title||"ステップ"} 1`,message:`${j.fileName||"不明"} のデータです。内容を編集してください。`}}),I.push({id:"end",type:"end",position:{x:250,y:250+(I.length-2)*100},data:{label:"終了"}});const $=[];for(let G=0;G<I.length-1;G++)$.push({id:`edge-${I[G].id}-${I[G+1].id}`,source:I[G].id,target:I[G+1].id,animated:!0,type:"smoothstep"});const U={id:j.id,title:R.title||j.title||"エラー対応フロー",description:R.description||j.description||"",fileName:j.fileName||"troubleshooting.json",nodes:I,edges:$};console.log("★★★ 生成したフローデータ:",U),v(U),f(j.fileName||"troubleshooting.json"),e({title:"データ読込み完了",description:`${j.title} のフローを読み込みました`})}).catch(R=>{console.error("トラブルシューティングデータの取得エラー:",R);const I={id:j.id||`flow_${Date.now()}`,title:j.title||"フローデータ",description:"APIからデータを取得できませんでした。",fileName:j.fileName||"error.json",nodes:[{id:"start",type:"start",position:{x:250,y:50},data:{label:"開始"}},{id:"step_1",type:"step",position:{x:250,y:150},data:{label:`エラー: ${j.title}`,message:`データの取得に失敗しました。
エラー: ${R.message}`}},{id:"end",type:"end",position:{x:250,y:250},data:{label:"終了"}}],edges:[{id:"edge-start-step_1",source:"start",target:"step_1",animated:!0,type:"smoothstep"},{id:"edge-step_1-end",source:"step_1",target:"end",animated:!0,type:"smoothstep"}]};v(I),f(j.fileName||"error.json"),e({title:"データ取得エラー",description:"APIからデータを取得できませんでした。空のフローを初期化します。",variant:"destructive"})});else{r("new");const R={id:`flow_${Date.now()}`,title:j.title||"新規フロー",description:j.description||"",fileName:j.fileName||"new.json",nodes:[{id:"start",type:"start",position:{x:250,y:50},data:{label:"開始"}},{id:"step_1",type:"step",position:{x:250,y:150},data:{label:`${j.title||"ステップ"} 1`,message:`この内容は編集できます。

${j.fileName||"unknown"} ファイルのデータです。`}},{id:"end",type:"end",position:{x:250,y:250},data:{label:"終了"}}],edges:[{id:"edge-start-step_1",source:"start",target:"step_1",animated:!0,type:"smoothstep"},{id:"edge-step_1-end",source:"step_1",target:"end",animated:!0,type:"smoothstep"}]};console.log("★★★ データを直接設定します:",R),v(R),f(j.fileName||"new.json"),e({title:"新規データ作成",description:"新しいフローを初期化しました"})}},children:[d.jsx(o9,{className:"mr-2 h-3 w-3"}),"編集"]}),d.jsxs(ee,{variant:"destructive",size:"sm",onClick:()=>b(j.id),children:[d.jsx(Ds,{className:"mr-2 h-3 w-3"}),"削除"]})]})]})})]},j.id))})]})})})]})})]}),d.jsx(gce,{open:w,onOpenChange:y,children:d.jsxs(n6,{children:[d.jsxs(r6,{children:[d.jsx(s6,{children:"キャラクターを削除しますか？"}),d.jsx(o6,{children:"このキャラクターを削除すると、すべての関連データが失われます。この操作は元に戻すことができません。"})]}),d.jsxs(i6,{children:[d.jsx(c6,{onClick:()=>y(!1),children:"キャンセル"}),d.jsxs(a6,{onClick:N,className:"bg-red-600 hover:bg-red-700",children:[d.jsx(Ds,{className:"mr-2 h-4 w-4"}),"削除する"]})]})]})})]})},Vfe=({onKeywordClick:e})=>{const[t,n]=q.useState(""),r=i=>{i.preventDefault(),t.trim()&&(e(t),n(""))};return d.jsxs(pt,{className:"w-full",children:[d.jsx(xt,{className:"pb-2",children:d.jsxs(At,{className:"text-md flex items-center",children:[d.jsx(rE,{className:"h-4 w-4 mr-2 text-gray-500"}),d.jsx("span",{children:"検索"})]})}),d.jsx(St,{children:d.jsxs("form",{onSubmit:r,className:"flex items-center space-x-2",children:[d.jsx("input",{type:"text",className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",placeholder:"キーワードを入力...",value:t,onChange:i=>n(i.target.value)}),d.jsx(ee,{type:"submit",size:"sm",children:"検索"})]})})]})};var F8={exports:{}},Ufe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qfe=Ufe,Hfe=qfe;function $8(){}function B8(){}B8.resetWarningCache=$8;var Wfe=function(){function e(r,i,s,a,o,c){if(c!==Hfe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:B8,resetWarningCache:$8};return n.PropTypes=n,n};F8.exports=Wfe();var Kfe=F8.exports;const It=fc(Kfe);function Gfe(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var V8=m,Qfe=Gfe(V8);function iI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jfe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Yfe=!!(typeof window<"u"&&window.document&&window.document.createElement);function Zfe(e,t,n){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var a=[],o;function c(){o=e(a.map(function(u){return u.props})),l.canUseDOM?t(o):n&&(o=n(o))}var l=function(u){Jfe(h,u);function h(){return u.apply(this,arguments)||this}h.peek=function(){return o},h.rewind=function(){if(h.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var g=o;return o=void 0,a=[],g};var p=h.prototype;return p.UNSAFE_componentWillMount=function(){a.push(this),c()},p.componentDidUpdate=function(){c()},p.componentWillUnmount=function(){var g=a.indexOf(this);a.splice(g,1),c()},p.render=function(){return Qfe.createElement(s,this.props)},h}(V8.PureComponent);return iI(l,"displayName","SideEffect("+r(s)+")"),iI(l,"canUseDOM",Yfe),l}}var Xfe=Zfe;const eme=fc(Xfe);var tme=typeof Element<"u",nme=typeof Map=="function",rme=typeof Set=="function",ime=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Jm(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Jm(e[r],t[r]))return!1;return!0}var s;if(nme&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;for(s=e.entries();!(r=s.next()).done;)if(!Jm(r.value[1],t.get(r.value[0])))return!1;return!0}if(rme&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(ime&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(tme&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!Jm(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var sme=function(t,n){try{return Jm(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const ome=fc(sme);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var sI=Object.getOwnPropertySymbols,ame=Object.prototype.hasOwnProperty,cme=Object.prototype.propertyIsEnumerable;function lme(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ume(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var dme=ume()?Object.assign:function(e,t){for(var n,r=lme(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var a in n)ame.call(n,a)&&(r[a]=n[a]);if(sI){i=sI(n);for(var o=0;o<i.length;o++)cme.call(n,i[o])&&(r[i[o]]=n[i[o]])}}return r};const hme=fc(dme);var Ja={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Ue={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Ue).map(function(e){return Ue[e]});var jt={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},pg={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Gp={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},pme=Object.keys(pg).reduce(function(e,t){return e[pg[t]]=t,e},{}),fme=[Ue.NOSCRIPT,Ue.SCRIPT,Ue.STYLE],yi="data-react-helmet",mme=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vme=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},gme=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yme=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},oI=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Sme=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Hx=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},wme=function(t){var n=pl(t,Ue.TITLE),r=pl(t,Gp.TITLE_TEMPLATE);if(r&&n)return r.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var i=pl(t,Gp.DEFAULT_TITLE);return n||i||void 0},Cme=function(t){return pl(t,Gp.ON_CHANGE_CLIENT_STATE)||function(){}},Rw=function(t,n){return n.filter(function(r){return typeof r[t]<"u"}).map(function(r){return r[t]}).reduce(function(r,i){return tr({},r,i)},{})},xme=function(t,n){return n.filter(function(r){return typeof r[Ue.BASE]<"u"}).map(function(r){return r[Ue.BASE]}).reverse().reduce(function(r,i){if(!r.length)for(var s=Object.keys(i),a=0;a<s.length;a++){var o=s[a],c=o.toLowerCase();if(t.indexOf(c)!==-1&&i[c])return r.concat(i)}return r},[])},Ch=function(t,n,r){var i={};return r.filter(function(s){return Array.isArray(s[t])?!0:(typeof s[t]<"u"&&Rme("Helmet: "+t+' should be of type "Array". Instead found type "'+mme(s[t])+'"'),!1)}).map(function(s){return s[t]}).reverse().reduce(function(s,a){var o={};a.filter(function(p){for(var f=void 0,g=Object.keys(p),v=0;v<g.length;v++){var w=g[v],y=w.toLowerCase();n.indexOf(y)!==-1&&!(f===jt.REL&&p[f].toLowerCase()==="canonical")&&!(y===jt.REL&&p[y].toLowerCase()==="stylesheet")&&(f=y),n.indexOf(w)!==-1&&(w===jt.INNER_HTML||w===jt.CSS_TEXT||w===jt.ITEM_PROP)&&(f=w)}if(!f||!p[f])return!1;var S=p[f].toLowerCase();return i[f]||(i[f]={}),o[f]||(o[f]={}),i[f][S]?!1:(o[f][S]=!0,!0)}).reverse().forEach(function(p){return s.push(p)});for(var c=Object.keys(o),l=0;l<c.length;l++){var u=c[l],h=hme({},i[u],o[u]);i[u]=h}return s},[]).reverse()},pl=function(t,n){for(var r=t.length-1;r>=0;r--){var i=t[r];if(i.hasOwnProperty(n))return i[n]}return null},bme=function(t){return{baseTag:xme([jt.HREF,jt.TARGET],t),bodyAttributes:Rw(Ja.BODY,t),defer:pl(t,Gp.DEFER),encode:pl(t,Gp.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Rw(Ja.HTML,t),linkTags:Ch(Ue.LINK,[jt.REL,jt.HREF],t),metaTags:Ch(Ue.META,[jt.NAME,jt.CHARSET,jt.HTTPEQUIV,jt.PROPERTY,jt.ITEM_PROP],t),noscriptTags:Ch(Ue.NOSCRIPT,[jt.INNER_HTML],t),onChangeClientState:Cme(t),scriptTags:Ch(Ue.SCRIPT,[jt.SRC,jt.INNER_HTML],t),styleTags:Ch(Ue.STYLE,[jt.CSS_TEXT],t),title:wme(t),titleAttributes:Rw(Ja.TITLE,t)}},Wx=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout(function(){Wx(t)},0)}}(),aI=function(t){return clearTimeout(t)},Eme=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Wx:global.requestAnimationFrame||Wx,Pme=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||aI:global.cancelAnimationFrame||aI,Rme=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},xh=null,_me=function(t){xh&&Pme(xh),t.defer?xh=Eme(function(){cI(t,function(){xh=null})}):(cI(t),xh=null)},cI=function(t,n){var r=t.baseTag,i=t.bodyAttributes,s=t.htmlAttributes,a=t.linkTags,o=t.metaTags,c=t.noscriptTags,l=t.onChangeClientState,u=t.scriptTags,h=t.styleTags,p=t.title,f=t.titleAttributes;Kx(Ue.BODY,i),Kx(Ue.HTML,s),Tme(p,f);var g={baseTag:Oc(Ue.BASE,r),linkTags:Oc(Ue.LINK,a),metaTags:Oc(Ue.META,o),noscriptTags:Oc(Ue.NOSCRIPT,c),scriptTags:Oc(Ue.SCRIPT,u),styleTags:Oc(Ue.STYLE,h)},v={},w={};Object.keys(g).forEach(function(y){var S=g[y],C=S.newTags,x=S.oldTags;C.length&&(v[y]=C),x.length&&(w[y]=g[y].oldTags)}),n&&n(),l(t,v,w)},U8=function(t){return Array.isArray(t)?t.join(""):t},Tme=function(t,n){typeof t<"u"&&document.title!==t&&(document.title=U8(t)),Kx(Ue.TITLE,n)},Kx=function(t,n){var r=document.getElementsByTagName(t)[0];if(r){for(var i=r.getAttribute(yi),s=i?i.split(","):[],a=[].concat(s),o=Object.keys(n),c=0;c<o.length;c++){var l=o[c],u=n[l]||"";r.getAttribute(l)!==u&&r.setAttribute(l,u),s.indexOf(l)===-1&&s.push(l);var h=a.indexOf(l);h!==-1&&a.splice(h,1)}for(var p=a.length-1;p>=0;p--)r.removeAttribute(a[p]);s.length===a.length?r.removeAttribute(yi):r.getAttribute(yi)!==o.join(",")&&r.setAttribute(yi,o.join(","))}},Oc=function(t,n){var r=document.head||document.querySelector(Ue.HEAD),i=r.querySelectorAll(t+"["+yi+"]"),s=Array.prototype.slice.call(i),a=[],o=void 0;return n&&n.length&&n.forEach(function(c){var l=document.createElement(t);for(var u in c)if(c.hasOwnProperty(u))if(u===jt.INNER_HTML)l.innerHTML=c.innerHTML;else if(u===jt.CSS_TEXT)l.styleSheet?l.styleSheet.cssText=c.cssText:l.appendChild(document.createTextNode(c.cssText));else{var h=typeof c[u]>"u"?"":c[u];l.setAttribute(u,h)}l.setAttribute(yi,"true"),s.some(function(p,f){return o=f,l.isEqualNode(p)})?s.splice(o,1):a.push(l)}),s.forEach(function(c){return c.parentNode.removeChild(c)}),a.forEach(function(c){return r.appendChild(c)}),{oldTags:s,newTags:a}},q8=function(t){return Object.keys(t).reduce(function(n,r){var i=typeof t[r]<"u"?r+'="'+t[r]+'"':""+r;return n?n+" "+i:i},"")},Ame=function(t,n,r,i){var s=q8(r),a=U8(n);return s?"<"+t+" "+yi+'="true" '+s+">"+Hx(a,i)+"</"+t+">":"<"+t+" "+yi+'="true">'+Hx(a,i)+"</"+t+">"},Nme=function(t,n,r){return n.reduce(function(i,s){var a=Object.keys(s).filter(function(l){return!(l===jt.INNER_HTML||l===jt.CSS_TEXT)}).reduce(function(l,u){var h=typeof s[u]>"u"?u:u+'="'+Hx(s[u],r)+'"';return l?l+" "+h:h},""),o=s.innerHTML||s.cssText||"",c=fme.indexOf(t)===-1;return i+"<"+t+" "+yi+'="true" '+a+(c?"/>":">"+o+"</"+t+">")},"")},H8=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,i){return r[pg[i]||i]=t[i],r},n)},Ime=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,i){return r[pme[i]||i]=t[i],r},n)},jme=function(t,n,r){var i,s=(i={key:n},i[yi]=!0,i),a=H8(r,s);return[q.createElement(Ue.TITLE,a,n)]},kme=function(t,n){return n.map(function(r,i){var s,a=(s={key:i},s[yi]=!0,s);return Object.keys(r).forEach(function(o){var c=pg[o]||o;if(c===jt.INNER_HTML||c===jt.CSS_TEXT){var l=r.innerHTML||r.cssText;a.dangerouslySetInnerHTML={__html:l}}else a[c]=r[o]}),q.createElement(t,a)})},vs=function(t,n,r){switch(t){case Ue.TITLE:return{toComponent:function(){return jme(t,n.title,n.titleAttributes)},toString:function(){return Ame(t,n.title,n.titleAttributes,r)}};case Ja.BODY:case Ja.HTML:return{toComponent:function(){return H8(n)},toString:function(){return q8(n)}};default:return{toComponent:function(){return kme(t,n)},toString:function(){return Nme(t,n,r)}}}},W8=function(t){var n=t.baseTag,r=t.bodyAttributes,i=t.encode,s=t.htmlAttributes,a=t.linkTags,o=t.metaTags,c=t.noscriptTags,l=t.scriptTags,u=t.styleTags,h=t.title,p=h===void 0?"":h,f=t.titleAttributes;return{base:vs(Ue.BASE,n,i),bodyAttributes:vs(Ja.BODY,r,i),htmlAttributes:vs(Ja.HTML,s,i),link:vs(Ue.LINK,a,i),meta:vs(Ue.META,o,i),noscript:vs(Ue.NOSCRIPT,c,i),script:vs(Ue.SCRIPT,l,i),style:vs(Ue.STYLE,u,i),title:vs(Ue.TITLE,{title:p,titleAttributes:f},i)}},Mme=function(t){var n,r;return r=n=function(i){yme(s,i);function s(){return vme(this,s),Sme(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(o){return!ome(this.props,o)},s.prototype.mapNestedChildrenToProps=function(o,c){if(!c)return null;switch(o.type){case Ue.SCRIPT:case Ue.NOSCRIPT:return{innerHTML:c};case Ue.STYLE:return{cssText:c}}throw new Error("<"+o.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(o){var c,l=o.child,u=o.arrayTypeChildren,h=o.newChildProps,p=o.nestedChildren;return tr({},u,(c={},c[l.type]=[].concat(u[l.type]||[],[tr({},h,this.mapNestedChildrenToProps(l,p))]),c))},s.prototype.mapObjectTypeChildren=function(o){var c,l,u=o.child,h=o.newProps,p=o.newChildProps,f=o.nestedChildren;switch(u.type){case Ue.TITLE:return tr({},h,(c={},c[u.type]=f,c.titleAttributes=tr({},p),c));case Ue.BODY:return tr({},h,{bodyAttributes:tr({},p)});case Ue.HTML:return tr({},h,{htmlAttributes:tr({},p)})}return tr({},h,(l={},l[u.type]=tr({},p),l))},s.prototype.mapArrayTypeChildrenToProps=function(o,c){var l=tr({},c);return Object.keys(o).forEach(function(u){var h;l=tr({},l,(h={},h[u]=o[u],h))}),l},s.prototype.warnOnInvalidChildren=function(o,c){return!0},s.prototype.mapChildrenToProps=function(o,c){var l=this,u={};return q.Children.forEach(o,function(h){if(!(!h||!h.props)){var p=h.props,f=p.children,g=oI(p,["children"]),v=Ime(g);switch(l.warnOnInvalidChildren(h,f),h.type){case Ue.LINK:case Ue.META:case Ue.NOSCRIPT:case Ue.SCRIPT:case Ue.STYLE:u=l.flattenArrayTypeChildren({child:h,arrayTypeChildren:u,newChildProps:v,nestedChildren:f});break;default:c=l.mapObjectTypeChildren({child:h,newProps:c,newChildProps:v,nestedChildren:f});break}}}),c=this.mapArrayTypeChildrenToProps(u,c),c},s.prototype.render=function(){var o=this.props,c=o.children,l=oI(o,["children"]),u=tr({},l);return c&&(u=this.mapChildrenToProps(c,u)),q.createElement(t,u)},gme(s,null,[{key:"canUseDOM",set:function(o){t.canUseDOM=o}}]),s}(q.Component),n.propTypes={base:It.object,bodyAttributes:It.object,children:It.oneOfType([It.arrayOf(It.node),It.node]),defaultTitle:It.string,defer:It.bool,encodeSpecialCharacters:It.bool,htmlAttributes:It.object,link:It.arrayOf(It.object),meta:It.arrayOf(It.object),noscript:It.arrayOf(It.object),onChangeClientState:It.func,script:It.arrayOf(It.object),style:It.arrayOf(It.object),title:It.string,titleAttributes:It.object,titleTemplate:It.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=t.peek,n.rewind=function(){var i=t.rewind();return i||(i=W8({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},r},Ome=function(){return null},Dme=eme(bme,_me,W8)(Ome),fg=Mme(Dme);fg.renderStatic=fg.rewind;const Lme=()=>{const e=f=>new URLSearchParams(window.location.search).get(f),t=e("tab")||"edit",[n,r]=m.useState(t),[i,s]=m.useState(e("guideId")),[a,o]=m.useState(null),[c,l]=m.useState("");m.useEffect(()=>{const f=g=>{const v=g;v.detail&&v.detail.guideId&&(s(v.detail.guideId),r("flow"))};return window.addEventListener("switch-to-flow-tab",f),()=>{window.removeEventListener("switch-to-flow-tab",f)}},[]);const u=f=>{o(f),r("edit")},h=f=>{l(f),console.log(`検索キーワード「${f}」がクリックされました`),p(f)},p=f=>{f.trim()&&(console.log(`検索実行: 「${f}」`),r("edit"),window.dispatchEvent(new CustomEvent("search-emergency-guide",{detail:{keyword:f}})))};return d.jsxs("div",{className:"w-full h-screen overflow-hidden p-4",children:[d.jsx(fg,{children:d.jsx("title",{children:"応急処置フロー生成 | 保守用車支援システム"})}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h1",{className:"text-2xl font-bold text-blue-800 mb-2",children:"応急処置フロー生成"}),d.jsx("div",{className:"mt-4 space-y-2",children:d.jsx(Vfe,{onKeywordClick:h})})]}),d.jsxs(_f,{defaultValue:n,onValueChange:r,className:"w-full h-[calc(100vh-120px)]",children:[d.jsxs(pu,{className:"grid w-full grid-cols-3 mb-8",children:[d.jsx(On,{value:"upload",children:"新規作成（アップロード）"}),d.jsx(On,{value:"edit",children:"テキスト編集"}),d.jsx(On,{value:"flow",children:"キャラクター編集"})]}),d.jsx(Dn,{value:"upload",className:"space-y-4 h-full overflow-auto",children:d.jsx(Uae,{onUploadSuccess:u})}),d.jsx(Dn,{value:"edit",className:"space-y-4 h-full overflow-auto",children:d.jsx(sce,{})}),d.jsx(Dn,{value:"flow",className:"space-y-4 h-full overflow-auto",children:d.jsx(Bfe,{})})]})]})},zme=({steps:e,initialStepId:t="start"})=>{var S,C,x;const[n,r]=m.useState(t),[i,s]=m.useState({}),[a,o]=m.useState([t]),c=e.find(E=>E.id===n),l=()=>{if(c!=null&&c.next){const E=c.next;r(E),o([...a,E])}},u=E=>{r(E),o([...a,E])},h=E=>{const P=`${n}-${E}`;s({...i,[P]:!i[P]})},p=()=>{if(a.length>1){const E=[...a];E.pop();const P=E[E.length-1];r(P),o(E)}},f=()=>{r(t),s({}),o([t])},g=(c==null?void 0:c.checklist)&&c.checklist.length>0,v=(c==null?void 0:c.options)&&c.options.length>0,w=!g||((S=c==null?void 0:c.checklist)==null?void 0:S.every((E,P)=>i[`${n}-${P}`])),y=c==null?void 0:c.end;return c?d.jsxs(pt,{className:"max-w-xl mx-auto shadow-lg",children:[d.jsxs(xt,{className:"bg-blue-50",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(At,{className:"text-lg",children:"トラブルシューティングプレビュー"}),d.jsx(Wl,{variant:"outline",className:"font-mono",children:n})]}),d.jsx(Yr,{children:"現在編集中の内容をリアルタイムでプレビューします。編集内容がすぐに反映されます。"})]}),d.jsx(St,{className:"pt-6 pb-4",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"prose",children:c.message.split(`
`).map((E,P)=>d.jsx("p",{className:P===0?"font-medium text-lg":"text-gray-700",children:E},P))}),g&&d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"text-md font-medium mb-3",children:"確認事項:"}),d.jsx("div",{className:"space-y-2",children:(C=c.checklist)==null?void 0:C.map((E,P)=>d.jsxs("div",{className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-md cursor-pointer",onClick:()=>h(P),children:[d.jsx("div",{className:`w-5 h-5 flex items-center justify-center border rounded-sm 
                      ${i[`${n}-${P}`]?"bg-green-500 border-green-500":"border-gray-300"}`,children:i[`${n}-${P}`]&&d.jsx(tE,{className:"h-4 w-4 text-white"})}),d.jsx("span",{className:i[`${n}-${P}`]?"line-through text-gray-500":"",children:E})]},P))})]}),v&&d.jsx("div",{className:"space-y-2",children:(x=c.options)==null?void 0:x.map((E,P)=>d.jsx(ee,{variant:"outline",className:"w-full justify-start text-left h-auto py-3 px-4",onClick:()=>u(E.next),children:d.jsxs("div",{className:"flex gap-2 items-start",children:[d.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:P+1}),d.jsx("span",{children:E.label})]})},P))}),!v&&!y&&c.next&&d.jsx("div",{className:"pt-4",children:d.jsxs(ee,{className:"w-full",onClick:l,disabled:!w,children:["次へ進む",d.jsx(h7,{className:"ml-2 h-4 w-4"})]})}),y&&d.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[d.jsx("h3",{className:"text-green-800 font-medium mb-2",children:"トラブルシューティングが完了しました"}),d.jsx("p",{className:"text-green-700 text-sm",children:"お疲れ様でした。問題は解決しましたか？"})]}),d.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[d.jsx(ee,{variant:"ghost",size:"sm",onClick:p,disabled:a.length<=1,children:"戻る"}),d.jsx(ee,{variant:"ghost",size:"sm",onClick:f,children:"最初からやり直す"})]})]})})]}):d.jsxs("div",{className:"text-center p-4",children:['ステップ "',n,'" が見つかりません']})};var FP="Collapsible",[Fme,K8]=Ti(FP),[$me,$P]=Fme(FP),G8=m.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:a,...o}=e,[c=!1,l]=ti({prop:r,defaultProp:i,onChange:a});return d.jsx($me,{scope:n,disabled:s,contentId:Xi(),open:c,onOpenToggle:m.useCallback(()=>l(u=>!u),[l]),children:d.jsx(Re.div,{"data-state":VP(c),"data-disabled":s?"":void 0,...o,ref:t})})});G8.displayName=FP;var Q8="CollapsibleTrigger",J8=m.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,i=$P(Q8,n);return d.jsx(Re.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":VP(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:t,onClick:be(e.onClick,i.onOpenToggle)})});J8.displayName=Q8;var BP="CollapsibleContent",Y8=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=$P(BP,e.__scopeCollapsible);return d.jsx(ri,{present:n||i.open,children:({present:s})=>d.jsx(Bme,{...r,ref:t,present:s})})});Y8.displayName=BP;var Bme=m.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=e,a=$P(BP,n),[o,c]=m.useState(r),l=m.useRef(null),u=Qe(t,l),h=m.useRef(0),p=h.current,f=m.useRef(0),g=f.current,v=a.open||o,w=m.useRef(v),y=m.useRef();return m.useEffect(()=>{const S=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(S)},[]),an(()=>{const S=l.current;if(S){y.current=y.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const C=S.getBoundingClientRect();h.current=C.height,f.current=C.width,w.current||(S.style.transitionDuration=y.current.transitionDuration,S.style.animationName=y.current.animationName),c(r)}},[a.open,r]),d.jsx(Re.div,{"data-state":VP(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!v,...s,ref:u,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:v&&i})});function VP(e){return e?"open":"closed"}var Vme=G8,Ume=J8,qme=Y8,Ws="Accordion",Hme=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[UP,Wme,Kme]=of(Ws),[AS,Gge]=Ti(Ws,[Kme,K8]),qP=K8(),Z8=q.forwardRef((e,t)=>{const{type:n,...r}=e,i=r,s=r;return d.jsx(UP.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?d.jsx(Yme,{...s,ref:t}):d.jsx(Jme,{...i,ref:t})})});Z8.displayName=Ws;var[X8,Gme]=AS(Ws),[eV,Qme]=AS(Ws,{collapsible:!1}),Jme=q.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:s=!1,...a}=e,[o,c]=ti({prop:n,defaultProp:r,onChange:i});return d.jsx(X8,{scope:e.__scopeAccordion,value:o?[o]:[],onItemOpen:c,onItemClose:q.useCallback(()=>s&&c(""),[s,c]),children:d.jsx(eV,{scope:e.__scopeAccordion,collapsible:s,children:d.jsx(tV,{...a,ref:t})})})}),Yme=q.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=e,[a=[],o]=ti({prop:n,defaultProp:r,onChange:i}),c=q.useCallback(u=>o((h=[])=>[...h,u]),[o]),l=q.useCallback(u=>o((h=[])=>h.filter(p=>p!==u)),[o]);return d.jsx(X8,{scope:e.__scopeAccordion,value:a,onItemOpen:c,onItemClose:l,children:d.jsx(eV,{scope:e.__scopeAccordion,collapsible:!0,children:d.jsx(tV,{...s,ref:t})})})}),[Zme,NS]=AS(Ws),tV=q.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:s="vertical",...a}=e,o=q.useRef(null),c=Qe(o,t),l=Wme(n),h=hu(i)==="ltr",p=be(e.onKeyDown,f=>{var _;if(!Hme.includes(f.key))return;const g=f.target,v=l().filter(k=>{var z;return!((z=k.ref.current)!=null&&z.disabled)}),w=v.findIndex(k=>k.ref.current===g),y=v.length;if(w===-1)return;f.preventDefault();let S=w;const C=0,x=y-1,E=()=>{S=w+1,S>x&&(S=C)},P=()=>{S=w-1,S<C&&(S=x)};switch(f.key){case"Home":S=C;break;case"End":S=x;break;case"ArrowRight":s==="horizontal"&&(h?E():P());break;case"ArrowDown":s==="vertical"&&E();break;case"ArrowLeft":s==="horizontal"&&(h?P():E());break;case"ArrowUp":s==="vertical"&&P();break}const T=S%y;(_=v[T].ref.current)==null||_.focus()});return d.jsx(Zme,{scope:n,disabled:r,direction:i,orientation:s,children:d.jsx(UP.Slot,{scope:n,children:d.jsx(Re.div,{...a,"data-orientation":s,ref:c,onKeyDown:r?void 0:p})})})}),mg="AccordionItem",[Xme,HP]=AS(mg),nV=q.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...i}=e,s=NS(mg,n),a=Gme(mg,n),o=qP(n),c=Xi(),l=r&&a.value.includes(r)||!1,u=s.disabled||e.disabled;return d.jsx(Xme,{scope:n,open:l,disabled:u,triggerId:c,children:d.jsx(Vme,{"data-orientation":s.orientation,"data-state":cV(l),...o,...i,ref:t,disabled:u,open:l,onOpenChange:h=>{h?a.onItemOpen(r):a.onItemClose(r)}})})});nV.displayName=mg;var rV="AccordionHeader",iV=q.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=NS(Ws,n),s=HP(rV,n);return d.jsx(Re.h3,{"data-orientation":i.orientation,"data-state":cV(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:t})});iV.displayName=rV;var Gx="AccordionTrigger",sV=q.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=NS(Ws,n),s=HP(Gx,n),a=Qme(Gx,n),o=qP(n);return d.jsx(UP.ItemSlot,{scope:n,children:d.jsx(Ume,{"aria-disabled":s.open&&!a.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...o,...r,ref:t})})});sV.displayName=Gx;var oV="AccordionContent",aV=q.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=NS(Ws,n),s=HP(oV,n),a=qP(n);return d.jsx(qme,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...a,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});aV.displayName=oV;function cV(e){return e?"open":"closed"}var eve=Z8,tve=nV,nve=iV,lV=sV,uV=aV;const rve=eve,Ym=m.forwardRef(({className:e,...t},n)=>d.jsx(tve,{ref:n,className:ve("border-b",e),...t}));Ym.displayName="AccordionItem";const Zm=m.forwardRef(({className:e,children:t,...n},r)=>d.jsx(nve,{className:"flex",children:d.jsxs(lV,{ref:r,className:ve("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,d.jsx(nE,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Zm.displayName=lV.displayName;const Xm=m.forwardRef(({className:e,children:t,...n},r)=>d.jsx(uV,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:d.jsx("div",{className:ve("pb-4 pt-0",e),children:t})}));Xm.displayName=uV.displayName;const ive=({id:e,guideId:t,onCancel:n,onSaved:r})=>{var oe;const{toast:i}=ln(),[s,a]=m.useState(!0),[o,c]=m.useState(!1),[l,u]=m.useState(!1),[h,p]=m.useState({added:0,modified:0,deleted:0}),[f,g]=m.useState(null),[v,w]=m.useState(null),[y,S]=m.useState(null),[C,x]=m.useState(""),[E,P]=m.useState(""),[T,_]=m.useState({label:"",next:""}),k=m.useCallback(async()=>{if(!e){a(!1),g(null);const V={id:"",title:"",description:"",trigger:[],steps:[{id:"start",message:"",next:""}]};t&&(V.id=`guide_ts_${t}`,V.title="応急復旧ガイド関連トラブルシューティング",V.description=`応急復旧ガイドID: ${t} に関連するトラブルシューティングフロー`,V.trigger=[`ガイド_${t}`]),w(V);return}try{a(!0);const V=await fetch(`/api/troubleshooting/${e}`);if(!V.ok)throw new Error("トラブルシューティングデータの取得に失敗しました");const H=await V.json();g(H),w(JSON.parse(JSON.stringify(H))),H.steps&&H.steps.length>0&&S(H.steps[0].id)}catch(V){console.error("データ取得エラー:",V),i({title:"エラー",description:"トラブルシューティングデータの取得に失敗しました",variant:"destructive"})}finally{a(!1)}},[e,t,i]);m.useEffect(()=>{k()},[k]);const z=(V,H)=>{v&&w({...v,[V]:H})},D=()=>{!C.trim()||!v||(w({...v,trigger:[...v.trigger,C.trim()]}),x(""))},O=V=>{if(!v)return;const H=[...v.trigger];H.splice(V,1),w({...v,trigger:H})},M=(V,H,te)=>{if(!v)return;const re=v.steps.map(ne=>ne.id===V?{...ne,[H]:te}:ne);w({...v,steps:re})},b=()=>{if(!v)return;const V=`step_${Date.now()}`,H={id:V,message:"",next:""};w({...v,steps:[...v.steps,H]}),S(V)},A=V=>{var re;if(!v)return;const H=v.steps.filter(ne=>ne.id!==V);if(V==="start"||v.steps.length<=1){i({title:"削除できません",description:"最初のステップは削除できません。少なくとも1つのステップが必要です。",variant:"destructive"});return}w({...v,steps:H}),y===V&&S(((re=H[0])==null?void 0:re.id)||null);const te=H.map(ne=>{if(ne.next===V)return{...ne,next:""};if(ne.options){const he=ne.options.map(ue=>ue.next===V?{...ue,next:""}:ue);return{...ne,options:he}}return ne});w({...v,steps:te})},N=V=>{if(!E.trim()||!v)return;const H=v.steps.map(te=>{if(te.id===V){const re=te.checklist||[];return{...te,checklist:[...re,E.trim()]}}return te});w({...v,steps:H}),P("")},j=(V,H)=>{if(!v)return;const te=v.steps.map(re=>{if(re.id===V&&re.checklist){const ne=[...re.checklist];return ne.splice(H,1),{...re,checklist:ne}}return re});w({...v,steps:te})},R=V=>{if(!T.label.trim()||!T.next.trim()||!v)return;const H=v.steps.map(te=>{if(te.id===V){const re=te.options||[];return{...te,options:[...re,{...T}]}}return te});w({...v,steps:H}),_({label:"",next:""})},I=(V,H)=>{if(!v)return;const te=v.steps.map(re=>{if(re.id===V&&re.options){const ne=[...re.options];return ne.splice(H,1),{...re,options:ne}}return re});w({...v,steps:te})},$=()=>!v||!y?null:v.steps.find(V=>V.id===y)||null,U=m.useCallback(()=>{if(!f||!v)return{added:0,modified:0,deleted:0};let V=0,H=0,te=0;f.title!==v.title&&H++,f.description!==v.description&&H++,JSON.stringify(f.trigger)!==JSON.stringify(v.trigger)&&(f.trigger.length<v.trigger.length?V+=v.trigger.length-f.trigger.length:f.trigger.length>v.trigger.length?te+=f.trigger.length-v.trigger.length:H++),f.steps.length>v.steps.length?te+=f.steps.length-v.steps.length:f.steps.length<v.steps.length&&(V+=v.steps.length-f.steps.length);const re=f.steps.map(ue=>ue.id),ne=v.steps.map(ue=>ue.id);return ne.forEach(ue=>{re.includes(ue)||V++}),re.forEach(ue=>{ne.includes(ue)||te++}),re.filter(ue=>ne.includes(ue)).forEach(ue=>{const _e=f.steps.find(qe=>qe.id===ue),je=v.steps.find(qe=>qe.id===ue);_e&&je&&(_e.message!==je.message&&H++,_e.next!==je.next&&H++,JSON.stringify(_e.checklist)!==JSON.stringify(je.checklist)&&H++,JSON.stringify(_e.options)!==JSON.stringify(je.options)&&H++)}),{added:V,modified:H,deleted:te}},[f,v]),G=async()=>{if(v)try{c(!0);const H=!e||e===""?"/api/troubleshooting/create":`/api/troubleshooting/update/${e}`;if(!(await fetch(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok)throw new Error("データの保存に失敗しました");i({title:"保存完了",description:"トラブルシューティングデータを保存しました"}),r()}catch(V){console.error("保存エラー:",V),i({title:"エラー",description:"データの保存に失敗しました",variant:"destructive"})}finally{c(!1),u(!1)}},Y=()=>{if(!v)return;if(!v.id.trim()){i({title:"入力エラー",description:"IDは必須です",variant:"destructive"});return}if(!v.title.trim()){i({title:"入力エラー",description:"タイトルは必須です",variant:"destructive"});return}if(!e||e===""){G();return}const V=U();p(V),V.added>0||V.modified>0||V.deleted>0?u(!0):(i({title:"変更なし",description:"変更点はありませんでした"}),n())};if(s)return d.jsxs("div",{className:"flex justify-center items-center py-12",children:[d.jsx(Wn,{className:"h-8 w-8 animate-spin text-indigo-500"}),d.jsx("span",{className:"ml-2",children:"データを読み込み中..."})]});if(!v)return d.jsx("div",{className:"text-center py-12 text-red-500",children:"データの読み込みに失敗しました"});const J=$();return d.jsxs("div",{className:"space-y-6",children:[d.jsxs(pt,{children:[d.jsxs(xt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsxs("div",{children:[d.jsx(At,{className:"text-xl",children:"フロー編集"}),d.jsx(Yr,{children:e?"トラブルシューティングフローを編集":"新規トラブルシューティングフローを作成"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(ee,{variant:"outline",onClick:n,disabled:o,children:[d.jsx(_r,{className:"h-4 w-4 mr-1"}),"キャンセル"]}),d.jsx(ee,{variant:"default",onClick:Y,disabled:o,children:o?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"h-4 w-4 mr-1 animate-spin"}),"保存中..."]}):d.jsxs(d.Fragment,{children:[d.jsx(yp,{className:"h-4 w-4 mr-1"}),"保存"]})})]})]}),d.jsx(St,{children:d.jsxs(_f,{defaultValue:"basic",className:"w-full",children:[d.jsxs(pu,{className:"grid w-full grid-cols-4 mb-4",children:[d.jsx(On,{value:"basic",children:"基本情報"}),d.jsx(On,{value:"triggers",children:"トリガー設定"}),d.jsx(On,{value:"steps",children:"ステップ管理"}),d.jsx(On,{value:"preview",children:"プレビュー"})]}),d.jsx(Dn,{value:"basic",className:"space-y-4",children:d.jsxs("div",{className:"grid gap-4",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[d.jsx("h3",{className:"font-medium mb-2 text-blue-700",children:"基本情報とは"}),d.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"トラブルシューティングフローの基本的な情報を設定します。IDは一意の識別子として使用されます。"})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"id",children:"ID (一意のキー)"}),d.jsx("p",{className:"text-sm text-gray-500",children:"他のフローと重複しない一意の識別子です。英数字とアンダースコアを使用してください。"}),d.jsx(at,{id:"id",value:v.id,onChange:V=>z("id",V.target.value),placeholder:"一意のID (例: brake_failure)",className:"font-mono"})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"title",children:"タイトル"}),d.jsx("p",{className:"text-sm text-gray-500",children:"ユーザーに表示されるフローの名前です。わかりやすい名前をつけてください。"}),d.jsx(at,{id:"title",value:v.title,onChange:V=>z("title",V.target.value),placeholder:"トラブルシューティングのタイトル"})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"description",children:"説明"}),d.jsx("p",{className:"text-sm text-gray-500",children:"フローの目的や使い方を説明します。内部参照用なのでユーザーには表示されません。"}),d.jsx(Pr,{id:"description",value:v.description,onChange:V=>z("description",V.target.value),placeholder:"トラブルシューティングの説明",rows:3})]})]})}),d.jsx(Dn,{value:"triggers",className:"space-y-4",children:d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[d.jsx("h3",{className:"font-medium mb-2 text-blue-700",children:"トリガー設定とは"}),d.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"トリガーとは、このフローを自動的に起動させるためのキーワードです。ユーザーがチャットでこれらのキーワードを含む質問をすると、このフローが候補として表示されます。"})]}),d.jsx(Be,{htmlFor:"triggers",children:"トリガーキーワード"}),d.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"このトラブルシューティングを起動するキーワードを設定します。複数のキーワードを追加できます。"}),d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(at,{id:"new-trigger",value:C,onChange:V=>x(V.target.value),placeholder:"新しいトリガーキーワード",className:"flex-1",onKeyDown:V=>{V.key==="Enter"&&(V.preventDefault(),D())}}),d.jsxs(ee,{variant:"outline",size:"sm",onClick:D,children:[d.jsx(lr,{className:"h-4 w-4 mr-1"}),"追加"]})]}),d.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:v.trigger.length===0?d.jsx("p",{className:"text-sm text-gray-500",children:"トリガーがありません"}):v.trigger.map((V,H)=>d.jsxs(Wl,{variant:"secondary",className:"flex items-center gap-1 px-3 py-1",children:[V,d.jsx(ee,{variant:"ghost",size:"icon",className:"h-5 w-5 rounded-full",onClick:()=>O(H),children:d.jsx(_r,{className:"h-3 w-3"})})]},H))})]})}),d.jsxs(Dn,{value:"steps",className:"space-y-4",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[d.jsx("h3",{className:"font-medium mb-2 text-blue-700",children:"ステップ管理とは"}),d.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"ステップはフロー内の各画面を表します。ユーザーはステップごとにメッセージを読み、選択肢を選んで次のステップに進みます。"}),d.jsxs("p",{className:"text-sm text-blue-700",children:[d.jsx("strong",{children:"ステップID："})," 各ステップの一意の識別子",d.jsx("br",{}),d.jsx("strong",{children:"メッセージ内容："})," ユーザーに表示されるテキスト",d.jsx("br",{}),d.jsx("strong",{children:"次のステップID："})," 選択肢がない場合の遷移先",d.jsx("br",{}),d.jsx("strong",{children:"選択肢オプション："})," ユーザーが選べる選択肢とその遷移先",d.jsx("br",{}),d.jsx("strong",{children:"チェックリスト："})," ユーザーに表示される確認項目"]})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"border rounded-lg p-4",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-sm font-medium",children:"ステップ一覧"}),d.jsxs(ee,{variant:"outline",size:"sm",onClick:b,children:[d.jsx(lr,{className:"h-4 w-4 mr-1"}),"追加"]})]}),d.jsx(CP,{className:"h-[400px]",children:v.steps.map(V=>d.jsxs("div",{className:`p-2 mb-2 rounded-lg cursor-pointer ${y===V.id?"bg-blue-100 border border-blue-300":"hover:bg-gray-100 border border-gray-200"}`,onClick:()=>S(V.id),children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"font-mono text-xs text-blue-600",children:V.id}),V.id!=="start"&&d.jsx(ee,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full",onClick:H=>{H.stopPropagation(),A(V.id)},children:d.jsx(Ds,{className:"h-4 w-4 text-red-500"})})]}),d.jsxs("div",{className:"text-sm truncate mt-1",children:[V.message.substring(0,35),V.message.length>35?"...":""]})]},V.id))})]}),d.jsx("div",{className:"col-span-2 border rounded-lg p-4",children:J?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"step-id",children:"ステップID"}),d.jsx(at,{id:"step-id",value:J.id,readOnly:!0,className:"font-mono bg-gray-50"})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"step-message",children:"メッセージ内容"}),d.jsx(Pr,{id:"step-message",value:J.message,onChange:V=>M(J.id,"message",V.target.value),placeholder:"ステップでのメッセージ内容",rows:5})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"step-next",children:"次のステップID"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(at,{id:"step-next",value:J.next||"",onChange:V=>M(J.id,"next",V.target.value),placeholder:"次に進むステップID",className:"font-mono"}),J.end&&d.jsx(Wl,{className:"bg-green-500",children:"終了ステップ"})]}),d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsx("input",{type:"checkbox",id:"step-end",checked:!!J.end,onChange:V=>M(J.id,"end",V.target.checked)}),d.jsx(Be,{htmlFor:"step-end",className:"text-sm",children:"終了ステップ（フローの最後）"})]})]}),d.jsxs(rve,{type:"single",collapsible:!0,className:"w-full",children:[d.jsxs(Ym,{value:"images",children:[d.jsx(Zm,{children:"画像設定"}),d.jsx(Xm,{children:d.jsxs("div",{className:"space-y-4 pt-2",children:[d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:`step-image-${J.id}`,children:"画像URL"}),d.jsx(at,{id:`step-image-${J.id}`,value:J.image||"",onChange:V=>M(J.id,"image",V.target.value),placeholder:"画像のURLを入力 (例: /images/device.png)"})]}),d.jsxs("div",{className:"grid gap-2 mt-2",children:[d.jsx(Be,{htmlFor:`step-image-keywords-${J.id}`,children:"画像検索キーワード（カンマ区切りで複数入力可）"}),d.jsx(at,{id:`step-image-keywords-${J.id}`,value:((oe=J.imageKeywords)==null?void 0:oe.join(", "))||"",onChange:V=>{const H=V.target.value.split(",").map(te=>te.trim()).filter(te=>te.length>0);M(J.id,"imageKeywords",H)},placeholder:"例: 燃料カットソレノイド, 冷却ポンプ"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"関連する部品や装置の名前を入力すると、自動的に関連画像が表示されます"})]})]})})]}),d.jsxs(Ym,{value:"checklist",children:[d.jsx(Zm,{children:"チェックリスト"}),d.jsx(Xm,{children:d.jsxs("div",{className:"space-y-2 pt-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(at,{value:E,onChange:V=>P(V.target.value),placeholder:"新しいチェックリスト項目",className:"flex-1",onKeyDown:V=>{V.key==="Enter"&&(V.preventDefault(),N(J.id))}}),d.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>N(J.id),children:[d.jsx(lr,{className:"h-4 w-4 mr-1"}),"追加"]})]}),d.jsx("div",{className:"space-y-2 mt-4",children:!J.checklist||J.checklist.length===0?d.jsx("p",{className:"text-sm text-gray-500",children:"チェックリスト項目がありません"}):J.checklist.map((V,H)=>d.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[d.jsx("span",{className:"text-sm",children:V}),d.jsx(ee,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>j(J.id,H),children:d.jsx(_r,{className:"h-4 w-4 text-red-500"})})]},H))})]})})]}),d.jsxs(Ym,{value:"options",children:[d.jsx(Zm,{children:"選択肢オプション"}),d.jsx(Xm,{children:d.jsxs("div",{className:"space-y-4 pt-2",children:[d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"option-label",children:"オプションラベル"}),d.jsx(at,{id:"option-label",value:T.label,onChange:V=>_({...T,label:V.target.value}),placeholder:"選択肢のテキスト"})]}),d.jsxs("div",{className:"grid gap-2",children:[d.jsx(Be,{htmlFor:"option-next",children:"遷移先ステップID"}),d.jsx(at,{id:"option-next",value:T.next,onChange:V=>_({...T,next:V.target.value}),placeholder:"選択時に遷移するステップID",className:"font-mono"})]}),d.jsxs(ee,{variant:"outline",onClick:()=>R(J.id),disabled:!T.label.trim()||!T.next.trim(),children:[d.jsx(lr,{className:"h-4 w-4 mr-1"}),"選択肢を追加"]}),d.jsx("div",{className:"space-y-2 mt-4",children:!J.options||J.options.length===0?d.jsx("p",{className:"text-sm text-gray-500",children:"選択肢がありません"}):J.options.map((V,H)=>d.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm",children:V.label}),d.jsxs("div",{className:"text-xs font-mono text-blue-600",children:["次: ",V.next]})]}),d.jsx(ee,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>I(J.id,H),children:d.jsx(_r,{className:"h-4 w-4 text-red-500"})})]},H))})]})})]})]})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-12 text-gray-500",children:[d.jsx(AR,{className:"h-12 w-12 mb-2 text-gray-400"}),d.jsx("p",{children:"左側のリストからステップを選択してください"})]})})]})]}),d.jsxs(Dn,{value:"preview",className:"space-y-4",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[d.jsx("h3",{className:"font-medium mb-2 text-blue-700",children:"プレビュー表示"}),d.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"現在編集中の内容を実際のフロー表示としてプレビューできます。編集内容はリアルタイムに反映されます。"})]}),v.steps.length>0?d.jsx(zme,{steps:v.steps,initialStepId:"start"}):d.jsxs("div",{className:"text-center py-12 text-gray-500",children:[d.jsx(L7,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),d.jsx("p",{children:"ステップを作成してプレビューを表示します"})]})]})]})})]}),d.jsx(mr,{open:l,onOpenChange:u,children:d.jsxs(Kn,{children:[d.jsxs(vr,{children:[d.jsx(Gn,{children:"変更内容の確認"}),d.jsx(Ir,{children:"以下の変更を保存しますか？"})]}),d.jsxs("div",{className:"py-4",children:[d.jsxs("div",{className:"space-y-2",children:[h.added>0&&d.jsxs("div",{className:"flex items-center text-green-600",children:[d.jsx(lr,{className:"h-4 w-4 mr-2"}),d.jsxs("span",{children:["新規追加項目: ",h.added,"件"]})]}),h.modified>0&&d.jsxs("div",{className:"flex items-center text-blue-600",children:[d.jsx(AR,{className:"h-4 w-4 mr-2"}),d.jsxs("span",{children:["更新項目: ",h.modified,"件"]})]}),h.deleted>0&&d.jsxs("div",{className:"flex items-center text-red-600",children:[d.jsx(Ds,{className:"h-4 w-4 mr-2"}),d.jsxs("span",{children:["削除項目: ",h.deleted,"件"]})]})]}),d.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"保存すると既存のデータは上書きされます。削除した項目は完全に削除され、新規追加した項目がこのフローに追加されます。"})]}),d.jsxs(Zr,{children:[d.jsx(ee,{variant:"outline",onClick:()=>u(!1),children:"キャンセル"}),d.jsx(ee,{onClick:G,disabled:o,children:o?d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"h-4 w-4 mr-1 animate-spin"}),"保存中..."]}):d.jsxs(d.Fragment,{children:[d.jsx(yp,{className:"h-4 w-4 mr-1"}),"変更を保存"]})})]})]})})]})},sve=()=>{const{toast:e}=ln();ss();const[t,n]=m.useState(!0),[r,i]=m.useState(""),[s,a]=m.useState([]),[o,c]=m.useState([]),[l,u]=m.useState(null),[h,p]=m.useState(!1),[f,g]=m.useState(!1),[v,w]=m.useState(null),[y,S]=m.useState(!1),[C,x]=m.useState(null),[E,P]=m.useState(!1),[T,_]=m.useState(null),k=async()=>{try{n(!0);const R=await fetch("/api/troubleshooting");if(!R.ok)throw new Error("データの取得に失敗しました");const I=await R.json();a(I),c(I)}catch(R){console.error("トラブルシューティングデータの取得エラー:",R),e({title:"エラー",description:"トラブルシューティングデータの取得に失敗しました",variant:"destructive"})}finally{n(!1)}};m.useEffect(()=>{const I=new URLSearchParams(window.location.search).get("guideId");I&&(u(I),p(!0),w(null),g(!0)),k()},[]),m.useEffect(()=>{if(!r.trim()){c(s);return}const R=r.toLowerCase(),I=s.filter($=>$.id.toLowerCase().includes(R)||$.title.toLowerCase().includes(R)||$.description.toLowerCase().includes(R)||$.trigger&&$.trigger.some(U=>U.toLowerCase().includes(R)));c(I)},[r,s]);const z=R=>{w(R),g(!0)},D=()=>{w(null),g(!0)},O=()=>{h&&l?window.location.href="/emergency-guide":(g(!1),w(null))},M=()=>{h&&l?(e({title:"保存完了",description:"トラブルシューティングデータを保存しました。応急復旧データ作成ページに戻ります。"}),setTimeout(()=>{window.location.href="/emergency-guide"},1500)):(g(!1),w(null),k())},b=R=>{_(R),P(!0)},A=()=>{P(!1),_(null)},N=R=>{x(R),S(!0)},j=async()=>{if(C)try{if(!(await fetch(`/api/troubleshooting/${C}`,{method:"DELETE"})).ok)throw new Error("削除に失敗しました");e({title:"削除完了",description:"トラブルシューティングデータを削除しました"}),k()}catch(R){console.error("削除エラー:",R),e({title:"エラー",description:"削除に失敗しました",variant:"destructive"})}finally{S(!1),x(null)}};return f?d.jsxs("div",{className:"container mx-auto p-6",children:[h&&l&&d.jsx(pt,{className:"mb-4",children:d.jsx(xt,{className:"pb-3",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx(At,{children:"応急復旧データに関連付けられたトラブルシューティング"}),d.jsxs(Yr,{children:["ガイドID: ",l]})]}),d.jsxs(ee,{variant:"outline",onClick:()=>window.location.href="/emergency-guide",children:[d.jsx(eE,{className:"mr-2 h-4 w-4"}),"応急復旧データ作成に戻る"]})]})})}),d.jsx(ive,{id:v||void 0,onCancel:O,onSaved:M,guideId:l||void 0})]}):E&&T?d.jsxs("div",{className:"container mx-auto p-6",children:[d.jsx(pt,{className:"mb-4",children:d.jsx(xt,{className:"pb-3",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(At,{children:"トラブルシューティングプレビュー"}),d.jsx(ee,{variant:"outline",onClick:A,children:"一覧に戻る"})]})})}),d.jsx(Y3,{id:T,onExit:A})]}):d.jsxs("div",{className:"container mx-auto p-6",children:[d.jsx(fg,{children:d.jsx("title",{children:"トラブルシューティング管理 | 保守用車支援システム"})}),d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-blue-800 mb-2",children:"トラブルシューティング管理"}),d.jsx("p",{className:"text-gray-600",children:"トラブルシューティングフローの作成・編集・プレビューを行います"})]}),d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"relative w-full max-w-md",children:[d.jsx(rE,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),d.jsx(at,{type:"search",placeholder:"トラブルシューティングを検索...",className:"pl-8",value:r,onChange:R=>i(R.target.value)})]}),d.jsxs(ee,{onClick:D,children:[d.jsx(lr,{className:"mr-2 h-4 w-4"}),"新規作成"]})]}),t?d.jsxs("div",{className:"flex justify-center items-center py-12",children:[d.jsx(Wn,{className:"h-8 w-8 animate-spin text-blue-500"}),d.jsx("span",{className:"ml-2",children:"データを読み込み中..."})]}):o.length===0?d.jsx(pt,{children:d.jsx(St,{className:"py-10 text-center",children:d.jsxs("div",{className:"flex flex-col items-center justify-center",children:[d.jsx(ic,{className:"h-12 w-12 text-gray-400 mb-4"}),r?d.jsx("p",{className:"text-gray-500",children:"検索条件に一致するトラブルシューティングが見つかりません"}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-gray-500 mb-2",children:"トラブルシューティングがまだ登録されていません"}),d.jsxs(ee,{variant:"outline",onClick:D,children:[d.jsx(lr,{className:"mr-2 h-4 w-4"}),"新規作成"]})]})]})})}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(R=>d.jsxs(pt,{className:"overflow-hidden",children:[d.jsxs(xt,{className:"pb-3",children:[d.jsx(At,{className:"text-lg",children:R.title}),d.jsx(Yr,{className:"line-clamp-2",children:R.description})]}),d.jsxs(St,{children:[d.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[R.trigger&&R.trigger.map((I,$)=>d.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:I},$)),(!R.trigger||R.trigger.length===0)&&d.jsx("span",{className:"text-gray-400 text-sm",children:"トリガーなし"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx(ee,{variant:"outline",size:"sm",onClick:()=>b(R.id),children:"プレビュー"}),d.jsxs("div",{className:"space-x-2",children:[d.jsx(ee,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>z(R.id),children:d.jsx(CL,{className:"h-4 w-4"})}),d.jsx(ee,{variant:"outline",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-600",onClick:()=>N(R.id),children:d.jsx(Ds,{className:"h-4 w-4"})})]})]})]})]},R.id))}),d.jsx(mr,{open:y,onOpenChange:S,children:d.jsxs(Kn,{children:[d.jsxs(vr,{children:[d.jsx(Gn,{children:"トラブルシューティングの削除"}),d.jsx(Ir,{children:"このトラブルシューティングを削除してもよろしいですか？この操作は元に戻せません。"})]}),d.jsxs(Zr,{children:[d.jsx(ee,{variant:"outline",onClick:()=>S(!1),children:"キャンセル"}),d.jsx(ee,{variant:"destructive",onClick:j,children:"削除"})]})]})})]})},ove=YE,ave=ZE,cve=XE,dV=m.forwardRef(({className:e,...t},n)=>d.jsx(bf,{className:ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));dV.displayName=bf.displayName;const lve=af("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),hV=m.forwardRef(({side:e="right",className:t,children:n,...r},i)=>d.jsxs(cve,{children:[d.jsx(dV,{}),d.jsxs(Ef,{ref:i,className:ve(lve({side:e}),t),...r,children:[n,d.jsxs(oS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[d.jsx(_r,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));hV.displayName=Ef.displayName;const uve=m.forwardRef(({className:e,...t},n)=>d.jsx(Pf,{ref:n,className:ve("text-lg font-semibold text-foreground",e),...t}));uve.displayName=Pf.displayName;const dve=m.forwardRef(({className:e,...t},n)=>d.jsx(Rf,{ref:n,className:ve("text-sm text-muted-foreground",e),...t}));dve.displayName=Rf.displayName;function pV({currentPath:e,vertical:t=!1,onNavigate:n}){const[,r]=ss(),{user:i}=Lr(),s=l=>{r(l),n&&n()},a=(i==null?void 0:i.role)==="admin",c=[{title:"応急処置サポート",path:"/chat",icon:d.jsx(t9,{className:"mr-2 h-5 w-5 text-blue-600"}),className:"text-blue-600 font-bold text-[120%] border border-blue-300 rounded-md bg-blue-50"},{title:"基礎データ管理",path:"/processing",icon:d.jsx(zC,{className:"mr-2 h-4 w-4"}),adminOnly:!0},{title:"応急処置データ管理",path:"/emergency-guide",icon:d.jsx(ic,{className:"mr-2 h-4 w-4"}),adminOnly:!0},{title:"設定",path:"/settings",icon:d.jsx($C,{className:"mr-2 h-4 w-4"})}].filter(l=>!l.adminOnly||a);return d.jsx("div",{className:ve("bg-white",t?"flex flex-col space-y-1":"flex"),children:c.map(l=>d.jsxs(ee,{variant:"ghost",className:ve(t?"justify-start px-3 py-2 w-full":"px-4 py-3 rounded-none",e===l.path?"text-primary border-primary font-medium "+(t?"":"border-b-2"):l.path==="/chat"?l.className:"text-neutral-300",l.className),onClick:()=>s(l.path),children:[l.icon,l.title]},l.path))})}function hve(){const{user:e}=Lr(),{clearChatHistory:t,isClearing:n}=uu(),[r]=ss(),[i,s]=m.useState(!1);return d.jsxs("header",{className:"bg-primary text-white py-3 px-4 flex items-center justify-between shadow-md",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsxs(ove,{open:i,onOpenChange:s,children:[d.jsx(ave,{asChild:!0,children:d.jsx(ee,{variant:"ghost",size:"icon",className:"mr-3 text-white",children:d.jsx(Y7,{})})}),d.jsxs(hV,{side:"left",className:"p-0",children:[d.jsx("div",{className:"bg-primary text-white p-4",children:d.jsx("h2",{className:"text-xl font-semibold",children:"Emergency Recovery Chat"})}),d.jsx("nav",{className:"p-4",children:d.jsx(pV,{currentPath:r,vertical:!0,onNavigate:()=>s(!1)})})]})]}),d.jsx("div",{className:"flex items-center",children:d.jsx("h1",{className:"text-xl font-semibold mr-3",children:"応急処置チャットシステム"})})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsxs("span",{className:"text-sm text-white",children:["ログインユーザー：",d.jsx("span",{className:"font-bold",children:(e==null?void 0:e.display_name)||(e==null?void 0:e.username)||"ゲスト"})]}),d.jsx("span",{className:"ml-2 bg-secondary text-white text-xs px-2 py-0.5 rounded-full",children:(e==null?void 0:e.role)==="admin"?"管理者":"一般"})]})]})}function xa({children:e}){const{user:t,isLoading:n}=Lr(),[,r]=ss();return m.useEffect(()=>{!n&&!t&&r("/login")},[t,n,r]),n?d.jsx("div",{className:"flex h-screen items-center justify-center",children:"Loading..."}):t?d.jsx(d.Fragment,{children:e}):null}function xm({children:e}){const{user:t,isLoading:n}=Lr(),[,r]=ss();return m.useEffect(()=>{!n&&(!t||t.role!=="admin")&&r("/chat")},[t,n,r]),n?d.jsx("div",{className:"flex h-screen items-center justify-center",children:"Loading..."}):t&&t.role==="admin"?d.jsx(d.Fragment,{children:e}):null}function pve(){const{user:e}=Lr(),[t]=ss();return t==="/login"?d.jsx("div",{className:"h-screen",children:d.jsxs(uR,{children:[d.jsx(oi,{path:"/login",component:DQ}),d.jsx(oi,{path:"/",children:d.jsx(S0,{to:"/login"})})]})}):d.jsxs("div",{className:"h-screen flex flex-col",children:[e&&d.jsx(hve,{}),e&&d.jsx("div",{className:"border-b border-neutral-200",children:d.jsx(pV,{currentPath:t})}),d.jsx("main",{className:"flex-1 flex overflow-hidden",children:d.jsxs(uR,{children:[d.jsx(oi,{path:"/chat",children:d.jsx(xa,{children:d.jsx(bse,{})})}),d.jsx(oi,{path:"/processing",children:d.jsx(xa,{children:d.jsx(_se,{})})}),d.jsx(oi,{path:"/settings",children:d.jsx(xa,{children:d.jsx(Wse,{})})}),d.jsx(oi,{path:"/users",children:d.jsx(xa,{children:d.jsx(xm,{children:d.jsx(jae,{})})})}),d.jsx(oi,{path:"/documents",children:d.jsx(xa,{children:d.jsx(xm,{children:d.jsx(kae,{})})})}),d.jsx(oi,{path:"/emergency-guide",children:d.jsx(xa,{children:d.jsx(xm,{children:d.jsx(Lme,{})})})}),d.jsx(oi,{path:"/troubleshooting",children:d.jsx(xa,{children:d.jsx(xm,{children:d.jsx(sve,{})})})}),d.jsx(oi,{path:"/",children:e?d.jsx(S0,{to:"/chat"}):d.jsx(S0,{to:"/login"})}),d.jsx(oi,{component:wK})]})})]})}function fve(){return d.jsx(X4,{children:d.jsx(FD,{client:ar,children:d.jsxs(N$,{children:[d.jsx(pve,{}),d.jsx(BL,{})]})})})}fD(document.getElementById("root")).render(d.jsx(FD,{client:ar,children:d.jsx(X4,{children:d.jsxs(N$,{children:[d.jsx(fve,{}),d.jsx(BL,{})]})})}));
