# Development Dockerfile with hot reload support
FROM node:20-alpine AS development

WORKDIR /app

# Install dependencies
COPY package*.json ./
COPY server/package*.json ./server/
COPY client/package*.json ./client/

RUN npm ci && \
    cd server && npm ci && \
    cd ../client && npm ci

# Copy source files (will be overridden by volume mount)
COPY . .

# Expose ports
EXPOSE 8080 5173

# Start development server
CMD ["npm", "run", "dev"]
