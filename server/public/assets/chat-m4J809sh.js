const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D2n-Q-xG.js","assets/ui-BaYWhfWe.js","assets/vendor-C0Yfakdp.js","assets/index-BPCHOJE0.css"])))=>i.map(i=>d[i]);
import{d as e,u as t,e as n,f as a,X as s,B as r,W as i,a as o,_ as l}from"./index-D2n-Q-xG.js";import{j as c}from"./ui-BaYWhfWe.js";import{r as d}from"./vendor-C0Yfakdp.js";import{V as u,S as m}from"./switch-Dqt1Ye9i.js";import{I as h}from"./input-00qY0QlV.js";import{T as g}from"./textarea-DNTJXyI5.js";import{S as f,E as p}from"./emergency-guide-display-B9UGfZRd.js";import{D as x,a as b,b as w,c as v}from"./dialog-Bw18cmE_.js";import{C as y,a as j}from"./circle-FppepMYN.js";import"./tabs-B4J51xkM.js";import{C as N,a as k,b as S,c as M}from"./card-BqBfUk46.js";import{B as C}from"./badge-Ba3TsPi1.js";import{C as E}from"./circle-check-big-CTBfrkRl.js";import{T}from"./triangle-alert-CZnlPd-G.js";import{L as D}from"./label-qry_Omxz.js";import{B as W}from"./brain-CeEmkWGL.js";import{U as P}from"./upload-9Fqd0GKV.js";import{T as A}from"./trash-2-CafAc5T9.js";import"./index-CttfQz0H.js";import"./arrow-left-D75JwTss.js";import"./image-GU48u0ox.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),L=e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),_=e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),z=e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),$=e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),R=e("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),O=e("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),H=e("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),q=e("TabletSmartphone",[["rect",{width:"10",height:"14",x:"3",y:"8",rx:"2",key:"1vrsiq"}],["path",{d:"M5 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-2.4",key:"1j4zmg"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),F=e("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),U=6048e5,B=Symbol.for("constructDateFrom");
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Y(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&B in e?e[B](t):e instanceof Date?new e.constructor(t):new Date(t)}function Q(e,t){return Y(t||e,e)}let V={};function X(){return V}function G(e,t){var n,a,s,r;const i=X(),o=(null==t?void 0:t.weekStartsOn)??(null==(a=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:a.weekStartsOn)??i.weekStartsOn??(null==(r=null==(s=i.locale)?void 0:s.options)?void 0:r.weekStartsOn)??0,l=Q(e,null==t?void 0:t.in),c=l.getDay(),d=(c<o?7:0)+c-o;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function J(e,t){return G(e,{...t,weekStartsOn:1})}function K(e,t){const n=Q(e,null==t?void 0:t.in),a=n.getFullYear(),s=Y(n,0);s.setFullYear(a+1,0,4),s.setHours(0,0,0,0);const r=J(s),i=Y(n,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const o=J(i);return n.getTime()>=r.getTime()?a+1:n.getTime()>=o.getTime()?a:a-1}function Z(e){const t=Q(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ee(e,t){const n=Q(e,null==t?void 0:t.in);return n.setHours(0,0,0,0),n}function te(e,t,n){const[a,s]=function(e,...t){const n=Y.bind(null,t.find(e=>"object"==typeof e));return t.map(n)}(null==n||n.in,e,t),r=ee(a),i=ee(s),o=+r-Z(r),l=+i-Z(i);return Math.round((o-l)/864e5)}function ne(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+Q(e)));var t}const ae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function se(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const re={date:se({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:se({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:se({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function oe(e){return(t,n)=>{let a;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=(null==n?void 0:n.width)?String(n.width):t;a=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;a=e.values[s]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function le(e){return(t,n={})=>{const a=n.width,s=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],r=t.match(s);if(!r)return null;const i=r[0],o=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}function ce(e){return(t,n={})=>{const a=t.match(e.matchPattern);if(!a)return null;const s=a[0],r=t.match(e.parsePattern);if(!r)return null;let i=e.valueCallback?e.valueCallback(r[0]):r[0];i=n.valueCallback?n.valueCallback(i):i;return{value:i,rest:t.slice(s.length)}}}const de={code:"en-US",formatDistance:(e,t,n)=>{let a;const s=ae[e];return a="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:re,formatRelative:(e,t,n,a)=>ie[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:oe({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:oe({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:oe({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:oe({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:oe({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:ce({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:le({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:le({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:le({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:le({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:le({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function ue(e,t){const n=Q(e,null==t?void 0:t.in),a=te(n,function(e,t){const n=Q(e,null==t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n));return a+1}function me(e,t){const n=Q(e,null==t?void 0:t.in),a=+J(n)-+function(e,t){const n=K(e,t),a=Y(e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),J(a)}(n);return Math.round(a/U)+1}function he(e,t){var n,a,s,r;const i=Q(e,null==t?void 0:t.in),o=i.getFullYear(),l=X(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(a=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:a.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(r=null==(s=l.locale)?void 0:s.options)?void 0:r.firstWeekContainsDate)??1,d=Y((null==t?void 0:t.in)||e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=G(d,t),m=Y((null==t?void 0:t.in)||e,0);m.setFullYear(o,0,c),m.setHours(0,0,0,0);const h=G(m,t);return+i>=+u?o+1:+i>=+h?o:o-1}function ge(e,t){const n=Q(e,null==t?void 0:t.in),a=+G(n,t)-+function(e,t){var n,a,s,r;const i=X(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(a=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:a.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(r=null==(s=i.locale)?void 0:s.options)?void 0:r.firstWeekContainsDate)??1,l=he(e,t),c=Y((null==t?void 0:t.in)||e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),G(c,t)}(n,t);return Math.round(a/U)+1}function fe(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const pe={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return fe("yy"===t?a%100:a,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):fe(n+1,2)},d:(e,t)=>fe(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>fe(e.getHours()%12||12,t.length),H:(e,t)=>fe(e.getHours(),t.length),m:(e,t)=>fe(e.getMinutes(),t.length),s:(e,t)=>fe(e.getSeconds(),t.length),S(e,t){const n=t.length,a=e.getMilliseconds();return fe(Math.trunc(a*Math.pow(10,n-3)),t.length)}},xe="midnight",be="noon",we="morning",ve="afternoon",ye="evening",je="night",Ne={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return n.ordinalNumber(a,{unit:"year"})}return pe.y(e,t)},Y:function(e,t,n,a){const s=he(e,a),r=s>0?s:1-s;if("YY"===t){return fe(r%100,2)}return"Yo"===t?n.ordinalNumber(r,{unit:"year"}):fe(r,t.length)},R:function(e,t){return fe(K(e),t.length)},u:function(e,t){return fe(e.getFullYear(),t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return fe(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return fe(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return pe.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return fe(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const s=ge(e,a);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):fe(s,t.length)},I:function(e,t,n){const a=me(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):fe(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):pe.d(e,t)},D:function(e,t,n){const a=ue(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):fe(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const s=e.getDay(),r=(s-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return fe(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const s=e.getDay(),r=(s-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return fe(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),s=0===a?7:a;switch(t){case"i":return String(s);case"ii":return fe(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let s;switch(s=12===a?be:0===a?xe:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let s;switch(s=a>=17?ye:a>=12?ve:a>=4?we:je,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return pe.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):pe.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):fe(a,t.length)},k:function(e,t,n){let a=e.getHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):fe(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):pe.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):pe.s(e,t)},S:function(e,t){return pe.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return Se(a);case"XXXX":case"XX":return Me(a);default:return Me(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return Se(a);case"xxxx":case"xx":return Me(a);default:return Me(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ke(a,":");default:return"GMT"+Me(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ke(a,":");default:return"GMT"+Me(a,":")}},t:function(e,t,n){return fe(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return fe(+e,t.length)}};function ke(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),s=Math.trunc(a/60),r=a%60;return 0===r?n+String(s):n+String(s)+t+fe(r,2)}function Se(e,t){if(e%60==0){return(e>0?"-":"+")+fe(Math.abs(e)/60,2)}return Me(e,t)}function Me(e,t=""){const n=e>0?"-":"+",a=Math.abs(e);return n+fe(Math.trunc(a/60),2)+t+fe(a%60,2)}const Ce=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Ee=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Te={p:Ee,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],s=n[2];if(!s)return Ce(e,t);let r;switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Ce(a,t)).replace("{{time}}",Ee(s,t))}},De=/^D+$/,We=/^Y+$/,Pe=["D","DD","YY","YYYY"];const Ae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Le=/^'([^]*?)'?$/,_e=/''/g,ze=/[a-zA-Z]/;function $e(e,t,n){var a,s,r,i,o,l,c,d;const u=X(),m=(null==n?void 0:n.locale)??u.locale??de,h=(null==n?void 0:n.firstWeekContainsDate)??(null==(s=null==(a=null==n?void 0:n.locale)?void 0:a.options)?void 0:s.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(i=null==(r=u.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??1,g=(null==n?void 0:n.weekStartsOn)??(null==(l=null==(o=null==n?void 0:n.locale)?void 0:o.options)?void 0:l.weekStartsOn)??u.weekStartsOn??(null==(d=null==(c=u.locale)?void 0:c.options)?void 0:d.weekStartsOn)??0,f=Q(e,null==n?void 0:n.in);if(!ne(f))throw new RangeError("Invalid time value");let p=t.match(Ie).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,Te[t])(e,m.formatLong)}return e}).join("").match(Ae).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Re(e)};if(Ne[t])return{isToken:!0,value:e};if(t.match(ze))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});m.localize.preprocessor&&(p=m.localize.preprocessor(f,p));const x={firstWeekContainsDate:h,weekStartsOn:g,locale:m};return p.map(a=>{if(!a.isToken)return a.value;const s=a.value;(!(null==n?void 0:n.useAdditionalWeekYearTokens)&&function(e){return We.test(e)}(s)||!(null==n?void 0:n.useAdditionalDayOfYearTokens)&&function(e){return De.test(e)}(s))&&function(e,t,n){const a=function(e,t,n){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(a),Pe.includes(e))throw new RangeError(a)}(s,t,String(e));return(0,Ne[s[0]])(f,s,m.localize,x)}).join("")}function Re(e){const t=e.match(Le);return t?t[1].replace(_e,"'"):e}const Oe={lessThanXSeconds:{one:"1ÁßíÊú™Ê∫Ä",other:"{{count}}ÁßíÊú™Ê∫Ä",oneWithSuffix:"Á¥Ñ1Áßí",otherWithSuffix:"Á¥Ñ{{count}}Áßí"},xSeconds:{one:"1Áßí",other:"{{count}}Áßí"},halfAMinute:"30Áßí",lessThanXMinutes:{one:"1ÂàÜÊú™Ê∫Ä",other:"{{count}}ÂàÜÊú™Ê∫Ä",oneWithSuffix:"Á¥Ñ1ÂàÜ",otherWithSuffix:"Á¥Ñ{{count}}ÂàÜ"},xMinutes:{one:"1ÂàÜ",other:"{{count}}ÂàÜ"},aboutXHours:{one:"Á¥Ñ1ÊôÇÈñì",other:"Á¥Ñ{{count}}ÊôÇÈñì"},xHours:{one:"1ÊôÇÈñì",other:"{{count}}ÊôÇÈñì"},xDays:{one:"1Êó•",other:"{{count}}Êó•"},aboutXWeeks:{one:"Á¥Ñ1ÈÄ±Èñì",other:"Á¥Ñ{{count}}ÈÄ±Èñì"},xWeeks:{one:"1ÈÄ±Èñì",other:"{{count}}ÈÄ±Èñì"},aboutXMonths:{one:"Á¥Ñ1„ÅãÊúà",other:"Á¥Ñ{{count}}„ÅãÊúà"},xMonths:{one:"1„ÅãÊúà",other:"{{count}}„ÅãÊúà"},aboutXYears:{one:"Á¥Ñ1Âπ¥",other:"Á¥Ñ{{count}}Âπ¥"},xYears:{one:"1Âπ¥",other:"{{count}}Âπ¥"},overXYears:{one:"1Âπ¥‰ª•‰∏ä",other:"{{count}}Âπ¥‰ª•‰∏ä"},almostXYears:{one:"1Âπ¥Ëøë„Åè",other:"{{count}}Âπ¥Ëøë„Åè"}},He={date:se({formats:{full:"yÂπ¥MÊúàdÊó•EEEE",long:"yÂπ¥MÊúàdÊó•",medium:"y/MM/dd",short:"y/MM/dd"},defaultWidth:"full"}),time:se({formats:{full:"HÊôÇmmÂàÜssÁßí zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:se({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},qe={lastWeek:"ÂÖàÈÄ±„ÅÆeeee„ÅÆp",yesterday:"Êò®Êó•„ÅÆp",today:"‰ªäÊó•„ÅÆp",tomorrow:"ÊòéÊó•„ÅÆp",nextWeek:"ÁøåÈÄ±„ÅÆeeee„ÅÆp",other:"P"},Fe={code:"ja",formatDistance:(e,t,n)=>{let a;n=n||{};const s=Oe[e];return a="string"==typeof s?s:1===t?n.addSuffix&&s.oneWithSuffix?s.oneWithSuffix:s.one:n.addSuffix&&s.otherWithSuffix?s.otherWithSuffix.replace("{{count}}",String(t)):s.other.replace("{{count}}",String(t)),n.addSuffix?n.comparison&&n.comparison>0?a+"Âæå":a+"Ââç":a},formatLong:He,formatRelative:(e,t,n,a)=>qe[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e);switch(String(null==t?void 0:t.unit)){case"year":return`${n}Âπ¥`;case"quarter":return`Á¨¨${n}ÂõõÂçäÊúü`;case"month":return`${n}Êúà`;case"week":return`Á¨¨${n}ÈÄ±`;case"date":return`${n}Êó•`;case"hour":return`${n}ÊôÇ`;case"minute":return`${n}ÂàÜ`;case"second":return`${n}Áßí`;default:return`${n}`}},era:oe({values:{narrow:["BC","AC"],abbreviated:["Á¥ÄÂÖÉÂâç","Ë•øÊö¶"],wide:["Á¥ÄÂÖÉÂâç","Ë•øÊö¶"]},defaultWidth:"wide"}),quarter:oe({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["Á¨¨1ÂõõÂçäÊúü","Á¨¨2ÂõõÂçäÊúü","Á¨¨3ÂõõÂçäÊúü","Á¨¨4ÂõõÂçäÊúü"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:oe({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1Êúà","2Êúà","3Êúà","4Êúà","5Êúà","6Êúà","7Êúà","8Êúà","9Êúà","10Êúà","11Êúà","12Êúà"],wide:["1Êúà","2Êúà","3Êúà","4Êúà","5Êúà","6Êúà","7Êúà","8Êúà","9Êúà","10Êúà","11Êúà","12Êúà"]},defaultWidth:"wide"}),day:oe({values:{narrow:["Êó•","Êúà","ÁÅ´","Ê∞¥","Êú®","Èáë","Âúü"],short:["Êó•","Êúà","ÁÅ´","Ê∞¥","Êú®","Èáë","Âúü"],abbreviated:["Êó•","Êúà","ÁÅ´","Ê∞¥","Êú®","Èáë","Âúü"],wide:["Êó•ÊõúÊó•","ÊúàÊõúÊó•","ÁÅ´ÊõúÊó•","Ê∞¥ÊõúÊó•","Êú®ÊõúÊó•","ÈáëÊõúÊó•","ÂúüÊõúÊó•"]},defaultWidth:"wide"}),dayPeriod:oe({values:{narrow:{am:"ÂçàÂâç",pm:"ÂçàÂæå",midnight:"Ê∑±Â§ú",noon:"Ê≠£Âçà",morning:"Êúù",afternoon:"ÂçàÂæå",evening:"Â§ú",night:"Ê∑±Â§ú"},abbreviated:{am:"ÂçàÂâç",pm:"ÂçàÂæå",midnight:"Ê∑±Â§ú",noon:"Ê≠£Âçà",morning:"Êúù",afternoon:"ÂçàÂæå",evening:"Â§ú",night:"Ê∑±Â§ú"},wide:{am:"ÂçàÂâç",pm:"ÂçàÂæå",midnight:"Ê∑±Â§ú",noon:"Ê≠£Âçà",morning:"Êúù",afternoon:"ÂçàÂæå",evening:"Â§ú",night:"Ê∑±Â§ú"}},defaultWidth:"wide",formattingValues:{narrow:{am:"ÂçàÂâç",pm:"ÂçàÂæå",midnight:"Ê∑±Â§ú",noon:"Ê≠£Âçà",morning:"Êúù",afternoon:"ÂçàÂæå",evening:"Â§ú",night:"Ê∑±Â§ú"},abbreviated:{am:"ÂçàÂâç",pm:"ÂçàÂæå",midnight:"Ê∑±Â§ú",noon:"Ê≠£Âçà",morning:"Êúù",afternoon:"ÂçàÂæå",evening:"Â§ú",night:"Ê∑±Â§ú"},wide:{am:"ÂçàÂâç",pm:"ÂçàÂæå",midnight:"Ê∑±Â§ú",noon:"Ê≠£Âçà",morning:"Êúù",afternoon:"ÂçàÂæå",evening:"Â§ú",night:"Ê∑±Â§ú"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:ce({matchPattern:/^Á¨¨?\d+(Âπ¥|ÂõõÂçäÊúü|Êúà|ÈÄ±|Êó•|ÊôÇ|ÂàÜ|Áßí)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:le({matchPatterns:{narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^(Á¥ÄÂÖÉ[ÂâçÂæå]|Ë•øÊö¶)/i,wide:/^(Á¥ÄÂÖÉ[ÂâçÂæå]|Ë•øÊö¶)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^B/i,/^A/i],any:[/^(Á¥ÄÂÖÉÂâç)/i,/^(Ë•øÊö¶|Á¥ÄÂÖÉÂæå)/i]},defaultParseWidth:"any"}),quarter:le({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^Á¨¨[1234‰∏Ä‰∫å‰∏âÂõõÔºëÔºíÔºìÔºî]ÂõõÂçäÊúü/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|‰∏Ä|Ôºë)/i,/(2|‰∫å|Ôºí)/i,/(3|‰∏â|Ôºì)/i,/(4|Âõõ|Ôºî)/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:le({matchPatterns:{narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])Êúà/i,wide:/^([123456789]|1[012])Êúà/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:le({matchPatterns:{narrow:/^[Êó•ÊúàÁÅ´Ê∞¥Êú®ÈáëÂúü]/,short:/^[Êó•ÊúàÁÅ´Ê∞¥Êú®ÈáëÂúü]/,abbreviated:/^[Êó•ÊúàÁÅ´Ê∞¥Êú®ÈáëÂúü]/,wide:/^[Êó•ÊúàÁÅ´Ê∞¥Êú®ÈáëÂúü]ÊõúÊó•/},defaultMatchWidth:"wide",parsePatterns:{any:[/^Êó•/,/^Êúà/,/^ÁÅ´/,/^Ê∞¥/,/^Êú®/,/^Èáë/,/^Âúü/]},defaultParseWidth:"any"}),dayPeriod:le({matchPatterns:{any:/^(AM|PM|ÂçàÂâç|ÂçàÂæå|Ê≠£Âçà|Ê∑±Â§ú|ÁúüÂ§ú‰∏≠|Â§ú|Êúù)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(A|ÂçàÂâç)/i,pm:/^(P|ÂçàÂæå)/i,midnight:/^Ê∑±Â§ú|ÁúüÂ§ú‰∏≠/i,noon:/^Ê≠£Âçà/i,morning:/^Êúù/i,afternoon:/^ÂçàÂæå/i,evening:/^Â§ú/i,night:/^Ê∑±Â§ú/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ue({message:e,isDraft:s=!1}){const{user:r}=t(),{setSelectedText:i}=n(),[o,l]=d.useState(""),[m,h]=d.useState(!1),[g,f]=d.useState(!1),{toast:p}=a(),x=!e.isAiResponse,b=e.content&&e.content.includes("ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„ÉâÂÆüÊñΩË®òÈå≤");b&&console.log("üîµ ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„Éâ„É°„ÉÉ„Çª„Éº„Ç∏„ÇíË°®Á§∫„Åó„Åæ„Åô:",{id:e.id,isAiResponse:e.isAiResponse,contentStart:e.content.substring(0,50)+"...",timestamp:e.timestamp});let w="--:--";try{const t=e.timestamp||e.createdAt;if(t){const e=new Date(t);w=isNaN(e.getTime())?$e(new Date,"HH:mm",{locale:Fe}):$e(e,"HH:mm",{locale:Fe})}else w=$e(new Date,"HH:mm",{locale:Fe})}catch(y){console.error("Êó•ÊôÇ„Éï„Ç©„Éº„Éû„ÉÉ„Éà„Ç®„É©„Éº:",y,"timestamp:",e.timestamp),w=$e(new Date,"HH:mm",{locale:Fe})}const v=t=>{var n;const a=(null==(n=e.media)?void 0:n.map(e=>e.url))||[];window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:t,all_slides:a.length>1?a:void 0,title:"ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„Éâ",content:e.content}}))};return c.jsxs("div",{className:`flex items-end mb-4 ${x?"justify-start":"justify-end"} min-w-[250px] ${s?"draft-message animate-pulse":""}`,onMouseUp:()=>{const e=window.getSelection(),t=null==e?void 0:e.toString();if(e&&t&&t.trim().length>0){const e=t.trim();l(e),h(!0)}else l(""),h(!1)},children:[c.jsxs("div",{className:`mx-2 flex flex-col ${x?"items-start":"items-end"} max-w-[70%] min-w-[230px]`,children:[c.jsx("div",{className:"flex items-center gap-2 mb-1",children:!x&&c.jsx("button",{onClick:async()=>{if(g)"speechSynthesis"in window&&window.speechSynthesis.cancel(),f(!1),p({title:"Èü≥Â£∞Ë™≠„Åø‰∏ä„Åí„ÇíÂÅúÊ≠¢„Åó„Åæ„Åó„Åü",duration:2e3});else{const t=e.content||e.text||"";if(!x&&t&&"string"==typeof t&&t.trim()){f(!0),p({title:"Èü≥Â£∞Ë™≠„Åø‰∏ä„Åí„ÇíÈñãÂßã„Åó„Åæ„Åô",duration:2e3});try{await((e,t={})=>new Promise((n,a)=>{if(!("speechSynthesis"in window))return void a(new Error("„Åì„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÈü≥Â£∞ÂêàÊàê„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì"));const s=new SpeechSynthesisUtterance(e);s.rate=t.rate||1,s.pitch=t.pitch||1,s.volume=t.volume||1,s.lang=t.lang||"ja-JP",s.onend=()=>{n()},s.onerror=e=>{a(new Error(`Èü≥Â£∞ÂêàÊàê„Ç®„É©„Éº: ${e.error}`))},window.speechSynthesis.cancel(),window.speechSynthesis.speak(s)}))(t,{rate:1,pitch:1,lang:"ja-JP"})}catch(y){p({title:"Èü≥Â£∞Ë™≠„Åø‰∏ä„Åí„Ç®„É©„Éº",description:y instanceof Error?y.message:"Èü≥Â£∞„ÅÆË™≠„Åø‰∏ä„Åí„Å´Â§±Êïó„Åó„Åæ„Åó„Åü",variant:"destructive"})}finally{f(!1)}}}},className:"w-8 h-8 flex items-center justify-center rounded-full shadow-sm \n                "+(g?"bg-indigo-600 text-white animate-pulse":"bg-blue-50 text-blue-600 hover:bg-blue-100"),title:g?"Èü≥Â£∞Ë™≠„Åø‰∏ä„Åí„ÇíÂÅúÊ≠¢":"Èü≥Â£∞Ë™≠„Åø‰∏ä„Åí",children:c.jsx(u,{size:16})})}),c.jsxs("div",{className:"px-4 py-3 mb-1 shadow-sm w-full "+(x?"chat-bubble-user bg-blue-500 text-white rounded-[18px_18px_18px_4px] border border-blue-500":"chat-bubble-ai bg-white rounded-[18px_18px_4px_18px] border border-gray-200"),children:[c.jsxs("div",{className:"relative",children:[(()=>{const t=e.content||"";return t.startsWith("data:image/")||t.includes(".jpg")||t.includes(".png")||t.includes("/knowledge-base/images/")?c.jsx("img",{src:t,alt:"ÁîªÂÉè",className:"rounded-lg max-w-xs cursor-pointer",style:{maxHeight:"300px",objectFit:"contain"},onClick:()=>v(t)}):c.jsx("p",{className:x?"text-white":"text-gray-900",children:t})})(),m&&c.jsx("button",{onClick:()=>{o&&(i(o),p({title:"„ÉÜ„Ç≠„Çπ„Éà„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü",description:"ÈÅ∏Êäû„Åó„Åü„ÉÜ„Ç≠„Çπ„Éà„ÅåÂÖ•ÂäõÊ¨Ñ„Å´„Ç≥„Éî„Éº„Åï„Çå„Åæ„Åó„Åü„ÄÇ"}),h(!1))},className:"absolute -top-2 -right-2 bg-blue-600 text-white p-1.5 rounded-full shadow-md hover:bg-blue-700 transition-colors",title:"ÂÖ•ÂäõÊ¨Ñ„Å´„Ç≥„Éî„Éº",children:c.jsx($,{size:14})})]}),(e.media&&e.media.length>0&&console.log("„É°„Éá„Ç£„Ç¢Ë°®Á§∫:",{messageId:e.id,mediaCount:e.media.length,mediaDetails:e.media.map((e,t)=>({index:t,type:e.type,urlPrefix:e.url.substring(0,50)+"...",urlLength:e.url.length,isBase64:e.url.startsWith("data:"),title:e.title,fileName:e.fileName}))}),c.jsx(c.Fragment,{children:e.media&&e.media.length>0&&c.jsxs("div",{className:"mt-3",children:[b&&e.media.length>0&&c.jsxs("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsxs("div",{className:"text-sm text-blue-700 font-medium mb-2",children:["üìã ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„ÉâÁîªÂÉè (",e.media.length,"‰ª∂)"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:e.media.map((t,n)=>c.jsx("div",{className:"relative",children:"image"===t.type&&c.jsxs("div",{className:"group cursor-pointer",children:[c.jsx("img",{src:t.url,alt:t.title||`„Ç¨„Ç§„ÉâÁîªÂÉè${n+1}`,className:"w-full h-20 object-cover rounded border border-blue-300 shadow-sm group-hover:shadow-md transition-shadow",onClick:()=>v(t.url),onLoad:a=>{console.log("ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„ÉâÁîªÂÉèË™≠„ÅøËæº„ÅøÊàêÂäü:",{messageId:e.id,mediaIndex:n,title:t.title,fileName:t.fileName})},onError:a=>{var s;console.error("ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„ÉâÁîªÂÉèË™≠„ÅøËæº„Åø„Ç®„É©„Éº:",{messageId:e.id,mediaIndex:n,url:t.url.substring(0,100)+"...",title:t.title});const r=a.target;r.onerror=null,r.style.display="none";const i=document.createElement("div");i.className="w-full h-20 bg-gray-100 border border-gray-300 rounded flex items-center justify-center",i.innerHTML=`\n                                <div class="text-center text-gray-500 text-xs">\n                                  <div class="mb-1">‚ö†Ô∏è</div>\n                                  <div>${t.fileName||"ÁîªÂÉè"}</div>\n                                </div>\n                              `,null==(s=r.parentNode)||s.insertBefore(i,r)}}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-20 rounded",children:c.jsx("div",{className:"bg-white bg-opacity-80 p-1 rounded",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),t.fileName&&c.jsx("div",{className:"text-xs text-gray-600 mt-1 truncate",children:t.fileName})]})},`${e.id}-guide-media-${n}`))})]}),(!b||0===e.media.length)&&e.media&&e.media.length>0&&c.jsx(c.Fragment,{children:e.media.map((t,n)=>c.jsxs("div",{className:"mt-2",children:["image"===t.type&&c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:t.url,alt:"Ê∑ª‰ªòÁîªÂÉè",className:"rounded-lg w-full max-w-xs cursor-pointer border border-blue-200 shadow-md",style:{maxHeight:"300px",objectFit:"contain"},onClick:()=>v(t.url),onLoad:a=>{console.log("ÁîªÂÉèË™≠„ÅøËæº„ÅøÊàêÂäü:",{messageId:e.id,mediaIndex:n,width:a.target.naturalWidth,height:a.target.naturalHeight,urlType:t.url.startsWith("data:")?"base64":"url"})},onError:a=>{var s,r;console.warn("ÁîªÂÉèË™≠„ÅøËæº„Åø„Ç®„É©„Éº:",{messageId:e.id,mediaIndex:n,url:t.url.substring(0,100)+"...",isBase64:t.url.startsWith("data:"),error:a});const i=a.target;if(i.onerror=null,t.url.startsWith("data:image/")){i.style.display="none";const e=document.createElement("div");e.className="flex items-center justify-center bg-gray-100 border border-gray-300 rounded-lg p-4 max-w-xs",e.innerHTML='<span class="text-gray-500 text-sm">ÁîªÂÉè„ÅÆË°®Á§∫„Å´Â§±Êïó„Åó„Åæ„Åó„Åü</span>',null==(s=i.parentNode)||s.insertBefore(e,i)}else if(t.url.includes("/api/")){i.style.display="none";const e=document.createElement("div");e.className="flex items-center justify-center bg-gray-100 border border-gray-300 rounded-lg p-4 max-w-xs",e.innerHTML='<span class="text-gray-500 text-sm">ÁîªÂÉè„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</span>',null==(r=i.parentNode)||r.insertBefore(e,i)}else i.src.includes("/placeholder-image.png")||(i.src="/placeholder-image.png")}}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",onClick:()=>v(t.url),children:c.jsx("div",{className:"bg-blue-600 bg-opacity-70 p-2 rounded-full",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})})]}),"video"===t.type&&c.jsxs("div",{className:"relative",children:[c.jsx("video",{src:t.url,controls:!0,className:"rounded-lg w-full max-w-xs border border-blue-200 shadow-md",style:{maxHeight:"300px"},onClick:e=>{e.stopPropagation()},onLoadedMetadata:a=>{console.log("ÂãïÁîª„É°„Çø„Éá„Éº„ÇøË™≠„ÅøËæº„ÅøÊàêÂäü:",{messageId:e.id,mediaIndex:n,duration:a.target.duration,urlType:t.url.startsWith("blob:")?"blob":"url"})},onError:a=>{console.error("ÂãïÁîªË™≠„ÅøËæº„Åø„Ç®„É©„Éº:",{messageId:e.id,mediaIndex:n,url:t.url.substring(0,100)+"...",isBlob:t.url.startsWith("blob:")})}}),c.jsx("div",{className:"absolute top-2 right-2 flex items-center justify-center opacity-50 hover:opacity-100 transition-opacity",onClick:()=>v(t.url),children:c.jsx("div",{className:"bg-blue-600 bg-opacity-70 p-2 rounded-full",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]})]},`${e.id}-media-${n}`))})]})}))]}),c.jsx("span",{className:"text-xs "+(x?"text-blue-400":"text-gray-400"),children:w})]}),c.jsx("div",{children:c.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(x?"bg-blue-500":"bg-gray-500"),children:c.jsx("span",{className:"text-white text-sm",children:x?"üë§":"ü§ñ"})})})]})}function Be({onSendMessage:e,isLoading:t=!1,disabled:a=!1}){const[i,o]=d.useState(""),[l,u]=d.useState([]),{recordedText:m,selectedText:p,draftMessage:x,setDraftMessage:b}=n(),w=function(){const[e,t]=d.useState(void 0);return d.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),n=()=>{t(window.innerWidth<768)};return e.addEventListener("change",n),t(window.innerWidth<768),()=>e.removeEventListener("change",n)},[]),{isMobile:!!e}}(),v=d.useRef(null),y=d.useRef(null);d.useEffect(()=>{p&&(o(p),w&&y.current?y.current.focus():v.current&&v.current.focus())},[p,w]);const j=e=>{o(e.target.value)},N=async n=>{if(n.preventDefault(),!i.trim()&&0===l.length)return;if(t||a)return;const s=i,r=[...l];o(""),u([]),await e(s,r)},k=()=>{window.dispatchEvent(new CustomEvent("open-camera"))},S=()=>{o(""),w&&y.current?y.current.focus():v.current&&v.current.focus()};return c.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-t border-blue-200 p-2 message-input-container",children:c.jsxs("form",{onSubmit:N,className:"flex items-center",children:[c.jsxs("div",{className:"flex-1 flex items-center bg-white border border-blue-200 rounded-full px-3 py-1 shadow-inner",children:[w?c.jsxs("div",{className:"flex-1 relative h-[48px]",children:[" ",c.jsx(g,{ref:y,className:"absolute inset-0 bg-transparent border-none focus-visible:ring-0 focus-visible:ring-offset-0 resize-none py-1 overflow-y-auto text-lg",placeholder:"„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ...",value:i,onChange:j,disabled:t,rows:1,style:{lineHeight:"1.2"},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N(e))}}),i.trim()&&c.jsx("button",{type:"button",onClick:S,className:"absolute right-1 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c.jsx(s,{size:16})})]}):c.jsxs("div",{className:"flex-1 h-[48px] flex items-center relative",children:[" ",c.jsx(h,{ref:v,type:"text",className:"w-full h-full bg-transparent border-none focus-visible:ring-0 focus-visible:ring-offset-0 text-lg",placeholder:"„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ...",value:i,onChange:j,disabled:t}),i.trim()&&c.jsx("button",{type:"button",onClick:S,className:"absolute right-1 text-gray-400 hover:text-gray-600",children:c.jsx(s,{size:16})})]}),c.jsx(r,{type:"submit",disabled:t||!i.trim(),size:"icon",variant:"ghost",className:"ml-1 p-1 min-w-[28px] min-h-[28px] h-7 w-7 bg-gradient-to-r from-sky-100 to-blue-100 hover:from-sky-200 hover:to-blue-200 rounded-full border border-blue-300",children:c.jsx(f,{className:"h-4 w-4 text-blue-600"})})]}),c.jsxs("div",{className:"md:hidden flex flex-col items-center ml-2",children:[c.jsx("span",{className:"text-xs font-medium text-indigo-700 mb-0.5",children:"„Ç´„É°„É©"}),c.jsx(r,{type:"button",onClick:k,size:"icon",variant:"ghost",className:"p-2 h-10 w-10 rounded-full bg-gradient-to-r from-indigo-100 to-cyan-100 hover:from-indigo-200 hover:to-cyan-200 border border-indigo-300",children:c.jsx(L,{className:"h-5 w-5 text-indigo-600"})})]}),c.jsxs("div",{className:"hidden md:flex md:flex-col md:items-center md:ml-2",children:[c.jsx("span",{className:"text-xs font-medium text-indigo-700 mb-0.5",children:"„Ç´„É°„É©"}),c.jsx(r,{type:"button",onClick:k,size:"icon",variant:"ghost",className:"p-2 h-10 w-10 rounded-full bg-gradient-to-r from-indigo-100 to-cyan-100 hover:from-indigo-200 hover:to-cyan-200 border border-indigo-300",children:c.jsx(L,{className:"h-5 w-5 text-indigo-600"})})]})]})})}function Ye(){const[e,t]=d.useState(!1),[i,o]=d.useState(!1),[l,u]=d.useState(!1),[h,g]=d.useState(null),[f,p]=d.useState(null),[j]=d.useState(!0),N=d.useRef(null),k=d.useRef(null),S=d.useRef([]),{captureImage:M,sendMessage:C}=n(),{toast:E}=a(),T=function(){const[e,t]=d.useState(window.innerWidth>window.innerHeight?"landscape":"portrait");return d.useEffect(()=>{const e=()=>{t(window.innerWidth>window.innerHeight?"landscape":"portrait")};return window.addEventListener("resize",e),window.addEventListener("orientationchange",e),e(),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),e}();d.useEffect(()=>{const e=e=>{console.log("üì∏ CameraModal: open-camera „Ç§„Éô„É≥„Éà„ÇíÂèó‰ø°„Åó„Åæ„Åó„Åü",e),t(!0)};return console.log("üì∏ CameraModal: open-camera „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÇíÁôªÈå≤„Åó„Åæ„Åó„Åü"),window.addEventListener("open-camera",e),()=>{console.log("üì∏ CameraModal: open-camera „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü"),window.removeEventListener("open-camera",e)}},[]),d.useEffect(()=>{if(e){(async()=>{try{const e=await navigator.permissions.query({name:"camera"});if(console.log("üì∏ „Ç´„É°„É©Ê®©ÈôêÁä∂ÊÖã:",e.state),"denied"===e.state)return void E({title:"„Ç´„É°„É©Ê®©Èôê„ÅåÊãíÂê¶„Åï„Çå„Å¶„ÅÑ„Åæ„Åô",description:"„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„Åß„Ç´„É°„É©„Ç¢„ÇØ„Çª„Çπ„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",variant:"destructive"})}catch(e){console.log("üì∏ Ê®©ÈôêAPI„ÅåÂà©Áî®„Åß„Åç„Åæ„Åõ„Çì:",e)}setTimeout(()=>{D()},300)})()}else W()},[e]);const D=async()=>{try{if(console.log("üì∏ „Ç´„É°„É©„Ç¢„ÇØ„Çª„ÇπÈñãÂßã"),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("„Åì„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØ„Ç´„É°„É©Ê©üËÉΩ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì");const e="https:"===location.protocol||"localhost"===location.hostname;if(console.log("üîí „Çª„Ç≠„É•„Ç¢„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà:",e,"„Éó„É≠„Éà„Ç≥„É´:",location.protocol,"„Éõ„Çπ„Éà:",location.hostname),!e)throw new Error("„Ç´„É°„É©„Ç¢„ÇØ„Çª„Çπ„Å´„ÅØHTTPSÊé•Á∂ö„ÅåÂøÖË¶Å„Åß„Åô");f&&(console.log("üõë Êó¢Â≠ò„ÅÆ„Çπ„Éà„É™„Éº„É†„ÇíÂÅúÊ≠¢"),f.getTracks().forEach(e=>e.stop())),console.log("üì∏ „Ç´„É°„É©Âà∂Á¥ÑË®≠ÂÆö:",{facingMode:j?"environment":"user",videoMode:i,constraints:{video:{facingMode:j?"environment":"user",width:{ideal:1280},height:{ideal:720}},audio:i}});const t={video:{facingMode:j?"environment":"user",width:{ideal:1280},height:{ideal:720}},audio:i};console.log("üì∏ getUserMediaÂëº„Å≥Âá∫„ÅóÈñãÂßã");const n=await navigator.mediaDevices.getUserMedia(t);console.log("‚úÖ getUserMediaÊàêÂäü:",{streamActive:n.active,videoTracks:n.getVideoTracks().length,audioTracks:n.getAudioTracks().length}),p(n),N.current&&(console.log("üì∫ „Éì„Éá„Ç™Ë¶ÅÁ¥†„Å´„Çπ„Éà„É™„Éº„É†Ë®≠ÂÆö"),N.current.srcObject=n,N.current.onloadedmetadata=()=>{var e;console.log("‚úÖ „Éì„Éá„Ç™„É°„Çø„Éá„Éº„ÇøË™≠„ÅøËæº„ÅøÂÆå‰∫Ü"),null==(e=N.current)||e.play().catch(e=>{console.error("‚ùå „Éì„Éá„Ç™ÂÜçÁîü„Ç®„É©„Éº:",e)})})}catch(e){console.error("‚ùå „Ç´„É°„É©„Ç¢„ÇØ„Çª„Çπ„Ç®„É©„Éº:",e);let t="„Ç´„É°„É©„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü";e instanceof Error&&(t="NotAllowedError"===e.name?"„Ç´„É°„É©„ÅÆ‰ΩøÁî®„ÅåË®±ÂèØ„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„Åß„Ç´„É°„É©„Ç¢„ÇØ„Çª„Çπ„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ":"NotFoundError"===e.name?"„Ç´„É°„É©„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ„Éá„Éê„Ç§„Çπ„Å´„Ç´„É°„É©„ÅåÊé•Á∂ö„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ":"NotReadableError"===e.name?"„Ç´„É°„É©„Åå‰ªñ„ÅÆ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Å´„Çà„Å£„Å¶‰ΩøÁî®„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ":"OverconstrainedError"===e.name?"„Ç´„É°„É©„ÅÆË®≠ÂÆö„Å´ÂïèÈ°å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÂà•„ÅÆ„Ç´„É°„É©„ÇíË©¶„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ":"SecurityError"===e.name?"„Çª„Ç≠„É•„É™„ÉÜ„Ç£‰∏ä„ÅÆÁêÜÁî±„Åß„Ç´„É°„É©„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Åæ„Åõ„Çì„ÄÇHTTPS„ÅßÊé•Á∂ö„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ":`„Ç´„É°„É©„Ç®„É©„Éº: ${e.message}`),E({title:"„Ç´„É°„É©„Ç®„É©„Éº",description:t,variant:"destructive"})}},W=()=>{f&&(f.getTracks().forEach(e=>e.stop()),p(null)),l&&A(),g(null)},P=()=>{if(S.current=[],f){const e=new MediaRecorder(f);k.current=e,e.ondataavailable=e=>{e.data.size>0&&S.current.push(e.data)},e.onstop=()=>{const e=new Blob(S.current,{type:"video/mp4"}),t=URL.createObjectURL(e);g(t),u(!1)},e.start(),u(!0)}},A=()=>{k.current&&l&&k.current.stop()};return c.jsx(x,{open:e,onOpenChange:t,children:c.jsxs(b,{className:("landscape"===T?"max-w-3xl":"max-w-md")+" p-0 overflow-hidden bg-blue-50 border border-blue-200 camera-modal","aria-describedby":"camera-modal-desc",children:[c.jsx(w,{className:"sr-only",children:"„Ç´„É°„É©"}),c.jsx("div",{id:"camera-modal-desc",className:"sr-only",children:"ÂÜôÁúü„ÇÑÂãïÁîª„ÇíÊíÆÂΩ±„Åô„Çã„Åü„ÇÅ„ÅÆ„Ç´„É°„É©„É¢„Éº„ÉÄ„É´"}),c.jsxs(v,{className:"p-4 border-b border-blue-200 flex flex-row justify-between items-center bg-blue-100",children:[c.jsx(w,{className:"text-indigo-600 text-lg font-bold",children:"„Ç´„É°„É©Ëµ∑Âãï"}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center bg-white px-2 py-1 rounded-full",children:[c.jsx(q,{className:"h-6 w-6 mr-2 text-indigo-600"}),c.jsx(m,{id:"camera-mode",checked:i,onCheckedChange:()=>{l&&A(),o(!i),g(null),W(),setTimeout(()=>D(),300)}}),c.jsx(F,{className:"h-6 w-6 ml-2 text-indigo-600"})]}),c.jsx(r,{variant:"ghost",size:"icon",className:"p-2 rounded-full hover:bg-blue-200 text-blue-700",onClick:()=>t(!1),children:c.jsx(s,{})})]})]}),c.jsxs("div",{className:"relative bg-black",children:[h?i?c.jsx("video",{src:h,controls:!0,className:`w-full ${"landscape"===T?"h-64":"h-80"} bg-neutral-800 object-contain`,onClick:()=>window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:h}}))}):c.jsx("img",{src:h,alt:"Captured",className:`w-full ${"landscape"===T?"h-64":"h-80"} bg-neutral-800 object-contain`,onClick:()=>window.dispatchEvent(new CustomEvent("preview-image",{detail:{url:h}}))}):c.jsx("video",{ref:N,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full ${"landscape"===T?"h-64":"h-80"} bg-neutral-800 object-cover`}),!h&&c.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center space-x-4",children:i?c.jsx(c.Fragment,{children:l?c.jsxs(c.Fragment,{children:[c.jsx(r,{className:"bg-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg",variant:"outline",size:"icon",onClick:A,children:c.jsx(O,{className:"h-6 w-6 text-blue-600"})}),c.jsx(r,{className:"bg-red-500 rounded-full w-14 h-14 flex items-center justify-center shadow-lg",variant:"outline",size:"icon",onClick:A,children:c.jsx(H,{className:"h-6 w-6 text-white"})})]}):c.jsx(r,{className:"bg-blue-600 rounded-full w-16 h-16 flex items-center justify-center shadow-lg border-2 border-white",variant:"outline",size:"icon",onClick:P,children:c.jsx(y,{className:"h-8 w-8 text-white"})})}):c.jsx(r,{className:"bg-blue-600 rounded-full w-16 h-16 flex items-center justify-center shadow-lg border-2 border-white",variant:"outline",size:"icon",onClick:()=>{if(N.current)if(i)l?A():P();else{const t=document.createElement("canvas"),n=N.current,a=874,s=1240;let{videoWidth:r,videoHeight:i}=n;if(r>a||i>s){const e=r/i;r>i?(r=a,i=a/e):(i=s,r=s*e)}t.width=r,t.height=i;const o=t.getContext("2d");if(o&&n){o.drawImage(n,0,0,r,i);try{const e=t.toDataURL("image/jpeg",.4);if(!e.startsWith("data:image/"))return console.error("Base64„Éá„Éº„Çø„ÅÆÂΩ¢Âºè„Åå‰∏çÊ≠£„Åß„Åô:",e.substring(0,50)),void console.error("canvas.toDataURL()„ÅÆÁµêÊûú:",typeof e,e.length);console.log("‚úÖ ÊíÆÂΩ±ÁîªÂÉè„ÇíBase64ÂΩ¢Âºè„ÅßÁîüÊàêÊàêÂäü:",{format:"image/jpeg",quality:.4,resolution:"150dpiÁõ∏ÂΩì",originalSize:`${n.videoWidth}x${n.videoHeight}`,compressedSize:`${r}x${i}`,maxResolution:`${a}x${s}`,dataLength:e.length,dataSizeMB:(e.length/1024/1024).toFixed(2),isValidBase64:e.startsWith("data:image/jpeg;base64,"),mimeType:e.split(";")[0],preview:e.substring(0,50)+"..."}),g(e)}catch(e){console.error("canvas.toDataURL()„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü:",e)}}}},children:c.jsx(y,{className:"h-12 w-12 text-white"})})})]}),c.jsx("div",{className:"p-4 bg-blue-50",children:h?c.jsx(r,{className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium text-lg",onClick:async()=>{if(h)try{console.log("ÊíÆÂΩ±„Åó„ÅüÁîªÂÉè„Çí„ÉÅ„É£„ÉÉ„Éà„Å´ÈÄÅ‰ø°„Åó„Åæ„Åô");let e=h;if(!h.startsWith("data:image/")){if(console.log("ÁîªÂÉè„Éá„Éº„Çø„ÅåBase64ÂΩ¢Âºè„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇÂ§âÊèõ„Åó„Åæ„Åô:",typeof h),"object"==typeof h)return void console.error("ÁîªÂÉè„Éá„Éº„Çø„Åå„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÂΩ¢Âºè„Åß„Åô„ÄÇBase64Â§âÊèõ„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ");e=`data:image/jpeg;base64,${h}`}console.log("ÈÄÅ‰ø°„Åô„ÇãÁîªÂÉè„Éá„Éº„Çø:",{isBase64:e.startsWith("data:image/"),urlLength:e.length,mimeType:e.split(";")[0],preview:e.substring(0,50)+"..."}),await C(e),t(!1),g(null)}catch(e){console.error("ÁîªÂÉèÈÄÅ‰ø°„Ç®„É©„Éº:",e)}},children:"ÈÄÅ‰ø°„Åô„Çã"}):c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("p",{className:"text-sm text-blue-700 font-medium",children:i?l?"Èå≤Áîª‰∏≠... ÂÅúÊ≠¢„Åô„Çã„Å´„ÅØ‚ñ°„Çí„Çø„ÉÉ„Éó":"‚óé „Çí„Çø„ÉÉ„Éó„Åó„Å¶Èå≤ÁîªÈñãÂßã":"‚óã „Çí„Çø„ÉÉ„Éó„Åó„Å¶ÂÜôÁúüÊíÆÂΩ±"})})})]})})}function Qe(e){if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;if(e.includes("/knowledge-base/images/"))return e;if(e.includes("/uploads/"))return e.replace("/uploads/","/knowledge-base/");if(e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".svg")){const t=e.split("/").pop();if(t){if(t.endsWith(".svg")){return`/knowledge-base/images/${t.replace(".svg",".png")}`}return`/knowledge-base/images/${t}`}}return e}function Ve(){var e,t;const[n,a]=d.useState(!1),[i,o]=d.useState(""),[l,u]=d.useState(""),[m,h]=d.useState(""),[g,f]=d.useState([]),[p,w]=d.useState(0),[v,y]=d.useState(null),[N,k]=d.useState(!1),[S,M]=d.useState("ÁîªÂÉè„Éó„É¨„Éì„É•„Éº"),[C,E]=d.useState(""),T=e=>{if(!g.length)return;let t;t="next"===e?(p+1)%g.length:(p-1+g.length)%g.length,w(t);const n=g[t];o(n),u("")};d.useEffect(()=>{const e=e=>{const t=e;if(t.detail){if(t.detail.url&&o(t.detail.url),t.detail.pngFallbackUrl?u(t.detail.pngFallbackUrl):u(""),t.detail.title?M(t.detail.title):M("ÁîªÂÉè„Éó„É¨„Éì„É•„Éº"),t.detail.content?E(t.detail.content):E(""),t.detail.metadata_json?(h(t.detail.metadata_json),(async e=>{try{k(!0);const t=await fetch(e);if(!t.ok)throw new Error("Metadata fetch failed");const n=await t.json();y(n)}catch(t){console.error("Failed to load metadata:",t),y(null)}finally{k(!1)}})(t.detail.metadata_json)):(h(""),y(null)),t.detail.all_slides&&Array.isArray(t.detail.all_slides)){f(t.detail.all_slides);const e=t.detail.all_slides.findIndex(e=>e===t.detail.url);w(e>=0?e:0)}else f([]),w(0);a(!0)}};return window.addEventListener("preview-image",e),()=>{window.removeEventListener("preview-image",e)}},[]);const D=(()=>{if(!v||!v.slides)return null;const e=p+1;return v.slides.find(t=>t.„Çπ„É©„Ç§„ÉâÁï™Âè∑===e)})();return c.jsx(x,{open:n,onOpenChange:a,children:c.jsxs(b,{className:"max-w-5xl bg-black bg-opacity-90 border border-blue-400 flex flex-col items-center justify-center p-0 rounded-xl","aria-labelledby":"dialog-title","aria-describedby":"dialog-description image-preview-description",children:[c.jsxs("div",{className:"sr-only",children:[c.jsx("h2",{id:"dialog-title",children:(null==(e=null==v?void 0:v.metadata)?void 0:e.„Çø„Ç§„Éà„É´)||S}),c.jsx("p",{id:"dialog-description",children:"Êã°Â§ßÁîªÂÉè„Éì„É•„Éº„ÉØ„Éº"}),c.jsx("p",{id:"image-preview-description",children:"ÁîªÂÉè„ÅÆ„Éó„É¨„Éì„É•„ÉºË°®Á§∫„Å®Èñ¢ÈÄ£ÊÉÖÂ†±„ÅÆÁ¢∫Ë™ç„Åå„Åß„Åç„Åæ„Åô"})]}),c.jsxs("div",{className:"w-full flex justify-between items-center p-2 bg-blue-700 text-white",children:[c.jsxs("h3",{className:"text-sm font-medium ml-2",children:[(null==(t=null==v?void 0:v.metadata)?void 0:t.„Çø„Ç§„Éà„É´)||S,g.length>1&&` - „Çπ„É©„Ç§„Éâ ${p+1}/${g.length}`]}),c.jsx("div",{className:"flex items-center",children:c.jsx(r,{className:"text-white hover:bg-blue-600 rounded-full",variant:"ghost",size:"icon",onClick:()=>a(!1),children:c.jsx(s,{className:"h-5 w-5"})})})]}),c.jsxs("div",{className:"relative w-full max-h-[70vh] flex items-center justify-center p-2",children:[g.length>1&&c.jsx(r,{className:"absolute left-2 z-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full opacity-75 hover:opacity-100",size:"icon",onClick:()=>T("prev"),children:c.jsx(_,{className:"h-5 w-5"})}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-0 bg-gray-50",children:c.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-blue-600 border-t-transparent animate-spin"})}),c.jsx("img",{src:Qe(i||""),alt:(null==D?void 0:D.„Çø„Ç§„Éà„É´)||S||"Êã°Â§ßÁîªÂÉè",className:"max-w-full max-h-[70vh] object-contain rounded-lg border border-blue-500 z-10 relative",loading:"eager",decoding:"async",onLoad:e=>{const t=e.currentTarget;t.classList.add("loaded");const n=t.parentElement;if(n){n.querySelectorAll(".animate-spin").forEach(e=>{e.parentElement&&(e.parentElement.style.display="none")})}},onError:e=>{const t=e.currentTarget,n=t.src||"";console.log("ÁîªÂÉèË°®Á§∫„Ç®„É©„Éº:",n);try{if(l&&""!==l.trim())return console.log("ÊåáÂÆö„Åï„Çå„Åü„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØURL„Çí‰ΩøÁî®:",l),void(t.src=Qe(l));if(n.endsWith(".svg")){console.log("SVG->PNG„ÅÆ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ");const e=n.replace(".svg",".png");return void(t.src=e)}if(n.endsWith(".jpeg")||n.endsWith(".jpg")){console.log("JPEG->PNG„ÅÆ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ");const e=n.replace(/\.(jpeg|jpg)$/,".png");return void(t.src=e)}if(!n.includes("/knowledge-base/")){const e=n.split("/").pop();if(e)return console.log("„Éë„ÇπÂΩ¢Âºè„Ç®„É©„Éº„ÄÅknowledge-base„Éë„Çπ„Å´‰øÆÊ≠£"),void(t.src=`/knowledge-base/images/${e}`)}if(g.length>1){const e=(p+1)%g.length;return console.log(`ÁèæÂú®„ÅÆ„Çπ„É©„Ç§„Éâ„ÅåË°®Á§∫„Åß„Åç„Å™„ÅÑ„Åü„ÇÅ„ÄÅÊ¨°„ÅÆ„Çπ„É©„Ç§„Éâ(${e})„Å´Âàá„ÇäÊõø„Åà`),void T("next")}console.log("„Åô„Åπ„Å¶„ÅÆ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØË©¶Ë°å„ÅåÂ§±Êïó„ÄÅ„Ç®„É©„ÉºË°®Á§∫");const e=t.parentElement;if(e&&(t.style.opacity="0.2",!e.querySelector(".error-message"))){const t=document.createElement("div");t.className="error-message absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 text-white p-4 rounded-lg z-20";const a=document.createElement("p");a.className="text-xl mb-2",a.textContent="ÁîªÂÉè„ÇíË™≠„ÅøËæº„ÇÅ„Åæ„Åõ„Çì„Åß„Åó„Åü";const s=document.createElement("p");s.className="text-sm",s.textContent=n.split("/").pop()||"",t.appendChild(a),t.appendChild(s),e.appendChild(t)}}catch(a){console.error("„Ç®„É©„ÉºÂá¶ÁêÜ‰∏≠„Å´‰æãÂ§ñ„ÅåÁô∫Áîü:",a)}}}),g.length>1&&c.jsx(r,{className:"absolute right-2 z-10 bg-blue-600 hover:bg-blue-700 text-white rounded-full opacity-75 hover:opacity-100",size:"icon",onClick:()=>T("next"),children:c.jsx(j,{className:"h-5 w-5"})})]}),!1,g.length>1&&c.jsx("div",{className:"w-full px-2 py-3 border-t border-blue-500 overflow-x-auto flex bg-gray-800",children:g.map((e,t)=>c.jsx("div",{className:"flex-shrink-0 mx-1 cursor-pointer transition-all "+(t===p?"border-2 border-blue-500 scale-105":"border border-gray-600 hover:border-blue-400"),onClick:()=>{w(t),o(e),u("")},children:c.jsxs("div",{className:"relative h-16 w-24",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-700 z-0",children:c.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-blue-500 border-t-transparent animate-spin"})}),c.jsx("img",{src:Qe(e),alt:`„Çπ„É©„Ç§„Éâ ${t+1}`,className:"h-16 w-24 object-cover relative z-10",loading:"eager",decoding:"async",onLoad:e=>{const t=e.currentTarget.parentElement;if(t){t.querySelectorAll(".animate-spin").forEach(e=>{e.parentElement&&(e.parentElement.style.display="none")})}},onError:e=>{console.log(`„Çµ„É†„Éç„Ç§„É´(${t})Ë™≠„ÅøËæº„Åø„Ç®„É©„Éº`);const n=e.currentTarget;n.style.opacity="0.3";const a=n.parentElement;if(a){const e=document.createElement("div");e.className="absolute inset-0 flex items-center justify-center z-20 bg-black bg-opacity-50 text-white text-xs",e.textContent="Ë™≠Ëæº„Ç®„É©„Éº",a.appendChild(e)}}})]})},t))})]})})}const Xe=({onKeywordClick:e})=>c.jsxs("div",{className:"flex flex-wrap gap-2 my-3",children:[c.jsx("span",{className:"text-sm text-gray-600 self-center mr-1",children:"‰ª£Ë°®ÁöÑ„Å™„Ç≠„Éº„ÉØ„Éº„Éâ:"}),["„Ç®„É≥„Ç∏„É≥","„Éà„É´„Ç≥„É≥","„Éñ„É¨„Éº„Ç≠","„Ç®„Ç¢„ÉºÂõûË∑Ø"].map(t=>c.jsx(r,{variant:"outline",size:"sm",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200",onClick:()=>e(t),children:t},t))]});function Ge(){const[e,t]=d.useState([]),[n,a]=d.useState(""),[s,o]=d.useState(!1),[l,u]=d.useState(null),[m,g]=d.useState(null),[f,p]=d.useState(null),x=d.useRef(null),b=d.useRef(!1);d.useEffect(()=>{var e;null==(e=x.current)||e.scrollIntoView({behavior:"smooth"})},[e]);d.useEffect(()=>{b.current||(b.current=!0,(async()=>{o(!0);try{const e=await fetch("/api/interactive-diagnosis/start",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Ë®∫Êñ≠„Çª„ÉÉ„Ç∑„Éß„É≥ÈñãÂßã„Å´Â§±Êïó");const n=await e.json();u(n.diagnosisState),g(n.interactiveResponse),p(n.sessionId),n.interactiveResponse.nextQuestion?t([{id:Date.now(),content:n.interactiveResponse.nextQuestion,isAiResponse:!0,timestamp:new Date,type:"question"}]):t([{id:Date.now(),content:n.interactiveResponse.message,isAiResponse:!0,timestamp:new Date,type:"message"}])}catch(e){console.error("Ë®∫Êñ≠ÈñãÂßã„Ç®„É©„Éº:",e)}finally{o(!1)}})())},[]);const w=async e=>{if(!e.trim()||!l)return;o(!0);const n={id:Date.now(),content:e,isAiResponse:!1,timestamp:new Date,type:"message"};t(e=>[...e,n]),a("");try{const n=await fetch("/api/interactive-diagnosis",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userResponse:e,currentState:l})});if(!n.ok)throw new Error("Ë®∫Êñ≠Âá¶ÁêÜ„Å´Â§±Êïó");const a=await n.json();u(a.updatedState),g(a.interactiveResponse),a.interactiveResponse.nextQuestion?t(e=>[...e,{id:Date.now()+1,content:a.interactiveResponse.nextQuestion,isAiResponse:!0,timestamp:new Date,type:"question"}]):t(e=>[...e,{id:Date.now()+1,content:a.interactiveResponse.message,isAiResponse:!0,timestamp:new Date,type:y(a.interactiveResponse.priority)}])}catch(s){console.error("Ë®∫Êñ≠Âá¶ÁêÜ„Ç®„É©„Éº:",s);const e={id:Date.now()+1,content:"„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇÂÜçÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ",isAiResponse:!0,timestamp:new Date,type:"message"};t(t=>[...t,e])}finally{o(!1)}},v=e=>{w(e)},y=e=>{switch(e){case"safety":return"safety";case"action":return"action";case"diagnosis":return"question";default:return"message"}},j=e=>{switch(e){case"safety":return c.jsx(T,{className:"w-4 h-4 text-red-500"});case"action":return c.jsx(i,{className:"w-4 h-4 text-blue-500"});case"question":return c.jsx(R,{className:"w-4 h-4 text-purple-500"});default:return null}};return c.jsx("div",{className:"max-w-4xl mx-auto p-4",children:c.jsxs(N,{className:"h-[700px] flex flex-col",children:[c.jsx(k,{className:"py-2 border-b",children:c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs(S,{className:"flex items-center gap-2 text-base font-semibold",children:[c.jsx(i,{className:"w-4 h-4"})," AI„Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„ÉñÊîØÊè¥"]}),l&&c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx(C,{variant:"outline",className:(e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}})(l.collectedInfo.urgency),children:l.collectedInfo.urgency}),c.jsxs(C,{variant:"outline",children:[c.jsx(z,{className:"w-3 h-3 mr-1"}),"‰ø°È†º ",Math.round(100*l.confidence),"%"]}),c.jsx(C,{variant:"outline",children:l.phase})]})]})}),c.jsx(M,{className:"flex-1 flex flex-col",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[!l&&c.jsx("div",{className:"flex justify-center py-8",children:c.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[c.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}),"ÂàùÊúüÂåñ‰∏≠..."]})}),e.map(e=>c.jsx("div",{className:"flex "+(e.isAiResponse?"justify-end":"justify-start"),children:c.jsxs("div",{className:"max-w-[80%] p-3 rounded-lg shadow-sm "+(e.isAiResponse?"bg-white border border-gray-200 text-gray-800 rounded-[18px_18px_4px_18px]":"bg-blue-600 text-white rounded-[18px_18px_18px_4px]"),children:[e.isAiResponse&&c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[j(e.type),c.jsx("span",{className:"text-[11px] font-medium text-gray-500 tracking-wide",children:"GPT„Çµ„Éù„Éº„Éà"})]}),c.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:e.content}),c.jsx("div",{className:"text-[10px] opacity-60 mt-1 text-right",children:e.timestamp.toLocaleTimeString()})]})},e.id)),s&&c.jsx("div",{className:"flex justify-start",children:c.jsx("div",{className:"bg-white border border-gray-200 p-3 rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}),c.jsx("span",{className:"text-sm text-gray-600",children:"ÂàÜÊûê‰∏≠..."})]})})}),c.jsx("div",{ref:x})]}),l&&(null==m?void 0:m.options)&&m.options.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"„ÇØ„Ç§„ÉÉ„ÇØÈÅ∏Êäû:"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.options.map((e,t)=>c.jsx(r,{variant:"outline",size:"sm",onClick:()=>v(e),disabled:s,className:"text-sm",children:e},t)),m.details&&!e.some(e=>e.content.includes(m.details))&&c.jsx(r,{variant:"secondary",size:"sm",onClick:()=>v("Ë©≥Á¥∞"),disabled:s,className:"text-sm",children:"Ë©≥Á¥∞"})]})]}),l&&(null==m?void 0:m.requiresInput)&&"completed"!==l.phase&&c.jsxs("div",{className:"flex gap-2",children:[c.jsx(h,{value:n,onChange:e=>a(e.target.value),placeholder:"ÂõûÁ≠î„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ...",onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),w(n))},disabled:s,className:"flex-1"}),c.jsx(r,{onClick:()=>w(n),disabled:s||!n.trim(),className:"bg-blue-600 hover:bg-blue-700",children:"ÈÄÅ‰ø°"})]}),"completed"===(null==l?void 0:l.phase)&&c.jsxs("div",{className:"text-center p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx(E,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),c.jsx("p",{className:"text-green-800 font-medium",children:"Ë®∫Êñ≠„ÉªÂØæÂøú„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü"}),c.jsx(r,{onClick:()=>window.location.reload(),className:"mt-2",variant:"outline",children:"Êñ∞„Åó„ÅÑË®∫Êñ≠„ÇíÈñãÂßã"})]})]})})]})})}function Je(){const{user:e}=t(),{messages:i,setMessages:u,sendMessage:m,isLoading:g,clearChatHistory:f,isClearing:x,chatId:b,initializeChat:w,exportChatHistory:v}=n();null==e||e.role;const{toast:y}=a();o();const j=d.useRef(null);d.useRef(null);const[N,k]=d.useState(!1),[S,M]=d.useState([]),[C,E]=d.useState([]),[T,_]=d.useState(null),[z,$]=d.useState(""),[R,O]=d.useState(!1),[H,q]=d.useState(!1),[F,U]=d.useState(!1),[B,Y]=d.useState(null),[Q,V]=d.useState(0),[X,G]=d.useState(0),[J,K]=d.useState(""),[Z,ee]=d.useState([]),[te,ne]=d.useState([]),[ae,se]=d.useState(""),[re,ie]=d.useState(""),[oe,le]=d.useState(!1),[ce,de]=d.useState(!1),[ue,me]=d.useState(""),[he,ge]=d.useState(""),[fe,pe]=d.useState(!1),[xe,be]=d.useState(!1),[we,ve]=d.useState([]),[ye,je]=d.useState([]),[Ne,ke]=d.useState(!1),[Se,Me]=d.useState(null),[Ce,Ee]=d.useState([]),[Te,De]=d.useState(!1);d.useEffect(()=>{Ie(),We()},[]),d.useEffect(()=>{console.log("üîç Ê©üÁ®Æ„Éá„Éº„ÇøÊõ¥Êñ∞Ê§úÁü•:",{machineTypesCount:Z.length,machineTypes:Z,filteredMachineTypesCount:we.length}),ve(Z)},[Z]),d.useEffect(()=>{console.log("üîç Ê©üÊ¢∞Áï™Âè∑„Éá„Éº„ÇøÊõ¥Êñ∞Ê§úÁü•:",{machinesCount:te.length,machines:te,filteredMachinesCount:ye.length}),je(te)},[te]);const We=async()=>{try{De(!0);const{buildApiUrl:e}=await l(async()=>{const{buildApiUrl:e}=await import("./index-D2n-Q-xG.js").then(e=>e.I);return{buildApiUrl:e}},__vite__mapDeps([0,1,2,3])),t=e("/knowledge-base"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch knowledge data: ${n.statusText}`);{const e=await n.json();e.success?(Ee(e.data),console.log("‚úÖ „Éä„É¨„ÉÉ„Ç∏„Éá„Éº„ÇøÂèñÂæóÊàêÂäü:",e.data.length+"‰ª∂")):(console.error("‚ùå „Éä„É¨„ÉÉ„Ç∏„Éá„Éº„ÇøÂèñÂæóÂ§±Êïó:",e.message),Ee([]))}}catch(e){console.error("‚ùå „Éä„É¨„ÉÉ„Ç∏„Éá„Éº„ÇøÂèñÂæó„Ç®„É©„Éº:",e),y({title:"„Ç®„É©„Éº",description:e instanceof Error?e.message:"„Éä„É¨„ÉÉ„Ç∏„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü",variant:"destructive"}),Ee([])}finally{De(!1)}};d.useEffect(()=>{const e=e=>{const t=e.target;t.closest("#machine-type")||t.closest("#machine-number")||t.closest("#machine-type-menu")||t.closest("#machine-number-menu")||(pe(!1),be(!1))};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]);const[Pe,Ae]=d.useState(null),Ie=d.useCallback(async()=>{try{le(!0),console.log("üîç Ê©üÁ®Æ‰∏ÄË¶ßÂèñÂæóÈñãÂßã");const{buildApiUrl:e}=await l(async()=>{const{buildApiUrl:e}=await import("./index-D2n-Q-xG.js").then(e=>e.I);return{buildApiUrl:e}},__vite__mapDeps([0,1,2,3])),t=e("/machines/machine-types");console.log("üîç Ê©üÁ®Æ‰∏ÄË¶ßÂèñÂæóURL:",t),console.log("üîç ÁèæÂú®„ÅÆURL:",window.location.href),console.log("üîç Áí∞Â¢ÉÂ§âÊï∞:",{VITE_API_BASE_URL:void 0,NODE_ENV:void 0,MODE:"production"});const n=await fetch(t,{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},credentials:"include"});if(console.log("üîç Ê©üÁ®Æ‰∏ÄË¶ßÂèñÂæó„É¨„Çπ„Éù„É≥„Çπ„Çπ„ÉÜ„Éº„Çø„Çπ:",n.status),console.log("üîç Ê©üÁ®Æ‰∏ÄË¶ßÂèñÂæó„É¨„Çπ„Éù„É≥„Çπ„Éò„ÉÉ„ÉÄ„Éº:",Object.fromEntries(n.headers.entries())),n.ok){const e=await n.json();console.log("‚úÖ Ê©üÁ®Æ‰∏ÄË¶ßÂèñÂæóÁµêÊûú:",e),e.success&&Array.isArray(e.data)?(console.log("‚úÖ Ê©üÁ®Æ‰∏ÄË¶ßË®≠ÂÆöÂÆå‰∫Ü:",e.data.length,"‰ª∂"),console.log("‚úÖ Ê©üÁ®Æ„Éá„Éº„Çø:",e.data),ee(e.data),ve(e.data),0===e.data.length&&console.log("‚ö†Ô∏è Ê©üÁ®Æ„Éá„Éº„Çø„Åå0‰ª∂„Åß„Åô")):(console.error("‚ùå Ê©üÁ®Æ‰∏ÄË¶ßÂèñÂæóÊàêÂäü„Å†„Åå„Éá„Éº„Çø„ÅåÁÑ°Âäπ:",e),ee([]),ve([]))}else{const e=await n.text();console.error("‚ùå Ê©üÁ®Æ‰∏ÄË¶ßÂèñÂæó„Ç®„É©„Éº:",n.status,e),401===n.status&&console.log("üîê Ë™çË®º„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ"),ee([]),ve([])}}catch(e){console.error("‚ùå Ê©üÁ®Æ‰∏ÄË¶ßÂèñÂæó„Ç®„É©„Éº:",e),ee([]),ve([])}finally{le(!1),console.log("üîç Ê©üÁ®Æ‰∏ÄË¶ßÂèñÂæóÂÆå‰∫Ü„ÄÅÊúÄÁµÇÁä∂ÊÖã:",{machineTypesCount:Z.length,filteredMachineTypesCount:we.length})}},[]),Le=e=>{if(console.log("üîç Ê©üÁ®Æ„Éï„Ç£„É´„Çø„É™„É≥„Ç∞ÈñãÂßã:",e,"Ê©üÁ®ÆÊï∞:",Z.length),!e.trim())return console.log("‚úÖ ÂÖ•Âäõ„ÅåÁ©∫„ÅÆ„Åü„ÇÅÂÖ®Ê©üÁ®Æ„ÇíË°®Á§∫:",Z.length,"‰ª∂"),void ve(Z);const t=Z.filter(t=>t.machine_type_name.toLowerCase().includes(e.toLowerCase()));console.log("‚úÖ „Éï„Ç£„É´„Çø„É™„É≥„Ç∞ÁµêÊûú:",t.length,"‰ª∂"),ve(t)},_e=e=>{if(console.log("üîç Ê©üÊ¢∞Áï™Âè∑„Éï„Ç£„É´„Çø„É™„É≥„Ç∞ÈñãÂßã:",e,"Ê©üÊ¢∞Êï∞:",te.length),!e.trim())return console.log("‚úÖ ÂÖ•Âäõ„ÅåÁ©∫„ÅÆ„Åü„ÇÅÂÖ®Ê©üÊ¢∞„ÇíË°®Á§∫:",te.length,"‰ª∂"),void je(te);const t=te.filter(t=>t.machine_number.toLowerCase().includes(e.toLowerCase()));console.log("‚úÖ „Éï„Ç£„É´„Çø„É™„É≥„Ç∞ÁµêÊûú:",t.length,"‰ª∂"),je(t)},ze=d.useCallback(async e=>{try{de(!0),console.log("üîç Ê©üÊ¢∞Áï™Âè∑‰∏ÄË¶ßÂèñÂæóÈñãÂßã, Ê©üÁ®ÆID:",e);const{buildApiUrl:t}=await l(async()=>{const{buildApiUrl:e}=await import("./index-D2n-Q-xG.js").then(e=>e.I);return{buildApiUrl:e}},__vite__mapDeps([0,1,2,3])),n=t(`/machines/machines?type_id=${e}`);console.log("üîç Ê©üÊ¢∞Áï™Âè∑‰∏ÄË¶ßÂèñÂæóURL:",n);const a=await fetch(n,{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},credentials:"include"});if(console.log("üîç Ê©üÊ¢∞Áï™Âè∑‰∏ÄË¶ßÂèñÂæó„É¨„Çπ„Éù„É≥„Çπ„Çπ„ÉÜ„Éº„Çø„Çπ:",a.status),a.ok){const e=await a.json();console.log("‚úÖ Ê©üÊ¢∞Áï™Âè∑‰∏ÄË¶ßÂèñÂæóÁµêÊûú:",e),e.success?(console.log("‚úÖ Ê©üÊ¢∞Áï™Âè∑‰∏ÄË¶ßË®≠ÂÆöÂÆå‰∫Ü:",e.data.length,"‰ª∂"),console.log("‚úÖ Ê©üÊ¢∞Áï™Âè∑„Éá„Éº„Çø:",e.data),ne(e.data),je(e.data),console.log("üîß Ê©üÊ¢∞Áï™Âè∑ÂèñÂæóÂæå„ÅÆÁä∂ÊÖã:",{machinesCount:e.data.length,machines:e.data,machineNumberInput:he,selectedMachineNumber:re,showMachineNumberSuggestions:xe})):(console.error("‚ùå Ê©üÊ¢∞Áï™Âè∑‰∏ÄË¶ßÂèñÂæóÊàêÂäü„Å†„Ååsuccess=false:",e),ne([]),je([]))}else{const e=await a.text();console.error("‚ùå Ê©üÊ¢∞Áï™Âè∑‰∏ÄË¶ßÂèñÂæó„Ç®„É©„Éº:",a.status,e),ne([]),je([])}}catch(t){console.error("‚ùå Ê©üÊ¢∞Áï™Âè∑‰∏ÄË¶ßÂèñÂæó„Ç®„É©„Éº:",t),ne([]),je([])}finally{de(!1),console.log("üîç Ê©üÊ¢∞Áï™Âè∑‰∏ÄË¶ßÂèñÂæóÂÆå‰∫Ü„ÄÅÊúÄÁµÇÁä∂ÊÖã:",{machinesCount:te.length,filteredMachinesCount:ye.length})}},[te.length,ye.length,he,re,xe]);d.useEffect(()=>{var e;null==(e=j.current)||e.scrollIntoView({behavior:"smooth"})},[i]),d.useEffect(()=>{if(console.log("üöÄ „ÉÅ„É£„ÉÉ„Éà„Éö„Éº„Ç∏„Éû„Ç¶„É≥„Éà - ÂàùÊúüÂåñÈñãÂßã"),!b){console.log("üîÑ „ÉÅ„É£„ÉÉ„ÉàID„ÅåÊú™Ë®≠ÂÆö„ÅÆ„Åü„ÇÅÂàùÊúüÂåñ„ÇíÂÆüË°å");try{w()}catch(e){console.error("‚ùå „ÉÅ„É£„ÉÉ„ÉàIDÂàùÊúüÂåñ„Ç®„É©„Éº:",e)}}Ie().catch(e=>{console.error("‚ùå Ê©üÁ®Æ„Éá„Éº„ÇøÂèñÂæó„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„Åå„ÄÅ„ÉÅ„É£„ÉÉ„ÉàÁîªÈù¢„ÅØË°®Á§∫„Åï„Çå„Åæ„Åô:",e)})},[b,w,Ie]),d.useEffect(()=>{console.log("üìä Ê©üÁ®Æ„Éá„Éº„ÇøÁä∂ÊÖãÊõ¥Êñ∞:",{machineTypesCount:Z.length,selectedMachineType:ae,machineTypeInput:ue,isLoadingMachineTypes:oe}),Z.length>0&&Le(ue)},[Z,ue]),d.useEffect(()=>{console.log("üìä Ê©üÁ®ÆÂÖ•ÂäõÁä∂ÊÖãÊõ¥Êñ∞:",{machineTypeInput:ue,selectedMachineType:ae})},[ue,ae]),d.useEffect(()=>{console.log("üîç machineTypeInputÂÄ§Â§âÊõ¥Ê§úÂá∫:",{currentValue:ue,length:ue.length,timestamp:(new Date).toISOString()})},[ue]),d.useEffect(()=>{console.log("üìä Ê©üÊ¢∞Áï™Âè∑„Éá„Éº„ÇøÁä∂ÊÖãÊõ¥Êñ∞:",{machinesCount:te.length,selectedMachineNumber:re,machineNumberInput:he,isLoadingMachines:ce}),te.length>0&&_e(he)},[te,he]),d.useEffect(()=>{console.log("üìä Ê©üÊ¢∞Áï™Âè∑ÂÖ•ÂäõÁä∂ÊÖãÊõ¥Êñ∞:",{machineNumberInput:he,selectedMachineNumber:re})},[he,re]),d.useEffect(()=>{let e;return F&&B&&(e=setInterval(()=>{const e=new Date,t=Math.floor((e.getTime()-B.getTime())/1e3);V(t)},1e3)),()=>{e&&clearInterval(e)}},[F,B]);const $e=async()=>{try{console.log("üöÄ ÈÄÅ‰ø°Ââç„ÅÆÁä∂ÊÖãÁ¢∫Ë™ç:",{chatId:b,messagesLength:i.length,hasChatId:!!b,hasMessages:i.length>0,messagesWithContent:i.filter(e=>e.content&&e.content.trim()).length,machineInfo:{selectedMachineType:ae,selectedMachineNumber:re,machineTypeInput:ue,machineNumberInput:he}});const n=!!b,a=i.length>0,s=i.some(e=>e.content&&e.content.trim());if(console.log("üîç ÈÄÅ‰ø°Êù°‰ª∂„ÉÅ„Çß„ÉÉ„ÇØ:",{hasValidChatId:n,hasMessages:a,hasValidMessages:s,messagesCount:i.length,messagesWithContent:i.filter(e=>e.content&&e.content.trim()).length}),!n){console.log("‚ùå ÈÄÅ‰ø°„Ç®„É©„Éº: „ÉÅ„É£„ÉÉ„ÉàID„ÅåÁÑ°Âäπ - ÂàùÊúüÂåñ„ÇíË©¶Ë°å");try{return await w(),console.log("‚úÖ „ÉÅ„É£„ÉÉ„ÉàIDÂàùÊúüÂåñÊàêÂäü"),void setTimeout(()=>{$e()},100)}catch(e){return console.error("‚ùå „ÉÅ„É£„ÉÉ„ÉàIDÂàùÊúüÂåñ„Ç®„É©„Éº:",e),void y({title:"ÈÄÅ‰ø°„Ç®„É©„Éº",description:"„ÉÅ„É£„ÉÉ„ÉàID„ÅÆÂàùÊúüÂåñ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ",variant:"destructive"})}}if(!s)return console.log("‚ùå ÈÄÅ‰ø°„Ç®„É©„Éº: ÊúâÂäπ„Å™„É°„ÉÉ„Çª„Éº„Ç∏„Åå„ÅÇ„Çä„Åæ„Åõ„Çì"),void y({title:"ÈÄÅ‰ø°„Ç®„É©„Éº",description:"ÈÄÅ‰ø°„Åô„Çã„ÉÅ„É£„ÉÉ„ÉàÂÜÖÂÆπ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ",variant:"destructive"});const r={chatId:b,timestamp:(new Date).toISOString(),machineInfo:{selectedMachineType:ae,selectedMachineNumber:re,machineTypeName:ue,machineNumber:he},messages:i.map(e=>{var t;return{id:e.id,content:e.content,isAiResponse:e.isAiResponse,timestamp:e.timestamp,media:(null==(t=e.media)?void 0:t.map(e=>({id:e.id,type:e.type,url:e.url,title:e.title,fileName:e.fileName||""})))||[]}})};console.log("üì§ ÈÄÅ‰ø°„Éá„Éº„Çø:",{chatId:r.chatId,messageCount:r.messages.length,machineInfo:r.machineInfo,totalDataSize:JSON.stringify(r).length});const{buildApiUrl:o}=await l(async()=>{const{buildApiUrl:e}=await import("./index-D2n-Q-xG.js").then(e=>e.I);return{buildApiUrl:e}},__vite__mapDeps([0,1,2,3])),c="localhost"===window.location.hostname,d=o(c?`/chats/${b}/send-test`:`/chats/${b}/send`);console.log("üåê ÈÄÅ‰ø°URL:",d),console.log("üèóÔ∏è ÈñãÁô∫Áí∞Â¢É:",c),console.log("üè† „Éõ„Çπ„ÉàÂêç:",window.location.hostname),console.log("üîß Áí∞Â¢ÉÂ§âÊï∞:",{NODE_ENV:"production",DEV:!1,PROD:!0,VITE_API_BASE_URL:void 0});const u=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({chatData:r,exportType:"manual_send"})});if(console.log("üì° ÈÄÅ‰ø°„É¨„Çπ„Éù„É≥„Çπ:",{status:u.status,statusText:u.statusText,ok:u.ok,headers:Object.fromEntries(u.headers.entries())}),!u.ok){let e=`ÈÄÅ‰ø°Â§±Êïó: ${u.status} ${u.statusText}`,n="";try{const t=await u.json();e=t.error||t.message||e,n=t.details||t.error||"",console.error("‚ùå „Çµ„Éº„Éê„Éº„Ç®„É©„Éº„É¨„Çπ„Éù„É≥„Çπ:",t)}catch(t){console.warn("‚ö†Ô∏è „Ç®„É©„Éº„É¨„Çπ„Éù„É≥„Çπ„ÅÆËß£Êûê„Å´Â§±Êïó:",t)}const a=n?`${e}\nË©≥Á¥∞: ${n}`:e;throw new Error(a)}{const e=await u.json(),t=ae&&re?` (Ê©üÁ®Æ: ${ue}, Ê©üÊ¢∞Áï™Âè∑: ${he})`:"";console.log("‚úÖ „Çµ„Éº„Éê„ÉºÈÄÅ‰ø°ÊàêÂäü:",e),y({title:"ÈÄÅ‰ø°ÊàêÂäü",description:`„ÉÅ„É£„ÉÉ„ÉàÂÜÖÂÆπ„Çí„Çµ„Éº„Éê„Éº„Å´ÈÄÅ‰ø°„Åó„Åæ„Åó„Åü„ÄÇ(${i.filter(e=>e.content&&e.content.trim()).length}‰ª∂„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏)${t}`}),await f(),se(""),ie(""),me(""),ge(""),ve([]),je([]),y({title:"„ÉÅ„É£„ÉÉ„Éà„ÇØ„É™„Ç¢ÂÆå‰∫Ü",description:"ÈÄÅ‰ø°Âæå„Å´„ÉÅ„É£„ÉÉ„ÉàÂ±•Ê≠¥„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åó„Åü„ÄÇ"}),console.log("üßπ „ÉÅ„É£„ÉÉ„ÉàÁä∂ÊÖã„Çí„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åó„Åü")}}catch(n){console.error("‚ùå „Çµ„Éº„Éê„ÉºÈÄÅ‰ø°„Ç®„É©„Éº:",n),y({title:"ÈÄÅ‰ø°„Ç®„É©„Éº",description:n instanceof Error?n.message:"„Çµ„Éº„Éê„Éº„Å∏„ÅÆÈÄÅ‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ",variant:"destructive"})}},Re=async e=>{if($(e),e.trim())try{const t=S.filter(t=>`${t.title} ${t.description} ${t.keyword||""}`.toLowerCase().includes(e.toLowerCase()));E(t),console.log(`üîç Ê§úÁ¥¢ÁµêÊûú: "${e}" -> ${t.length}‰ª∂`)}catch(t){console.error("Ê§úÁ¥¢Âá¶ÁêÜ„Ç®„É©„Éº:",t),E(S)}else E(S)},Oe=async e=>{if(Se)try{const t={...Se,answers:[...Se.answers,{stepId:`step_${Date.now()}`,answer:e,timestamp:new Date}]};Me(t),m(e,[],!1);const{buildApiUrl:n}=await l(async()=>{const{buildApiUrl:e}=await import("./index-D2n-Q-xG.js").then(e=>e.I);return{buildApiUrl:e}},__vite__mapDeps([0,1,2,3])),a=n("/troubleshooting-qa/answer"),s=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({problemDescription:Se.problemDescription,previousAnswers:t.answers.slice(0,-1),currentAnswer:e})});if(!s.ok)throw new Error("ÂõûÁ≠î„ÅÆÂá¶ÁêÜ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü");{const e=(await s.json()).data;"complete"===e.status?(Me(e=>({...e,currentQuestion:void 0,currentOptions:void 0})),m(e.solution,[],!0),ke(!1)):"emergency"===e.status?(Me(e=>({...e,currentQuestion:void 0,currentOptions:void 0})),m(e.emergencyAction,[],!0),ke(!1)):(Me(t=>({...t,currentQuestion:e.question,currentOptions:e.options||[],reasoning:e.reasoning})),m(e.question,[],!0))}}catch(t){console.error("‚ùå „Éà„É©„Éñ„É´„Ç∑„É•„Éº„ÉÜ„Ç£„É≥„Ç∞QAÂõûÁ≠îÂá¶ÁêÜ„Ç®„É©„Éº:",t),y({title:"„Ç®„É©„Éº",description:"ÂõûÁ≠î„ÅÆÂá¶ÁêÜ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü",variant:"destructive"})}},He=async e=>{try{const t=qe(e,X,J);if(t)return console.log("‚úÖ Using hardcoded question:",t),Fe(e,t),t;console.log("‚ö†Ô∏è No hardcoded question found, using fallback...");const n=["ÂøúÊÄ•Âá¶ÁΩÆ„Åô„ÇãÊôÇÈñì„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü","ÂïèÈ°å„ÅÆË©≥Á¥∞„ÇíÊïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ","‰ªñ„Å´ÁóáÁä∂„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü","ÂøúÊÄ•Âá¶ÁΩÆ„ÇíË©¶„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ"],a=n[X%n.length];return console.log("üîÑ Using fallback question:",a),Fe(e,a),a}catch(t){return console.error("AIÊîØÊè¥ÂøúÁ≠îÁîüÊàê„Ç®„É©„Éº:",t),"Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì„ÄÇÁèæÂú®AIÊîØÊè¥„ÅÆÂøúÁ≠î„ÇíÁîüÊàê„Åß„Åç„Åæ„Åõ„Çì„ÄÇ„Åó„Å∞„Çâ„ÅèÊôÇÈñì„Çí„Åä„ÅÑ„Å¶„Åã„ÇâÂÜçÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ"}},qe=(e,t,n)=>{const a=e.toLowerCase();if(console.log("üîç getHardcodedQuestion:",{userInput:e,lowerInput:a,step:t,problemType:n}),"engine_rpm"===n||a.includes("„Ç®„É≥„Ç∏„É≥")&&a.includes("ÂõûËª¢")){const e=["ÂøúÊÄ•Âá¶ÁΩÆ„Åô„ÇãÊôÇÈñì„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü","„Ç®„É≥„Ç∏„É≥„É´„Éº„É†„Å´„ÅÇ„Çã„Ç¢„ÇØ„Çª„É´„ÉØ„Ç§„É§„Éº„ÅåÂ§ñ„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÅãÔºü","„Ç¢„ÇØ„Çª„É´„É¨„Éê„Éº„ÇíÊåá„ÅßÊäº„Åó„Å¶Âãï„Åç„Åæ„Åô„ÅãÔºü","„Ç¢„ÇØ„Çª„É´„É¨„Éê„Éº„ÇíÊäº„Åó„ÅüÊôÇ„ÄÅ„Ç®„É≥„Ç∏„É≥ÂõûËª¢„Åå‰∏äÊòá„Åó„Åæ„Åô„ÅãÔºü"];if(t<e.length)return console.log("‚úÖ „Éè„Éº„Éâ„Ç≥„Éº„ÉâË≥™ÂïèÈÅ∏Êäû:",e[t]),e[t];if(a.includes("Â§â„Çè„Çâ„Å™„ÅÑ")||a.includes("Â§âÂåñ„Å™„Åó"))return"ÂøúÊÄ•Âá¶ÁΩÆ„ÅØÂõ∞Èõ£„Åß„Åô„ÄÇ„Ç¢„Ç§„Éâ„É™„É≥„Ç∞Áä∂ÊÖã„ÅßÈÄÄÈÅø„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ";if(a.includes("‰∏äÊòá")||a.includes("ÊàêÂäü"))return"ÂøúÊÄ•Âá¶ÁΩÆÂÆå‰∫Ü„Åß„Åô„ÄÇ"}if("engine_start"===n||a.includes("„Ç®„É≥„Ç∏„É≥")&&a.includes("„Åã„Åã„Çâ„Å™„ÅÑ")){const e=["ÂøúÊÄ•Âá¶ÁΩÆ„Åô„ÇãÊôÇÈñì„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü","„Ç®„Ç¢„ÉºÂúß„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü","„Éê„ÉÉ„ÉÜ„É™„ÉºÈõªÂúß„ÅØÊ≠£Â∏∏„Åß„Åô„ÅãÔºü","„Çπ„Çø„Éº„Çø„Éº„É¢„Éº„Çø„Éº„ÅØÂõû„Çä„Åæ„Åô„ÅãÔºü"];if(t<e.length)return console.log("‚úÖ „Éè„Éº„Éâ„Ç≥„Éº„ÉâË≥™ÂïèÈÅ∏Êäû:",e[t]),e[t];if(a.includes("Âõû„Çâ„Å™„ÅÑ")||a.includes("Âãï„Åã„Å™„ÅÑ"))return"ÂøúÊÄ•Âá¶ÁΩÆ„ÅØÂõ∞Èõ£„Åß„Åô„ÄÇÂ∞ÇÈñÄÂÆ∂„Å´ÈÄ£Áµ°„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ";if(a.includes("Âõû„Çã")||a.includes("ÊàêÂäü"))return"ÂøúÊÄ•Âá¶ÁΩÆÂÆå‰∫Ü„Åß„Åô„ÄÇ"}if(0===t)return"ÂøúÊÄ•Âá¶ÁΩÆ„Åô„ÇãÊôÇÈñì„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü";const s=["ÂøúÊÄ•Âá¶ÁΩÆ„Åô„ÇãÊôÇÈñì„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü","ÂïèÈ°å„ÅÆË©≥Á¥∞„ÇíÊïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ","‰ªñ„Å´ÁóáÁä∂„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü","ÂøúÊÄ•Âá¶ÁΩÆ„ÇíË©¶„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ"];return s[t%s.length]},Fe=(e,t)=>{const n=e.toLowerCase();if(t.toLowerCase(),console.log("üîç updateEmergencyStep:",{userInput:e,lowerInput:n,currentStep:X,currentProblemType:J}),0!==X||J||(n.includes("„Ç®„É≥„Ç∏„É≥")&&n.includes("ÂõûËª¢")?K("engine_rpm"):n.includes("„Ç®„É≥„Ç∏„É≥")&&n.includes("„Åã„Åã„Çâ„Å™„ÅÑ")?K("engine_start"):n.includes("„Éñ„É¨„Éº„Ç≠")?K("brake"):K("general")),console.log("üîÑ Processing user input for step progression:",n),n.includes("ÂÆå‰∫Ü")||n.includes("Âõ∞Èõ£")||n.includes("ÈÄÄÈÅø")||n.includes("Â§â„Çè„Çâ„Å™„ÅÑ")||n.includes("Â§âÂåñ„Å™„Åó"))return console.log("üîÑ Resetting due to completion/difficulty"),G(0),void K("");console.log("üîÑ Advancing step from",X,"to",X+1),G(e=>e+1)},Qe=e=>{const t=Math.floor(e/60);return t>=20?"critical":t>=15?"warning":"normal"},[Je,Ke]=d.useState(!1),[Ze,et]=d.useState(null),[tt,nt]=d.useState(!1);return c.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[c.jsxs("div",{className:"sticky top-0 z-50 bg-white border-b px-4 py-3 flex items-center justify-between shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(D,{htmlFor:"machine-type",className:"text-sm font-medium text-gray-700",children:"Ê©üÁ®Æ:"}),c.jsxs("div",{className:"relative",children:[c.jsx(h,{id:"machine-type",type:"text",placeholder:oe?"Ë™≠„ÅøËæº„Åø‰∏≠...":"Ê©üÁ®Æ„ÇíÈÅ∏Êäû...",value:ue,onChange:e=>{const t=e.target.value;console.log("üîç Ê©üÁ®ÆÂÖ•ÂäõÂ§âÊõ¥:",t),me(t),Le(t),pe(!0)},onFocus:()=>{console.log("üîç Ê©üÁ®ÆÂÖ•Âäõ„Éï„Ç©„Éº„Ç´„Çπ:",{machineTypesCount:Z.length,machineTypes:Z,filteredMachineTypesCount:we.length,showMachineTypeSuggestions:fe}),pe(!0),Z.length>0&&ve(Z)},onBlur:e=>{const t=e.relatedTarget;t&&t.closest(".machine-type-dropdown")||setTimeout(()=>{pe(!1)},150)},disabled:oe,className:"w-48"}),(console.log("üîç Ê©üÁ®Æ„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥Ë°®Á§∫Êù°‰ª∂:",{showMachineTypeSuggestions:fe,filteredMachineTypesCount:we.length,filteredMachineTypes:we,machineTypesCount:Z.length,machineTypes:Z,isLoadingMachineTypes:oe}),null),fe&&c.jsx("div",{id:"machine-type-menu",className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto machine-type-dropdown",children:oe?c.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Ë™≠„ÅøËæº„Åø‰∏≠..."}):we.length>0?we.map(e=>c.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{console.log("üîç Ê©üÁ®ÆÈÅ∏ÊäûÂá¶ÁêÜÈñãÂßã ==========================="),console.log("üîç ÈÅ∏Êäû„Åï„Çå„ÅüÊ©üÁ®Æ:",e);try{me(e.machine_type_name),se(e.id),pe(!1),ie(""),ge(""),ne([]),je([]),console.log("‚úÖ Ê©üÁ®ÆÈÅ∏ÊäûÂÆå‰∫Ü:",e.machine_type_name),ze(e.id)}catch(t){console.error("‚ùå Ê©üÁ®ÆÈÅ∏ÊäûÂá¶ÁêÜ‰∏≠„Å´„Ç®„É©„Éº:",t)}})(e)},onMouseDown:e=>{e.preventDefault()},tabIndex:0,children:e.machine_type_name},e.id)):c.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:ue.trim()?"Ë©≤ÂΩì„Åô„ÇãÊ©üÁ®Æ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì":0===Z.length?"Ê©üÁ®Æ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø‰∏≠...":"Ê©üÁ®Æ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"})})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(D,{htmlFor:"machine-number",className:"text-sm font-medium text-gray-700",children:"Ê©üÊ¢∞Áï™Âè∑:"}),c.jsxs("div",{className:"relative",children:[c.jsx(h,{id:"machine-number",type:"text",placeholder:ce?"Ë™≠„ÅøËæº„Åø‰∏≠...":"Ê©üÊ¢∞Áï™Âè∑„ÇíÈÅ∏Êäû...",value:he,onChange:e=>{const t=e.target.value;console.log("üîç Ê©üÊ¢∞Áï™Âè∑ÂÖ•ÂäõÂ§âÊõ¥:",t),ge(t),_e(t),be(!0)},onFocus:()=>{console.log("üîç Ê©üÊ¢∞Áï™Âè∑ÂÖ•Âäõ„Éï„Ç©„Éº„Ç´„Çπ"),console.log("üîß „Éï„Ç©„Éº„Ç´„ÇπÊôÇ„ÅÆÁä∂ÊÖã:",{selectedMachineType:ae,machinesCount:te.length,machines:te,filteredMachinesCount:ye.length,filteredMachines:ye,isLoadingMachines:ce,machineNumberInput:he,showMachineNumberSuggestions:xe}),be(!0),te.length>0?(je(te),console.log("‚úÖ „Éï„Ç©„Éº„Ç´„ÇπÊôÇ„Å´Ê©üÊ¢∞Áï™Âè∑„É™„Çπ„Éà„ÇíË®≠ÂÆö:",te.length,"‰ª∂")):console.log("‚ö†Ô∏è „Éï„Ç©„Éº„Ç´„ÇπÊôÇ„Å´Ê©üÊ¢∞Áï™Âè∑„Åå„ÅÇ„Çä„Åæ„Åõ„Çì")},onBlur:e=>{const t=e.relatedTarget;t&&t.closest(".machine-number-dropdown")||setTimeout(()=>{be(!1)},150)},disabled:!ae||ce,className:"w-48"}),(console.log("üîç Ê©üÊ¢∞Áï™Âè∑„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥Ë°®Á§∫Êù°‰ª∂:",{showMachineNumberSuggestions:xe,filteredMachinesCount:ye.length,filteredMachines:ye,selectedMachineType:ae,machineNumberInput:he,isLoadingMachines:ce}),null),xe&&c.jsx("div",{id:"machine-number-menu",className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto machine-number-dropdown",children:ye.length>0?ye.map(e=>c.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{console.log("üîç Ê©üÊ¢∞Áï™Âè∑ÈÅ∏ÊäûÈñãÂßã:",e);try{ie(e.id),ge(e.machine_number),be(!1),console.log("‚úÖ Ê©üÊ¢∞Áï™Âè∑ÈÅ∏ÊäûÂÆå‰∫Ü:",e.machine_number)}catch(t){console.error("‚ùå Ê©üÊ¢∞Áï™Âè∑ÈÅ∏ÊäûÂá¶ÁêÜ‰∏≠„Å´„Ç®„É©„Éº:",t)}})(e)},onMouseDown:e=>{e.preventDefault()},tabIndex:0,children:e.machine_number},e.id)):c.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:he.trim()?"Ë©≤ÂΩì„Åô„ÇãÊ©üÊ¢∞Áï™Âè∑„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì":ae?"„Åì„ÅÆÊ©üÁ®Æ„Å´ÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„ÇãÊ©üÊ¢∞Áï™Âè∑„Åå„ÅÇ„Çä„Åæ„Åõ„Çì":"ÂÖà„Å´Ê©üÁ®Æ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ"})})]})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[F?c.jsxs("div",{className:"flex items-center gap-4 mr-6",children:[c.jsxs(r,{variant:"outline",size:"lg",onClick:()=>{U(!1),Y(null),V(0),G(0),K("");const e={id:Date.now().toString(),content:"AIÊîØÊè¥„ÇíÁµÇ‰∫Ü„Åó„Åæ„Åô„ÄÇ„Åæ„Åü‰Ωï„Åã„ÅäÂõ∞„Çä„ÅÆ„Åì„Å®„Åå„ÅÇ„Çå„Å∞„ÄÅ„ÅÑ„Å§„Åß„ÇÇ„ÅäÂ£∞„Åå„Åë„Åè„Å†„Åï„ÅÑÔºÅ",isAiResponse:!0,timestamp:new Date,type:"ai_support_end"};u(t=>[...t,e]),y({title:"AIÊîØÊè¥ÁµÇ‰∫Ü",description:"AIÊîØÊè¥„ÇíÁµÇ‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇ"})},className:"px-8 py-3 text-base font-semibold "+("critical"===Qe(Q)?"bg-red-50 border-red-200 text-red-700 hover:bg-red-100":"warning"===Qe(Q)?"bg-yellow-50 border-yellow-200 text-yellow-700 hover:bg-yellow-100":"bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100"),children:[c.jsx(s,{className:"w-6 h-6 mr-3"}),"AIÊîØÊè¥ÁµÇ‰∫Ü"]}),c.jsx("div",{className:"px-4 py-2 rounded-lg border text-sm font-medium "+("critical"===Qe(Q)?"bg-red-100 text-red-800 border-red-200":"warning"===Qe(Q)?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200"),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{children:"‚è∞"}),c.jsx("span",{children:(at=Q,`${Math.floor(at/60)}:${(at%60).toString().padStart(2,"0")}`)}),"warning"===Qe(Q)&&c.jsx("span",{className:"text-xs",children:"(„ÅÇ„Å®5ÂàÜ)"}),"critical"===Qe(Q)&&c.jsx("span",{className:"text-xs",children:"(ÊïëÊè¥Ë¶ÅË´ãÊé®Â•®)"})]})})]}):c.jsxs(r,{variant:"outline",size:"lg",onClick:async()=>{try{U(!0),Y(new Date),V(0);const e={id:Date.now().toString(),content:"‰Ωï„ÅãÂïèÈ°å„Åå„ÅÇ„Çä„Åæ„Åó„Åü„ÅãÔºü„ÅäÂõ∞„Çä„ÅÆ‰∫ãË±°„ÇíÊïô„Åà„Å¶„Åè„Å†„Åï„ÅÑÔºÅ",isAiResponse:!0,timestamp:new Date,type:"ai_support"};u(t=>[...t,e]),y({title:"AIÊîØÊè¥ÈñãÂßã",description:"AIÊîØÊè¥„ÅåÈñãÂßã„Åï„Çå„Åæ„Åó„Åü„ÄÇ„ÉÅ„É£„ÉÉ„Éà„Ç®„É™„Ç¢„Åß„ÇÑ„ÇäÂèñ„Çä„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"})}catch(e){console.error("AIÊîØÊè¥ÈñãÂßã„Ç®„É©„Éº:",e),y({title:"„Ç®„É©„Éº",description:"AIÊîØÊè¥„ÅÆÈñãÂßã„Å´Â§±Êïó„Åó„Åæ„Åó„Åü",variant:"destructive"})}},disabled:g,className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 mr-6 px-8 py-3 text-base font-semibold",children:[c.jsx(W,{className:"w-6 h-6 mr-3"}),"AIÊîØÊè¥"]}),c.jsxs(r,{variant:"outline",size:"sm",onClick:()=>{console.log("üì∏ „Ç´„É°„É©„Éú„Çø„É≥„Åå„ÇØ„É™„ÉÉ„ÇØ„Åï„Çå„Åæ„Åó„Åü"),window.dispatchEvent(new CustomEvent("open-camera")),console.log("üì∏ open-camera „Ç§„Éô„É≥„Éà„ÇíÁô∫ÁÅ´„Åó„Åæ„Åó„Åü")},className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 mr-6",children:[c.jsx(L,{className:"w-4 h-4 mr-2"}),"„Ç´„É°„É©"]}),c.jsxs(r,{variant:"outline",size:"lg",onClick:async()=>{await(async()=>{try{O(!0),console.log("üîÑ ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„Éâ‰∏ÄË¶ßÂèñÂæóÈñãÂßã");const e=`?ts=${Date.now()}&r=${Math.random().toString(36).substring(2)}`,{buildApiUrl:t}=await l(async()=>{const{buildApiUrl:e}=await import("./index-D2n-Q-xG.js").then(e=>e.I);return{buildApiUrl:e}},__vite__mapDeps([0,1,2,3])),n=t(`/emergency-flow/list${e}`);console.log("üåê API URL:",n);const a=await fetch(n,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate, max-age=0",Pragma:"no-cache",Expires:"Thu, 01 Jan 1970 00:00:00 GMT","X-Requested-With":"XMLHttpRequest"}});if(console.log("üì° „É¨„Çπ„Éù„É≥„ÇπÁä∂ÊÖã:",a.status,a.statusText),!a.ok){const e=await a.text();throw console.error("‚ùå API „Ç®„É©„Éº:",e),new Error(`Failed to fetch emergency guides: ${a.status} - ${e}`)}{const e=await a.json();if(console.log("üìä ÂèñÂæó„Åó„Åü„Éá„Éº„Çø:",e),e.success){const t=e.data||[];M(t),E(t),console.log("‚úÖ ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„ÉâÂèñÂæóÊàêÂäü:",t.length+"‰ª∂"),t.forEach((e,t)=>{var n;console.log(`üìã „Ç¨„Ç§„Éâ ${t+1}:`,{id:e.id,title:e.title,fileName:e.fileName,description:(null==(n=e.description)?void 0:n.substring(0,50))+"..."})})}else console.error("‚ùå ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„ÉâÂèñÂæóÂ§±Êïó:",e.message),M([]),E([])}}catch(e){console.error("„Ç¨„Ç§„Éâ‰∏ÄË¶ß„ÅÆÂèñÂæó„Å´Â§±Êïó:",e),y({title:"„Ç®„É©„Éº",description:"ÂøúÊÄ•Âá¶ÁΩÆ„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü",variant:"destructive"}),M([]),E([])}finally{O(!1)}})(),k(!0)},disabled:R,className:"bg-red-50 border-red-200 text-red-700 hover:bg-red-100 mr-6 px-8 py-3 text-base font-semibold",children:[c.jsx(I,{className:"w-6 h-6 mr-3"}),"ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„Éâ"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(r,{variant:"outline",size:"sm",onClick:$e,disabled:g||0===i.length,children:[c.jsx(P,{className:"w-4 h-4 mr-2"}),"„Çµ„Éº„Éê„ÉºÈÄÅ‰ø°"]}),c.jsxs(r,{variant:"outline",size:"sm",onClick:async()=>{try{await f(),ke(!1),Me(null),U(!1),y({title:"ÊàêÂäü",description:"„ÉÅ„É£„ÉÉ„ÉàÂ±•Ê≠¥„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åó„Åü"})}catch(e){y({title:"„Ç®„É©„Éº",description:"„ÇØ„É™„Ç¢„Å´Â§±Êïó„Åó„Åæ„Åó„Åü",variant:"destructive"})}},disabled:g||x||0===i.length,children:[c.jsx(A,{className:"w-4 h-4 mr-2"}),"„ÇØ„É™„Ç¢"]})]})]}),H?c.jsx("div",{className:"flex-1",children:c.jsx(Ge,{})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scroll-smooth",children:[i.map(e=>c.jsx("div",{className:"flex "+(e.isAiResponse?"justify-end":"justify-start"),children:c.jsx("div",{className:"max-w-2xl "+(e.isAiResponse?"w-auto":"w-full"),children:e.isAiResponse&&Ne&&(null==Se?void 0:Se.currentQuestion)===e.content?c.jsx(TroubleshootingQABubble,{question:e.content,options:(null==Se?void 0:Se.currentOptions)||[],reasoning:null==Se?void 0:Se.reasoning,onAnswer:Oe,isLoading:g}):e.isAiResponse&&(e.content.includes("Ëß£Ê±∫Á≠ñ")||e.content.includes("Á∑äÊÄ•ÂØæÂøú"))?c.jsx(SolutionBubble,{solution:e.content,problemDescription:null==Se?void 0:Se.problemDescription,isEmergency:e.content.includes("Á∑äÊÄ•ÂØæÂøú")}):c.jsx(Ue,{message:e})})},e.id)),g&&c.jsx("div",{className:"flex justify-end",children:c.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),c.jsx("span",{className:"text-gray-600",children:"AI„ÅåÂøúÁ≠î„ÇíÁîüÊàê‰∏≠..."})]})})}),c.jsx("div",{ref:j,className:"h-4"})]}),c.jsx("div",{className:"border-t bg-white p-4",children:c.jsx(Be,{onSendMessage:async(e,t=[])=>{(e.trim()||0!==t.length)&&(Ne&&Se?await Oe(e):F?await(async(e,t=[])=>{try{const n={id:Date.now().toString(),content:e,isAiResponse:!1,timestamp:new Date,type:"user_message",media:t};u(e=>[...e,n]);const a=await He(e),s={id:(Date.now()+1).toString(),content:a,isAiResponse:!0,timestamp:new Date,type:"ai_support_response"};u(e=>[...e,s])}catch(n){console.error("AIÊîØÊè¥„É°„ÉÉ„Çª„Éº„Ç∏Âá¶ÁêÜ„Ç®„É©„Éº:",n);const e={id:(Date.now()+1).toString(),content:"Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì„ÄÇÁèæÂú®AIÊîØÊè¥„ÅÆÂøúÁ≠î„ÇíÁîüÊàê„Åß„Åç„Åæ„Åõ„Çì„ÄÇ„Åó„Å∞„Çâ„ÅèÊôÇÈñì„Çí„Åä„ÅÑ„Å¶„Åã„ÇâÂÜçÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ",isAiResponse:!0,timestamp:new Date,type:"ai_support_response"};u(t=>[...t,e]),y({title:"„Ç®„É©„Éº",description:"AIÊîØÊè¥„ÅÆÂøúÁ≠îÁîüÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü",variant:"destructive"})}})(e,t):m(e,t,!1))},isLoading:g,disabled:Ne&&!(null==Se?void 0:Se.currentQuestion)})})]}),c.jsx(Ye,{}),tt&&Ze&&c.jsx(Ve,{}),N&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„Éâ"}),c.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>{k(!1),_(null),$("")},className:"text-gray-500 hover:text-gray-700",children:[c.jsx(s,{className:"w-4 h-4 mr-2"}),"Èñâ„Åò„Çã"]})]}),c.jsx("div",{className:"mb-4",children:c.jsx(h,{type:"text",placeholder:"„Ç¨„Ç§„Éâ„ÇíÊ§úÁ¥¢...",value:z,onChange:e=>Re(e.target.value),className:"w-full"})}),c.jsx("div",{className:"mb-4",children:c.jsx(Xe,{onKeywordClick:e=>{Re(e)}})}),!T&&c.jsx("div",{className:"overflow-auto",children:c.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-100",children:[c.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:"„Çø„Ç§„Éà„É´"}),c.jsx("th",{className:"border border-gray-300 p-3 text-left text-sm font-medium",children:"Ë™¨Êòé"})]})}),c.jsx("tbody",{children:0===C.length?c.jsx("tr",{children:c.jsx("td",{colSpan:2,className:"border border-gray-300 p-4 text-center text-gray-500",children:"„Ç¨„Ç§„Éâ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì"})}):C.map(e=>c.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer "+(T===e.id?"bg-blue-50 ring-2 ring-blue-500":""),onClick:()=>{return t=e.id,void _(t);var t},children:[c.jsx("td",{className:"border border-gray-300 p-3",children:c.jsx("div",{className:"break-words leading-tight text-sm font-semibold hover:text-blue-600",children:e.title})}),c.jsx("td",{className:"border border-gray-300 p-3",children:c.jsx("div",{className:"break-words leading-tight text-sm text-gray-600",children:e.description})})]},e.id))})]})}),T&&c.jsx("div",{className:"mt-6",children:c.jsx(p,{guideId:T,onExit:()=>_(null),backButtonText:"‰∏ÄË¶ß„Å´Êàª„Çã",onSendToChat:()=>{console.log("ÂøúÊÄ•Âá¶ÁΩÆ„Ç¨„Ç§„Éâ„Çí„ÉÅ„É£„ÉÉ„Éà„Å´ÈÄÅ‰ø°"),k(!1)}})})]})})]});var at}export{Je as default};
