const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dya0PsiY.js","assets/ui-BaYWhfWe.js","assets/vendor-C0Yfakdp.js","assets/index-D8OdIOAq.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./index-Dya0PsiY.js";import"./ui-BaYWhfWe.js";import"./vendor-C0Yfakdp.js";const a=async()=>{try{const{buildApiUrl:a}=await e(async()=>{const{buildApiUrl:e}=await import("./index-Dya0PsiY.js").then(e=>e.J);return{buildApiUrl:e}},__vite__mapDeps([0,1,2,3])),i=await fetch(a("/history?limit=100&source=files&includeImages=true"));if(!i.ok)throw new Error(`å±¥æ­´å–å¾—å¤±æ•—: ${i.status}`);const t=await i.json();if(!t.success||!t.data)return console.warn("âš ï¸ å¿œç­”ã«ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã¾ã›ã‚“"),[];console.log(`ğŸ” ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹å±¥æ­´å–å¾—æˆåŠŸ: ${t.data.length}ä»¶, ãƒãƒ¼ã‚¸ãƒ§ãƒ³: ${t.version}`);return t.data.map(e=>({id:e.id,chatId:e.id,machineType:e.machineType||"Unknown",machineNumber:e.machineNumber||"Unknown",incidentTitle:e.title||"ã‚¿ã‚¤ãƒˆãƒ«ãªã—",problemDescription:e.description||"",createdAt:e.createdAt||(new Date).toISOString(),fileName:e.fileName||`${e.id}.json`,hasImage:e.hasImages||e.imageCount>0,jsonData:{images:e.images||[],imageCount:e.imageCount||0,savedImages:e.images?e.images.map(e=>({messageId:e.messageId,fileName:e.fileName,url:e.url||`/api/images/chat-exports/${e.fileName}`,path:e.fileName})):[]},source:"files"}))}catch(a){return console.error("âŒ å±¥æ­´å–å¾—ã‚¨ãƒ©ãƒ¼:",a),[]}};export{a as loadHistoryFromDB};
