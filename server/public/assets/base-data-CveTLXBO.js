import{j as e}from"./ui-BaYWhfWe.js";import{r as s}from"./vendor-C0Yfakdp.js";import{C as a,a as t,b as l,c as r}from"./card-S9sbpKMM.js";import{T as n,a as c,b as i,c as d}from"./tabs-DaSaHdRV.js";import{d as o,S as m,B as x,X as h,a as p,F as u,W as g}from"./index-C73-_J_v.js";import{B as j}from"./badge-BzatXv-L.js";import{I as v}from"./input-DQ3zM-Lf.js";import{L as N}from"./label-BxViCdbC.js";import{T as y}from"./textarea-Cbo0oSZW.js";import{S as f}from"./slider-CUULq-an.js";import{B as b}from"./brain-aR4Na1gz.js";import{C as w}from"./circle-check-big-DknUjq3L.js";import{C as k}from"./circle-alert-hg1S3aEM.js";import{P as C}from"./plus-DQBGSzXj.js";import{U as S}from"./upload-Cfb-KsSB.js";import{S as F}from"./save-Dg0emWFv.js";import{D as T}from"./database-CEP96CMx.js";import{S as P}from"./square-pen-CZnHVcid.js";import{T as M}from"./triangle-alert-zCgEbnAk.js";import{M as E,A as q}from"./message-circle-LvyI9H6d.js";import{R as L}from"./refresh-cw-3IR0_J_s.js";import"./index-jVOyRz7F.js";import"./index-CttfQz0H.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=o("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),A=o("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]),O=o("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),I=o("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),D=o("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]),$=o("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),J=o("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),R=o("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),H=o("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function B(){const[n,c]=s.useState(null),[i,d]=s.useState([]),[o,h]=s.useState(!1);s.useEffect(()=>{p()},[]);const p=async()=>{try{const e=await fetch("/api/config/rag");if(e.ok){const s=await e.json();c(s.config)}}catch(e){console.error("RAG設定取得エラー:",e)}},u=(e,s)=>{if(!e||0===e.length)return 0;const a=s.toLowerCase().split(" ");let t=0;return e.forEach(e=>{var s;const l=(null==(s=e.content)?void 0:s.toLowerCase().split(" "))||[],r=a.filter(e=>l.some(s=>s.includes(e))).length;t+=r/a.length}),Math.min(t/e.length,1)},g=(e,s)=>{if(!e||0===e.length)return 0;const a=e.reduce((e,s)=>e+(s.score||0),0)/e.length;return Math.min(a,1)},v=0===i.length?null:{responseTime:i.reduce((e,s)=>e+s.responseTime,0)/i.length,accuracy:i.reduce((e,s)=>e+s.accuracy,0)/i.length,relevanceScore:i.reduce((e,s)=>e+s.relevanceScore,0)/i.length,userSatisfaction:i.reduce((e,s)=>e+s.userSatisfaction,0)/i.length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{children:[e.jsx(t,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5"}),"現在のRAG設定"]})}),e.jsx(r,{children:n?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"チャンクサイズ"}),e.jsxs(j,{variant:"outline",children:[n.chunkSize,"文字"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"オーバーラップ"}),e.jsxs(j,{variant:"outline",children:[n.chunkOverlap,"文字"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"類似度閾値"}),e.jsx(j,{variant:"outline",children:n.similarityThreshold})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"最大結果数"}),e.jsxs(j,{variant:"outline",children:[n.maxResults,"件"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"セマンティック検索"}),e.jsx(j,{variant:n.enableSemantic?"default":"secondary",children:n.enableSemantic?"有効":"無効"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"キーワード検索"}),e.jsx(j,{variant:n.enableKeyword?"default":"secondary",children:n.enableKeyword?"有効":"無効"})]})]}):e.jsx("p",{className:"text-gray-500",children:"設定を読み込み中..."})})]}),e.jsxs(a,{children:[e.jsx(t,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"RAGパフォーマンステスト"]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsx(x,{onClick:async()=>{h(!0);try{const e=["エンジン回転が上昇しない","ブレーキが効かない","エンジンがかからない","タイヤがパンクした","電気系統の故障"],s=[];for(const a of e){const e=Date.now(),t=await fetch("/api/knowledge-base/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a,limit:(null==n?void 0:n.maxResults)||5})}),l=Date.now()-e;if(t.ok){const e=await t.json(),r=u(e.results,a),n=g(e.results,a);s.push({responseTime:l,accuracy:r,relevanceScore:n,userSatisfaction:.3*Math.random()+.7,timestamp:(new Date).toISOString()})}}d(s)}catch(e){console.error("パフォーマンステストエラー:",e)}finally{h(!1)}},disabled:o,className:"w-full",children:o?"テスト実行中...":"パフォーマンステストを実行"}),v&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"テスト結果（平均値）"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(J,{className:"h-4 w-4 text-green-500"})}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[v.responseTime.toFixed(0),"ms"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"応答時間"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(w,{className:"h-4 w-4 text-blue-500"})}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(100*v.accuracy).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"精度"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(J,{className:"h-4 w-4 text-purple-500"})}),e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[(100*v.relevanceScore).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"関連性"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(w,{className:"h-4 w-4 text-orange-500"})}),e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[(100*v.userSatisfaction).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"満足度"})]})]})]}),i.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"詳細結果"}),e.jsx("div",{className:"space-y-2",children:i.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{variant:"outline",children:["テスト ",a+1]}),e.jsx("span",{className:"text-sm text-gray-600",children:new Date(s.timestamp).toLocaleTimeString()})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{children:[s.responseTime,"ms"]}),e.jsxs("span",{children:[(100*s.accuracy).toFixed(1),"%"]}),e.jsxs("span",{children:[(100*s.relevanceScore).toFixed(1),"%"]})]})]},a))})]})]})]}),e.jsxs(a,{children:[e.jsx(t,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),"推奨設定"]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"精度向上のための推奨設定"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[e.jsx("p",{children:"• チャンクサイズ: 600文字（より細かく分割）"}),e.jsx("p",{children:"• 類似度閾値: 0.3（より多くの結果を取得）"}),e.jsx("p",{children:"• 最大結果数: 10件（より多くの候補）"}),e.jsx("p",{children:"• セマンティック検索: 有効"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"パフォーマンス重視の設定"}),e.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[e.jsx("p",{children:"• チャンクサイズ: 800文字（バランス重視）"}),e.jsx("p",{children:"• 類似度閾値: 0.5（適度な精度）"}),e.jsx("p",{children:"• 最大結果数: 5件（高速処理）"}),e.jsx("p",{children:"• キーワード検索: 有効"})]})]})]})})]})]})}const G=["機械的故障","電気系故障","空圧系故障","油圧系故障","冷却系故障","燃料系故障","制御系故障","その他"];function U({faultClassifications:s,onAdd:a,onRemove:t,onUpdate:l}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"故障分類"}),e.jsxs(x,{onClick:a,type:"button",variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"分類追加"]})]}),e.jsx("div",{className:"space-y-3",children:s.map((a,r)=>e.jsxs("div",{className:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"分類タイプ"}),e.jsxs("select",{value:a.type,onChange:e=>l(r,"type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"選択してください"}),G.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"カスタム分類（任意）"}),e.jsx("input",{type:"text",value:a.custom,onChange:e=>l(r,"custom",e.target.value),placeholder:"カスタム分類を入力",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.length>1&&e.jsx(x,{onClick:()=>t(r),type:"button",variant:"destructive",size:"sm",className:"mt-7",children:e.jsx(h,{className:"h-4 w-4"})})]},r))})]})}const V=["部品劣化","メンテナンス不備","外的要因","設計不良","操作ミス","環境要因","その他"];function X({faultFactors:s,onAdd:a,onRemove:t,onUpdate:l}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"故障要因"}),e.jsxs(x,{onClick:a,type:"button",variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"要因追加"]})]}),e.jsx("div",{className:"space-y-3",children:s.map((a,r)=>e.jsxs("div",{className:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"要因タイプ"}),e.jsxs("select",{value:a.type,onChange:e=>l(r,"type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"タイプ選択"}),V.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"flex-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"詳細内容"}),e.jsx("input",{type:"text",value:a.content,onChange:e=>l(r,"content",e.target.value),placeholder:"故障要因の詳細内容を入力",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.length>1&&e.jsx(x,{onClick:()=>t(r),type:"button",variant:"destructive",size:"sm",className:"mt-7",children:e.jsx(h,{className:"h-4 w-4"})})]},r))})]})}function K(){const[n,c]=s.useState({occurrenceEvent:"",vehicleNumber:"",equipmentCategory:"",phenomenonMemo:"",inspectionProcedure:"",emergencyMeasures:"",permanentCountermeasures:"",remarks:"",recorder:"",faultClassifications:[{type:"",custom:""}],faultFactors:[{type:"",content:""}]}),[i,d]=s.useState({}),[o,m]=s.useState(""),h=(e,s)=>{c(a=>({...a,[e]:s})),i[e]&&d(s=>({...s,[e]:""}))},p=e=>{var s,a,t,l,r,n,i,d,o,m,x,h,p,u,g,j,v,N,y,f,b;c({occurrenceEvent:(null==(s=e.occurrence)?void 0:s.event)||"",vehicleNumber:(null==(t=null==(a=e.occurrence)?void 0:a.vehicle)?void 0:t.type)||"",equipmentCategory:(null==(n=null==(r=null==(l=e.occurrence)?void 0:l.vehicle)?void 0:r.equipment)?void 0:n.category)||"",phenomenonMemo:(null==(i=e.fault)?void 0:i.phenomenon)||"",inspectionProcedure:(null==(m=null==(o=null==(d=e.response)?void 0:d.inspection)?void 0:o.procedure)?void 0:m.join("\n"))||"",emergencyMeasures:(null==(p=null==(h=null==(x=e.response)?void 0:x.measures)?void 0:h.emergency)?void 0:p.join("\n"))||"",permanentCountermeasures:(null==(g=null==(u=e.response)?void 0:u.measures)?void 0:g.permanent)||"",remarks:(null==(j=e.notes)?void 0:j.remarks)||"",recorder:(null==(v=e.notes)?void 0:v.recorder)||"",faultClassifications:(null==(y=null==(N=e.fault)?void 0:N.classifications)?void 0:y.length)>0?e.fault.classifications:[{type:"",custom:""}],faultFactors:(null==(b=null==(f=e.fault)?void 0:f.factors)?void 0:b.length)>0?e.fault.factors:[{type:"",content:""}]})},u=()=>{c({occurrenceEvent:"",vehicleNumber:"",equipmentCategory:"",phenomenonMemo:"",inspectionProcedure:"",emergencyMeasures:"",permanentCountermeasures:"",remarks:"",recorder:"",faultClassifications:[{type:"",custom:""}],faultFactors:[{type:"",content:""}]}),d({})};return e.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:e.jsxs(a,{children:[e.jsx(t,{children:e.jsx(l,{className:"text-2xl font-bold text-center text-gray-900",children:"車両保守故障記録システム"})}),e.jsxs(r,{children:[o&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-green-800",children:o})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx(N,{htmlFor:"loadFile",className:"text-sm font-medium text-gray-700",children:"既存記録の読み込み"}),e.jsxs("div",{className:"mt-2 flex gap-3 items-center",children:[e.jsx("input",{type:"file",id:"loadFile",accept:".json",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(!a)return;if(!a.name.endsWith(".json"))return void alert("JSONファイルを選択してください。");const t=new FileReader;t.onload=e=>{var s;try{const a=JSON.parse(null==(s=e.target)?void 0:s.result);p(a),m("ファイルが正常に読み込まれました。"),setTimeout(()=>m(""),3e3)}catch(a){console.error("JSONファイルの読み込みエラー:",a),alert("JSONファイルの形式が正しくありません。")}},t.readAsText(a)},className:"flex-1 text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),e.jsxs(x,{type:"button",variant:"outline",size:"sm",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"読み込み"]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"JSONファイルを選択して既存の記録を読み込めます"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return n.occurrenceEvent.trim()||(e.occurrenceEvent="発生事象は必須項目です。"),n.vehicleNumber.trim()||(e.vehicleNumber="機種は必須項目です。"),n.equipmentCategory.trim()||(e.equipmentCategory="装置カテゴリ・装置名称は必須項目です。"),n.phenomenonMemo.trim()||(e.phenomenonMemo="現象メモは必須項目です。"),n.recorder.trim()||(e.recorder="記録者は必須項目です。"),d(e),0===Object.keys(e).length})())try{const e=n.faultClassifications.filter(e=>e.type||e.custom),s=n.faultFactors.filter(e=>e.type||e.content),a={metadata:{recordId:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:(new Date).toISOString(),version:"1.0"},occurrence:{event:n.occurrenceEvent,recordedAt:(new Date).toISOString(),vehicle:{type:n.vehicleNumber,equipment:{category:n.equipmentCategory}}},fault:{classifications:e,phenomenon:n.phenomenonMemo,factors:s},response:{inspection:{procedure:n.inspectionProcedure?n.inspectionProcedure.split("\n").filter(e=>e.trim()):[]},measures:{emergency:n.emergencyMeasures?n.emergencyMeasures.split("\n").filter(e=>e.trim()):[],permanent:n.permanentCountermeasures}},notes:{remarks:n.remarks,recorder:n.recorder}};await(async e=>{try{const s=await fetch("/api/maintenance/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("サーバーへの保存に失敗しました");const a=await s.json();console.log("保存成功:",a)}catch(s){throw console.error("保存エラー:",s),s}})(a),m("記録が正常に保存されました。"),setTimeout(()=>{m("")},3e3),setTimeout(()=>{confirm("フォームをリセットして新しい記録を入力しますか？")&&u()},1e3)}catch(s){console.error("保存エラー:",s),alert("保存中にエラーが発生しました。もう一度お試しください。")}},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"occurrenceEvent",children:["発生事象 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{id:"occurrenceEvent",value:n.occurrenceEvent,onChange:e=>h("occurrenceEvent",e.target.value),placeholder:"例: エンジン停止、冷却水漏れ、異音発生",className:i.occurrenceEvent?"border-red-500":""}),i.occurrenceEvent&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.occurrenceEvent})]}),e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"vehicleNumber",children:["機種 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{id:"vehicleNumber",value:n.vehicleNumber,onChange:e=>h("vehicleNumber",e.target.value),placeholder:"例: フォークリフト、ダンプトラック",className:i.vehicleNumber?"border-red-500":""}),i.vehicleNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.vehicleNumber})]})]}),e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"equipmentCategory",children:["装置カテゴリ・装置名称 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{id:"equipmentCategory",value:n.equipmentCategory,onChange:e=>h("equipmentCategory",e.target.value),placeholder:"例: エンジン系統・冷却装置",className:i.equipmentCategory?"border-red-500":""}),i.equipmentCategory&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.equipmentCategory})]}),e.jsx(U,{faultClassifications:n.faultClassifications,onAdd:()=>{c(e=>({...e,faultClassifications:[...e.faultClassifications,{type:"",custom:""}]}))},onRemove:e=>{n.faultClassifications.length>1&&c(s=>({...s,faultClassifications:s.faultClassifications.filter((s,a)=>a!==e)}))},onUpdate:(e,s,a)=>{c(t=>({...t,faultClassifications:t.faultClassifications.map((t,l)=>l===e?{...t,[s]:a}:t)}))}}),e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"phenomenonMemo",children:["現象メモ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(y,{id:"phenomenonMemo",value:n.phenomenonMemo,onChange:e=>h("phenomenonMemo",e.target.value),placeholder:"故障の現象について詳しく記述してください",rows:4,className:i.phenomenonMemo?"border-red-500":""}),i.phenomenonMemo&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.phenomenonMemo})]}),e.jsx(X,{faultFactors:n.faultFactors,onAdd:()=>{c(e=>({...e,faultFactors:[...e.faultFactors,{type:"",content:""}]}))},onRemove:e=>{n.faultFactors.length>1&&c(s=>({...s,faultFactors:s.faultFactors.filter((s,a)=>a!==e)}))},onUpdate:(e,s,a)=>{c(t=>({...t,faultFactors:t.faultFactors.map((t,l)=>l===e?{...t,[s]:a}:t)}))}}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"inspectionProcedure",children:"現場確認手順"}),e.jsx(y,{id:"inspectionProcedure",value:n.inspectionProcedure,onChange:e=>h("inspectionProcedure",e.target.value),placeholder:"現場での確認手順を記述してください（複数行可）",rows:4})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"emergencyMeasures",children:"応急処置"}),e.jsx(y,{id:"emergencyMeasures",value:n.emergencyMeasures,onChange:e=>h("emergencyMeasures",e.target.value),placeholder:"実施した応急処置について記述してください（複数行可）",rows:4})]})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"permanentCountermeasures",children:"恒久対策"}),e.jsx(y,{id:"permanentCountermeasures",value:n.permanentCountermeasures,onChange:e=>h("permanentCountermeasures",e.target.value),placeholder:"恒久的な対策について記述してください",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"remarks",children:"備考"}),e.jsx(y,{id:"remarks",value:n.remarks,onChange:e=>h("remarks",e.target.value),placeholder:"その他の備考があれば記述してください",rows:3})]}),e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"recorder",children:["記録者 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{id:"recorder",value:n.recorder,onChange:e=>h("recorder",e.target.value),placeholder:"記録者名を入力してください",className:i.recorder?"border-red-500":""}),i.recorder&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.recorder})]})]}),e.jsx("div",{className:"flex justify-center pt-6 border-t",children:e.jsxs(x,{type:"submit",size:"lg",className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"記録を保存"]})})]})]})]})})}function W(){const[o,h]=s.useState(null),[k,C]=s.useState([]),[L,J]=s.useState(!1),[G,U]=s.useState({chunkSize:1e3,chunkOverlap:200,similarityThreshold:.7,maxResults:5,enableSemantic:!0,enableKeyword:!0,customPrompt:"",preprocessing:{removeStopWords:!0,normalizeCasing:!0,removeSpecialChars:!1}}),[V,X]=s.useState({initialPrompt:"何か問題がありましたか？お困りの事象を教えてください！",conversationStyle:"frank",questionFlow:{step1:"具体的な症状を教えてください",step2:"いつ頃から発生していますか？",step3:"作業環境や状況を教えてください",step4:"他に気になることはありますか？",step5:"緊急度を教えてください"},branchingConditions:{timeCheck:!0,detailsCheck:!0,toolsCheck:!0,safetyCheck:!0},responsePattern:"step_by_step",escalationTime:20,customInstructions:"",enableEmergencyContact:!0}),W=p(),Q=s=>{switch(s){case"pending":return e.jsx(j,{variant:"secondary",children:"待機中"});case"processing":return e.jsx(j,{variant:"default",children:"処理中"});case"success":return e.jsx(j,{variant:"default",className:"bg-green-500",children:"完了"});case"error":return e.jsx(j,{variant:"destructive",children:"エラー"});default:return e.jsx(j,{variant:"secondary",children:"不明"})}};return s.useEffect(()=>{(async()=>{try{const e=await fetch("/api/settings/rag",{credentials:"include"});if(e.ok){const s=await e.json(),a=s.success?s.data:s;U(e=>({...e,...a,preprocessing:{removeStopWords:!0,normalizeCasing:!0,removeSpecialChars:!1,...a.preprocessing}}))}}catch(e){}})(),(async()=>{try{const e=localStorage.getItem("aiAssistSettings");e&&X(JSON.parse(e))}catch(e){}})()},[]),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[e.jsx(T,{className:"inline mr-2"}),"基礎データ管理"]}),e.jsx("p",{className:"text-gray-600",children:"保守用車両データの管理とAIの設定を行います"})]}),e.jsxs(n,{defaultValue:"import",className:"w-full",children:[e.jsxs(c,{className:"grid w-full grid-cols-3",children:[e.jsxs(i,{value:"import",className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),"データインポート"]}),e.jsxs(i,{value:"manual",className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"手動入力"]}),e.jsxs(i,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4"}),"AI調整"]})]}),e.jsx(d,{value:"import",className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl shadow-sm",children:[e.jsxs(a,{className:"border-indigo-300 shadow-md",children:[e.jsx(t,{className:"bg-gradient-to-r from-indigo-100 to-purple-100 border-b border-indigo-200",children:e.jsxs(l,{className:"flex items-center gap-2 text-indigo-800",children:[e.jsx(u,{className:"h-5 w-5 text-indigo-600"}),"ファイルインポート"]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"file-upload",children:"ファイルを選択 (TXT, PDF, XLSX, PPTX)"}),e.jsx(v,{id:"file-upload",type:"file",multiple:!0,accept:".txt,.pdf,.xlsx,.pptx",onChange:e=>{const s=e.target.files;if(h(s),s){const e=Array.from(s).map(e=>({fileName:e.name,status:"pending"}));C(e)}},className:"mt-1"})]}),o&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"選択されたファイル:"}),e.jsx("div",{className:"space-y-2",children:k.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:s.fileName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Q(s.status),s.message&&e.jsx("span",{className:"text-xs text-gray-500",children:s.message})]})]},a))})]}),e.jsx(x,{onClick:async()=>{if(o&&0!==o.length){J(!0);try{for(let s=0;s<o.length;s++){const a=o[s];C(e=>e.map((e,a)=>a===s?{...e,status:"processing"}:e));const t=new FormData;t.append("file",a);try{const e=await fetch("/api/files/import",{method:"POST",body:t,credentials:"include"});if(e.ok){const a=await e.json();C(e=>e.map((e,t)=>t===s?{...e,status:"success",message:a.message||"インポート完了"}:e))}else{const a=await e.json();C(e=>e.map((e,t)=>t===s?{...e,status:"error",message:a.message||"インポートエラー"}:e))}}catch(e){C(e=>e.map((e,a)=>a===s?{...e,status:"error",message:"ネットワークエラー"}:e))}}}finally{J(!1)}}else alert("ファイルを選択してください")},disabled:!o||L,className:"w-full",children:L?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"処理中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"インポート実行"]})})]})]}),e.jsxs(a,{children:[e.jsx(t,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-purple-600"}),"ナレッジデータ管理（ライフサイクル）"]})}),e.jsx(r,{children:e.jsx(_,{})})]})]})}),e.jsx(d,{value:"manual",className:"space-y-6",children:e.jsx("div",{className:"p-6 bg-gradient-to-br from-teal-50 to-cyan-50 border border-teal-200 rounded-xl shadow-sm",children:e.jsxs(a,{className:"border-teal-300 shadow-md",children:[e.jsx(t,{className:"bg-gradient-to-r from-teal-100 to-cyan-100 border-b border-teal-200",children:e.jsxs(l,{className:"flex items-center gap-2 text-teal-800",children:[e.jsx(g,{className:"h-5 w-5 text-teal-600"}),"機械故情報入力"]})}),e.jsx(r,{children:e.jsx(K,{})})]})})}),e.jsx(d,{value:"settings",className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-xl shadow-sm space-y-6",children:[e.jsxs(a,{className:"border-purple-300 shadow-md",children:[e.jsx(t,{className:"bg-gradient-to-r from-purple-100 to-pink-100 border-b border-purple-200",children:e.jsxs(l,{className:"flex items-center gap-2 text-purple-800",children:[e.jsx(m,{className:"h-5 w-5 text-purple-600"}),"基本システム設定"]})}),e.jsx(r,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"データディレクトリ"}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded",children:[e.jsx(O,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"/knowledge-base/vehicle-maintenance"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"許可ファイル形式"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"outline",children:"TXT"}),e.jsx(j,{variant:"outline",children:"PDF"}),e.jsx(j,{variant:"outline",children:"XLSX"}),e.jsx(j,{variant:"outline",children:"PPTX"})]})]})]})})]}),e.jsxs(a,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-purple-100",children:[e.jsxs(t,{className:"bg-gradient-to-r from-purple-100 to-purple-200 border-b border-purple-300",children:[e.jsxs(l,{className:"flex items-center gap-2 text-purple-800",children:[e.jsx(E,{className:"h-5 w-5 text-purple-700"}),"AI支援カスタマイズ設定"]}),e.jsx("p",{className:"text-sm text-purple-700",children:"チャットUIのAI支援機能をカスタマイズします"})]}),e.jsxs(r,{className:"space-y-6 bg-white",children:[e.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-blue-800",children:[e.jsx(z,{className:"h-4 w-4 text-blue-600"}),"初期対話設定"]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"initialPrompt",children:"初期メッセージ"}),e.jsx(y,{id:"initialPrompt",value:V.initialPrompt,onChange:e=>X(s=>({...s,initialPrompt:e.target.value})),placeholder:"AI支援開始時の最初の問いかけ...",rows:2}),e.jsx("p",{className:"text-xs text-gray-500",children:"AI支援が開始されたときの最初のメッセージ"})]})})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-green-800",children:[e.jsx(R,{className:"h-4 w-4 text-green-600"}),"会話スタイル"]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"話し方・トーン"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"conversationStyle",value:"frank",checked:"frank"===V.conversationStyle,onChange:e=>X(s=>({...s,conversationStyle:e.target.value})),className:"rounded"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"フランク"}),e.jsx("div",{className:"text-gray-500",children:"親しみやすい"})]})]}),e.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"conversationStyle",value:"business",checked:"business"===V.conversationStyle,onChange:e=>X(s=>({...s,conversationStyle:e.target.value})),className:"rounded"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"ビジネス"}),e.jsx("div",{className:"text-gray-500",children:"丁寧・正式"})]})]}),e.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"conversationStyle",value:"technical",checked:"technical"===V.conversationStyle,onChange:e=>X(s=>({...s,conversationStyle:e.target.value})),className:"rounded"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"技術的"}),e.jsx("div",{className:"text-gray-500",children:"専門用語中心"})]})]})]})]})})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-yellow-800",children:[e.jsx(I,{className:"h-4 w-4 text-yellow-600"}),"質問の流れ設定"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"step1",children:"ステップ1：症状確認"}),e.jsx(v,{id:"step1",value:V.questionFlow.step1,onChange:e=>X(s=>({...s,questionFlow:{...s.questionFlow,step1:e.target.value}})),placeholder:"具体的な症状を聞く質問..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"step2",children:"ステップ2：発生時期"}),e.jsx(v,{id:"step2",value:V.questionFlow.step2,onChange:e=>X(s=>({...s,questionFlow:{...s.questionFlow,step2:e.target.value}})),placeholder:"いつから発生しているかを聞く質問..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"step3",children:"ステップ3：環境確認"}),e.jsx(v,{id:"step3",value:V.questionFlow.step3,onChange:e=>X(s=>({...s,questionFlow:{...s.questionFlow,step3:e.target.value}})),placeholder:"作業環境や状況を聞く質問..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"step4",children:"ステップ4：追加情報"}),e.jsx(v,{id:"step4",value:V.questionFlow.step4,onChange:e=>X(s=>({...s,questionFlow:{...s.questionFlow,step4:e.target.value}})),placeholder:"他に気になることを聞く質問..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"step5",children:"ステップ5：緊急度確認"}),e.jsx(v,{id:"step5",value:V.questionFlow.step5,onChange:e=>X(s=>({...s,questionFlow:{...s.questionFlow,step5:e.target.value}})),placeholder:"緊急度を確認する質問..."})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-orange-800",children:[e.jsx($,{className:"h-4 w-4 text-orange-600"}),"分岐条件設定"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:V.branchingConditions.timeCheck,onChange:e=>X(s=>({...s,branchingConditions:{...s.branchingConditions,timeCheck:e.target.checked}})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"時間経過での分岐（「時間はありますか？」）"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:V.branchingConditions.detailsCheck,onChange:e=>X(s=>({...s,branchingConditions:{...s.branchingConditions,detailsCheck:e.target.checked}})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"詳細確認での分岐（「詳細を教えていただけますか？」）"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:V.branchingConditions.toolsCheck,onChange:e=>X(s=>({...s,branchingConditions:{...s.branchingConditions,toolsCheck:e.target.checked}})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"工具確認での分岐（「必要な工具はありますか？」）"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:V.branchingConditions.safetyCheck,onChange:e=>X(s=>({...s,branchingConditions:{...s.branchingConditions,safetyCheck:e.target.checked}})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"安全確認での分岐（「安全に作業できる状況ですか？」）"})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-cyan-50 border border-cyan-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-cyan-800",children:[e.jsx(q,{className:"h-4 w-4 text-cyan-600"}),"応答パターン"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"情報提供の方法"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"responsePattern",value:"step_by_step",checked:"step_by_step"===V.responsePattern,onChange:e=>X(s=>({...s,responsePattern:e.target.value})),className:"rounded"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"段階的表示（推奨）"}),e.jsx("div",{className:"text-gray-500",children:"1つずつ質問し、1つずつ対策を表示"})]})]}),e.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"responsePattern",value:"comprehensive",checked:"comprehensive"===V.responsePattern,onChange:e=>X(s=>({...s,responsePattern:e.target.value})),className:"rounded"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"包括的表示"}),e.jsx("div",{className:"text-gray-500",children:"まとめて複数の対策を表示"})]})]}),e.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"responsePattern",value:"minimal",checked:"minimal"===V.responsePattern,onChange:e=>X(s=>({...s,responsePattern:e.target.value})),className:"rounded"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"最小限表示"}),e.jsx("div",{className:"text-gray-500",children:"要点のみ簡潔に表示"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-red-800",children:[e.jsx(M,{className:"h-4 w-4 text-red-600"}),"エスカレーション設定"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"escalationTime",children:["救援要請タイムアウト: ",V.escalationTime,"分"]}),e.jsx(f,{id:"escalationTime",min:10,max:60,step:5,value:[V.escalationTime],onValueChange:e=>X(s=>({...s,escalationTime:e[0]})),className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"この時間経過後に専門家への連絡を推奨"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:V.enableEmergencyContact,onChange:e=>X(s=>({...s,enableEmergencyContact:e.target.checked})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"緊急連絡機能を有効化"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"自動で救援要請や支援者への連絡オプションを表示"})]})]})]}),e.jsxs("div",{className:"space-y-2 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx(N,{htmlFor:"customInstructions",className:"text-gray-800 font-medium",children:"追加のカスタム指示"}),e.jsx(y,{id:"customInstructions",value:V.customInstructions,onChange:e=>X(s=>({...s,customInstructions:e.target.value})),placeholder:"GPTに対する追加の指示や制約条件を入力...",rows:3}),e.jsx("p",{className:"text-xs text-gray-500",children:"AI支援の動作をさらに細かくカスタマイズするための指示"})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-purple-200 bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg",children:[e.jsxs(x,{onClick:async()=>{try{localStorage.setItem("aiAssistSettings",JSON.stringify(V)),alert("AI支援設定を保存しました")}catch(e){alert("AI支援設定の保存に失敗しました")}},className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white",children:[e.jsx(F,{className:"h-4 w-4"}),"AI支援設定を保存"]}),e.jsxs(x,{variant:"outline",onClick:()=>W("/chat"),className:"flex items-center gap-2 border-purple-300 text-purple-700 hover:bg-purple-100",children:[e.jsx(E,{className:"h-4 w-4"}),"AI支援を試す"]})]})]})]}),e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"RAG (Retrieval-Augmented Generation) 設定"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"GPTレスポンスの精度向上のための事前処理パラメーター"})]}),e.jsxs(r,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"テキスト分割設定"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"chunkSize",children:["チャンクサイズ: ",G.chunkSize,"文字"]}),e.jsx(f,{id:"chunkSize",min:200,max:2e3,step:100,value:[G.chunkSize],onValueChange:e=>U(s=>({...s,chunkSize:e[0]})),className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"テキストを分割する際の1チャンクあたりの文字数"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"chunkOverlap",children:["オーバーラップ: ",G.chunkOverlap,"文字"]}),e.jsx(f,{id:"chunkOverlap",min:0,max:500,step:50,value:[G.chunkOverlap],onValueChange:e=>U(s=>({...s,chunkOverlap:e[0]})),className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"チャンク間で重複させる文字数"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"検索精度設定"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"similarityThreshold",children:["類似度閾値: ",G.similarityThreshold]}),e.jsx(f,{id:"similarityThreshold",min:.1,max:1,step:.1,value:[G.similarityThreshold],onValueChange:e=>U(s=>({...s,similarityThreshold:e[0]})),className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"検索結果として採用する最小類似度"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"maxResults",children:["最大取得件数: ",G.maxResults,"件"]}),e.jsx(f,{id:"maxResults",min:1,max:20,step:1,value:[G.maxResults],onValueChange:e=>U(s=>({...s,maxResults:e[0]})),className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"1回の検索で取得する最大結果数"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"検索手法"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:G.enableSemantic,onChange:e=>U(s=>({...s,enableSemantic:e.target.checked})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"セマンティック検索"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:G.enableKeyword,onChange:e=>U(s=>({...s,enableKeyword:e.target.checked})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"キーワード検索"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"テキスト前処理"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:G.preprocessing.removeStopWords,onChange:e=>U(s=>({...s,preprocessing:{...s.preprocessing,removeStopWords:e.target.checked}})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"ストップワード除去"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:G.preprocessing.normalizeCasing,onChange:e=>U(s=>({...s,preprocessing:{...s.preprocessing,normalizeCasing:e.target.checked}})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"大文字小文字正規化"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:G.preprocessing.removeSpecialChars,onChange:e=>U(s=>({...s,preprocessing:{...s.preprocessing,removeSpecialChars:e.target.checked}})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"特殊文字除去"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"customPrompt",children:"カスタムプロンプト"}),e.jsx(y,{id:"customPrompt",value:G.customPrompt,onChange:e=>U(s=>({...s,customPrompt:e.target.value})),placeholder:"RAG検索結果を活用する際の追加指示を入力...",rows:3}),e.jsx("p",{className:"text-xs text-gray-500",children:"検索結果をGPTに渡す際の追加指示"})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(x,{onClick:async()=>{try{if(!(await fetch("/api/settings/rag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G),credentials:"include"})).ok)throw new Error("設定の保存に失敗しました");alert("RAG設定が保存されました")}catch(e){alert("設定の保存中にエラーが発生しました")}},className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4"}),"RAG設定を保存"]}),e.jsxs(x,{variant:"outline",onClick:()=>W("/chat"),className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),"チャット画面に戻る"]})]})]})]}),e.jsx(B,{})]})})]})]})}function _(){const[a,t]=s.useState({totalFiles:0,totalSize:0,duplicates:0,lastMaintenance:null,exportFiles:0,documentFiles:0,archivedFiles:0}),[l,r]=s.useState(!1),[n,c]=s.useState("manual"),i=async()=>{var e,s;try{const a=await fetch("/api/knowledge-base/stats");if(a.ok){const l=await a.json();if(l.success&&l.data){const a=l.data;return void t({totalFiles:a.total||0,totalSize:a.totalSize||0,duplicates:0,lastMaintenance:a.lastMaintenance,exportFiles:(null==(e=a.typeStats)?void 0:e.json)||0,documentFiles:(null==(s=a.typeStats)?void 0:s.document)||0,archivedFiles:a.oldData||0})}}const l=await fetch("/api/admin/dashboard");if(l.ok){const e=await l.json();t(e.storageStats||{totalFiles:0,totalSize:0,duplicates:0,lastMaintenance:null,exportFiles:0,documentFiles:0,archivedFiles:0})}}catch(a){t({totalFiles:0,totalSize:0,duplicates:0,lastMaintenance:null,exportFiles:0,documentFiles:0,archivedFiles:0})}};return s.useEffect(()=>{i()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(u,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"総ファイル数"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.totalFiles}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["エクスポート: ",a.exportFiles||0," | ドキュメント: ",a.documentFiles||0]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(T,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"総容量"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[(a.totalSize/1024/1024).toFixed(1),"MB"]}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["アーカイブ: ",a.archivedFiles||0," ファイル"]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(M,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"重複データ"})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.duplicates}),e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"要整理データあり"})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"最終整理"})]}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:a.lastMaintenance?new Date(a.lastMaintenance).toLocaleDateString("ja-JP"):"未実行"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"次回: 2026/1/1"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4"}),"ライフサイクル管理操作"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{className:"text-sm font-medium",children:"整理ポリシー"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"policy",value:"manual",checked:"manual"===n,onChange:e=>c(e.target.value),className:"form-radio"}),e.jsx("span",{className:"text-sm",children:"手動整理のみ"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"policy",value:"aggressive",checked:"aggressive"===n,onChange:e=>c(e.target.value),className:"form-radio"}),e.jsx("span",{className:"text-sm",children:"積極的整理（6ヶ月以上の古いデータ）"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"policy",value:"conservative",checked:"conservative"===n,onChange:e=>c(e.target.value),className:"form-radio"}),e.jsx("span",{className:"text-sm",children:"保守的整理（1年以上の古いデータ）"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{className:"text-sm font-medium",children:"管理操作"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:async()=>{r(!0);try{(await fetch("/api/knowledge/maintenance/run",{method:"POST"})).ok&&await i()}catch(e){}finally{r(!1)}},disabled:l,className:"flex items-center gap-2 text-xs",children:[e.jsx(L,{className:"h-3 w-3 "+(l?"animate-spin":"")}),"自動整理"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:async()=>{r(!0);try{(await fetch("/api/knowledge/deduplication/resolve",{method:"POST"})).ok&&await i()}catch(e){}finally{r(!1)}},disabled:l,className:"flex items-center gap-2 text-xs",children:[e.jsx($,{className:"h-3 w-3"}),"重複解決"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:i,disabled:l,className:"flex items-center gap-2 text-xs",children:[e.jsx(q,{className:"h-3 w-3"}),"状況更新"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{alert("アーカイブ表示機能は準備中です")},disabled:l,className:"flex items-center gap-2 text-xs",children:[e.jsx(T,{className:"h-3 w-3"}),"アーカイブ"]})]})]})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-red-800 mb-3 flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"ナレッジデータ削除"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{className:"text-sm font-medium",children:"削除オプション"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("1年以上経過したナレッジデータを削除しますか？この操作は取り消せません。")){r(!0);try{const e=await fetch("/api/knowledge-base/cleanup/auto",{method:"POST"});if(!e.ok){const s=await e.json();throw new Error(s.error||"削除に失敗しました")}{const s=await e.json(),a=document.getElementById("cleanup-results");a&&(a.innerHTML=`\n            <div class="text-green-600">\n              <strong>削除完了:</strong> ${s.deletedCount}件のファイルを削除しました<br>\n              <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `),await i()}}catch(e){const s=document.getElementById("cleanup-results");s&&(s.innerHTML=`\n          <div class="text-red-600">\n            <strong>削除エラー:</strong> ${e.message}<br>\n            <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{r(!1)}}},disabled:l,className:"w-full flex items-center gap-2 text-xs text-orange-700 border-orange-300 hover:bg-orange-50",children:[e.jsx(L,{className:"h-3 w-3 "+(l?"animate-spin":"")}),"1年以上経過データを削除"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("6ヶ月以上経過したナレッジデータを削除しますか？この操作は取り消せません。")){r(!0);try{const e=await fetch("/api/knowledge-base/cleanup/manual",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({olderThanDays:180})});if(!e.ok){const s=await e.json();throw new Error(s.error||"削除に失敗しました")}{const s=await e.json(),a=document.getElementById("cleanup-results");a&&(a.innerHTML=`\n            <div class="text-green-600">\n              <strong>削除完了:</strong> ${s.deletedCount}件のファイルを削除しました<br>\n              <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `),await i()}}catch(e){const s=document.getElementById("cleanup-results");s&&(s.innerHTML=`\n          <div class="text-red-600">\n            <strong>削除エラー:</strong> ${e.message}<br>\n            <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{r(!1)}}},disabled:l,className:"w-full flex items-center gap-2 text-xs text-orange-700 border-orange-300 hover:bg-orange-50",children:[e.jsx(M,{className:"h-3 w-3"}),"6ヶ月以上経過データを削除"]}),e.jsxs(x,{variant:"destructive",size:"sm",onClick:async()=>{if("DELETE ALL"===prompt("全てのナレッジデータを削除します。この操作は取り消せません。\n「DELETE ALL」と入力して確認してください:")){r(!0);try{const e=await fetch("/api/knowledge-base/cleanup/manual",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deleteAll:!0})});if(!e.ok){const s=await e.json();throw new Error(s.error||"削除に失敗しました")}{const s=await e.json(),a=document.getElementById("cleanup-results");a&&(a.innerHTML=`\n            <div class="text-green-600">\n              <strong>全削除完了:</strong> ${s.deletedCount}件のファイルを削除しました<br>\n              <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `),await i()}}catch(e){const s=document.getElementById("cleanup-results");s&&(s.innerHTML=`\n          <div class="text-red-600">\n            <strong>削除エラー:</strong> ${e.message}<br>\n            <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{r(!1)}}},disabled:l,className:"w-full flex items-center gap-2 text-xs",children:[e.jsx(T,{className:"h-3 w-3"}),"全ナレッジデータを削除"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{className:"text-sm font-medium",children:"エクスポートオプション"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>(async e=>{r(!0);try{const s=await fetch("/api/knowledge-base/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e})});if(!s.ok){const e=await s.json();throw new Error(e.error||"エクスポートに失敗しました")}{const e=await s.blob(),a=window.URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download=`knowledge-export-${(new Date).toISOString().replace(/[:.]/g,"-")}.zip`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(a);const l=document.getElementById("cleanup-results");l&&(l.innerHTML=`\n            <div class="text-green-600">\n              <strong>📦 エクスポート完了:</strong> ダウンロードが開始されました<br>\n              <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `)}}catch(s){const e=document.getElementById("cleanup-results");e&&(e.innerHTML=`\n          <div class="text-red-600">\n            <strong>❌ エクスポートエラー:</strong> ${s.message}<br>\n            <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{r(!1)}})("all"),disabled:l,className:"w-full flex items-center gap-2 text-xs text-green-700 border-green-300 hover:bg-green-50",children:[e.jsx(L,{className:"h-3 w-3 "+(l?"animate-spin":"")}),"全データエクスポート"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:async()=>{r(!0);try{const e=await fetch("/api/knowledge-base/archives"),s=await e.json(),a=document.getElementById("cleanup-results");if(a)if(s.success&&s.data.length>0){const e=s.data.map(e=>`• ${e.name} (${(e.size/1024).toFixed(1)}KB) - ${new Date(e.createdAt).toLocaleString("ja-JP")}`).join("<br>");a.innerHTML=`\n            <div class="text-blue-600">\n              <strong>📁 アーカイブ一覧 (${s.total}件):</strong><br>\n              ${e}<br>\n              <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `}else a.innerHTML=`\n            <div class="text-gray-600">\n              <strong>📁 アーカイブ一覧:</strong> アーカイブが見つかりません<br>\n              <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n            </div>\n          `}catch(e){const s=document.getElementById("cleanup-results");s&&(s.innerHTML=`\n          <div class="text-red-600">\n            <strong>❌ アーカイブ取得エラー:</strong> ${e.message}<br>\n            <small>実行時刻: ${(new Date).toLocaleString("ja-JP")}</small>\n          </div>\n        `)}finally{r(!1)}},disabled:l,className:"w-full flex items-center gap-2 text-xs text-blue-700 border-blue-300 hover:bg-blue-50",children:[e.jsx(T,{className:"h-3 w-3"}),"アーカイブ一覧表示"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{className:"text-sm font-medium",children:"操作実行結果"}),e.jsx("div",{className:"p-3 bg-white rounded border text-xs",children:e.jsx("div",{id:"cleanup-results",className:"text-gray-600",children:"削除・エクスポート操作を実行するとここに結果が表示されます"})})]})]})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-lg",children:[e.jsxs("h5",{className:"font-medium text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"注意事項"]}),e.jsxs("div",{className:"text-sm text-amber-700 space-y-1",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"自動削除:"})," 毎日午前2時に1年以上経過したデータを自動削除"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"手動削除:"})," 上記のボタンでいつでも任意に削除可能"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"削除したデータ:"})," 復元できませんので慎重に実行してください"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"バックアップ:"})," 重要なデータは事前にエクスポートを推奨"]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:[e.jsxs("h5",{className:"font-medium text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),"ナレッジデータライフサイクル管理について"]}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"自動削除:"})," 毎日午前2時に1年以上経過したデータを自動削除"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"手動削除:"})," 上記のボタンでいつでも任意に削除可能"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"自動収集:"})," チャット画面からのデータ送信時に自動でナレッジベースに追加"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"手動更新:"})," 機械故障履歴の編集保存時に自動でGPTナレッジに反映"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"重複チェック:"})," 30分間隔で重複データを自動検出"]})]})]})]})}export{W as default};
