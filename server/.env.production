 ================================================
# 実行環境設定
# ================================================
NODE_ENV=production
PORT=8080

# ================================================
# データベース設定 (PostgreSQL)
# ================================================
# postgresql://username:password@host:5432/database?sslmode=require
DATABASE_URL=postgresql://username:password@server.postgres.database.azure.com:5432/database_name
PG_SSL=require

# ================================================
# セキュリティ設定
# ================================================
SESSION_SECRET=your-session-secret-32-characters-minimum
JWT_SECRET=your-jwt-secret-32-characters-minimum
BCRYPT_SALT_ROUNDS=12
BYPASS_DB_FOR_LOGIN=false

# ================================================
# OpenAI設定
# ================================================
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-4o
OPENAI_EMERGENCY_MODEL=gpt-4o
OPENAI_KNOWLEDGE_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7
OPENAI_ORG_ID=

# ================================================
# Azure Blob Storage設定 (本番環境 - ファイル保存に必須)
# ================================================
# 重要: これらの設定はGitHub Secretsで設定され、CI/CDパイプラインで自動的にApp Serviceに設定されます
# 詳細: ../docs/BLOB_SETUP.md を参照してください

# Azure Storage接続文字列 (必須)
# 形式: DefaultEndpointsProtocol=https;AccountName=<account>;AccountKey=<key>;EndpointSuffix=core.windows.net
# 取得方法: az storage account show-connection-string --name <account-name>
# GitHub Secret名: AZURE_STORAGE_CONNECTION_STRING
# ⚠️ 重要: この値は GitHub Secrets で設定され、CI/CD で自動的に App Service に設定されます
# 例（参考）: DefaultEndpointsProtocol=https;AccountName=rgemergencyassistanb25b;AccountKey=...
AZURE_STORAGE_CONNECTION_STRING=

# ストレージアカウント名 (必須 - BLOBサービスクライアント初期化に使用)
# Azure Portal または az storage account list で確認
# GitHub Secret名: AZURE_STORAGE_ACCOUNT_NAME
# ✅ 設定済み: rgemergencyassistanb25b
AZURE_STORAGE_ACCOUNT_NAME=rgemergencyassistanb25b

# ストレージアカウントキー (オプション - 接続文字列に含まれている場合は不要)
# GitHub Secret名: AZURE_STORAGE_ACCOUNT_KEY
# ✅ 設定済み
AZURE_STORAGE_ACCOUNT_KEY=QYvpMTeeNO************************Q2bGrz/NCJa+AStxGyDfw==

# Blobコンテナ名 (必須 - デフォルト: "knowledge" または "emergency-exports")
# 格納される主なファイル:
#  - 故障履歴データ (fault_history_*.json + *.png)
#  - 機械・機種管理データ (machines_*.json)
#  - トラブルシューティングデータ (troubleshooting_*.json + *.png)
# GitHub Secret名: AZURE_STORAGE_CONTAINER_NAME
# ✅ 設定済み: knowledge
AZURE_STORAGE_CONTAINER_NAME=knowledge

# BLOBパスプレフィックス (オプション - デフォルト: "knowledge-base/")
# コンテナ内でのファイル整理に使用
# GitHub Secret名: BLOB_PREFIX
# ✅ 設定済み: knowledge-base/
BLOB_PREFIX=knowledge-base/

# ================================================
# ストレージモード設定
# ================================================
# hybrid / blob / local
# ✅ 設定済み: hybrid
STORAGE_MODE=hybrid

# ================================================
# パス設定
# ================================================
KNOWLEDGE_BASE_PATH=/app/knowledge-base
LOCAL_EXPORT_DIR=/app/knowledge-base/exports
CHAT_EXPORTS_PATH=/app/knowledge-base/exports
IMAGES_BASE_PATH=/app/knowledge-base/images
CHAT_IMAGES_PATH=/app/knowledge-base/images/chat-exports
FAULT_HISTORY_IMAGES_DIR=/app/knowledge-base/images/chat-exports

# ================================================
# フロントエンドURL設定
# ================================================
FRONTEND_URL=https://your-static-web-app.azurestaticapps.net
STATIC_WEB_APP_URL=https://your-static-web-app.azurestaticapps.net
CORS_ALLOW_ORIGINS=https://your-static-web-app.azurestaticapps.net,http://localhost:5173,http://localhost:8080

# ================================================
# APIエンドポイント設定
# ================================================
API_BASE_URL=https://your-backend.azurewebsites.net/api
API_PREFIX=/api

# ================================================
# ナレッジベース設定
# ================================================
KNOWLEDGE_BASE_ENABLED=true

# ================================================
# セッション設定
# ================================================
SESSION_DRIVER=database
SESSION_LIFETIME=60

# ================================================
# デバッグ・開発設定
# ================================================
DEBUG_MODE=false
HOT_RELOAD=false
VERBOSE_LOGGING=false
LOCAL_DEV=false

# ================================================
# バックアップ設定
# ================================================
BACKUP_ENABLED=true
BACKUP_MAX_FILES=10
BACKUP_FOLDER_NAME=backups
DATABASE_BACKUP=false
