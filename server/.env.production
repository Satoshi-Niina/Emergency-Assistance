# Emergency Assistance - Production Environment Template
# 本番環境専用設定 - Azure App Service用

# ================================================
# Production Environment Configuration
# ================================================
NODE_ENV=production
PORT=

# ================================================
# API Configuration (Production)
# ================================================
API_BASE_URL=https://emergency-assistantapp-gwgscxcca5cahyb9.japanwest-01.azurewebsites.net/api
API_PREFIX=/api

# ================================================
# Database Configuration (Production)
# ================================================
# Set this in Azure App Service Configuration
DATABASE_URL=postgresql://username:password@server.postgres.database.azure.com:5432/database_name
PG_SSL=require

# ================================================
# Security Configuration (Production)
# ================================================
# Set these in Azure App Service Configuration
JWT_SECRET=production-jwt-secret-32-chars-minimum
SESSION_SECRET=production-session-secret-32-chars-minimum
BCRYPT_SALT_ROUNDS=12

# Production settings
BYPASS_DB_FOR_LOGIN=false

# ================================================
# OpenAI Configuration (Production)
# ================================================
# Set this in Azure App Service Configuration
OPENAI_API_KEY=your-production-openai-key
OPENAI_MODEL=gpt-4o
OPENAI_ORG_ID=
OPENAI_EMERGENCY_MODEL=gpt-4o
OPENAI_KNOWLEDGE_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# ================================================
# CORS Configuration (Production)
# ================================================
CORS_ALLOW_ORIGINS=https://witty-river-012f39e00.1.azurestaticapps.net,https://emergency-assistantapp-gwgscxcca5cahyb9.japanwest-01.azurewebsites.net,https://happy-bush-083160b00.3.azurestaticapps.net
STATIC_WEB_APP_URL=https://witty-river-012f39e00.1.azurestaticapps.net
FRONTEND_URL=https://witty-river-012f39e00.1.azurestaticapps.net

# ================================================
# Production Settings
# ================================================
LOCAL_DEV=false
KNOWLEDGE_BASE_PATH=/home/site/wwwroot/knowledge-base
IMAGES_BASE_PATH=/home/site/wwwroot/knowledge-base/images
KNOWLEDGE_BASE_ENABLED=true
CHAT_EXPORTS_PATH=/home/site/wwwroot/knowledge-base/exports
CHAT_IMAGES_PATH=/home/site/wwwroot/knowledge-base/images/chat-exports
FAULT_HISTORY_IMAGES_DIR=/home/site/wwwroot/knowledge-base/images/chat-exports

# ================================================
# Storage Mode Configuration (Production)
# ================================================
# 標準: ファイルシステムに保存
# 'hybrid': ファイル + Azure BLOB Storage（推奨: 本番環境）
STORAGE_MODE=hybrid

# エクスポートファイル保存先（本番環境）
LOCAL_EXPORT_DIR=/home/site/wwwroot/knowledge-base/exports

# ================================================
# Database Backup Configuration (Optional)
# ================================================
# DBバックアップを有効化する場合は true に設定
# デフォルト: false（ファイルシステムのみ）
# DATABASE_BACKUP=true
# 注: DATABASE_BACKUPを有効にする場合は DATABASE_URL も設定必須

# ================================================
# Session Configuration (Production)
# ================================================
SESSION_DRIVER=database
SESSION_LIFETIME=60

# ================================================
# Azure Configuration (Production)
# ================================================
# Set these in Azure App Service Configuration
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=xxx;AccountKey=xxx;EndpointSuffix=core.windows.net
AZURE_STORAGE_ACCOUNT_NAME=yourstorageaccount
AZURE_STORAGE_ACCOUNT_KEY=yourstoragekey
AZURE_STORAGE_CONTAINER_NAME=knowledge
BLOB_CONTAINER_NAME=knowledge
BLOB_PREFIX=knowledge-base/

# ================================================
# Production Features
# ================================================
DEBUG_MODE=false
HOT_RELOAD=false
VERBOSE_LOGGING=false

# ================================================
# File Backup Configuration (Production)
# ================================================
# 古いJSONファイルのバックアップ設定（変更履歴用）
# DBバックアップとは別の機能
BACKUP_ENABLED=true
BACKUP_MAX_FILES=10
BACKUP_FOLDER_NAME=backups
