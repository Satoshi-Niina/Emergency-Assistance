# Emergency Assistance - Production Environment Template
# 本番環境専用設定 - Azure App Service用

# ================================================
# Production Environment Configuration
# ================================================
NODE_ENV=production
PORT=80

# ================================================
# API Configuration (Production)
# ================================================
API_BASE_URL=https://emergency-assistance-bfckhjejb3fbf9du.japanwest-01.azurewebsites.net/api
API_PREFIX=/api

# ================================================
# Database Configuration (Production)
# ================================================
# Set this in Azure App Service Configuration
DATABASE_URL=postgresql://username:password@server.postgres.database.azure.com:5432/database_name

# ================================================
# Security Configuration (Production)
# ================================================
# Set these in Azure App Service Configuration
JWT_SECRET=production-jwt-secret-32-chars-minimum
SESSION_SECRET=production-session-secret-32-chars-minimum
BCRYPT_SALT_ROUNDS=12

# Production settings
BYPASS_DB_FOR_LOGIN=false

# ================================================
# OpenAI Configuration (Production)
# ================================================
# Set this in Azure App Service Configuration
OPENAI_API_KEY=your-production-openai-key
OPENAI_MODEL=gpt-4o
OPENAI_ORG_ID=
OPENAI_EMERGENCY_MODEL=gpt-4o
OPENAI_KNOWLEDGE_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# ================================================
# CORS Configuration (Production)
# ================================================
CORS_ALLOW_ORIGINS=https://witty-river-012f39e00.1.azurestaticapps.net,https://emergency-assistance-bfckhjejb3fbf9du.japanwest-01.azurewebsites.net
STATIC_WEB_APP_URL=https://witty-river-012f39e00.1.azurestaticapps.net
FRONTEND_URL=https://witty-river-012f39e00.1.azurestaticapps.net

# ================================================
# Production Settings
# ================================================
LOCAL_DEV=false
KNOWLEDGE_BASE_PATH=/home/site/wwwroot/knowledge-base
IMAGES_BASE_PATH=/home/site/wwwroot/knowledge-base/images
KNOWLEDGE_BASE_ENABLED=true
CHAT_EXPORTS_PATH=/home/site/wwwroot/knowledge-base/exports
CHAT_IMAGES_PATH=/home/site/wwwroot/knowledge-base/images/chat-exports
FAULT_HISTORY_IMAGES_DIR=/home/site/wwwroot/knowledge-base/images/chat-exports

# ================================================
# Storage Mode Configuration (Production)
# ================================================
# 'hybrid' (推奨): DBとファイル両方に保存 - 高速検索 + バックアップ容易
# 'database': DBのみ - 最速、ファイル不要（推奨: 大規模システム）
STORAGE_MODE=hybrid

# エクスポートファイル保存先（ハイブリッド・ファイルモード用）
LOCAL_EXPORT_DIR=/home/site/wwwroot/knowledge-base/exports

# ================================================
# Session Configuration (Production)
# ================================================
SESSION_DRIVER=database
SESSION_LIFETIME=60

# ================================================
# Azure Configuration (Production)
# ================================================
# Set these in Azure App Service Configuration
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=xxx;AccountKey=xxx;EndpointSuffix=core.windows.net
AZURE_STORAGE_ACCOUNT_NAME=yourstorageaccount
AZURE_STORAGE_ACCOUNT_KEY=yourstoragekey
AZURE_CONTAINER_NAME=emergency-uploads

# ================================================
# Production Features
# ================================================
DEBUG_MODE=false
HOT_RELOAD=false
VERBOSE_LOGGING=false

# ================================================
# Backup Configuration (Production)
# ================================================
# JSONファイルバックアップは無効（DBをメインバックアップとして使用）
# ハイブリッドモードではDBに保存されるため、JSONバックアップは不要
BACKUP_ENABLED=false
BACKUP_MAX_FILES=0
BACKUP_FOLDER_NAME=backups
